ProfileAvailability: #xd page number: 86
  pageNumber: "540" 
  init:
    - .SignInCheck
    - .Global.formData.scheduleType@: ""
    - .Global.currentSchedule@: []
    - =..visitReason.docAPI.get: ""
    - actionType: evalObject
      object:
        - .Global.formData.scheduleDuration@: =..visitReason.response.doc.0.name.data.reasonForVisit.duration
    - actionType: evalObject
      object: .BaseDate.getDate
    - =.builtIn.object.extractArray: 
        dataIn: 
          obj: =..visitReason.response.doc.0.name.data.reasonForVisit
          arr: =..formData.dataStruc
        dataOut: ProfileAvailability.middleStruc  
    - .ProfileAvailability.tableData.dataObject@: =..middleStruc
  viewPort: top  
  title: "ProfileAvailability"
  visitReason: 
    response: ""
    document: 
      type: .DocType.VisitReason
      name: 
        data:
          reasonForVisit: []
    docAPI: 
      get: 
        .DocAPI.get: ""
        api: rd
        dataKey: visitReason.response
        type: .DocType.VisitReason
        id: .Global.acceptInfo.bsig
        xfname: "ovid"
        obfname: "ctime"
        _nonce: =.Global_nonce
  middleStruc: {}
  tableData: 
    chartType: "table"
    # allowOnclick: 
    #   # value: EDIT
    #   color: "#2988e6"
    #   buttonColor: "#ffffff"
    tableHeader: 
      - Reason for visit
      - Duration
    dataHeader: 
      - reason 
      - duration
    dataObject:
    response: 
    attribute: 
      # search: 'search'
      sort: "true"
      pagination: "10"

  formData:
    dataStruc:
      - reason 
      - duration
  
  blockOffDay: []
  selectDate: ""
  blockBusinessDay: ""
  blockGovernDay: ""
  components:
    - .SideMenuBar:
      children:
        - .aitLogo:
        - .MenuBar:
    - .TopBar:
      style: 
    - .BodyView:
      style:
        position: fixed
      children:
    - .ContentView:
      style: 
        height: "0.85"
        left: "0.19"
        top: "0.145"
        position: fixed
      children:
        - type: view
          style:
            top: "0"
            left: "0"
          children:
            - type: image
              path: 
                emit: 
                  actions: 
                    - if: 
                      - =.Global.acceptInfo.name.inviteeAvatar.data
                      - .Global.acceptInfo.name.inviteeAvatar.data
                      - ava.png
              # path=func: .builtIn.utils.prepareDocToPath
              # dataKey: Global.acceptInfo.name.inviteeAvatar
              style:
                top: "0.05"
                left: "0.045"
                width: "0.06"
            - type: label
              text: Active
              style:
                top: "0.075"
                left: "0.16"
                width: "0.04" 
                fontSize: "14"
                fontStyle: "500"
                color: "#42b963"
            - type: label
              dataKey: Global.acceptInfo.name.inviteeName
              style:
                top: "0.11"
                left: "0.16"
                width: "0.15"
                fontSize: "16"
                fontFamily: Poppins
                color: "#646d82"
            - type: label
              dataKey: Global.acceptInfo.name.inviteeCategory
              style:
                top: "0.15"
                left: "0.16"
                width: "0.06"
                fontSize: "14"
                fontFamily: Poppins
                color: "#a6b1c2"
        - type: view
          style:
            left: "0.5"
            width: "0.28"
            top: "0"
            height: "0.83"
            boxShadow: "0px -3px 3px 2px #f0f0f0"
          children:
            - type: label
              text: Availability Settings
              style:
                left: "0.02"
                top: "0.11"
                width: "0.12"
                color: "#000000"
                fontSize: "16"
            - .RightButton:
              onClick:
                - goto: SchduleSetting
              text: Add new availability
              style:
                top: "0.3"
            - .RightButton:
              onClick:
                - actionType: popUp
                  popUpView: Blocked-off
              text: Blocked-off days / Holidays
              style:
                top: "0.47"
            - .RightButton:
              style:
                top: "0.64"
              onClick:
                - actionType: popUp
                  popUpView: ScheduleQRcode
              children:
                - type: image
                  path: scheduleQRcode.png
                  style:
                    width: "0.045"
                    top: "0.013"
                    left: "0.01"
                - type: label
                  text: Schedule QR code
                  style:
                    left: "0.067"
                    top: "0.02"
                    width: "0.13"
                    fontSize: "1.8vh"
                    textAlign:
                      x: left
                - type: label
                  textBoard:
                    - text: Share your schedule with your
                    - br:
                    - text: patients to
                  style:
                    fontSize: "12"
                    left: "0.067"
                    width: "0.13"
                    top: "0.05"
                    textAlign:
                      x: left
        - type: view
          style:
            width: "0.45"
            height: "0.6"
            top: "0.21"
            left: "0.032"
          children:
            - type: label
              text: Providers Availability
              style:
                left: "0"
                top: "0.03"
                width: "0.125"
                color: "#000000"
                fontSize: "16"
            - type: chart
              dataKey: tableData
              style: 
                top: "0.09"
                width: "0.42"
                left: "0"
                height: "0.5"
                margin: "0"
                # overflow: "hidden"
     
    - type: popUp
      viewTag: Blocked-off
      style:
        width: "1"
        top: "0"
        left: "0"
        height: "1"
        backgroundColor: "0x00000033"
      children:
        - type: view
          style:
            left: "0.6"
          children:
            - .PopUphead:
              children:
                - .CreateLabel:
                  text: "Blocked-off days"
                - .Closebutton:
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: Blocked-off
            - type: view
              style:
                height: "0.92"
                width: "0.4"
                top: "0.08"
                backgroundColor: "0xffffff"   
              children:
                - .Label1:
                  text: "Enter Date"
                  style:  
                    height: "0.03"
                    left: "0.05" 
                    width: "0.2" 
                    marginTop: "0.06"
                - type: view
                  style: 
                    width: "0.4"
                    left: "0"
                    marginTop: "0.01"
                    height: "0.04"
                  children: 
                    - type: textField
                      placeholder: "dd/mm/yyyy"
                      viewTag: dateView
                      dataKey: selectDate
                      style:
                        width: "0.2"
                        left: "0.05"
                        top: "0"
                        height: "0.04"
                        color: "0x000000"
                        border:
                          style: "3" 
                        borderColor: "#DCDCDC"
                        textIndent: '10px'
                    - type: view
                      style:
                        width: "0.027"
                        left: "0.254"
                        top: "0"
                        height: "0.044"
                        border:
                          style: "5" 
                        borderRadius: "2"
                        backgroundColor: "#f3f3f3"
                      children: 
                        - type: image
                          path: addDeepBule.png
                          onClick: 
                            - emit: 
                                actions: 
                                  - =.builtIn.array.add: 
                                      dataIn: 
                                        object: =..blockOffDay
                                        value: =..selectDate
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: blockOffDayView
                          style: 
                            left: "0.0075"
                            width: "0.012"
                            top: "0.009"
                    - .BottomButton:
                      text: 'Select Date'
                      onClick: 
                        - actionType: popUp
                          popUpView: calenderView
                      style:
                        left: '0.3'
                        top: '0'
                        height: "0.043"
                        width: "0.078"
                        color: '#005795'
                        fontSize: "1.7vh"
                        border:
                          style: "3" 
                        borderWidth: "3"
                        borderColor: "#005795"
                        backgroundColor: '0xffffff'
                        borderRadius: "5"
                - type: view
                  style:
                    width: "0.4"
                    height: "auto"
                    left: "0"
                    marginTop: "0.05"
                  children:
                    - type: view
                      style: 
                        marginTop: "0.03"
                        width: "0.8"
                        height: "0.03"
                      children:  
                        - type: image
                          viewTag: GovernmentHoliday
                          path: 
                            emit:
                              actions:
                                - if:
                                  - =.ProfileAvailability.blockGovernDay
                                  - solidBlock.png
                                  - square.png
                          onClick:
                            - emit:
                                actions:
                                  - if: 
                                      - =.ProfileAvailability.blockGovernDay
                                      - .ProfileAvailability.blockGovernDay@: ""
                                      - .ProfileAvailability.blockGovernDay@: "true"
                            - actionType: evalObject
                              object:
                                - if: 
                                  - =.builtIn.string.equal: 
                                      dataIn: 
                                        string1: =.ProfileAvailability.blockGovernDay
                                        string2: "true"
                                  - actionType: evalObject
                                    object:
                                      - actionType: builtIn
                                        funcName: show
                                        viewTag: governHoliday
                                  - actionType: evalObject
                                    object:
                                      - actionType: builtIn
                                        funcName: hide
                                        viewTag: governHoliday
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: GovernmentHoliday
                          style:
                            left: "0.05"
                            top: "0.002"
                            height: "0.02"
                        - type: label
                          text: Block off Government holliday
                          style:
                            left: "0.07"
                            fontSize: "16"
                            top: "0"
                            height: "0.03"
                    - type: view
                      viewTag: governHoliday
                      style: 
                        marginTop: "0.01"
                        width: "0.4"
                        height: "auto"
                        display: none
                        left: "0"
                        isHidden: true
                      children:
                        - type: select
                          style:
                            height: "auto"
                            width: "0.15"
                            fontSize: "14"
                            left: "0.05"
                            fontFamily: sans-serif
                            border: 
                              style: "2"
                          dataKey: formData.currentGovermentHoliday
                          options:  
                            .GovermentHoliday
                - type: view
                  style:
                    width: "0.4"
                    height: "auto"
                    left: "0"
                    marginTop: "0.01"
                  children:
                    - type: view
                      style: 
                        marginTop: "0.03"
                        width: "0.8"
                        height: "0.03"
                      children:  
                        - type: image
                          viewTag: busiHoliday
                          path: 
                            emit:
                              actions:
                                - if:
                                  - =.ProfileAvailability.blockBusinessDay
                                  - solidBlock.png
                                  - square.png
                          onClick:
                            - emit:
                                actions:
                                  - if: 
                                      - =.ProfileAvailability.blockBusinessDay
                                      - .ProfileAvailability.blockBusinessDay@: ""
                                      - .ProfileAvailability.blockBusinessDay@: "true"
                            - actionType: evalObject
                              object:
                                - if: 
                                  - =.builtIn.string.equal: 
                                      dataIn: 
                                        string1: =.ProfileAvailability.blockBusinessDay
                                        string2: "true"
                                  - actionType: evalObject
                                    object:
                                      - actionType: builtIn
                                        funcName: show
                                        viewTag: bus
                                  - actionType: evalObject
                                    object:
                                      - actionType: builtIn
                                        funcName: hide
                                        viewTag: busiHoliday
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: busiHoliday
                          style:
                            left: "0.05"
                            top: "0.002"
                            height: "0.02"
                        - type: label
                          text: Block off Business hollidays
                          style:
                            left: "0.07"
                            fontSize: "16"
                            top: "0"
                            height: "0.03"
                - type: view
                  style: 
                    marginTop: "0.03"
                    width: "0.4"
                    height: "auto"
                    left: "0"
                  children: 
                    - type: label
                      text: Blocked-off days
                      style: 
                        left: "0.05"
                        width: "0.3"
                        marginTop: "0"
                        color: "0xffffff"
                        backgroundColor: "#004e85"
                        textIndent: "1em"
                        height: "0.04"
                        textAlign: 
                          y: center
                    - type: list
                      contentType: listObject
                      listObject: ..blockOffDay
                      iteratorVar: itemObject
                      viewTag: blockOffDayView
                      style:
                        width: '0.3'
                        margin: '0'
                        left: "0.05"
                        height: auto
                      children:
                        - type: listItem
                          itemObject: ""
                          style:
                            width: '0.3'
                            height: '0.04'
                            left: '0'
                            border:   
                              style: "3"
                            borderColor: '0xdededf'
                          children:
                            - type: label
                              dataKey: itemObject
                              style: 
                                left: "0.02"
                                width: "0.25"
                                height: "0.04"
                                textAlign: 
                                  y: center
                            - type: image
                              onClick:
                                - emit:
                                    dataKey:
                                      var: itemObject
                                    actions:
                                      - =.builtIn.array.removeByValue:
                                          dataIn:
                                            object: =..blockOffDay
                                            value: $var
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: blockOffDayView
                              path: delete.png
                              style:
                                left: "0.25"
                                top: "0.008"
                                height: "0.02"                     
    - type: popUp
      viewTag: ScheduleQRcode
      style:
        top: "0"
        width: "1"
        left: "0"
        height: "1"
        backgroundColor: "0x00000033"
      children:
        - type: view
          style:
            top: "0"
            left: "0.6"
            width: "0.4"
            height: "1"
            backgroundColor: '0xffffff'
          children:
            - type: view
              style: 
                top: '0'
                width: '0.4'
                left: '0'
                height: '0.08'
                backgroundColor: '0x005089'
              children:
                - .PopUphead:
                  children:
                    - .CreateLabel:
                      text: 'Schedule QR code'
                    - .Closebutton:
                      onClick:
                        - actionType: popUpDismiss
                          popUpView: ScheduleQRcode
                
            - type: view
              style: 
                top: '0.08'
                height: '0.92'
                width: '0.4'
                left: '0'
              children:
                - type: view
                  style: 
                    top: '0.02'
                    left: '0'
                    width: '0.4'
                    height: '0.08'
                    # backgroundColor: '0x000000'
                  children:
                    - type: label
                      text: 'Scheduling Profile for:'
                      style:
                        width: '0.15'
                        left: '0.03'
                        height: '0.08'
                        top: '0'
                        textAlign:
                          # x: center
                          y: center
                    - type: view
                      style:
                        top: '0'
                        width: '0.1'
                        left: '0.3'
                        height: '0.08'
                        # backgroundColor: '0x000000'
                      children:
                        - type: image
                          path: download.png
                          style:
                            top: '0.03'
                            height: '0.025'
                            left: '0'
                        - type: label
                          text: "Download"
                          style:
                            top: '0'
                            height: '0.08'
                            left: '0.01'
                            width: '0.1'
                            fontSize: '18'
                            textAlign:
                              x: center
                              y: center
                - type: label
                  dataKey: Global.acceptInfo.name.inviteeName
                  style:
                    top: '0.12'
                    width: '0.4'
                    left: '0'
                    height: '0.08'
                    fontSize: '22'
                    textAlign:
                      x: center
                      y: center
                - type: view
                  style: 
                    width: '0.25'
                    left: '0.075'
                    height: '0.33'
                    top: '0.2'
                    boxShadow: "0px 0px 1px 1px #eaeaea"
                  children:
                    - type: image
                      path: "https://api.qrserver.com/v1/create-qr-code/?size=150x150&data={name:yuyongjian,id:%E2%80%9C123444%E2%80%9D}"
                      style:
                        top: '0.03'
                        width: '0.12'
                        left: '0.065'
                    - type: label
                      textBoard:
                        - text: "scan the QR code to view your set availability"
                        - br:
                        - text: "settings using AiTmed"
                      style:
                        top: '0.27'
                        height: '0.08'
                        fontSize: '14'
                        width: '0.25'
                        left: '0'
                        color: '0x949494'
                        textAlign:
                          x: center
                - type: button
                  text: "Done"
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: ScheduleQRcode
                  style:
                    top: '0.58'
                    width: '0.08'
                    left: '0.16'
                    height: '0.04'
                    color: '0xffffff'
                    fontSize: '16'
                    borderRadius: '5px'
                    backgroundColor: '0x005795'
                    borderWidth: '0'
    - type: popUp
      viewTag: calenderView
      style:
        left: "0.75"
        top: "0.24"
        width: "0.24"
        height: "0.4" 
        zIndex: "100000"
        # border: 
        #   style: "3"
        # borderColor: "0x000000"
      children:
        - .BaseDate.calendar:
          children:
            # - .BaseDate.calendarView:
            - .BaseDate.calendarHeader:
              children:
                - .BaseDate.monthView:
                - .BaseDate.yearView: 
                - .BaseDate.weekView:
            - .BaseDate.dayView:
            - .BaseDate.addButton:
              text: "Select"
              onClick:
                - actionType: evalObject
                  object:
                    - ..selectDate@: =.BaseDate.calendarDate.todayDate
                - actionType: buildtIn
                  funcName: redraw
                  viewTag: dateView
                - actionType: popUpDismiss
                  popUpView: calenderView