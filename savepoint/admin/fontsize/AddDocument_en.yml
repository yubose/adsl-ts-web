AddDocument:
  init: 

    - .Global.jwt.edge.bvid@: =.Global.currentFacility.id
    - =.Global.jwt.edgeAPI.store: ""
    - ..medicalRecord.docAPI.get: ""
    - actionType: evalObject
      object: 
        .Global._nonce@: 
          =.builtIn.math.random: ""
  save:
    - =.AddDocument.medicalRecord.docAPI.store: ""
  medicalRecord:
    resp: ""
    document:
      .Document: ""
      subtype:
        isEncrypted: "0"
        isOnServer: "1"
      type: .DocType.UploadFile
      name:
        title: ""
        type: ..medicalRecord.docAPI.store.subtype.mediaType
        # user: .Global.currentUser.vertex.name.userName
        data: binFile
      deat:
        sig: ""
        url: ""     
      eid: .Global.currentFacility.rootNotebookID
      # xfname: eid
    documentReq:
      type: .DocType.UploadFile   
      id: .Global.currentFacility.rootNotebookID
      xfname: eid
      obfname: ctime
      _nonce: =.Global._nonce
    docAPI: 
      .DocAPI: ""    
      store:
        api: cd
        dataIn: medicalRecord.document  
        subtype:
          mediaType: "" 
      get: 
        api: rd
        dataIn: medicalRecord.documentReq  
        dataOut: medicalRecord.resp
        
        
  components:
    - .SideMenuBar:
      children:
        - .aitLogo:
        - .MenuBar:
    - .TopBar:
    - .BodyView:
      children:
        - type: view
          style:  
            left: "0.03"
            top: "0.01"
            width: "0.2"
            height: "0.06"
        - .ContentView:
          style: 
            height: "0.82"
          children: 
            - type: scrollView
              style:
                top: "0"
                left: "0.04"
                width: "0.35"
                backgroundColor: "0xffffff"
                height: "0.8"
                boxSizing: "border-box"
                boxShadow: "1px 0px 1px #333333"
              children:
                - type: label
                  text: "My Documents"
                  style:
                    fontSize: "22"
                    fontWeight: "500"
                    top: "0.02"
                - type: list
                  contentType: listObject
                  listObject: ..medicalRecord.resp.doc
                  iteratorVar: itemObject
                  # viewTag: documentView
                  style: 
                    top: "0.05"
                    left: "0.02"
                    width: "0.31"
                    height: "auto"
                    backgroundColor: "0xffffff"
                  children:   
                    - type: listItem
                      itemObject: ""
                      style: 
                        left: "0"
                        # display: block
                        # position: static
                        width: "0.31"
                        height: "0.12"
                        backgroundColor: "0xffffffff"
                        borderWidth: "1"
                        borderRight: "solid 1px  #7070704f"
                        borderBottom: "solid 1px  #7070704f"
                        boxSizing: "border-box"
                      children:
                        - type: image
                          path: https://public.aitmed.com/commonRes/selectOn.png
                          style:
                            top: "0.05"
                            height: "0.02"
                        - type: label
                          dataKey: itemObject.name.title
                          style: 
                            left: "0.03"
                            width: "0.2"
                            top: "0.05"
                            textAlign:  
                              x: left
                          
            - type: view
              style:
                top: "0"
                left: "0.4"
                width: "0.35"
                backgroundColor: "0xffffff"
                height: "0.9"
                boxSizing: "border-box"
                # boxShadow: "1px 0px 1px #333333"
              children:
                - type: label
                  text: "Add new document"
                  style:
                    fontSize: "22"
                    fontWeight: "500"
                    top: "0.02"
                    left: "0.03"
                - type: label
                  text: "Fill out required fields*"
                  style:
                    fontSize: "14"
                    fontWeight: "400"
                    top: "0.08"
                    # left: "0.03"
                    width: "0.35"
                    color: "0xD53C42"
                    textAlign:
                      x: center
                - type: label
                  textBoard:
                    - text: "Create Document Name"
                      color: "0x517086"
                    - text: "*"
                      color: "0xD53C42"
                  style:
                    fontSize: "14"
                    fontWeight: "400"
                    top: "0.13"
                    left: "0.03"
                    width: "0.35"
                    # color: "0xD53C42"
                - type: textField
                  placeholder: "A&C Urgentcare Logo"
                  dataKey: medicalRecord.document.name.title
                  style: 
                    top: "0.16"
                    left: "0.03"
                    width: "0.32"
                    height: "0.03"
                - type: label
                  textBoard:
                    - text: "This file type is not supported"
                      fontWeight: "600"
                    - br:
                    - br:
                    - text: "Only the following file types are supported: "
                    - br:
                    - text: ".jpeg, .png, .pdf, .xlsx, .xls, .pptx, .ppt, .docx, .doc, .numbers, .pages, .htm"
                    - br:
                    - br:
                    - br:
                    - text: "File size must be no larger than BLANK"
                  style:
                    fontSize: "14"
                    fontWeight: "350"
                    top: "0.23"
                    # left: "0.03"
                    width: "0.36"
                    color: "0x707070"
                    # color: "0xD53C42"
                    textAlign: 
                      x: center

                - type: image
                  path: "uploaddocument.png"
                  onClick: 
                    - actionType: popUp
                      popUpView: selectView
                  style:
                    top: "0.38"
                    width: "0.21"
                    left: "0.07"
                - .BigButton:
                  text: "Upload"
                  onClick:
                    - actionType: popUp
                      popUpView: uploading 
                    - actionType: evalObject
                      object: 
                        - .Global.jwt.edge.bvid@: =.Global.currentFacility.id
                        - =.Global.jwt.edgeAPI.store: ""
                    - actionType: evalObject
                      object: ..save  
                    - actionType: evalObject
                      object: 
                        .Global._nonce@: 
                          =.builtIn.math.random: ""
                    - actionType: evalObject
                      object: 
                        # - ..medicalRecord.resp@: ""
                        - =..medicalRecord.docAPI.get: "" 
                    # - actionType: builtIn
                    #   funcName: redraw
                    #   viewTag: documentView
                    - =.builtIn.goto:
                        dataIn:
                          destination: AddDocument
                          pageReload: true
             
                  style:
                    left: "0.11"
                    top: "0.7"
                    width: "0.13"
                    height: "0.05"
                    fontSize: "16"
                    fontWeight: "300"
                    backgroundColor: "0x003254"
                    color: "0xffffff"
    - type: popUp
      viewTag: selectView
      style: 
        left: "0.5"
        width: "0.5"
        top: "0.59"
        height: "0.4"
        backgroundColor: "0xffffff"
      children: 
        - type: view
          style: 
            top: "0"
            width: "0.3"
            height: "0.275"
            left: "0.125"
            border: 
              style: "1"
            borderRadius: "10"
            backgroundColor: "0xe9e9e9"
            zIndex: 1000
          children: 
            - type: label
              textBoard: 
                - text: Medical Records
                  color: "0x00000099"
                - br: 
                - text: Upload an image or document
                  color: "0x00000066"
              style: 
                top: "0.02"
                width: "0.3"
                height: "0.06"
                fontSize: "14"
                textAlign: 
                  x: center
                border:
                  style: "2"
                borderWidth: "1"
                borderColor: "0x00000066"
            - type: button
              text: Camera
              contentType: file
              onClick:
                - actionType: updateObject
                  dataObject: BLOB
                  dataKey: AddDocument.medicalRecord.document.name.data
                - actionType: popUpDismiss
                  popUpView: selectView
                - actionType: builtIn
                  funcName: checkField
                  contentType: messageHidden
              style: 
                top: "0.085"
                width: "0.3"
                height: "0.06"
                fontSize: "18"
                color: "0x1d88fc"
                backgroundColor: "0xe9e9e9"
                textAlign: 
                  x: center
                border:
                  style: "2"
                borderWidth: "1"
                borderColor: "0x00000066"
                # borderColor: "0x00000033"
            - type: button
              text: Photo Library
              contentType: file
              onClick:
                - actionType: updateObject
                  dataObject: BLOB
                  dataKey: AddDocument.medicalRecord.document.name.data
                - actionType: popUpDismiss
                  popUpView: selectView
                - actionType: builtIn
                  funcName: checkField
                  contentType: messageHidden
              style: 
                top: "0.146"
                width: "0.3"
                height: "0.06"
                fontSize: "18"
                color: "0x1d88fc"
                backgroundColor: "0xe9e9e9"
                textAlign: 
                  x: center
                border:
                  style: "2"
                borderWidth: "1"
                borderColor: "0x00000066"
            - type: button
              text: Document Manager
              contentType: file
              onClick:
                - actionType: updateObject
                  dataObject: BLOB
                  dataKey: AddDocument.medicalRecord.document.name.data
                - actionType: popUpDismiss
                  popUpView: selectView
                - actionType: builtIn
                  funcName: checkField
                  contentType: messageHidden
              style: 
                top: "0.206"
                width: "0.3"
                height: "0.06"
                fontSize: "18"
                color: "0x1d88fc"
                backgroundColor: "0xe9e9e9"
                textAlign: 
                  x: center
                border:
                  style: 1
        - type: button
          text: Cancel
          style: 
            top: "0.31"
            left: "0.125"
            width: "0.3"
            height: "0.06"
            fontSize: "18"
            color: "0x1d88fc"
            backgroundColor: "0xe9e9e9"
            textAlign: 
              x: center
            borderRadius: "10"
            border:
              style: 1
          onClick:
            - actionType: popUpDismiss
              popUpView: selectView
    - .BaseCheckView: ""
      message: "Uploading in progress ..."
      viewTag: uploading
