MedicalFacility1: #xd page number 8
  pageNumber: "80"
  init: 
    - .SignInCheck
    - actionType: evalObject
      object: 
        .Global._nonce@: 
          =.builtIn.math.random: ""
  medicalFacility: 
    vertex: 
      .Vertex: ""
      type: "20"
      name: 
        basicInfo:
          medicalFacilityName: ""
          specialty: ""
          phoneNumber: ""
          introduction: ""
          address: ""
          city: ""
          state: ""
          zipCode: ""
          NPI: ""
          DEANumber: ""
          medicalLicense: ""
          medicalLicenseState: ""
      uid: ""
      jwt: ""
      pk: "VW/ceBN733d2oAki+muUeSAaKZBaE9SIbRJu5gBz40c="
      esk: "2f8J1+aRIftJkKL+VxLb00qYjW3hWfQwLIBGumdwum/NHXlv6VChfmPIhj0bTOaUK4VscRwwa4soTqJ8x0a1jsOBoDDZz5aR"
  formData: 
    countryCode: "+1"
    number: ""

  # DEA:
  #   url: DEA.png
  #   document:
  #     .Document: ""
  #     subtype:
  #       isEncrypted: "1"
  #       isOnServer: "0"
  #     type: .DocType.DEAPicture
  #     name:
  #       title: ""
  #       type: ..DEA.docAPI.store.subtype.mediaType
  #       data: binFile
  #     deat:
  #       sig: ""
  #       url: ""     
  #     eid: .Global.rootNotebookID
  #   resp: ""
  #   docIn: 
  #     id: .Global.rootNotebookID
  #     xfname: eid
  #     type: .DocType.DEAPicture
  #     maxcount: "1"
  #     obfname: "ctime"
  #     _nonce: =.Global._nonce
  #   docAPI: 
  #     store:
  #       api: cd
  #       dataIn: DEA.document
  #       subtype:
  #         mediaType: ""
  #     get:
  #       .DocAPI.get: "" 
  #       dataIn: DEA.docIn
  #       dataOut: MedicalFacility1.DEA.resp
        
          
  # MedicalLicense:
  #   url: DEA.png
  #   document:
  #     .Document: ""
  #     subtype:
  #       isEncrypted: "1"
  #       isOnServer: "0"
  #     type: .DocType.MedicalLicensePicture
  #     name:
  #       title: ""
  #       type: ..MedicalLicense.docAPI.store.subtype.mediaType
  #       data: binFile
  #     deat:
  #       sig: ""
  #       url: ""     
  #     eid: .Global.rootNotebookID
  #   resp: ""
  #   docIn: 
  #     id: .Global.rootNotebookID
  #     xfname: eid
  #     type: .DocType.MedicalLicensePicture
  #     maxcount: "1"
  #     obfname: "ctime"
  #     _nonce: =.Global._nonce
  #   docAPI: 
  #     store:
  #       api: cd
  #       dataKey: MedicalLicense.document
  #       subtype:
  #         mediaType: ""
  #     get:
  #       .DocAPI.get: "" 
  #       dataIn: MedicalLicense.docIn
  #       dataOut: MedicalFacility1.MedicalLicense.resp

  BusinessLogo:
    url: BusinessLogo.png
    document:
      .Document: ""
      subtype:
        isEncrypted: "1"
        isOnServer: "0"
      type: .DocType.BusinessLogoPicture
      name:
        title: ""
        type: ..BusinessLogo.docAPI.store.subtype.mediaType
        data: binFile
      deat:
        sig: ""
        url: ""     
      eid: .Global.rootNotebookID
    resp: ""
    docIn: 
      id: .Global.rootNotebookID
      xfname: eid
      type: .DocType.BusinessLogoPicture
      maxcount: "1"
      obfname: "ctime"
      _nonce: =.Global._nonce
    docAPI: 
      store:
        api: cd
        dataKey: BusinessLogo.document
        subtype:
          mediaType: ""
      get:
        .DocAPI.get: "" 
        dataIn: BusinessLogo.docIn
        dataOut: MedicalFacility1.BusinessLogo.resp
  Profile:
    url: ProfilePicture.png
    document:
      .Document: ""
      subtype:
        isEncrypted: "1"
        isOnServer: "0"
      type: .DocType.ProfilePicture
      name:
        title: ""
        type: ..Profile.docAPI.store.subtype.mediaType
        data: binFile
      deat:
        sig: ""
        url: ""     
      eid: .Global.rootNotebookID
    docIn: 
      id: .Global.rootNotebookID
      xfname: eid
      type: .DocType.ProfilePicture
      maxcount: "1"
      obfname: "ctime"
      _nonce: =.Global._nonce
    docAPI: 
      store:
        api: cd
        dataKey: Profile.document
        subtype:
          mediaType: ""
      get:
        .DocAPI.get: "" 
        dataIn: Profile.docIn
        dataOut: MedicalFacility1.Profile.resp
  components:
    - .MainView:
      children:        
        - .LeftDivider:
        - .Head0:
        - .CenterView: 
          children:
            - .LeftLabel:
              text: "Please complete facility basic info, you can always edit in setting if needed."
            - .LeftImage:
              path: "surgery center color.png"
            - .FlowChart:
            - .TextField1:
              placeholder: "Enter Medical Facility Here"
              dataKey: medicalFacility.vertex.name.basicInfo.medicalFacilityName
              style:
                width: "0.15"
                left: "0.25"
                top: "0.17"
            - .Label1:
              textBoard:
                - text: "Medical Facility Name"
                - text: "*"
                  color: "0xff0000"
              style:
                top: "0.14"
                left: "0.25"
            - .Label1:
              text: "Specialty"
              style:
                top: "0.14"
                left: "0.42" 
            - type: select
              placeholder: select
              dataKey: medicalFacility.vertex.name.basicInfo.specialty
              options:               
                .SpecialtySelect
              style:
                width: "0.15"
                left: "0.42"
                top: "0.17"
                height: "0.044"
                border:
                  style: "3"
                fontSize: "12" 
                borderColor: "#EAEAEA"
                backgroundColor: "0xffffff"
                required: "true"
                selectHeight: "0.11"  
            - type: select
              contentType: countryCode
              placeholder: ..formData.countryCode
              dataKey: formData.countryCode # formData.countryCode : inputValue
              options:
                .CountryCode
              required: "true"
              style:
                width: "0.03"
                left: "0.59"
                top: "0.17"
                height: "0.045"
                placeholder: "US +1"
                backgroundColor: "0xffffff"
                borderWidth: "1"
                border:
                  style: "3"
                  color: "0xdededf"  
                # borderRadius: "5"  
            - .TextField1:
              placeholder: "Enter Phone Number Here"
              dataKey: formData.number
              style:
                width: "0.14"
                left: "0.63"
                top: "0.17"
            - .Label1:
              textBoard: 
                - text: Phone Number
                - text: "*"
                  color: "0xff0000"
              # text: "Phone Number"
              style:
                top: "0.14"
                left: "0.59"
            - .Label1:
              text: "Introduction"
              style:
                top: "0.23"
                left: "0.25"
            - type: textView
              placeholder: "Enter Introduction Here"
              dataKey: medicalFacility.vertex.name.basicInfo.introduction
              style:
                height: "0.18"
                top: "0.26"
                width: "0.52"
                fontFamily: "sans-serif"
                border:
                  style: "3"
                left: "0.25"
                borderColor: "#EAEAEA" 
                # color: "#EAEAEA"
            - .TextField1:
              placeholder: "Enter Address Here"
              dataKey: medicalFacility.vertex.name.basicInfo.address
              style:
                width: "0.15"
                left: "0.25"
                top: "0.49"
            - .Label1:
              textBoard: 
                - text: "Address"
                - text: "*"
                  color: "0xff0000"
              style:
                top: "0.46"
                left: "0.25"
            - .TextField1:
              placeholder: "Enter City Here "
              dataKey: medicalFacility.vertex.name.basicInfo.city
              style:
                width: "0.15"
                left: "0.42"
                top: "0.49"
            - .Label1:
              textBoard:
                - text: "City"
                - text: "*"
                  color: "0xff0000"
              style:
                top: "0.46"
                left: "0.42"
            - .Label1:
              textBoard:
                - text: "State"
                - text: "*"
                  color: "0xff0000"
              style:
                top: "0.46"
                left: "0.59"
            - type: select

              dataKey: medicalFacility.vertex.name.basicInfo.state
              options:
                .State
              style:
                width: "0.04"
                left: "0.59"
                top: "0.49"
                height: "0.044"
                border:
                  style: "3"
                fontSize: "12" 
                borderColor: "#EAEAEA"
                backgroundColor: "0xffffff"
                required: "true"
                selectHeight: "0.1"
            - .TextField1:
              placeholder: "Enter Zip code Here "
              dataKey: medicalFacility.vertex.name.basicInfo.zipCode
              style:
                width: "0.12"
                left: "0.65"
                top: "0.49"
            - .Label1:
              textBoard:
                - text: "Zip code"
                - text: "*"
                  color: "0xff0000"
              style:
                top: "0.46"
                left: "0.65"
            # - .TextField1:
            #   placeholder: "Enter Here"
            #   dataKey: medicalFacility.vertex.name.basicInfo.NPI
            #   style:
            #     width: "0.15"
            #     left: "0.25"
            #     top: "0.49"
            # - .Label1:
            #   text: "NPI"
            #   style:
            #     top: "0.46"
            #     left: "0.25"
            # - .TextField1:
            #   placeholder: "Enter Here "
            #   dataKey: medicalFacility.vertex.name.basicInfo.DEANumber
            #   style:
            #     width: "0.15"
            #     left: "0.42"
            #     top: "0.49"
            # - .Label1:
            #   text: "DEA number"
            #   style:
            #     top: "0.46"
            #     left: "0.42"
            # - .TextField1:
            #   placeholder: "Enter Here "
            #   dataKey: medicalFacility.vertex.name.basicInfo.medicalLicense
            #   style:
            #     width: "0.12"
            #     left: "0.59"
            #     top: "0.49"
            # - .Label1:
            #   text: "Medical license"
            #   style:
            #     top: "0.46"
            #     left: "0.59"
            # - .Label1:
            #   text: "State"
            #   style:
            #     top: "0.46"
            #     left: "0.73"
            # - type: select
            #   placeholder: gender
            #   dataKey: medicalFacility.vertex.name.basicInfo.medicalLicenseState
            #   options:
            #     .State
            #   style:
            #     width: "0.04"
            #     left: "0.73"
            #     top: "0.49"
            #     height: "0.044"
            #     border:
            #       style: "3"
            #     fontSize: "12" 
            #     backgroundColor: "0xffffff"
            #     borderColor: "#EAEAEA"
            #     required: "true"
            #     selectHeight: "0.1"
            - type: label
              text: "Uploads"
              style:
                left: "0.25"
                top: "0.57"
                width: "0.25"
                fontSize: "2.5vh"
                fontWeight: "500"
            - type: view
              viewTag: pictureView
              style: 
                top: "0.61"
                left: "0.25"
                width: "0.52"
                height: "0.15"
              children:
                # - .Label1:
                #   text: DEA
                #   style:
                #     top: "0.01"
                #     left: "0"
                #     width: "0.055"
                #     textAlign: 
                #       x: center
                # - .Label1:
                #   text: Medical License
                #   style:
                #     top: "0.01"
                #     width: "0.064"
                #     left: "0.125"
                #     textAlign: 
                #       x: center
                - .Label1:
                  text: Business Logo
                  style:
                    top: "0.01"
                    width: "0.065"
                    left: "0.095"
                    textAlign: 
                      x: center
                - .Label1:
                  text: Profile Picture
                  style:
                    top: "0.01"
                    width: "0.065"
                    left: "0.36"
                    textAlign: 
                      x: center            
                # - type: image
                #   path: 
                #     emit: 
                #       actions: 
                #         - if: 
                #           - =..DEA.resp.name.data
                #           - ..DEA.url
                #           - DEA.png
                #   contentType: file
                #   onClick:
                #     - actionType: updateObject
                #       dataObject: BLOB
                #       dataKey: MedicalFacility1.DEA.document.name.data
                #     - actionType: evalObject
                #       object:
                #         - =..DEA.docAPI.store: ""
                #     - actionType: evalObject
                #       object:
                #         .Global._nonce@:
                #           =.builtIn.math.random: ""
                #     - actionType: evalObject
                #       object: 
                #         - =..DEA.docAPI.get: ""
                #     - actionType: evalObject
                #       object:
                #         - =.builtIn.utils.prepareDoc:
                #             dataIn:
                #               doc: =..DEA.resp.doc.0
                #             dataOut: MedicalFacility1.DEA.resp
                #     - actionType: evalObject
                #       object:
                #         - ..DEA.url@: =..DEA.resp.name.data
                #     - actionType: evalObject
                #       object: 
                #         - .Global.formData.medicalFacility.name.basicInfo@: =..medicalFacility.vertex.name.basicInfo
                #     # - actionType: refresh
                #     - actionType: builtIn
                #       funcName: redraw
                #       viewTag: pictureView
                #   style:
                #     left: "0"
                #     width: "0.055"
                #     top: "0.035"
                # - type: image
                #   path: 
                #     emit: 
                #       actions: 
                #         - if: 
                #           - =..MedicalLicense.resp.name.data
                #           - ..MedicalLicense.url
                #           - DEA.png
                #   contentType: file
                #   onClick:
                #     - actionType: updateObject
                #       dataObject: BLOB
                #       dataKey: MedicalFacility1.MedicalLicense.document.name.data
                #     - actionType: evalObject
                #       object:
                #         - =..MedicalLicense.docAPI.store: ""
                #     - actionType: evalObject
                #       object:
                #         .Global._nonce@:
                #           =.builtIn.math.random: ""
                #     - actionType: evalObject
                #       object: 
                #         - =..MedicalLicense.docAPI.get: ""
                #     - actionType: evalObject
                #       object:
                #         - =.builtIn.utils.prepareDoc:
                #             dataIn:
                #               doc: =..MedicalLicense.resp.doc.0
                #             dataOut: MedicalFacility1.MedicalLicense.resp
                #     - actionType: evalObject
                #       object:
                #         - ..MedicalLicense.url@: =..MedicalLicense.resp.name.data
                #     - actionType: evalObject
                #       object: 
                #         - .Global.formData.medicalFacility.name.basicInfo@: =..medicalFacility.vertex.name.basicInfo
                #     # - actionType: refresh
                #     - actionType: builtIn
                #       funcName: redraw
                #       viewTag: pictureView
                #   style:
                #     left: "0.13"
                #     width: "0.055"
                #     top: "0.035"
                - type: image
                  path: 
                    emit: 
                      actions: 
                        - if: 
                          - =..BusinessLogo.resp.name.data
                          - ..BusinessLogo.url
                          - BusinessLogo.png
                  contentType: file
                  onClick:
                    - actionType: updateObject
                      dataObject: BLOB
                      dataKey: MedicalFacility1.BusinessLogo.document.name.data
                    - actionType: popUp
                      popUpView: uploading
                    - actionType: evalObject
                      object:
                        - =..BusinessLogo.docAPI.store: ""
                    - actionType: evalObject
                      object:
                        .Global._nonce@:
                          =.builtIn.math.random: ""
                    - actionType: evalObject
                      object: 
                        - =..BusinessLogo.docAPI.get: ""
                    - actionType: evalObject
                      object:
                        - =.builtIn.utils.prepareDoc:
                            dataIn:
                              doc: =..BusinessLogo.resp.doc.0
                            dataOut: MedicalFacility1.BusinessLogo.resp
                    - actionType: evalObject
                      object:
                        - ..BusinessLogo.url@: =..BusinessLogo.resp.name.data
                    - actionType: evalObject
                      object: 
                        - .Global.formData.medicalFacility.name.basicInfo@: =..medicalFacility.vertex.name.basicInfo
                    - actionType: popUpDismiss
                      popUpView: uploading 
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: pictureView
                  style:
                    left: "0.1"
                    width: "0.055"
                    top: "0.035"
                - type: image
                  path: 
                    emit: 
                      actions: 
                        - if: 
                          - =..Profile.resp.name.data
                          - ..Profile.url
                          - ProfilePicture.png
                  contentType: file
                  onClick:
                    - actionType: updateObject
                      dataObject: BLOB
                      dataKey: MedicalFacility1.Profile.document.name.data
                    - actionType: popUp
                      popUpView: uploading 
                    - actionType: evalObject
                      object:
                        - =..Profile.docAPI.store: ""
                    - actionType: evalObject
                      object:
                        .Global._nonce@:
                          =.builtIn.math.random: ""
                    - actionType: evalObject
                      object: 
                        - =..Profile.docAPI.get: ""
                    - actionType: evalObject
                      object:
                        - =.builtIn.utils.prepareDoc:
                            dataIn:
                              doc: =..Profile.resp.doc.0
                            dataOut: MedicalFacility1.Profile.resp
                    - actionType: evalObject
                      object:
                        - ..Profile.url@: =..Profile.resp.name.data
                    - actionType: evalObject
                      object: 
                        - .Global.formData.medicalFacility.name.basicInfo@: =..medicalFacility.vertex.name.basicInfo
                    - actionType: popUpDismiss
                      popUpView: uploading 
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: pictureView
                  style:
                    left: "0.365"
                    width: "0.055"
                    top: "0.035"
            - .BottomButton:
              text: "Cancel"
              onClick:
                - goto: "SelectOrganization"
              style:
                backgroundColor: "#c1c1c1"
                color: "0xffffff"
                left: "0.41"
            - .BottomButton:
              text: "Next"
              onClick:
                - actionType: evalObject
                  object: 
                    - =.builtIn.string.concat:
                        dataIn:
                          - =..formData.countryCode
                          - " "
                          - =..formData.number
                        dataOut: MedicalFacility1.medicalFacility.vertex.name.basicInfo.phoneNumber 
                    - ..medicalFacility.vertex.uid@: =..medicalFacility.vertex.name.basicInfo.phoneNumber 
                    - .Global.formData.medicalFacility@: =..medicalFacility.vertex    
                - actionType: evalObject
                  object: 
                    - if: 
                      - =.builtIn.string.judgeFillinAll:
                          dataIn:
                            - =..formData.number
                            - =..medicalFacility.vertex.name.basicInfo.medicalFacilityName
                            - =..medicalFacility.vertex.name.basicInfo.address
                            - =..medicalFacility.vertex.name.basicInfo.city
                            - =..medicalFacility.vertex.name.basicInfo.state
                            - =..medicalFacility.vertex.name.basicInfo.zipCode
                      - actionType: popUp
                        popUpView: errorView
                      - continue
                    - goto: BillingInfo
              style:
                backgroundColor: "#dddddd"
                color: "#737373"
                left: "0.54"
    - .BaseCheckView: ""
      message: "Please complete phone number, facility name, address, city, state and zipCode to continue"
      viewTag: errorView
      style: 
        zIndex: "100000"     
    - .LoadingView: ""
      message: "loading ..."
      viewTag: uploading

