PatientManagement: #xd page number: 1380
  pageNumber: "650"
  init:
    - .SignInCheck
    - .Global.jwt.edge.bvid@: =.Global.currentFacility.id
    - =.Global.jwt.edgeAPI.store: ""
    - ..patient.docAPI.get
    - ..patient2.vertexAPI.get
    - actionType: evalObject
      object: 
        - .Global.formData.patientHistoryId@: ""
        - .Global.formData.patientHistoryInfo@: ""
    - =.builtIn.object.extractArray: 
        dataIn: 
          obj: =..patient.list.doc
          arr: =..formData1.dataStruc
        dataOut: PatientManagement.testD  
    # - =.builtIn.object.set:   
    #     dataIn:
    #       object: =.PatientManagement.testD.0
    #       key: "history"
    #       value: "Review"
    - .PatientManagement.tableData.dataObject@: =..testD
    - =.builtIn.string.concat:
        dataIn: 
          - Hello,
          - " "
          - =.Global.currentFacility.name.basicInfo.medicalFacilityName
          - " "
          - has invited you to be a patient in their organization. Please review in your connections for more details.
        dataOut: PatientManagement.NewInboxMessage.document.name.data.content
  gender: 
    - key: gender
      value: "Male"
    - key: gender
      value: "Female"
  hid: "true" 
  viewPort: top
  title: Patient Management
  baseInfo:
    - key: First Name
    - key: Last Name
    - key: Phone Number
  baseInfo2:
    - key: Middle Name
    - key: Gender
    - key: Email
  formData:
    patientInfo: ""
    currentProviderList: []
    patientList: ""
    countryCode: "+1"
    number: ""
    phoneNumber: ""
  Chart:
    - value1: "Steve Chandier"
      value2: "Female"
      value3: "01/18/2:00pm-Gary Chen,MD"
      value4: "Review"
      key: "chooseAvatar2.png"
  star:
    - key: "Icon awesome-asterisk.png"
    - key: "Icon awesome-asterisk.png"
  invite:
    response: ""
    edge:
      .Edge: ""
      type: .EdgeType.InviteInfo
      bvid: .Global.currentFacility.id
      subtype: "131072"
      name:
        phoneNumber: ""
    edgeAPI:
      .EdgeAPI: ""
      store:
        api: ce
        dataIn: invite.edge
        dataOut: PatientManagement.invite.response

  patient:
    list: ""
    docAPI:
      get: 
        api: rd
        dataKey: patient.list
        ObjType: 8
        type: .DocType.Profile
        id: .Global.currentFacility.id
        xfname: E.bvid|E.evid
        sCondition: "E.type=10002 AND E.tage=1"
        maxcount: "10000"
        _nonce: =.Global._nonce
      store:
        api: ce
        dataIn: PatientManagement.formData.patientInfo
  inviteInfo:  # for get patient's id and use id to get patient's personal profile
    response:
      edge: 
    store: 
      .EdgeAPI.get: ""
      api: ce
      dataIn: inviteInfo.edge
      dataOut: PatientManagement.inviteInfo.response
    delete:
      api: dx
      dataIn: PatientManagement.inviteInfo.response.edge
    edge:
      type: .EdgeType.InviteInfo
      refid: ""
      bvid: .Global.currentFacility.id
      _nonce: '=.Global._nonce'
      name:
        phoneNumber: ""
  patientDisplay:  # 邀请patient的时候，点击搜索会展示patient的信息
    docResp: 
    docIn: 
      type: .DocType.Profile
      id: ""
      xfname: ovid
      maxcount: "1"
      _nonce: =.Global._nonce
    docAPI: 
      get: 
        .DocAPI.get: ""
        api: rd
        dataIn: patientDisplay.docIn
        dataOut: PatientManagement.patientDisplay.docResp
  patdProfile: 
    docResp: ""
    docIn: 
      id: ""
      type: .DocType.Profile
      xfname: id
      maxcount: "1"
      _nonce: =.Global._nonce
    docAPI:
      get: 
        .DocAPI.get: ""
        api: rd
        dataIn: patdProfile.docIn
        dataOut: PatientManagement.patdProfile.docResp
  NewEmail:   #email
    response: ""
    edge:
      id: ""
      type: .EdgeType.Email 
      subtype: 20
      name: 
        title: "invitation"
        # message: ""
        folderID: ""
        isStar: false
        isDraft: false
        isRead: false
        receiveName: ""
        senderName: .Global.currentFacility.name.basicInfo.medicalFacilityName
      bvid: .Global.currentFacility.id #.Global.currentUser.vertex.id
      evid: ""    #phone-> evid
      refid: ""
    edgeAPI:
      store:
        api: ce
        dataKey: PatientManagement.NewEmail.edge
        dataOut: PatientManagement.NewEmail.response   
  NewInboxMessage:
    document:
      # .Global.inboxMessage: ""
      # # .Document: ""
      eid:  ""
      type: .DocType.InboxMessage
      name:
        title: "message"
        type: "application/json"
        data:
          content: 
    docAPI:
      .DocAPI: ""
      store:
        api: cd
        dataKey: NewInboxMessage.document
        subtype:
          mediaType: "application/json"          
  testD: {}
  tableData: 
    chartType: "table"
    allowOnclick: 
      value: EDIT
      color: "#2988e6"
      buttonColor: "#ffffff"
    tableHeader: 
      - name: id
        hidden: true
      - Name
      - Gender
      - Phone Number
      - History
    dataHeader: 
      - id
      - fullName
      - gender 
      - phone
      - history
    dataObject:
    response: 
    attribute: 
      search: 'search'
      sort: "true"
      pagination: "8"
  formData1:
    dataStruc:
      - id
      - name.data.fullName
      - name.data.gender 
      - name.data.phone
      - name.data.history
    respData: ""

  components:
    - .LoadingView: ""
      message: "In searching..."
      viewTag: searchingView
    - .BaseCheckView: ""
      message: "You don't have the authority to add a new patient"
      viewTag: patientAuthCreate
      style: 
        zIndex: "100000"
    - .BaseCheckView: ""
      message: "You don't have the authority to edit"
      viewTag: patientAuthEdit
      style: 
        zIndex: "100000"
    - .BaseCheckView: ""
      message: "You don't have the authority to review"
      viewTag: patientAuthReview
      style: 
        zIndex: "100000"       
    - .BasePopUp:
      viewTag: AddPatient
      children:
        - type: view
          style:
            left: "0.6"
            width: "0.4"
            height: "1"
            backgroundColor: "0xFFFFFF" 
          children:
            - .PopUphead:
              children:
                - .CreateLabel:
                  text: Add Patient
                - .Closebutton:
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: AddPatient
            - type: view
              viewTag: profileView
              style:
                height: '0.91'
                width: '0.4'
                top: '0.08'
              children:
                - type: view
                  style:
                    top: "0"
                    left: "0"
                    width: "0.4"
                    height: "0.4"
                  children:
                    - type: label
                      text: Basic Info
                      style:
                        top: "0.05"
                        left: "0.05"
                        fontSize: "22"
                        color: "#7f7f7f"
                        fontFamily: Poppins
                    - type: label
                      text: Status
                      style:
                        top: "0.06"
                        left: "0.25"
                        fontSize: "14"
                    - type: image   
                      viewTag: statusTag
                      path: switch.png
                      style:
                        top: "0.06"
                        left: "0.29"
                        height: "0.04"
                    - type: view
                      style:
                        top: "0.12"
                        left: "0.07"
                      children:
                        - type: label
                          textBoard: 
                            - text: Phone Number
                            - text: "*"
                              color: "0xff0000"  
                          style: 
                            width: "0.1"
                            top: "0.01"
                            left: "0"
                            fontSize: "14"
                            fontFamily: Poppins
                        - type: select
                          contentType: countryCode
                          placeholder: ..formData.countryCode
                          dataKey: formData.countryCode # formData.countryCode : inputValue
                          options:
                            .CountryCode
                          required: "true"
                          style:
                            width: "0.022"
                            left: "0.1"
                            top: "0"
                            height: "0.035"
                            placeholder: "US +1"
                            borderWidth: "1"
                            border:
                              style: "3"
                              color: "0xdededf"  
                        - type: textField
                          placeholder: "Enter Here"
                          dataKey: formData.number
                          style:
                            width: "0.055"
                            left: "0.13"
                            top: "0"
                            height: "0.03"
                            # backgroundColor: "#f4f8fa"
                            border: 
                              style: "3"  
                            borderColor: "#DCDCDC"
                        - type: button
                          text: Search
                          onClick:
                            - actionType: popUp
                              popUpView: searchingView 
                            - actionType: evalObject
                              object: 
                                - =.builtIn.string.concat: 
                                    dataIn: 
                                      - =..formData.countryCode
                                      - " "
                                      - =..formData.number
                                    dataOut: PatientManagement.formData.phoneNumber
                                - ..inviteInfo.edge.name.phoneNumber@: =..formData.phoneNumber
                                - =..inviteInfo.store: ""
                                - ..patientDisplay.docIn.id@: =..inviteInfo.response.edge.evid
                                - =..inviteInfo.delete: ""
                                - =..patientDisplay.docAPI.get: ""
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: profileView
                            - actionType: popUpDismiss
                              popUpView: searchingView 
                          style: 
                            left: "0.195"
                            top: "0"
                            height: "0.03"
                            width: "0.05"
                            boxSizing: content-box
                            backgroundColor: "0x005795"
                            color: "0xffffff"
                            border: 
                              style: "3"  
                            borderColor: "0x005795" 
                            borderRadius: "3"
                    - type: view
                      style:
                        top: "0.18"
                        left: "0.07"
                      children:
                        - type: label
                          textBoard: 
                            - text: First Name      
                            - text: "*"
                              color: "0xff0000"  
                          style: 
                            width: "0.1"
                            top: "0.01"
                            left: "0"
                            fontSize: "14"
                            fontFamily: Poppins
                        # - type: image
                        #   path: "Icon awesome-asterisk.png"
                        #   style:
                        #     left: "0.0314"
                        #     top: "0.015"
                        #     width: "0.0038"
                        - type: textField
                          placeholder: "Enter Here"
                          dataKey: patientDisplay.docResp.doc.0.name.data.firstName
                          style:
                            top: "0"
                            left: "0.1"
                            width: "0.15"
                            height: "0.03"
                            border:
                              style: "3"
                            borderColor: "#DCDCDC"
                    - type: view
                      style:
                        top: "0.24"
                        left: "0.07"
                      children:
                        - type: label
                          text: Middle Name    
                          style: 
                            width: "0.1"
                            top: "0.01"
                            left: "0"
                            fontSize: "14"
                            fontFamily: Poppins
                        - type: textField
                          dataKey: patientDisplay.docResp.doc.0.name.data.middleName
                          placeholder: "Enter Here"
                          style:
                            top: "0"
                            left: "0.1"
                            width: "0.15"
                            height: "0.03"
                            border:
                              style: "3"
                            borderColor: "#DCDCDC"   
                    - type: view
                      style:
                        top: "0.3"
                        left: "0.07"
                      children:
                        - type: label
                          textBoard: 
                            - text: Last Name      
                            - text: "*"
                              color: "0xff0000"  
                          style: 
                            width: "0.1"
                            top: "0.01"
                            left: "0"
                            fontSize: "14"
                            fontFamily: Poppins
                        - type: textField
                          dataKey: patientDisplay.docResp.doc.0.name.data.lastName
                          placeholder: "Enter Here"
                          style:
                            top: "0"
                            left: "0.1"
                            width: "0.15"
                            height: "0.03"
                            border:
                              style: "3"
                            borderColor: "#DCDCDC" 
                    - type: view
                      style:
                        top: "0.36"
                        left: "0.07"
                      children:
                        - type: label
                          text: Gender
                          style: 
                            width: "0.1"
                            top: "0.01"
                            left: "0"
                            fontSize: "14"
                            fontFamily: Poppins
                        - type: textField
                          placeholder: "Enter Here"
                          dataKey: patientDisplay.docResp.doc.0.name.data.gender
                          style:
                            top: "0"
                            left: "0.1"
                            width: "0.15"
                            height: "0.03"
                            border:
                              style: "3"
                            borderColor: "#DCDCDC"
                    - type: view
                      style:
                        top: "0.42"
                        left: "0.07"
                      children:
                        - type: label
                          text: Email
                          style: 
                            width: "0.1"
                            top: "0.01"
                            left: "0"
                            fontSize: "14"
                            fontFamily: Poppins
                        - type: textField
                          placeholder: "Enter Here"
                          dataKey: patientDisplay.docResp.doc.0.name.data.email
                          style:
                            top: "0"
                            left: "0.1"
                            width: "0.15"
                            height: "0.03"
                            border:
                              style: "3"
                            borderColor: "#DCDCDC"
                - type: label
                  text: Vitals Signs
                  style:
                    top: "0.5"
                    left: "0.05"
                    fontSize: "22"
                    color: "#7f7f7f"
                    fontFamily: Poppins
                - type: view
                  style: 
                    top: "0.57"
                    width: "0.4" 
                    height: "0.3" 
                    left: "0"
                  children: 
                    - type: label
                      text: Insurance Carrier
                      style: 
                        width: "0.2"
                        top: "0"
                        left: "0.07"
                        height: "0.03"
                        fontSize: "14"
                        fontFamily: Poppins
                        textAlign: 
                          y: center
                    - type: textField
                      placeholder: Enter here
                      dataKey: patientDisplay.docResp.doc.0.name.data.insuranceCarrier
                      style: 
                        top: "0"
                        left: "0.17"
                        width: "0.15"
                        height: "0.03"
                        border:
                          style: "3"
                        borderColor: "#DCDCDC" 
                    - type: label
                      text: Medical Group
                      style: 
                        width: "0.2"
                        top: "0.06"
                        left: "0.07"
                        height: "0.03"
                        fontSize: "14"
                        fontFamily: Poppins
                        textAlign: 
                          y: center
                    - type: textField
                      placeholder: Enter here
                      dataKey: patientDisplay.docResp.doc.0.name.data.medicalGroup
                      style: 
                        top: "0.06"
                        left: "0.17"
                        width: "0.15"
                        height: "0.03"
                        border:
                          style: "3"
                        borderColor: "#DCDCDC" 
                    - type: label
                      text: Member ID
                      style: 
                        width: "0.2"
                        top: "0.12"
                        left: "0.07"
                        height: "0.03"
                        fontSize: "14"
                        fontFamily: Poppins
                        textAlign: 
                          y: center
                    - type: textField
                      placeholder: Enter here
                      dataKey: patientDisplay.docResp.doc.0.name.data.memberId
                      style: 
                        top: "0.12"
                        left: "0.17"
                        width: "0.15"
                        height: "0.03"
                        border:
                          style: "3"
                        borderColor: "#DCDCDC"  
                - .BottomButton:
                  text: 'Next'
                  style:
                    left: '0.28'
                    top: '0.8'
                    backgroundColor: '#005795'
                    color: '0xffffff'
                  onClick:       
                    - actionType: popUp
                      popUpView: ConfirmInformation
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: confirmView
    - .BasePopUp:
      viewTag: EditPatient
      children:
        - type: view
          style:
            left: "0.6"
            width: "0.4"
            height: "1"
            backgroundColor: "0xFFFFFF" 
          children:
            - .PopUphead:
              children:
                - .CreateLabel:
                  text: Edit Patient
                - .Closebutton:
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: EditPatient
            - type: view
              viewTag: infoView
              style:
                height: '0.91'
                width: '0.4'
                top: '0.08'
              children:
                - type: view
                  style:
                    top: "0"
                    left: "0"
                    width: "0.4"
                    height: "0.4"
                  children:
                    - type: label
                      text: Basic Info
                      style:
                        top: "0.05"
                        left: "0.05"
                        fontSize: "22"
                        color: "#7f7f7f"
                        fontFamily: Poppins
                    - type: label
                      text: Status
                      style:
                        top: "0.06"
                        left: "0.25"
                        fontSize: "14"
                    - type: image   
                      viewTag: statusView
                      path: switch.png
                      style:
                        top: "0.06"
                        left: "0.29"
                        height: "0.04"
                    - type: view
                      style:
                        top: "0.12"
                        left: "0.07"
                      children:
                        - type: label
                          textBoard: 
                            - text: First Name      
                            - text: "*"
                              color: "0xff0000"  
                          style: 
                            width: "0.1"
                            top: "0.01"
                            left: "0"
                            fontSize: "14"
                            fontFamily: Poppins
                        # - type: image
                        #   path: "Icon awesome-asterisk.png"
                        #   style:
                        #     left: "0.0314"
                        #     top: "0.015"
                        #     width: "0.0038"
                        - type: label
                          placeholder: "Enter Here"
                          dataKey: patdProfile.docResp.doc.0.name.data.firstName
                          style:
                            top: "0"
                            left: "0.1"
                            width: "0.15"
                            height: "0.03"
                            border:
                              style: "3"
                            borderColor: "#DCDCDC"
                    - type: view
                      style:
                        top: "0.18"
                        left: "0.07"
                      children:
                        - type: label
                          text: Middle Name      
                          style: 
                            width: "0.1"
                            top: "0.01"
                            left: "0"
                            fontSize: "14"
                            fontFamily: Poppins
                        - type: textField
                          dataKey: patdProfile.docResp.doc.0.name.data.middleName
                          placeholder: "Enter Here"
                          style:
                            top: "0"
                            left: "0.1"
                            width: "0.15"
                            height: "0.03"
                            border:
                              style: "3"
                            borderColor: "#DCDCDC"   
                    - type: view
                      style:
                        top: "0.24"
                        left: "0.07"
                      children:
                        - type: label
                          textBoard: 
                            - text: Last Name      
                            - text: "*"
                              color: "0xff0000"  
                          style: 
                            width: "0.1"
                            top: "0.01"
                            left: "0"
                            fontSize: "14"
                            fontFamily: Poppins
                        - type: textField
                          dataKey: patdProfile.docResp.doc.0.name.data.lastName
                          placeholder: "Enter Here"
                          style:
                            top: "0"
                            left: "0.1"
                            width: "0.15"
                            height: "0.03"
                            border:
                              style: "3"
                            borderColor: "#DCDCDC" 
                    - type: view
                      style:
                        top: "0.3"
                        left: "0.07"
                      children:
                        - type: label
                          text: Gender
                          style: 
                            width: "0.1"
                            top: "0.01"
                            left: "0"
                            fontSize: "14"
                            fontFamily: Poppins
                        - type: textField
                          placeholder: "Enter Here"
                          dataKey: patdProfile.docResp.doc.0.name.data.gender
                          style:
                            top: "0"
                            left: "0.1"
                            width: "0.15"
                            height: "0.03"
                            border:
                              style: "3"
                            borderColor: "#DCDCDC" 
                    - type: view
                      style:
                        top: "0.36"
                        left: "0.07"
                      children:
                        - type: label
                          textBoard: 
                            - text: Phone Number
                            - text: "*"
                              color: "0xff0000"  
                          style: 
                            width: "0.1"
                            top: "0.01"
                            left: "0"
                            fontSize: "14"
                            fontFamily: Poppins
                        - type: textField
                          placeholder: "Enter Here"
                          dataKey: patdProfile.docResp.doc.0.name.data.phone
                          style:
                            top: "0"
                            left: "0.1"
                            width: "0.15"
                            height: "0.03"
                            border:
                              style: "3"
                            borderColor: "#DCDCDC" 
                    - type: view
                      style:
                        top: "0.42"
                        left: "0.07"
                      children:
                        - type: label
                          text: Email
                          style: 
                            width: "0.1"
                            top: "0.01"
                            left: "0"
                            fontSize: "14"
                            fontFamily: Poppins
                        - type: textField
                          placeholder: "Enter Here"
                          dataKey: patdProfile.docResp.doc.0.name.data.email
                          style:
                            top: "0"
                            left: "0.1"
                            width: "0.15"
                            height: "0.03"
                            border:
                              style: "3"
                            borderColor: "#DCDCDC"
                - type: label
                  text: Vitals Signs
                  style:
                    top: "0.5"
                    left: "0.05"
                    fontSize: "22"
                    color: "#7f7f7f"
                    fontFamily: Poppins
                - type: view
                  style: 
                    top: "0.57"
                    width: "0.4" 
                    height: "0.3" 
                    left: "0"
                  children: 
                    - type: label
                      text: Insurance Carrier
                      style: 
                        width: "0.2"
                        top: "0"
                        left: "0.07"
                        height: "0.03"
                        fontSize: "14"
                        fontFamily: Poppins
                        textAlign: 
                          y: center
                    - type: textField
                      placeholder: Enter here
                      dataKey: patdProfile.docResp.doc.0.name.data.insuranceCarrier
                      style: 
                        top: "0"
                        left: "0.17"
                        width: "0.15"
                        height: "0.03"
                        border:
                          style: "3"
                        borderColor: "#DCDCDC" 
                    - type: label
                      text: Medical Group
                      style: 
                        width: "0.2"
                        top: "0.06"
                        left: "0.07"
                        height: "0.03"
                        fontSize: "14"
                        fontFamily: Poppins
                        textAlign: 
                          y: center
                    - type: textField
                      placeholder: Enter here
                      dataKey: patdProfile.docResp.doc.0.name.data.medicalGroup
                      style: 
                        top: "0.06"
                        left: "0.17"
                        width: "0.15"
                        height: "0.03"
                        border:
                          style: "3"
                        borderColor: "#DCDCDC" 
                    - type: label
                      text: Member ID
                      style: 
                        width: "0.2"
                        top: "0.12"
                        left: "0.07"
                        height: "0.03"
                        fontSize: "14"
                        fontFamily: Poppins
                        textAlign: 
                          y: center
                    - type: textField
                      placeholder: Enter here
                      dataKey: patdProfile.docResp.doc.0.name.data.memberId
                      style: 
                        top: "0.12"
                        left: "0.17"
                        width: "0.15"
                        height: "0.03"
                        border:
                          style: "3"
                        borderColor: "#DCDCDC"  
                - .BottomButton:
                  text: 'save'
                  onClick: 
                    - actionType: evalObject
                      object:
                        - =.builtIn.string.concat:
                            dataIn:
                              - =..patdProfile.docResp.doc.0.name.data.firstName
                              - " "
                              - =..patdProfile.docResp.doc.0.name.data.middleName
                              - " "
                              - =..patdProfile.docResp.doc.0.name.data.lastName
                            dataOut: PatientManagement.patdProfile.docResp.doc.0.name.data.inviteeName
                    - actionType: evalObject
                      object:
                        - .Global.jwt.edge.bvid@: =.Global.formData.patientHistoryId
                        - =.Global.jwt.edgeAPI.store: ""
                    - actionType: evalObject
                      object: 
                        - =..everypatientInfo.edgeAPI.store: ""

                    - actionType: evalObject
                      object: 
                        .Global._nonce@: 
                          =.builtIn.math.random: ""
                    - actionType: evalObject
                      object:                           
                        - =..patient3.edgeAPI.get: ""
                        - =.builtIn.object.extractArray: 
                            dataIn: 
                              obj: =..patient3.list.edge
                              arr: =..formData1.dataStruc
                            dataOut: PatientManagement.testD2 
                        - =.builtIn.object.set:   
                            dataIn:
                              object: =.PatientManagement.testD2.0
                              key: "history"
                              value: "Review"
                        - .PatientManagement.tableData.dataObject@: =..testD2
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: refreshData
                            
                    - actionType: popUpDismiss
                      popUpView: EditPatient
                  style:
                    left: '0.28'
                    top: '0.8'
                    backgroundColor: '#005795'
                    color: '0xffffff'
    - .BasePopUp:
      viewTag: ConfirmInformation
      children:
        - type: view
          style:
            left: "0.6"
            width: "0.4"
            height: "1"
            backgroundColor: "0xFFFFFF" 
          children:
            - .PopUphead:
              children:
                - .CreateLabel:
                  text: AddPatient
                - .Closebutton:
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: ConfirmInformation
            - type: view
              viewTag: confirmView
              style:
                height: '0.91'
                width: '0.4'
                top: '0.08'
              children:
                - type: label
                  text: Confirm Information
                  style:
                    top: "0.03"
                    width: "0.4"
                    textAlign:
                      x: center
                    left: "0.01"
                    fontSize: "2vh"
                    color: "0x7f7f7f"
                    fontFamily: Poppins
                - type: view
                  style:
                    top: "0.05"
                    left: "0"
                    width: "0.4"
                    height: "0.4"
                  children:
                    - type: label
                      text: Basic Info
                      style:
                        top: "0.02"
                        left: "0.05"
                        fontSize: "20"
                        color: "#7f7f7f"
                        fontFamily: Poppins
                    - type: label
                      text: Status
                      style:
                        top: "0.04"
                        left: "0.25"
                        fontSize: "14"
                    - type: image   
                      viewTag: statusTag
                      path: switch.png
                      style:
                        top: "0.03"
                        left: "0.29"
                        height: "0.04"
                    - type: view
                      style:
                        top: "0.09"
                        left: "0.07"
                      children:
                        - type: label
                          text: "First Name:     "
                          style: 
                            width: "0.1"
                            top: "0.01"
                            left: "0"
                            fontSize: "14"
                            fontFamily: Poppins
                        # - type: image
                        #   path: "Icon awesome-asterisk.png"
                        #   style:
                        #     left: "0.0314"
                        #     top: "0.015"
                        #     width: "0.0038"
                        - type: label
                          dataKey: patientDisplay.docResp.doc.0.name.data.firstName
                          style:
                            top: "0"
                            left: "0.1"
                            width: "0.15"
                            height: "0.03"
                            textAlign: 
                              x: right

                    - type: view
                      style:
                        top: "0.15"
                        left: "0.07"
                      children:
                        - type: label
                          text: "Middle Name:"
                          style: 
                            width: "0.1"
                            top: "0.01"
                            left: "0"
                            fontSize: "14"
                            fontFamily: Poppins
                        - type: label
                          dataKey: patientDisplay.docResp.doc.0.name.data.middleName
                          style:
                            top: "0"
                            left: "0.1"
                            width: "0.15"
                            height: "0.03"
                            textAlign: 
                              x: right
   
                    - type: view
                      style:
                        top: "0.21"
                        left: "0.07"
                      children:
                        - type: label
                          text: "Last Name:"
                          style: 
                            width: "0.1"
                            top: "0.01"
                            left: "0"
                            fontSize: "14"
                            fontFamily: Poppins
                        - type: label
                          dataKey: patientDisplay.docResp.doc.0.name.data.lastName
                          style:
                            top: "0"
                            left: "0.1"
                            width: "0.15"
                            height: "0.03"
                            textAlign: 
                              x: right
 
                    - type: view
                      style:
                        top: "0.27"
                        left: "0.07"
                      children:
                        - type: label
                          text: "Gender:"
                          style: 
                            width: "0.1"
                            top: "0.01"
                            left: "0"
                            fontSize: "14"
                            fontFamily: Poppins
                        - type: label
                          dataKey: patientDisplay.docResp.doc.0.name.data.gender
                          style:
                            top: "0"
                            left: "0.1"
                            width: "0.15"
                            height: "0.03"
                            textAlign: 
                              x: right
 
                    - type: view
                      viewTag: phoneNumberView
                      style:
                        top: "0.33"
                        left: "0.07"
                      children:
                        - type: label
                          text: "Phone Number:"
                          style: 
                            width: "0.1"
                            top: "0.01"
                            left: "0"
                            fontSize: "14"
                            fontFamily: Poppins
                        - type: label
                          dataKey: formData.phoneNumber
                          style:
                            top: "0"
                            left: "0.1"
                            width: "0.15"
                            height: "0.03"
                            textAlign: 
                              x: right
 
                    - type: view
                      style:
                        top: "0.39"
                        left: "0.07"
                      children:
                        - type: label
                          text: "Email:"
                          style: 
                            width: "0.1"
                            top: "0.01"
                            left: "0"
                            fontSize: "14"
                            fontFamily: Poppins
                        - type: label
                          dataKey: patientDisplay.docResp.doc.0.name.data.email
                          style:
                            top: "0"
                            left: "0.1"
                            width: "0.15"
                            height: "0.03"
                            textAlign: 
                              x: right

                - type: label
                  text: Vitals Signs
                  style:
                    top: "0.5"
                    left: "0.05"
                    fontSize: "22"
                    color: "#7f7f7f"
                    fontFamily: Poppins
                - type: view
                  style: 
                    top: "0.57"
                    width: "0.4" 
                    height: "0.3" 
                    left: "0"
                  children: 
                    - type: label
                      text: Insurance Carrier
                      style: 
                        width: "0.2"
                        top: "0"
                        left: "0.07"
                        height: "0.03"
                        fontSize: "14"
                        fontFamily: Poppins
                        textAlign: 
                          y: center
                    - type: label
                      dataKey: patientDisplay.docResp.doc.0.name.data.insuranceCarrier
                      style: 
                        top: "0"
                        left: "0.17"
                        width: "0.15"
                        height: "0.03"
                        textAlign: 
                          x: right
                    - type: label
                      text: Medical Group
                      style: 
                        width: "0.2"
                        top: "0.06"
                        left: "0.07"
                        height: "0.03"
                        fontSize: "14"
                        fontFamily: Poppins
                        textAlign: 
                          y: center
                    - type: label
                      dataKey: patientDisplay.docResp.doc.0.name.data.medicalGroup
                      style: 
                        top: "0.06"
                        left: "0.17"
                        width: "0.15"
                        height: "0.03"
                        textAlign: 
                          x: right
                    - type: label
                      text: Member ID
                      style: 
                        width: "0.2"
                        top: "0.12"
                        left: "0.07"
                        height: "0.03"
                        fontSize: "14"
                        fontFamily: Poppins
                        textAlign: 
                          y: center
                    - type: label
                      dataKey: patientDisplay.docResp.doc.0.name.data.memberId
                      style: 
                        top: "0.12"
                        left: "0.17"
                        width: "0.15"
                        height: "0.03"
                        textAlign: 
                          x: right
                - .BottomButton:
                  text: 'Next'
                  onClick:
                    - actionType: evalObject
                      object:
                        - .Global.jwt.edge.bvid@: =.Global.currentFacility.id
                        - =.Global.jwt.edgeAPI.store: ""
                        - ..invite.edge.name.phoneNumber@: =..formData.phoneNumber
                        - =..invite.edgeAPI.store: "" 
                    - actionType: evalObject
                      object:
                        - .Global.jwt.edge.bvid@: =.Global.currentUser.vertex.id
                        - =.Global.jwt.edgeAPI.store: ""
                        - ..patientDisplay.docResp.doc.0.name.data.firstName@: ""
                        - ..patientDisplay.docResp.doc.0.name.data.gender@: ""
                        - ..patientDisplay.docResp.doc.0.name.data.middleName@: ""
                        - ..patientDisplay.docResp.doc.0.name.data.inviteeName@: ""
                        - ..formData.phoneNumber@: ""
                        - ..patientDisplay.docResp.doc.0.name.data.lastName@: ""
                        - ..patientDisplay.docResp.doc.0.name.data.insuranceCarrier@: ""
                        - ..patientDisplay.docResp.doc.0.name.data.medicalGroup@: ""
                        - ..patientDisplay.docResp.doc.0.name.data.memberId@: ""
                        - ..patientDisplay.docResp.doc.0.name.data.email@: ""
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: AddPatient      
                    - actionType: popUpDismiss
                      popUpView: ConfirmInformation 
                    - actionType: popUp
                      popUpView: success 
                    # - actionType: popUp
                    #   popUpView: patientSend 
                  style:
                    left: '0.28'
                    top: '0.8'
                    backgroundColor: '#005795'
                    color: '0xffffff'
    - .BasePopUp:
      viewTag: patientSend 
      style:  
        left: "0.3"
        top: "0.184"
        height: "0.5"
        width: "0.5"  
        borderRadius: "10"
        backgroundColor: '0xffffff'
        boxShadow: "0px 0px 1px 3px #EFEFEF"
      children: 
        - type: label
          text: "SEND THIS NODE TO"
          style:
            left: "0.01"
            top: "0.005"
            fontSize: "14"
            fontWeight: "400"
            color: "0x70707070"
        - type: view
          style: 
            left: "0.02"
            height: "0.1"
            top: "0.02"
            width: "0.46"
            # backgroundColor: "#00003390"
          children:
            - type: label
              text: "Send to"
              style:
                fontSize: "13"
                left: "0"
                marginTop: "0.01"
                width: "0.46"
            - type: label
              viewTag: aSent
              # placeholder: "默认"
              dataKey: PatientManagement.patientDisplay.docResp.doc.0.name.data.fullName
              style: 
                left: "0.001"
                marginTop: "0.01"
                height: "0.03"
                width: "0.46"
                border:
                  style: "3"
                borderRadius: "8"
                borderColor: "#DCDCDC"
                # borderWeight: "10" 
                fontSize: "14"
        - type: view
          style: 
            left: "0.02"
            height: "0.4" 
            top: "0.079"
            width: "0.46"
          children: 
            - type: label
              text: "Message"
              style: 
                fontSize: "13"
                left: "0"
                marginTop: "0.01"
                width: "0.46"
            - type: textView
              dataKey: NewInboxMessage.document.name.data.content
              style: 
                left: "0.001"
                marginTop: "0.01"
                height: "0.33"
                fontFamily: poppins
                width: "0.46"
                border:
                  style: "3"
                borderRadius: "8"
                borderColor: "#DCDCDC"
                fontSize: "14"
        - type: button
          text: "SEND MESSAGE"
          onClick:
                        #phone->evid->email->inboxMessage
            - actionType: evalObject
              object:
                - ..NewEmail.edge.evid@: =.PatientManagement.invite.response.edge.evid   
                - ..NewEmail.edge.name.receiveName@: =.PatientManagement.invite.response.edge.name.inviteeName
                - .Global.jwt.edge.bvid@: =.Global.currentFacility.id
                - =.Global.jwt.edgeAPI.store: ""
            - actionType: evalObject #create email
              object: 
                - =..NewEmail.edgeAPI.store: ""
            - actionType: evalObject #create inboxMessage
              object:  
                - ..NewInboxMessage.document.eid@: =..NewEmail.response.edge.id 
                - =..NewInboxMessage.docAPI.store: ""
            - actionType: popUpDismiss
              popUpView: patientSend 
          style: 
            left: '0.41'
            top: "0.46"
            width: "0.08"
            color: "#005795"
            border: none
            backgroundColor: "0xffffff"
            fontSize: "14"
    - .BaseCheckView: ""
      message: "successful!"
      viewTag: success
      style: 
        zIndex: "100000"
        left: "0.42"
    - .SideMenuBar:
      children:
        - .aitLogo:
        - .MenuBar:
    - .TopBar:
    - .BodyView:
      children:
        - .Label2:
          text: Patient Management
          style:
            fontSize: "2.9vh"
            width: "0.3"
            left: "0.03"
            top: "0.02"
        - type: view
          onClick:
            - actionType: evalObject
              object:
                - if: 
                  - =.builtIn.string.equal:
                      dataIn: 
                        string1: =.Global.auth.patient.create
                        string2: true 
                  - actionType: popUp
                    popUpView: AddPatient
                  - actionType: popUp
                    popUpView: patientAuthCreate
          style:
            width: '0.115'
            left: '0.68'
            height: '0.05'
            top:  '0.015'
            backgroundColor: '#005795'
            borderRadius: "5"
            color: '#FFFFFF'
          children:
            - .Label1:
              text: 'Add New Patient'
              style: 
                fontSize: '15'
                # top: '0.013'
                height: '0.05'
                left: '0.031'
                textAlign: 
                  y: center
            - type: image
              path: addwhite.png
              style:
                top: '0.015'
                left: '0.013'
                width: "0.01"
        - .ContentView:
          style: 
            height: "0.75"
            left: "0.03"
            top: "0.076"
            position: fixed
          children: 
            - type: view
              style:
                borderRadius: "5"
                top: '0.04'
                width: '0.72'
                left: '0.03'
                height: '0.4'
              children:
                - type: view                      #头部
                  style:
                    width: '0.72'
                    left: '0'
                    height: '0.054'
                    top: '0'
                    backgroundColor: '#014c82'
                    borderRadius: "5"
                    boxShadow: "0px 0px 1px 1px #5b829d" 
                  children:
                    - .Label2:
                      text: Patient List
                      style:
                        color: '#e8eef3'
                        fontSize: '15'
                - type: view    
                  viewTag: tableView                  #表格
                  style: 
                    width: '0.72'
                    left: '0'
                    height: '0.05'
                    top: '0.052'
                  children:
                    - type: chart
                      viewTag: refreshData
                      dataKey: tableData
                      onClick:
                        - actionType: evalObject
                          object: 
                            .Global._nonce@: 
                              =.builtIn.math.random: ""
                        - actionType: evalObject
                          object: 
                            - .Global.formData.patientHistoryId@: =.PatientManagement.tableData.response.row.id            
                            - if:
                              - =.builtIn.string.equal:
                                  dataIn: 
                                    string1: =.PatientManagement.tableData.response.column
                                    string2: history
                              - actionType: evalObject
                                object:
                                  - if: 
                                    - =.builtIn.string.equal:
                                        dataIn: 
                                          string1: =.Global.auth.patient.review
                                          string2: true 
                                    - goto: PatientHistory
                                    - actionType: popUp
                                      popUpView: patientAuthReview
                              - continue  

                        - actionType: evalObject
                          object: 
                            - if:
                              - =.PatientManagement.tableData.response.column
                              - continue  
                              - actionType: evalObject
                                object: 
                                  - ..patdProfile.docIn.id@: =.PatientManagement.tableData.response.row.id  
                                  - =..patdProfile.docAPI.get: ""
                                  - if: 
                                    - =.builtIn.string.equal:
                                        dataIn: 
                                          string1: =.Global.auth.patient.edit
                                          string2: true 
                                    - actionType: popUp
                                      popUpView: EditPatient  
                                    - actionType: popUp
                                      popUpView: patientAuthEdit
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: infoView

                      style: 
                        left: "0"
                        width: "0.72"
                        height: "auto"
                        top: "0"
                        # overflow: hidden
                        margin: "0"
                        padding: "0"  

                                
