AddLocation: #xd page number: 59
  pageNumber: "350" 
  viewPort: top
  title: "EditFacilityInfo"
  init: 
    - actionType: evalObject
      object:
        - .Global.jwt.edge.bvid@: =.Global.currentFacility.id
        - =.Global.jwt.edgeAPI.store: ""
        - =..locationAll.docAPI.get: ""
        - ..locationAll.document@: =..locationAll.docResp.doc.0
  local: ""
  location:
    resp: ""
    vertex: 
      .Vertex: ""
      type: "21"
      name: 
        basicInfo:
          medicalFacilityName: ""
          specialty: ""
          phoneNumber: ""
          introduction: ""
          address: ""
          city: ""
          state: ""
          zipCode: ""
          taxId: ""
          NPI: ""
          DEANumber: ""
          medicalLicense: ""
          medicalLicenseState: ""
      uid: ""
      jwt: ""
      # pk: "VW/ceBN733d2oAki+muUeSAaKZBaE9SIbRJu5gBz40c="
      # esk: "2f8J1+aRIftJkKL+VxLb00qYjW3hWfQwLIBGumdwum/NHXlv6VChfmPIhj0bTOaUK4VscRwwa4soTqJ8x0a1jsOBoDDZz5aR"
    vertexAPI:
      .VertexAPI: ""
      store: 
        api: cv
        dataIn: AddLocation.location.vertex
        dataOut: AddLocation.location.resp
  fac_RootNotebook:
    edgeReq:
      id: ""
      xfname: bvid
      type: .EdgeType.RootNotebook
    edge: ""
    edgeAPI:
      get:
        api: re
        dataIn: AddLocation.fac_RootNotebook.edgeReq
        dataOut: AddLocation.fac_RootNotebook.edge
  locationAll:   # 把所有的location 信息，在schedule那边显示
    docResp: ""   # get到的值
    docIn:    # for geting all of the location
      type: .DocType.LocationOfFacility
      id: .Global.fac_rootNotebook
      xfname: eid
      obfname: mtime
      maxcount: "1"
      name: 
        data: 
          allLocation: 
    document: # for store some info of location 
      type: .DocType.LocationOfFacility
      eid: .Global.fac_rootNotebook
      name: 
        data: 
          allLocation: []
        # type: "application/json"
    docAPI:
      .DocAPI: ""
      store: 
        api: cd
        dataIn: AddLocation.locationAll.document
        subtype:
          mediaType: "application/json"   
      get: 
        api: rd
        dataIn: AddLocation.locationAll.docIn
        dataOut: AddLocation.locationAll.docResp
  locationProfile:    # information of location
    docResp: ""
    document: 
      eid: ""
      type: .DocType.FacilityProfile
      name: 
        data: 
          basicInfo: ""
    docAPI:
      store:
        api: cd
        dataIn: AddLocation.locationProfile.document
        # dataOut: AddLocation.locationProfile.docResp
  businessLogo:
    url: BusinessLogo.png
    document:
      .Document: ""
      subtype:
        isEncrypted: "1"
        isOnServer: "0"
      type: .DocType.BusinessLogoPicture
      name:
        title: ""
        type: ..businessLogo.docAPI.store.subtype.mediaType
        data: binFile
      deat:
        sig: ""
        url: ""     
      eid: .Global.rootNotebookID
    resp: ""
    docIn: 
      id: .Global.rootNotebookID
      xfname: eid
      type: .DocType.BusinessLogoPicture
      maxcount: "1"
      obfname: "ctime"
      _nonce: =.Global._nonce
    docAPI: 
      store:
        api: cd
        dataKey: businessLogo.document
        subtype:
          mediaType: ""
      get:
        .DocAPI.get: "" 
        dataIn: businessLogo.docIn
        dataOut: AddLocation.businessLogo.resp
  businessLogoResp: ""  #解析后的
  profileResp: ""      #解析后的
  profile:
    url: ProfilePicture.png
    document:
      .Document: ""
      subtype:
        isEncrypted: "1"
        isOnServer: "0"
      type: .DocType.ProfilePicture
      name:
        title: ""
        type: ..profile.docAPI.store.subtype.mediaType
        data: binFile
      deat:
        sig: ""
        url: ""     
      eid: .Global.rootNotebookID
    docIn: 
      id: .Global.rootNotebookID
      xfname: eid
      type: .DocType.ProfilePicture
      maxcount: "1"
      obfname: "ctime"
      _nonce: =.Global._nonce
    docAPI: 
      store:
        api: cd
        dataKey: profile.document
        subtype:
          mediaType: ""
      get:
        .DocAPI.get: "" 
        dataIn: profile.docIn
        dataOut: AddLocation.profile.resp
  formData: 
    countryCode: "+1"
    number: ""
  components:
    - .SideMenuBar:
      children:
        - .aitLogo:
        - .MenuBar:
    - .TopBar:
    - .BodyView:
      children:
        - type: view
          style:  
            left: "0.03"
            top: "0.01"
            width: "0.78"
            height: "0.06"
          children: 
            - .EdLabel:
              text: Back
              onClick: 
                - actionType: builtIn
                  funcName: goBack
                  reload: true
              style:
                height: "0.055"
                width: "0.08"
                fontSize: "1.8vh"
                top: "0.024"
                left: "0"
                textDecoration: underline
                color: "0x005795"
                # backgroundColor: "0xcdcdcd"
                textAlign: 
                  x: left
            # - .ProviderButton: 
            #   text: Facility Info
            #   # style:
            #   #   backgroundColor: "#003D68"
            #   #   color: "0xffffff"
            #   #   textDecoration: underline
            #   onClick: 
            #     - goto: EditFacilityInfo
            # - .ProviderButton: 
            #   text: Add Facility
            #   # onClick: 
            #   #   - goto: AddLocation
            #   style:
            #     left: "0.1"
            #     fontSize: "15"
            #     backgroundColor: "#003D68"
            #     color: "0xffffff"
            #     textDecoration: underline
            - .Edimage:
              path: Icon material-close.png
            - .EdLabel:
              text: "NOT VERIFIED YET"
    - .ContentView:
      style: 
        height: "0.83"
        left: "0.19"
        top: "0.145"
      children:
        - .BottomButton:
          text: "Save"
          onClick:
            - actionType: popUp
              popUpView: uploading 
            - actionType: evalObject
              object: 
                - =.builtIn.string.concat:
                    dataIn:
                      - =..formData.countryCode
                      - " "
                      - =..formData.number
                    dataOut: AddLocation.location.vertex.name.basicInfo.phoneNumber 
                - ..location.vertex.uid@: =..location.vertex.name.basicInfo.phoneNumber 
            - actionType: evalObject
              object:
                - .Global.jwt.edge.bvid@: =.Global.currentFacility.id
                - =.Global.jwt.edgeAPI.store: ""
                - =..location.vertexAPI.store: ""
                - ..local.id@: =..location.resp.data.vertex.id
                - ..local.medicalFacilityName@: =..location.resp.data.vertex.name.basicInfo.medicalFacilityName
                - ..local.phoneNumber@: =..location.resp.data.vertex.name.basicInfo.phoneNumber 
                - ..local.address@: =..location.resp.data.vertex.name.basicInfo.address 
                - =.builtIn.array.add:
                    dataIn:
                      object: =..locationAll.document.name.data.allLocation
                      value: =..local
                - =.builtIn.array.add:
                    dataIn:
                      object: =.Global.locationAll
                      value: =..local
                - =..locationAll.docAPI.store: ""  
                - ..fac_RootNotebook.edgeReq.id@: =..location.resp.data.vertex.id
                - =..fac_RootNotebook.edgeAPI.get: ""
                - .Global.jwt.edge.bvid@: =..location.resp.data.vertex.id
                - =.Global.jwt.edgeAPI.store: ""
                - if: 
                  - =..businessLogo.resp.doc.0
                  - =.builtIn.ecos.shareDoc: 
                      dataIn:                
                        sourceDoc: =..businessLogo.document
                        # targetEdgeID: =.Global.rootRoomInfo.edge.id
                        targetEdgeID: =..fac_RootNotebook.edge.edge.0.id
                  - continue
                - if: 
                  - =..profile.resp.doc.0
                  - =.builtIn.ecos.shareDoc: 
                      dataIn:                
                        sourceDoc: =..profile.document
                        # targetEdgeID: =.Global.rootRoomInfo.edge.id
                        targetEdgeID: =..fac_RootNotebook.edge.edge.0.id
                  - continue
                # - .Global.jwt.edge.bvid@: =..location.resp.data.vertex.id
                # - =.Global.jwt.edgeAPI.store: ""
                - ..locationProfile.document.name.data.basicInfo@: =..location.vertex.name.basicInfo
                - ..locationProfile.document.eid@: =..fac_RootNotebook.edge.edge.0.id
                - =..locationProfile.docAPI.store: ""
            - actionType: evalObject
              object:
                - actionType: popUpDismiss
                  popUpView: uploading 
            - goto: FacilityInfo1
          style:
            left: "0.65"
            top: "0.04"
            color: "#ffffff"
            backgroundColor: "#00497c"
            width: "0.11"
        - type: label
          text: "Account Management"
          style:
            fontSize: "16"
            left: "0.02"
            top: "0.03"
            color: "#517086"
        - .Label1:
          text: "Medical Facility Name"
          style:
            left: "0.04"
            top: "0.09"
        - .TextField1:
          dataKey: location.vertex.name.basicInfo.medicalFacilityName
          style:
            width: "0.25"
            left: "0.04"
            top: "0.12"
        - .Label1:
          text: "Phone Number"
          style:
            left: "0.31"
            top: "0.09"
        - type: select
          contentType: countryCode
          placeholder: ..formData.countryCode
          dataKey: formData.countryCode # formData.countryCode : inputValue
          options:
            .CountryCode
          required: "true"
          style:
            width: "0.03"
            left: "0.31"
            top: "0.12"
            height: "0.045"
            placeholder: "US +1"
            backgroundColor: "0xffffff"
            borderWidth: "1"
            border:
              style: "3"
              color: "0xdededf"  
            # borderRadius: "5"  
        - .TextField1:
          placeholder: "Enter Phone Number Here"
          dataKey: formData.number
          style:
            width: "0.21"
            left: "0.35"
            top: "0.12"
        - .Label1:
          text: "Specialty"
          style:
            left: "0.61"
            top: "0.09"
        - type: select
          dataKey: location.vertex.name.basicInfo.specialty
          options:
            .SpecialtySelect
          style:
            top: "0.12"
            left: "0.61"
            width: "0.15"
            height: "0.05"
            borderColor: "#eaeaea"
            color: "#000000"
            borderRadius: "3px 3px 0px 0px"
        - type: image
          path: bottomArrow.png
          style:
            top: "0.12"
            left: "0.745"
            height: "0.05"
        - .Label1:
          text: "Address"
          style:
            left: "0.04"
            top: "0.18"
        - .TextField1:
          # placeholder: "1000 S Anaheim Blvd Ste 200"
          dataKey: location.vertex.name.basicInfo.address
          style:
            width: "0.25"
            left: "0.04"
            top: "0.21"
        - .Label1:
          text: "City"
          style:
            left: "0.31"
            top: "0.18"
        - .TextField1:
          # placeholder: "Anaheim"
          dataKey: location.vertex.name.basicInfo.city
          style:
            width: "0.25"
            left: "0.31"
            top: "0.21"   
        - .Label1:
          text: "State"
          style:
            left: "0.61"
            top: "0.18"
        - .TimeSelect:
          style:
            width: "0.06"
            left: "0.61"
            top: "0.21"
            fontStyle: "bold"
          dataKey: location.vertex.name.basicInfo.state
          options: .SelectData.state               
            
        - .Label1:
          text: "Zip Code"
          style:
            left: "0.68"
            top: "0.18"
        - .TextField1:
          # placeholder: "12345"
          dataKey: location.vertex.name.basicInfo.zipCode
          style:
            width: "0.09"
            left: "0.68"
            top: "0.21"    
        - .Label1:
          text: "Introduction"
          style:
            left: "0.04"
            top: "0.28"
        - type: textView
          # placeholder: "Lorem ipsum dolor sit amet,consectetur adipiscing elit.Vestibulum porttitor iaculis velit,sit amet interdum risus lacinia at.Praesent porta ac lorem gravida commodo.Aliquam dictum volutpat justo,sit amet interdum leo elementum eu.Aenean varius dolor at pellentesque sagittis.Cras consectetur leo nec libero ultricies malesuada."
          dataKey: location.vertex.name.basicInfo.introduction
          style:
            width: "0.73"
            height: "0.1"
            fontFamily: "sans-serif"
            left: "0.04"
            top: "0.31"
            borderColor: "#EAEAEA"
        - .Label1:
          text: "Tax ID"
          style:
            left: "0.04"
            top: "0.43"
        - .TextField1:
          placeholder: "1234567890"
          dataKey: location.vertex.name.basicInfo.taxId
          style:
            width: "0.25"
            left: "0.04"
            top: "0.46"
        - .Label1:
          text: "NPI"
          style:
            left: "0.31"
            top: "0.43"
        - .TextField1:
          # placeholder: "1234567890"
          dataKey: location.vertex.name.basicInfo.NPI
          style:
            width: "0.21"
            left: "0.31"
            top: "0.46"
        - type: label
          text: "Uploads"
          style:
            fontSize: "16"
            left: "0.02"
            top: "0.54"
            color: "#517086"   
        - type: view
          viewTag: pictureViewTag
          style: 
            left: "0"
            width: "0.78"
            top: "0.59"
            height: "0.23"
          children: 
            - .Label1:
              text: "Business Logo"
              style:
                left: "0.16"
                top: "0"  
                width: "0.15"
                textAlign: 
                  x: center
            - .Label1:
              text: "Profile Picture"
              style:
                left: "0.47"
                top: "0"  
                width: "0.15"
                textAlign: 
                  x: center
            - .EdImage:
              contentType: file
              onClick:
                - actionType: updateObject
                  dataObject: BLOB
                  dataKey: AddLocation.businessLogo.document.name.data
                - actionType: popUp
                  popUpView: uploading 
                - actionType: evalObject
                  object:
                    - .Global.jwt.edge.bvid@: =.Global.currentUser.vertex.id
                    - =.Global.jwt.edgeAPI.store: ""
                    - =..businessLogo.docAPI.store: ""
                - actionType: evalObject
                  object:
                    .Global._nonce@:
                      =.builtIn.math.random: ""
                - actionType: evalObject
                  object: 
                    - =..businessLogo.docAPI.get: ""
                    - ..businessLogo.document@: =..businessLogo.resp.doc.0
                - actionType: evalObject
                  object:
                    - =.builtIn.utils.prepareDoc:
                        dataIn:
                          doc: =..businessLogo.resp.doc.0
                        dataOut: AddLocation.businessLogoResp
                - actionType: evalObject
                  object:
                    - ..businessLogo.url@: =..businessLogoResp.name.data
                - actionType: popUpDismiss
                  popUpView: uploading 
                - actionType: builtIn
                  funcName: redraw
                  viewTag: pictureViewTag

              path: 
                emit: 
                  actions: 
                    - if: 
                      - =..businessLogoResp.name.data
                      - ..businessLogoResp.name.data
                      - BusinessLogo.png
              style:
                left: "0.16"
                top: "0.05"
                width: "0.15"
                height: "0.1"
            - .EdImage:
              contentType: file
              onClick:
                - actionType: updateObject
                  dataObject: BLOB
                  dataKey: AddLocation.profile.document.name.data
                - actionType: popUp
                  popUpView: uploading 
                - actionType: evalObject
                  object:
                    - .Global.jwt.edge.bvid@: =.Global.currentUser.vertex.id
                    - =.Global.jwt.edgeAPI.store: ""
                    - =..profile.docAPI.store: ""
                - actionType: evalObject
                  object:
                    .Global._nonce@:
                      =.builtIn.math.random: ""
                - actionType: evalObject
                  object: 
                    - =..profile.docAPI.get: ""
                    - ..profile.document@: =..profile.resp.doc.0
                - actionType: evalObject
                  object:
                    - =.builtIn.utils.prepareDoc:
                        dataIn:
                          doc: =..profile.resp.doc.0
                        dataOut: AddLocation.profileResp
                - actionType: evalObject
                  object:
                    - ..profile.url@: =..profileResp.name.data
                - actionType: popUpDismiss
                  popUpView: uploading 
                - actionType: builtIn
                  funcName: redraw
                  viewTag: pictureViewTag
              path: 
                emit: 
                  actions: 
                    - if: 
                      - =..profileResp.name.data
                      - ..profile.url
                      - ProfilePicture.png
              style:
                left: "0.47"
                top: "0.05"
                width: "0.15"
                height: "0.1"
    - .LoadingView: ""
      message: "loading ..."
      viewTag: uploading


      
      