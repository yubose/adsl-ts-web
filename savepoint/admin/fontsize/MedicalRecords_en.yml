MedicalRecords:
  pageNumber: "310"
  title: Medical Records
  init:
    - .SignInCheck
    - ..listData.docAPI.get
    - if:
      - ..listData.medicalRecords.doc.0
      - continue
      - =.builtIn.checkField:
          dataIn:
            contentType: messageHidden
            wait: 100 
  listData: 
    medicalRecords:
    docAPI:
      get:
        .DocAPI.get : ""
        id: .Global.formData.patientHistoryInfo.id
        xfname: eid
        type: .DocType.UploadFile
        dataKey: listData.medicalRecords
        maxcount : "500"
        obfname : "mtime" 
        _nonce: =.Global._nonce
  components:
    - type: scrollView
      style:
        left: "0"
        top: "0.02"
        width: "1"
        height: "0.9"
        overflowX: hidden
      children:
      - type: view
        style:
          left: "0"
          width: "1"
          top: "0"
          height: "0.9"
          position: fixed
        children:
          - type: label
            text: Medical Records
            style:
              top: "0.03"
              left: "0.1"
              width: "0.35"
              height: "0.07"
              fontSize: '20'
              # fontWeight: "600"
          - type: button
            text: UpLoad
            style:
              left: "0.8"
              top: "0.03"
              width: "0.15"
              height: "0.06"
              fontSize: "1.9vh"
              color: "#005795"
              borderRadius: "3"
              border:
                style: "3"
              borderWidth: "2"
              textAlign: 
                x: ccenter
              backgroundColor: "#ffffff"
              borderColor: "#005795"
          - type: label
            contentType: messageHidden
            text: "No Medical Records"
            style:
              left: "0.31"
              top: "0.15"
              width: "0.69"
              height: "0.04"
              color: "0x000058"
              fontSize: "16"
              isHidden: "true"
          - type: list
            contentType: listObject
            listObject: ..listData.medicalRecords.doc
            iteratorVar: itemObject
            style:
              left: "0.08"
              top: "0.1"
              width: "1"
              height: "0.78"
              # backgroundColor: "0xf3f3f3"
            children: 
              - type: listItem
                itemObject: ""
                onClick:
                  - actionType: updateObject
                    dataKey: Global.formData.medicalRecords
                    dataObject: itemObject
                  - goto: ViewMedicalRecord
                style:
                  left: "0.03"
                  # top: "0"
                  width: "0.8"
                  height: "0.15"
                  backgroundColor: "0xffffff"
                  marginTop: "0.03"
                  # border:
                  #   style: "2"
                  # borderWidth: "1"
                  # borderColor: "0x00000033"
                  boxShadow: "#dededf 0px 0px 10px"
                children:
                  # - type: image
                  #   path: drImg.png
                  #   style:
                  #     left: "0.07"
                  #     top: "0.003"
                  #     width: "0.14"
                  #     height: "0.08"
                  #     borderRadius: "50"
                  - type: label
                    dataKey: itemObject.name.title
                    # dataKey: itemObject.key
                    style:
                      left: "0.05"
                      top: "0.03"
                      width: "0.45"
                      height: "0.04"
                      fontSize: "18"  #16
                      textAlign:
                        y: center
                  - type: label
                    text=func: .builtIn.string.formatUnixtime_en
                    dataKey: itemObject.ctime
                    # dataKey: itemObject.ctim
                    style:
                      left: "0.05"
                      top: "0.08"
                      width: "0.45"
                      height: "0.04"
                      fontSize: "13"
                      color: "0x828282"
                      textAlign:
                        y: center
                      fontFamily: PMingLiU
                  - type: label
                    text=func:  .builtIn.string.formatDurationInSecond
                    dataKey: itemObject.tage # hh:mm'ss"
                    # dataKey: itemObject.tag
                    style: 
                      left: "0.65"
                      top: "0.06"
                      width: "0.2"
                      height: "0.02"
                      fontSize: "13"
                      textAlign: 
                        x: left
                      fontFamily: PMingLiU