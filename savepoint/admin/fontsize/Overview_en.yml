Overview:       # xd page number: 17
  pageNumber: "110"
  init:
    - .SignInCheck
    - ..author.edgeAPI.get
    - if:
      - =.Global.formData.firstLogIn
      - continue
      - actionType: updateObject
        dataKey: Global.relation.edgeReq.id
        dataObject: []
    - if:
      - =.Global.formData.firstLogIn
      - continue
      - actionType: updateObject
        dataKey: Global.auth
        dataObject: ""
    - if:
      - =.Global.formData.firstLogIn
      - continue
      - .Global.auth@: =.Global.relation.edgeResponse.edge.0.name.auth
    - .Global.formData.firstLogin@: false
    - =.builtIn.array.add:
        dataIn:
          object: =..facility.documentReq.id
          value: =.Global.currentUser.vertex.id
    - =.builtIn.array.add:
        dataIn:
          object: =..facility.documentReq.id
          value: =.Global.currentFacility.id
    - =..fac_RootNotebook.edgeAPI.get: ""
    - .Global.fac_rootNotebook@: =..fac_RootNotebook.edge.edge.0.id
    - ..locationAll.docIn.id@: =..fac_RootNotebook.edge.edge.0.id
    - ..locationAll.document.eid@: =..fac_RootNotebook.edge.edge.0.id
    - =..locationAll.docAPI.get: ""
    - =.builtIn.array.add:
        dataIn:
          object: =..currentFaci
          value: =.Global.currentFacility
    - if: 
      - =..locationAll.docResp.doc.0
      - continue
      - =.builtIn.object.extractArray: 
          dataIn: 
            obj: =..currentFaci
            arr: =..extractData
          dataOut: Overview.locationAll.document.name.data.allLocation
    - .Global.jwt.edge.bvid@: =.Global.currentFacility.id
    - =.Global.jwt.edgeAPI.store: ""
    - actionType: evalObject
      object:
        - if: 
          - =..locationAll.docResp.doc.0
          - continue
          - =..locationAll.docAPI.store: ""
    - if: 
      - ..locationAll.docResp.doc.0
      - .Global.locationAll@: =..locationAll.docResp.doc.0.name.data.allLocation
      - .Global.locationAll@: =..locationAll.document.name.data.allLocation
    - =.builtIn.array.selectOneToArr:
        dataIn:
          arr: =.Global.locationAll
          key: "medicalFacilityName"
        dataOut: Overview.formData.addressName
    - =..appointment.edgeAPI.get: ""
  locationId: .Global.currentFacility.id
  requestLocationId: .Global.currentFacility.id
  requestAddress: ""
  fac_RootNotebook:
    edgeReq:
      id: .Global.currentFacility.id
      xfname: bvid
      type: .EdgeType.RootNotebook
    edge: ""
    edgeAPI:
      get:
        api: re
        dataIn: Overview.fac_RootNotebook.edgeReq
        dataOut: Overview.fac_RootNotebook.edge
  viewPort: top
  formData:
    currentVisitType: "Telemedicine"
    currentLocation: ""
    locationHidden: "true"
    addressName: ""
  title: "Overview"
  MenuData: .menuBar.listData
  dateList: 
    - key: Days
      color: "0xffffff"
      bgc: "0x005795"
    - key: Weeks
      color: "0x000000"
      bgc: "0xffffff"
    - key: Months
      color: "0x000000"
      bgc: "0xffffff"
  currentFaci: []
  extractData:   
    - id
    - name.basicInfo.medicalFacilityName
    - name.basicInfo.phoneNumber
    - name.basicInfo.address
  #get 1100 or 1200
  author:
    response: ""
    edge:
      id:
        - .Global.currentFacility.id
        - .Global.currentUser.vertex.id
      xfname: "evid & bvid"
      sCondition: "type in (1200,1100)"
      # maxcount : ""
      obfname : "ctime"
      _nonce: =.Global._nonce
    edgeAPI:
      get:
        api: re
        dataOut: author.response
        dataIn: author.edge 
  tableData: 
    grid:
      left: 3%
      right: 2%
      # top: 0%
      bottom: 5%
      # containLabel: 'true' 
    xAxis:
      type: category
      boundaryGap: false
      data:
      axisTick:    # 刻度线 
        show: false
      axisLine:    
        show: false
      show: false
    yAxis:
      type: value
      splitLine:    # 网格线 Grid
        show: false
      show: false
    series:
      data:
        - 500
        - 932
        - 901
        - 934
        - 1290
        - 1330
        - 1320
      type: line
      itemStyle: 
        normal: 
          lineStyle: 
              width: "1"
          color: "#39d794"
      symbol: none
      areaStyle: 
        normal: 
          width: "0.1"
          color: 
            type: linear
            x: 0
            y: 0
            x2: 0
            y2: 1
            colorStops:
              - offset: 0
                color: "#39d794"
              - offset: 1
                color: "#ffffff"
            globalCoord: false    
  tableData1: 
    grid:
      left: 3%
      right: 2%
      # top: 0%
      bottom: 5%
      # containLabel: 'true' 
    xAxis:
      type: category
      boundaryGap: false
      data:
      axisTick: 
        show: false
      axisLine: 
        show: false
      show: false
    yAxis:
      type: value
      splitLine: 
        show: false
      show: false
    series:
      data:
        - 500
        - 932        
        - 1330
        - 1320
        - 901
        - 934
        - 1290
      type: line
      itemStyle: 
        normal: 
          lineStyle: 
              width: "1"
          color: "#ffc700"
      symbol: none
      areaStyle: 
        normal: 
          width: "0.1"
          color: 
            type: linear
            x: 0
            y: 0
            x2: 0
            y2: 1
            colorStops:
              - offset: 0
                color: "#ffc700"
              - offset: 1
                color: "#ffffff"
            globalCoord: false    
  tableData2: 
    grid:
      left: 3%
      right: 2%
      # top: 0%
      bottom: 5%
      # containLabel: 'true' 
    xAxis:
      type: category
      boundaryGap: false
      data:
      axisTick: 
        show: false
      axisLine: 
        show: false
      show: false
    yAxis:
      type: value
      splitLine: 
        show: false
      show: false
    series:
      data:
        - 1290
        - 1330
        - 1320
        - 500
        - 932
        - 901
        - 934
      type: line
      itemStyle: 
        normal: 
          lineStyle: 
              width: "1"
          color: "#2563ff"
      symbol: none
      areaStyle: 
        normal: 
          width: "0.1"
          color: 
            type: linear
            x: 0
            y: 0
            x2: 0
            y2: 1
            colorStops:
              - offset: 0
                color: "#2563ff"
              - offset: 1
                color: "#ffffff"
            globalCoord: false 
  locationAll:   # 把所有的location 信息，在schedule那边显示
    docResp: ""   # get到的值
    docIn:    # for geting all of the location
      type: .DocType.LocationOfFacility
      id: ""
      xfname: eid
      obfname: mtime
      maxcount: "1"
      name: 
        data: 
          allLocation: 
    document: # for store some info of location 
      type: .DocType.LocationOfFacility
      eid: ""
      name: 
        data: 
          allLocation: []
        # type: "application/json"
    docAPI:
      .DocAPI: ""
      store: 
        api: cd
        dataIn: Overview.locationAll.document
        subtype:
          mediaType: "application/json"   
      get: 
        api: rd
        dataIn: Overview.locationAll.docIn
        dataOut: Overview.locationAll.docResp
  appointment:
    list:
      edge: []
    deleteReq:
      id: ""
    edge:
      .Edge: ""
      id:
        - .Global.currentFacility.id
      ObjType: 20
      xfname: "E2.bvid"
      # type: .EdgeType.WaitingRoom
      sCondition: "E2.type=40000 AND E2.subtype in (196609) AND E.type = 40000 AND E.subtype=196610"
      obfname: "ctime"
      _nonce: .Global._nonce
      maxcount: "9"
    edgeAPI:
      get:
        api: re
        dataIn: Overview.appointment.edge
        dataOut: Overview.appointment.list
      delete:
        api: dx
        dataIn: Overview.appointment.deleteReq
  components:
    - .SideMenuBar:
      children:
        - .aitLogo:
        - .MenuBar:
    - .TopBar:
    - .BodyView:
      children:
        - .PageTitle:
          style:
            top: "0"
        - .Pageview:
          children:
            - .Border1: 
              onClick:
                - actionType: popUp
                  popUpView: test
              style:
                left: "0.58"
              children:
                - .Buttonimage:
                  style: 
                    left: "0.01"
                - .Buttonlabel:
                  style: 
                    left: "0.026"
            - .Border1: 
              onClick:  
              style: 
                left: "0.69" 
                width: "0.11"  
              children:
                - .Buttonimage:  
                  style: 
                    left: "0.007" 
                - .Buttonlabel:
                  style: 
                    left: "0.022"
                  text: "Add Appointment"
            - .Border2: 
              style:
                width: "0.375"
              children:
                - .View1:
                  text: "New Patients"
                  style:
                    left: "0.01"
                - .View2:
                  text: "122"
                  style:
                    left: "0.01"
                - .View3:
                  text: "1.2%↓"
                  style:
                    left: "0.01"
                - .View4:
                  style:
                    left: "0.04"
                - .chartView: 
                  children: 
                    - type: chart
                      dataKey: tableData1
                      style: 
                        left: "0"
                        width: "0.26"
                        height: "0.17"
                        top: "0"
                        margin: "0"
                        padding: "0"  
            - .Border2: 
              style:
                left: "0.425"
                width: "0.375"
              onClick:
                
              children:
                - .View1:
                  text: "Total Number of Patients"
                  style:
                    left: "0.01"
                - .View2:
                  text: "2.5K"
                  style:
                    left: "0.01"
                - .View3:
                  text: "2.3%↑"
                  style:
                    left: "0.01"
                    color: "#3DD598"
                - .View4:
                  style:
                    left: "0.04"
                - .chartView: 
                  children: 
                    - type: chart
                      dataKey: tableData2
                      style: 
                        left: 0"
                        width: "0.26"
                        height: "0.17"
                        top: "0"
                        margin: "0"
                        padding: "0"  
            - .Border2: 
              style:
                top: "0.35"
                height: "0.55"
                width: "0.497"
                left: "0.04"
              children:
                - type: select
                  dataKey: formData.currentVisitType
                  options:
                    - Telemedicine
                    - Office Visits
                  style:
                    width: "0.1"
                    left: "0.02"
                    height: "0.03"
                    top: "0.02"
                    fontSize: .Nfont.h1
                  onChange:
                    - actionType: evalObject
                      object:
                        .Global._nonce@:
                          =.builtIn.math.random: ""
                    # - actionType: updateObject
                    #   dataKey: Overview.appointment.list.edge
                    #   dataObject: []
                    - actionType: evalObject
                      object:
                        ..appointment.list.edge@: []
                    - actionType: evalObject
                      object:
                        - if:
                          - =.builtIn.string.equal:
                              dataIn: 
                                string1: =..formData.currentVisitType
                                string2: "Office Visits"
                          - ..appointment.edge.sCondition@: "E2.type=40000 AND E2.subtype in (131073) AND E.type = 40000 AND E.subtype=131074" 
                          - ..appointment.edge.sCondition@: "E2.type=40000 AND E2.subtype in (196609) AND E.type = 40000 AND E.subtype=196610" 
                        - ..appointment.list.edge@: []
                        - ..appointment.edge.id.0@: =.Global.currentFacility.id
                        - .Global.jwt.edge.bvid@: =.Global.currentFacility.id
                        - =.Global.jwt.edgeAPI.store: ""
                        - =..appointment.edgeAPI.get: ""
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: appointmentTagView
                    - actionType: evalObject
                      object:
                        - if:
                          - =.builtIn.string.equal:
                              dataIn: 
                                string1: =..formData.currentVisitType
                                string2: "Office Visits"
                          - actionType: builtIn
                            funcName: show
                            viewTag: locationSelect
                          - actionType: builtIn
                            funcName: hide
                            viewTag: locationSelect
                - type: select
                  viewTag: locationSelect
                  dataKey: requestAddress
                  onChange: 
                    - actionType: evalObject
                      object:
                        - =.builtIn.array.matchInArray:
                            dataIn:
                              arr: =.Global.locationAll
                              value: =..requestAddress
                              key: medicalFacilityName
                              key1: "id"
                            dataOut: Overview.requestLocationId
                        # - ..appointment.edge.id.1@: =..formData.providerId
                        - ..appointment.edge.id.0@: =..requestLocationId
                        - ..appointment.list.edge@: []
                        - ..appointment.edge.sCondition@: "E2.type=40000 AND E2.subtype in (131073) AND E.type = 40000 AND E.subtype=131074" 
                        - .Global.jwt.edge.bvid@: =..requestLocationId
                        - =.Global.jwt.edgeAPI.store: ""
                        - =..appointment.edgeAPI.get: ""
                        - =.builtIn.array.getListLength:
                            dataIn:
                              object: =..appointment.list.edge
                            dataOut: Overview.formData.appointmentLength
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: appointmentTagView
                  options:
                    ..formData.addressName
                  style:
                    width: "0.1"
                    left: "0.14"
                    height: "0.03"
                    top: "0.02"
                    fontSize: .Nfont.h1
                    isHidden: =..formData.locationHidden
                - type: view
                  onClick:
                    - goto: ScheduleManagement
                  style:
                    left: "0.02"
                    width: "0.47"
                    top: "0.06"
                    height: "0.45"
                    backgroundColor: "0xf0f0f0ad"
                  children: 
                    - type: scrollView
                      viewTag: appointmentTagView
                      style:
                        width: "0.47"
                        left: "0"
                        top: "0"
                        height: "0.45"
                        overflow: scroll
                        backgroundColor: "0xffffff"
                      children:
                        - .BaseList:
                          # viewTag: appointmentTagView
                          listObject: ..appointment.list.edge
                          style:
                            width: '0.47'
                            left: '0'
                            height: 'auto'
                            top: "0"
                            margin: "0"
                          children:
                            - .BaseListItem:
                              style:
                                width: '0.14'
                                height: '0.13'
                                marginTop: "0.015"
                                display: inline-block
                                backgroundColor: ' #F4F8FA'
                                borderRadius: '10'
                                marginRight: "25px"
                                # float: left
                              children:
                                - .Label1:
                                  dataKey: itemObject.name.patientName
                                  style:
                                    fontSize: .Nfont.h2
                                    fontWeight: '500'
                                    left: '0.05'
                                    top: '0.02'
                                - .Label1:
                                  dataKey: itemObject.name.visitType
                                  style:
                                    left: '0.05'
                                    top: '0.047'
                                    color: '#808080'
                                - type: image
                                  path: schedule.png
                                  style:
                                    width: '0.01'
                                    left: '0.01'
                                    top: '0.09'
                                - .Label1:
                                  text=func: .builtIn.string.formatUnixtimeL_en
                                  dataKey: itemObject.stime
                                  style:
                                    left: '0.025'
                                    top: '0.09'
                                    color: '#000000'
                                - type: image
                                  path: history.png
                                  style:
                                    width: '0.01'
                                    left: '0.08'
                                    top: '0.091'
                                - .Label1:
                                  text=func: .builtIn.string.formatUnixtimeLT_en
                                  dataKey: itemObject.stime
                                  style:
                                    left: '0.093'
                                    top: '0.09'
                                    color: '#000000'               
                                - type: image
                                  path: 'Beau McGee.png'
                                  style: 
                                    width: '0.04'
                                    top: '0.01'
                                    left: '0.003'
            - .Border2: 
              style:
                left: "0.55"
                top: "0.35"
                height: "0.55"
              onClick:
                
              children:
                - .View5:
                  text: "Appointments"
                  style:
                    left: "0.01"
                - .View6:
                  style:
                    left: "0.02"
                - .Borrow:
                  style:
                    top: "0.47"
                    left: "0.11"
                - .Dividerline:
                  style:
                    left: "0.02"
                - .Squareimage:
                - .Squarelabel1:
                - .Squarelabel2:
                - .Squareimage:
                  path: "square2.png"
                  style:
                    top: "0.3"
                - .Squarelabel1:
                  text: "Reschedule"
                  style:
                    top: "0.292"
                - .Squarelabel2:
                  text: "25%"
                  style:
                    top: "0.292"
                - .Squareimage:
                  path: "square3.png"
                  style:
                    top: "0.34"
                - .Squarelabel1:
                  text: "Cancel"
                  style:
                    top: "0.332"
                - .Squarelabel2:
                  text: "15%"
                  style:
                    top: "0.332"
                - .Squareimage:
                  path: "square4.png"
                  style:
                    top: "0.38"
                - .Squarelabel1:
                  text: "No Shows"
                  style:
                    top: "0.372"
                - .Squarelabel2:
                  text: "10%"
                  style:
                    top: "0.372"
    - .Icons:      
    - .BaseCheckView:      
      viewTag: test
