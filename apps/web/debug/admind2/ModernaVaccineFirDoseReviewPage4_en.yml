ModernaVaccineFirDoseReviewPage4: #xd page number: 1080
  pageNumber: "450" 

  title: "Moderna Vaccine Form - First Dose"

  init: # Page initialization
    - .SignInCheck
    - =.builtIn.string.concat:
        dataIn:
          - "I GIVE CONSENT to "
          - =.Global.currentFacility.name.basicInfo.medicalFacilityName
          - " to vaccinate me with the COVID-19. You must electronically sign this consent to receive the COVID-19 Vaccine."
        dataOut: ModernaVaccineFirDoseReviewPage4.formData.consent.0.value2
    - =.builtIn.string.concat:
        dataIn:
          - "I DO NOT GIVE CONSENT to "
          - =.Global.currentFacility.name.basicInfo.medicalFacilityName
          - " to be vaccinated."
        dataOut: ModernaVaccineFirDoseReviewPage4.formData.consent.1.value2  
    - ..formDataTemp.single.0.consent@: =.Global.formData.modernaVaccineFirDoseForm.name.data.signatureConsent.consent
  formData: # Input data here
    consent: 
      - key: consent
        value1: "1"
        value2: ""
      - key: consent
        value1: "0"
        value2: ""

  formDataTemp: # Input data temp here, datatemp should not mix with formData
    single:
      - consent: "1"

  apiRequest: # Input data request here

  style: # Input style fragment here

  components:
    - type: view
      style:
        width: "1"
        height: "1"
        margin: auto
      children:
        - .SideMenuBar:
          children:
            - .aitLogo:
            - .MenuBar:
        - .TopBar:
        - .BodyView:
          style: 
            height: "0.93"
          children:
            - .AppointmentLobby:
            - .GotoBack:
            - type: view
              style:
                left: "0.008"
                width: "0.824"
                height: "0.74"
                top: "0.1"
                overflow: hidden
                backgroundColor: "0xffffff"
              children:
                - .SwitchFormLeft:
                  onClick:
                    goto: ModernaVaccineFirDoseReviewPage3
                - .SwitchFormRight:
                  onClick:
                    # - goto: ModernaVaccineFirDoseReviewPage5@PatientSummary#pageView
                    - actionType: evalObject
                      object:
                        - if:
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: "Yes"
                                string2: =.Global.formData.modernaVaccineFirDoseForm.name.data.billingInfo.medicalInsurance
                          - goto: ModernaVaccineFirDoseReviewPage5
                          - goto: ModernaVaccineFirDoseReviewPage6
                    # - actionType: evalObject
                    #   object:
                    #     - if:
                    #       - =.builtIn.string.equal:
                    #           dataIn:
                    #             string1: "Yes"
                    #             string2: =.Global.formData.modernaVaccineFirDoseForm.name.data.billingInfo.medicalInsurance
                    #       ##TargetPage@CurrentPage#ViewTag
                    #       # 
                    #       - goto: ModernaVaccineFirDoseReviewPage5@PatientSummary#pageView
                    #       - goto: ModernaVaccineFirDoseReviewPage6@PatientSummary#pageView
                - type: view
                  style:
                    width: "0.39"
                    height: "1"
                    margin: "auto"
                  children:
                    - type: image
                      path: firDose5_4.svg
                      style:
                        marginTop: "0.025"
                        width: "0.39"
                    # TYPE TITLE
                    - .FormsTypeTitle:
                    - .FormsContentTitle:
                      text: Consent for Vaccination
                    - type: scrollView
                      style:
                        width: "0.39"
                        height: "0.578"
                        marginTop: "0.5vw"
                        overflow: scroll
                      children: 
                        - type: view
                          style:
                            width: "0.39"
                            # height: 6vw
                            display: "flex"
                            justifyContent: "flex-start"
                            alignItems: "flex-start"
                            marginTop: 1.2vw
                            # backgroundColor: "red"
                          children:
                            - type: view
                              style:
                                width: "3vw"
                              children:
                                - type: image
                                  path: point.svg
                                  style:
                                    width: "1.2vw"
                                    marginTop: "0.007"
                            - type: label
                              text: The Fact Sheet for Patients and Parents / Caregivers for the Pfizer-BioNTech COVID-19 Vaccine I am receiving (sometimes hereafter, the COVID-19 Vaccine) has been offered to me.
                              dataKey: 
                              style:
                                width: "0.36"
                                height: auto
                                fontSize: .Nfont.nf4
                                color: "0x707070"
                        - type: view
                          style:
                            width: "0.39"
                            # height: 6vw
                            display: "flex"
                            justifyContent: "flex-start"
                            alignItems: "flex-start"
                            marginTop: 1vw
                          children:
                            - type: view
                              style:
                                width: "3vw"
                              children:
                                - type: image
                                  path: point.svg
                                  style:
                                    width: "1.2vw"
                                    marginTop: "0.007"
                            - type: label
                              text: I have read or had explained to me the Pfizer-BioNTech Fact Sheet for Patients and Parents / Caregivers for the COVID-19 Vaccine and I understand the risks and benefits.
                              dataKey: 
                              style:
                                width: "0.36"
                                height: auto
                                fontSize: .Nfont.nf4
                                color: "0x707070"
                        - type: view
                          style:
                            width: "0.39"
                            # height: 6vw
                            display: "flex"
                            justifyContent: "flex-start"
                            alignItems: "flex-start"
                            marginTop: "2vw"
                          children:
                            - type: view
                              style:
                                width: "3vw"
                              children:
                                - type: image
                                  path: point.svg
                                  style:
                                    width: "1.2vw"
                                    marginTop: "0.007"
                            - type: label
                              text: I understand the COVID-19 Vaccine has been approved by an emergency use authorization (EUA) process and has not fully been FDA reviewed or approved.
                              dataKey: 
                              style:
                                width: "0.36"
                                height: auto
                                fontSize: .Nfont.nf4
                                color: "0x707070"
                        - type: view
                          style:
                            width: "0.39"
                            height: auto
                            display: "flex"
                            justifyContent: "flex-start"
                            alignItems: "flex-start"
                            marginTop: "2vw"
                          children:
                            - type: view
                              style:
                                width: "3vw"
                              children:
                                - type: image
                                  path: point.svg
                                  style:
                                    width: "1.2vw"
                                    marginTop: "0.007"
                            - type: label
                              text: I understand the potential risks from the therapy including serious allergic reactions (anaphylaxis). Other adverse reactions that have been reported include injection site pain, fatigue, headache, muscle pain, chills, joint pain, fever, injection site swelling, injection site redness, nausea, malaise, and lymphadenopathy.
                              dataKey: 
                              style:
                                width: "0.36"
                                height: auto
                                fontSize: .Nfont.nf4
                                color: "0x707070"
                        - type: view
                          style:
                            width: "0.39"
                            height: 2vw
                            display: "flex"
                            justifyContent: "flex-start"
                            alignItems: "flex-start"
                            marginTop: 1.2vw
                          children:
                            - type: view
                              style:
                                width: "3vw"
                              children:
                                - type: image
                                  path: point.svg
                                  style:
                                    width: "1.2vw"
                                    marginTop: "0.006"
                            - type: label
                              text: I understand that there may be other potential options to prevent COVID-19.
                              style:
                                width: "0.36"
                                height: auto
                                fontSize: .Nfont.nf4
                                color: "0x707070"
                        - type: view
                          style:
                            width: "0.39"
                            height: 2vw
                            display: "flex"
                            justifyContent: "flex-start"
                            alignItems: "flex-start"
                            marginTop: 1.2vw
                          children:
                            - type: view
                              style:
                                width: "3vw"
                              children:
                                - type: image
                                  path: point.svg
                                  style:
                                    width: "1.2vw"
                                    marginTop: "0.006"
                            - type: label
                              text: I was offered the opportunity to ask questions and all questions were answered.
                              dataKey: 
                              style:
                                width: "0.36"
                                height: auto
                                fontSize: .Nfont.nf4
                                color: "0x707070"
                        - type: view
                          style:
                            width: "0.39"
                            height: 2vw
                            display: "flex"
                            justifyContent: "flex-start"
                            alignItems: "flex-start"
                            marginTop: 1.2vw
                          children:
                            - type: view
                              style:
                                width: "3vw"
                              children:
                                - type: image
                                  path: point.svg
                                  style:
                                    width: "1.2vw"
                                    marginTop: "0.006"
                            - type: label
                              text: I agree to proceed with receiving the Pfizer-BioNTech COVID-19 Vaccine.
                              dataKey: 
                              style:
                                width: "0.36"
                                height: auto
                                fontSize: .Nfont.nf4
                                color: "0x707070"
                                
                        - type: view
                          style:
                            width: "0.39"
                            height: "auto"
                            display: "flex"
                            justifyContent: "flex-start"
                            alignItems: "flex-start"
                            marginTop: "3.2vw"
                          children:
                            - type: list
                              contentType: listObject
                              listObject: ..formData.consent
                              iteratorVar: itemObject
                              viewTag: consentView
                              style:
                                width: "0.39"
                                display: flex
                                height: "auto"
                                # axis: horizontal
                              children:
                                - type: listItem
                                  itemObject: 
                                  style:
                                    width: "0.39"
                                    display: flex
                                    height: "0.08"
                                    justifyContent: center
                                    alignItems: center
                                  children:
                                    - type: image
                                      style:
                                        width: "0.013"
                                        height: "0.023"
                                        marginTop: "0"
                                      path: 
                                        emit:
                                          dataKey: 
                                            var: itemObject
                                          actions:
                                            - if:
                                              - =.builtIn.string.equal:
                                                  dataIn:
                                                    string1: =..formDataTemp.single.0.consent
                                                    string2: $var.value1
                                              - selectBlue.svg
                                              - selectGray.svg 
                                      # onClick: 
                                      #   - emit:
                                      #       dataKey:
                                      #         var: itemObject
                                      #       actions: 
                                      #         - if:
                                      #           - =.builtIn.string.equal:
                                      #               dataIn:
                                      #                 string1: =..formDataTemp.single.0.consent
                                      #                 string2: $var.value1
                                      #           - =.builtIn.object.set:
                                      #               dataIn:
                                      #                 object: =..formDataTemp.single.0
                                      #                 key: $var.key
                                      #                 value: ""
                                      #           - =.builtIn.object.set:
                                      #               dataIn:
                                      #                 object: =..formDataTemp.single.0
                                      #                 key: $var.key
                                      #                 value: $var.value1
                                      #   - actionType: builtIn
                                      #     funcName: redraw
                                      #     viewTag: consentView
                                    - type: label
                                      dataKey: itemObject.value2
                                      style: 
                                        width: "0.36" 
                                        lineHeight: "1.5"
                                        color: "0x707070"
                                        fontSize: .Nfont.nf4
                                        marginLeft: "1.5vw"

                        - type: view
                          style:
                            marginTop: "0.02"
                            width: "0.39"   
                            display: flex
                            flexDirection: column
                            alignContent: space-around
                            justifyContent: center
                            flexWrap: wrap
                          children:
                            # Name of Recipient/Healthcare Proxy
                            - .RecipientName:
                              children:
                                - .RecipientNameLabel:
                                - .RecipientNameTextField:
                                  dataKey: Global.formData.modernaVaccineFirDoseForm.name.data.signatureConsent.recipientName
                                  isEditable: "false"
                            # sign area
                            - .SignAreaClickText:
                            - .SignAreaView:
                              children:
                                # - type: label
                                #   text: "Clear"
                                #   dataKey: 
                                #   style:
                                #     .SignClearStyle:
                                - type: image
                                  path=func: .builtIn.utils.prepareDocToPath
                                  # 传入签名文档的id
                                  dataKey: Global.formData.modernaVaccineFirDoseForm.name.data.signatureConsent.id
                                  style:
                                    .SignCanvasStyle:
                                    # top: "0"
                                    # left: "0"
                                    # width: "0.39"
                                    # height: "16vw"
                                    # overflow: scroll                           
                                # - type: canvas
                                #   style:
                                #     .SignCanvasStyle:
                                - type: label
                                  text: "X"
                                  style:
                                    .SignLabelStyle:

                            # patientName & date              
                            - .PatNameAndDate:
                              children:
                                - .PatName:
                                - .PatNameValue:
                                  dataKey: Global.formData.modernaVaccineFirDoseForm.name.user
                                - .PatDate:
                                - .PatDateValue:
                                  dataKey: Global.formData.modernaVaccineFirDoseForm.ctime   
                    # - .FormsCloseButton:                            
            - .FormsBottomView: 
              children:
                - .FormsBottomButtons:
                  children:
                    - .FormsBottomMiddleButton:
                      text: Done
                      style: 
                        backgroundColor: "0xc1c1c1"

