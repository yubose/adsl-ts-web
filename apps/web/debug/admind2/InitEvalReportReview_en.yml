InitEvalReportReview:
  title: Initial Evaluation Report
  init: 
    - .SignInCheck
    - =.builtIn.string.formatUnixtimeSecond:
        dataIn: 
          - =.Global.formData.medicalRecords.name.data.signatureTime
        dataOut: InitEvalReportReview.formData.signatureNewTime
    - =.builtIn.string.concat:
        dataIn:
          - =..formData.signatureNewTime   
          - " Digitally Signed "
        dataOut: InitEvalReportReview.formData.digitalSignedTime  

  formData: 
    digitalSignedTime: ""
    signatureNewTime: ""
  components:
    - type: view
      style:
        width: '1'
        height: '1'
        margin: auto
      children:
        - .SideMenuBar:
          children:
            - .aitLogo:
            - .MenuBar:
        - .TopBar:
        - .BodyView:
          style: 
            height: "0.93"
          children:
            - .AppointmentLobby:
            - type: view
              style:
                top: "0.06"
                left: "0.665"
                width: "0.065"
              onClick:
                - actionType: evalObject
                  object:
                    - =.builtIn.EcosObj.exportPDF:
                        dataIn:
                          ecosObj: =.Global.formData.medicalRecords
                          viewTag: mainView                
              children:
                - type: image
                  path: downLoadBlue.svg
                  style:
                    marginTop: "0.006"
                    display: inline-block
                    width: "0.009"
                    height: "0.015"
                - type: label
                  text: "Download"
                  style:
                    display: inline-block
                    width: "0.055"
                    color: "0x0063A8"
                    fontSize: .Nfont.nf4
                    fontWeight: "600"
                    textAlign:
                      x: center
                      y: center 
            - .GotoBack:
            - type: view
              style:
                left: "0.008"
                width: "0.824"
                height: "0.82"
                top: "0.1"
                overflow: hidden
                backgroundColor: "0xffffff"
              children:
                # - type: view
                #   style:
                #     width: "0.59"
                #     margin: "auto"
                #   children:
                - type: view
                  viewTag: mainView
                  style:
                    width: "0.39"
                    margin: "auto"
                  children:
                    - type: scrollView
                      style:
                        width: "0.39"
                        height: "0.72"
                        overflow: scroll 
                      children:
                        # hospital picture/facility address info
                        - type: view
                          style:
                            marginTop: "0.03"
                            height: "0.15"
                            width: "0.39"
                          children: 
                            - type: view
                              style:
                                height: "0.1"
                                width: "0.056"
                              children:
                                - type: image
                                  path: hospital.png
                                  dataKey:               
                                  style:
                                    height: "0.1"
                                    width: "0.056"
                            - type: view
                              style:
                                top: "0"
                                left: "0.1"
                                height: "auto"
                                width: "0.28"
                                overflow: hidden
                              children: 
                                - type: label
                                  dataKey: Global.currentFacility.name.basicInfo.medicalFacilityName
                                  style:
                                    height: "auto"         
                                    color: "0x0f0f0f"   
                                    fontSize: .Nfont.nf6
                                    fontFamily: "Roboto"
                                    fontWeight: "500"
                                - type: label
                                  dataKey: Global.currentFacility.name.basicInfo.fullInfo
                                  style:
                                    marginTop: '0.01'
                                    height: "auto"
                                    color: "0x0f0f0f"   
                                    fontSize: .Nfont.nf4
                                    fontFamily: "Roboto"  
                                - type: label
                                  dataKey: Global.currentFacility.name.basicInfo.website
                                  style:
                                    marginTop: '0.01'
                                    height: "auto"
                                    color: "0x0f0f0f"   
                                    fontSize: .Nfont.nf4
                                    fontFamily: "Roboto"                                  
                        # admin info   
                        - type: view
                          style:
                            height: "auto"
                            width: "0.39"
                          children:
                            - .ProNoteInitView:
                              children:
                                - .ProNoteInitLabelTwo:
                                  text: Email
                                - .ProNoteInitLabel:
                                  dataKey: Global.currentFacility.name.basicInfo.email
                                                    
                            - .ProNoteInitView:
                              children:
                                - .ProNoteInitLabel:
                                  dataKey: Global.currentFacility.name.basicInfo.locationID
                                - .ProNoteInitLabelTwo:
                                  text: AiTmed ID
                            
                            - .ProNoteInitView:
                              children:
                                - .ProNoteInitLabel:
                                  dataKey: Global.currentFacility.name.basicInfo.phoneNumber
                                - .ProNoteInitLabelTwo:
                                  text: Phone
                                              
                            - .ProNoteInitView:
                              children:
                                - .ProNoteInitLabel:
                                  dataKey: Global.currentFacility.name.basicInfo.fax
                                - .ProNoteInitLabelTwo:
                                  text: Fax
                        - type: view
                          style:
                            marginTop: "0.03"
                            left: "0"
                            width: "0.39" 
                            height: "0.002"      
                            backgroundColor: "0x707070"
                        # patient info
                        - type: view
                          style:
                            height: "auto"
                            width: "0.39"
                          children: 
                            - .ProNoteInitView:
                              children:
                                - .ProNoteInitLabel:
                                  text=func: .builtIn.string.formatUnixtimeL_en
                                  dataKey: Global.formData.appointment.stime
                                - .ProNoteInitLabelTwo:
                                  text: Exam Date
                                            
                            - .ProNoteInitView:
                              children:
                                - .ProNoteInitLabel:
                                  dataKey: Global.formData.patientInfo.name.data.basicInfo.fullName
                                - .ProNoteInitLabelTwo:
                                  text: Patient Name
                                            
                            - .ProNoteInitView:
                              children:
                                - .ProNoteInitLabel:
                                  dataKey: Global.formData.patientInfo.name.data.basicInfo.dateOfBirth
                                - .ProNoteInitLabelTwo:
                                  text: DOB
                                                        
                            - .ProNoteInitView:
                              children:
                                - .ProNoteInitLabel:
                                  dataKey: Global.formData.patientInfo.name.data.basicInfo.userName
                                - .ProNoteInitLabelTwo:
                                  text: AiTmed ID
                                      
                            - .ProNoteInitView:
                              children:
                                - .ProNoteInitLabel:
                                  dataKey: Global.formData.patientInfo.name.data.basicInfo.phone
                                - .ProNoteInitLabelTwo:
                                  text: Phone
                            
                            - .ProNoteInitView:
                              children:
                                - .ProNoteInitLabel:
                                  dataKey: Global.formData.patientInfo.name.data.contactInfo.email
                                - .ProNoteInitLabelTwo:
                                  text: Email
                        - type: view
                          style:
                            marginTop: "0.03"
                            left: "0"
                            width: "0.39" 
                            height: "0.002"      
                            backgroundColor: "0x707070"

                        - .ProNoteInitViewTwo:
                          style:
                            marginTop: "0.04"
                          children:
                            - .ProNoteInitTitleLabel:
                              text: Referral from              
                            - .ProNoteInitTextView:
                              dataKey: Global.formData.medicalRecords.name.data.referralFrom
                    
                  
                        - .ProNoteInitViewTwo:
                          children:
                            - .ProNoteInitTitleLabel:
                              text: To whom it may concern               
                            - .ProNoteInitTextView:
                              dataKey: Global.formData.medicalRecords.name.data.toWhomMayConcern
                          
                        - .ProNoteInitViewTwo:
                          children:
                            - .ProNoteInitTitleLabel:
                              text: Reason for evaluation            
                            - .ProNoteInitTextView:
                              dataKey: Global.formData.medicalRecords.name.data.reasonForEnvaluation
                        
                        - .ProNoteInitViewTwo:
                          children:
                            - .ProNoteInitTitleLabel:
                              text: History of Present Illness         
                            - .ProNoteInitTextView:
                              dataKey: Global.formData.medicalRecords.name.data.historyOfIllness
              

                        - .ProNoteInitViewTwo:
                          children:
                            - .ProNoteInitTitleLabel:
                              text: Past Medical History            
                            - .ProNoteInitTextView:
                              dataKey: Global.formData.medicalRecords.name.data.pastMedicalHistory
                    
                        - .ProNoteInitViewTwo:
                          children:
                            - .ProNoteInitTitleLabel:
                              text: Past Surgical History           
                            - .ProNoteInitTextView:
                              dataKey: Global.formData.medicalRecords.name.data.pastSurgicalHistory
                          
                        - .ProNoteInitViewTwo:
                          children:
                            - .ProNoteInitTitleLabel:
                              text: Allergies              
                            - .ProNoteInitTextView:
                              dataKey: Global.formData.medicalRecords.name.data.allergies
                        
                        - .ProNoteInitViewTwo:
                          children:
                            - .ProNoteInitTitleLabel:
                              text: Family History             
                            - .ProNoteInitTextView:
                              dataKey: Global.formData.medicalRecords.name.data.familyHistory
                        
                        - .ProNoteInitViewTwo:
                          children:
                            - .ProNoteInitTitleLabel:
                              text: Social History              
                            - .ProNoteInitTextView:
                              dataKey: Global.formData.medicalRecords.name.data.socialHistory
                        
                        - .ProNoteInitViewTwo:
                          children:
                            - .ProNoteInitTitleLabel:
                              text: Medications               
                            - .ProNoteInitTextView:
                              dataKey: Global.formData.medicalRecords.name.data.medications
                            
                        - .ProNoteInitViewTwo:
                          children:
                            - .ProNoteInitTitleLabel:
                              text: Objective Findings             

                        - .ProNoteInitViewTwo:
                          children:
                            - .ProNoteInitTitleLabel:
                              text: Vital Signs
                            - type: view
                              style:
                                marginTop: "0.01"
                                height: "0.06"
                                width: "0.39"
                              children:
                                - type: view
                                  style:
                                    width: "0.1"
                                    display: "inline-block"
                                  children: 
                                    - .ProNoteInitLittleLabel:
                                      text: Blood Pressure
                                    - .ProNoteInitTextFieldNewUI:
                                      dataKey: Global.formData.medicalRecords.name.data.vitalSigns.BP
                                
                                - type: view
                                  style:
                                    marginLeft: "0.03"
                                    display: "inline-block"
                                  children: 
                                    - .ProNoteInitLittleLabel:
                                      text: Heart Rate
                                    - .ProNoteInitTextFieldNewUI:
                                      dataKey: Global.formData.medicalRecords.name.data.vitalSigns.HR
                                      
                                - type: view
                                  style:
                                    marginLeft: "0.03"
                                    display: "inline-block"
                                  children: 
                                    - .ProNoteInitLittleLabel:
                                      text: Respiratory Rate
                                    - .ProNoteInitTextFieldNewUI:
                                      dataKey: Global.formData.medicalRecords.name.data.vitalSigns.RR
                                  
                            - type: view
                              style:
                                marginTop: "0.04"
                                height: "0.06"
                                width: "0.39"
                              children:
                                - type: view
                                  style:
                                    width: "0.1"
                                    display: "inline-block"
                                  children: 
                                    - .ProNoteInitLittleLabel:
                                      text: Pulse Oximetry
                                    - .ProNoteInitTextFieldNewUI:
                                      dataKey: Global.formData.medicalRecords.name.data.vitalSigns.PO
                                
                                - type: view
                                  style:
                                    width: "0.1"
                                    marginLeft: "0.03"
                                    display: "inline-block"
                                  children: 
                                    - .ProNoteInitLittleLabel:
                                      text: Temperature
                                    - .ProNoteInitTextFieldNewUI:
                                      dataKey: Global.formData.medicalRecords.name.data.vitalSigns.temperature
                                      
                                - type: view
                                  style:
                                    width: "0.1"
                                    marginLeft: "0.03"
                                    display: "inline-block"
                                  children: 
                                    - .ProNoteInitLittleLabel:
                                      text: Height
                                    - .ProNoteInitTextFieldNewUI:
                                      dataKey: Global.formData.medicalRecords.name.data.vitalSigns.height
                                  
                            - type: view
                              style:
                                marginTop: "0.04"
                                height: "0.06"
                                width: "0.39"
                              children:
                                - type: view
                                  style:
                                    width: "0.1"
                                    display: "inline-block"
                                  children: 
                                    - .ProNoteInitLittleLabel:
                                      text: Weight
                                    - .ProNoteInitTextFieldNewUI:
                                      dataKey: Global.formData.medicalRecords.name.data.vitalSigns.weight
                                  
                                - type: view
                                  style:
                                    width: "0.1"
                                    marginLeft: "0.03"
                                    display: "inline-block"
                                  children: 
                                    - .ProNoteInitLittleLabel:
                                      text: BMI
                                    - .ProNoteInitTextFieldNewUI:
                                      dataKey: Global.formData.medicalRecords.name.data.vitalSigns.BMI

                            - .ProNoteInitTextView:
                              dataKey: Global.formData.medicalRecords.name.data.objectiveFindings
                        - type: view
                          style:
                            marginTop: "0.045"
                            height: "auto"
                            width: "0.39"
                            left: "0"
                          children:
                            - .ProNoteInitTitleLabel:
                              text: Labs
                            - type: view
                              style:
                                marginTop: "0.01"
                                width: "0.39"
                                height: "0.06"
                              children:
                                - type: label
                                  text: Blood Glucose
                                  style:
                                    top: "0.015"
                                    left: "0"
                                    width: "0.28"
                                    height: "0.03"
                                    fontSize: .Nfont.nf4
                                    fontFamily: "Roboto"          
                                    textAlign:
                                      y: center
                                - .ProNoteInitTextView:
                                  placeholder: ""
                                  dataKey: Global.formData.medicalRecords.name.data.bloodGlucose
                                  style:
                                    top: "0"
                                    left: "0.1"
                                    width: "0.04"
                                    height: "0.03"
                        - .ProNoteInitViewTwo:
                          style:
                            marginTop: "0.03"
                          children:
                            - .ProNoteInitTitleLabel:
                              text: Imaging Studies         
                            - .ProNoteInitTextView:
                              dataKey: Global.formData.medicalRecords.name.data.imageStudies
                              style:
                                height: "0.15"      
                
                        - .ProNoteInitViewTwo:
                          style:
                            marginTop: "0.03"
                          children:
                            - .ProNoteInitTitleLabel:
                              text: Diagnosis 
                            - type: view
                              style:
                                marginTop: "0.02"
                                width: "0.39"
                              children:
                                - type: view
                                  style:
                                    marginTop: "0.01"
                                    width: "0.39"           
                                  children:  
                                    - type: list
                                      contentType: listObject
                                      listObject: .Global.formData.medicalRecords.name.data.diagnosis.descriptiveList
                                      iteratorVar: itemObject
                                      style:
                                        width: "0.39"
                                        marginTop: "0.03"
                                      children:
                                        - type: listItem
                                          itemObject: ""
                                          style:
                                            marginTop: "0.01"
                                            width: "0.39"
                                            fontSize: .Nfont.nf5
                                            # backgroundColor: "#00579533"
                                          children:
                                            - type: label
                                              dataKey: itemObject.code
                                              style:
                                                fontFamily: Poppins
                                                fontSize: .Nfont.nf4
                                                display: "inline-block"
                                                marginLeft: "0.03"
                                            - type: label
                                              dataKey: itemObject.description
                                              style:
                                                marginLeft: "0.02"
                                                fontSize: .Nfont.nf4
                                                display: "inline-block"
                                                fontFamily: Poppins                
                                            - type: label
                                              dataKey: itemObject.comment
                                              style:
                                                marginTop: "0.002"
                                                marginLeft: "0.03"
                                                width: "0.35"
                                                fontFamily: "Arial"
                                                wordBreak: break-all
                                                fontSize: .Nfont.h1
                        - .ProNoteInitViewTwo:
                          children:
                            - .ProNoteInitTitleLabel:
                              text: Plan and Recommendations          
                            - .ProNoteInitTextView:
                              dataKey: Global.formData.medicalRecords.name.data.planAndRecommendations
                              style:
                                height: "0.22"
                        
                        - .ProNoteInitViewTwo:
                          children:
                            - .ProNoteInitTitleLabel:
                              text: Signature 
                      # 签名
                        - type: view
                          style:
                            marginTop: "0.03"
                            width: "0.39"
                            display: flex
                            flexDirection: column
                            flexWrap: wrap
                            alignContent: space-around
                            justifyContent: center
                          children:
                            - .SignAreaView:
                              children:
                                - type: image
                                  path=func: .builtIn.utils.prepareDocToPath
                                  dataKey: Global.formData.medicalRecords.name.data.signatureId
                                  style:
                                    .SignCanvasStyle:
                                - type: label
                                  text: "X"
                                  style:
                                    .SignLabelStyle:
                        - type: label
                          dataKey: formData.digitalSignedTime 
                          style:
                            marginTop: "0.01"
                            left: "0.03"
                            color: "0x666666"
                            width: "0.35"

                        - type: view
                          style:
                            marginTop: "0.01"
                            height: "auto"
                            width: "0.39"
                            left: "0"
                            overflow: hidden
                          children:
                            - type: view
                              style:
                                marginTop: "0.02"
                                left: "0"
                                width: "0.3"
                                height: "auto"
                              children:
                                - type: label
                                  dataKey: Global.formData.medicalRecords.name.data.providerInfo.providerFullName
                                  style:
                                    height: "auto"
                                    width: "0.3"
                                    fontSize: .Nfont.nf5
                                    wordBreak: break-all
                            - type: view
                              style:
                                marginTop: "0.01"
                                left: "0.05"
                                width: "0.3" 
                                height: "auto"      
                              children:
                                - type: view
                                  style:
                                    marginTop: "0"
                                    left: "0"
                                    width: "0.12" 
                                    height: "auto"
                                  children:
                                    - type: label
                                      text: Family Medicine
                                      style:
                                        height: "auto"
                                        width: "0.12"
                                        fontSize: .Nfont.nf4
                                        fontFamily: Roboto
                                        color: "0x0f0f0f"
                                - type: view
                                  style:
                                    marginTop: "0.01"
                                    left: "0"
                                    width: "0.3" 
                                    height: "0.03"
                                  children:
                                    - type: label
                                      dataKey: Global.formData.medicalRecords.name.data.providerInfo.LIC
                                      style:
                                        left: "0.04"
                                        width: "0.12"
                                        fontSize: .Nfont.nf4
                                        wordBreak: break-all
                                        fontFamily: Roboto
                                        color: "0x0f0f0f"   
                                                    
                                    - type: label
                                      text: "LIC#"
                                      style:
                                        top: "0"
                                        left: "0"
                                        height: "auto"
                                        width: "0.06"
                                        fontSize: .Nfont.nf4
                                        fontFamily: Roboto
                                        color: "0x757575"
                            - type: view
                              style:
                                marginTop: "0.02"
                                left: "0"
                                width: "0.39" 
                                height: "0.002"      
                                backgroundColor: "0x707070"
                            - type: label
                              viewTag: websiteTag
                              dataKey: Global.currentFacility.name.basicInfo.website
                              style:
                                marginTop: "0.01"
                                height: "auto"
                                width: "0.39"
                                left: "0"
                                fontSize: .Nfont.nf5
                                color: "0x707070"    
                                textAlign:
                                  x: center
                                  y: center 
            - .FormsBottomView: 
              children:
                - .FormsBottomButtons:
                  children:
                    - .FormsBottomMiddleButton:
                      text: Done
                      onClick:
                        - actionType: builtIn
                          funcName: goBack
                          reload: true 