VisitQuestionnaire:
  pageNumber: "160"
  title: "Visit Questionnaire"
  init:
    - .SignInCheck
    - actionType: evalObject
      object:
        .Global._nonce@:
          =.builtIn.math.random: ""
    - =..visitQuestionnaire.docAPI.get: ""
    - actionType: evalObject
      object:
        - ..visitQuestionnaireObject@: =..visitQuestionnaire.docResp.doc.0

  visitQuestionnaireTemp:
    Visit:
      input1:
        - key: purpose
          value: "What is the purpose of your visit?"
        - key: anythingElse
          value: "Is there anything else you would like to talk about?"
      radio:
        - key: prescribed
          value: "Taking medication"
    isPrescribed:
      - key: isPrescribed
        value: 'Yes'
        width: "4vw"
      - key: isPrescribed
        value: 'Sometimes'
        width: "7.2vw"
      - key: isPrescribed
        value: 'No'
        width: "4vw"
    isProblems:
      - key: isProblems
        value: "Yes"
        width: "4vw"
      - key: isProblems
        value: "Sometimes"
        width: "7.2vw"
      - key: isProblems
        value: "No" 
        width: "4vw"
    isToEmergency:
      - key: isToEmergency
        value: "Yes"
      - key: isToEmergency
        value: "No"
    isFamilyHistoryChanges:
      - key: isFamilyHistoryChanges
        value: "Yes"
      - key: isFamilyHistoryChanges
        value: "No"
    isToAnotherDoctor:
      - key: isToAnotherDoctor
        value: "Yes"
      - key: isToAnotherDoctor
        value: "No"        
    isNewDrug:
      - key: isNewDrug
        value: "Yes"
      - key: isNewDrug
        value: "No"
  visitQuestionnaireObject: {}
  visitQuestionnaire:
    docResp: ""
    docIn: 
      id: .Global.formData.patientHistoryInfo.id
      xfname: eid
      type: .DocType.VisitQuestionnaire
      _nonce: =.Global._nonce       
    docAPI:
      .DocAPI: ""
      get:
        dataIn: visitQuestionnaire.docIn
        dataOut: VisitQuestionnaire.visitQuestionnaire.docResp

  components:
    - type: view
      style:
        width: '1'
        height: '1'
        margin: auto
      children:
        - .SideMenuBar:
          children:
            - .aitLogo:
            - .MenuBar:
        - .TopBar:
        - .BodyView:
          style: 
            height: "0.93"
          children:
            - .AppointmentLobby:
            - .GotoBack:         
            - type: view
              style:
                left: "0.008"
                width: "0.824"
                height: "0.74"
                top: "0.1"
                overflow: hidden
                backgroundColor: "0xffffff"
              children:
                - type: view
                  style:
                    width: "0.39"
                    margin: "auto"
                  children:
                    - .FormsContentTitle:
                      text: "Today's Visit"
                      style:
                        height: "0.05"
                        width: "0.39"
                        fontSize: .Nfont.nf5
                        borderRadius: "8"
                        backgroundColor: "0xfafafa"
                        marginTop: "0"
                        # textIndent: "1em"
                        textAlign:
                          x: left
                          y: center
                    - type: scrollView
                      style:
                        width: "0.39"
                        height: "0.74"
                        overflow: scroll
                      children:
                        - type: view
                          style:
                            display: flex
                            flex-direction: column
                            marginTop: "0.04"
                            width: "0.39"
                            margin: auto
                          children:
                            - .Profile2ViewNewUI:
                              style:
                                marginTop: "0"
                              children:
                                - .Profile2LabelNewUI:
                                  text: "What is the purpose of your visit?"
                                - .Profile2TextViewNewUI:
                                  placeholder: "Ex: Follow-up, lab results, physical, ect."
                                  dataKey: visitQuestionnaireObject.name.data.purpose
                            - .Profile2ViewNewUI:
                              children:
                                - .Profile2LabelNewUI:
                                  text: "Description of history of present illness."
                                - .Profile2TextViewNewUI: 
                                  placeholder: "Enter here"
                                  dataKey: visitQuestionnaireObject.name.data.descriptionOfIllness
                            - type: view
                              style:
                                width: "0.39"
                                height: "auto"
                                display: flex
                                justifyContent: center
                                alignItems:  center
                              children:
                                - .Profile2ViewNewUI:
                                  style:
                                    display: flex
                                    flexDirection: row
                                    height: "0.04"
                                  children:
                                    - .Profile2LabelNewUI:
                                      text: "Taking medications as prescribed?"
                                      style:
                                        height: "0.04"
                                        width: auto
                                        display: flex
                                        alignItems: center
                                    - type: list
                                      contentType: listObject
                                      listObject: ..visitQuestionnaireTemp.isPrescribed
                                      iteratorVar: itemObject
                                      style: 
                                        width: "0.15"
                                        height: "0.04"
                                        left: "0.03"
                                        margin: "0"
                                        axis: horizontal
                                      children:
                                        - type: listItem
                                          viewTag: isPrescribedTag
                                          itemObject: 
                                          style:
                                            width: itemObject.width
                                            # width: "0.05"
                                            height: "0.04"
                                          children:
                                            - type: image
                                              path: 
                                                emit:
                                                  dataKey:
                                                    var: itemObject
                                                  actions:
                                                    - if:
                                                      - =.builtIn.string.equal:
                                                          dataIn:
                                                            string1: =..visitQuestionnaireObject.name.data.isPrescribed
                                                            string2: $var.value
                                                      - selectBlue.svg
                                                      - selectGray.svg
                                              style:
                                                width: "0.025"
                                                top: "0.015"
                                                height: "0.02"
                                            - type: label
                                              dataKey: itemObject.value
                                              style:
                                                height: "0.045"
                                                left: "0.025"
                                                fontSize: .Nfont.nf4
                                                top: "0"
                                                textAlign:
                                                  y: center
                            - .Profile2ViewNewUI:
                              style:
                                display: flex
                                flexDirection: row
                                height: "0.04"
                              children:
                                - .Profile2LabelNewUI:
                                  text: Any problems with your medications?
                                  style:
                                    height: "0.04"
                                    width: auto
                                    display: flex
                                    # justifyContent: center
                                    alignItems: center
                                    fontSize: .Nfont.nf4
                                - type: list
                                  contentType: listObject
                                  listObject: ..visitQuestionnaireTemp.isProblems
                                  iteratorVar: itemObject
                                  style: 
                                    left: "0.03"
                                    width: auto
                                    height: "0.04"
                                    margin: "0"
                                    axis: horizontal
                                  children:
                                    - type: listItem
                                      viewTag: isProblemsTag
                                      itemObject: 
                                      style:
                                        width: itemObject.width
                                        height: "0.04"
                                      children:
                                        - type: image
                                          path: 
                                            emit:
                                              dataKey:
                                                var: itemObject
                                              actions:
                                                - if:
                                                  - =.builtIn.string.equal:
                                                      dataIn:
                                                        string1: =..visitQuestionnaireObject.name.data.isProblems
                                                        string2: $var.value
                                                  - selectBlue.svg
                                                  - selectGray.svg
                                          style:
                                            width: "0.025"
                                            top: "0.015"
                                            height: "0.02"
                                        - type: label
                                          dataKey: itemObject.value
                                          style:
                                            height: "0.04"
                                            left: "0.025"
                                            fontSize: .Nfont.nf4
                                            top: "0.003"
                                            textAlign:
                                              y: center
                            - .Profile2TextViewNewUI:
                              placeholder: "Please explain here"
                              dataKey: visitQuestionnaireObject.name.data.problems
                              style:
                                marginTop: "0.02"
                            - .FormsContentTitle:
                              text: "Update information"
                              style:
                                marginTop: "0.02"
                                height: "0.1"
                                fontSize: .Nfont.nf5
                                textAlign:
                                  x: left
                                  y: center   
                            - .Profile2ViewNewUI:
                              style:
                                marginTop: "0"                    
                              children:
                                - .Profile2LabelNewUI:
                                  text: "Have you been to the emergency room or hospital since your last visit?"
                                  style:
                                    top: "0"
                                    height: auto
                                    width: "auto"
                                - type: list
                                  contentType: listObject
                                  listObject: ..visitQuestionnaireTemp.isToEmergency
                                  iteratorVar: itemObject
                                  style: 
                                    top: "0.033"
                                    width: "0.16"
                                    left: "0.26"
                                    height: "0.05"
                                    margin: "0"
                                    axis: horizontal
                                  children:
                                    - type: listItem
                                      viewTag: isToEmergencyTag
                                      itemObject: 
                                      style:
                                        width: "0.08"
                                        height: "0.05"
                                      children:
                                        - type: image
                                          path: 
                                            emit:
                                              dataKey:
                                                var: itemObject
                                              actions:
                                                - if:
                                                  - =.builtIn.string.equal:
                                                      dataIn:
                                                        string1: =..visitQuestionnaireObject.name.data.isToEmergency
                                                        string2: $var.value
                                                  - selectBlue.svg
                                                  - selectGray.svg
                                          style:
                                            width: "0.025"
                                            top: "0.013"
                                            height: "0.02"
                                        - type: label
                                          dataKey: itemObject.value
                                          style:
                                            height: "0.045"
                                            left: "0.03"
                                            fontSize: .Nfont.nf4
                                            top: "0"
                                            textAlign:
                                              y: center
                                - .Profile2TextViewNewUI:
                                  placeholder: "If yes, please explain here"
                                  dataKey: visitQuestionnaireObject.name.data.toEmergency
                                  style:
                                    marginTop: "0.08"
                            - .Profile2ViewNewUI:
                              children:
                                - .Profile2LabelNewUI:
                                  text: "Have you been to another doctor office since your last visit?"
                                  style:
                                    top: "0"
                                    height: "auto"
                                    width: "auto"
                                - type: list
                                  contentType: listObject
                                  listObject: ..visitQuestionnaireTemp.isToAnotherDoctor
                                  iteratorVar: itemObject
                                  style: 
                                    top: "0.014"
                                    left: "0.26"
                                    width: "0.16"
                                    height: "0.05"
                                    margin: "0"
                                    axis: horizontal
                                  children:
                                    - type: listItem
                                      viewTag: isFamilyHistoryChangesTag
                                      itemObject: 
                                      style:
                                        width: "0.08"
                                        height: "0.05"
                                      children:
                                        - type: image
                                          path: 
                                            emit:
                                              dataKey:
                                                var: itemObject
                                              actions:
                                                - if:
                                                  - =.builtIn.string.equal:
                                                      dataIn:
                                                        string1: =..visitQuestionnaireObject.name.data.isToAnotherDoctor
                                                        string2: $var.value
                                                  - selectBlue.svg
                                                  - selectGray.svg
                                          style:
                                            width: "0.025"
                                            top: "0.013"
                                            height: "0.02"
                                        - type: label
                                          dataKey: itemObject.value
                                          style:
                                            height: "0.045"
                                            left: "0.03"
                                            fontSize: .Nfont.nf4
                                            top: "0"
                                            textAlign:
                                              y: center
                                - .Profile2TextViewNewUI:
                                  placeholder: "If yes, please explain here"
                                  dataKey: visitQuestionnaireObject.name.data.toAnotherDoctor
                                  style:
                                    marginTop: "0.06"
                            - .Profile2ViewNewUI:
                              children:
                                - .Profile2LabelNewUI:
                                  text: "Any changes or new conditions in your family history?"
                                  style:
                                    top: "0"
                                    height: "auto"
                                    width: "auto"
                                - type: list
                                  contentType: listObject
                                  listObject: ..visitQuestionnaireTemp.isFamilyHistoryChanges
                                  iteratorVar: itemObject
                                  style: 
                                    top: "0.01"
                                    left: "0.26"
                                    width: "0.16"
                                    height: "0.05"
                                    margin: "0"
                                    axis: horizontal
                                  children:
                                    - type: listItem
                                      viewTag: isNewDrugTag
                                      itemObject: 
                                      style:
                                        width: "0.08"
                                        height: "0.05"
                                      children:
                                        - type: image
                                          path: 
                                            emit:
                                              dataKey:
                                                var: itemObject
                                              actions:
                                                - if:
                                                  - =.builtIn.string.equal:
                                                      dataIn:
                                                        string1: =..visitQuestionnaireObject.name.data.isFamilyHistoryChanges
                                                        string2: $var.value
                                                  - selectBlue.svg
                                                  - selectGray.svg
                                          style:
                                            width: "0.025"
                                            top: "0.013"
                                            height: "0.02"
                                        - type: label
                                          dataKey: itemObject.value
                                          style:
                                            height: "0.045"
                                            left: "0.03"
                                            fontSize: .Nfont.nf4
                                            top: "0"
                                            textAlign:
                                              y: center
                                - .Profile2TextViewNewUI:
                                  dataKey: visitQuestionnaireObject.name.data.familyHistoryChanges
                                  style:
                                    marginTop: "0.06"
                            
                            - .Profile2ViewNewUI:
                              children:
                                - .Profile2LabelNewUI:
                                  text: "Any new drug or environmental allergies?"
                                  style:
                                    top: "0"
                                    height: "0.05"
                                    width: "auto"
                                - type: list
                                  contentType: listObject
                                  listObject: ..visitQuestionnaireTemp.isNewDrug
                                  iteratorVar: itemObject
                                  style: 
                                    top: "0.01"
                                    left: "0.26"
                                    width: "0.16"
                                    height: "0.05"
                                    margin: "0"
                                    axis: horizontal
                                  children:
                                    - type: listItem
                                      viewTag: isNewDrugTag
                                      itemObject: 
                                      style:
                                        width: "0.08"
                                        height: "0.05"
                                      children:
                                        - type: image
                                          path: 
                                            emit:
                                              dataKey:
                                                var: itemObject
                                              actions:
                                                - if:
                                                  - =.builtIn.string.equal:
                                                      dataIn:
                                                        string1: =..visitQuestionnaireObject.name.data.isNewDrug
                                                        string2: $var.value
                                                  - selectBlue.svg
                                                  - selectGray.svg
                                          style:
                                            width: "0.025"
                                            top: "0.013"
                                            height: "0.02"
                                        - type: label
                                          dataKey: itemObject.value
                                          style:
                                            height: "0.045"
                                            left: "0.03"
                                            fontSize: .Nfont.nf4
                                            top: "0"
                                            textAlign:
                                              y: center
                                - .Profile2TextViewNewUI:
                                  dataKey: visitQuestionnaireObject.name.data.newDrug
                                  style:
                                    marginTop: "0.06"                    
                            - .Profile2ViewNewUI:
                              style:
                                marginTop: "0.035"
                              children:
                                - .Profile2LabelNewUI:
                                  text: "Allergy/Irritant"
                                  style:
                                    top: "0"
                                    height: "0.05"
                                    width: "auto"
                                - .Profile2TextViewNewUI:
                                  dataKey: visitQuestionnaireObject.name.data.allergy
                                  style:
                                    marginTop: "0.035"
                            - .Profile2ViewNewUI:
                              children:
                                - .Profile2LabelNewUI:
                                  text: "What happens?"
                                  style:
                                    top: "0"
                                    height: "0.05"
                                    width: "auto"
                                - .Profile2TextViewNewUI:
                                  dataKey: visitQuestionnaireObject.name.data.happens
                                  style:
                                    marginTop: "0.035"

                            - .Profile2ViewNewUI:
                              children:
                                - .Profile2LabelNewUI:
                                  text: "Other notes?"
                                - .Profile2TextViewNewUI:
                                  dataKey: visitQuestionnaireObject.name.data.notes
                                  style:
                                    marginTop: "0.01"
                            - .FormsContentTitle:
                              text: "Referring Provider"
                              style:
                                marginTop: "0.01"
                                height: "0.06"
                                fontSize: .Nfont.nf5
                                textAlign:
                                  x: left
                                  y: center   
                            - .Profile2ViewNewUI:
                              style:
                                marginTop: "0"
                              children:
                                - .Profile2LabelNewUI:
                                  text: "Who referred you?"
                                  style:
                                    top: "0"
                                    height: auto
                                    width: "auto"
                                - .Profile2TextViewNewUI:
                                  dataKey: visitQuestionnaireObject.name.data.referProvider.name
                                  style:
                                    marginTop: "0.04"
                                    height: "0.05"
                                - .Profile2TextViewNewUI:
                                  dataKey: visitQuestionnaireObject.name.data.referProvider.address
                                  style:
                                    marginTop: "0.02"
                                    height: "0.05"
                                - .Profile2TextViewNewUI:
                                  dataKey: visitQuestionnaireObject.name.data.referProvider.phone
                                  style:
                                    marginTop: "0.02"
                                    height: "0.05"
                                - .Profile2TextViewNewUI:
                                  dataKey: visitQuestionnaireObject.name.data.referProvider.fax
                                  style:
                                    marginTop: "0.02"
                                    height: "0.05"
                                - .Profile2TextViewNewUI:
                                  dataKey: visitQuestionnaireObject.name.data.referProvider.email
                                  style:
                                    marginTop: "0.02"
                                    height: "0.05"
                                - type: view
                                  style:
                                    width: "0.1"
                                    height: "0.06"
            - .FormsBottomView: 
              children:
                - .FormsBottomButtons:
                  children:
                    - .FormsBottomMiddleButton:
                      text: Done
                      onClick:
                        - actionType: builtIn
                          funcName: goBack
                          reload: true   