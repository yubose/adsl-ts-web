Prescription2:
  pageNumber: "181"
  title: "Prescription"
  appointmentInfo: .Global.roomInfo.edge
  init:
    - .SignInCheck
    # - ..formData@: =.Global.Note
    - actionType: evalObject
      object:
        .Global._nonce@:
          =.builtIn.math.random: ""
    - =..prescriptionDoc.docAPI.get: ""
    - ..formData@: =..prescriptionDoc.resp.doc.0 
    - ..signData.docAPI.get
    - if:
      - =..signData.doc.0
      - actionType: evalObject
        object:
          =.builtIn.utils.prepareDoc:
            dataIn:
              doc: =..signData.doc.0
            dataOut: Prescription2.signData.doc.0 
      - continue
  signData:
    doc: 
      .Document: ""
    docAPI:      
      .DocAPI: ""
      get:
        .DocAPI.get: "" 
        api: rd
        dataKey: signData
        ids: 
          - =.Global.DocReference.document.id
        xfname: fid
        type: .DocType.DocumentSignature
        obfname : "ctime" 
        maxcount : "1"
        _nonce: .Global._nonce  
  prescriptionDoc:
    docIn: 
      id: .Global.formData.patientHistoryInfo.id
      type: .DocType.Prescription
      xfname: eid  
      maxcount: "1"
      _nonce: =.Global_nonce
    resp: ""
    document: ""
    docAPI:
      .DocAPI: ""    
      get: 
        api: rd
        dataIn: prescriptionDoc.docIn
        dataOut: Prescription2.prescriptionDoc.resp
  formData: ""
  components:
    - .BaseHeader:
      style: 
        position: 'fixed'
    - .HeaderLeftButton:
    # - type: button
    #   text: Visit Detail
    #   onClick:
    #     - goto: VisitDetial
      # style: 
      #   position: 'fixed'
      #   left: "0.76"
      #   top: "0"
      #   width: "0.24"
      #   height: "0.1"
      #   color: "0xffffff"
      #   # fontStyle: "bold"
      #   backgroundColor: "0x2988e6ff"
      #   fontSize: .Nfont.nf3
      #   textAlign: 
      #     x: center  
      #   border: 
      #     style: "1"
      #   borderRadius: "2" 
      #   zIndex: "1000"
      #   textDecoration: underline
    - type: scrollView
      style: 
        width: '1'
        height: '0.9'
        top: '0.1'
        left: "0"
        overflow: scroll
      children: 
        - type: view
          style:
            marginTop: "0.02"
            left: "0.05"
            width: '0.9'
            height: '0.12'
          children:
            - type: image 
              path: rx0.svg
              style:
                width: "0.08"
                top: "0"
            - type: label
              text=func: .builtIn.string.formatUnixtime_en
              dataKey: Global.formData.medicalRecords.ctime
              style:
                top: '0.04'
                width: "0.45"
                height: "0.03"
                left: "0.45"
                fontSize: '14'
                textAlign: 
                  x: right
        - type: view
          style:
            marginTop: "0.02"
            left: "0.05"
            width: '0.9'
            height: '0.18'
          children:
            - .PrescriptionListBox:
              children: 
                - .PrescriptionLabel:
                  style:
                    width: '0.2'
                - .PrescriptionDatakey:
                  dataKey: formData.name.data.patientInfo.name
                  style:
                    top: '0'
                    left: '0.2'
                    width: '0.5'
            - .PrescriptionListBox:
              style: 
                top: "0.035"
              children: 
                - .PrescriptionLabel:
                  text: DOB
                  style:
                    width: '0.15'
                - .PrescriptionDatakey:                  
                  dataKey: formData.name.data.patientInfo.dob
                  style:
                    top: '0'
                    left: '0.2'
                    width: '0.5'
            - .PrescriptionListBox:
              style: 
                top: "0.07"
              children: 
                - .PrescriptionLabel:
                  text: Phone
                  style:
                    width: '0.15'
                - .PrescriptionDatakey:                 
                  dataKey: formData.name.data.patientInfo.phoneNumber
                  style:
                    top: '0'
                    left: '0.2'
                    width: '0.5'
            - .PrescriptionListBox:
              style: 
                top: "0.105"
              children: 
                - .PrescriptionLabel:
                  text: Email
                  style:
                    width: '0.15'
                - .PrescriptionDatakey:                  
                  dataKey: formData.name.data.patientInfo.email
                  style:
                    top: '0'
                    left: '0.2'
                    width: '0.5'
        - type: view
          viewTag: prescriptionTag
          style:
            height: "auto"
            width: '1'
            marginTop: "0.02"
            left: "0"
          children: 
            - type: list
              contentType: listObject
              listObject: ..formData.name.data.prescriptionArray # ..formData.name.data.prescriptionArray
              iteratorVar: itemObject
              style:
                width: '1'
                left: '0'
                height: "auto"
                margin: "0"
              children:
                - type: listItem
                  # itemObject: ""
                  style:
                    width: '0.9'
                    height: '0.3'
                    left: '0.05'
                    marginTop: '0.02'
                    border: 
                      style: "3"
                    borderWidth: "1"
                    borderColor: "#D3D3D3"
                  children:
                    - type: label
                      text: "Drug"
                      style:
                        fontSize: .Nfont.nf2
                        fontWeight: '700'
                        # color: '#797979'
                        top: '0.01'
                        left: '0.05'
                    - type: label
                      placeholder: Prescription Name
                      dataKey: itemObject.title
                      style: 
                        left: "0.05"
                        top: "0.04"
                        width: "0.6"
                        height: "0.03"
                        # textIndent: "2vh"
                        textAlign: 
                          x: left
                        fontSize: "1vh"
                        fontWeight: '500'
                        border: 
                          style: "1"
                        borderWidth: "1"
                        borderColor: "0x000000"
                    - .PrescriptionInputText:
                      style:
                        fontSize: .Nfont.nf2
                        top: '0.142'
                        fontWeight: '700'
                    - .PrescriptionInputTextField:
                      type: label
                      dataKey: itemObject.strength
                      style: 
                        left: '0.055'
                        top: '0.168'
                        width: '0.75'
                        # height: '0.03'
                        border: 
                          style: "1"
                        fontSize: .Nfont.nf2
                        fontWeight: '600'
                    # - .PrescriptionInputText:
                    #   text: Amount
                    #   style: 
                    #     left: "0.47"
                    # - .PrescriptionInputTextField:
                    #   type: label
                    #   dataKey: itemObject.amount
                    #   style: 
                    #     left: "0.65"
                    - .PrescriptionInputText:
                      text: Route
                      style: 
                        top: "0.083"
                        left: '0.05'
                        fontSize: .Nfont.nf2
                        fontWeight: '700'
                        # color: '#797979'
                    - .PrescriptionInputTextField:
                      type: label
                      # dataKey: itemObject.route
                      style: 
                        top: "0.108"
                        left: '0.05'
                        border: 
                          style: "1"
                    - .PrescriptionInputText:
                      text: Quantity
                      style: 
                        top: "0.202"
                        left: "0.05"
                        fontSize: .Nfont.nf2
                        fontWeight: '700'
                    - .PrescriptionInputTextField:
                      type: label
                      dataKey: itemObject.frequency
                      style: 
                        top: "0.23"
                        left: "0.05"
                        width: '0.3'
                        border: 
                          style: "1"
                        fontSize: .Nfont.nf2
                        # fontWeight: '600'
                    - .PrescriptionInputText:
                      text: Sig
                      style: 
                        top: "0.202"
                        left: '0.4'
                        fontSize: .Nfont.nf2
                        fontWeight: '700'
                    - .PrescriptionInputTextField:
                      type: label
                      dataKey: itemObject.disp
                      style: 
                        top: "0.23"
                        left: '0.4'
                        width: '0.25'
                        border: 
                          style: "1"
                        fontSize: .Nfont.nf2
                        # fontWeight: '600'
                    - .PrescriptionInputText:
                      text: Refills
                      style: 
                        top: "0.202"
                        left: "0.7"
                        fontSize: .Nfont.nf2
                        fontWeight: '700'
                    - .PrescriptionInputTextField:
                      type: label
                      dataKey: itemObject.refills
                      style: 
                        top: "0.23"
                        left: "0.7"
                        width: '0.1'
                        border: 
                          style: "1"
                        fontSize: .Nfont.nf2
                        # fontWeight: '600'
        - type: view
          style:
            height: "0.06"
            width: '1'
            top: "auto"
            marginTop: '0.02'
            left: "0"
          children: 
            - type: label
              text: 'Prescription is VOID if the number of drugs prescribed is not noted.'
              style: 
                left: "0.05"
                width: "0.8"
                height: "0.05"
                top: "0"
            # - type: view
            #   style: 
            #     left: "0.85"
            #     top: "0.004"
            #     height: "0.04"
            #     width: "0.085"
            #     border:   
            #       style: '3'
            #     borderWidth: "1"
            #     borderColor: "0xb8b8b8"
        - type: scrollView
          style:
            height: "0.2"
            width: '0.7'
            top: "auto"
            marginTop: '0.02'
            left: "0.05"
            border: 
              style: "4"
            borderWidth: "1"
            borderColor: "0xe2e2e3"
          children: 
            - type: ecosDoc
              ecosObj: ..signData.doc.0  
              style: 
                left: "0"
                width: "0.9" 
                top: "0"
                height: '0.25'
                overflow: scroll   
        - type: view
          style:
            height: "0.05"
            width: '0.9'
            marginTop: "0.03"
            top: "auto"
            left: "0.05"
  