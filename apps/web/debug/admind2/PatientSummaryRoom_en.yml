PatientSummaryRoom: 
  # title: "Visit Summary"
  init: 
    - .SignInCheck
    - actionType: evalObject
      object: 
        .Global._nonce@: 
          =.builtIn.math.random: ""
    - actionType: updateObject
      dataKey: Global.formData.appointment
      dataObject: {}     
    - actionType: updateObject
      dataKey: Global.formData.patientInfo
      dataObject: {}                
    #生成年份
    - =.builtIn.date.generateYear:
        dataIn:
          last: 40
          next: 10
        dataOut: BaseDate.year
    - actionType: evalObject
      object: .BaseDate.getDate                   
    - =..inMeeting.edgeAPI.get: ""
    - =..providerList.docAPI.get: ""
    - =.builtIn.array.keepLatestDoc: 
        dataIn: 
          docList: =..providerList.list.doc
          path: bsig
        dataOut: PatientSummaryRoom.providerList.list.doc
    - =..apiRequest.patientChart.docAPI.get: ""
    - if:
      - =..apiRequest.patientChart.docResp
      # 获取medicalDocuments记录文档
      - ..formData.patientChart@: =..apiRequest.patientChart.docResp.doc.0
      - continue    
    - =..apiRequest.medicalDocuments.docAPI.get: ""
    - ..apiRequest.inviteParticipant.edgeIn.id.0@: =.Global.currentFacility.id
    - ..apiRequest.inviteParticipant.edgeIn.id.1@: =..inMeeting.docResponse.edge.0.id
    - .Global.formData.appointment@: =..inMeeting.docResponse.edge.0
    - if: 
      - =..apiRequest.medicalDocuments.docResp.doc.0
      - =.builtIn.array.setFormJumpPage:
          dataIn:
            objArry: =..apiRequest.medicalDocuments.docResp.doc
            docFormObj: =..DocumentList
          dataOut: PatientSummaryRoom.formData.medicalDocuments
      - continue
    - if: 
      - =..apiRequest.medicalDocuments.docResp.doc.0
      - =.builtIn.array.checkType:
          dataIn: 
            objArr: =..formData.medicalDocuments
            path: "type"
      - continue   
    # - =.builtIn.string.concat:
    #     dataIn:
    #       - "subtype=10"
    #       - " "
    #       - "AND"
    #       - " "
    #       - "refid="
    #       - =..inMeeting.docResponse.edge.0.id
    #     dataOut: PatientSummaryRoom.apiRequest.inviteParticipant.edgeIn.sCondition
    - =..apiRequest.inviteParticipant.edgeAPI.get: "" 
    - if: 
      - =.builtIn.string.equal:
          dataIn:
            string1: =..inMeeting.docResponse.edge.0.bvid
            string2: =.Global.currentFacility.id
      - actionType: evalObject
        object:
          - .Global.formData.meetingDocEid@: =..inMeeting.docResponse.edge.0.id
          - .Global.formData.meetingDocReid@: =..inMeeting.docResponse.edge.0.id
          # - ..profile.docIn.id@: =..inMeeting.docResponse.edge.0.evid
      - actionType: evalObject
        object:
          - ..apiRequest.getBelongEdge.edgeIn.id.0@: =.Global.currentFacility.id
          - ..apiRequest.getBelongEdge.edgeIn.id.1@: =..inMeeting.docResponse.edge.0.id
          - =..apiRequest.getBelongEdge.edgeAPI.get: ""
          - .Global.formData.meetingDocEid@: =..apiRequest.getBelongEdge.edgeResp.edge.0.id
          - .Global.formData.meetingDocReid@: =..inMeeting.docResponse.edge.0.id    
    - =.builtIn.array.add:
        dataIn:
          object: =..profile.docIn.ids
          value: =..inMeeting.docResponse.edge.0.bvid
    - =.builtIn.array.add:
        dataIn:
          object: =..profile.docIn.ids
          value: =..inMeeting.docResponse.edge.0.evid  
    - =..profile.docAPI.get: ""
    - .Global.formData.patientInfo@: =..profile.docResponse.doc.0    
    - =..afterAgree.edgeAPI.get: ""
    - ..inMeeting.storeEdge@: =..inMeeting.docResponse.edge.0
    - ..afterAgree.storeEdge@: =..afterAgree.edgeResp.edge.0
    - ..dataObject@: =..inMeeting.docResponse.edge.0
    - .Global.formData.patientPage@: "VitalSigns"
    - =.builtIn.string.concat:
        dataIn:
          - =..profile.docResponse.doc.0.name.data.basicInfo.fullName   
          - " ("
          - =..profile.docResponse.doc.0.name.data.basicInfo.gender
          - ")"
        dataOut: PatientSummaryRoom.info
    # - =.builtIn.date.getDurationByMinute: 
    #     dataIn: 
    #       ctime: dataObject.ctime
    #       stime: dataObject.stime
    #     dataOut:  PatientSummaryRoom.formData.duration
        
    - if:
      - ..afterAgree.edgeResp.edge.0.name.providerName
      - =.builtIn.string.concat:
            dataIn:
              - =..afterAgree.edgeResp.edge.0.name.providerName
              - " 、 "
              - =..dataObject.name.patientName   
            dataOut: PatientSummaryRoom.participants
      - .PatientSummaryRoom.participants@: =..dataObject.name.patientName  
    - =.builtIn.date.getDurationByMinute:
        dataIn:
          stime: =..dataObject.stime
          etime: =..dataObject.etime
        dataOut: PatientSummaryRoom.formData.duration
    - ..getLocation.edge.id@: =..dataObject.name.facilityId
    - =..getLocation.get: ""
    - ..location@: =..getLocation.response.vertex.0.name.basicInfo.location
    # - if:
    #   - =.builtIn.string.equal:
    #       dataIn:
    #         string1: =..dataObject.name.providerName
    #         string2: "no provider"
    #   # - ..isInvite@: false
    - if:
      - ..afterAgree.edgeResp.edge.0.name.providerName
      - ..isInvite@: true
      - ..isInvite@: false
      # - ..isInvite@: true

    # 判断tage以显示/隐藏Finish
    - if:
      - =.builtIn.number.less: 
          dataIn: 
            num1: 0
            num2: =..inMeeting.docResponse.edge.0.tage
      - ..inMeetingEdgeFlag@: "true"
      - continue
    - =.builtIn.string.concat:
        dataIn:
          - =..profile.docResponse.doc.0.name.data.emergencyContact.firstName
          - " "
          - =..profile.docResponse.doc.0.name.data.emergencyContact.lastName
        dataOut: PatientSummaryRoom.formData.emergencyFullname

    # 查询facility 和 inMeeting的evid 之间10002的边
    - ..apiRequest.emailEdge.edgeReq.id.0@: =.Global.currentFacility.id
    - ..apiRequest.emailEdge.edgeReq.id.1@: =..profile.docResponse.doc.0.bsig
    - ..apiRequest.email.docStoreReq.name.data.receiverName@: =..inMeeting.docResponse.edge.0.name.patientName
    - =..apiRequest.emailEdge.edgeAPI.get: ""

    - ..apiRequest.emailEdge.edgeReq@: =..apiRequest.emailEdge.edgeReqIn

    - =.builtIn.date.formatDataPro: 
        dataIn: 
          date: =..inMeeting.docResponse.edge.0.stime
          separator: "/"
        dataOut: PatientSummaryRoom.formData.sendMessageSTime
    # 分割手机号
    - =.builtIn.string.phoneNumberSplit: 
        dataIn: 
          phoneNumber: =..dataObject.name.patientPhoneNumber
          sign: " "
        dataOut: PatientSummaryRoom.formData.splitPatPhoneNumber    
    - =.builtIn.date.formatDataPro: 
        dataIn: 
          date: =..dataObject.stime
          separator: "/"
        dataOut: PatientSummaryRoom.formData.sendMessageSTime                    
    
    # 判断会议是否在开始前15min内
    # - =.builtIn.date.startMeeting:
    #     dataIn:
    #       stime: =..dataObject.stime
    #     dataOut: PatientSummaryRoom.formData.startIf
    # - if:
    #   - =.builtIn.string.equal:
    #       dataIn:
    #         string1: =..formData.startIf
    #         string2: true
    #   - actionType: evalObject
    #     object:
    #       # 判断病人是否签到 (<=15min)
    #       - if:
    #         - =.builtIn.number.typeIsValid:
    #             dataIn:
    #               docType: =..dataObject.tage
    #               localArr: [4]
    #               binaryArr: [1]       
    #         - ..formData.isStartMeeting@: false # 签到
    #         - continue # 未签到 
    #   - continue # >15min
    - if:
      - =.builtIn.string.equal:
          dataIn:
            string1: =..inMeeting.docResponse.edge.0.bvid
            string2: =.Global.currentFacility.id
      - ..formData.patientScheduleRoom@: none
      - continue

  formData:
    patientChart: [] # 会议里的patientChart
    medicalDocuments: []   # 所有开会时的文档
    emergencyFullname: ""
    judgeStatus: ""
    reasonForCancelation: ""
    cancelSingle:
      cancelSelect: ""
    isHiddenLocation: ""
    cancelByPatientOrProvider: ""
    concatProviderName: ""
    concatPatientName: ""
    sendMessageContent:
      msg1: "Hello, "
      msg2: ""
      msg3: "Reason: "
      res: ""
      cancelTime: ""
    sendMessageSTime: ""  # 发送邮件的开始时间
    sendMessageChange: ""
    currentSubtype: ""
    splitTime: []  # availablity 里的具体每一个时间段""
    duration: ""
    scheduleScondition: "" # For schedule to get all E1
    availScheduleScondition: "" # For getFirstAvailSchedule to get the nearest available time
    currentLocalTime: ""
    adjacentEdgeTime: ""
    changeAppointmentTime: {} # 暂存更改的时间$var的信息
    splitPatPhoneNumber: ""  
    # originalTimeString: ""
    currentTimeString: "" # 改变预约发送的邮件  
    # isHiddenCalAndChange: false
    # isHiddenFinish: true
    isStartMeeting: false   # 会议是否在开始15min前,默认在15min外，隐藏finish
    startIf: ""
    patientScheduleRoom: block
  formDataTemp: 
    notesList: 
      - title: COVID-19 Results & Flu A&B Results
        pageName: Cov19ResultsAndFluResultsEdit    
      - title: Progress Report
        pageName: ProgressReportEdit      
      - title: Initial Evaluation Report
        pageName: InitEvalReportEdit        
      - title: Evaluation Note
        pageName: EvaluationNoteEdit   
      # - title: Prescription
      #   pageName: Prescription2             
      - title: Absence / Excuse Note
        pageName: AbsentNoteEdit      
      - title: Blank Note/form
        pageName: BlankNoteEdit
      - title: Work Status Form
        pageName: WorkStatusFormEdit
      - title: PR-1
        pageName: PROneEdit
      - title: PR-2
        pageName: PRTwoEdit
      - title: DWC Form RFA
        pageName: DWCFormRFAEdit
      - title: Surgery Authorization
        pageName: SurgeryAuthorizationEdit  
      - title: Patient Consent Form - HIPPA
        pageName: PatientConsentFormHIPPAEdit 
      # - title: Progress Report
      #   pageName: ProgressReportEdit      
      # - title: Initial Evaluation Report
      #   pageName: InitEvalReportEdit        
      # - title: Evaluation Note
      #   pageName: EvaluationNoteEdit   
      # - title: Prescription
      #   pageName: Prescription2             
      # - title: Absence / Excuse Note
      #   pageName: AbsentNoteEdit      
      # - title: Blank Note/form
      #   pageName: BlankNoteEdit
      # - title: Work Status Form
      #   pageName: WorkStatusFormEdit
      # - title: PR-1
      #   pageName: PROneEdit
      # - title: PR-2
      #   pageName: PRTwoEdit
      # - title: DWC Form RFA
      #   pageName: DWCFormRFAEdit
      # - title: Surgery Authorization
      #   pageName: SurgeryAuthorizationEdit  
      # - title: Patient Consent Form - HIPPA
      #   pageName: PatientConsentFormHIPPAEdit
      # - title: New Patient Form
      #   pageName: NewPatFormEditPage1
      # - title: COVID-19 Testing Consent
      #   pageName: Cov19TestFormEditPage1
      # - title: COVID-19 Testing Consent - New Patient
      #   pageName: Cov19TestNewPatEditPage1
      # - title: Pifzer-BioNTech Vaccine - First Dose
      #   pageName: PifzerVaccineFirDoseEditPage1
      # - title: Pifzer-BioNTech Vaccine - Second Dose
      #   pageName: PifzerVaccineSecDoseEditPage1
      # - title: Moderna Vaccine Form - First Dose
      #   pageName: ModernaVaccineFirDoseEditPage1
      # - title: Moderna Vaccine Form - Second Dose
      #   pageName: ModernaVaccineSecDoseEditPage1
    assignType: 
      - text: "All"
        textColor: "0x2988e6"
        borderColor: "0x2986e3"
        backgroundColor: "0xdfedfc"
        tagCategory: "All"
        value: All
      - text: "@Me"
        textColor: "0xfc3a3a"
        borderColor: "0xffeaea"
        backgroundColor: "0xffeaea" 
        tagCategory: ""
        value: "@Me"
      - text: "Patient"
        textColor: "0xf8ae29"
        borderColor: "0xfff4e0"
        backgroundColor: "0xfff4e0"
        tagCategory: classTag
        value: "Patient"        
      - text: "Provider"
        textColor: "0x30b354"
        borderColor: "0xe4f5e9"
        backgroundColor: "0xe4f5e9"
        tagCategory: classTag
        value: "Provider"
      - text: "Admin"
        textColor: "0x005795"
        borderColor: "0xdfedfc"
        backgroundColor: "0xe9f2fc"
        tagCategory: classTag
        value: "Admin"
      - text: "Private"
        textColor: "0x4c5264"
        borderColor: "0xececee"
        backgroundColor: "0xececee"
        tagCategory: statusTag
        value: "Private"
      - text: "Released"
        textColor: "0x2988e6"
        borderColor: "0xdfedfc"
        backgroundColor: "0xdfedfc" 
        tagCategory: statusTag
        value: "Released"
    cancelAppointmentSelect:
      - key: cancelSelect
        value: Patient
      - key: cancelSelect
        value: Facility
  
  inMeetingEdgeFlag: "false"  
  dataObject: ""
  participants: ""
  info: ""
  patientPage: "VisitQuestionnaire"
  inMeeting:  # 同意预约后，正在开会的40000那条边（subtype为6或者100）
    docResponse: 
    edge:
      id: .Global.formData.patientHistoryInfo.id
      xfname: "id"
      obfname: "ctime"
      _nonce: =.Global._nonce
      maxcount: "100"
      type: 40000
    storeEdge: ""
    response: ""
    edgeAPI: 
      get: 
        api: re
        dataIn: inMeeting.edge
        dataOut: PatientSummaryRoom.inMeeting.docResponse
      store:
        api: ce
        dataIn: inMeeting.storeEdge
        dataOut: PatientSummaryRoom.inMeeting.response

  afterAgree:   #(E5那条边，用于拿到provider的name)
    edgeResp: 
    edge: 
      id: .Global.formData.patientHistoryInfo.id
      xfname: refid
      obfname: "ctime"
      _nonce: .Global._nonce
      maxcount: "1"
      type: 40000
      sCondition: subtype in (10)
    storeEdge:
    response:
    edgeAPI: 
      get: 
        api: re
        dataIn: afterAgree.edge
        dataOut: PatientSummaryRoom.afterAgree.edgeResp
      store:
        api: ce
        dataIn: afterAgree.storeEdge
        dataOut: PatientSummaryRoom.afterAgree.response
  apiRequest:
    # 获取Facility 和provider以及patient之间的E10002，用于发邮件
    connection: 
      edgeResp: ""
      edgeIn: 
        id: 
          - .Global.currentFacility.id
        xfname: Bvid,Evid
        type: 10002
        obfname: mtime
        tage: 1
        _nonce: =.Global._nonce
        maxcount: "1"
      edgeAPI: 
        get: 
          api: re
          dataIn: apiRequest.connection.edgeIn
          dataOut: PatientSummaryRoom.apiRequest.connection.edgeResp
    #保险卡信息
    insuranceCard:
      docQueryResp: ""
      docQueryReq:
        xfname: reid
        id: ""
        type: .DocType.InsuranceCard
        name:
          data:
            #是否未默认保险卡 
            default: false
            #保险公司名称
            companyName: ""
            #保险计划或者医疗组织
            planOrMedicalGroup: ""
            #成员名称
            memberName: ""
            #成员id
            memberId: ""
            #组织号码
            groupNumber: ""
            #政策号码
            policyNumber: ""
            #政策持有者名字
            policyHolderName: ""
            #与患者的关系
            relation: ""
            #保险卡正面照片docId
            front_InsuranceCardId: ""
            #保险卡反面照片docId
            back_InsuranceCardId: ""
      docAPI:
        get:  
          api: rd
          dataIn: PatientSummaryRoom.apiRequest.insuranceCard.docQueryReq
          dataOut: PatientSummaryRoom.apiRequest.insuranceCard.docQueryResp       
    # 结束会议
    finishMeetingRoom:
      docResp: ""
      document:
        type: "10496"
        tage: "256"
        eid: ""
        reid: ""
      docAPI:
        store:
          api: cd
          dataIn: PatientSummaryRoom.apiRequest.finishMeetingRoom.document
          dataOut: PatientSummaryRoom.apiRequest.finishMeetingRoom.docResp  
    #获取最近可预约时间段
    getFirstAvail:
      response: ""
      edge:
        type: 40000
        id: []
        sCondition: ..formData.availScheduleScondition
        maxcount: "1"
        xfname: "evid,bvid"
        obfname: "stime"
        asc: true
        _nonce: =.Global._nonce
      edgeAPI:
        get:
          .EdgeAPI.get: ""
          api: re
          dataIn: PatientSummaryRoom.apiRequest.getFirstAvail.edge
          dataOut: PatientSummaryRoom.apiRequest.getFirstAvail.response  
    changeAppointment:
      response: ""
      edgeIn:
        type: 40000
        subtype: 8
        refid: "" # 指向原来的E2，存储取消的记录
        bvid: .Global.currentFacility.id
        evid: "" # 为改变的新的预约时间的eid
        stime: ""
        etime: ""
        name: ""
      edgeAPI:
        store:
          api: ce
          dataIn: PatientSummaryRoom.apiRequest.changeAppointment.edgeIn
          dataOut: PatientSummaryRoom.apiRequest.changeAppointment.response  
    cancelMeetingDoc: 
      docIn: 
        type: 166401
        eid: 
        reid: 
        name: 
          data: 
            role: ""
            reason: ""
      docStoreResp: ""
      docAPI: 
        store: 
          api: cd 
          dataIn: PatientSummaryRoom.apiRequest.cancelMeetingDoc.docIn
          dataOut: PatientSummaryRoom.apiRequest.cancelMeetingDoc.docStoreResp                        
    # 创建新的预约邀请参与者
    inviteParticipant: 
      edgeResp: ""
      edgeGetResp: ""
      edgeIn: 
        id: 
        xfname: bvid,refid
        type: 40000
        sCondition: "subtype=10"
        obfname: ctime
        _nonce: =.Global._nonce  
        asc: true
      edge: 
        .Edge: ""
        evid: ""
        refid: ""
        type: 40000
        subtype: 10
        bvid: =.Global.currentFacility.id
        stime: ""
        etime: ""
      edgeAPI: 
        store: 
          api: ce 
          dataIn: apiRequest.inviteParticipant.edge
          dataOut: PatientSummaryRoom.apiRequest.inviteParticipant.edgeResp    
        get: 
          api: re
          dataIn: apiRequest.inviteParticipant.edgeIn
          dataOut: PatientSummaryRoom.apiRequest.inviteParticipant.edgeGetResp   
    # 取消会议发送邮件
    email: 
      docStoreIn:
        #邮件类型，默认1281
        type: .DocType.InboxMessage
        #邮件所挂载的edge(是10002) 默认挂在 rootNotebookID 10000，当点击send的时候再修改为 10002
        eid: ""
        name: 
          data: 
            #邮件内容
            content: ""
            #收件人姓名 
            receiverName: ""
            #发送人姓名 
            senderName: ""
            #发件人头像的id
            senderAvatarId: ""
            #是否携带附件
            haveAttachment: false
          #邮件标题
          title: ""
          #收件人头像的id 
          user: ""
      docQueryRes: ""
      docQueryReq: 
        ObjType: 544
        #邮件类型，默认1281
        type: 1281
        id: .Global.currentFacility.id
        # 查询条件
        sCondition: E.type=10002 AND (D2.type & 0xFF18 =0xE00 OR D2.reid is NULL OR D2.Type = 66561)
        # 发送者id  接收者id  邮件的发送者id
        xfname: (E.bvid|E.evid)&!D.ovid
        obfname: ctime
        _nonce: =.Global._nonce
        maxcount: "100"
      docQueryRegetResp: ""
      # 这里用原先的get会让列表数据消失，换一个
      docQueryReGet: 
        # 使得当emailTag变化时，email type就会变化
        ObjType: 544
        #邮件类型，默认1281
        type: 1281
        id: .Global.currentFacility.id
        # 查询条件
        sCondition: E.type=10002 AND (D2.type & 0xFF18 =0xE00 OR D2.reid is NULL OR D2.Type = 66561)
        # 发送者id  接收者id  邮件的发送者id
        xfname: (E.bvid|E.evid)&!D.ovid
        obfname: ctime
        _nonce: =.Global._nonce
        maxcount: "100"
      docStoreRes: ""
      docStoreReq:
        #邮件类型，默认1281
        type: .DocType.InboxMessage
        #邮件所挂载的edge(是10002) 默认挂在 rootNotebookID 10000，当点击send的时候再修改为 10002
        eid: .Global.rootNotebookID 
        name: 
          data: 
            #邮件内容
            content: ""
            #收件人姓名 
            receiverName: ""
            #发送人姓名 
            senderName: ""
            #发件人头像的id
            senderAvatarId: ""
            #是否携带附件
            haveAttachment: false
          #邮件标题
          title: ""
          #收件人头像的id 
          user: ""
      docAPI:
        reget:
          api: rd
          dataIn: PatientSummaryRoom.apiRequest.email.docQueryReGet
          dataOut: PatientSummaryRoom.apiRequest.email.docQueryRegetResp      
        get:
          api: rd
          dataIn: PatientSummaryRoom.apiRequest.email.docQueryReq
          dataOut: PatientSummaryRoom.apiRequest.email.docQueryRes
        store:
          api: cd
          dataIn: PatientSummaryRoom.apiRequest.email.docStoreReq
          dataOut: PatientSummaryRoom.apiRequest.email.docStoreRes
    patientChart: 
      docResp: ""
      docIn: 
        id: .Global.formData.patientHistoryInfo.id
        xfname: eid
        type: .DocType.PatientChart
        maxcount: "1"
        obfname: "mtime"
        _nonce: .Global._nonce
      docAPI: 
        get: 
          api: rd
          dataIn: apiRequest.patientChart.docIn
          dataOut: PatientSummaryRoom.apiRequest.patientChart.docResp          
    # 获取会议所有的文档
    medicalDocuments: 
      docResp: ""
      docIn: 
        id: .Global.formData.patientHistoryInfo.id
        xfname: reid
        sCondition: .DocumentQuery.AdminAllMeetingDocuments
        maxcount : "500"
        obfname : "mtime" 
        _nonce: =.Global._nonce
      docAPI:
        get:
          api: rd
          dataIn: apiRequest.medicalDocuments.docIn
          dataOut: PatientSummaryRoom.apiRequest.medicalDocuments.docResp          
    # 获取邮件的边
    emailEdge:
      edgeReqIn:
        id: []
        type: 10002
        xfname: bvid,evid
        obfname: "ctime"
        _nonce: =.Global._nonce
      edgeResp: ""
      reEdgeResp: ""
      edgeReq:
        id: []
        type: 10002
        xfname: Bvid,Evid
        obfname: "ctime"
        _nonce: =.Global._nonce
      edgeAPI:
        get:
          api: re
          dataIn: PatientSummaryRoom.apiRequest.emailEdge.edgeReq
          dataOut: PatientSummaryRoom.apiRequest.emailEdge.edgeResp
        reGet:
          api: re
          dataIn: PatientSummaryRoom.apiRequest.emailEdge.edgeReq
          dataOut: PatientSummaryRoom.apiRequest.emailEdge.reEdgeResp
    # 如果是facility创建的E2，文档挂E2；否则文档挂E10 ，此处获取E10
    getBelongEdge: 
      edgeResp: ""
      edgeIn: 
        id: 
        xfname: evid,refid
        type: 40000
        sCondition: "subtype=10"
        obfname: ctime
        maxcount: "1"
      edgeAPI: 
        get:  
          api: re
          dataIn: apiRequest.getBelongEdge.edgeIn
          dataOut: PatientSummaryRoom.apiRequest.getBelongEdge.edgeResp
  profile:
    docResponse: ""
    docIn: 
      ids: []
      xfname: Bvid
      type: .DocType.PatientProfile #  type: "257"
      obfname: "mtime"
      ObjType: 12
      sCondition: "E.type=10000"
      maxcount: "1"
      _nonce: =.Global._nonce
    docAPI: 
      get:
        .DocAPI.get: "" 
        api: rd
        dataIn: profile.docIn
        dataOut: PatientSummaryRoom.profile.docResponse
  deleteMeeting: #删除当前房间
    response: 
    edge:
      ..dataObject: ""
      id: ""
      # bvid: .Global.currentUser.vertex.id
      bvid: .Global.currentFacility.id
      refid: ..dataObject.id
      evid: ""
      subtype: 7
    edgeAPI:
      store:
        api: ce
        dataIn: deleteMeeting.edge
        dataOut: deleteMeeting.response
  patientName: ""
  # pagePath: VisitQuestionnaire
  infor: 
    - img: remoteHealth0.svg
      title: Vital Signs
      bgc: "0xf0f6fc"
      pageName: VitalSigns
    - img: patientChart.svg
      title: Patient Chart
      bgc: "0xffffff"
      pageName: PatientChart      
    - img: providerNotes.svg
      title: Provider Notes
      bgc: "0xffffff"
      pageName: ProviderNotes
    - img: medicalRecords.svg
      title: Medical Documents
      bgc: "0xffffff"
      pageName: MedicalRecords
  # the following is covid-19 test

  providerList:
    list: ""
    edge:
      ObjType: 12
      type: .DocType.DoctorProfile
      id: .Global.currentFacility.id
      xfname: E.bvid|E.evid
      sCondition: E.type=10002 AND E.tage=1 AND E.subtype&0xf0000=0x30000
      maxcount: "10000"
      _nonce: =.Global._nonce
    docAPI:
      get: 
        api: rd
        dataOut: providerList.list
        dataIn: providerList.edge
  getLocation:
    response: 
    edge:
      id: ""
      maxcount: "1"
      _nonce: =.Global._nonce
    get:
      api: rv
      dataIn: getLocation.edge
      dataOut: getLocation.response
  
  #  Reject meeting emails
  relation:
    edgeReq:
      id: []
      type: .EdgeType.Email
      xfname: Evid&Bvid
      maxcount: "1"
      obfname : "ctime"
      _nonce: =.Global._nonce
    edgeRes: ""
    edgeAPI:
      get:
        api: re
        dataIn: PatientSummaryRoom.relation.edgeReq
        dataOut: PatientSummaryRoom.relation.edgeRes
  # 
  cancelEmail:
    docReq:
      type: .DocType.InboxMessage 
      eid:  "" 
      name:
        data:
          content: ""
          receiverName: .PatientSummaryRoom.dataObject.name.patientName
          senderName: .Global.currentFacility.name.basicInfo.medicalFacilityName  
        title: "Cancel Appointment"
        user: .PatientSummaryRoom.dataObject.bvid  
    docRes: ""
    docAPI:
      store:
        api: cd
        dataIn: PatientSummaryRoom.cancelEmail.docReq
        dataOut: PatientSummaryRoom.cancelEmail.docRes
  # 获取Availability，可用时间的        
  schedule:     
    scheduleList:
      edge: []
    get:
      api: re
      dataIn: PatientSummaryRoom.schedule.edge
      dataOut: PatientSummaryRoom.schedule.scheduleList
    edge:
      type: 40000
      id: []
      sCondition: PatientSummaryRoom.formData.scheduleScondition
      xfname: "evid,bvid"
      maxcount: "1000"
      obfname: "stime"
      asc: true
      _nonce: =.Global._nonce
  # 获取当前E2指向的E1，
  originSchedule:     
    scheduleList:
      edge: []
    edgeIn:
      type: 40000
      id: ""
      xfname: "id"
      _nonce: =.Global._nonce
    edgeAPI:
      get:
        api: re
        dataIn: PatientSummaryRoom.originSchedule.edgeIn
        dataOut: PatientSummaryRoom.originSchedule.scheduleList
  components:
    - type: view
      style:
        width: '1'
        height: '1'
        margin: auto
      children:
        - .SideMenuBar:
          children:
            - .aitLogo:
            - .MenuBar:
        - .TopBar:
        - .BodyView:
          children:
            - .AppointmentLobby:
              style:
                width: "0.18"
            - .GotoBack:
              onClick:
                - goto: ScheduleManagementRoom          
            - type: view
              style: 
                left: "0.008"
                width: "0.824"
                height: "0.15"
                top: "0.095"
                border:   
                  style: "5"
                # borderRadius: "5"
                # boxShadow: "#dededf 0px 0px 10px"
                backgroundColor: "0xffffff"
              children: 
                - type: image
                  path: patientDefault.svg
                #  work after yongjian update
                  path=func: .builtIn.utils.prepareDocToPath
                  dataKey: profile.docResponse.doc.0.name.data.basicInfo.avatar
                  style: 
                    left: "0.03"
                    width: "0.06"
                    top: "0.027"
                    height: "0.1"
                - type: view
                  style: 
                    left: "0.11"
                    width: "0.2"
                    top: "0"
                  children: 
                    - .PatientHistoryTextNewUI:
                      viewTag: providerInfo1Tag 
                      style: 
                        fontWeight: "600"
                        fontSize: "1.4vw"
                        color: "#005795"
                        marginTop: "0.008"
                        textDecoration: underline
                        borderBottom: "#005795"
                      dataKey: profile.docResponse.doc.0.name.data.basicInfo.fullName
                      onClick: 
                        - actionType: evalObject
                          object:
                            - =.builtIn.string.concat:
                                dataIn:
                                  - =..profile.docResponse.doc.0.name.data.emergencyContact.firstName
                                  - =..profile.docResponse.doc.0.name.data.emergencyContact.middleName
                                  - =..profile.docResponse.doc.0.name.data.emergencyContact.lastName
                                dataOut: PatientSummaryRoom.formData.patInfoEmerContactFullName    
                            - ..apiRequest.connection.edgeIn.id.1@: =..profile.docResponse.doc.0.bsig
                            - =..apiRequest.connection.edgeAPI.get: ""       
                            - ..apiRequest.insuranceCard.docQueryReq.id@: =..apiRequest.connection.edgeResp.edge.0.id
                            - =..apiRequest.insuranceCard.docAPI.get: ""
                            - =.builtIn.object.setObjectKey:
                                dataIn:
                                  objectArr: =..apiRequest.insuranceCard.docQueryResp.doc
                                  key: isShowDownArrowGray
                                  value: block
                                dataOut: PatientSummaryRoom.formData.patdInfoMedicalInsurance                                  
                            - =.builtIn.object.setObjectKey:
                                dataIn:
                                  objectArr: =..apiRequest.insuranceCard.docQueryResp.doc
                                  key: isShowUpArrowGray
                                  value: none
                                dataOut: PatientSummaryRoom.formData.patdInfoMedicalInsurance
                            - =.builtIn.object.setObjectKey:
                                dataIn:
                                  objectArr: =..apiRequest.insuranceCard.docQueryResp.doc
                                  key: isShowMedicalInsuranceInfo
                                  value: none
                                dataOut: PatientSummaryRoom.formData.patdInfoMedicalInsurance                                            
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: patientProfile 
                        - actionType: popUp
                          popUpView: patientProfile  
                    - type: view
                      style:
                        marginTop: "0.05"
                      children:
                        - type: label
                          text: "User Name: "
                          style:
                            fontSize: .Nfont.nf2
                            fontWeight: "500"
                            display: inline-block
                        - type: view
                          dataKey: profile.docResponse.doc.0.name.data.basicInfo.userName
                          style: 
                            marginLeft: "0.01"
                            top: "0"
                            width: "0.21"
                            fontSize: .Nfont.nf2
                            display: inline-block
                            height: auto 
                    - type: view
                      style:
                        marginTop: "0"
                      children:
                        - type: label
                          text: "DOB: "
                          dataKey: 
                          style:
                            fontSize: .Nfont.nf2
                            fontWeight: "500"
                            display: inline-block
                        - type: view
                          dataKey: profile.docResponse.doc.0.name.data.basicInfo.dateOfBirth
                          style: 
                            marginLeft: "0.01"
                            top: "0"
                            width: "0.21"
                            height: auto 
                            display: inline-block
                            fontSize: .Nfont.nf2
                    - type: view
                      style:
                        marginTop: "0"
                      children:
                        - type: label
                          text: "Phone #: "
                          dataKey: 
                          style:
                            display: inline-block
                            fontSize: .Nfont.nf2
                            fontWeight: "500"
                        - type: view
                          dataKey: profile.docResponse.doc.0.name.data.basicInfo.phone
                          style: 
                            marginLeft: "0.01"
                            top: "0"
                            display: inline-block
                            width: "0.21"
                            height: auto 
                            fontSize: .Nfont.nf2
                    - type: view
                      style:
                        marginTop: "0"
                      children:
                        - type: label
                          text: "Address: "
                          style:
                            display: inline-block
                            fontSize: .Nfont.nf2
                            fontWeight: "500"
                        - type: view
                          dataKey: profile.docResponse.doc.0.name.data.contactInfo.address.fullAddress
                          style: 
                            marginLeft: "0.01"
                            top: "0"
                            display: inline-block
                            width: "0.21"
                            height: auto 
                            fontSize: .Nfont.nf2
                    # - .PatientHistoryText:
                    #   text: Emergency Contact
                    #   style:
                    #     left: "0.25"
                    #     color: "0x586f84"
                    # - .PatientHistoryText: 
                    #   dataKey: formData.emergencyFullname
                    #   style: 
                    #     top: "0.0375"
                    #     left: "0.25"
                    # - .PatientHistoryText: 
                    #   dataKey: profile.docResponse.doc.0.name.data.emergencyContact.relation
                    #   style: 
                    #     left: "0.25"
                    #     top: "0.075"
                    # - .PatientHistoryText: 
                    #   dataKey: profile.docResponse.doc.0.name.data.emergencyContact.phone
                    #   style: 
                    #     left: "0.25"
                    #     top: "0.11"
                - type: view
                  viewTag: calAndChangeBtnTag
                  style:
                    isHidden: ..formData.isHiddenCalAndChange
                   
                  children:
                    - type: button
                      text: Cancel Appointment
                      onClick: 
                        - actionType: popUp
                          popUpView: cancelAppointmentTag
                        # - actionType: builtIn
                        #   funcName: goBack
                        #   reload: true
                        # - actionType: evalObject
                        #   object: 
                        #     - .Global.formData.patientHistoryInfo@: "1"
                        # - actionType: updateObject
                        #   dataKey: Global.formData.patientHistoryInfo
                        #   dataObject: []

                      style: 
                        left: "0.6"
                        top: "0.05"
                        width: "0.09" 
                        height: "0.04" 
                        backgroundColor: "0xd50000"
                        color: "0xffffff"
                        fontSize: .Nfont.nf2
                        border: 
                          style: '5'
                        borderRadius: "5"
                    - type: button
                      text: Change Appointment
                      style: 
                        left: "0.7"
                        top: "0.05"
                        width: "0.1" 
                        height: "0.04" 
                        backgroundColor: "0x1263a8"
                        color: "0xffffff"
                        fontSize: .Nfont.nf2
                        fontFamily: "Poppins"
                        border: 
                          style: '5'
                        borderRadius: "5"
                      onClick:
                        - actionType: evalObject
                          object:
                            # 获取前一天的时间戳
                            - =.builtIn.date.getTime:
                                dataIn:
                                dataOut: PatientSummaryRoom.formData.nowTimeStamp  # 用于检查选择前一天的时间进行提示                                                
                            # 获取原来的预约
                            - ..originSchedule.edgeIn.id@: =..dataObject.refid
                            - =..originSchedule.edgeAPI.get: ""
                            # 获取原来预约的subtype用于查询所有的E1
                            - if: 
                              - =.builtIn.string.equal:
                                  dataIn:
                                    string1: =..originSchedule.scheduleList.edge.0.subtype
                                    string2: "393225" 
                              - ..formData.currentSubtype@: "393217"
                              - continue
                            - if: 
                              - =.builtIn.string.equal:
                                  dataIn:
                                    string1: =..originSchedule.scheduleList.edge.0.subtype
                                    string2: "655369"                 
                              - ..formData.currentSubtype@: "655361"
                              - continue
                            - if: 
                              - =.builtIn.string.equal:
                                  dataIn:
                                    string1: =..originSchedule.scheduleList.edge.0.subtype
                                    string2: "786441"                 
                              - ..formData.currentSubtype@: "786433"
                              - continue                          
                            # 获取当前时间的unix时间戳
                            - =.builtIn.date.getNowLocalUnixTime:
                                dataIn: ""
                                dataOut: PatientSummaryRoom.formData.currentLocalTime                                
                            # 设置可预约时间的scondition
                            - =.builtIn.string.concat:
                                dataIn:
                                  - "(etime>"
                                  - =..formData.currentLocalTime
                                  - " OR "
                                  - "stime>="
                                  - =..formData.currentLocalTime
                                  - ")"
                                  - " AND "
                                  - "subtype="
                                  - =..formData.currentSubtype
                                dataOut: PatientSummaryRoom.formData.availScheduleScondition
                            - ..apiRequest.getFirstAvail.edge.sCondition@: =.formData.availScheduleScondition
                            # 添加id
                            - ..apiRequest.getFirstAvail.edge.id.0@: =..originSchedule.scheduleList.edge.0.evid
                            - ..apiRequest.getFirstAvail.edge.id.1@: =..originSchedule.scheduleList.edge.0.bvid                            
                            # 获取原来预约的bvid,evid用于查询所有的E1即当前的Availability
                            - ..schedule.edge.id.0@: =..originSchedule.scheduleList.edge.0.evid
                            - ..schedule.edge.id.1@: =..originSchedule.scheduleList.edge.0.bvid                            
                            - =..apiRequest.getFirstAvail.edgeAPI.get: ""
                            - if:
                              - =..apiRequest.getFirstAvail.response.edge.0.id
                              - actionType: evalObject
                                object:      
                                  # 获取最近可预约时间，刷新BaseDate和calendar         
                                  - =.builtIn.date.stampToDay:
                                      dataIn:
                                        timeStamp: =..apiRequest.getFirstAvail.response.edge.0.stime
                                      dataOut: PatientSummaryRoom.formData.adjacentEdgeTime
                                  - .BaseDate.calendarDate.year@: =.PatientSummaryRoom.formData.adjacentEdgeTime.year
                                  - .BaseDate.calendarDate.month@: =.PatientSummaryRoom.formData.adjacentEdgeTime.month
                                  - .BaseDate.calendarDate.day@: =.PatientSummaryRoom.formData.adjacentEdgeTime.day
                              - continue
                            - =.builtIn.date.ShowDateByNumber:
                                dataIn:
                                  year: =.BaseDate.calendarDate.year
                                  month: =.BaseDate.calendarDate.month
                                  day: =.BaseDate.calendarDate.day
                                  formatType: "Y-M-D"
                                dataOut: BaseDate.calendarDate.todayDate
                            - =.builtIn.date.miniWeeklyCalendarArray:
                                dataIn:
                                  year: =.BaseDate.calendarDate.year
                                  month: =.BaseDate.calendarDate.month
                                  today: =.BaseDate.calendarDate.day
                                  markDay: =.BaseDate.calendarDate.day
                                  color: "0x000000"
                                  backgroundColor: "0xFFFFFF6f"
                                  todayColor: "0xffffff"
                                  todayBackgroundColor: "0x2988E6"
                                dataOut: BaseDate.calendarDate.minidayLable
                            - =.builtIn.date.transformMonth:
                                dataIn:
                                  month: =.BaseDate.calendarDate.month
                                dataOut: BaseDate.calendarDate.monthName
                            - =.builtIn.date.getTimeStampOfDate:
                                dataIn:
                                  date: =.BaseDate.calendarDate.todayDate
                                dataOut: BaseDate.calendarDate.todayStamp
                            - =.builtIn.string.concat:
                                dataIn:
                                  - "(stime<"
                                  - =.BaseDate.calendarDate.todayStamp.start
                                  - " AND "
                                  - "etime>"
                                  - =.BaseDate.calendarDate.todayStamp.start
                                  - " OR "
                                  - "stime>"
                                  - =.BaseDate.calendarDate.todayStamp.start
                                  - " AND "
                                  - "etime<"
                                  - =.BaseDate.calendarDate.todayStamp.end
                                  - " OR "
                                  - "stime<"
                                  - =.BaseDate.calendarDate.todayStamp.end
                                  - " AND "
                                  - "etime>"
                                  - =.BaseDate.calendarDate.todayStamp.end
                                  - ")"
                                  - " AND "
                                  - "subtype="
                                  - =..formData.currentSubtype
                                dataOut: PatientSummaryRoom.formData.scheduleScondition
                        - actionType: evalObject
                          object:
                            - ..schedule.edge.sCondition@: =..formData.scheduleScondition
                            - .BaseDate.schedule.scheduleList.edge@: []
                        - actionType: evalObject
                          object:
                            - =..schedule.get: ""
                            - ..schedule.edge.id@: []
                        - actionType: evalObject
                          object:           
                            - =.builtIn.date.splitTime:
                                dataIn:
                                  object2: =..schedule.scheduleList.edge
                                  timeSlot: =..formData.duration
                                  year: =.BaseDate.calendarDate.year
                                  month: =.BaseDate.calendarDate.month
                                  day: =.BaseDate.calendarDate.day
                                  isSplitCurrent: true
                                dataOut: PatientSummaryRoom.formData.splitTime
                            - =.builtIn.object.setObjectKey:
                                dataIn:
                                  objectArr: =..formData.splitTime
                                  key: fontColor
                                  value: "0x4b4b4b"
                                dataOut: PatientSummaryRoom.formData.splitTime
                            - =.builtIn.object.setObjectKey:
                                dataIn:
                                  objectArr: =..formData.splitTime
                                  key: borColor
                                  value: "0xebebeb"
                                dataOut: PatientSummaryRoom.formData.splitTime                                
                            - ..formData.nextBtnColor@: "0xd3dde9"   
                        - actionType: evalObject
                          object:   
                            - if: 
                              - =.builtIn.string.equal:
                                  dataIn:
                                    string1: =..dataObject.name.visitType
                                    string2: "Telemedicine"
                              - actionType: builtIn
                                funcName: hide
                                viewTag: addressView
                              - actionType: builtIn
                                funcName: show
                                viewTag: addressView     
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: btnView                                                                                                                                            
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: appointmentChangeTag                                 
                        - actionType: popUp
                          popUpView: appointmentChangeTag 
                
                - type: view
                  viewTag: finishBtnTag
                  style:
                    isHidden: ..formData.isStartMeeting
                  children:
                    - type: button
                      text: "Finish Appointment"
                      style: 
                        left: "0.49"
                        top: "0.05"
                        width: "0.1" 
                        height: "0.04" 
                        backgroundColor: "0x30b354"
                        color: "0xffffff"
                        fontSize: .Nfont.nf2
                        fontFamily: "Poppins"
                        border: 
                          style: '5'
                        borderRadius: "5"
                        textAlign:
                          x: center
                          y: center
                      onClick:
                        - actionType: evalObject
                          object:
                            - ..apiRequest.finishMeetingRoom.document.eid@: =.Global.formData.meetingDocEid
                            - ..apiRequest.finishMeetingRoom.document.reid@: =.Global.formData.meetingDocReid
                            - =..apiRequest.finishMeetingRoom.docAPI.store: ""  
                        - actionType: popUp
                          popUpView: finishSuccessTag
            - type: view
              style: 
                left: "0.008"
                width: "0.824"
                height: "0.662"
                top: "0.245"
                border:   
                  style: "5"
                # borderRadius: "5"
                # boxShadow: "#dededf 0px 0px 10px"
                backgroundColor: "0xffffff"
              children: 
                - type: view
                  style: 
                    left: "0"
                    width: "0.38"
                    height: "0.64"
                    top: "0"
                    border:   
                      style: "5"
                    borderRadius: "5"
                    # boxShadow: "#dededf 0px 0px 10px"
                    backgroundColor: "0xffffff"
                  children:
                    - .PatientSummaryTitleLabel: ""
                      style: 
                        marginTop: "0"
                    - .PatientSummaryBlueLabel: ""
                      style:
                        top: "0.007"
                    - type: view
                      viewTag: appointmentInfoTag
                      style: 
                        left: "0.03"
                        width: "0.35"
                        marginTop: "0.01"
                        height: "auto"
                      children: 
                        # - type: view
                        #   style:
                        #     width: "0.34"
                        #     display: flex
                        #     justifyContent: space-between
                        #     alignItems: center
                        #   children:
                        #     - .PatientSummaryTitleNewUI: 
                        #       text: Patient Name
                        #       style: 
                        #         left: "0.012"
                        #     - .PatientSummaryTextNewUI: 
                        #       style:
                        #         textIndent: "0px"
                        #         display: flex
                        #         justifyContent: flex-end
                        #       dataKey: inMeeting.docResponse.edge.0.name.patientName
                        
                        - type: view
                          style:
                            width: "0.34"
                            display: flex
                            justifyContent: space-between
                            alignItems: center
                          children:
                            - .PatientSummaryTitleNewUI: 
                              text: Visit Type
                              style: 
                                left: "0.012"
                            - .PatientSummaryTextNewUI: 
                              style:
                                textIndent: "0px"
                                display: flex
                                justifyContent: flex-end
                              dataKey: inMeeting.docResponse.edge.0.name.visitType
                        - type: view
                          style:
                            width: "0.34"
                            display: flex
                            justifyContent: space-between
                            alignItems: center
                          children:
                            - .PatientSummaryTitleNewUI: 
                              text: Reason for Visit
                              style: 
                                left: "0.012"
                            - .PatientSummaryTextNewUI: 
                              style:
                                display: flex
                                justifyContent: flex-end
                              dataKey: inMeeting.docResponse.edge.0.name.visitReason
                        - type: view
                          style:
                            width: "0.34"
                            display: flex
                            justifyContent: space-between
                            alignItems: center
                          children:
                            - .PatientSummaryTitleNewUI: 
                              text: Date
                              style: 
                                left: "0.012"
                            - .PatientSummaryTextNewUI: 
                              style:
                                textIndent: "0px"
                                display: flex
                                justifyContent: flex-end
                              text=func: .builtIn.string.formatUnixtimeL_en
                              dataKey: inMeeting.docResponse.edge.0.stime
                        - type: view
                          style:
                            width: "0.34"
                            display: flex
                            justifyContent: space-between
                            alignItems: center
                          children:
                            - .PatientSummaryTitleNewUI: 
                              text: Time
                              style: 
                                left: "0.012"
                            - .PatientSummaryTextNewUI: 
                              style:
                                textIndent: "0px"
                                width: "0.1"
                                display: flex
                                justifyContent: flex-end
                              text=func: .builtIn.date.ShowTimeSpan
                              dataKey: inMeeting.docResponse.edge.0 
                        - type: view
                          style:
                            width: "0.34"
                            display: flex
                            justifyContent: space-between
                            # alignItems: center
                          children:
                            - .PatientSummaryTitleNewUI: 
                              text: Location Name
                              style: 
                                left: "0.012"
                            - .PatientSummaryTextNewUI: 
                              style:
                                textIndent: "0px"
                                display: flex
                                justifyContent: flex-end
                              dataKey: inMeeting.docResponse.edge.0.name.locationName
                        - type: view
                          style:
                            width: "0.34"
                            display: flex
                            justifyContent: space-between
                            # alignItems: center
                          children:
                            - .PatientSummaryTitleNewUI: 
                              text: Address
                              style: 
                                left: "0.012"
                            - .PatientSummaryTextNewUI: 
                              style:
                                textIndent: "0px"
                                display: flex
                                justifyContent: flex-end
                                height: "0.045"
                              dataKey: inMeeting.docResponse.edge.0.name.location
                    - type: view
                      style:
                        width: "0.35"
                        height: "0.035"
                        backgroundColor: "0xeff0f2"
                        borderRadius: "5"
                        marginTop: "0.01"
                        left: '0.03'
                        display: flex
                        justifyContent: space-between
                        alignItems: center
                      children:
                        - .PatientSummaryTitleLabel: ""
                          text: Medical Info
                          style: 
                            marginTop: "0"
                            left: '0'
                            width: auto
                        - type: label
                          text: "Document History"
                          dataKey: 
                          style:
                            color: "0x4094e7"
                            width: "0.07"
                            fontSize: .Nfont.nf0
                            textDecoration: underline
                    - type: view
                      style: 
                        left: "0.037"
                        width: "0.34"
                        height: "0.13"
                        marginTop: "0.025"
                      children: 
                        - type: list
                          contentType: listObject
                          listObject: ..infor
                          iteratorVar: itemObject
                          viewTag: medicalInfoView
                          style:
                            width: '0.34'
                            left: "0"
                            top: "0"
                            height: "0.105"
                            axis: horizontal
                            margin: '0'
                          children:
                            - type: listItem
                              itemObject: ""
                              viewTag: infoView
                              onClick: 
                                - actionType: popUpDismiss
                                  popUpView: patientChartView              
                                - actionType: popUpDismiss
                                  popUpView: providerNotesView
                                - actionType: popUpDismiss
                                  popUpView: medicalDocumentsView                                      
                                - emit: 
                                    dataKey: 
                                      var: itemObject
                                    actions: 
                                      - =.builtIn.object.setProperty: 
                                          dataIn: 
                                            obj: =..infor
                                            label: "pageName"
                                            text: $var.pageName
                                            arr: ["bgc"]
                                            valueArr: ["0xf0f6fc"]
                                            errorArr: ["0xffffff"] 
                                      - if: 
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: $var.pageName
                                              string2: "VitalSigns"
                                        - ..formData.judgeStatus@: "1"
                                        - continue
                                      - if: 
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: $var.pageName
                                              string2: "PatientChart"                                                                                              
                                        - ..formData.judgeStatus@: "2"
                                        - continue  
                                      - if: 
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: $var.pageName
                                              string2: "ProviderNotes"
                                        - ..formData.judgeStatus@: "3"
                                        - continue
                                      - if: 
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: $var.pageName
                                              string2: "MedicalRecords"
                                        - ..formData.judgeStatus@: "4"
                                        - continue
                                      - .Global.formData.patientPage@: $var.pageName
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: medicalInfoView 
                                - actionType: evalObject
                                  object:
                                    - if: 
                                      - =.builtIn.string.equal:
                                          dataIn:
                                            string1: =..formData.judgeStatus
                                            string2: '1'
                                      - actionType: popUp
                                        popUpView: vitalSignsView
                                        wait: true
                                      - continue
                                    - if: 
                                      - =.builtIn.string.equal:
                                          dataIn:
                                            string1: =..formData.judgeStatus
                                            string2: '2'
                                      - actionType: popUp
                                        popUpView: patientChartView
                                        wait: true
                                      - continue
                                    - if: 
                                      - =.builtIn.string.equal:
                                          dataIn:
                                            string1: =..formData.judgeStatus
                                            string2: '3'
                                      - actionType: popUp
                                        popUpView: providerNotesView
                                        wait: true
                                      - continue
                                    - if: 
                                      - =.builtIn.string.equal:
                                          dataIn:
                                            string1: =..formData.judgeStatus
                                            string2: '4'
                                      - actionType: popUp
                                        popUpView: medicalDocumentsView
                                        wait: true
                                      - continue
                              style:
                                width: '0.071'
                                height: '0.105'
                                marginLeft: "17px"
                                backgroundColor: itemObject.bgc
                                boxShadow: "#dededf 0px 0px 10px"
                                border: 
                                  style: "5"
                                borderRadius: "5"
                              children:
                                - type: image
                                  path: 
                                    emit:
                                      dataKey:
                                        var: itemObject
                                      actions:
                                        - if:
                                          - true
                                          - $var.img
                                          - $var.img
                                  style: 
                                    left: "0.022"
                                    width: "0.028"
                                    height: "0.05"
                                    top: "0.01"
                                - type: label
                                  dataKey: itemObject.title
                                  style: 
                                    left: "0"
                                    width: "0.072"
                                    top: "0.07"
                                    height: "0.025"
                                    fontSize: .Nfont.nf0
                                    textAlign: 
                                      x: center
                    - type: view
                      style:
                        width: "0.35"
                        height: "0.035"
                        backgroundColor: "0xeff0f2"
                        borderRadius: "5"
                        marginTop: "0.01"
                        left: '0.03'
                        display: flex
                        justifyContent: space-between
                        alignItems: center
                      children:
                        - .PatientSummaryTitleLabel: ""
                          text: Participants
                          style: 
                            marginTop: "0"
                            left: '0'
                            width: auto
                        - type: label
                          text: "+ Invite"
                          onClick: 
                            - actionType: popUp
                              popUpView: ProviderListTag
                          style:
                            color: "0x4094e7"
                            width: "0.04"
                            fontSize: .Nfont.nf0
                            textDecoration: underline
                    
                    - type: scrollView
                      style: 
                        left: "0.03"
                        width: "0.34"
                        marginTop: "0.01"
                        height: "0.125"
                      children: 
                        - type: view
                          style:
                            width: "0.34"
                            display: flex
                            justifyContent: space-between
                            alignItems: center
                          children:
                            - .PatientSummaryTitleNewUI: 
                              text: Patient
                              style: 
                                left: "0.012"
                            - .PatientSummaryTextNewUI: 
                              style:
                                textIndent: "0px"
                                display: flex
                                justifyContent: flex-end
                              dataKey: dataObject.name.patientName
                        - type: view
                          style:
                            display: ..formData.patientScheduleRoom
                          children:
                            - type: view
                              style:
                                width: "0.34"
                                display: flex
                                justifyContent: space-between
                                alignItems: center
                              children:
                                - .PatientSummaryTitleNewUI: 
                                  text: Room
                                  style: 
                                    left: "0.012"
                                - .PatientSummaryTextNewUI: 
                                  style:
                                    textIndent: "0px"
                                    display: flex
                                    justifyContent: flex-end
                                  dataKey: dataObject.name.roomName
                        - type: list
                          contentType: listObject
                          listObject: ..apiRequest.inviteParticipant.edgeGetResp.edge
                          iteratorVar: itemObject
                          viewTag: participantsView
                          style:
                            width: '0.34'
                            margin: '0'
                            height: auto
                          children:
                            - type: listItem
                              itemObject: 
                              style:
                                width: "0.34"
                                display: flex
                                justifyContent: space-between
                                alignItems: center
                              children:
                                - .PatientSummaryTitleNewUI: 
                                  dataKey: itemObject.name.role
                                  style: 
                                    left: "0.012"
                                - .PatientSummaryTextNewUI: 
                                  style:
                                    textIndent: "0px"
                                    display: flex
                                    justifyContent: flex-end
                                  dataKey: itemObject.name.roleName
                # Vital Signs
                - type: view
                  viewTag: vitalSignsView
                  style: 
                    left: '0.41'
                    width: "0.39"
                    top: "0"
                    height: "0.64"
                    border: 
                      style: "3"
                    borderWidth: "1"
                    borderColor: "0xeff0f2"
                    borderRadius: "5"
                    boxSizing: border-box
                    backgroundColor: "0xeff0f2"  
                  children: 
                    - type: label
                      text: Vital Signs
                      dataKey: 
                      style:
                        left: "0.013"
                        width: "0.36"
                        textIndent: "1em"
                        marginTop: "0.01"
                        fontSize: .Nfont.nf4
                        fontFamily: "Roboto"
                        fontWeight: "500"         
                    - type: scrollView
                      style:
                        left: "0.013"
                        width: "0.364"
                        marginTop: "0.015"
                        height: "0.565"
                        border: 
                          style: "5"
                        borderWidth: "1"
                        borderColor: "0xffffff"
                        borderRadius: "3"
                        boxSizing: border-box
                        backgroundColor: "0xffffff"
                      children:          
                        - .VitalSignsView: 
                          style: 
                            marginTop: "0.02"
                          children:
                            - .VitalSignsText: 
                              text: "Blood Pressure(mmHg)"
                            - .VitalSignsTextField: 
                              placeholder: "Enter here"
                        - .VitalSignsView:
                          children:
                            - .VitalSignsText: 
                              text: "Heart Rate(bpm)"
                            - .VitalSignsTextField: 
                              placeholder: "Enter here"
                        - .VitalSignsView: 
                          children:
                            - .VitalSignsText: 
                              text: "Respiratory Rate(breaths/min)"
                            - .VitalSignsTextField: 
                              placeholder: "Enter here"
                        - .VitalSignsView: 
                          children:
                            - .VitalSignsText: 
                              text: "Pulse Oximetry(O2%)"
                            - .VitalSignsTextField: 
                              placeholder: "Enter here"
                        - .VitalSignsView: 
                          children:
                            - .VitalSignsText: 
                              text: "Temperature"
                            - .VitalSignsTextField: 
                              placeholder: "Enter here"
                        - .VitalSignsView: 
                          children:
                            - .VitalSignsText: 
                              text: "Height(ft.in.)"
                            - .VitalSignsTextField: 
                        - .VitalSignsView: 
                          children:
                            - .VitalSignsText: 
                              text: "Weight(Ibs)"
                            - .VitalSignsTextField: 
                              placeholder: "Enter here"
                        - .VitalSignsView:
                          children:
                            - .VitalSignsText: 
                              text: "Body Mass Index(BMI)"
                            - .VitalSignsTextField: 
                              placeholder: "Enter here"
                        - .VitalSignsView: 
                          children:
                            - .VitalSignsText: 
                              text: "Blood Glucose levels"
                            - .VitalSignsTextField: 
                              placeholder: "Enter here"
                        - type: button
                          text: Confirm
                          style:
                            width: "0.1"
                            marginLeft: "0.132"
                            height: "0.04"
                            marginTop: "0.03"
                            color: "0xffffff"
                            fontSize: .Nfont.nf2
                            border: 
                              style: "3"
                            borderWidth: "1"
                            borderColor: "0x1263a8"
                            borderRadius: "5"
                            backgroundColor: "0x1263a8"
                            textAlign:
                              x: center
                              y: center
                # Patient Chart
                - type: popUp
                  viewTag: patientChartView
                  style: 
                    left: '0.41'
                    width: "0.39"
                    top: "0"
                    height: "0.64"
                    zIndex: "10"
                    border: 
                      style: "3"
                    borderWidth: "1"
                    borderColor: "0xeff0f2"
                    borderRadius: "5"
                    boxSizing: border-box
                    backgroundColor: "0xeff0f2"  
                  children: 
                    - type: label
                      text: Patient Chart
                      dataKey: 
                      style:
                        left: "0.013"
                        width: "0.36"
                        textIndent: "1em"
                        marginTop: "0.01"
                        fontSize: .Nfont.nf4
                        fontFamily: "Roboto"
                        fontWeight: "500"         
                    - type: scrollView
                      style:
                        left: "0.013"
                        width: "0.364"
                        marginTop: "0.015"
                        height: "0.565"
                        border: 
                          style: "5"
                        borderWidth: "1"
                        borderColor: "0xffffff"
                        borderRadius: "3"
                        boxSizing: border-box
                        backgroundColor: "0xffffff"
                      children:     
                        - .PatientChartTitle: 
                          text: "General Information"
                        - type: view
                          style:
                            width: "0.34"
                            height: auto
                            left: "0.017"
                            # border:
                            #   style: "2"
                            # borderWidth: "2"
                            # borderColor: "#bfbfbf"
                          children:
                            - .PatientChartShowLine:
                              children:
                                - .PatientChartShowTitle:
                                  text: First name
                                - .PatientChartShowData:
                                  dataKey: formData.patientChart.name.data.generalInfo.firstName
                            - .PatientChartShowLine:
                              children:
                                - .PatientChartShowTitle:
                                  text: Middle name or initial
                                - .PatientChartShowData:
                                  dataKey: formData.patientChart.name.data.generalInfo.middleNameAndInitial
                            - .PatientChartShowLine:
                              children:
                                - .PatientChartShowTitle:
                                  text: Last name
                                - .PatientChartShowData:
                                  dataKey: formData.patientChart.name.data.generalInfo.lastName
                            - .PatientChartShowLine:
                              children:
                                - .PatientChartShowTitle:
                                  text: Preferred name
                                - .PatientChartShowData:
                                  dataKey: formData.patientChart.name.data.generalInfo.preferredName
                            - .PatientChartShowLine:
                              children:
                                - .PatientChartShowTitle:
                                  text: Gender
                                - .PatientChartShowData:
                                  dataKey: formData.patientChart.name.data.generalInfo.gender
                            - .PatientChartShowLine:
                              children:
                                - .PatientChartShowTitle:
                                  text: Date of birth
                                - .PatientChartShowData:
                                  dataKey: formData.patientChart.name.data.generalInfo.dateOfBirth
                            - .PatientChartShowLine:
                              children:
                                - .PatientChartShowTitle:
                                  text: Occupation
                                - .PatientChartShowData:
                                  dataKey: formData.patientChart.name.data.generalInfo.occupation
                            - .PatientChartShowLine:
                              children:
                                - .PatientChartShowTitle:
                                  text: Relationship status
                                - .PatientChartShowData:
                                  dataKey: formData.patientChart.name.data.generalInfo.relationshipStatus
                            - .PatientChartShowLine:
                              children:
                                - .PatientChartShowTitle:
                                  text: Primary Care Physician
                                - .PatientChartShowData:
                                  dataKey: formData.patientChart.name.data.generalInfo.primaryCarePhysician
                            - .PatientChartShowLine:
                              children:
                                - .PatientChartShowTitle:
                                  text: Primary Care clinic
                                - .PatientChartShowData:
                                  dataKey: formData.patientChart.name.data.generalInfo.primaryCareClinic

                        - .PatientChartTitle: 
                          text: Past Medical History
                        - .PatientChartListView:
                          children:   
                            - type: list
                              contentType: listObject
                              listObject: ..formData.patientChart.name.data.pastMedicalHistory # to dataObject to enumerate the list
                              iteratorVar: itemObject
                              style: 
                                width: "0.34"
                                height: "auto"
                                left: "0.01"
                                margin: "0"
                                # marginBottom: "0.02"
                                # marginTop: "0.01"
                              children: 
                                - type: listItem
                                  itemObject: ""
                                  style:
                                    width: "0.33" 
                                    height: "0.03"
                                  children:
                                    - type: label
                                      text: '-'
                                      style: 
                                        top: "0"
                                        width: "0.05"
                                        fontSize: .Nfont.nf2
                                    - type: label
                                      # text: badsa fsa 
                                      dataKey: itemObject
                                      style: 
                                        marginLeft: "0.01"
                                        top: "0"
                                        width: "0.25"
                                        fontSize: .Nfont.nf2
                        - .PatientChartTitle: 
                          text: "Allergies"
                        - type: view
                          style: 
                            width: "0.34"
                            height: "0.03"
                            left: "0.017"
                            textAlign: 
                              y: center
                          children:   
                            - type: label
                              text: Allergen/Irritant
                              style:
                                fontSize: .Nfont.nf2
                                fontWeight: "500"
                                textAlign: 
                                  x: center
                                width: "0.17"
                                display: inline-block
                            - type: label
                              text: What happens       
                              style:
                                fontSize: .Nfont.nf2
                                fontWeight: "500"
                                textAlign: 
                                  x: center
                                width: "0.17"
                                display: inline-block
                        - .PatientChartListView:
                          children:   
                            - type: list
                              contentType: listObject
                              listObject: ..formData.patientChart.name.data.allergies # to dataObject to enumerate the list
                              iteratorVar: itemObject
                              style: 
                                width: "0.34"
                                height: "auto"
                                left: "0"
                                margin: "0"
                                # marginBottom: "0.02"
                              children: 
                                - type: listItem
                                  itemObject: ""
                                  style:
                                    width: "0.34" 
                                    height: "0.03"
                                    left: "0"
                                  children:
                                    - type: label
                                      dataKey: itemObject.allergy
                                      style: 
                                        fontSize: .Nfont.nf2
                                        textAlign: 
                                          x: center
                                        width: "0.17"
                                        display: inline-block
                                    - type: label
                                      # text: badsa fsa 
                                      dataKey: itemObject.happen
                                      style: 
                                        fontSize: .Nfont.nf2
                                        textAlign: 
                                          x: center
                                        width: "0.17"
                                        display: inline-block
                        - .PatientChartTitle: 
                          text: Current Medications
                        - type: view
                          style: 
                            width: "0.34"
                            left: "0.017"
                            height: "0.03"
                            textAlign: 
                              y: center
                          children:   
                            - type: label
                              text: Name
                              style:
                                fontSize: .Nfont.nf2
                                display: inline-block
                                fontWeight: "500"
                                textAlign: 
                                  x: center
                                width: "0.085"
                            - type: label
                              text: Strength
                              style:
                                fontSize: .Nfont.nf2
                                display: inline-block
                                fontWeight: "500"
                                textAlign: 
                                  x: center
                                width: "0.085"
                            - type: label
                              text: Amount
                              style:
                                fontSize: .Nfont.nf2
                                display: inline-block
                                fontWeight: "500"
                                textAlign: 
                                  x: center
                                width: "0.085"
                            - type: label
                              text: Frequency
                              style:
                                fontSize: .Nfont.nf2
                                display: inline-block
                                fontWeight: "500"
                                textAlign: 
                                  x: center
                                width: "0.085"
                        - .PatientChartListView:
                          children:   
                            - type: list
                              contentType: listObject
                              listObject: ..formData.patientChart.name.data.currentMedications # to dataObject to enumerate the list
                              iteratorVar: itemObject
                              style: 
                                width: "0.9"
                                height: "auto"
                                left: "0"
                              children: 
                                - type: listItem
                                  itemObject: ""
                                  style:
                                    width: "0.9" 
                                    height: "0.03"
                                    left: "0"
                                  children:
                                    - type: label
                                      dataKey: itemObject.name
                                      style: 
                                        fontSize: .Nfont.nf2
                                        display: inline-block
                                        textAlign: 
                                          x: center
                                        width: "0.085"
                                    - type: label
                                      # text: badsa fsa 
                                      dataKey: itemObject.strength
                                      style: 
                                        fontSize: .Nfont.nf2
                                        display: inline-block
                                        textAlign: 
                                          x: center
                                        width: "0.085" 
                                    - type: label
                                      dataKey: itemObject.amount
                                      style: 
                                        fontSize: .Nfont.nf2
                                        display: inline-block
                                        textAlign: 
                                          x: center
                                        width: "0.085" 
                                    - type: label
                                      # text: badsa fsa 
                                      dataKey: itemObject.frequency
                                      style: 
                                        fontSize: .Nfont.nf2
                                        display: inline-block
                                        textAlign: 
                                          x: center
                                        width: "0.085"
                        - .PatientChartTitle: 
                          text: Immunizations
                        - type: view
                          style: 
                            width: "0.34"
                            left: "0.017"
                            height: "0.03"
                            textAlign: 
                              y: center
                          children:   
                            - type: label
                              text: Name
                              style:
                                fontSize: .Nfont.nf2
                                display: inline-block
                                fontWeight: "500"
                                textAlign: 
                                  x: center
                                width: "0.085"
                            - type: label
                              text: 1st Dose
                              style:
                                fontSize: .Nfont.nf2
                                display: inline-block
                                fontWeight: "500"
                                textAlign: 
                                  x: center
                                width: "0.085"
                            - type: label
                              text: 2st Dose
                              style:
                                fontSize: .Nfont.nf2
                                display: inline-block
                                fontWeight: "500"
                                textAlign: 
                                  x: center
                                width: "0.085"
                            - type: label
                              text: Recent
                              style:
                                fontSize: .Nfont.nf2
                                display: inline-block
                                fontWeight: "500"
                                textAlign: 
                                  x: center
                                width: "0.085"
                        - .PatientChartListView:
                          children:   
                            - type: list
                              contentType: listObject
                              listObject: ..formData.patientChart.name.data.immunizations # to dataObject to enumerate the list
                              # 
                              iteratorVar: itemObject
                              style: 
                                width: "0.34"
                                height: "auto"
                                left: "0"
                              children: 
                                - type: listItem
                                  itemObject: ""
                                  style:
                                    width: "0.34" 
                                    height: "0.03"
                                    left: "0"
                                  children:
                                    - type: label
                                      dataKey: itemObject.name
                                      style: 
                                        fontSize: .Nfont.nf2
                                        display: inline-block
                                        textAlign: 
                                          x: center
                                        width: "0.085"
                                    - type: label
                                      # text: badsa fsa 
                                      dataKey: itemObject.firstDose
                                      style: 
                                        fontSize: .Nfont.nf2
                                        display: inline-block
                                        textAlign: 
                                          x: center
                                        width: "0.085" 
                                    - type: label
                                      dataKey: itemObject.secondDose
                                      style: 
                                        fontSize: .Nfont.nf2
                                        display: inline-block
                                        textAlign: 
                                          x: center
                                        width: "0.085" 
                                    - type: label
                                      # text: badsa fsa 
                                      dataKey: itemObject.mostRecent
                                      style: 
                                        fontSize: .Nfont.nf2
                                        display: inline-block
                                        textAlign: 
                                          x: center
                                        width: "0.085"  
                        - .PatientChartTitle: 
                          text: "Hospitalizations"
                        - type: view
                          style: 
                            width: "0.34"
                            height: "0.03"
                            left: "0.017"
                            textAlign: 
                              y: center
                          children:   
                            - type: label
                              text: Date
                              style:
                                fontSize: .Nfont.nf2
                                # fontWeight: "500"
                                fontWeight: "500"
                                textAlign: 
                                  x: center
                                width: "0.17"
                                display: inline-block
                            - type: label
                              text: Reason
                              style:
                                fontSize: .Nfont.nf2
                                # fontWeight: "500"
                                fontWeight: "500"
                                textAlign: 
                                  x: center
                                width: "0.17"
                                display: inline-block
                        - .PatientChartListView:
                          children:   
                            - type: list
                              contentType: listObject
                              listObject: ..formData.patientChart.name.data.hospitalizations # to dataObject to enumerate the list
                              iteratorVar: itemObject
                              style: 
                                width: "0.34"
                                height: "auto"
                                left: "0"
                                margin: "0"
                                # marginBottom: "0.02"
                              children: 
                                - type: listItem
                                  itemObject: ""
                                  style:
                                    width: "0.34" 
                                    height: "0.03"
                                    left: "0"
                                  children:
                                    - type: label
                                      dataKey: itemObject.date
                                      style: 
                                        fontSize: .Nfont.nf2
                                        textAlign: 
                                          x: center
                                        width: "0.17"
                                        display: inline-block
                                    - type: label
                                      # text: badsa fsa 
                                      dataKey: itemObject.reason
                                      style: 
                                        fontSize: .Nfont.nf2
                                        textAlign: 
                                          x: center
                                        width: "0.17"
                                        display: inline-block                                                  
                        - .PatientChartTitle: 
                          text: " Surgical History"
                        - type: view
                          style: 
                            width: "0.34"
                            height: "0.03"
                            left: "0.017"
                            textAlign: 
                              y: center
                          children:   
                            - type: label
                              text: Date
                              style:
                                fontSize: .Nfont.nf2
                                # fontWeight: "500"
                                fontWeight: "500"
                                textAlign: 
                                  x: center
                                width: "0.17"
                                display: inline-block
                            - type: label
                              text: Reason
                              style:
                                fontSize: .Nfont.nf2
                                # fontWeight: "500"
                                fontWeight: "500"
                                textAlign: 
                                  x: center
                                width: "0.17"
                                display: inline-block
                        - .PatientChartListView:
                          children:   
                            - type: list
                              contentType: listObject
                              listObject: ..formData.patientChart.name.data.surgicalHistory # to dataObject to enumerate the list
                              iteratorVar: itemObject
                              style: 
                                width: "0.34"
                                height: "auto"
                                left: "0"
                                margin: "0"
                                # marginBottom: "0.02"
                              children: 
                                - type: listItem
                                  itemObject: ""
                                  style:
                                    width: "0.34" 
                                    height: "0.03"
                                    left: "0"
                                  children:
                                    - type: label
                                      dataKey: itemObject.date
                                      style: 
                                        fontSize: .Nfont.nf2
                                        textAlign: 
                                          x: center
                                        width: "0.17"
                                        display: inline-block
                                    - type: label
                                      # text: badsa fsa 
                                      dataKey: itemObject.reason
                                      style: 
                                        fontSize: .Nfont.nf2
                                        textAlign: 
                                          x: center
                                        width: "0.17"
                                        display: inline-block 
                        - .PatientChartTitle: 
                          text: Family History
                        - .PatientChartListView:
                          children:   
                            - type: list
                              contentType: listObject
                              listObject: ..formData.patientChart.name.data.familyHistory # to dataObject to enumerate the list
                              iteratorVar: itemObject
                              style: 
                                width: "0.34"
                                height: "auto"
                                left: "0.01"
                                margin: "0"
                                # marginBottom: "0.02"
                                # marginTop: "0.01"
                              children: 
                                - type: listItem
                                  itemObject: ""
                                  style:
                                    width: "0.33" 
                                    height: "0.03"
                                  children:
                                    - type: label
                                      text: '-'
                                      style: 
                                        top: "0"
                                        width: "0.05"
                                        fontSize: .Nfont.nf2
                                    - type: label
                                      # text: badsa fsa 
                                      dataKey: itemObject
                                      style: 
                                        marginLeft: "0.01"
                                        top: "0"
                                        width: "0.25"
                                        fontSize: .Nfont.nf2
                        - .PatientChartTitle: 
                          text: Obstetrical History
                        - .PatientChartView:
                          children: 
                            - .PatientChartLittleTitle: 
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText: 
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.obstetricalHistory.pregnancy.currentlyPregnant
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText:
                                  text: How many times have you been pregnant?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.obstetricalHistory.pregnancy.pregnantsTimes
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText: 
                                  text: How many children?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.obstetricalHistory.pregnancy.children
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText:
                                  text: How many abortions? 
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.obstetricalHistory.pregnancy.abortionsTime
                            - .PatientChartLittleTitle: 
                              text: Menses
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText: 
                                  text: How often?
                                - .PatientChartLittleData:
                                  dataKey: formData.patientChart.name.data.obstetricalHistory.menses.howOften
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText:
                                  text: For how many days?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.obstetricalHistory.menses.howlong
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText: 
                                  text: Do they occur every month?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.obstetricalHistory.menses.isEveryMonth
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText: 
                                  text: Heavy flow?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.obstetricalHistory.menses.isHeavyFlow
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText:
                                  text: Any spotting or clots?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.obstetricalHistory.menses.spottingOrClots
                            - .PatientChartLittleTitle: 
                              text: Mammogram
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText: 
                                  text: Have you had a mammogram?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.obstetricalHistory.mammogram.haveMammogram
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText:
                                  text: When was the last one?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.obstetricalHistory.mammogram.lastTime
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText: 
                                  text: Ever have an abnormal result?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.obstetricalHistory.mammogram.abnormalResult
                            - .PatientChartLittleView:  
                              children: 
                                - .PatientChartLittleText:
                                  text: If yes, please describe?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.obstetricalHistory.mammogram.abnormalResultDescribe
                  
                        - .PatientChartTitle: 
                          text: Sexual History
                        - .PatientChartView:
                          children: 
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText: 
                                  text: Are you sexually active?
                                - .PatientChartLittleData: 
                                  style: 
                                    textAlign: 
                                      x: right
                                  dataKey: formData.patientChart.name.data.sexualHistoryDM.sexuallyActive
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText:
                                  text: Use condoms for protection?
                                - .PatientChartLittleData: 
                                  style: 
                                    textAlign: 
                                      x: right
                                  dataKey: formData.patientChart.name.data.sexualHistoryDM.useCondom
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText: 
                                  text: History of STD(s)?
                                - .PatientChartLittleData: 
                                  style: 
                                    textAlign: 
                                      x: right
                                  dataKey: formData.patientChart.name.data.sexualHistoryDM.STDSHistory
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText:
                                  text: Are you currently on birth control?
                                - .PatientChartLittleData: 
                                  style: 
                                    textAlign: 
                                      x: right
                                  dataKey: formData.patientChart.name.data.sexualHistoryDM.birthControl
                            - .PatientChartLittleTitle: 
                              text: Pap smear
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText: 
                                  text: Have you had a pap smear?
                                - .PatientChartLittleData:
                                  style: 
                                    textAlign: 
                                      x: right
                                  dataKey: formData.patientChart.name.data.sexualHistoryDM.papSmear.havePapSmear
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText:
                                  text: When was the last one?
                                - .PatientChartLittleData: 
                                  style: 
                                    textAlign: 
                                      x: right
                                  dataKey: formData.patientChart.name.data.sexualHistoryDM.papSmear.lastTime
                            - .PatientChartLittleView: 
                              style: 
                                marginBottom: "0.02"
                              children: 
                                - .PatientChartLittleText:
                                  text: Ever have an abnormal result?
                                - .PatientChartLittleData:
                                  style: 
                                    textAlign: 
                                      x: right 
                                  dataKey: formData.patientChart.name.data.sexualHistoryDM.papSmear.abnormalResult
                        - .PatientChartTitle: 
                          text: Socical History
                        - .PatientChartView:
                          children: 
                            - .PatientChartLittleTitle: 
                              text: Alcohol
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText: 
                                  text: Do you drink?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.socialHistory.alcohol.drink
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText:
                                  text: What type?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.socialHistory.alcohol.types
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText:
                                  text: How many drinks per week?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.socialHistory.alcohol.timesPerWeek
                            - .PatientChartLittleTitle: 
                              text: Tobacco
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText: 
                                  text: Do you currently use tobacco?
                                - .PatientChartLittleData:
                                  dataKey: formData.patientChart.name.data.socialHistory.tobacco.currently
                            - .PatientChartLittleTitle: 
                              text: Caffeine
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText: 
                                  text: Do you have caffeine?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.socialHistory.caffeine.haveCaffeine
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText:
                                  text: What type?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.socialHistory.caffeine.types
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText:
                                  text: How many drinks per week?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.socialHistory.caffeine.timesPreDay
                            - .PatientChartLittleTitle: 
                              text: Recreational Drugs
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText: 
                                  text: Do you use illicit drugs?
                                - .PatientChartLittleData:
                                  dataKey: formData.patientChart.name.data.socialHistory.recreationalDrug.haveIllicitDrugs   
                            - .PatientChartLittleTitle: 
                              text: Exerise
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText:
                                  text: Do you exercise?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.socialHistory.exercise.haveExercise
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText: 
                                  text: What type?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.socialHistory.exercise.type
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText: 
                                  text: How many days per week?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.socialHistory.exercise.daysPerWeek
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText:
                                  text: How many hours per day?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.socialHistory.exercise.hoursPerDay     
                            - .PatientChartLittleTitle: 
                              text: Nutrition/Diet
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText: 
                                  text: Do you follow a diet?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.socialHistory.nutrition.haveDiet
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText:
                                  text: What type?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.socialHistory.nutrition.type
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText:
                                  text: How many meals on average per day?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.socialHistory.nutrition.mealsPerDay
                            - .PatientChartLittleTitle: 
                              text: Personal Safety
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText: 
                                  text: Do you live alone?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.socialHistory.personalSafety.liveAlone
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText:
                                  text: Do you frequently fall?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.socialHistory.personalSafety.frequentlyFall
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText: 
                                  text: Need assistance walking?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.socialHistory.personalSafety.needAssistanceWalking
                            - .PatientChartLittleView: 
                              children: 
                                - .PatientChartLittleText:
                                  text: Have you ever been abused?
                                - .PatientChartLittleData: 
                                  dataKey: formData.patientChart.name.data.socialHistory.personalSafety.abused
                            - .PatientChartLittleView: 
                              style: 
                                marginBottom: "0.01"
                              children: 
                                - .PatientChartLittleText:
                                  text: Do you wear a seatbelt?
                                - .PatientChartLittleData:
                                  dataKey: formData.patientChart.name.data.socialHistory.personalSafety.seatBelt
                        - type: view
                          style:
                            height: "0.06"
                            marginTop: "0.03"
                          children: 
                            - type: button
                              text: Confirm
                              style:
                                width: "0.1"
                                marginLeft: "0.132"
                                height: "0.04"
                                color: "0xffffff"
                                fontSize: .Nfont.nf2
                                border: 
                                  style: "3"
                                borderWidth: "1"
                                borderColor: "0x1263a8"
                                borderRadius: "5"
                                backgroundColor: "0x1263a8"
                                textAlign:
                                  x: center
                                  y: center                                  
                # provider notes
                - type: popUp
                  viewTag: providerNotesView
                  style: 
                    left: '0.41'
                    width: "0.39"
                    top: "0"
                    height: "0.64"
                    zIndex: "10"
                    border: 
                      style: "3"
                    borderWidth: "1"
                    borderColor: "0xeff0f2"
                    borderRadius: "5"
                    boxSizing: border-box
                    backgroundColor: "0xeff0f2"    
                  children: 
                    - type: label
                      text: Provider Notes
                      dataKey: 
                      style:
                        left: "0.013"
                        width: "0.36"
                        textIndent: "1em"
                        marginTop: "0.01"
                        fontSize: .Nfont.nf4
                        fontFamily: "Roboto"
                        fontWeight: "500"
                    - type: view
                      onClick: 
                        - goto: AddMedicalDocument
                      style:
                        left: "0.013"
                        marginTop: "0.01"
                        width: "0.364"
                        height: "0.055"
                        backgroundColor: "0xffffff"
                        borderRadius: "5" 
                        display: flex
                        justifyContent: center
                        alignItems: center
                      children: 
                        - type: image
                          path: addCircleBlue.svg
                          style:
                            width: "0.01"
                        - type: label
                          text: Add Documents
                          dataKey: 
                          style:
                            marginLeft: "0.01"
                            color: "0x2988e6"
                            fontSize: .Nfont.nf2
                            fontFamily: "Roboto"
                    - type: scrollView
                      style:
                        left: "0.013"
                        width: "0.364"
                        marginTop: "0.015"
                        height: "0.505"
                        border: 
                          style: "5"
                        borderWidth: "1"
                        borderColor: "0xffffff"
                        borderRadius: "3"
                        boxSizing: border-box
                        backgroundColor: "0xffffff"
                      children: 
                        - type: list
                          contentType: listObject
                          listObject: ..formDataTemp.notesList
                          iteratorVar: itemObject
                          style:
                            width: '0.334'
                            left: "0.015"
                            margin: '0'
                            height: auto
                          children:
                            - type: listItem
                              onClick: 
                                - emit: 
                                    dataKey: 
                                      var: itemObject
                                    actions: 
                                      - if: 
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: "Cov19ResultsAndFluResultsEdit"
                                              string2: $var.pageName
                                        - goto: $var.pageName
                                        - continue
                              itemObject: 
                              style:
                                width: '0.334'
                                height: '0.08'
                                border: 
                                  style: "2"
                                borderWidth: "1"
                                borderColor: "0xd4d4d4"
                                marginTop: ''
                                textAlign: 
                                  y: center
                              children:
                                - type: label
                                  text: 
                                  dataKey: itemObject.title
                                  style:
                                    width: "0.30"
                                    display: inline-block
                                - type: image
                                  path: enterInLi.svg
                                  style:
                                    width: "0.007"
                                    display: inline-block

                # Medical Documents
                - type: popUp
                  viewTag: medicalDocumentsView
                  style: 
                    left: '0.41'
                    width: "0.39"
                    top: "0"
                    height: "0.64"
                    zIndex: "10"
                    border: 
                      style: "3"
                    borderWidth: "1"
                    borderColor: "0xeff0f2"
                    borderRadius: "5"
                    boxSizing: border-box
                    backgroundColor: "0xeff0f2"    
                  children: 
                    - type: view
                      style:
                        width: "0.364"
                        marginTop: "0.01"
                        left: "0.013"
                        display: flex
                        justifyContent: space-around
                        alignItems: center
                      children: 
                        - type: label
                          text: Medical Document
                          dataKey: 
                          style:                                
                            width: "0.324"
                            left: "0.004"
                            # marginTop: "0.01"
                            fontSize: .Nfont.nf4
                            fontFamily: "Roboto"
                            fontWeight: "500"
                        - type: view
                          onClick: 
                            - goto: AddMedicalDocument
                          style:
                            width: "0.03"
                            display: flex
                            justifyContent: space-around
                            alignItems: center
                          children: 
                            - type: image
                              path: addBlue.png
                              style:
                                width: "0.008"
                                display: inline-block
                            - type: label
                              text: Add
                              dataKey: 
                              style:
                                marginLeft: "0.005"
                                color: "0x2988e6"
                                display: inline-block
                    - type: scrollView
                      style:
                        left: "0.013"
                        width: "0.364"
                        marginTop: "0.015"
                        height: "0.56"
                        border: 
                          style: "5"
                        borderWidth: "1"
                        borderColor: "0xffffff"
                        borderRadius: "3"
                        boxSizing: border-box
                        backgroundColor: "0xffffff"
                      children: 
                        - type: list
                          contentType: listObject
                          listObject: ..formDataTemp.assignType
                          iteratorVar: itemObject
                          style:
                            margin: '0'
                            width: "0.334"
                            left: "0.015"
                            marginTop: "0.015"
                            height: "0.04"
                            axis: horizontal
                            alignItems: center
                          children:
                            - type: listItem
                              itemObject: 
                              style:
                                height: '0.025'
                                marginRight: "0.01"
                                marginTop: ''
                                backgroundColor: itemObject.backgroundColor
                                border: 
                                  style: "3"
                                borderWidth: "1"
                                borderRadius: "3"
                                borderColor: itemObject.borderColor
                                boxSizing: border-box
                                color: itemObject.textColor
                                textAlign:  
                                  y: center
                              onClick:
                                - emit:
                                    dataKey:
                                      var: itemObject
                                    actions:  
                                      - =.builtIn.object.setProperty:
                                          dataIn:
                                            obj: =..formDataTemp.assignType
                                            label: "text"
                                            text: $var.text
                                            arr: ["borderColor"]
                                            valueArr: $var.textColor
                                            errorArr: ["0x00000000"]                                       
                                      - =.builtIn.array.filterByTag:
                                          dataIn:
                                            sourceDoc: =..apiRequest.medicalDocuments.docResp.doc
                                            tagCategory: $var.tagCategory
                                            tagName: $var.value
                                          dataOut: PatientSummaryRoom.formData.medicalDocuments
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: assignTypeTag                                 
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: medicalDocumentsListTag
                              children:
                                - type: label
                                  text: 
                                  dataKey: itemObject.text
                                  style:
                                    marginLeft: "0.005"
                                    marginRight: "0.005"
                                    fontSize: .Nfont.nf2
                        - type: list
                          contentType: listObject
                          listObject: ..formData.medicalDocuments
                          iteratorVar: itemObject
                          viewTag: medicalDocumentsListTag
                          style:
                            width: '0.334'
                            left: "0.015"
                            margin: '0'
                            height: auto
                          children:
                            - type: listItem
                              onClick: 
                                - actionType: updateObject
                                  dataKey: Global.formData.medicalRecords
                                  dataObject: itemObject                                  
                                - emit: 
                                    dataKey: 
                                      var: itemObject
                                    actions: 
                                      - .Global.formData.reviewFromProvider@: false
                                      - goto: $var.pageName
                              itemObject: 
                              style:
                                width: '0.334'
                                height: '0.08'
                                border: 
                                  style: "2"
                                borderWidth: "1"
                                borderColor: "0xd4d4d4"
                                marginTop: ''
                                display: flex
                                flexDirection: column
                                justifyContent: center
                              children:
                                - type: view
                                  style:
                                    width: "0.334"
                                  children: 
                                    - type: label
                                      text: 
                                      dataKey: itemObject.name.title
                                      style:
                                        width: "0.30"
                                        display: inline-block
                                        fontSize: .Nfont.nf3
                                - type: view
                                  style:
                                    marginLeft: "0.02"
                                    height: "2.5vh"
                                    width: "0.11"
                                    left: "0.203"
                                    top: "0.017"
                                    display: flex
                                    justifyContent: space-between
                                    alignItems: center
                                    overflow: hidden
                                  children:
                                    - type: label
                                      dataKey: itemObject.name.data.classTag.name
                                      style:
                                        height: "0.028"
                                        width: "0.06"
                                        color: itemObject.name.data.classTag.fontColor
                                        fontFamily: "Poppins"
                                        fontSize: .Nfont.nf0
                                        backgroundColor: itemObject.name.data.classTag.backgroundColor
                                        borderRadius: "5"
                                        textAlign:
                                          x: center
                                          y: center
                                    - type: label
                                      dataKey: itemObject.name.data.statusTag.name
                                      style:
                                        display: itemObject.name.data.statusTag.display
                                        height: "0.028"
                                        width: "0.04"
                                        color: itemObject.name.data.statusTag.fontColor
                                        fontFamily: "Poppins"
                                        fontSize: .Nfont.nf0
                                        borderRadius: "5"
                                        backgroundColor: itemObject.name.data.statusTag.backgroundColor
                                        textAlign:
                                          x: center
                                        lineHeight: "2"

                                - type: view
                                  style:
                                    marginTop: "0.005"
                                    width: "0.334"
                                    display: flex
                                    justifyContent: space-between
                                    alignItems: center
                                  children: 
                                    - type: label
                                      text: Lisa Lee M.D.
                                      dataKey: itemObject.name.user
                                      style:
                                        fontSize: .Nfont.nf2
                                    - type: label
                                      text=func: .builtIn.string.formatUnixtime_en
                                      dataKey: itemObject.ctime
                                      style:
                                        color: "0x666666"
                                        fontSize: .Nfont.nf1


        - .BasePopUp:
          viewTag: ProviderListTag
          style: 
            zIndex: "1000"
          children:
            - .PopUphead:
              style: 
                left: "0.6"
              children:
                - .CreateLabel:
                  text: 'Invite'
                - .Closebutton:
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: ProviderListTag    
            - type: view
              style:
                height: '0.92'
                width: '0.4'
                left: "0.6"
                top: '0.08'
                backgroundColor: '0xffffff'
              viewTag: ProviderDataTag
              children:
                - type: view
                  style: 
                    left: "0.03"
                    width: "0.34"
                    top: "0.02"
                    height: "0.04"
                    border: 
                      style: "3"
                    borderWidth: "1"
                    borderColor: "0xbbbbbb"
                    borderRadius: "10"
                  children: 
                    - type: textField
                      placeholder: Search
                      style: 
                        left: "0.007"
                        width: "0.2"
                        top: "0"
                        height: "0.038"
                        fontSize: .Nfont.nf2
                        border: 
                          style: "1"
                    - type: button
                      text: Search
                      style: 
                        left: "0.28"
                        width: "0.06"
                        height: "0.04"
                        fontSize: .Nfont.nf2
                        color: "0xffffff"
                        backgroundColor: "0x2988e6"
                        border: 
                          style: "3"
                        borderWidth: "1"
                        borderColor: "0x2988e6"
                        borderRadius: "10"
                - type: label
                  text: Provider List
                  style: 
                    left: "0.03"
                    width: "0.34"
                    top: "0.08"
                    height: "0.04"
                    fontSize: .Nfont.nf4
                    fontFamily: sans-serif
                    fontWeight: "500"
                    textAlign: 
                      y: center
                - type: scrollView
                  style:
                    width: '0.36'
                    height: '0.78'  
                    top: '0.12'   
                    left: '0.02'
                    overflow: scroll
                  children:
                    - .BaseList:
                      listObject: ..providerList.list.doc
                      style:
                        width: '0.36'
                        height: "auto" 
                        display: flex
                        margin: "0"
                      children:
                        - .BaseListItem:
                          style:
                            height: '0.05'
                            width: '0.36'
                            display: inline-block
                            border: 
                              style: "2"
                            borderWidth: "1"
                            borderColor: "0xbbbbbb"
                          onClick:
                            - actionType: evalObject
                              object:
                                - ..afterAgree.edgeResp@: []
                            - emit:
                                dataKey:
                                  var: itemObject
                                actions:
                                  - ..apiRequest.inviteParticipant.edge.evid@: $var.bsig
                                  - ..apiRequest.inviteParticipant.edge.refid@: =..inMeeting.docResponse.edge.0.id
                                  - ..apiRequest.inviteParticipant.edge.stime@: =..inMeeting.docResponse.edge.0.stime
                                  - ..apiRequest.inviteParticipant.edge.etime@: =..inMeeting.docResponse.edge.0.etime
                                  - ..apiRequest.inviteParticipant.edge.name.role@: "Provider"
                                  - ..apiRequest.inviteParticipant.edge.name.roleName@: $var.name.data.fullName
                                  - =..apiRequest.inviteParticipant.edgeAPI.store: ""
                            - actionType: evalObject
                              object: 
                                .Global._nonce@: 
                                  =.builtIn.math.random: "" 
                            - actionType: evalObject
                              object:
                                - ..apiRequest.inviteParticipant.edgeGetResp.edge@: []
                                - =..apiRequest.inviteParticipant.edgeAPI.get: "" 
                            - actionType: popUpDismiss
                              popUpView: ProviderListTag
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: participantsView
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: providerInfo2Tag
                            - actionType: popUp
                              popUpView: inviteSuccessView
                          children:
                            - .Label1:
                              dataKey: itemObject.name.data.fullName
                              style: 
                                height: '0.05'
                                textAlign:
                                  y: center
                                left: '0.04'
                                fontSize: .Nfont.nf1
                            - .Label1:
                              text=func: .builtIn.string.formatUnixtimeL_en
                              dataKey: itemObject.ctime
                              style:
                                top: "0"  
                                height: '0.05'
                                textAlign:
                                  y: center
                                left: '0.25'
                                fontSize: .Nfont.nf1

        # Change Appointment
        - type: popUp
          style:
            top: "0"
            left: "0"
            height: "1"
            width: "1"
            zIndex: "1000"
          viewTag: appointmentChangeTag
          children:
            - .PopUphead:
              style:
                left: '0.6'
              children:
                - .CreateLabel:
                  text: Change Appointment
                - .Closebutton:
                  onClick:
                    - .BaseDate.calendarDate.minidayLable@: []
                    - actionType: popUpDismiss
                      popUpView: appointmentChangeTag

            - type: view
              style:
                height: '0.92'
                width: '0.4'
                top: '0.08'
                left: '0.6'
                backgroundColor: '0xffffff'
                boxShadow: "-10px -5px 2px -6px #cccccc"
              children:
                - type: view
                  style:
                    marginTop: "0.03"
                    left: "0.06"
                    width: "0.28"
                    height: "0.26"
                  children:
                    - type: label
                      text: Please complete the fields below
                      style:
                        width: "0.28"
                        marginTop: '0.01'
                        fontSize: .Nfont.nf4
                        fontWeight: "500"
                    - type: view
                      style:
                        marginTop: "0.03"
                        width: "0.28"
                        height: "0.08"
                      children:
                        - type: label
                          text: Room
                          style:
                            top: "0"
                            width: "0.082"
                            # width: "0.1315"
                            fontSize: .Nfont.nf2
                            fontWeight: "600"
                        - type: textField
                          dataKey: dataObject.name.roomName
                          isEditable: "false"
                          style:
                            marginTop: "0.025"
                            width: "0.082"
                            # width: "0.1315"
                            fontSize: .Nfont.nf0
                            borderRadius: "5" 
                            border:
                              style: "3"
                            borderColor: "0xf4f4f4"
                            height: '0.042'
                            textIndent: 2em
                            boxSizing: border-box
                        # TYPE
                        - type: label
                          text: Appointment Type
                          style:
                            top: "0"
                            left: "0.099"
                            width: "0.082"
                            # left: "0.1485"
                            # width: "0.1315"                            
                            fontSize: .Nfont.nf2
                            fontWeight: "600"
                        - type: textField
                          dataKey: dataObject.name.visitType
                          isEditable: "false"
                          style:
                            marginTop: "0.025"
                            width: "0.082"
                            # width: "0.1315" 
                            marginLeft: "0.017"
                            fontSize: .Nfont.nf0
                            borderRadius: "5" 
                            border:
                              style: "3"
                            borderColor: "0xf4f4f4"
                            height: '0.042'
                            textIndent: 2em
                            boxSizing: border-box
                        # ADDRESS
                        - type: view
                          style: 
                            left: "0.198"
                            top: '0'
                            width: '0.082'
                            height: 'auto'
                            # display: none
                          children: 
                            - type: label
                              text: Address
                              style: 
                                top: "0"
                                width: "0.082"
                                fontSize: .Nfont.nf2
                                fontWeight: "600"
                            - type: textField
                              dataKey: dataObject.name.locationName
                              isEditable: "false"
                              style:
                                marginTop: "0.025"
                                width: "0.082"
                                fontSize: .Nfont.nf0
                                borderRadius: "5" 
                                border:
                                  style: "3"
                                borderColor: "0xf4f4f4"
                                boxSizing: border-box
                                height: '0.042'
                                textIndent: 2em
                    - type: view
                      style:
                        marginTop: "0.01"
                        width: "0.28"
                        height: "0.08"
                      children:                    
                        # REASON FOR VISIT
                        - type: label
                          text: Reason for visit
                          style:
                            top: "0"
                            # width: "0.082"
                            width: "0.1315" 
                            fontSize: .Nfont.nf2
                            fontWeight: "600"
                        - type: textField
                          dataKey: dataObject.name.visitReason
                          isEditable: "false"
                          viewTag: reasonView
                          style:
                            marginTop: "0.025"
                            width: "0.082"
                            # width: "0.1315" 
                            fontSize: .Nfont.nf0
                            borderRadius: "5" 
                            border:
                              style: "3"
                            borderColor: "0xf4f4f4"
                            height: '0.042'
                            textIndent: 2em
                            boxSizing: border-box                                      
                        # DURATION
                        - type: label
                          text: Duration
                          style:
                            top: "0"
                            left: "0.099"
                            width: "0.15"
                            # left: "0.1485"
                            # width: "0.1"
                            fontSize: .Nfont.nf2
                            fontWeight: "600"
                        - type: textField
                          dataKey: PatientSummaryRoom.formData.duration
                          isEditable: false
                          style:
                            marginTop: "0.025"
                            width: "0.15"
                            # width: "0.1"
                            marginLeft: "0.017"
                            fontSize: .Nfont.nf0
                            borderRadius: "5" 
                            border:
                              style: "3"
                            borderColor: "0xf4f4f4"
                            height: '0.042'
                            textIndent: 2em
                            boxSizing: border-box
                        # Files
                        # - type: label
                        #   text: Files
                        #   style:
                        #     top: "0.025"
                        #     left: "0.255"
                        #     # left: "0.263"
                        #     width: "0.015"
                        #     fontSize: .Nfont.nf2
                        #     fontWeight: "600"
                        #     textDecoration: underline
                        #     color: "0x6dadee"
                        #     height: "0.042"
                        #     textAlign:
                        #       y: center
                    - type: label
                      text: Date
                      style:
                        width: "0.28"
                        marginTop: '0.01'
                        fontSize: .Nfont.nf2
                        fontWeight: "600"               
                # CALENDAR
                - .BaseDate.calendar:
                  style:
                    left: "0"
                    top: "0.29"
                    width: "0.4"
                    height: "0.19"
                    backgroundColor: "0xf7f9fa"
                    border:
                      style: "1"
                  children:
                    - .BaseDate.calendarHeader:
                      style: 
                        top: "0.02"
                        left: "0.06"
                        width: "0.28"
                        height: "0.05"
                        border: 
                          style: "1"
                      children:
                        # monthView
                        - type: view
                          style:
                            top: "0"
                            left: "0.06"
                            width: "0.06"
                            height: "0.045"
                          children:
                            - type: image
                              path: blueLeft.svg
                              onClick:
                                - emit:
                                    actions:
                                      - .BaseDate.calendarDate.day@: 1
                                      - =.builtIn.date.loopMonth:
                                          dataIn:
                                            month: =.BaseDate.calendarDate.month
                                            step: -1
                                          dataOut: BaseDate.calendarDate.month
                                      - =.builtIn.date.transformMonth:
                                          dataIn:
                                            month: =.BaseDate.calendarDate.month
                                          dataOut: BaseDate.calendarDate.monthName
                                      - =.builtIn.date.miniWeeklyCalendarArray:
                                          dataIn:
                                            year: =.BaseDate.calendarDate.year
                                            month: =.BaseDate.calendarDate.month
                                            today: 32
                                            markDay: =.BaseDate.calendarDate.day
                                            color: "0x000000"
                                            backgroundColor: "0xFFFFFF6f"
                                            todayColor: "0xffffff"
                                            todayBackgroundColor: "0x2988E6"
                                          dataOut: BaseDate.calendarDate.minidayLable
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: calendarTag
                              style:
                                height: "0.015"
                                top: "0.0175"
                            - type: label
                              dataKey: BaseDate.calendarDate.monthName
                              style:
                                width: "0.02"
                                height: "0.02"
                                left: "0.019"
                                top: "0.01"
                                fontSize: .Nfont.nf3
                                color: "0x003254"
                                textAlign:
                                  x: center
                            - type: image
                              path: blackRight.svg
                              onClick:
                                - emit:
                                    actions:
                                      - .BaseDate.calendarDate.day@: 1
                                      - =.builtIn.date.loopMonth:
                                          dataIn:
                                            month: =.BaseDate.calendarDate.month
                                            step: 1
                                          dataOut: BaseDate.calendarDate.month
                                      - =.builtIn.date.transformMonth:
                                          dataIn:
                                            month: =.BaseDate.calendarDate.month
                                          dataOut: BaseDate.calendarDate.monthName
                                      - =.builtIn.date.miniWeeklyCalendarArray:
                                          dataIn:
                                            year: =.BaseDate.calendarDate.year
                                            month: =.BaseDate.calendarDate.month
                                            today: 32
                                            markDay: =.BaseDate.calendarDate.day
                                            color: "0x000000"
                                            backgroundColor: "0xFFFFFF6f"
                                            todayColor: "0xffffff"
                                            todayBackgroundColor: "0x2988E6"
                                          dataOut: BaseDate.calendarDate.minidayLable            
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: calendarTag
                              style:
                                left: "0.055"
                                height: "0.015"
                                top: "0.0175"
                        # yearView
                        - type: view
                          style:
                            top: "0"
                            left: "0.16"
                            width: "0.06"
                            height: "0.045"
                          children:
                            - type: image
                              path: blueLeft.svg
                              onClick:
                                - emit:
                                    actions:
                                      - .BaseDate.calendarDate.month@: 1
                                      - .BaseDate.calendarDate.day@: 1
                                      - =.builtIn.number.Subtraction:
                                          dataIn:
                                            num: =.BaseDate.calendarDate.year
                                            step: 1
                                          dataOut: BaseDate.calendarDate.year
                                      - =.builtIn.date.miniWeeklyCalendarArray:
                                          dataIn:
                                            year: =.BaseDate.calendarDate.year
                                            month: =.BaseDate.calendarDate.month
                                            today: 32
                                            markDay: =.BaseDate.calendarDate.day
                                            color: "0x000000"
                                            backgroundColor: "0xFFFFFF6f"
                                            todayColor: "0xffffff"
                                            todayBackgroundColor: "0x2988E6"
                                          dataOut: BaseDate.calendarDate.minidayLable  
                                - actionType: evalObject
                                  object:
                                    - =.builtIn.date.transformMonth:
                                        dataIn:
                                          month: =.BaseDate.calendarDate.month
                                        dataOut: BaseDate.calendarDate.monthName
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: calendarTag
                              style:
                                height: "0.015"
                                top: "0.0175"
                            - type: label
                              dataKey: BaseDate.calendarDate.year
                              style:
                                width: "0.02"
                                height: "0.02"
                                left: "0.019"
                                top: "0.01"
                                fontSize: .Nfont.nf3
                                color: "0x003254"
                                textAlign:
                                  x: center
                            - type: image
                              path: blackRight.svg
                              onClick:
                                - emit:
                                    actions:
                                      - .BaseDate.calendarDate.month@: 1
                                      - .BaseDate.calendarDate.day@: 1
                                      - =.builtIn.number.addition:
                                          dataIn:
                                            num: =.BaseDate.calendarDate.year
                                            step: 1
                                          dataOut: BaseDate.calendarDate.year
                                      - =.builtIn.date.miniWeeklyCalendarArray:
                                          dataIn:
                                            year: =.BaseDate.calendarDate.year
                                            month: =.BaseDate.calendarDate.month
                                            today: 32
                                            markDay: =.BaseDate.calendarDate.day
                                            color: "0x000000"
                                            backgroundColor: "0xFFFFFF6f"
                                            todayColor: "0xffffff"
                                            todayBackgroundColor: "0x2988E6"
                                          dataOut: BaseDate.calendarDate.minidayLable 
                                - actionType: evalObject
                                  object:
                                    - =.builtIn.date.transformMonth:
                                        dataIn:
                                          month: =.BaseDate.calendarDate.month
                                        dataOut: BaseDate.calendarDate.monthName
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: calendarTag
                              style:
                                left: "0.055"
                                height: "0.015"
                                top: "0.0175"
                        - type: list
                          contentType: listObject
                          listObject: 
                            - key: SU
                            - key: MO
                            - key: TU
                            - key: WE
                            - key: TH
                            - key: FR
                            - key: SA
                          iteratorVar: itemObject
                          style:
                            top: "0.065"
                            width: "0.21"
                            left: "0.035"
                            height: "0.03"
                            justifyContent: "space-between"
                          children:
                            - type: listItem
                              itemObject: ""
                              style:
                                width: "0.03"
                                height: "0.03"
                                boxSizing: "border-box"
                                border: "none"
                                padding: "0"
                                display: "inline-block"
                              children:
                                - type: label 
                                  dataKey: itemObject.key
                                  style:
                                    color: "0x003254"
                                    width: "0.03"
                                    height: "0.03"
                                    fontSize: .Nfont.nf2
                                    fontFamily: Poppins
                                    # backgroundColor: "0xffffff"
                                    textAlign:
                                      x: center
                                      y: center
                        - type: list
                          contentType: listObject
                          listObject: =.BaseDate.calendarDate.minidayLable
                          iteratorVar: itemObject
                          style:
                            top: "0.085"
                            left: "0.035"
                            width: "0.21"
                            margin: "0"
                          children:
                            - type: listItem
                              itemObject: ""
                              style:
                                width: "0.03"
                                height: "0.02"
                                # boxSizing: "border-box"
                                # border: "none"
                                padding: "0"
                                margin: "0"
                                display: "inline-block"
                                # flex: "auto"
                                marginTop: "0.02"
                              onClick:
                                - emit:
                                    dataKey:
                                      var: itemObject
                                    actions:
                                      - ..BaseDate.calendarDate.minidayLable@: []
                                      - =.builtIn.date.miniWeeklyCalendarArray:
                                          dataIn:
                                            year: $var.year
                                            month: $var.month
                                            today: $var.day
                                            markDay: $var.day
                                            color: "0x000000"
                                            backgroundColor: "0xFFFFFF6f"
                                            todayColor: "0xffffff"
                                            todayBackgroundColor: "0x2988E6"
                                          dataOut: BaseDate.calendarDate.minidayLable
                                      - .BaseDate.calendarDate.year@: $var.year
                                      - .BaseDate.calendarDate.month@: $var.month
                                      - .BaseDate.calendarDate.day@: $var.day
                                      - =.builtIn.date.ShowDateByNumber:
                                          dataIn:
                                            year: =.BaseDate.calendarDate.year
                                            month: =.BaseDate.calendarDate.month
                                            day: =.BaseDate.calendarDate.day
                                            formatType: "Y-M-D"
                                          dataOut: BaseDate.calendarDate.todayDate
                                      - =.builtIn.date.transformMonth:
                                          dataIn:
                                            month: =.BaseDate.calendarDate.month
                                          dataOut: BaseDate.calendarDate.monthName
                                      - =.builtIn.date.getTimeStampOfDate:
                                          dataIn:
                                            date: =.BaseDate.calendarDate.todayDate
                                          dataOut: BaseDate.calendarDate.todayStamp
                                - actionType: evalObject
                                  object:                                                                  
                                    - =.builtIn.string.concat:
                                        dataIn:
                                          - "(stime<"
                                          - =.BaseDate.calendarDate.todayStamp.start
                                          - " AND "
                                          - "etime>"
                                          - =.BaseDate.calendarDate.todayStamp.start
                                          - " OR "
                                          - "stime>"
                                          - =.BaseDate.calendarDate.todayStamp.start
                                          - " AND "
                                          - "etime<"
                                          - =.BaseDate.calendarDate.todayStamp.end
                                          - " OR "
                                          - "stime<"
                                          - =.BaseDate.calendarDate.todayStamp.end
                                          - " AND "
                                          - "etime>"
                                          - =.BaseDate.calendarDate.todayStamp.end
                                          - ")"
                                          - " AND "
                                          - "subtype="
                                          - =..formData.currentSubtype
                                        dataOut: PatientSummaryRoom.formData.scheduleScondition                                
                                    - ..schedule.edge.sCondition@: =..formData.scheduleScondition
                                    #如果选择过去的时候，进行提示
                                    - if:
                                        - =.builtIn.math.greater:
                                            dataIn:
                                              num1: =.BaseDate.calendarDate.todayStamp.end
                                              num2: =.PatientSummaryRoom.formData.nowTimeStamp
                                        - continue
                                        - actionType: popUp
                                          popUpView: dateCheck
                                          wait: true
                                - actionType: evalObject
                                  object: 
                                    .Global._nonce@: 
                                      =.builtIn.math.random: ""                                
                                - actionType: evalObject
                                  object:
                                    - .BaseDate.schedule.scheduleList.edge@: []
                                    - ..schedule.scheduleList.edge@: []
                                    # 获取原来预约的bvid,evid用于查询所有的E1即当前的Availability
                                    - ..schedule.edge.id.0@: =..originSchedule.scheduleList.edge.0.evid
                                    - ..schedule.edge.id.1@: =..originSchedule.scheduleList.edge.0.bvid
                                - actionType: evalObject
                                  object:
                                    # 获取所有的Availability
                                    - =..schedule.get: ""
                                    - ..schedule.edge.id@: []
                                - actionType: evalObject
                                  object: 
                                    #如果没有avail，进行提示
                                    - if:
                                      - =..schedule.scheduleList.edge.0
                                      - continue
                                      - actionType: popUp
                                        popUpView: noAvailableTag
                                        wait: true                                  
                                    - =.builtIn.date.splitTime:
                                        dataIn:
                                          object2: =..schedule.scheduleList.edge
                                          timeSlot: =..formData.duration
                                          year: =.BaseDate.calendarDate.year
                                          month: =.BaseDate.calendarDate.month
                                          day: =.BaseDate.calendarDate.day
                                          isSplitCurrent: true
                                        dataOut: PatientSummaryRoom.formData.splitTime  
                                    - =.builtIn.object.setObjectKey:
                                        dataIn:
                                          objectArr: =..formData.splitTime
                                          key: fontColor
                                          value: "0x4b4b4b"
                                        dataOut: PatientSummaryRoom.formData.splitTime
                                    - =.builtIn.object.setObjectKey:
                                        dataIn:
                                          objectArr: =..formData.splitTime
                                          key: borColor
                                          value: "0xebebeb"
                                        dataOut: PatientSummaryRoom.formData.splitTime    
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: calendarTag
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: DataTag
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: splitTimeTag                             
                              children:
                                - type: label
                                  dataKey: itemObject.day
                                  style:
                                    top: "0"
                                    left: "0.0065"
                                    width: "0.017"
                                    height: "0.03"
                                    color: itemObject.color
                                    backgroundColor: itemObject.backgroundColor
                                    borderRadius: "50"
                                    fontSize: .Nfont.nf4
                                    textAlign:
                                      x: center
                                      y: center
                    - .BaseDate.leftWeek:
                      style: 
                        left: "0.06"
                        top: "0.088"
                    - .BaseDate.nextWeek:
                      style: 
                        left: "0.34"
                        top: "0.038" 
                # AVAILABILITY
                - type: label
                  text: Availability
                  style:
                    top: "0.5"
                    left: "0.06"
                    width: "0.28"
                    fontSize: .Nfont.nf2
                    fontWeight: "600"
                - type: scrollView
                  viewTag: splitTimeTag
                  style: 
                    top: "0.52"
                    height: "0.28"
                    width: "0.32"
                    left: "0.06"
                    overflow: scroll
                  children: 
                    - type: list
                      contentType: listObject
                      listObject: =.PatientSummaryRoom.formData.splitTime                                        
                      iteratorVar: itemObject
                      style:
                        top: "0"
                        width: "0.32"
                        left: "0"
                        margin: "0"
                        display: inline-block
                      children:
                        - type: listItem
                          itemObject: "" 
                          onClick:
                            - emit: 
                                dataKey: 
                                  var: itemObject
                                actions: 
                                  - =.builtIn.object.setProperty: 
                                      dataIn: 
                                        obj: =.PatientSummaryRoom.formData.splitTime 
                                        label: "showTime"
                                        text: $var.showTime
                                        arr: ["fontColor","bgColor","borColor"]
                                        valueArr: ["0x005795","0xeaf1f6","0xeaf1f6"]
                                        errorArr: ["0x4b4b4b","0xffffff","0xebebeb"] 
                                  - ..formData.changeAppointmentTime@: $var
                                  - ..apiRequest.changeAppointment.edgeIn.stime@: $var.stime
                                  - ..apiRequest.changeAppointment.edgeIn.etime@: $var.etime
                                  - ..apiRequest.changeAppointment.edgeIn.refid@: =..dataObject.id
                                  - ..apiRequest.changeAppointment.edgeIn.evid@: $var.refid # var是当天切出的时间的，refid指向当天时间即E1
                                  - =.builtIn.date.formatDataPro: 
                                      dataIn: 
                                        date: $var.stime
                                        separator: "/"
                                      dataOut: PatientSummaryRoom.formData.currentTimeString                                      
                                  - =.builtIn.string.concat:
                                      dataIn:
                                        - "The appointment will be changed by"
                                        - " "                                    
                                        - =..formData.sendMessageSTime
                                        - " to "
                                        - =..formData.currentTimeString
                                      dataOut: PatientSummaryRoom.formData.sendMessageChange
                                  - =.builtIn.string.concat: 
                                      dataIn: 
                                        - =..formData.currentTimeString
                                        - ". "
                                      dataOut: PatientSummaryRoom.formData.currentTimeString  
                                  - ..formData.nextBtnColor@: "0x005795"
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: btnView      
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: splitTimeTag                                 
                          style:
                            width: '0.058'
                            height: '0.032'
                            marginRight: "0.015"
                            float: left
                            marginTop: "0.02"
                            backgroundColor: itemObject.bgColor
                            border:   
                              style: '3'
                            borderColor: itemObject.borColor
                            borderRadius: "3"
                          children:
                            - type: label
                              dataKey: itemObject.showTime
                              style: 
                                left: "0"
                                height: "0.03"
                                color: itemObject.fontColor
                                fontSize: .Nfont.nf2
                                textAlign:
                                  x: center
                                  y: center
                - type: button
                  text: Next
                  viewTag: btnView
                  onClick: 
                    - actionType: builtIn
                      funcName: hide
                      viewTag: addressView                  
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: appointmentInfoChangeTag                  
                    - actionType: evalObject
                      object:
                        - if: 
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: =..formData.nextBtnColor
                                string2: "0x005795"
                          - actionType: popUpDismiss
                            popUpView: appointmentChangeTag
                          - continue  
                    - actionType: evalObject
                      object:                        
                        - if: 
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: =..formData.nextBtnColor
                                string2: "0x005795"
                          - actionType: popUp
                            popUpView: appointmentInfoChangeTag
                          - continue            
                  style:
                    top: "0.82"
                    width: "0.28"
                    height: "0.043"
                    left: "0.06"
                    color: "0xffffff"
                    fontSize: .Nfont.nf4
                    fontFamily: "Roboto"
                    backgroundColor: =..formData.nextBtnColor
                    border:
                      style: "1"
                    borderRadius: "3"
                    textAlign:
                      x: center
                      y: center                                          
        
        # Change Appointment - Appointment info
        - type: popUp
          style:
            top: "0"
            left: "0"
            height: "1"
            width: "1"
            zIndex: "1000"
          viewTag: appointmentInfoChangeTag
          children:
            - .PopUphead:
              style:
                left: '0.6'
              children:
                - .CreateLabel:
                  text: Change Appointment
                - .Closebutton:
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: appointmentInfoChangeTag
                    - actionType: popUp
                      popUpView: appointmentChangeTag 
            - type: view
              style:
                height: '0.92'
                width: '0.4'
                top: '0.08'
                left: '0.6'
                backgroundColor: '0xffffff'
              children:
                - type: view
                  style:
                    marginTop: "0.03"
                    left: "0.06"
                    width: "0.28"
                    height: "0.26"
                  children:
                    - type: label
                      text: Appointment info
                      style:
                        width: "0.28"
                        marginTop: '0.007'
                        fontSize: .Nfont.nf5
                        fontFamily: "sans-serif"
                        fontWeight: "600"
                    - type: view
                      style:
                        marginTop: "0.018"
                        width: "0.28"
                        # height: "0.235"
                        # height: "0.205"
                        height: "auto"
                        border: 
                          style: "3"
                        borderColor: "0xf7f9fa"                        
                        borderRadius: "5"
                        backgroundColor: "0xf7f9fa"
                      children:
                        - type: view
                          style:
                            marginTop: "0.018"
                            left: "0.013"
                            width: "0.254"
                            height: "0.042"
                          children:
                            - type: label
                              text: Date
                              style:
                                top: "0"
                                width: "0.127"
                                fontSize: .Nfont.nf2
                                fontWeight: "700"
                            - type: label
                              text=func: .builtIn.string.formatUnixtimeL_en
                              dataKey: formData.changeAppointmentTime.stime
                              style:
                                width: "0.127"
                                top: "0"
                                left: "0.127"
                                fontSize: .Nfont.nf2 
                        - type: view
                          style:
                            left: "0.013"
                            width: "0.254"
                            height: "0.042"
                          children:
                            - type: label
                              text: Time
                              style:
                                top: "0"
                                width: "0.127"
                                fontSize: .Nfont.nf2
                                fontWeight: "700"
                            - type: label
                              text=func: .builtIn.date.ShowTimeSpan
                              dataKey: formData.changeAppointmentTime
                              style:
                                width: "0.127"
                                top: "0"
                                left: "0.127"
                                fontSize: .Nfont.nf2
                        - type: view
                          style:
                            left: "0.013"
                            width: "0.254"
                            height: "0.042"
                          children:
                            - type: label
                              text: Appointment Type
                              style:
                                top: "0"
                                width: "0.127"
                                fontSize: .Nfont.nf2
                                fontWeight: "700"
                            - type: label
                              dataKey: dataObject.name.visitType
                              style:
                                width: "0.127"
                                top: "0"
                                left: "0.127"
                                fontSize: .Nfont.nf2
                        - type: view
                          style:
                            left: "0.013"
                            width: "0.254"
                            height: "0.042"
                          children:
                            - type: label
                              text: Reason for visit
                              style:
                                top: "0"
                                width: "0.127"
                                fontSize: .Nfont.nf2
                                fontWeight: "700"
                            - type: label
                              dataKey: dataObject.name.visitReason
                              style:
                                width: "0.127"
                                top: "0"
                                left: "0.127"
                                fontSize: .Nfont.nf2
                        - type: view
                          style:
                            left: "0.013"
                            width: "0.254"
                            height: "0.042"
                          children:
                            - type: label
                              text: Provider
                              style:
                                top: "0"
                                width: "0.127"
                                fontSize: .Nfont.nf2
                                fontWeight: "700"
                            - type: label
                              dataKey: dataObject.name.providerName
                              style:
                                width: "0.127"
                                top: "0"
                                left: "0.127"
                                fontSize: .Nfont.nf2
                        - type: view
                          style:
                            left: "0.013"
                            width: "0.254"
                            height: "0.042"
                            display: block
                          children:
                            - type: label
                              text: Location Name
                              style:
                                top: "0"
                                width: "0.127"
                                fontSize: .Nfont.nf2
                                fontWeight: "700"
                            - type: label
                              dataKey: dataObject.name.locationName
                              style:
                                width: "0.127"
                                top: "0"
                                left: "0.127"
                                fontSize: .Nfont.nf2                                
                    - type: label
                      text: Add Patient
                      style:
                        width: "0.28"
                        marginTop: '0.028'
                        fontSize: .Nfont.nf5
                        fontFamily: "sans-serif"
                        fontWeight: "600"                    
                    - type: view
                      style:
                        marginTop: "0.028"
                        width: "0.28"
                        height: "0.08"
                      children:
                        - type: label
                          text: Patient Name
                          style:
                            top: "0"
                            width: "0.12"
                            fontSize: .Nfont.nf2
                            fontWeight: "600"
                        - type: textField
                          dataKey: dataObject.name.patientName
                          isEditable: "false"
                          style:
                            marginTop: "0.025"
                            width: "0.12"
                            fontSize: .Nfont.nf0
                            borderRadius: "5" 
                            border:
                              style: "3"
                            borderColor: "0xf4f4f4"
                            height: '0.042'
                            textIndent: 2em
                            boxSizing: border-box
                        - type: label
                          text: Phone Number
                          style:
                            left: "0.135"
                            top: "0"
                            width: "0.146"
                            fontSize: .Nfont.nf2
                            fontWeight: "600"
                        - type: textField
                          dataKey: formData.splitPatPhoneNumber.0
                          isEditable: false
                          style:
                            marginLeft: "0.015"
                            top: "0.025"
                            width: "0.04"
                            fontSize: .Nfont.nf0
                            borderRadius: "5" 
                            border:
                              style: "3"
                            borderColor: "0xf4f4f4"
                            height: '0.042'
                            textIndent: 2em
                            boxSizing: border-box
                            backgroundColor: "0xf9f9f9"
                        - type: textField
                          dataKey: formData.splitPatPhoneNumber.1
                          isEditable: "false"
                          style:
                            marginLeft: "0.06"
                            top: "0.025"
                            width: "0.1"
                            fontSize: .Nfont.nf0
                            borderRadius: "5" 
                            border:
                              style: "3"
                            borderColor: "0xf4f4f4"
                            height: '0.042'
                            textIndent: 2em
                            boxSizing: border-box                                                   
                    - type: view
                      style:
                        top: "0.696"
                        width: "0.28"
                        height: "0.06"
                      children:               
                        - type: image
                          path: smallestAlert.svg
                          style:
                            top: "0.003"
                            width: "0.008"
                            height: "0.01"
                        - type: label
                          textBoard:
                            - text: "The appointment will be changed by"
                            - text: " " 
                            - text: =..formData.sendMessageSTime  # "Sara Brown, 07/20/2021, 9:00 am"
                              color: "0x6dadee"
                            - text: " "  
                            - text: "to "
                          style:
                            top: "0"
                            left: "0.01"
                            width: "0.28"
                            fontSize: .Nfont.nf2
                        - type: label
                          dataKey: formData.currentTimeString
                          style:
                            color: "0x4094e7"
                            top: "0.019"
                            left: "0.01"
                            width: "0.08"
                            fontSize: .Nfont.nf2                           
                        - type: label
                          text: "An email will be sent to other participants."
                          style:
                            top: "0.019"
                            left: "0.092"
                            width: "0.15"
                            fontSize: .Nfont.nf2 
                        # - type: label
                        #   text: "There will be an email send to other participants. Please check the Inbox."
                        #   style:
                        #     top: "0.036"
                        #     left: "0.01"
                        #     width: "0.26"
                        #     fontSize: .Nfont.nf2
                    - type: button
                      text: Change Appointment
                      style:
                        top: "0.79"
                        width: "0.28"
                        height: "0.043"
                        color: "0xffffff"
                        fontSize: .Nfont.nf4
                        fontFamily: "Roboto"
                        backgroundColor: "0x005795"
                        border:
                          style: "1"
                        borderRadius: "5"
                        textAlign:
                          x: center
                          y: center
                      onClick:
                        - actionType: evalObject
                          object:
                            .Global._nonce@:
                              =.builtIn.math.random: "" 
                        - actionType: updateObject
                          dataKey: PatientSummaryRoom.dataObject
                          dataObject: {}                                 
                        - actionType: evalObject
                          object:
                            - ..inMeeting.docResponse.edge@: []
                            - =..apiRequest.changeAppointment.edgeAPI.store: ""
                            # 发送给一个参与者
                            - ..apiRequest.email.docStoreReq.eid@: =..apiRequest.emailEdge.edgeResp.edge.0.id
                            - ..apiRequest.email.docStoreReq.name.title@: "Appointment changed notification" 
                            - ..apiRequest.email.docStoreReq.name.data.content@: =..formData.sendMessageChange  
                            - ..apiRequest.email.docStoreReq.name.data.senderAvatarId@: =.Global.facilityAvatarID
                            - ..apiRequest.email.docStoreReq.name.data.senderName@: "AiTmed Auto-Reply"
                            - =..apiRequest.email.docAPI.store: ""
                            - ..apiRequest.email.docStoreReq.name.data.content@: ""
                            # # 发送给另一个参与者
                            # - ..apiRequest.email.docStoreReq@: =..apiRequest.email.docStoreIn
                            # - ..apiRequest.email.docStoreReq.eid@: =..apiRequest.emailEdge.reEdgeResp.edge.0.id
                            # - ..apiRequest.email.docStoreReq.name.title@: "Appointment cancelled notification" 
                            # - ..apiRequest.email.docStoreReq.name.data.content@: =..formData.sendMessageChange
                            # - ..apiRequest.email.docStoreReq.name.data.senderAvatarId@: =.Global.facilityAvatarID
                            # - ..apiRequest.email.docStoreReq.name.data.senderName@: "AiTmed Auto-Reply"
                            # - =..apiRequest.email.docAPI.store: ""
                            # - ..apiRequest.email.docStoreReq.name.data.content@: "" 
                            # # 重新获取E2更新dataObject
                        - actionType: popUpDismiss
                          popUpView: appointmentInfoChangeTag                              
                        - actionType: popUp
                          popUpView: changeSuccessTag                            
        # Change Appointment Successfully
        # patientProfilePopUp
        - type: popUp
          viewTag: patientProfile
          style:
            width: '1' 
            height: '1'
            top: '0'
            # left: '0.075'     
            backgroundColor: '0x00000033'
            zIndex: "10"
          children:
            - type: view
              style:
                left: "0.6"
                width: "0.4"
                height: "1"
                backgroundColor: "0xFFFFFF" 
              children:
                - .PopUphead:
                  children:
                    - .CreateLabel:
                      text: "Patient Profile"
                    - .Closebutton:
                      onClick:
                        # Clear current patient information
                        - actionType: evalObject
                          object:
                            - ..formData.patdInfo@: ""
                            - ..formData.patInfoEmerContactFullName@: ""
                            - ..formData.patdInfoEmploymentAddress@: ""
                        - actionType: popUpDismiss
                          popUpView: patientProfile
                # information
                - type: view
                  viewTag: infoView
                  style:
                    height: '0.92'
                    width: '0.31'
                    top: '0.08'
                    left: "0.055"
                  children:
                    - type: view
                      style:
                        width: "0.295"
                        height: "auto"
                        left: "0"
                        marginTop: "0.03"
                      children:
                        - type: image
                          path: patientDefault.svg
                          path=func: .builtIn.utils.prepareDocToPath
                          dataKey: profile.docResponse.doc.0.name.data.basicInfo.avatar
                          style:
                            width: "0.05"
                            height: "0.082"
                            left: "0"
                            top: "0"
                        - type: label
                          dataKey: profile.docResponse.doc.0.name.data.basicInfo.fullName
                          style:
                            left: "0.062"
                            width: "0.14"
                            marginTop: "0"
                            fontSize: .Nfont.nf5
                            fontFamily: "Roboto"
                            fontWeight: "600"
                        - type: view
                          style:
                            left: "0.062"
                            width: "0.14"
                            height: "auto"
                            marginTop: "0.01"
                            fontSize: .Nfont.nf2
                            fontFamily: "Roboto"
                            display: flex
                            alignItems: center
                          children:
                            - type: label
                              text: "User Name:"
                              style:
                                marginLeft: "0"

                            - type: label
                              dataKey: profile.docResponse.doc.0.name.data.basicInfo.userName
                              style:
                                marginLeft: "0.01"
                        - type: view
                          style:
                            left: "0.062"
                            width: "0.14"
                            height: "auto"
                            marginTop: "0.01"
                            fontSize: .Nfont.nf2
                            fontFamily: "Roboto"
                            display: flex
                            alignItems: center
                          children:
                            - type: label
                              text: "Phone #:"
                              dataKey: 
                              style:
                                marginLeft: "0"
                            - type: label
                              dataKey: profile.docResponse.doc.0.name.data.basicInfo.phone
                              style:
                                marginLeft: "0.01"
                    - type: view
                      onClick: 
                        - actionType: evalObject
                          object:

                            - .Global.formData.reply.eid@: =..apiRequest.connection.edgeResp.edge.0.id
                            - .Global.formData.reply.name.data.receiverAvatarId@: =..profile.docResponse.doc.0.name.data.basicInfo.avatar
                            - .Global.formData.reply.name.data.receiverName@: =..profile.docResponse.doc.0.name.data.basicInfo.fullName
                        - goto: NewMessage
                      style:
                        top: "0.04"
                        left: "0.295"
                        height: "auto"
                      children:
                        - type: image
                          path: Inbox.svg
                          style:
                            height: "0.016"
                            marginTop: "0"
                        - type: label
                          text: Mail
                          style:
                            fontSize: .Nfont.nf0
                            fontFamily: "Roboto"
                    - type: scrollView
                      style:
                        width: "0.295"
                        height: "0.74"
                        left: "0"
                        marginTop: "0.04"
                        overflow: hidden
                      children:
                        # Basic Info Start
                        - .ProfileInfoTitle:
                          text: "Basic Info"
                          style:
                            marginTop: "0.01"
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "User Name"
                            - .ProfileInfoRightText:
                              dataKey: profile.docResponse.doc.0.name.data.basicInfo.userName
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Date of Birth"
                            - .ProfileInfoRightText:
                              dataKey: profile.docResponse.doc.0.name.data.basicInfo.dateOfBirth
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Gender"
                            - .ProfileInfoRightText:
                              dataKey: profile.docResponse.doc.0.name.data.basicInfo.gender
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Social Security #"
                            - .ProfileInfoRightText:
                              dataKey: profile.docResponse.doc.0.name.data.basicInfo.socialSecurity
                        # Basic Info End

                        # Contact Start
                        - .ProfileInfoTitle:
                          text: "Contact"
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Alternate Phone #"
                            - .ProfileInfoRightText:
                              dataKey: profile.docResponse.doc.0.name.data.contactInfo.alternatePhone.fullPhone
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Email"
                            - .ProfileInfoRightText:
                              dataKey: profile.docResponse.doc.0.name.data.contactInfo.email
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Address"
                            - .ProfileInfoRightText:
                              dataKey: profile.docResponse.doc.0.name.data.contactInfo.address.fullAddress
                        # Contact End


                        # Emergency Contact Start
                        - .ProfileInfoTitle:
                          text: "Emergency Contact"
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Name"
                            - .ProfileInfoRightText:
                              dataKey: formData.patInfoEmerContactFullName
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Relation"
                            - .ProfileInfoRightText:
                              dataKey: profile.docResponse.doc.0.name.data.emergencyContact.relation
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Phone #"
                            - .ProfileInfoRightText:
                              dataKey: profile.docResponse.doc.0.name.data.emergencyContact.phone.fullPhone
                        # Emergency Contact End

                        # Employment Information Start
                        - .ProfileInfoTitle:
                          text: "Employment Information"
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Employer Name"
                            - .ProfileInfoRightText:
                              dataKey: profile.docResponse.doc.0.name.data.employment.employerName
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Dept."
                            - .ProfileInfoRightText:
                              dataKey: profile.docResponse.doc.0.name.data.employment.dept
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Nature of business"
                            - .ProfileInfoRightText:
                              dataKey: profile.docResponse.doc.0.name.data.employment.NatureBusiness
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Occupation"
                            - .ProfileInfoRightText:
                              dataKey: profile.docResponse.doc.0.name.data.employment.Occupation
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Telephone #"
                            - .ProfileInfoRightText:
                              dataKey: profile.docResponse.doc.0.name.data.employment.Telephone
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Fax #"
                            - .ProfileInfoRightText:
                              dataKey: profile.docResponse.doc.0.name.data.employment.fax
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Email"
                            - .ProfileInfoRightText:
                              dataKey: profile.docResponse.doc.0.name.data.employment.email
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Address"
                            - .ProfileInfoRightText:
                              dataKey: profile.docResponse.doc.0.name.data.employment.address.fullAddress
                        # Employment Information End  

                        # Medical Insurance Start
                        - .ProfileInfoTitle:
                          text: "Medical Insurance"

                        - type: view
                          viewTag: medicalInsuranceTag
                          style:
                            marginTop: "0"
                            width: "0.28"
                            height: "auto"
                            # backgroundColor: "0xff000033"
                          children:
                            - type: list
                              contentType: listObject
                              listObject: ..formData.patdInfoMedicalInsurance
                              iteratorVar: itemObject
                              style:
                                width: "0.28"
                                margin: "0"
                                left: "0"
                                height: auto
                              children:
                                - type: listItem
                                  itemObject: 
                                  style:
                                    width: "0.28"
                                    left: "0"
                                    marginTop: "0.01"
                                    backgroundColor: "0xf0f2f4"
                                  children:
                                    - type: view
                                      style: 
                                        marginTop: "0.015"
                                        width: "0.26"
                                        left: "0.01"
                                        height: "0.09"
                                      children:
                                        - type: label
                                          dataKey: itemObject.name.data.memberName
                                          style:
                                            top: "0.01"
                                            width: "0.13"
                                            fonSize: .Nfont.h1
                                        - type: label
                                          text: "1630163102673210104701"
                                          dataKey: itemObject.name.data.memberId
                                          style:
                                            top: "0.01"
                                            marginLeft: "0.13"
                                            width: "0.13"
                                            fonSize: .Nfont.n6_3
                                            textAlign:
                                              x: right
                                        - .MedicInsuranceLeftText:
                                          text: "UnitedHealth Group Inc."
                                          dataKey: itemObject.name.data.companyName
                                          style:
                                            top: "0.05"
                                        - .MedicInsuranceLeftText:
                                          text: "Stomatology Department Plan"
                                          dataKey: itemObject.name.data.planOrMedicalGroup
                                          style:
                                            top: "0.07"
                                    - type: view
                                      style:
                                        height: "0.01"
                                        textAlign:
                                          x: center
                                          y: center
                                      children:
                                        - type: image
                                          path: downArrowGray.svg
                                          style:
                                            height: "0.008"
                                            width: "0.012"
                                            display: itemObject.isShowDownArrowGray
                                          onClick:
                                            - emit: 
                                                dataKey: 
                                                  var: itemObject
                                                actions: 
                                                  - =.builtIn.object.setProperty: 
                                                      dataIn: 
                                                        obj: =..formData.patdInfoMedicalInsurance
                                                        label: "id"
                                                        text: $var.id
                                                        arr: ["isShowDownArrowGray","isShowMedicalInsuranceInfo","isShowUpArrowGray"]
                                                        valueArr: ["none","block","block"]
                                                        errorArr: ["block","none","none"]                                             
                                            - actionType: builtIn
                                              funcName: redraw
                                              viewTag: medicalInsuranceTag
                                    - type: view
                                      dataKey:
                                      style:
                                        width: "0.24"
                                        height: "auto"
                                        left: "0.01"
                                        # backgroundColor: "0xff000033"
                                        marginTop: "0"
                                        fontSize: .Nfont.nf0
                                        fontFamily: "Roboto"
                                        display: itemObject.isShowMedicalInsuranceInfo
                                      children:
                                        - .MedicInsuranceTextView:
                                          children:
                                            - .MedicInsuranceLeftText:
                                              text: "Medical Insurance Company Name"
                                            - .MedicInsuranceRightText:
                                              dataKey: itemObject.name.data.companyName
                                        - .MedicInsuranceTextView:
                                          children:
                                            - .MedicInsuranceLeftText:
                                              text: "Insurance plan or medical group"
                                            - .MedicInsuranceRightText:
                                              dataKey: itemObject.name.data.planOrMedicalGroup
                                        - .MedicInsuranceTextView:
                                          children:
                                            - .MedicInsuranceLeftText:
                                              text: "Member Name"
                                            - .MedicInsuranceRightText:
                                              dataKey: itemObject.name.data.memberName
                                        - .MedicInsuranceTextView:
                                          children:
                                            - .MedicInsuranceLeftText:
                                              text: "Insurance Member ID"
                                            - .MedicInsuranceRightText:          
                                              dataKey: itemObject.name.data.memberId
                                        - .MedicInsuranceTextView:
                                          children:
                                            - .MedicInsuranceLeftText:
                                              text: "Group number #"
                                            - .MedicInsuranceRightText:
                                              dataKey: itemObject.name.data.groupNumber
                                        - .MedicInsuranceTextView:
                                          children:
                                            - .MedicInsuranceLeftText:
                                              text: "Policy number #"
                                            - .MedicInsuranceRightText:
                                              dataKey: itemObject.name.data.policyNumber
                                        - .MedicInsuranceTextView:
                                          children:
                                            - .MedicInsuranceLeftText:
                                              text: "Relationship to Patient"
                                            - .MedicInsuranceRightText:
                                              dataKey: itemObject.name.data.relation                                            
                                        - .MedicInsuranceTextView: 
                                          style:
                                            marginTop: "0.02"
                                            width: "0.26"
                                            height: "0.12"
                                          children:
                                            - type: view
                                              style:
                                                width: "0.13"
                                              children:
                                                - type: image
                                                  path: driverLicense.svg
                                                  dataKey: itemObject.name.data.front_InsuranceCardId
                                                  path=func: .builtIn.utils.prepareDocToPath
                                                  style:
                                                    width: "0.09"
                                                    borderRadius: "5"
                                                    height: "0.1"
                                                - type: label
                                                  text: "Front of Insurance Card"
                                                  style:
                                                    color: "0x666666"
                                                    marginLeft: "0.01"
                                                    fontSize: .Nfont.nf0 
                                                    fontFamily: "Roboto"   
                                            - type: view
                                              style:
                                                width: "0.13"
                                              children:                                             
                                                - type: image
                                                  path: driverLicense.svg
                                                  dataKey: itemObject.name.data.back_InsuranceCardId
                                                  path=func: .builtIn.utils.prepareDocToPath
                                                  style:
                                                    width: "0.09"
                                                    borderRadius: "5"
                                                    height: "0.1"
                                                - type: label
                                                  text: "Back of Insurance Card"
                                                  style:
                                                    color: "0x666666"
                                                    marginLeft: "0.01"
                                                    fontSize: .Nfont.nf0 
                                                    fontFamily: "Roboto"
                                    - type: view
                                      style:
                                        height: "0.02"
                                        textAlign:
                                          x: center
                                          y: center
                                      children:                                                                 
                                        - type: image
                                          path: upArrowGray.svg
                                          style:
                                            height: "0.008"
                                            width: "0.012"
                                            display: itemObject.isShowUpArrowGray
                                          onClick:
                                            - emit: 
                                                dataKey: 
                                                  var: itemObject
                                                actions: 
                                                  - =.builtIn.object.setProperty: 
                                                      dataIn: 
                                                        obj: =..formData.patdInfoMedicalInsurance
                                                        label: "id"
                                                        text: $var.id
                                                        arr: ["isShowDownArrowGray","isShowMedicalInsuranceInfo","isShowUpArrowGray"]
                                                        valueArr: ["block","none","none"]                                                        
                                                        errorArr: ["none","block","block"]
                                            - actionType: builtIn
                                              funcName: redraw
                                              viewTag: medicalInsuranceTag
                        # Medical Insurance End

                        # Identification Start
                        - .ProfileInfoTitle:
                          text: "Identification"
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "ID type"
                            - .ProfileInfoRightText:
                              dataKey:  profile.docResponse.doc.0.name.data.identification.type
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "ID #"
                            - .ProfileInfoRightText:
                              dataKey:  profile.docResponse.doc.0.name.data.identification.id
                        # - type: view
                        #   style:
                        #     marginTop: "0.02"
                        #     width: "0.15"
                        #     height: "0.17"
                        #     backgroundColor: "0xe6e6e6"
                        #     borderRadius: "3"
                        #     textAlign:
                        #       x: center
                        #   children:
                        - type: image
                          # path: driverLicense.svg
                          dataKey:  profile.docResponse.doc.0.name.data.identification.imageId
                          path=func: .builtIn.utils.prepareDocToPath
                          style:
                            marginTop: "0.01"
                            width: "0.15"
                            height: "0.17"
                            borderRadius: "3"
                          onClick:
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: idImgView
                            - actionType: popUp
                              popUpView: idImgView
                        - type: label
                          text: "ID Image Upload"
                          style:
                            marginTop: "0"
                            width: "0.15"
                            fontSize: .Nfont.nf1
                            textAlign:
                              x: center
                        # Identification End 
        - .BaseSuccessfulView: ""
          viewTag: changeSuccessTag
          msg: "Changed Successfully!"
          onClick: 
            - actionType: evalObject
              object:
                - =..inMeeting.edgeAPI.get: ""
                - ..dataObject@: =..inMeeting.docResponse.edge.0
            - actionType: builtIn
              funcName: redraw
              viewTag: appointmentInfoTag                          
            - actionType: popUpDismiss
              popUpView: changeSuccessTag                       
        # Finish Appointment Successfully
        - .BaseSuccessfulView: ""
          viewTag: finishSuccessTag
          msg: "Finish Successfully!"  
          onClick: 
            - actionType: builtIn
              funcName: goBack
              reload: true   


        # 取消会议弹窗
        - type: popUp
          viewTag: cancelAppointmentTag
          style:
            width: "1"
            height: "1"
            backgroundColor: "0x00000033"
            zIndex: "100"
            top: "0"
          children:
            - type: view
              style:
                width: "0.29"
                height: "0.43"
                backgroundColor: "0xffffff"
                top: "0.23"
                left: "0.435"
                boxShadow: "1px 1px 11px 9px #b3b3b333"
                borderRadius: "10"
              children:
                - type: image
                  path: deleteGray.svg
                  style:
                    height: "0.015"
                    left: "0.27"
                    top: "0.02"
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: cancelAppointmentTag
                - type: label
                  text: "Are you sure you want to cancel this appointment?"
                  dataKey: 
                  style:
                    textAlign:
                      x: center
                    fontSize: .Nfont.nf5
                    marginTop: "0.075"
                - type: label
                  text: "Cancel by"
                  dataKey: 
                  style:
                    fontSize: .Nfont.nf5
                    color: "0x4b4b4b"
                    left: "0.022"
                    marginTop: "0.01"
                    fontWeight: "600"
                - type: view
                  viewTag: cancelAppointmentSelectTag
                  style:
                    width: "0.2"
                    height: "0.05"
                    textAlign:
                      y: center
                    left: "0.022"
                  children:
                    - type: list
                      contentType: listObject
                      listObject: ..formDataTemp.cancelAppointmentSelect
                      iteratorVar: itemObject
                      style:
                        width: "0.27"
                        display: flex
                        axis: horizontal
                      children:
                        - type: listItem
                          itemObject: 
                          style:
                            width: "0.055"
                            height: "0.05"
                            marginTop: ''
                            marginRight: "0.01"
                            display: flex
                            justifyContent: center
                            alignItems: center
                          children:
                            - type: image
                              path: # whiteCircle.svg
                                emit:
                                  dataKey: 
                                    var: itemObject
                                  actions:
                                    - if:
                                      - =.builtIn.string.equal:
                                          dataIn: 
                                            string1: =..formData.cancelSingle.cancelSelect
                                            string2: $var.value
                                      - whiteAndBlueCircle.svg
                                      - whiteCircle.svg
                              onClick:
                                - emit:
                                    dataKey:
                                      var: itemObject
                                    actions:
                                      - if:
                                          - =.builtIn.string.equal:
                                              dataIn:
                                                string1: =..formData.cancelSingle.single
                                                string2: $var.value
                                          - =.builtIn.object.clear:
                                              dataIn:
                                                object: =..formData.cancelSingle
                                                key: $var.key
                                          - =.builtIn.object.set:
                                              dataIn:
                                                object: =..formData.cancelSingle
                                                key: $var.key
                                                value: $var.value
                                - actionType: evalObject
                                  object:
                                    - if:
                                      - =.builtIn.string.equal:
                                          dataIn: 
                                            string1: =..formData.cancelSingle.cancelSelect
                                            string2: "Facility"
                                      - actionType: evalObject
                                        object:
                                          - ..formData.reasonForCancelation@: "we cannot provide the healthcare service at this time."
                                      - actionType: evalObject
                                        object:
                                          - ..formData.reasonForCancelation@: "" 
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: reasonContentTag                                                                                         
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: cancelAppointmentSelectTag
                              style:
                                height: "0.02"
                                marginRight: "0.007"
                            - type: label
                              text: ""
                              dataKey: itemObject.value
                              style:
                                fontSize: .Nfont.nf5

                - type: view
                  style:
                    width: "0.123"
                    height: "0.04"
                    display: flex
                    left: "0.022"
                    justifyContent: space-between
                    alignItems: flex-start
                  children:
                    - type: label
                      text: "Reason for "
                      dataKey: 
                      style:
                        fontSize: .Nfont.nf5
                        color: "0x4b4b4b"
                        fontWeight: "600"
                    - type: label
                      text: "cancelation"
                      dataKey: 
                      style:
                        fontSize: .Nfont.nf5
                        color: "0xfc3a3a"
                        fontWeight: "600"
                - type: textView
                  placeholder: Enter here...
                  viewTag: reasonContentTag
                  dataKey: formData.reasonForCancelation
                  style:
                    width: "0.25"
                    left: "0.022"    
                    borderColor: "0xe5e5e5"
                    height: "0.11"
                    borderRadius: "5"
                    textIndent: "1em"
                    fontFamily: "Poppins"
                    paddingTop: "5px"
                    color: "#999999"
                - type: view
                  style:
                    width: "0.29"
                    height: "0.07"
                    backgroundColor: "0xedeef2"
                    border-bottom-left-radius: "5"
                    border-bottom-right-radius: "5"
                    marginTop: "0.02"
                    boxShadow: "1px 8px 10px 10px #b3b3b333"
                  children:
                    - .BaseJudgeButtonNo: ""
                      style: 
                        left: "0.172"
                        fontFamily: "Proxima Nova"
                    - .BaseJudgeButtonYes:
                      style: 
                        left: "0.205"
                        width: "0.058"
                        fontFamily: "Proxima Nova"
                      onClick:
                        - actionType: evalObject
                          object:
                            - if:
                              - =.builtIn.string.equal:
                                  dataIn:
                                    string1: =..formData.cancelSingle.cancelSelect
                                    string2: ""
                              - actionType: popUp
                                popUpView: noMessageTag
                                popUpDismiss: 1200
                                wait: true
                              - continue
                            - if: 
                              - =.builtIn.string.equal:
                                  dataIn:
                                    string1: =..formData.reasonForCancelation
                                    string2: ""
                              - actionType: popUp
                                popUpView: noReasonTag
                                popUpDismiss: 1200
                                wait: true
                              - continue
                            - =.builtIn.string.concat: 
                                dataIn:
                                  - =..dataObject.name.providerName
                                  - " (facility)"
                                dataOut: PatientSummaryRoom.formData.concatProviderName
                            - =.builtIn.string.concat: 
                                dataIn:
                                  - =..dataObject.name.patientName
                                  - " (patient)"
                                dataOut: PatientSummaryRoom.formData.concatPatientName

                            - if:
                              - =.builtIn.string.equal:
                                  dataIn:
                                    string1: =..formData.cancelSingle.cancelSelect
                                    string2: "Facility"
                              - ..formData.cancelByPatientOrProvider@: =..formData.concatProviderName
                              - ..formData.cancelByPatientOrProvider@: =..formData.concatPatientName
                            - =.builtIn.string.concat:
                                dataIn:
                                  - "Your appointment for "
                                  - =..formData.sendMessageSTime
                                  - " has been canceled by "
                                  - =..formData.cancelByPatientOrProvider
                                  - ". "
                                dataOut: PatientSummaryRoom.formData.sendMessageContent.msg2
                            - =.builtIn.string.concat:
                                dataIn:
                                  - =..formData.sendMessageContent.msg1
                                  - =..formData.sendMessageContent.msg2
                                  - " "
                                  - =..formData.sendMessageContent.msg3
                                  - =..formData.reasonForCancelation
                                dataOut: PatientSummaryRoom.formData.sendMessageContent.res
                            # 删除预约
                            - .Global.jwt.edge.bvid@: =.Global.currentFacility.id
                            - =.Global.jwt.edgeAPI.store: ""
                            - =..deleteMeeting.edgeAPI.store: ""
                        - actionType: evalObject
                          object:
                            - .Global.jwt.edge.bvid@: =.Global.currentFacility.id
                            - =.Global.jwt.edgeAPI.store: ""
                            - ..apiRequest.email.docStoreReq.eid@: =..apiRequest.emailEdge.edgeResp.edge.0.id
                            - ..apiRequest.email.docStoreReq.name.data.content@: =..formData.sendMessageContent.res
                            - ..apiRequest.email.docStoreReq.name.title@: "Appointment cancelled notification"
                            - ..apiRequest.email.docStoreReq.name.data.senderAvatarId@: =.Global.facilityAvatarID
                            - ..apiRequest.email.docStoreReq.name.data.senderName@: "AiTmed Auto-Reply"
                            - =..apiRequest.email.docAPI.store: ""
                            - ..apiRequest.cancelMeetingDoc.docIn.eid@: =.Global.formData.meetingDocEid
                            - ..apiRequest.cancelMeetingDoc.docIn.reid@: =.Global.formData.meetingDocReid                            
                            - ..apiRequest.cancelMeetingDoc.docIn.name.data.role@: =..formData.cancelSingle.cancelSelect
                            - ..apiRequest.cancelMeetingDoc.docIn.name.data.reason@: =..formData.reasonForCancelation
                            - =..apiRequest.cancelMeetingDoc.docAPI.store: ""                                
                            - ..apiRequest.email.docStoreReq.name.data.content@: ""
                        - actionType: popUp
                          popUpView: successView
                        - actionType: popUpDismiss
                          popUpView: cancelAppointmentTag

                        - goto: ScheduleManagementRoom 
        

        # 没有选中patient provider的轻提示
        - type: popUp # popUp
          viewTag: noMessageTag
          img: miniRedAlert.svg
          style:
            width: "1"
            height: "1"
            backgroundColor: "0x00000033"
            top: "0"
            zIndex: "20"
          msg: Please select cancel by
          onClick:
            - actionType: popUpDismiss
              popUpView: noMessageTag
          children:
            - type: view 
              style:
                width: "0.29"
                height: "0.055"
                top: "0.04"
                left: "0.435"
                zIndex: "10"
                backgroundColor: "0xffffff"
                borderRadius: "3px"
                textAlign:
                  y: center
              children:
                - type: image
                  path: ___.img
                  style:
                    top: "0.017"
                    left: "0.08"
                    width: "0.015"
                    height: "0.022"
                - type: label
                  text: ___.msg
                  style:
                    top: "0.016"
                    left: "0.1"
                    height: "0.055"
                    fontSize: .Nfont.nf4
                    color: "0xe24445"  
        
        # 没有填内容的轻提示
        - type: popUp # popUp
          viewTag: noReasonTag
          img: miniRedAlert.svg
          style:
            width: "1"
            height: "1"
            backgroundColor: "0x00000033"
            top: "0"
            zIndex: "20"
          msg: Please enter reason for cancelation
          onClick:
            - actionType: popUpDismiss
              popUpView: noMessageTag
          children:
            - type: view 
              style:
                width: "0.29"
                height: "0.055"
                top: "0.04"
                left: "0.435"
                zIndex: "10"
                backgroundColor: "0xffffff"
                borderRadius: "3px"
                textAlign:
                  y: center
              children:
                - type: image
                  path: ___.img
                  style:
                    top: "0.017"
                    left: "0.06"
                    width: "0.015"
                    height: "0.022"
                - type: label
                  text: ___.msg
                  style:
                    top: "0.016"
                    left: "0.08"
                    height: "0.055"
                    fontSize: .Nfont.nf4
                    color: "0xe24445"  

        # 取消会议成功弹窗
        - .BaseSuccessfulView: ""
          viewTag: successView
          msg: "cancel Successfully!"
        - .BaseSuccessfulView: ""
          viewTag: inviteSuccessView
          msg: "Invite Successfully!"
          onClick:
            - actionType: evalObject
              object: 
                .Global._nonce@: 
                  =.builtIn.math.random: ""          
            - actionType: evalObject
              object:
                - =..apiRequest.inviteParticipant.edgeAPI.get: ""                                          
            - actionType: builtIn
              funcName: redraw
              viewTag: participantsView
            - actionType: popUpDismiss
              popUpView: inviteSuccessView    
    - type: popUp
      viewTag: noAvailableTag
      message: "There is no appointment available"
      path: aboutBlue.svg
      style:
        width: "0.3"
        height: "0.4"
        top: "0.3"
        left: "0.415"
        zIndex: "100000"
        backgroundColor: "0xffffff"
        borderRadius: "7"
        border: 
          style: "3"
        borderColor: "#f4f8fa"
        boxShadow: "0px 0px  5px 2px #f4f8fa"
      children:
        - type: image
          path: __.path
          style: 
            left: "0.12"
            width: "0.06"
            top: "0.04"
        - type: label
          text: __.message
          text2: _.text3 # "v'
          text3: "v"
          text4: __.children.1.text # "ok"
          style:
            .LabelStyle:
              left: "0"
              top: "0.18"
              width: "0.3"
              height: "0.06"
              color: "0x000000"
              fontSize: .Nfont.nf4
              # fontStyle: "bold"
              fontFamily: "sans-serif"
              textAlign:
                x: center
                y: center
        - type: button
          text: ok
          style:
            width: "0.06"
            left: "0.12"
            height: "0.04"
            top: "0.3"
            color: "0xffffff"
            backgroundColor: "#005795"
            fontSize: .Nfont.nf4
            border:
              style: "3"
              color: "#005795"
            borderRadius: "5"
          onClick:
            - actionType: popUpDismiss
              popUpView: noAvailableTag                          
    - type: popUp
      viewTag: dateCheck
      message: "Please don't choose the past time"
      path: aboutBlue.svg
      style:
        width: "0.3"
        height: "0.4"
        top: "0.3"
        left: "0.415"
        zIndex: "100000"
        backgroundColor: "0xffffff"
        borderRadius: "7"
        border: 
          style: "3"
        borderColor: "#f4f8fa"
        boxShadow: "0px 0px  5px 2px #f4f8fa"
      children:
        - type: image
          path: __.path
          style: 
            left: "0.12"
            width: "0.06"
            top: "0.04"
        - type: label
          text: __.message
          text2: _.text3 # "v'
          text3: "v"
          text4: __.children.1.text # "ok"
          style:
            .LabelStyle:
              left: "0"
              top: "0.18"
              width: "0.3"
              height: "0.06"
              color: "0x000000"
              fontSize: .Nfont.nf4
              # fontStyle: "bold"
              fontFamily: "sans-serif"
              textAlign:
                x: center
                y: center
        - type: button
          text: ok
          style:
            width: "0.06"
            left: "0.12"
            height: "0.04"
            top: "0.3"
            color: "0xffffff"
            backgroundColor: "#005795"
            fontSize: .Nfont.nf4
            border:
              style: "3"
              color: "#005795"
            borderRadius: "5"
          onClick:
            - actionType: popUpDismiss
              popUpView: dateCheck


