EvaluationNoteReview:
  title: 'Evaluation Note'
  init:
    - .SignInCheck
    - if:
      - =.builtIn.string.equal:
          dataIn:
            string1: =..newNote.document.name.data.authority
            string2: "Private"
      - ..formData.signIsHidden@: false
      - ..formData.isEditable@: false
    - =.builtIn.string.concat:
        dataIn:
          - =.Global.formData.providerInfo.name.data.fullName
          - ","
          - =.Global.formData.providerInfo.name.data.title
        dataOut: EvaluationNoteReview.formData.providerFullName
  # 签名显示,默认为none
  formData:
    providerFullName: ""
    flag: "none"
    temporarySignature: ""
    whetherSign: ""
    signIsHidden: true
    isEditable: true
  components: 
    - type: view
      style:
        width: '1'
        height: '1'
        margin: auto
      children:
        - .SideMenuBar:
          children:
            - .aitLogo:
            - .MenuBar:
        - .TopBar:
        - .BodyView:
          style: 
            height: "0.93"
          children:
            - .AppointmentLobby:
            - type: view
              style:
                top: "0.06"
                left: "0.665"
                width: "0.065"
              onClick:
                - actionType: evalObject
                  object:
                    - =.builtIn.EcosObj.exportPDF:
                        dataIn:
                          ecosObj: =.Global.formData.medicalRecords
                          viewTag: mainView                
              children:
                - type: image
                  path: downLoadBlue.svg
                  style:
                    marginTop: "0.006"
                    display: inline-block
                    width: "0.009"
                    height: "0.015"
                - type: label
                  text: "Download"
                  style:
                    display: inline-block
                    width: "0.055"
                    color: "0x0063A8"
                    fontSize: .Nfont.nf4
                    fontWeight: "600"
                    textAlign:
                      x: center
                      y: center
            - .GotoBack:
            - type: view
              style:
                left: "0.008"
                width: "0.824"
                height: "0.82"
                top: "0.1"
                overflow: hidden
                backgroundColor: "0xffffff"
              children:
                - type: view
                  viewTag: mainView
                  style:
                    width: "0.59"
                    margin: "auto"
                  children:
                    - type: view
                      style:
                        width: "0.39"
                        margin: "auto"
                      children:
                        - type: scrollView
                          style: 
                            width: "0.39"
                            height: "0.7"
                            overflow: scroll
                          children:
                            - type: view
                              style:
                                marginTop: "0.02"
                                width: "0.39"
                                height: "0.1"
                              children:
                                - type: image
                                  path: aitmedLogoBlack.png
                                  style:
                                    top: "0"
                                    width: "0.056"
                                    height: "0.1"
                                - type: view
                                  style:
                                    marginLeft: "0.056"
                                    height: "0.1"
                                    width: "0.334"
                                  children:
                                    - type: label
                                      dataKey: Global.formData.medicalRecords.name.data.providerInfo.fullName
                                      style:
                                        height: "0.05"
                                        width: "0.334"
                                        fontSize: .Nfont.nf5
                                        fontFamily: "Roboto"
                                        textAlign: 
                                          x: center
                                          y: center
                                    - type: label
                                      dataKey: Global.currentFacility.name.basicInfo.medicalFacilityName
                                      style:
                                        height: "0.05"
                                        width: "0.334"
                                        fontSize: .Nfont.nf5
                                        fontFamily: "Roboto"
                                        textAlign: 
                                          x: center
                                          y: center
                                - type: label
                                  dataKey: Global.currentFacility.name.basicInfo.website
                                  style:
                                    fontSize: .Nfont.nf0
                                    color: "0x7e7e7e" 
                                    textIndent: "0.5em"                           
                            - type: view
                              style:
                                marginTop: "0.04"
                                width: "0.39"
                                height: auto
                              children:
                                - .PrescriptionListBox:
                                  children: 
                                    - .PrescriptionLabel:
                                      text: NPI#
                                    - .PrescriptionDatakey:
                                      dataKey: Global.formData.medicalRecords.name.data.providerInfo.npi 
                                - .PrescriptionListBox:
                                  children: 
                                    - .PrescriptionLabel:
                                      text: "DEA #"
                                    - .PrescriptionDatakey:
                                      dataKey: Global.formData.medicalRecords.name.data.providerInfo.dea
                                - .PrescriptionListBox:
                                  children: 
                                    - .PrescriptionLabel:
                                      text: "Email:"
                                    - .PrescriptionDatakey:
                                      dataKey: Global.formData.medicalRecords.name.data.providerInfo.email
                                - .PrescriptionListBox:
                                  children: 
                                    - .PrescriptionLabel:
                                      text: "Phone:"
                                    - .PrescriptionDatakey:
                                      dataKey: Global.formData.medicalRecords.name.data.providerInfo.phone
                            - type: view 
                              style:  
                                marginTop: "0.02"
                                width: "0.39"
                                height: "0.002"
                                backgroundColor: "0x707070"                                   
                            - type: view
                              style:
                                marginTop: "0.02"
                                width: "0.39"
                                height: "0.1"
                              children:
                                - type: image
                                  path: exam.png
                                  style:
                                    top: "0"
                                    width: "0.056"
                                    height: "0.1"
                                - type: label
                                  text=func: .builtIn.string.formatUnixtime_en
                                  dataKey: Global.roomInfo.edge.atime
                                  style:
                                    marginLeft: "0.056"
                                    height: "0.1"
                                    width: "0.334"
                                    top: "0"
                                    fontSize: .Nfont.nf4
                                    textAlign: 
                                      x: right
                                      y: center 
                            - type: view
                              style:
                                marginTop: "0.02"
                                width: "0.39"
                                height: auto
                              children:
                                - .PrescriptionListBox:
                                  children: 
                                    - .PrescriptionLabel:
                                      text: "Patient Name:"
                                    - .PrescriptionDatakey:
                                      dataKey: Global.formData.patientInfo.name.data.basicInfo.fullName 
                                - .PrescriptionListBox:
                                  children: 
                                    - .PrescriptionLabel:
                                      text: "DOB:"
                                    - .PrescriptionDatakey:
                                      dataKey: Global.formData.patientInfo.name.data.basicInfo.dateOfBirth
                                - .PrescriptionListBox:
                                  children: 
                                    - .PrescriptionLabel:
                                      text: "Phone:"
                                    - .PrescriptionDatakey:
                                      dataKey: Global.formData.patientInfo.name.data.basicInfo.phone
                                - .PrescriptionListBox:
                                  children: 
                                    - .PrescriptionLabel:
                                      text: "Email:"
                                    - .PrescriptionDatakey:
                                      style:
                                      dataKey: Global.formData.patientInfo.name.data.contactInfo.email                                                        
                            - type: view 
                              style:  
                                marginTop: "0.02"
                                width: "0.39"
                                height: "0.003"
                                backgroundColor: "0x707070"                                   
                            - type: view
                              style:
                                marginTop: "0.02"
                                width: "0.39"
                                height: auto
                              children: 
                                - type: label
                                  text: 'Physician Evaluation Report'
                                  style:
                                    width: "0.39"
                                    fontFamily: "sans-serif"
                                    fontSize: .Nfont.nf2
                                    fontWeight: "600"
                                    textAlign: 
                                      x: center
                                - type: view
                                  style: 
                                    marginTop: "0.01"
                                    width: "0.39"
                                    height: auto
                                  children: 
                                    - type: label
                                      text: 'HPI & Patient History'
                                      style: 
                                        width: "0.39"
                                        fontSize: .Nfont.nf4
                                        color: "0x6b6b6b"
                                        fontWeight: "600"
                                    - type: textView
                                      dataKey: Global.formData.medicalRecords.name.data.patientHistory
                                      isEditable: ..formData.isEditable
                                      style: 
                                        marginTop: "0.01"
                                        height: "0.15"
                                        width: '0.39'
                                        fontSize: .Nfont.nf4
                                        fontFamily: "Roboto"
                                        fontWeight: "300"
                                        boxSizing: border-box
                                        backgroundColor: "0xffffff"
                                        border:   
                                          style: "3"
                                        borderWidth: "1"
                                        borderColor: "0x6b6b6b"
                                - type: view
                                  style: 
                                    marginTop: "0.02"
                                    width: "0.39"
                                    height: auto
                                  children: 
                                    - type: label
                                      text: 'Physical Examination'
                                      style: 
                                        width: "0.39"
                                        fontSize: .Nfont.nf4
                                        color: "0x6b6b6b"
                                        fontWeight: "600"
                                    - type: textView
                                      dataKey: Global.formData.medicalRecords.name.data.PhysicalExamination
                                      isEditable: =..formData.isEditable
                                      style: 
                                        marginTop: "0.01"
                                        height: "0.15"
                                        width: '0.39'
                                        fontSize: .Nfont.nf4
                                        backgroundColor: "0xffffff"
                                        fontFamily: "Roboto"
                                        fontWeight: "300"
                                        boxSizing: border-box
                                        border:   
                                          style: "3"
                                        borderWidth: "1"
                                        borderColor: "0x6b6b6b"
                                - type: view
                                  style:  
                                    marginTop: "0.02"
                                    width: "0.39"
                                    height: auto
                                  children: 
                                    - type: label
                                      text: 'Lab and imaging summary'
                                      style: 
                                        width: "0.39"
                                        fontSize: .Nfont.nf4
                                        color: "0x6b6b6b"
                                        fontWeight: "600"
                                    - type: textView
                                      dataKey: Global.formData.medicalRecords.name.data.LabAndImage
                                      isEditable: =..formData.isEditable
                                      style:  
                                        marginTop: "0.01"
                                        height: "0.15"
                                        width: "0.39"
                                        fontSize: .Nfont.nf4
                                        backgroundColor: "0xffffff"
                                        fontFamily: "Roboto"
                                        fontWeight: "300"
                                        boxSizing: border-box
                                        border:   
                                          style: "3"
                                        borderWidth: "1"
                                        borderColor: "0x6b6b6b"
                                - type: view
                                  style: 
                                    marginTop: "0.02"
                                    width: "0.39"
                                    height: auto
                                  children:
                                    - type: label
                                      textBoard: 
                                        - text: "ICD10:"
                                        - br: 
                                        - text: 'lo see more descriptive list, click'
                                      style:
                                        width: "0.39"
                                        fontSize: .Nfont.nf4
                                        color: "0x6b6b6b"
                                        fontWeight: "600"
                            
                                    - type: view
                                      viewTag: listData
                                      style:
                                        marginTop: "0.01"
                                        width: "0.39"
                                        height: auto
                                        backgroundColor: "0xcdcdcd33"
                                      children:
                                        - type: view
                                          style:
                                            width: "0.39"
                                            height: "0.025"
                                          children:
                                            - type: label
                                              text: "#Code"
                                              style:
                                                top: "0"
                                                width: "0.1"
                                                fontSize: .Nfont.nf4
                                                fontWeight: "600"
                                                textAlign:
                                                  x: center
                                            - type: label
                                              text: "Description"
                                              style:
                                                top: "0"
                                                left: "0.12"
                                                width: "0.15"
                                                fontSize: .Nfont.nf4
                                                fontWeight: "600"
                                                textAlign:
                                                  x: center
                                            - type: label
                                              text: "Comment"
                                              style:
                                                top: "0"
                                                left: "0.29"
                                                width: "0.1"
                                                fontSize: .Nfont.nf4
                                                fontWeight: "600"
                                                textAlign:
                                                  x: center            
                                        - type: list
                                          contentType: listObject
                                          listObject: .Global.formData.medicalRecords.name.data.descriptiveList 
                                          iteratorVar: itemObject
                                          style:
                                            width: "0.39"
                                            height: auto
                                            margin: "0"  
                                          children:
                                            - type: listItem
                                              itemObject: ""
                                              style:
                                                width: "0.39"
                                                height: "0.06"
                                                marginTop: "0.01"
                                              children:          
                                                - type: label
                                                  dataKey: itemObject.code
                                                  style:
                                                    top: "0"
                                                    width: "0.1"
                                                    height: "0.06"
                                                    fontSize: .Nfont.nf2
                                                    textAlign: 
                                                      x: center
                                                      y: center
                                                - type: label
                                                  dataKey: itemObject.description
                                                  style:   
                                                    top: "0"
                                                    left: "0.12"
                                                    width: "0.15"
                                                    height: "0.06"
                                                    fontSize: .Nfont.nf2
                                                    textAlign: 
                                                      x: left
                                                      y: center
                                                - type: label
                                                  dataKey: itemObject.comment
                                                  style:
                                                    top: "0"
                                                    left: "0.29"
                                                    width: "0.1"
                                                    height: "0.06"
                                                    fontSize: .Nfont.nf2
                                                    textAlign: 
                                                      x: center
                                                      y: center
                                - type: view
                                  style: 
                                    marginTop: "0.02"
                                    width: "0.39"
                                    height: auto
                                  children: 
                                    - type: label
                                      text: 'Assessment & Treatment Plan'
                                      style: 
                                        width: "0.39"
                                        fontSize: .Nfont.nf4
                                        color: "0x6b6b6b"
                                        fontWeight: "600"
                                    - type: textView
                                      dataKey: Global.formData.medicalRecords.name.data.datatreatmentPlan
                                      isEditable: =..formData.isEditable
                                      style: 
                                        marginTop: "0.01"
                                        height: "0.15"
                                        width: '0.39'
                                        fontSize: .Nfont.nf4
                                        backgroundColor: "0xffffff"
                                        fontFamily: "Roboto"
                                        fontWeight: "300"
                                        boxSizing: border-box
                                        border:   
                                          style: "3"
                                        borderWidth: "1"
                                        borderColor: "0x6b6b6b"
                            - type: view 
                              style:  
                                marginTop: "0.02"
                                width: "0.39"
                                height: "0.002"
                                backgroundColor: "0x707070"
                            - type: view
                              style:
                                marginTop: "0.02"
                                width: "0.39"
                                height: auto
                              children:
                                - .PrescriptionLabel:
                                  text: "Signature:"
                                  style:
                                    width: "0.39"
                            - type: view
                              style:
                                marginTop: "0.05"
                                width: "0.39"
                                display: flex
                                flexDirection: column
                                flexWrap: wrap
                                alignContent: space-around
                                justifyContent: center
                              children:
                                - .SignAreaView:
                                  children:
                                    - type: image
                                      path=func: .builtIn.utils.prepareDocToPath
                                      dataKey: Global.formData.medicalRecords.name.data.signatureId
                                      style:
                                        .SignCanvasStyle:
                                    - type: label
                                      text: "X"
                                      style:
                                        .SignLabelStyle:                      
            - .FormsBottomView: 
              children:
                - .FormsBottomButtons:
                  children:
                    - .FormsBottomMiddleButton:
                      text: Done
                      onClick:
                        - actionType: builtIn
                          funcName: goBack
                          reload: true 