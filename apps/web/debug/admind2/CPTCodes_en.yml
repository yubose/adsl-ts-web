CPTCodes:
  pageNumber: "260" 
  viewPort: top
  title: "CPT Codes"
  init:
    - .SignInCheck
    - actionType: evalObject
      object:
        .Global._nonce@:
          =.builtIn.math.random: ""
    - ..codeList.docAPI.get
    - =.builtIn.array.splitTableList: 
        dataIn: 
          arrObj: =..codeList.list.doc
          numX: "9"
          numY: "1"
        dataOut: CPTCodes.formData.tableData
    - ..formData.tableList@: =..formData.tableData.0
    - =.builtIn.string.concat:
        dataIn:
          - =..formData.tablePageNum # page num
          - " / "
          - =..formData.tableData.1 # total page
        dataOut: CPTCodes.formData.tableCurrentPage # current page                           
    - =.builtIn.number.addition: # get totalPage+1 to verify legitimacy of gotoPageNum
        dataIn:
          num: =..formData.tableData.1
          step: "1"
        dataOut: CPTCodes.formData.totalPageMore # update page num        
  save: 
    - =.CPTCodes.newCode.docAPI.store: ""
  allListString: []
  allCodes: []
  formData:
    tableData: []
    tableList: []
    tablePageNum: "1"
    tableCurrentPage: "1"
    gotoPageNum: ""
    totalPageMore: "" # totalPage(tableData.1)+1
  newCPT:
    code: ""
    charge: ""
    description: ""
    pos: ""
  newCode:
    docRes: ""
    document: 
      .Document: ""
      type: .DocType.CPTCode
      name:
        # title: ""
        # type: ..newSign.document.subtype.mediaType
        data: 
          code: ""
          charge: ""
          description: ""
          pos: ""
      eid: .Global.fac_rootNotebook
      id: ""
      subtype:
        mediaType: ""        
    docAPI: # DOCAPI
      .DocAPI: ""    
      store:
        api: cd
        dataIn: newCode.document  
        dataOut: CPTCodes.newCode.docRes
  codeList:
    list: 
      edge: []
    docAPI:
      get: 
        api: rd
        dataKey: codeList.list
        type: .DocType.CPTCode
        id: .Global.fac_rootNotebook
        xfname: eid
        obfname: "mtime"
        maxcount: "10000"
        _nonce: =.Global._nonce
  components:
    - type: view
      style:
        width: '1'
        height: '1'
        margin: auto
      children:
        # - .BaseCheckView: ""
        #   message: "You don't have the authority to create a new appointment"
        #   viewTag: scheduleInfoAuthCreate
        #   style: 
        #     zIndex: "100000"
        - .SideMenuBar:
          children:
            - .aitLogo:
            - .MenuBar:
        - .TopBar:
        - .BodyView:
            children:
            - .Label2:
              type: label
              text: "CPT Codes"
              style:
                left: "0.03"
                fontSize: "2.9vh"
                top: "0.02"            
        - .ContentView:
          style: 
            height: "0.82"
            left: "0.19"
            top: "0.145"
            # position: fixed
          children:
            - type: view
              style:
                left: "0.035"
                top: "0.04"
                width: "0.72"
                height: "0.06"
                backgroundColor: "#EAEAEA"
                borderRadius: "5"
                border: 
                  style: "3"
                borderColor: "0xeaeaea"
                borderWidth: "1"
              children:
                - type: label
                  text: Code
                  style:
                    top: "0"
                    left: "0.015"
                    height: "0.06"
                    width: "0.1"
                    textAlign: 
                      y: center
                - type: textField
                  placeholder: "Enter Search Term Here"
                  style:
                    top: "0.01"
                    left: "0.055"
                    height: "0.036"
                    width: "0.3"
                    border:
                      style: "3"
                      color: "#dededf"
                    borderRadius: "3"
                    textAlign: 
                      y: center
                - type: button
                  text: Search
                  onClick:
                  style: 
                    left: "0.365"
                    top: "0.01"
                    height: "0.04"
                    width: "0.05"
                    boxSizing: border-box
                    backgroundColor: "0x005795"
                    color: "0xffffff"
                    border: 
                      style: "3"  
                    borderColor: "0x005795" 
                    borderRadius: "3"
            - type: view
              onClick:
                - actionType: evalObject
                  object:
                    - ..newCPT.code@: ""
                    - ..newCPT.charge@: ""
                    - ..newCPT.description@: ""
                    - ..newCPT.pos@: ""
                    - ..newCode.document.id@: ""   
                - actionType: builtIn
                  funcName: redraw
                  viewTag: AddCode
                - actionType: popUp
                  popUpView: AddCode         
              style:
                width: '0.1'
                left: '0.655'
                height: '0.05'
                top:  '0.135'
                backgroundColor: '#005795'
                borderRadius: "5"
                color: '#FFFFFF'
              children:
                - .Label1:
                  text: Add New Code
                  style: 
                    fontSize: '15'
                    left: '0.023'
                    height: '0.05'
                    color: '#e8eef3'
                    textAlign: 
                      y: center
                - type: image
                  path: addWhite.svg
                  style:
                    width: '0.01'
                    top: '0.015'
                    left: '0.009'
            # Table
            - type: view
              viewTag: tableView
              style:
                left: "0.035"
                top: "0.2"
                width: "0.72"
                height: "auto"
                # backgroundColor: "0xf3f3f3"
                borderRadius: "8"
                boxSizing: content-box
                border:
                  style: "3"
                borderColor: "0x7070704f"
              children:
                # Title
                - type: label
                  viewTag: tableTitle
                  text: "Search Results"
                  style:
                    textIndent: "2em"
                    width: "0.72"
                    margin: "0"
                    left: "0"
                    height: "0.055"
                    backgroundColor: "0x014c82"
                    fontSize: .Nfont.nf3
                    fontWeight: "500"
                    fontFamily: "Poppins"
                    # boxSizing: border-box
                    color: "0xffffff"
                    borderTopLeftRadius: "8px"
                    borderTopRightRadius: "8px"
                    textAlign:
                      y: center
                # Header
                - type: view
                  viewTag: tableHeader
                  style:
                    marginTop: "0.02"
                    width: "0.72"
                    margin: "0"
                    left: "0"
                    height: "0.05"
                    backgroundColor: "0xf9fafb"
                  children:
                    - type: label
                      text: "Code"
                      style: 
                        left: "0"
                        top: "0"
                        width: "0.12"    
                        height: "0.05"
                        fontSize: .Nfont.nf2
                        fontStyle: "bold"                     
                        color: "0x6b7280"
                        borderWidth: "1"
                        borderRight: "solid 1px  #7070704f"
                        textAlign: 
                          x: center
                          y: center
                    - type: label
                      text: "Description"
                      style: 
                        left: "0.12"
                        top: "0"
                        width: "0.34"    
                        height: "0.05"
                        fontSize: .Nfont.nf2
                        fontStyle: "bold"                     
                        color: "0x6b7280"
                        borderWidth: "1"
                        borderRight: "solid 1px  #7070704f"
                        textAlign: 
                          x: center
                          y: center
                    - type: label
                      text: "POS"
                      style: 
                        left: "0.46"
                        top: "0"
                        width: "0.08"    
                        height: "0.05"
                        fontSize: .Nfont.nf2
                        fontStyle: "bold"                     
                        color: "0x6b7280"
                        borderWidth: "1"
                        borderRight: "solid 1px  #7070704f"
                        textAlign: 
                          x: center
                          y: center
                    - type: label
                      text: "Charge"
                      style: 
                        left: "0.54"
                        top: "0"
                        width: "0.12"    
                        height: "0.05"
                        fontSize: .Nfont.nf2
                        fontStyle: "bold"                     
                        color: "0x6b7280"
                        borderWidth: "1"
                        borderRight: "solid 1px  #7070704f"
                        textAlign: 
                          x: center
                          y: center
                    - type: label
                      text: "Edit"
                      style: 
                        left: "0.66"
                        top: "0"
                        width: "0.06"    
                        height: "0.05"
                        fontSize: .Nfont.nf2
                        fontStyle: "bold"                     
                        color: "0x6b7280"
                        borderWidth: "1"
                        # borderRight: "solid 1px  #7070704f"
                        textAlign: 
                          x: center
                          y: center   
                # Body
                - type: list
                  viewTag: tableBody
                  contentType: listObject
                  listObject: ..formData.tableList
                  iteratorVar: itemObject
                  style:
                    width: "0.72"
                    margin: "0"
                    left: "0"
                    height: auto
                    borderTop: "solid 1px  #7070704f"
                    backgroundColor: "0xffffff"
                    fontSize: .Nfont.nf2
                  children:
                    - type: listItem
                      itemObject: 
                      style:
                        borderBottom: "solid 1px  #7070704f"
                        minHeight: "4.5vh"
                        height: "auto"
                        textAlign:
                          x: center
                          y: center
                      children:
                        - type: label
                          dataKey: itemObject.name.data.code
                          style:  
                            left: "0"
                            top: "0"
                            width: "0.12"    
                            height: "0.045"
                            borderWidth: "1"
                            borderRight: "solid 1px  #7070704f"
                            textAlign: 
                              x: center
                              y: center                              
                        - type: label
                          dataKey: itemObject.name.data.description
                          style:
                            left: "0.12"
                            top: "0"
                            width: "0.34"    
                            height: "0.045"
                            borderWidth: "1"
                            borderRight: "solid 1px  #7070704f"
                            textAlign: 
                              x: center
                              y: center                              
                        - type: label
                          dataKey: itemObject.name.data.pos
                          style:
                            left: "0.46"
                            top: "0"
                            width: "0.08"    
                            height: "0.045"
                            borderWidth: "1"
                            borderRight: "solid 1px  #7070704f"
                            textAlign: 
                              x: center
                              y: center                              
                        - type: label
                          dataKey: itemObject.name.data.charge
                          style:   
                            left: "0.54"
                            top: "0"
                            width: "0.12"    
                            height: "0.045"
                            borderWidth: "1"
                            borderRight: "solid 1px  #7070704f"
                            textAlign: 
                              x: center
                              y: center  
                        - type: view
                          style: 
                            left: "0.64"
                            top: "0"
                            width: "0.08"    
                            height: "0.045"
                            borderWidth: "1"
                            # borderRight: "solid 1px  #7070704f"
                            textAlign: 
                              x: center
                              y: center 
                          children:
                            - type: image
                              path: editBlue.svg
                              style:
                                top: "0.01"
                                left: "0.035"
                                width: "0.03"                                                             
                                height: "0.02"
                              onClick:
                                - actionType: evalObject
                                  object: 
                                    .Global._nonce@: 
                                      =.builtIn.math.random: ""
                                - emit:
                                    dataKey:
                                      var: itemObject
                                    actions:
                                      - ..newCPT.code@: $var.name.data.code 
                                      - ..newCPT.charge@: $var.name.data.charge
                                      - ..newCPT.description@: $var.name.data.description
                                      - ..newCPT.pos@: $var.name.data.pos
                                      - ..newCode.document.id@: $var.id
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: EditCode
                                - actionType: popUp
                                  popUpView: EditCode                                

            # TableFooter
            - type: view
              viewTag: tableFooter
              style:
                left: "0.565"
                top: "0.78"
                width: "0.19"
                height: "0.02622"
              children:   
                # Current page
                - type: view
                  style:
                    top: "0.005"
                    width: "0.08"
                    height: "0.0155"
                  children:
                    - type: label
                      text: "Current page:"
                      style:
                        display: inline-block
                        fontSize: .Nfont.nf0
                        color: "0x333333"
                        textAlign:
                          x: "center"
                          y: "center"
                    - type: label
                      dataKey: formData.tableCurrentPage
                      style:
                        marginLeft: "0.005"
                        display: inline-block
                        fontSize: .Nfont.nf0
                        color: "0x333333"
                        textAlign:
                          x: "center"
                          y: "center"
                # Previous & Next
                - type: view
                  style:
                    top: "0"
                    left: "0.076"
                    width: "0.05168"
                    height: "0.02576"
                  children:
                    - type: image
                      path: tableLeft.svg
                      onClick:
                        - actionType: evalObject
                          object:
                            - if: 
                              - =.builtIn.number.less: 
                                  dataIn: 
                                    num1: =..formData.tablePageNum
                                    num2: 2
                              - continue
                              - actionType: evalObject
                                object:
                                  - =.builtIn.number.Subtraction: 
                                      dataIn:
                                        num: =..formData.tablePageNum
                                        step: "1"
                                      dataOut: CPTCodes.formData.tablePageNum
                                  - =.builtIn.array.splitTableList: 
                                      dataIn: 
                                        arrObj: =..codeList.list.doc
                                        numX: "9"
                                        numY: =..formData.tablePageNum
                                      dataOut: CPTCodes.formData.tableData
                                  - ..formData.tableList@: =..formData.tableData.0
                                  - =.builtIn.string.concat: # re-concat
                                      dataIn:
                                        - =..formData.tablePageNum # page num
                                        - " / "
                                        - =..formData.tableData.1 # total page
                                      dataOut: CPTCodes.formData.tableCurrentPage # current page                                       
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: tableView
                        - actionType: builtIn 
                          funcName: redraw
                          viewTag: tableFooter      
                      style:
                        top: "0"
                        width: "0.01456"
                        height: "0.02576"
                    - type: label
                      viewTag: pageNumView
                      dataKey: formData.tablePageNum
                      style:
                        top: "0"
                        left: "0.01856"
                        width: "0.01446"
                        height: "0.02576"
                        fontSize: .Nfont.nf0
                        fontWeight: "500"
                        color: "0xffffff"
                        backgroundColor: "0x005795"
                        borderRadius: "3"
                        textAlign:
                          x: center
                          y: center
                    - type: image
                      path: tableRight.svg
                      onClick:
                        - actionType: evalObject
                          object:
                            .Global._nonce@:
                              =.builtIn.math.random: "" 
                        - actionType: evalObject
                          object:
                            - if: 
                              - =.builtIn.number.less: 
                                  dataIn: 
                                    num1: =..formData.tablePageNum
                                    num2: =..formData.tableData.1
                              - actionType: evalObject
                                object:
                                  - =.builtIn.number.addition: 
                                      dataIn:
                                        num: =..formData.tablePageNum
                                        step: "1"
                                      dataOut: CPTCodes.formData.tablePageNum # update page num
                                  - =.builtIn.array.splitTableList: 
                                      dataIn: 
                                        arrObj: =..codeList.list.doc
                                        numX: "9"
                                        numY: =..formData.tablePageNum
                                      dataOut: CPTCodes.formData.tableData
                                  - ..formData.tableList@: =..formData.tableData.0
                                  - =.builtIn.string.concat: # re-concat
                                      dataIn:
                                        - =..formData.tablePageNum # page num
                                        - " / "
                                        - =..formData.tableData.1 # total page
                                      dataOut: CPTCodes.formData.tableCurrentPage # current page 
                              - continue                           
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: tableView  
                        - actionType: builtIn 
                          funcName: redraw
                          viewTag: tableFooter 
                      style:
                        top: "0"
                        left: "0.03712"
                        height: "0.02576"
                        width: "0.01456"
                # Go to
                - type: view
                  style:
                    top: "0"
                    left: "0.14"
                    width: "0.05"
                    height: "0.02496"
                  children:
                    - type: textField
                      viewTag: gotoView
                      dataKey: formData.gotoPageNum
                      style:
                        width: "0.02496"
                        top: "0"
                        height: "0.02576"
                        borderRadius: "3"
                        borderWidth: "1"
                        border:
                          style: "3"
                        boxSizing: border-box
                        borderColor: "0xd8d8d8"
                        fontSize: .Nfont.nf0
                        fontWeight: "500"
                        color: "0x333333"
                        textAlign: 
                          x: center 
                          y: center 
                    - type: button
                      text: "Go to"
                      style:
                        textDecoration: underline
                        left: "0.029"
                        top: "0"
                        height: "0.02576"
                        border:
                          style: "1"
                        fontSize: .Nfont.nf0
                        color: "0x333333"
                        backgroundColor: "0xffffff00"
                      onClick:
                        - actionType: evalObject
                          object:
                            .Global._nonce@:
                              =.builtIn.math.random: ""                           
                        - actionType: evalObject
                          object:
                            # gotoPageNum ?> 1
                            - if:
                              - =.builtIn.number.less: 
                                  dataIn: 
                                    num1: =..formData.gotoPageNum
                                    num2: 1
                              - continue
                              - actionType: evalObject
                                object:
                                  # gotoPageNum ?< totalPage+1
                                  - if: 
                                    - =.builtIn.number.less: 
                                        dataIn: 
                                          num1: =..formData.gotoPageNum
                                          num2: =..formData.totalPageMore
                                    - actionType: evalObject
                                      object:
                                        - =.builtIn.array.splitTableList: 
                                            dataIn: 
                                              arrObj: =..codeList.list.doc
                                              numX: "9"
                                              numY: =..formData.gotoPageNum
                                            dataOut: CPTCodes.formData.tableData
                                        - ..formData.tableList@: =..formData.tableData.0
                                        - =.builtIn.string.concat: # re-concat
                                            dataIn:
                                              - =..formData.gotoPageNum # page num
                                              - " / "
                                              - =..formData.tableData.1 # total page
                                            dataOut: CPTCodes.formData.tableCurrentPage # current page
                                        - ..formData.tablePageNum@: =..formData.gotoPageNum
                                        - ..formData.gotoPageNum@: ""
                                    - continue                        
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: tableView
                        - actionType: builtIn 
                          funcName: redraw
                          viewTag: tableFooter  
        # AddCode
        - type: popUp
          viewTag: AddCode
          style:
            left: "0.36"
            width: "0.4"
            top: "0.3"
            height: "0.5"
            zIndex: "200"
          children:
            - type: view
              style:
                width: "0.4"
                height: "0.4"
                border: 
                  style: "3"
                borderWidth: "1"
                borderColor: "0xdededf"
                borderRadius: "5"
                backgroundColor: "0xffffff"
              children:
                - type: view
                  style: 
                    top: "0.02"
                    left: "0.03"
                    width: "0.34"
                    height: "0.05"
                    border:
                      style: "2"
                    borderWidth: "1.5"
                    borderColor: "#EAEAEA"
                  children:
                    - type: label
                      text: "Add CPT Code"
                      style: 
                        height: "0.04"
                        width: "0.3"
                        fontSize: .Nfont.nf5
                        textAlign: 
                          x: left
                          y: center
                    - type: image
                      path: close1.png
                      style:
                        top: "0"
                        left: "0.335"
                        width: "0.03"                                                             
                        height: "0.03"
                        textAlign: 
                          x: left
                      onClick: 
                        - actionType: popUpDismiss
                          popUpView: AddCode   
                - type: view
                  style:
                    height: "0.32"
                    width: "0.4"
                    top: "0.08"
                    backgroundColor: "0xffffff"
                  children:
                    - .AddFacilityLabel:
                      textBoard: 
                        - text: "Code"
                        - text: "&nbsp;*"
                          color: "0xff0000"
                      style: 
                        left: "0.065"
                        top: "0.035"
                        fontSize: .Nfont.nf3
                    - .AddFacilityTextField: 
                      dataKey: newCPT.code
                      viewTag: codeListTag
                      onInput:
                        - actionType: evalObject
                          object:
                            - ..allListString@: []
                        - actionType: evalObject
                          object:                            
                            - =.builtIn.apiRequest.queryCPT:
                                dataIn:
                                  query: =..newCPT.code
                                dataOut: CPTCodes.allListString                         
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: CodeTag
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: CodeTags
                        - actionType: builtIn
                          funcName: show
                          viewTag: CodeTag
                        - actionType: popUp
                          popUpView: CodeTag
                          dismissOnTouchOutside: true
                      placeholder: ''
                      style: 
                        left: "0.1"
                        top: "0.03"
                        width: "0.08"
                        fontSize: .Nfont.nf3
                    - .AddFacilityLabel:
                      textBoard: 
                        - text: "Charge"
                        - text: "&nbsp;*"
                          color: "0xff0000"
                        - text: "&nbsp;&nbsp;$"
                      style: 
                        left: "0.2"
                        top: "0.035"
                        fontSize: .Nfont.nf3
                    - .AddFacilityTextField: 
                      dataKey: newCPT.charge
                      style: 
                        left: "0.25"
                        top: "0.03"
                        width: "0.07"
                        fontSize: .Nfont.nf3
                    - .AddFacilityLabel:
                      textBoard: 
                        - text: "Description"
                        - text: "&nbsp;*"
                          color: "0xff0000"
                      style: 
                        left: "0.04"
                        top: "0.105"
                        fontSize: .Nfont.nf3
                    - .AddFacilityTextField: 
                      dataKey: newCPT.description
                      viewTag: descriptionTag
                      onInput:
                        - actionType: evalObject
                          object:
                            - ..allListString@: []
                            - =.builtIn.apiRequest.queryCPT:
                                dataIn:
                                  query: =..newCPT.description
                                dataOut: CPTCodes.allListString
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: CodeTag
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: CodeTags
                        - actionType: builtIn
                          funcName: show
                          viewTag: CodeTag
                        - actionType: popUp
                          popUpView: CodeTag
                          dismissOnTouchOutside: true
                      placeholder: ''
                      style: 
                        left: "0.1"
                        top: "0.1"
                        width: "0.22"
                        fontSize: .Nfont.nf3
                    - .AddFacilityLabel:
                      textBoard: 
                        - text: "POS"
                        - text: "&nbsp;*"
                          color: "0xff0000"
                      style: 
                        left: "0.069"
                        top: "0.175"
                        fontSize: .Nfont.nf3
                    - type: select
                      dataKey: newCPT.pos
                      options:
                        .SelectData.placeOfService
                      required: "true"
                      style: 
                        left: "0.1"
                        top: "0.17"
                        width: "0.22"
                        fontSize: .Nfont.nf3
                        height: "0.044"
                        backgroundColor: "0xffffff"
                        borderWidth: "1"
                        border:
                          style: "3"
                          color: "0xdededf"  
                        borderRadius: "3"  
                - type: view  
                  viewTag: CodeTag
                  style:
                    width: "0.22"
                    top: "0.16"   
                    height: "0.21"
                    left: '0.1'
                    fontFamily: 'Poppins'
                    border: 
                      style: 3
                      color: "#eeeeee"
                    borderWidth: "1px" 
                    zIndex: 100
                    backgroundColor: '0xffffff'
                    display: none
                    isHidden: true
                  children:
                    - type: view
                      viewTag: CodeTags
                      style:
                        width: "0.22"  
                        height: "0.2"
                        left: "0"
                        marginTop: "0.01"
                        overflow: scroll
                      children: 
                        - type: list
                          contentType: listObject
                          listObject: ..allListString
                          iteratorVar: itemObject
                          viewTag: CodeTags
                          style:
                            width: "0.22"     
                            left: "0"
                            height: "0.2"
                            margin: "0"
                            marginTop: "0"
                          children: 
                            - type: listItem
                              itemObject: ''
                              style: 
                                backgroundColor: "0xffffff"
                                # hover:
                                #   backgroundColor: "0x6dacdacd"
                                width: "0.22"
                                left: "0"
                                marginTop: "0.001"
                                height: "auto"
                              children:
                                - type: label
                                  dataKey: itemObject
                                  onClick: 
                                    - emit:
                                        dataKey:
                                          var: itemObject
                                        actions:
                                          - ..newCPT.code@: $var.0
                                          - ..newCPT.description@: $var.1
                                    - actionType: builtIn
                                      funcName: redraw
                                      viewTag: codeListTag
                                    - actionType: builtIn
                                      funcName: redraw
                                      viewTag: descriptionTag
                                    - actionType: popUpDismiss
                                      popUpView: CodeTag
                                  style:
                                    width: "0.22"
                                    left: "0"
                                    textIndent: 20px 
                                    marginTop: "0"
                                    textAlign: 
                                      x: left
                                      y: center
                                    height: "auto"
                                    fontSize: "1.7vh"
                                    color: "0x143459"
                - .BottomButton:
                  text: "Save"
                  style:
                    top: "0.32"
                    width: "0.07"
                    backgroundColor: "#235591"
                    color: "#ffffff"
                    left: "0.29"
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: AddCode  
                    # - emit:
                    #     actions:
                    #       - =.builtIn.array.add:
                    #           dataIn:
                    #             object: =..formData.tableList
                    #             value: =..newCPT  # create copy .create by value ,not reference         
                    - actionType: evalObject
                      object: 
                        - ..newCode.document.name.data.code@: =..newCPT.code
                        - ..newCode.document.name.data.charge@: =..newCPT.charge
                        - ..newCode.document.name.data.description@: =..newCPT.description
                        - ..newCode.document.name.data.pos@: =..newCPT.pos
                    - actionType: evalObject
                      object: ..save
                    - actionType: evalObject
                      object: 
                        .Global._nonce@: 
                          =.builtIn.math.random: ""
                    - actionType: evalObject
                      object:
                        # - =.CPTCodes.newCode.docAPI.store: ""
                        - =..codeList.docAPI.get: ""
                        - =.builtIn.array.splitTableList: 
                            dataIn: 
                              arrObj: =..codeList.list.doc
                              numX: "9"
                              numY: "1"
                            dataOut: CPTCodes.formData.tableData
                        - ..formData.tableList@: =..formData.tableData.0
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: tableBody
        # EditCode
        - type: popUp
          viewTag: EditCode
          style:
            left: "0.36"
            width: "0.4"
            top: "0.3"
            height: "0.5"
            zIndex: "200"
          children:
            - type: view
              style:
                width: "0.4"
                height: "0.4"
                border: 
                  style: "3"
                borderWidth: "1"
                borderColor: "0xdededf"
                borderRadius: "5"
                backgroundColor: "0xffffff"
              children:
                - type: view
                  style: 
                    top: "0.02"
                    left: "0.03"
                    width: "0.34"
                    height: "0.05"
                    border:
                      style: "2"
                    borderWidth: "1.5"
                    borderColor: "#EAEAEA"
                  children:
                    - type: label
                      text: "Edit CPT Code"
                      style: 
                        height: "0.04"
                        width: "0.3"
                        fontSize: .Nfont.nf5
                        textAlign: 
                          x: left
                          y: center
                    - type: image
                      path: close1.png
                      style:
                        top: "0"
                        left: "0.335"
                        width: "0.03"                                                             
                        height: "0.03"
                        textAlign: 
                          x: left
                      onClick: 
                        - actionType: popUpDismiss
                          popUpView: EditCode   
                - type: view
                  style:
                    height: "0.32"
                    width: "0.4"
                    top: "0.08"
                    backgroundColor: "0xffffff"
                  children:
                    - .AddFacilityLabel:
                      textBoard: 
                        - text: "Code"
                        - text: "&nbsp;*"
                          color: "0xff0000"
                      style: 
                        left: "0.065"
                        top: "0.035"
                        fontSize: .Nfont.nf3
                    - .AddFacilityTextField: 
                      dataKey: newCPT.code
                      viewTag: codeListTag
                      onInput:
                        - actionType: evalObject
                          object:
                            - ..allListString@: []
                        - actionType: evalObject
                          object:                            
                            - =.builtIn.apiRequest.queryCPT:
                                dataIn:
                                  query: =..newCPT.code
                                dataOut: CPTCodes.allListString                         
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: CodeTag
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: CodeTags
                        - actionType: builtIn
                          funcName: show
                          viewTag: CodeTag
                        - actionType: popUp
                          popUpView: CodeTag
                          dismissOnTouchOutside: true
                      placeholder: ''
                      style: 
                        left: "0.1"
                        top: "0.03"
                        width: "0.08"
                        fontSize: .Nfont.nf3
                    - .AddFacilityLabel:
                      textBoard: 
                        - text: "Charge"
                        - text: "&nbsp;*"
                          color: "0xff0000"
                        - text: "&nbsp;&nbsp;$"
                      style: 
                        left: "0.2"
                        top: "0.035"
                        fontSize: .Nfont.nf3
                    - .AddFacilityTextField: 
                      dataKey: newCPT.charge
                      style: 
                        left: "0.25"
                        top: "0.03"
                        width: "0.07"
                        fontSize: .Nfont.nf3
                    - .AddFacilityLabel:
                      textBoard: 
                        - text: "Description"
                        - text: "&nbsp;*"
                          color: "0xff0000"
                      style: 
                        left: "0.04"
                        top: "0.105"
                        fontSize: .Nfont.nf3
                    - .AddFacilityTextField: 
                      dataKey: newCPT.description
                      viewTag: descriptionTag
                      onInput:
                        - actionType: evalObject
                          object:
                            - ..allListString@: []
                            - =.builtIn.apiRequest.queryCPT:
                                dataIn:
                                  query: =..newCPT.description
                                dataOut: CPTCodes.allListString
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: CodeTag
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: CodeTags
                        - actionType: builtIn
                          funcName: show
                          viewTag: CodeTag
                        - actionType: popUp
                          popUpView: CodeTag
                          dismissOnTouchOutside: true
                      placeholder: ''
                      style: 
                        left: "0.1"
                        top: "0.1"
                        width: "0.22"
                        fontSize: .Nfont.nf3
                    - .AddFacilityLabel:
                      textBoard: 
                        - text: "POS"
                        - text: "&nbsp;*"
                          color: "0xff0000"
                      style: 
                        left: "0.069"
                        top: "0.175"
                        fontSize: .Nfont.nf3
                    - type: select
                      dataKey: newCPT.pos
                      options:
                        .SelectData.placeOfService
                      required: "true"
                      style: 
                        left: "0.1"
                        top: "0.17"
                        width: "0.22"
                        fontSize: .Nfont.nf3
                        height: "0.044"
                        backgroundColor: "0xffffff"
                        borderWidth: "1"
                        border:
                          style: "3"
                          color: "0xdededf"  
                        borderRadius: "3"  
                - type: view  
                  viewTag: CodeTag
                  style:
                    width: "0.22"
                    top: "0.16"   
                    height: "0.21"
                    left: '0.1'
                    fontFamily: 'Poppins'
                    border: 
                      style: 3
                      color: "#eeeeee"
                    borderWidth: "1px" 
                    zIndex: 100
                    backgroundColor: '0xffffff'
                    display: none
                    isHidden: true
                  children:
                    - type: view
                      viewTag: CodeTags
                      style:
                        width: "0.22"  
                        height: "0.2"
                        left: "0"
                        marginTop: "0.01"
                        overflow: scroll
                      children: 
                        - type: list
                          contentType: listObject
                          listObject: ..allListString
                          iteratorVar: itemObject
                          viewTag: CodeTags
                          style:
                            width: "0.22"     
                            left: "0"
                            height: "0.2"
                            margin: "0"
                            marginTop: "0"
                          children: 
                            - type: listItem
                              itemObject: ''
                              style: 
                                backgroundColor: "0xffffff"
                                # hover:
                                #   backgroundColor: "0x6dacdacd"
                                width: "0.22"
                                left: "0"
                                marginTop: "0.001"
                                height: "auto"
                              children:
                                - type: label
                                  dataKey: itemObject
                                  onClick: 
                                    - emit:
                                        dataKey:
                                          var: itemObject
                                        actions:
                                          - ..newCPT.code@: $var.0
                                          - ..newCPT.description@: $var.1
                                    - actionType: builtIn
                                      funcName: redraw
                                      viewTag: codeListTag
                                    - actionType: builtIn
                                      funcName: redraw
                                      viewTag: descriptionTag
                                    - actionType: popUpDismiss
                                      popUpView: CodeTag
                                  style:
                                    width: "0.22"
                                    left: "0"
                                    textIndent: 20px 
                                    marginTop: "0"
                                    textAlign: 
                                      x: left
                                      y: center
                                    height: "auto"
                                    fontSize: "1.7vh"
                                    color: "0x143459"
                - .BottomButton:
                  text: "Save"
                  style:
                    top: "0.32"
                    width: "0.07"
                    backgroundColor: "#235591"
                    color: "#ffffff"
                    left: "0.29"
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: EditCode 
                    - actionType: evalObject
                      object: 
                        - ..newCode.document.name.data.code@: =..newCPT.code
                        - ..newCode.document.name.data.charge@: =..newCPT.charge
                        - ..newCode.document.name.data.description@: =..newCPT.description
                        - ..newCode.document.name.data.pos@: =..newCPT.pos
                    - actionType: evalObject
                      object: ..save
                    - actionType: evalObject
                      object: 
                        .Global._nonce@: 
                          =.builtIn.math.random: ""
                    - actionType: evalObject
                      object:
                        # - ..newCPT.code@: ""
                        # - ..newCPT.charge@: ""
                        # - ..newCPT.description@: ""
                        # - ..newCPT.pos@: ""
                        # - ..newCode.document.id@: ""
                        # - =.CPTCodes.newCode.docAPI.store: ""
                        - =..codeList.docAPI.get: ""
                        - =.builtIn.array.splitTableList: 
                            dataIn: 
                              arrObj: =..codeList.list.doc
                              numX: "9"
                              numY: "1"
                            dataOut: CPTCodes.formData.tableData
                        - ..formData.tableList@: =..formData.tableData.0
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: tableBody              