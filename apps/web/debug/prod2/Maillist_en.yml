Maillist: # This is page name
  module:
  init:
    - .SignInCheck
    - =..apiRequest.doctorProfile.docAPI.get: ""
    - =..apiRequest.admin.docAPI.get: ""
    - =..apiRequest.patientProfile.docAPI.get: ""

    - =.builtIn.object.extractingFeatureStrings:
        dataIn:
          objArrs: =..apiRequest.patientProfile.docResp.doc
          pathObj:
            [
              "name.data.basicInfo.fullName",
              "name.data.basicInfo.userName",
              "name.data.basicInfo.firstName",
              "id",
              "name.data.avatar",
              "bsig",
            ]
          bool: true
        dataOut: Maillist.formData.mailListData
  title: Email Connection # Title

  pageNumber: "1" # Page Number

  formData: # Input data here
    mailListData: []
    adminListData: []
  formDataTemp: # Input data temp here
    listFixedData:
      - index: "#"
      - index: A
      - index: B
      - index: C
      - index: D
      - index: E
      - index: F
      - index: G
      - index: H
      - index: I
      - index: J
      - index: K
      - index: L
      - index: M
      - index: N
      - index: O
      - index: P
      - index: Q
      - index: R
      - index: S
      - index: T
      - index: U
      - index: V
      - index: W
      - index: X
      - index: Y
      - index: Z
    titleData:
      - title: Patient
        borderColor: "0x2988e6"
        fontWeight: "500"
      - title: Provider
        borderColor: "0xffffff"
        fontWeight: "400"
      - title: Organization
        borderColor: "0xffffff"
        fontWeight: "400"
  apiRequest:
    # get all provider profile
    doctorProfile:
      docReq:
        ObjType: 12
        id: .Global.currentUser.vertex.id
        xfname: (E.bvid|E.evid)&!D.ovid
        type: .DocType.DoctorProfile
        _nonce: =.Global._nonce
        sCondition: "E.type=10002 AND E.tage>0"
      docResp: ""
      docAPI:
        get:
          api: rd
          dataIn: apiRequest.doctorProfile.docReq
          dataOut: Maillist.apiRequest.doctorProfile.docResp
    patientProfile:
      docReq:
        ObjType: 8
        id: .Global.currentUser.vertex.id
        xfname: "E.bvid|E.evid"
        type: .DocType.PatientProfile
        _nonce: =.Global._nonce
        sCondition: "E.type=10002 AND E.tage>0"
      docResp: ""
      docAPI:
        get:
          api: rd
          dataIn: apiRequest.patientProfile.docReq
          dataOut: Maillist.apiRequest.patientProfile.docResp
    # get all facility profile
    admin:
      docReq:
        ObjType: 12
        id: .Global.currentUser.vertex.id
        xfname: "E.bvid|E.evid"
        type: .DocType.FacilityProfile
        _nonce: =.Global._nonce
        sCondition: "E.type=10002 AND E.tage>0"
      docResp: ""
      docAPI:
        get:
          api: rd
          dataIn: apiRequest.admin.docReq
          dataOut: Maillist.apiRequest.admin.docResp
  style: # style
  components:
    - type: view
      style:
        height: "0.16"
        margin: "0"
        width: "1"
        backgroundColor: "0x2887e5"
      children:
        - type: view
          style:
            left: "0"
            width: "1"
            height: ""
            backgroundColor: "0x2887e5"
          children:
            - type: button
              text: =..title
              style:
                left: "0.2"
                width: "0.6"
                fontWeight: 300
                height: "0.1"
                fontSize: .Nfont.h3
                color: "0xffffffff"
                textAlign:
                  x: center
                backgroundColor: "0x2887e5"
                border:
                  style: "1"
        - .HeaderLeftButton:
        - type: view
          style:
            top: "0.1"
            width: "1"
            height: "0.05"
            backgroundColor: "0x2988e6"
          children:
            - .SearchField:
              placeholder: "Search"
              style:
                fontSize: "2vw"
                left: "0.05"
                top: "0"
                height: "0.04"
                backgroundColor: "0xffffff"
                textAlign:
                  x: center
                  y: center
            - type: image
              path: search.svg
              style:
                top: "0.015"
                left: "0.4"
                height: "0.015"
    - type: view
      style:
        margin: "0"
        height: "0.05"
        width: "1"
      children:
        - type: list
          contentType: listObject
          viewTag: emailType
          listObject: ..formDataTemp.titleData
          iteratorVar: itemObject
          style:
            width: "0.9"
            margin: "0"
            axis: horizontal
            left: "0.05"
            height: "0.05"
          children:
            - type: listItem
              onClick:
                - emit:
                    dataKey:
                      var: itemObject
                    actions:
                      - =.builtIn.object.setProperty:
                          dataIn:
                            obj: =..formDataTemp.titleData
                            label: "title"
                            text: $var.title
                            arr: ["borderColor", "fontWeight"]
                            valueArr: ["0x2988e6", "500"]
                            errorArr: ["0xffffff", "400"]
                      - ..formData.mailListData@: []
                      - if:
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: $var.title
                                string2: "Organization"
                          - =.builtIn.object.extractingFeatureStrings:
                              dataIn:
                                objArrs: =..apiRequest.admin.docResp.doc
                                pathObj:
                                  [
                                    "name.data.basicInfo.medicalFacilityName",
                                    "id",
                                    "bsig",
                                  ]
                                bool: true
                              dataOut: Maillist.formData.mailListData
                          - continue
                      - if:
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: $var.title
                                string2: "Provider"
                          - =.builtIn.object.extractingFeatureStrings:
                              dataIn:
                                objArrs: =..apiRequest.doctorProfile.docResp.doc
                                pathObj:
                                  [
                                    "name.data.fullName",
                                    "name.data.userName",
                                    "name.data.firstName",
                                    "id",
                                    "bsig",
                                    "name.data.avatar",
                                  ]
                                bool: true
                              dataOut: Maillist.formData.mailListData
                          - continue
                      - if:
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: $var.title
                                string2: "Patient"
                          - =.builtIn.object.extractingFeatureStrings:
                              dataIn:
                                objArrs: =..apiRequest.patientProfile.docResp.doc
                                pathObj:
                                  [
                                    "name.data.basicInfo.fullName",
                                    "name.data.basicInfo.userName",
                                    "name.data.basicInfo.firstName",
                                    "id",
                                    "bsig",
                                    "name.data.basicInfo.avatar",
                                  ]
                                bool: true
                              dataOut: Maillist.formData.mailListData
                          - continue
                - actionType: builtIn
                  funcName: redraw
                  viewTag: emailType
                - actionType: builtIn
                  funcName: redraw
                  viewTag: listNameData
              style:
                width: "0.29"
                height: "0.05"
              children:
                - type: label
                  dataKey: itemObject.title
                  style:
                    boxSizing: border-box
                    height: "0.05"
                    border:
                      style: "2"
                    borderWidth: "3"
                    left: "0.04"
                    color: "0x2988e6"
                    fontWeight: itemObject.fontWeight
                    fontSize: "3vw"
                    borderColor: itemObject.borderColor
                    textAlign:
                      x: center
                      y: center
                    width: "0.21"

    - type: list
      viewTag: listNameData
      contentType: listObject
      listObject: ..formData.mailListData # to dataObject to enumerate the list
      iteratorVar: itemObject
      style:
        width: "1"
        height: "0.79"
        margin: "0"
        overflow: scroll
      children:
        - type: listItem
          itemObject: ""
          style:
            width: "1"
            height: "auto"
          children:
            - type: view
              style:
                width: "1"
                height: "7vw"
                backgroundColor: "0xe9e9eb"
              children:
                - type: label
                  dataKey: itemObject.index
                  style:
                    textAlign:
                      x: left
                      y: center
                    width: "0.9"
                    height: "7vw"
                    left: "0.05"
                    fontSize: .Nfont.h16
                    fontWeight: "500"
            - type: list
              contentType: listObject
              listObject: itemObject.data
              iteratorVar: itemObject
              style:
                width: "1"
                height: "auto"
                margin: "0"
              children:
                - type: listItem
                  itemObject: ""
                  onClick:
                    - emit:
                        dataKey:
                          var: itemObject
                        actions:
                          - .Global.inboxContact@: $var
                    - actionType: builtIn
                      funcName: goBack
                      reload: true
                  style:
                    width: "0.95"
                    border:
                      style: "2"
                    # borderBottomStyle: solid
                    left: "0.05"
                    borderWidth: "1"
                    borderColor: "0xdbdbdd"
                    height: "0.08"
                  children:
                    - type: view
                      style:
                        width: "0.9"
                        margin: "auto"
                        height: "0.08"
                      children:
                        - type: label
                          dataKey: itemObject.medicalFacilityName
                          style:
                            width: "0.4"
                            top: "0"
                            fontSize: "3.6vw"
                            height: "0.08"
                            textAlign:
                              y: center
                        - type: label
                          dataKey: itemObject.fullName
                          style:
                            width: "0.4"
                            top: "0.01"
                            fontSize: "3.6vw"
                            height: "0.04"
                            textAlign:
                              y: center
                        - type: label
                          dataKey: itemObject.userName
                          style:
                            fontSize: "3.5vw"
                            top: "0.04"
                            height: "0.04"
                            color: "0x999999"
                            textAign:
                              y: center
                    # - type: view
                    #   style:
                    #     width: "0.2"
                    #     left: "0.7"
                    #     top: "0"
                    #     height: "0.08"
                    #   children:
                    #     - type: label
                    #       dataKey: itemObject.firstName
                    #       style:
                    #         fontSize: "2.8vw"
                    #         height: "0.08"
                    #         textAlign:
                    #           y: center

    - type: view
      style:
        width: "0.04"
        height: "0.75"
        top: "0.25"
        left: "0.96"
      children:
        - type: list
          contentType: listObject
          listObject: ..formDataTemp.listFixedData
          iteratorVar: itemObject
          style:
            width: "auto"
            margin: "0"
            height: auto
          children:
            - type: listItem
              contentType: listTypeMail
              itemObject:
              style:
                width: "auto"
                height: "5vw"
              children:
                - type: label
                  dataKey: itemObject.index
                  style:
                    color: "0x0a84ff"
                    fontSize: "2vw"
