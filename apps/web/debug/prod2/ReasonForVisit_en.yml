ReasonForVisit:
  title: "Reason for Visit"
  init: #Page initialization
    - .SignInCheck
    - actionType: updateObject
      dataKey: Global.formData.pageName
      dataObject: .EmptyObj
    - actionType: evalObject
      object:
        .Global._nonce@:
          =.builtIn.math.random: ""
    - ..apiRequest.relation.edgeAPI.get
    - ..apiRequest.reasonForVisit.docQueryReq.id@: =..apiRequest.relation.edgeQueryResp.edge.0.id
    - ..apiRequest.reasonForVisit.docAPI.get
    - actionType: evalObject
      object:
        - if:
            - =.builtIn.string.equal:
                dataIn:
                  string1: =.Global.formData.currentTabStatus
                  string2: ""
            - .Global.formData.currentTabStatus@: "TELEMEDICINE"
            - continue

    - actionType: evalObject
      object:
        - if:
            - =.builtIn.array.judgeListLength:
                dataIn:
                  array: =..apiRequest.reasonForVisit.docQueryResp.doc
                  len: 0
            - ..apiRequest.reasonForVisit.docCreateReq.eid@: =..apiRequest.relation.edgeQueryResp.edge.0.id
            - ..apiRequest.reasonForVisit.docCreateReq@: =..apiRequest.reasonForVisit.docQueryResp.doc.0
        - ..formData.reasonSelect.document@: []
        - ..formData.reasonSelect.document@: =.Global.documentForReason.teleReason
        - ..formData.reasonSelect_officeVisits.document@: []
        - ..formData.reasonSelect_officeVisits.document@: =.Global.documentForReason.officeReason
    - actionType: evalObject
      object:
        - if:
            - =.Global.formData.currentFillReason.teleReason
            - ..formData.reasonSelect@: =.Global.formData.currentFillReason.teleReason
            - continue
    - actionType: evalObject
      object:
        - if:
            - =.Global.formData.currentFillReason.officeReason
            - ..formData.reasonSelect_officeVisits@: =.Global.formData.currentFillReason.officeReason
            - continue
    - actionType: evalObject
      object:
        # tele
        - if:
            - =.builtIn.array.allComplete:
                dataIn:
                  - =..formData.reasonSelect.reason
            - actionType: evalObject
              object:
                - ..formData.createButton_backgroundColor@: "0x2988e6"
                - ..formData.createButton_pointerEvents@: ""
            - actionType: evalObject
              object:
                - ..formData.createButton_backgroundColor@: "0xc1c1c1"
                - ..formData.createButton_pointerEvents@: none
        - ..formData.reasonSelect.document@: =.Global.documentForReason.teleReason
    - actionType: evalObject
      object:
        # office visit
        - if:
            - =.builtIn.array.allComplete:
                dataIn:
                  - =..formData.reasonSelect_officeVisits.reason
            - actionType: evalObject
              object:
                - ..formData.createButtonOfficeVisits_backgroundColor@: "0x2988e6"
                - ..formData.createButtonOfficeVisits_pointerEvents@: ""
            - actionType: evalObject
              object:
                - ..formData.createButtonOfficeVisits_backgroundColor@: "0xc1c1c1"
                - ..formData.createButtonOfficeVisits_pointerEvents@: none
        - ..formData.reasonSelect_officeVisits.document@: =.Global.documentForReason.officeReason

    - actionType: evalObject
      object:
        # 校验tele
        - =.builtIn.array.getListLength:
            dataIn:
              object: =.Global.formData.reasonForVisit.Telemedicine
            dataOut: ReasonForVisit.formData.checkLocalTeleLength
    - actionType: evalObject
      object:
        - if:
            # - =.builtIn.string.equal:
            #     dataIn:
            #       string1: =..formData.checkLocalTeleLength
            #       string2: "0"

            - =.Global.ReasonForVisitReason
            - .Global.formData.reasonForVisit.Telemedicine@: =..apiRequest.reasonForVisit.docCreateReq.name.data.reasonForVisit.Telemedicine
            - ..apiRequest.reasonForVisit.docCreateReq.name.data.reasonForVisit.Telemedicine@: =.Global.formData.reasonForVisit.Telemedicine
    - actionType: evalObject
      object:
        # 校验office
        - =.builtIn.array.getListLength:
            dataIn:
              object: =.Global.formData.reasonForVisit.OfficeVisits
            dataOut: ReasonForVisit.formData.checkLocalOfficeLength
    - actionType: evalObject
      object:
        - if:
            # - =.builtIn.string.equal:
            #     dataIn:
            #       string1: =..formData.checkLocalOfficeLength
            #       string2: "0"
            - =.Global.ReasonForVisitReason
            - .Global.formData.reasonForVisit.OfficeVisits@: =..apiRequest.reasonForVisit.docCreateReq.name.data.reasonForVisit.OfficeVisits
            - ..apiRequest.reasonForVisit.docCreateReq.name.data.reasonForVisit.OfficeVisits@: =.Global.formData.reasonForVisit.OfficeVisits
    - actionType: evalObject
      object:
        - if:
            - =.builtIn.string.equal:
                dataIn:
                  string1: =.Global.formData.currentTabStatus
                  string2: ""
            - continue
            - actionType: evalObject
              object:
                - =.builtIn.object.setProperty:
                    dataIn:
                      obj: =..formDataTemp.titleData
                      label: "title"
                      text: =.Global.formData.currentTabStatus
                      arr: ["fontColor", "fontWeight", "block"]
                      valueArr: ["0x2988e6", "700", "block"]
                      errorArr: ["0x999999", "400", "none"]
                    dataOut: ReasonForVisit.formDataTemp.titleData
                - ..formData.telemedicineBoxBlock@: =..formDataTemp.titleData.0.block
                - ..formData.officeVisitBoxBlock@: =..formDataTemp.titleData.1.block
    # tele选择文档数量
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =.Global.formData.chooseDocLen.teleLength
              string2: ""
        - ..formData.docTeleNum@: ""
        - actionType: evalObject
          object:
            - =.builtIn.string.concat:
                dataIn:
                  - "("
                  - =.Global.formData.chooseDocLen.teleLength
                  - ")"
                dataOut: ReasonForVisit.formData.docTeleNum

    # # office visit选择文档数量
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =.Global.formData.chooseDocLen.officeLength
              string2: ""
        - ..formData.docOfficeNum@: ""
        - actionType: evalObject
          object:
            - =.builtIn.string.concat:
                dataIn:
                  - "("
                  - =.Global.formData.chooseDocLen.officeLength
                  - ")"
                dataOut: ReasonForVisit.formData.docOfficeNum
  formData:
    res: ""
    pointerEvents_officeFee: ""
    pointerEvents_teleFee: ""
    checkLocalTeleLength: ""
    checkLocalOfficeLength: ""
    teleLength: ""
    officeLength: ""
    docTeleNum: ""
    docOfficeNum: ""
    reasonSelected: ""
    createButton_backgroundColor: "0xc1c1c1"
    createButton_pointerEvents: none
    createButtonOfficeVisits_backgroundColor: "0xc1c1c1"
    createButtonOfficeVisits_pointerEvents: none
    telemedicineBoxBlock: "block"
    officeVisitBoxBlock: "none"
    reasonSelect_officeVisits:
      reason: ""
      duration: "5 min"
      fee: "0.00"
      document: []
    reasonSelect:
      reason: ""
      duration: "5 min"
      fee: "0.00"
      document: []
    # 重置reason
    reasonReset:
      reason: ""
      duration: "5 min"
      fee: "0.00"
      document: []
  formDataTemp: #Input data here
    titleData:
      - title: TELEMEDICINE
        fontColor: "0x2988e6"
        fontWeight: "700"
        block: "block"
      - title: OFFICE VISITS
        fontColor: "0x999999"
        fontWeight: "400"
        block: "none"
    Duration:
      - 5min
      - 10min
    dataTemp:
      - key: "1"
        res: "1212"
        dur: "15min"
        fee: "20$"
  apiRequest: #Input data request here
    # 10002 edge between provider and facility
    relation:
      edgeQueryResp: ""
      edgeQueryReq:
        id:
          - =.Global.currentUser.vertex.id
          - =.Global.currentFacility.id
        xfname: (bvid,evid)|(evid,bvid)
        type: 10002
        obfname: mtime
        sCondition: tage>0
        _nonce: =.Global._nonce
      edgeAPI:
        get:
          api: re
          dataIn: ReasonForVisit.apiRequest.relation.edgeQueryReq
          dataOut: ReasonForVisit.apiRequest.relation.edgeQueryResp
    reasonForVisit:
      docQueryResp: ""
      docQueryReq:
        id: ""
        xfname: eid
        type: .DocType.VisitReason
        obfname: mtime
        _nonce: =.Global._nonce
      docCreateResp: ""
      docCreateReq:
        type: .DocType.VisitReason
        eid: ""
        name:
          data:
            reasonForVisit:
              OfficeVisits: []
              Telemedicine: []
      docAPI:
        store:
          api: cd
          dataIn: ReasonForVisit.apiRequest.reasonForVisit.docCreateReq
          dataOut: ReasonForVisit.apiRequest.reasonForVisit.docCreateResp
        get:
          api: rd
          dataIn: ReasonForVisit.apiRequest.reasonForVisit.docQueryReq
          dataOut: ReasonForVisit.apiRequest.reasonForVisit.docQueryResp
  style: #Input style fragment here
  components:
    - .TipsOneLine:
      message: "Sync Failed! Please Click Save Button Again"
    - .TipsOneLine:
      message: "Please set reason differently!"
      viewTag: reasonWarnTag
      style:
        zIndex: 1000
    - .SuccessfulOneLine:
      message: Save Successfully!
      viewTag: successTag
      style:
        zIndex: 1000
    - .simplePopup:
      viewTag: changePopUpView
      children:
        - .simplePopupView:
          style:
            height: "auto"
            overflow: hidden
          children:
            - type: label
              text: "Do you want to save your changes？"
              dataKey:
              style:
                marginTop: "0.04"
                marginLeft: "0.03"
                width: "0.64"
                height: "auto"
                color: "0x4b4b4b"
                fontSize: .Nfont.h14
                fontFamily: "sans-serif"
                textAlign:
                  x: center
            - type: view
              style:
                marginTop: "0.04"
                height: "0.001"
                width: "0.72"
                backgroundColor: "0x8f8f90"
            - type: view
              style:
                height: "0.06"
                width: "0.72"
              children:
                - type: button
                  text: "Cancel"
                  style:
                    marginTop: "0.01"
                    width: "0.35"
                    height: "0.049"
                    color: "0x007affff"
                    fontSize: .Nfont.h14
                    display: inline-block
                    backgroundColor: "0xe6e6e6"
                    borderRadius: "15"
                    textAlign:
                      x: center
                      y: center
                    border:
                      style: "5"
                      borderRadius: "15"
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: changePopUpView
                    - actionType: evalObject
                      object:
                        .Global._nonce@:
                          =.builtIn.math.random: ""
                    - actionType: builtIn
                      funcName: goBack
                      reload: true
                - type: view
                  style:
                    marginTop: "0"
                    width: "0.002"
                    height: "0.06"
                    backgroundColor: "0x999999"
                    display: inline-block
                - type: button
                  text: "Confirm"
                  style:
                    marginTop: "0.01"
                    width: "0.35"
                    height: "0.049"
                    color: "0x007affff"
                    fontSize: .Nfont.h14
                    display: inline-block
                    backgroundColor: "0xe6e6e6"
                    borderRadius: "15"
                    fontWeight: "600"
                    textAlign:
                      x: center
                      y: center
                    border:
                      style: "5"
                      borderRadius: "15"
                  onClick:
                    - actionType: evalObject
                      object:
                        # 清空Telemedicine
                        - .Global.formData.reasonForVisit.Telemedicine@: []
                        # 清空office visit
                        - .Global.formData.reasonForVisit.OfficeVisits@: []
                        - =..apiRequest.reasonForVisit.docAPI.store: ""
                    - actionType: popUpDismiss
                      popUpView: changePopUpView
                    - actionType: popUp
                      popUpView: successTag
                      wait: 2000
                    - actionType: evalObject
                      object:
                        .Global._nonce@:
                          =.builtIn.math.random: ""
                    - actionType: builtIn
                      funcName: goBack
                      reload: true
      style:
        zIndex: 1000
    - .BaseHeader:
    - .HeaderLeftButton:
      onClick:
        - actionType: evalObject
          object:
            # reset user input
            - ..formData.reasonSelect.reason@: ""
            - ..formData.reasonSelect.duration@: "5 min"
            - ..formData.reasonSelect.document@: []
            - .Global.documentForReason.teleReason@: []
            - .Global.formData.chooseDocLen.teleLength@: ""
            - ..formData.docTeleNum@: ""
            # 清空currentFillReason
            - .Global.formData.currentFillReason.teleReason@: =..formData.reasonReset
        - actionType: evalObject
          object:
            # reset user input
            - ..formData.reasonSelect_officeVisits.reason@: ""
            - ..formData.reasonSelect_officeVisits.duration@: "5 min"
            - ..formData.reasonSelect_officeVisits.document@: []
            - .Global.documentForReason.officeReason@: []
            - .Global.formData.chooseDocLen.officeLength@: ""
            - ..formData.docOfficeNum@: ""
            # 清空currentFillReason
            - .Global.formData.currentFillReason.officeReason@: =..formData.reasonReset
        - actionType: evalObject
          object:
            - =.builtIn.array.getListLength:
                dataIn:
                  object: =.Global.formData.reasonForVisit.Telemedicine
                dataOut: ReasonForVisit.formData.checkLocalTeleLength
        - actionType: evalObject
          object:
            - =.builtIn.array.getListLength:
                dataIn:
                  object: =..apiRequest.reasonForVisit.docCreateReq.name.data.reasonForVisit.Telemedicine
                dataOut: ReasonForVisit.formData.teleLength
        - actionType: evalObject
          object:
            - =.builtIn.array.getListLength:
                dataIn:
                  object: =.Global.formData.reasonForVisit.OfficeVisits
                dataOut: ReasonForVisit.formData.checkLocalOfficeLength
        - actionType: evalObject
          object:
            - =.builtIn.array.getListLength:
                dataIn:
                  object: =..apiRequest.reasonForVisit.docCreateReq.name.data.reasonForVisit.OfficeVisits
                dataOut: ReasonForVisit.formData.officeLength
        - actionType: evalObject
          object:
            - if:
                - =.builtIn.string.equal:
                    dataIn:
                      string1: =.Global.formData.currentTabStatus
                      string2: "TELEMEDICINE"
                - actionType: evalObject
                  object:
                    - if:
                        - =.builtIn.string.equal:
                            dataIn:
                              string1: =..formData.checkLocalTeleLength
                              string2: =..formData.teleLength
                        - actionType: builtIn
                          funcName: goBack
                          reload: true
                        - actionType: popUp
                          popUpView: changePopUpView
                - actionType: evalObject
                  object:
                    - if:
                        - =.builtIn.string.equal:
                            dataIn:
                              string1: =..formData.checkLocalOfficeLength
                              string2: =..formData.officeLength
                        - actionType: builtIn
                          funcName: goBack
                          reload: true
                        - actionType: popUp
                          popUpView: changePopUpView

    - .HeaderRightButton:
      text: Save
      onClick:
        - actionType: popUp
          popUpView: successTag
          wait: 2000

        - actionType: evalObject
          object:
            # reset user input
            - ..formData.reasonSelect.reason@: ""
            - ..formData.reasonSelect.duration@: "5 min"
            - ..formData.reasonSelect.document@: []
            - .Global.documentForReason.teleReason@: []
            - .Global.formData.chooseDocLen.teleLength@: ""
            - ..formData.docTeleNum@: ""
            # 清空Telemedicine
            - .Global.formData.reasonForVisit.Telemedicine@: []
            # 清空currentFillReason
            - .Global.formData.currentFillReason.teleReason@: =..formData.reasonReset
        # - actionType: evalObject
        #   object:
        #     - =.builtIn.search.updateEsData:
        #         dataIn:
        #           id: =.Global.currentUser.vertex.id
        #           type: "79360"
        #           bvid: =.Global.currentFacility.id
        #         dataOut: ReasonForVisit.formData.res
        # - actionType: evalObject
        #   object:
        #     - if:
        #       - =.builtIn.Object.isEmpty:
        #           dataIn:
        #             object: =..formData.res
        #       - actionType: popUp
        #         popUpView: tipsOneLine
        #         wait: true
        #         popUpDismiss: 2000
        #       - continue
        - actionType: evalObject
          object:
            # reset user input
            - ..formData.reasonSelect_officeVisits.reason@: ""
            - ..formData.reasonSelect_officeVisits.duration@: "5 min"
            - ..formData.reasonSelect_officeVisits.document@: []
            - .Global.documentForReason.officeReason@: []
            - .Global.formData.chooseDocLen.officeLength@: ""
            - ..formData.docOfficeNum@: ""
            # 清空office visit
            - .Global.formData.reasonForVisit.OfficeVisits@: []
            # 清空currentFillReason
            - .Global.formData.currentFillReason.officeReason@: =..formData.reasonReset
        - actionType: evalObject
          object:
            - =..apiRequest.reasonForVisit.docAPI.store: ""
        - actionType: popUpDismiss
          popUpView: successTag
        - actionType: builtIn
          funcName: goBack
          reload: true
      style:
        zIndex: 100
    - type: view
      style:
        marginTop: "0.1"
        width: "1"
        height: "auto"
        overflow: hidden
      children:
        - type: label
          text: "Create different reasons for a patient visit. This is essential for creating availability settings and to assist with patient self-scheduling"
          style:
            marginTop: "0.0197"
            marginLeft: "0.04"
            height: "auto"
            width: "0.92"
            fontSize: .Nfont.h14
            color: "0x333333"
    - type: view
      style:
        marginTop: "0.0197"
        width: "1"
        height: "0.001"
        backgroundColor: "0xdededf"
    - type: list
      viewTag: tabTwoTag
      contentType: listObject
      listObject: ..formDataTemp.titleData
      iteratorVar: itemObject
      style:
        width: "1"
        margin: "0"
        axis: horizontal
        height: "auto"
        overflow: hidden
      children:
        - type: listItem
          itemObject:
          style:
            width: "0.5"
            height: "auto"
            boxSizing: "border-box"
          children:
            - type: label
              dataKey: itemObject.title
              style:
                color: itemObject.fontColor
                height: "auto"
                marginTop: "0.0172"
                width: "0.5"
                fontWeight: itemObject.fontWeight
                textAlign:
                  x: center
                fontSize: .Nfont.h16
                boxSizing: "border-box"
            - type: view
              style:
                marginTop: "0.011"
                height: "0.25vh"
                width: "0.5"
                backgroundColor: "0xf0f0f0"
                boxSizing: "border-box"
            - type: view
              viewTag: leftBlockTag
              style:
                display: itemObject.block
                top: "0.0532"
                left: "0"
                width: "0.5"
                height: "0.25vh"
                backgroundColor: "0x2988e6"
                boxSizing: "border-box"
                zIndex: 10
          onClick:
            - emit:
                dataKey:
                  var: itemObject
                actions:
                  - =.builtIn.object.setProperty:
                      dataIn:
                        obj: =..formDataTemp.titleData
                        label: "title"
                        text: $var.title
                        arr: ["fontColor", "fontWeight", "block"]
                        valueArr: ["0x2988e6", "700", "block"]
                        errorArr: ["0x999999", "400", "none"]
                  # 保存当前tab栏状态
                  - .Global.formData.currentTabStatus@: $var.title
            - actionType: evalObject
              object:
                - ..formData.telemedicineBoxBlock@: =..formDataTemp.titleData.0.block
                - ..formData.officeVisitBoxBlock@: =..formDataTemp.titleData.1.block
            # - actionType: builtIn
            #   funcName: redraw
            #   viewTag: blockHeightTag
            - actionType: builtIn
              funcName: redraw
              viewTag: tabTwoTag
            - actionType: builtIn
              funcName: redraw
              viewTag: telemedicineBox
            - actionType: builtIn
              funcName: redraw
              viewTag: officeVisitBox
    - type: view
      viewTag: telemedicineBox
      style:
        display: ..formData.telemedicineBoxBlock
        width: "1"
        height: "auto"
        overflow: hidden
      children:
        - type: view
          style:
            marginTop: "0.022"
            marginLeft: "0.04"
            width: "0.92"
            height: "auto"
            boxSizing: border-box
          children:
            - type: view
              style:
                display: "inline-block"
                width: "0.573"
                overflow: hidden
                boxSizing: border-box
              children:
                - type: label
                  text: Reason for visit
                  style:
                    height: "auto"
                    width: "0.448"
                    fontWeight: "600"
                    color: "0x474747"
                    fontSize: .Nfont.h14
                    boxSizing: border-box
                - type: textField
                  placeholder: Enter here
                  dataKey: formData.reasonSelect.reason
                  onInput:
                    - actionType: evalObject
                      object:
                        - if:
                            - =.builtIn.array.allComplete:
                                dataIn:
                                  - =..formData.reasonSelect.reason
                            - actionType: evalObject
                              object:
                                - ..formData.createButton_backgroundColor@: "0x2988e6"
                                - ..formData.createButton_pointerEvents@: ""
                            - actionType: evalObject
                              object:
                                - ..formData.createButton_backgroundColor@: "0xc1c1c1"
                                - ..formData.createButton_pointerEvents@: none
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: mainButton
                  style:
                    marginTop: "0.009"
                    width: "0.573"
                    textIndent: "12px"
                    height: "0.0541"
                    boxSizing: border-box
                    border:
                      style: 3
                    borderColor: "0xdededf"
                    borderWidth: "1"
                    borderRadius: "5"
                    fontSize: .Nfont.h12
            - type: view
              style:
                marginLeft: "0.032"
                display: "inline-block"
                width: "0.314"
                overflow: hidden
                boxSizing: border-box
              children:
                - type: label
                  text: Duration
                  style:
                    height: "auto"
                    width: "0.216"
                    fontWeight: "600"
                    color: "0x474747"
                    fontSize: .Nfont.h14
                    boxSizing: border-box
                - type: select
                  dataKey: formData.reasonSelect.duration
                  options: .Duration
                  style:
                    textIndent: "12px"
                    marginTop: "0.009"
                    width: "0.314"
                    height: "0.0541"
                    boxSizing: border-box
                    border:
                      style: 3
                    borderColor: "0xdededf"
                    borderWidth: "1"
                    borderRadius: "5"
        - type: view
          viewTag: selectAttachTag
          style:
            marginLeft: "0.04"
            marginTop: "0.0172"
            width: "auto"
            height: "auto"
          children:
            - type: label
              text: Select Attached Files
              style:
                display: "inline-block"
                width: "auto"
                color: "0x2988e6"
                fontSize: .Nfont.h14
                verticalAlign: middle
                textDecoration: underline
              onClick:
                - actionType: evalObject
                  object:
                    - .Global.formData.reasonForVisit.Telemedicine@: =..apiRequest.reasonForVisit.docCreateReq.name.data.reasonForVisit.Telemedicine
                    - .Global.formData.currentFillReason.teleReason@: =..formData.reasonSelect
                - goto: DocumentForReason
            - type: label
              dataKey: formData.docTeleNum
              style:
                marginLeft: "0.02"
                display: "inline-block"
                verticalAlign: middle
                fontSize: .Nfont.h14
                width: "auto"
                color: "0x2988e6"
        - type: button
          text: Create new reason
          viewTag: mainButton
          onClick:
            - actionType: evalObject
              object:
                - if:
                    - =.builtIn.array.checkElememtExist:
                        dataIn:
                          objArr: =..apiRequest.reasonForVisit.docCreateReq.name.data.reasonForVisit.Telemedicine
                          values: =..formData.reasonSelect.reason
                    - actionType: popUp
                      popUpView: reasonWarnTag
                      wait: true
                      popUpDismiss: 2000
                    - continue
            - actionType: evalObject
              object:
                - =.builtIn.array.add:
                    dataIn:
                      object: =..apiRequest.reasonForVisit.docCreateReq.name.data.reasonForVisit.Telemedicine
                      value: =..formData.reasonSelect
                # reset user input
                - ..formData.reasonSelect.reason@: ""
                - ..formData.reasonSelect.duration@: "5 min"
                - ..formData.reasonSelect.document@: []
                - .Global.documentForReason.teleReason@: []
                - .Global.formData.chooseDocLen.teleLength@: ""
                - ..formData.docTeleNum@: ""
                # 重置按钮颜色
                - ..formData.createButton_backgroundColor@: "0xc1c1c1"
                - ..formData.createButton_pointerEvents@: none
                - actionType: builtIn
                  funcName: redraw
                  viewTag: mainButton
                - actionType: builtIn
                  funcName: redraw
                  viewTag: telemedicineBox
                - actionType: builtIn
                  funcName: redraw
                  viewTag: selectAttachTag
          style:
            marginTop: "0.0369"
            marginLeft: "0.04"
            height: "0.044"
            width: "0.92"
            border:
              style: 1
            borderRadius: "5"
            pointerEvents: ..formData.createButton_pointerEvents
            backgroundColor: ..formData.createButton_backgroundColor
            color: "0xffffff"
            fontSize: .Nfont.h14
            fontWeight: 600
            textAlign:
              x: center
              y: center
        - type: view
          style:
            marginTop: "0.0394"
            backgroundColor: "0xf0f0f0"
            width: "1"
            height: "0.0455"
          children:
            - type: label
              text: Reason for visit
              style:
                display: "inline-block"
                marginLeft: "0.12"
                lineHeight: "4.55vh"
                width: "auto"
                height: "auto"
                color: "0x4d4d4d"
                fontWeight: "600"
                fontSize: .Nfont.h14
            - type: label
              text: Duration
              style:
                display: "inline-block"
                marginLeft: "0.16"
                lineHeight: "4.55vh"
                width: "auto"
                height: "auto"
                color: "0x4d4d4d"
                fontWeight: "600"
                fontSize: .Nfont.h14
            - type: label
              text: Files
              style:
                display: "inline-block"
                marginLeft: "0.0693"
                lineHeight: "4.55vh"
                width: "auto"
                height: "auto"
                color: "0x4d4d4d"
                fontWeight: "600"
                fontSize: .Nfont.h14
        - type: list
          viewTag: telemedicine
          contentType: listObject
          listObject: ..apiRequest.reasonForVisit.docCreateReq.name.data.reasonForVisit.Telemedicine
          iteratorVar: itemObject
          style:
            height: "0.39"
            width: "1"
            margin: "0"
            overflow: scroll
          children:
            - type: listItem
              itemObject:
              style:
                marginLeft: "0.04"
                width: "0.92"
                height: "auto"
                overflow: hidden
              children:
                - type: view
                  style:
                    marginTop: "0.0147"
                    width: "0.92"
                    height: "auto"
                  children:
                    - type: image
                      path: x.svg
                      onClick:
                        - emit:
                            dataKey:
                              var: itemObject
                            actions:
                              - =.builtIn.array.removeByName:
                                  dataIn:
                                    object: =..apiRequest.reasonForVisit.docCreateReq.name.data.reasonForVisit.Telemedicine
                                    key: reason
                                    name: $var.reason
                              - .Global.formData.reasonForVisit.Telemedicine@: =..apiRequest.reasonForVisit.docCreateReq.name.data.reasonForVisit.Telemedicine
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: telemedicine
                      style:
                        display: "inline-block"
                        height: "0.025"
                        zIndex: 10
                        verticalAlign: middle
                    - type: label
                      dataKey: itemObject.reason
                      style:
                        marginLeft: "0.032"
                        display: "inline-block"
                        verticalAlign: middle
                        fontSize: .Nfont.h12
                        width: "0.38"
                        wordBreak: break-all
                    - type: label
                      dataKey: itemObject.duration
                      style:
                        marginLeft: "0.04"
                        display: "inline-block"
                        verticalAlign: middle
                        fontSize: .Nfont.h12
                        width: "0.18"
                        wordBreak: break-all
                    - type: label
                      text: View
                      onClick:
                        - emit:
                            dataKey:
                              var: itemObject
                            actions:
                              # - ..formData.reasonSelected@: $var
                              - .Global.formData.reasonSelected@: []
                              - .Global.formData.reasonSelected@: $var.document
                              - .Global.formData.reasonForVisit.Telemedicine@: =..apiRequest.reasonForVisit.docCreateReq.name.data.reasonForVisit.Telemedicine
                              # 清空currentFillReason
                              - .Global.formData.currentFillReason.teleReason@: =..formData.reasonReset
                        - goto: ReasonFormFiles
                      style:
                        marginLeft: "0.032"
                        display: "inline-block"
                        verticalAlign: middle
                        fontSize: .Nfont.h12
                        width: "auto"
                        color: "0x2988e6"
                        wordBreak: break-all
                        textDecoration: underline
                        cursor: pointer
    - type: view
      viewTag: officeVisitBox
      style:
        display: ..formData.officeVisitBoxBlock
        width: "1"
        height: "auto"
        overflow: hidden
      children:
        - type: view
          style:
            marginTop: "0.022"
            marginLeft: "0.04"
            width: "0.92"
            height: "auto"
            boxSizing: border-box
          children:
            - type: view
              style:
                display: "inline-block"
                width: "0.573"
                overflow: hidden
                boxSizing: border-box
              children:
                - type: label
                  text: Reason for visit
                  style:
                    height: "auto"
                    width: "0.573"
                    fontWeight: "600"
                    color: "0x474747"
                    fontSize: .Nfont.h14
                    boxSizing: border-box
                - type: textField
                  placeholder: Enter here
                  dataKey: formData.reasonSelect_officeVisits.reason
                  onInput:
                    - actionType: evalObject
                      object:
                        - if:
                            - =.builtIn.array.allComplete:
                                dataIn:
                                  - =..formData.reasonSelect_officeVisits.reason
                            - actionType: evalObject
                              object:
                                - ..formData.createButtonOfficeVisits_backgroundColor@: "0x2988e6"
                                - ..formData.createButtonOfficeVisits_pointerEvents@: ""
                            - actionType: evalObject
                              object:
                                - ..formData.createButtonOfficeVisits_backgroundColor@: "0xc1c1c1"
                                - ..formData.createButtonOfficeVisits_pointerEvents@: none
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: mainButtonOfficeVisits
                  style:
                    marginTop: "0.009"
                    width: "0.573"
                    textIndent: "12px"
                    height: "0.0541"
                    boxSizing: border-box
                    border:
                      style: 3
                    borderColor: "0xdededf"
                    borderWidth: "1"
                    borderRadius: "5"
                    fontSize: .Nfont.h12
            - type: view
              style:
                marginLeft: "0.032"
                display: "inline-block"
                width: "0.314"
                overflow: hidden
                boxSizing: border-box
              children:
                - type: label
                  text: Duration
                  style:
                    height: "auto"
                    width: "0.216"
                    fontWeight: "600"
                    color: "0x474747"
                    fontSize: .Nfont.h14
                    boxSizing: border-box
                - type: select
                  options: .Duration
                  dataKey: formData.reasonSelect_officeVisits.duration
                  style:
                    textIndent: "12px"
                    marginTop: "0.009"
                    width: "0.314"
                    height: "0.0541"
                    boxSizing: border-box
                    border:
                      style: 3
                    borderColor: "0xdededf"
                    borderWidth: "1"
                    borderRadius: "5"
        - type: view
          viewTag: selectAttachOfficeTag
          style:
            marginLeft: "0.04"
            marginTop: "0.0172"
            width: "auto"
            height: "auto"
          children:
            - type: label
              text: Select Attached Files
              style:
                display: "inline-block"
                width: "auto"
                color: "0x2988e6"
                fontSize: .Nfont.h14
                verticalAlign: middle
                textDecoration: underline
              onClick:
                - actionType: evalObject
                  object:
                    - .Global.formData.reasonForVisit.OfficeVisits@: =..apiRequest.reasonForVisit.docCreateReq.name.data.reasonForVisit.OfficeVisits
                    - .Global.formData.currentFillReason.officeReason@: =..formData.reasonSelect_officeVisits
                - goto: DocumentForReason
            - type: label
              dataKey: formData.docOfficeNum
              style:
                marginLeft: "0.02"
                display: "inline-block"
                verticalAlign: middle
                fontSize: .Nfont.h14
                width: "auto"
                color: "0x2988e6"
        - type: button
          text: Create new reason
          viewTag: mainButtonOfficeVisits
          onClick:
            - actionType: evalObject
              object:
                - if:
                    - =.builtIn.array.checkElememtExist:
                        dataIn:
                          objArr: =..apiRequest.reasonForVisit.docCreateReq.name.data.reasonForVisit.OfficeVisits
                          values: =..formData.reasonSelect_officeVisits.reason
                    - actionType: popUp
                      popUpView: reasonWarnTag
                      wait: true
                      popUpDismiss: 2000
                    - continue
            - actionType: evalObject
              object:
                - =.builtIn.array.add:
                    dataIn:
                      object: =..apiRequest.reasonForVisit.docCreateReq.name.data.reasonForVisit.OfficeVisits
                      value: =..formData.reasonSelect_officeVisits
                # reset user input
                - ..formData.reasonSelect_officeVisits.reason@: ""
                - ..formData.reasonSelect_officeVisits.duration@: "5 min"
                - ..formData.reasonSelect_officeVisits.document@: []
                - .Global.documentForReason.officeReason@: []
                - .Global.formData.chooseDocLen.officeLength@: ""
                - ..formData.docOfficeNum@: ""
                # 重置按钮颜色
                - ..formData.createButtonOfficeVisits_backgroundColor@: "0xc1c1c1"
                - ..formData.createButtonOfficeVisits_pointerEvents@: none
            - actionType: builtIn
              funcName: redraw
              viewTag: mainButtonOfficeVisits
            - actionType: builtIn
              funcName: redraw
              viewTag: officeVisitBox
            - actionType: builtIn
              funcName: redraw
              viewTag: selectAttachOfficeTag
          style:
            marginTop: "0.0369"
            marginLeft: "0.04"
            height: "0.044"
            width: "0.92"
            border:
              style: 1
            borderRadius: "5"
            pointerEvents: ..formData.createButtonOfficeVisits_pointerEvents
            backgroundColor: ..formData.createButtonOfficeVisits_backgroundColor
            color: "0xffffff"
            fontSize: .Nfont.h14
            fontWeight: 600
            textAlign:
              x: center
              y: center
        - type: view
          style:
            marginTop: "0.0394"
            backgroundColor: "0xf0f0f0"
            width: "1"
            height: "0.0455"
          children:
            - type: label
              text: Reason for visit
              style:
                display: "inline-block"
                marginLeft: "0.12"
                lineHeight: "4.55vh"
                width: "auto"
                height: "auto"
                color: "0x4d4d4d"
                fontWeight: "600"
                fontSize: .Nfont.h14
            - type: label
              text: Duration
              style:
                display: "inline-block"
                marginLeft: "0.16"
                lineHeight: "4.55vh"
                width: "auto"
                height: "auto"
                color: "0x4d4d4d"
                fontWeight: "600"
                fontSize: .Nfont.h14
            - type: label
              text: Files
              style:
                display: "inline-block"
                marginLeft: "0.0693"
                lineHeight: "4.55vh"
                width: "auto"
                height: "auto"
                color: "0x4d4d4d"
                fontWeight: "600"
                fontSize: .Nfont.h14
        - type: list
          viewTag: officeVisits
          contentType: listObject
          listObject: ..apiRequest.reasonForVisit.docCreateReq.name.data.reasonForVisit.OfficeVisits
          iteratorVar: itemObject
          style:
            height: "0.39"
            width: "1"
            margin: "0"
            overflow: scroll
          children:
            - type: listItem
              itemObject:
              style:
                marginLeft: "0.04"
                width: "0.92"
                height: "auto"
                overflow: hidden
              children:
                - type: view
                  style:
                    marginTop: "0.0147"
                    width: "0.92"
                    height: "auto"
                  children:
                    - type: image
                      path: x.svg
                      onClick:
                        - emit:
                            dataKey:
                              var: itemObject
                            actions:
                              - =.builtIn.array.removeByName:
                                  dataIn:
                                    object: =..apiRequest.reasonForVisit.docCreateReq.name.data.reasonForVisit.OfficeVisits
                                    key: reason
                                    name: $var.reason
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: officeVisits
                      style:
                        display: "inline-block"
                        height: "0.025"
                        zIndex: 10
                        verticalAlign: middle
                    - type: label
                      dataKey: itemObject.reason
                      style:
                        marginLeft: "0.032"
                        display: "inline-block"
                        verticalAlign: middle
                        fontSize: .Nfont.h12
                        width: "0.38"
                        wordBreak: break-all
                    - type: label
                      dataKey: itemObject.duration
                      style:
                        marginLeft: "0.04"
                        display: "inline-block"
                        verticalAlign: middle
                        fontSize: .Nfont.h12
                        width: "0.18"
                        wordBreak: break-all
                    - type: label
                      text: View
                      onClick:
                        - emit:
                            dataKey:
                              var: itemObject
                            actions:
                              # - ..formData.reasonSelected@: $var
                              - .Global.formData.reasonSelected@: []
                              - .Global.formData.reasonSelected@: $var.document
                              - .Global.formData.reasonForVisit.OfficeVisits@: =..apiRequest.reasonForVisit.docCreateReq.name.data.reasonForVisit.OfficeVisits
                              # 清空currentFillReason
                              - .Global.formData.currentFillReason.officeReason@: =..formData.reasonReset
                        - goto: ReasonFormFiles
                      style:
                        marginLeft: "0.032"
                        display: "inline-block"
                        verticalAlign: middle
                        fontSize: .Nfont.h12
                        width: "auto"
                        color: "0x2988e6"
                        wordBreak: break-all
                        textDecoration: underline
                        cursor: pointer
