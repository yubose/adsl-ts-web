BillingInfo2:
  title: "Billing Info"
  init:
    - .SignInCheck

    - ..billingInfo@: =.NewPatientFormDM.patientChart.billingInfo
    - ..patientForm.docReq@: =.Global.formData.newPatientForm.doc
    - if:
        - =.Global.formData.front_IDCard.doc
        - actionType: evalObject
          object:
            - ..front_IDCard.docRes@: =.Global.formData.front_IDCard
            - =.builtIn.utils.prepareDoc:
                dataIn:
                  doc: =..front_IDCard.docRes.doc
                dataOut: BillingInfo2.front_IDCard.docRes
        - continue
    - if:
        - =.Global.formData.front_InsuranceCard.doc
        - actionType: evalObject
          object:
            - ..front_InsuranceCard.docRes@: =.Global.formData.front_InsuranceCard
            - =.builtIn.utils.prepareDoc:
                dataIn:
                  doc: =..front_InsuranceCard.docRes.doc
                dataOut: BillingInfo2.front_InsuranceCard.docRes
        - continue
    - if:
        - =.Global.formData.back_InsuranceCard.doc
        - actionType: evalObject
          object:
            - ..back_InsuranceCard.docRes@: =.Global.formData.back_InsuranceCard
            - =.builtIn.utils.prepareDoc:
                dataIn:
                  doc: =..back_InsuranceCard.docRes.doc
                dataOut: BillingInfo2.back_InsuranceCard.docRes
        - continue
  billingInfo: ""
  patientForm:
    docReq: ""
    docRes: ""
    docAPI:
      store:
        api: cd
        dataIn: BillingInfo2.patientForm.docReq
        dataOut: Global.formData.newPatientForm
  billingInfoTemp:
    - key: medicalInsurance
      value: "Yes"
    - key: medicalInsurance
      value: "No"
  indentificationTemp:
    - key: membersID
      value: Members ID
    - key: companyName
      value: Insurance Company Name
    - key: insuredName
      value: Insured Name
    - key: relationship
      value: Relationship to Patient
  socialSecurityNumber:
    - key: securityNumber
      value: Social Security Number
  formData:
    doc: []
  front_IDCard:
    docRes: ""
    docReq:
      name:
        title: ""
        type: ..front_IDCard.docAPI.store.subtype.mediaType
        data: binFile
      eid: .Global.rootNotebookID
      type: .DocType.F_IDCard
      fid: .Global.formData.newPatientForm.doc.id
    docAPI:
      store:
        api: cd
        dataIn: BillingInfo2.front_IDCard.docReq
        subtype:
          mediaType: ""
        dataOut: Global.formData.front_IDCard
  front_InsuranceCard:
    docReq:
      name:
        type: ..front_InsuranceCard.docAPI.store.subtype.mediaType
        data: binFile
      eid: .Global.rootNotebookID
      fid: .Global.formData.newPatientForm.doc.id
      type: .DocType.F_InsuranceCard
    docAPI:
      store:
        api: cd
        dataIn: BillingInfo2.front_InsuranceCard.docReq
        dataOut: Global.formData.front_InsuranceCard
        subtype:
          mediaType: ""
  back_InsuranceCard:
    docReq:
      fid: .Global.formData.newPatientForm.doc.id
      name:
        type: ..back_InsuranceCard.docAPI.store.subtype.mediaType
        data: binFile
      eid: .Global.rootNotebookID
      type: .DocType.B_InsuranceCard
    docAPI:
      store:
        api: cd
        dataIn: BillingInfo2.back_InsuranceCard.docReq
        dataOut: Global.formData.back_InsuranceCard
        subtype:
          mediaType: ""
  signature0:
    docReq: ""
    docAPI:
      store:
        api: cd
        dataIn: BillingInfo2.signature0.docReq
  signature1:
    docReq: ""
    docAPI:
      store:
        api: cd
        dataIn: BillingInfo2.signature1.docReq
  components:
    - .BaseHeader:
    - .HeaderLeftButton:
    - type: scrollView
      style:
        top: "0.1"
        left: "0"
        width: "1"
        height: "0.83"
        overflow: scroll
      children:
        - type: view
          style:
            top: "0"
            left: "0"
            height: "auto"
            width: "1"
          children:
            - type: view
              style:
                top: "0"
                left: "0"
                height: "0.14"
                width: "0.9"
              children:
                - type: label
                  text: Billing Information
                  style:
                    top: "0.02"
                    left: "0.08"
                    height: "0.05"
                    width: "0.9"
                    fontSize: "23"
                    fontFamily: "Poppins"
                - type: view
                  style:
                    top: "0.065"
                    left: "0.05"
                    height: "0.002"
                    width: "0.9"
                    border:
                      style: "2"
                    borderColor: "#DEDEDF"
                    borderWidth: "1"
            - type: view
              style:
                top: "0.08"
                left: "0"
                height: "0.12"
                width: "1"
              children:
                - type: label
                  text: Do you have medical insurance?
                  style:
                    top: "0.01"
                    left: "0.08"
                    height: "0.03"
                    width: "0.84"
                    fontSize: "16"
                - type: list
                  contentType: listObject
                  listObject: ..billingInfoTemp
                  iteratorVar: itemObject
                  viewTag: medicalInsuranceTag
                  style:
                    top: "0.04"
                    left: "0.08"
                    width: "0.84"
                    height: "0.1"
                    axis: horizontal
                  children:
                    - type: listItem
                      itemObject: ""
                      style:
                        width: "0.42"
                        left: "0"
                        height: "0.05"
                        display: inline-block
                      children:
                        - type: image
                          path:
                            emit:
                              dataKey:
                                var: itemObject
                              actions:
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..billingInfo.medicalInsurance
                                          string2: $var.value
                                    - selectOn.svg
                                    - selectOff.svg
                          onClick:
                            - emit:
                                dataKey:
                                  var: itemObject
                                actions:
                                  - if:
                                      - =.builtIn.string.equal:
                                          dataIn:
                                            string1: =..billingInfo.medicalInsurance
                                            string2: $var.value
                                      - =.builtIn.object.clear:
                                          dataIn:
                                            object: =..billingInfo
                                            key: $var.key
                                      - =.builtIn.object.set:
                                          dataIn:
                                            object: =..billingInfo
                                            key: $var.key
                                            value: $var.value
                            - actionType: evalObject
                              object:
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..billingInfo.medicalInsurance
                                          string2: "Yes"
                                    - actionType: evalObject
                                      object:
                                        - actionType: builtIn
                                          funcName: show
                                          viewTag: yesPage
                                    - continue
                            - actionType: evalObject
                              object:
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..billingInfo.medicalInsurance
                                          string2: "Yes"
                                    - actionType: evalObject
                                      object:
                                        - actionType: builtIn
                                          funcName: hide
                                          viewTag: docPage
                                    - continue
                            - actionType: evalObject
                              object:
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..billingInfo.medicalInsurance
                                          string2: "Yes"
                                    - actionType: evalObject
                                      object:
                                        - actionType: builtIn
                                          funcName: hide
                                          viewTag: noPage
                                    - continue
                            - actionType: evalObject
                              object:
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..billingInfo.medicalInsurance
                                          string2: ""
                                    - actionType: evalObject
                                      object:
                                        - actionType: builtIn
                                          funcName: show
                                          viewTag: docPage
                                    - continue
                            - actionType: evalObject
                              object:
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..billingInfo.medicalInsurance
                                          string2: ""
                                    - actionType: evalObject
                                      object:
                                        - actionType: builtIn
                                          funcName: hide
                                          viewTag: yesPage
                                    - continue
                            - actionType: evalObject
                              object:
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..billingInfo.medicalInsurance
                                          string2: ""
                                    - actionType: evalObject
                                      object:
                                        - actionType: builtIn
                                          funcName: hide
                                          viewTag: noPage
                                    - continue
                            - actionType: evalObject
                              object:
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..billingInfo.medicalInsurance
                                          string2: "No"
                                    - actionType: evalObject
                                      object:
                                        - actionType: builtIn
                                          funcName: show
                                          viewTag: noPage
                                    - continue
                            - actionType: evalObject
                              object:
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..billingInfo.medicalInsurance
                                          string2: "No"
                                    - actionType: evalObject
                                      object:
                                        - actionType: builtIn
                                          funcName: hide
                                          viewTag: yesPage
                                    - continue
                            - actionType: evalObject
                              object:
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..billingInfo.medicalInsurance
                                          string2: "No"
                                    - actionType: evalObject
                                      object:
                                        - actionType: builtIn
                                          funcName: hide
                                          viewTag: docPage
                                    - continue
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: medicalInsuranceTag
                          style:
                            top: "0"
                            left: "0"
                            height: "0.02"
                        - type: label
                          dataKey: itemObject.value
                          style:
                            top: "0"
                            left: "0.05"
                            width: "0.2"
                            height: "0.02"
                            fontSize: "16"
            - type: view
              viewTag: yesPage
              style:
                top: "0.25"
                left: "0.08"
                height: "0.68"
                width: "0.84"
                isHidden: true
              children:
                - type: view
                  style:
                    top: "0"
                    left: "0"
                    height: "0.3"
                    width: "0.84"
                  children:
                    - type: label
                      text: IDENTIFICATION
                      style:
                        top: "0"
                        left: "0"
                        height: "0.03"
                        width: "0.84"
                        fontSize: "17"
                    - type: label
                      text: Please upload your Driver license (DL) or federal ID
                      style:
                        top: "0.03"
                        left: "0"
                        height: "0.03"
                        width: "0.84"
                        fontSize: "13"
                    - type: label
                      text: Front of identification Card
                      style:
                        top: "0.1"
                        left: "0"
                        height: "0.03"
                        width: "0.84"
                        fontSize: "12"
                        textAlign:
                          x: center
                    - type: view
                      style:
                        left: "0"
                        width: "0.84"
                        height: "0.1"
                        top: "0.13"
                        textAlign:
                          x: center
                      children:
                        - type: image
                          viewTag: front_IDCardTag
                          contentType: file
                          path:
                            emit:
                              actions:
                                - if:
                                    - =..front_IDCard.docRes.name.data
                                    - ..front_IDCard.docRes.name.data
                                    - uploadFile.png
                          onClick:
                            - actionType: updateObject
                              dataKey: BillingInfo2.front_IDCard.docReq.name.data
                              dataObject: BLOB
                            - actionType: evalObject
                              object:
                                - =..front_IDCard.docAPI.store: ""
                                - ..front_IDCard.docRes@: =.Global.formData.front_IDCard
                            - actionType: evalObject
                              object:
                                - =.builtIn.utils.prepareDoc:
                                    dataIn:
                                      doc: =..front_IDCard.docRes.doc
                                    dataOut: BillingInfo2.front_IDCard.docRes
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: front_IDCardTag
                          style:
                            height: "0.1"
                            margin: auto
                - type: view
                  style:
                    top: "0.3"
                    left: "0"
                    height: "0.45"
                    width: "0.84"
                  children:
                    - type: label
                      text: MEDICAL COVERAGE
                      style:
                        top: "0"
                        left: "0"
                        height: "0.03"
                        width: "0.84"
                        fontSize: "17"
                    - type: label
                      text: Please upload your medical insurance card
                      style:
                        top: "0.03"
                        left: "0"
                        height: "0.03"
                        width: "0.84"
                        fontSize: "13"
                    - type: label
                      text: Front of Insurance Card
                      style:
                        top: "0.1"
                        left: "0"
                        height: "0.03"
                        width: "0.84"
                        fontSize: "12"
                        textAlign:
                          x: center
                    - type: view
                      style:
                        left: "0"
                        width: "0.84"
                        height: "0.1"
                        top: "0.13"
                        textAlign:
                          x: center
                      children:
                        - type: image
                          viewTag: front_InsuranceCardTag
                          contentType: file
                          path:
                            emit:
                              actions:
                                - if:
                                    - =..front_InsuranceCard.docRes.name.data
                                    - ..front_InsuranceCard.docRes.name.data
                                    - uploadFile.png
                          onClick:
                            - actionType: updateObject
                              dataKey: BillingInfo2.front_InsuranceCard.docReq.name.data
                              dataObject: BLOB
                            - actionType: evalObject
                              object:
                                - =..front_InsuranceCard.docAPI.store: ""
                                - ..front_InsuranceCard.docRes@: =.Global.formData.front_InsuranceCard
                            - actionType: evalObject
                              object:
                                - =.builtIn.utils.prepareDoc:
                                    dataIn:
                                      doc: =..front_InsuranceCard.docRes.doc
                                    dataOut: BillingInfo2.front_InsuranceCard.docRes
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: front_InsuranceCardTag
                          style:
                            height: "0.1"
                            margin: auto
                    - type: label
                      text: Back of Insurance Card
                      style:
                        top: "0.23"
                        left: "0"
                        height: "0.03"
                        width: "0.8"
                        fontSize: "12"
                        textAlign:
                          x: center
                    - type: view
                      style:
                        left: "0"
                        width: "0.84"
                        height: "0.1"
                        top: "0.26"
                        textAlign:
                          x: center
                      children:
                        - type: image
                          viewTag: back_InsuranceCardTag
                          contentType: file
                          path:
                            emit:
                              actions:
                                - if:
                                    - =..back_InsuranceCard.docRes.name.data
                                    - ..back_InsuranceCard.docRes.name.data
                                    - uploadFile.png
                          onClick:
                            - actionType: updateObject
                              dataKey: BillingInfo2.back_InsuranceCard.docReq.name.data
                              dataObject: BLOB
                            - actionType: evalObject
                              object:
                                - =..back_InsuranceCard.docAPI.store: ""
                                - ..back_InsuranceCard.docRes@: =.Global.formData.back_InsuranceCard
                            - actionType: evalObject
                              object:
                                - =.builtIn.utils.prepareDoc:
                                    dataIn:
                                      doc: =..back_InsuranceCard.docRes.doc
                                    dataOut: BillingInfo2.back_InsuranceCard.docRes
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: back_InsuranceCardTag
                          style:
                            height: "0.1"
                            margin: auto
                - type: view
                  style:
                    top: "0.65"
                    left: "0"
                    height: "0.5"
                    width: "0.9"
                  children:
                    - type: list
                      contentType: listObject
                      listObject: .BillingInfo2.indentificationTemp
                      iteratorVar: itemObject
                      viewTag: indentificationTag
                      style:
                        marginTop: "0.02"
                        width: "0.9"
                        height: "0.5"
                        left: "0"
                      children:
                        - type: listItem
                          itemObject: ""
                          style:
                            marginTop: "0"
                            left: "0"
                            width: "0.9"
                            height: "0.1"
                            backgroundColor: "0xffffffff"
                          children:
                            - type: label
                              dataKey: itemObject.value
                              style:
                                top: "0"
                                left: "0"
                                height: "0.03"
                                width: "0.9"
                                fontSize: "12"
                            - type: textField
                              placeholder:
                                emit:
                                  dataKey:
                                    var: itemObject
                                  actions:
                                    - =.builtIn.object.get:
                                        dataIn:
                                          object: =..billingInfo.indentification
                                          key: $var.key
                              dataValue:
                                emit:
                                  dataKey:
                                    var: itemObject
                                  actions:
                                    - =.builtIn.object.get:
                                        dataIn:
                                          object: =..billingInfo.indentification
                                          key: $var.key
                              dataKey: itemObject.dataValue
                              onChange:
                                emit:
                                  dataKey:
                                    var: itemObject # itemObject.value to the input field
                                  actions:
                                    - =.builtIn.object.set:
                                        dataIn:
                                          object: =..billingInfo.indentification
                                          key: $var.key
                                          value: $var.dataValue
                              style:
                                left: "0"
                                top: "0.03"
                                width: "0.8"
                                height: "0.04"
                                border:
                                  style: "3"
                                borderColor: "0xdededf"
                                borderWidth: "1"
                                textIndent: "10px"
                                fontSize: "15"
            - type: view
              viewTag: noPage
              style:
                top: "0.25"
                left: "0.08"
                height: "0.68"
                width: "0.9"
                isHidden: true
                overflow: hidden
              children:
                - type: label
                  text: IDENTIFICATION
                  style:
                    top: "0"
                    left: "0"
                    height: "0.03"
                    width: "0.9"
                    fontSize: "17"
                - type: label
                  text: Please upload your Driver license (DL) or federal ID
                  style:
                    top: "0.03"
                    left: "0"
                    height: "0.03"
                    width: "0.9"
                    fontSize: "13"
                - type: label
                  text: Front of identification Card
                  style:
                    top: "0.1"
                    left: "0"
                    height: "0.03"
                    width: "0.8"
                    fontSize: "12"
                    textAlign:
                      x: center
                - type: view
                  style:
                    left: "0"
                    width: "0.84"
                    height: "0.1"
                    top: "0.13"
                    textAlign:
                      x: center
                  children:
                    - type: image
                      viewTag: front_IDCardTag
                      contentType: file
                      path:
                        emit:
                          actions:
                            - if:
                                - =..front_IDCard.docRes.name.data
                                - ..front_IDCard.docRes.name.data
                                - uploadFile.png
                      onClick:
                        - actionType: updateObject
                          dataKey: BillingInfo2.front_IDCard.docReq.name.data
                          dataObject: BLOB
                        - actionType: evalObject
                          object:
                            - =..front_IDCard.docAPI.store: ""
                            - ..front_IDCard.docRes@: =.Global.formData.front_IDCard
                        - actionType: evalObject
                          object:
                            - =.builtIn.utils.prepareDoc:
                                dataIn:
                                  doc: =..front_IDCard.docRes.doc
                                dataOut: BillingInfo2.front_IDCard.docRes
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: front_IDCardTag
                      style:
                        height: "0.1"
                        margin: auto
                - type: list
                  contentType: listObject
                  listObject: ..socialSecurityNumber
                  iteratorVar: itemObject
                  style:
                    top: "0.24"
                    width: "1"
                    margin: "0"
                    height: auto
                  children:
                    - type: listItem
                      itemObject:
                      style:
                        width: "1"
                        height: "0.1"
                        left: "0"
                        marginTop: "0"
                      children:
                        - type: label
                          dataKey: itemObject.value
                          style:
                            top: "0"
                            left: "0"
                            height: "0.03"
                            width: "0.9"
                            fontSize: "12"
                        - type: textField
                          placeholder:
                            emit:
                              dataKey:
                                var: itemObject
                              actions:
                                - =.builtIn.object.get:
                                    dataIn:
                                      object: =..billingInfo.indentification
                                      key: $var.key
                          dataValue:
                            emit:
                              dataKey:
                                var: itemObject
                              actions:
                                - =.builtIn.object.get:
                                    dataIn:
                                      object: =..billingInfo.indentification
                                      key: $var.key
                          dataKey: itemObject.dataValue
                          onChange:
                            emit:
                              dataKey:
                                var: itemObject # itemObject.value to the input field
                              actions:
                                - =.builtIn.object.set:
                                    dataIn:
                                      object: =..billingInfo.indentification
                                      key: $var.key
                                      value: $var.dataValue
                          style:
                            left: "0"
                            top: "0.03"
                            width: "0.8"
                            height: "0.04"
                            border:
                              style: "3"
                            borderColor: "0xdededf"
                            borderWidth: "1"
                            textIndent: "10px"
                            fontSize: "15"
    - type: button
      text: Done
      onClick:
        - actionType: evalObject
          object:
            - ..patientForm.docReq.name.data@: =.NewPatientFormDM.patientChart
        - emit:
            actions:
              - =.builtIn.array.add:
                  dataIn:
                    object: =.Global.vaccine
                    value: "New Patient Form"
              - =.builtIn.array.elementUnique:
                  dataIn:
                    arr: =.Global.vaccine
                  dataOut: BillingInfo2.formData.doc
        - actionType: evalObject
          object:
            - .Global.vaccine@: =..formData.doc
            - =..patientForm.docAPI.store: ""
        - actionType: evalObject
          object:
            .Global._nonce@:
              =.builtIn.math.random: ""
        - actionType: evalObject
          object:
            - goto: =.Global.formData.selectCategory
      style:
        height: "0.05"
        width: "0.84"
        left: "0.08"
        border: "none"
        fontSize: "14"
        top: "0.94"
        backgroundColor: "0x2988e6"
        color: "0xffffff"
        borderRadius: "5px"
        textAlign:
          x: center
