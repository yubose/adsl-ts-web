InboxContacts:
  pageNumber: "350"
  title: Email Contacts
  _nonce: 0
  init:
    - .SignInCheck 
    - actionType: evalObject
      object:
        .Global._nonce@:
          =.builtIn.math.random: ""
    - ..profile.docAPI.get
    - ..admin.docAPI.get              
  # get all provider profile
  profile:
    docReq: 
      ObjType: 12
      id: .Global.currentUser.vertex.id
      xfname: E.bvid|E.evid
      type: .DocType.DoctorProfile
      _nonce: =.Global._nonce
      sCondition: E.type=10002 AND E.tage>0
    docRes: ""
    docAPI:
      get: 
        api: rd
        dataIn: InboxContacts.profile.docReq
        dataOut: InboxContacts.profile.docRes
  # get all facility profile
  admin:
    adminList: ""
    docReq:
      type: .DocType.FacilityProfile
      xfname: E.bvid|E.evid
      id: .Global.currentUser.vertex.id
      ObjType: 12
      sCondition: E.type=10002 AND E.tage>0
    docAPI:
      get: 
        api: rd
        dataIn: InboxContacts.admin.docReq
        dataOut: InboxContacts.admin.adminList
  components:
    - .BaseHeader:
    - .HeaderLeftButton:
    - type: view
      style:
        left: "0"
        width: "1"
        top: "0.1"
        height: "0.06"
        border: 
          style: "2"
        borderColor: "0x00000033"
        backgroundColor: "0x2988e6"
        borderWidth: "1"
        zIndex: "10"
      children:
        - type: textField
          placeholder: "Search"
          dataKey: formData.serachInfo
          style:
            top: "0.015"
            width: "0.8"
            left: "0.05"
            height: "0.03"
            backgroundColor: "0xffffff"
            borderRadius: "5"
            paddingLeft: "20px"
            borderWidth: "0" 
    - type: view
      style: 
        left: "0"
        width: "1"
        top: "0.16"
        height: "0.05"
        border: 
          style: "2"
        borderWidth: "1"
        borderColor: "0xdededf"
      children: 
        - type: label
          text: Provider
          onClick:
            - goto: 
          style: 
            left: "0.15"
            width: "0.24"
            top: "0.01"
            height: "0.039"
            fontSize: .Nfont.h2
            color: "0x2988e6"
            border: 
              style: "2"
            borderWidth: "3"
            textAlign: 
              x: center
              y: center 
        - type: label
          text: Organization
          onClick: 
            - goto:  
          style: 
            left: "0.63"
            width: "0.24"
            top: "0.01"
            height: "0.039"
            fontSize: .Nfont.h2
            fontWeight: "600"
            color: "0x2988e6"
            textAlign: 
              x: center
              y: center
    - type: view
      style:
        top: "0.21"
        left: "0"
        width: "1"
        height: "0.76"
        # overflow: scroll
      children:
        - type: label
          contentType: messageHidden
          text: "No contacts added"
          style:
            left: "0.25"
            marginTop: "0.05"
            width: "0.6"
            height: "0.04"
            color: "0x000058"
            fontSize: "16"
            isHidden: "true"
        - type: scrollView
          style:
             top: "0"
             height: "0.76"
             width: "1"
          children:
            - type: view
              style:
                marginTop: "0"
                height: "0.04"
                width: "1"
                backgroundColor: "0xe9e9eb"
              children:
                - type: label
                  text: A
                  style:
                    top: "0"
                    left: "0.1"
                    height: "0.03"
                    fontSize: .Nfont.h2
            - type: list
              contentType: listObject
              listObject: ..profile.docRes.doc # to dataObject to enumerate the list
              iteratorVar: itemObject
              style:
                marginTop: "0"
                left: "0.05"
                width: "0.9"
                height: "auto"
              children:
                - type: listItem
                  itemObject: ""
                  onClick:
                    - actionType: updateObject
                      dataKey: Global.inboxContact
                      dataObject: itemObject
                    - actionType: builtIn
                      funcName: goBack
                  style:
                    left: "0"
                    width: "0.9"
                    height: "0.1"
                    marginTop: '0'
                    border:
                      style: "2"
                    borderWidth: "1"
                    borderColor: "0x00000011"
                  children:
                    - type: label
                      text: "without data"
                      dataKey: itemObject.name.data.fullName
                      style:
                        top: "0.01"
                        left: "0.05"
                        height: "0.03"
                        width: "0.5"
                        textAlign:
                          x: left
                    - type: label
                      text: "without data"
                      dataKey: itemObject.name.data.phone
                      style:
                        style:
                        left: "0.05"
                        top: "0.05"
                        width: "0.5"
                        height: "0.03"
                        color: "0x00000088"
                        fontSize: "15"
                        textAlign:
                          x: left
            - type: list
              contentType: listObject
              listObject: ..admin.adminList.doc # to dataObject to enumerate the list
              iteratorVar: itemObject
              style:
                marginTop: "0"
                left: "0.05"
                width: "0.9"
                height: "auto"
              children:
                - type: listItem
                  itemObject: ""
                  onClick:
                    - actionType: updateObject
                      dataKey: Global.inboxContact
                      dataObject: itemObject
                    - goto: NewMessage
                  style:
                    left: "0"
                    width: "0.9"
                    height: "0.1"
                    border:
                      style: "2"
                    borderWidth: "1"
                    borderColor: "0x00000011"
                  children:
                    - type: label
                      text: "without data"
                      dataKey: itemObject.name.data.basicInfo.medicalFacilityName
                      style:
                        top: "0.01"
                        left: "0.05"
                        height: "0.03"
                        width: "0.5"
                        textAlign:
                          x: left
                    - type: label
                      text: "without data"
                      dataKey: itemObject.name.data.basicInfo.phoneNumber
                      style:
                        left: "0.05"
                        top: "0.05"
                        width: "0.5"
                        height: "0.03"
                        color: "0x00000088"
                        fontSize: "15"
                        textAlign:
                          x: left
                    
        
        
            

    - type: popUp # view
      viewTag: inviteView
      style:
        left: "0"
        top: "0"
        width: "0.8"
        height: "1"
        # backgroundColor: "0x00000066"
      children:
        - type: view
          style:
            left: "0.05"
            top: "0.3"
            width: "0.8"
            height: "0.35"
            backgroundColor: "0xeeeeeeff"
            border:
              style: "5"
            borderRadius: "15"
          children:
            - type: label
              text: "No email contact is established between you and your friend,would you like to send a invite now?"
              style:
                .LabelStyle:
                  left: "0"
                  top: "0.12"
                  width: "0.8"
                  height: "0.04"
                  color: "0x00000088"
                  fontSize: "20"
                  fontStyle: bold
                  display: inline
                  textAlign:
                    x: center
                    y: center
            - type: divider
              style:
                .DividerStyle:
                  left: "0"
                  top: "0.25436"
                  width: "0.8"
                  height: "0.001"
                  backgroundColor: "0x00000088"
            - type: button
              onClick:
                - actionType: popUpDismiss
                  popUpView: inviteView
              text: Cancel
              style:
                .LabelStyle:
                  left: "0"
                  top: "0.275"
                  width: "0.4"
                  height: "0.06812"
                  color: "0x007affff"
                  fontSize: "17"
                  display: inline
                  textAlign:
                    x: center
                    y: center
                  border:
                    style: "5"
                  borderRadius: "15"
            - type: button
              onClick:
                - actionType: evalObject
                  object:
                    - ..inviteInbox.edge.name.inviteePhoneNumber@: =.Global.inboxContact.name.data.phoneNumber
                    - ..inviteInbox.edge.name.inviterName@: =.Global.currentUser.vertex.name.userName
                    - ..inviteInbox.edge.name.inviterPk@: =.Global.currentUser.vertex.pk 
                - actionType: evalObject
                  object: 
                    - =..inviteInbox.edgeAPI.store: ""
                - actionType: evalObject
                  object:
                    .Global._nonce@:
                      =.builtIn.math.random: ""
                - actionType: popUpDismiss
                  popUpView: inviteView
                - actionType: popUp
                  popUpView: confirmView
              text: Confirm
              style:
                .LabelStyle:
                  left: "0.4"
                  top: "0.275"
                  width: "0.4"
                  height: "0.06812"
                  color: "0x007affff"
                  fontSize: "17"
                  display: inline
                  textAlign:
                    x: center
                    y: center
                  border:
                    style: "5"
                  borderRadius: "15"
            - type: divider
              style:
                .DividerStyle:
                  left: "0.4"
                  top: "0.26"
                  width: "0.001"
                  height: "0.07"
                  backgroundColor: "0x00000088"
    - type: popUp # view
      viewTag: confirmView
      style:
        left: "0"
        top: "0"
        width: "0.8"
        height: "1"
        # backgroundColor: "0x00000066"
      children:
        - type: view
          style:
            left: "0.05"
            top: "0.3"
            width: "0.8"
            height: "0.35"
            backgroundColor: "0xeeeeeeff"
            border:
              style: "5"
            borderRadius: "15"
          children:
            - type: label
              text: "Invite successfully,please waiting for your friend's reply."
              style:
                .LabelStyle:
                  left: "0"
                  top: "0.12"
                  width: "0.8"
                  height: "0.04"
                  color: "0x00000088"
                  fontSize: "20"
                  fontStyle: bold
                  display: inline
                  textAlign:
                    x: center
                    y: center
            - type: divider
              style:
                .DividerStyle:
                  left: "0"
                  top: "0.25436"
                  width: "0.8"
                  height: "0.001"
                  backgroundColor: "0x00000088"
            - type: button
              onClick:
                - actionType: popUpDismiss
                  popUpView: confirmView
              text: Confirm
              style:
                .LabelStyle:
                  left: "0.4"
                  top: "0.275"
                  width: "0.4"
                  height: "0.06812"
                  color: "0x007affff"
                  fontSize: "17"
                  display: inline
                  textAlign:
                    x: center
                    y: center
                  border:
                    style: "5"
                  borderRadius: "15"