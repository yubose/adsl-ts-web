FamilyMemberInfo:
  pageNumber: "330"
  title: "Family Member"
  init:
    - actionType: evalObject
      object:
        .Global._nonce@:
          =.builtIn.math.random: ""
    - .SignInCheck
    - ..profile.docAPI.get
    - actionType: evalObject
      object:
        .FamilyMemberInfo.profileObject@: =..docResponse.doc.0
    - actionType: evalObject
      object:
        .Global.DocProfile.document@: =..docProfile.doc.0
    - actionType: evalObject
      object:
        .FamilyMemberInfo.docDetail.document@: =.Global.DocProfile.document
    # - actionType: evalObject
    #   object:
    #     - .Global.familyProfile@: =..profileObject
    # - if:
    #   - =.FamilyMemberInfo.generalInfo.document.doc.0.id
    #   - .Global.generalInfo@: =..generalInfo.document.doc.0
    #   - continue
    # - if:
    #     - =..docProfile.doc.0
    #     - .Global.currentUser.vertex.name.avatar@: ..docDetail.document.name.data
    #     - continue
    # - actionType: evalObject
    #   object:
    #     - ..avatar.showdocument@: =..avatar.docResponse.doc.0
    # - actionType: evalObject
    #   object:
    #     - =.builtIn.utils.prepareDoc:
    #         dataIn:
    #           doc: =..avatar.showdocument
    #         dataOut: Profile.avatar.showdocument
    # - actionType: evalObject
    #   object:
    #     - ..avatar.url@: =..avatar.showdocument.name.data
    #     - .Global.avatarUrl@: =..avatar.showdocument.name.data
    # - if:
    #     -
    # - actionType: evalObject
    #   object:
    #     =.builtIn.string.concat:
    #       dataIn:
    #         - =..profileObject.name.data.basicInfo.Address.St
    #         - " ,"
    #         - =..profileObject.name.data.basicInfo.Address.line2
    #         - " "
    #         - =..profileObject.name.data.basicInfo.Address.city
    #         - " ,"
    #         - =..profileObject.name.data.basicInfo.Address.state
    #         - " "
    #         - =..profileObject.name.data.basicInfo.Address.zip
    #       dataOut: Profile.profileObject.name.data.basicInfo.address

  docDetail:
    document: ""
  tar: ""
  profileObject:
    .Document: ""
    eid: .Global.familyNotebookID
    type: .DocType.PatientProfile
    name:
      title: ""
      type: "application/json"
      data:
        basicInfo:
          phone: ""
          altphone: ""
          phone2: ""
          avatarUrl: patientImage.svg
          email: ""
          firstName: ""
          middleName: ""
          lastName: ""
          birth: ""
          userName: ""
          address: ""
          # Address:
          #   St: ""
          #   city: ""
          #   state: ""
          #   line2: ""
          #   zip: ""
          name: ""
          relation: ""
  profile:
    docAPI:
      get:
        .DocAPI.get: ""
        api: rd
        ids:
          - .Global.familyNotebookID
        xfname: eid
        type: .DocType.PatientProfile #  type: "257"
        obfname: "ctime"
        maxcount: "1"
        dataKey: docResponse
        _nonce: =.Global._nonce
  docResponse:
    doc:
      - type: .DocType.PatientProfile # - type: "257" # private profile
        eid: .Global.familyNotebookID
        name: ""
    error: ""
    jwt: ""

  retrieveVertex:
    response: ""
    vertex:
      .Vertex: ""
      type: "-1"
      id: =.Global.profile.id
      uid: =.Global.profile.uid
    vertexAPI:
      .VertexAPI: ""
      store:
        api: cv
        dataIn: FamilyMemberInfo.retrieveVertex.vertex
        dataOut: FamilyMemberInfo.retrieveVertex.response

  components:
    - .BasePublicHeader:
      children:
        - .BasePublicHeaderLeft:
        - .BasePublicHeaderTitle:
        - .BasePublicHeaderRightText:
          text: Edit
          onClick:
            - actionType: evalObject
              object:
                - .Global.familyProfile@: =.FamilyMemberInfo.profileObject
            - goto: EditFamilyMemberInfo
    # - .BaseHeader:
    # - .HeaderLeftButton:
    # - .HeaderRightButton:
    #   text: Edit
    #   onClick:
    #     - actionType: evalObject
    #       object:
    #         - .Global.familyProfile@: =.FamilyMemberInfo.profileObject
    #     - goto: EditFamilyMemberInfo
    - type: scrollView
      style:
        left: "0"
        # top: "0.1"
        width: "1"
        height: "0.84729"
        overflow: scroll
      children:
        - .ProfileTitleView:
          style:
            marginTop: "0"
          children:
            - .ProfileTitleText:
        - type: view
          style:
            marginTop: "0"
            height: "0.38"
            width: "1"
          children:
            - type: view
              top: "0"
              height: "0.14"
              width: "1"
              children:
                - .profileContentLeft:
                  style:
                    height: "0.14"
                    textAlign:
                      y: center
                - .profilePhoto:
                  path: patientImage.svg
                  path=func: =.builtIn.utils.prepareDocToPath
                  dataKey: Global.profile.name.avatar
                  # path:
                  #   emit:
                  #     actions:
                  #       - if:
                  #         - =.builtIn.string.equal:
                  #             dataIn:
                  #               string1: =..avatar.showdocument.name.data
                  #               string2: binFile
                  #         - ava.png
                  #         - ..avatar.url
            - type: divider
              style:
                width: "0.99"
                color: "#DEDEDF"
            - .profileContentView:
              style:
                marginTop: "0.01"
              children:
                - .profileContentLeft2:
                  text: "First Name:"
                - .profileContentRight2:
                  dataKey: profileObject.name.data.basicInfo.firstName
            - .profileContentView:
              children:
                - .profileContentLeft2:
                  text: "Middle Name:"
                  style:
                    width: "0.3"
                - .profileContentRight2:
                  dataKey: profileObject.name.data.basicInfo.middleName
            - .profileContentView:
              children:
                - .profileContentLeft2:
                  text: "Last Name:"
                - .profileContentRight2:
                  dataKey: profileObject.name.data.basicInfo.lastName
            - .profileContentView:
              children:
                - .profileContentLeft2:
                  text: "Date of Birth:"
                  style:
                    width: "0.5"
                - .profileContentRight2:
                  dataKey: profileObject.name.data.basicInfo.dateOfBirth
            - .profileContentView:
              children:
                - .profileContentLeft2:
                  text: "Username:"
                - .profileContentRight2:
                  dataKey: profileObject.name.data.basicInfo.userName
            - .profileContentView:
              children:
                - .profileContentLeft2:
                  text: "Gender:"
                - .profileContentRight2:
                  dataKey: profileObject.name.data.basicInfo.gender
            - .profileContentView:
              children:
                - .profileContentLeft2:
                  text: "Relationship:"
                - .profileContentRight2:
                  dataKey: profileObject.name.data.basicInfo.relation
        - .ProfileTitleView:
          style:
            marginTop: "0.04"
          children:
            - .ProfileTitleText:
              text: "Contact"
        - type: view
          style:
            marginTop: "0"
            height: auto
            width: "1"
          children:
            - .profileContentView:
              style:
                marginTop: "0.02"
              children:
                - .profileContentLeft2:
                  text: "Phone Number:"
                  style:
                    width: "0.32"
                - .profileContentRight2:
                  dataKey: profileObject.name.data.basicInfo.phone
            - .profileContentView:
              style:
                marginTop: "0"
              children:
                - .profileContentLeft2:
                  text: "Alternative Number:"
                  style:
                    width: "0.35"
                - .profileContentRight2:
                  dataKey: profileObject.name.data.contactInfo.alternatePhone.fullPhone
            - .profileContentView:
              style:
                marginTop: "0"
              children:
                - .profileContentLeft2:
                  text: "Email:"
                  style:
                    width: "0.2"
                - .profileContentRight2:
                  dataKey: profileObject.name.data.contactInfo.email
            - .profileContentView:
              style:
                marginTop: "0"
                height: "0.06"
              children:
                - .profileContentLeft2:
                  text: "Address:"
                  style:
                    width: "0.2"
                - type: textView
                  isEditable: "false"
                  style:
                    top: "0"

                    width: "0.67"
                    height: "0.052"
                    left: "0.28"
                    fontSize: "13"
                    fontWeight: "600"
                    backgroundColor: "#ffffff"
                    border:
                      style: "1"
                    textAlign:
                      x: right
                  dataKey: profileObject.name.data.contactInfo.address.fullAddress
        - .ProfileTitleView:
          style:
            marginTop: "0"
          children:
            - .ProfileTitleText:
              text: "Emergency Contact"
        - type: view
          style:
            marginTop: "0"
          children:
            - .profileContentView:
              children:
                - .profileContentLeft2:
                  text: "Name:"
                  style:
                    width: "0.15"
                - .profileContentRight2:
                  # chenchen update 7.22 because i dont find the sdk in cadl
                  # text=func: .builtIn.string.formatPhoneNumber_us
                  dataKey: profileObject.name.data.emergencyContact.fullName

            - .profileContentView:
              children:
                - .profileContentLeft2:
                  text: "Relation: "
                  style:
                    width: "0.2"
                - .profileContentRight2:
                  dataKey: profileObject.name.data.emergencyContact.relation
            - .profileContentView:
              children:
                - .profileContentLeft2:
                  text: "Phone Number:"
                  style:
                    width: "0.3"
                - .profileContentRight2:
                  dataKey: profileObject.name.data.emergencyContact.phone.fullPhone
            # - .profileContentView:
            #   children:
            #     - .LargeButton:
            #       text: "Delete"
            #       style:
            #         width: "0.4"
            #         left: "0.3"
            #         height: "0.03"
            #         backgroundColor: "0xDC143C"
            #         textAlign:
            #           x: center
            #           y: center
            #       onClick:
            #         - actionType: popUp
            #           popUpView: confirm

    - type: view
      style:
        height: "0.0972"
        width: "1"
        backgroundColor: "0xffffff"
        boxSizing: border-box

        boxShadow: "1px 1px 4px 1px #dededf"
        overflow: hidden
        textAlign:
          x: center
      children:
        - type: button
          text: Delete
          onClick:
            - actionType: popUp
              popUpView: confirm
          style:
            marginTop: "0.0123"
            height: "0.0443"
            width: "0.84"
            border:
              style: 1
            borderRadius: "5"
            backgroundColor: "0xDC143C"
            color: "#ffffff"
            fontSize: .Nfont.h14
            boxSizing: border-box
            fontWeight: "600"
            textAlign:
              x: center

    - .ConfirmWarningPopup:
      viewTag: confirm
      children:
        - .ConfirmWarningPopupView:
          style:
            height: "auto"
            width: "0.6"
            left: "0.2"
            borderRadius: "10"
            overflow: hidden
          children:
            - type: view
              style:
                height: "0.045"
                width: "0.6"
                backgroundColor: "0xb62929"
              children:
                - type: image
                  path: aboutWhite.svg
                  style:
                    left: "0.21"
                    top: "0.011"
                    width: "5vw"
                - type: label
                  text: Warning
                  style:
                    left: "0.27"
                    height: "0.045"

                    top: "0.005"
                    fontSize: .Nfont.n3
                    color: "0xffffff"
                    textAlign:
                      x: left
                      y: center
            - type: view
              style:
                width: "0.6"
                height: "auto"
                overflow: hidden
              children:
                - type: label
                  text: Do you want to remove this account?
                  style:
                    marginTop: "0.04"
                    height: "auto"
                    width: "0.58"
                    left: "0.01"
                    textAlign:
                      x: center
                    fontSize: "4.2vw"
                    fontWeight: "500"
            - type: view
              style:
                marginTop: "0.04"
                height: "0.001"
                width: "0.6"
                backgroundColor: "0x999999"
            - type: view
              style:
                height: "0.045"
                width: "0.6"
              children:
                - type: view
                  style:
                    top: "0"
                    left: "0.3"
                    height: "0.045"
                    width: "0.002"
                    backgroundColor: "0x999999"
                - type: button
                  text: Cancel
                  style:
                    top: "0.005"
                    left: "0.07"
                    height: "0.04"
                    width: "0.15"
                    fontSize: "5vw"
                    color: "0x007aff"
                    border:
                      style: "1"
                    backgroundColor: "0xe5e5e5"
                    textAlign:
                      x: center
                      y: center
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: confirm
                - type: button
                  text: OK
                  style:
                    top: "0.005"
                    left: "0.375"
                    height: "0.04"
                    width: "0.15"
                    fontSize: "5vw"
                    color: "0x007aff"
                    border:
                      style: "1"
                    backgroundColor: "0xe5e5e5"
                    textAlign:
                      x: center
                      y: center
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: confirm
                    - actionType: evalObject #modify
                      object:
                        - .Global._nonce@:
                            =.builtIn.math.random: ""
                    - actionType: evalObject
                      object:
                        - .Global.createjwt.edge.bvid@: =.Global.profile.id
                        - =.Global.createjwt.edgeAPI.store: ""
                    - actionType: evalObject
                      object:
                        - .FamilyMemberInfo.retrieveVertex.vertex.jwt@: =.Global.createjwt.response.jwt
                        - =.FamilyMemberInfo.retrieveVertex.vertexAPI.store: ""
                    - actionType: builtIn
                      funcName: goBack
                      reload: true
