ViewMedicalRecord:
  pageNumber: "320" # xd page 28
  title: "Document"
  init:
    - .SignInCheck
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =.Global.DocReference.document.type
              string2: "1025"
        - ..formData.imgShowId@: =.Global.DocReference.document.id
        - ..formData.imgShowId@: =.Global.DocReference.document.name.data.fileId
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =.Global.DocReference.document.type
              string2: "151041"
        - ..formData.flag@: "none"
        - continue
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =.Global.DocReference.document.type
              string2: "163841"
        - ..formData.flag@: "none"
        - continue
    # - Global.DocReference.document
    # - actionType: evalObject
    #   object:
    #     =.builtIn.utils.prepareDoc:
    #       dataIn:
    #         doc: =..medicalRecord.document
    #       dataOut: ViewMedicalRecord.medicalRecord.document
    # - actionType: evalObject
    #   object:
    #     =.builtIn.utils.base64ToBlob:
    #       dataIn:
    #         data: =..medicalRecord.document.name.data
    #         type: =..medicalRecord.document.name.type
    #       dataOut: ViewMedicalRecord.medicalRecord.document.name.data
  formData:
    imgShowId: ""
    flag: "block"
  save:
    - =.ViewMedicalRecord.medicalRecord.docAPI.delete: ""
  medicalRecord:
    document:
      .Global.DocReference.document: ""
    docAPI:
      .DocAPI: ""
      store:
        dataIn: ViewMedicalRecord.medicalRecord.document
      delete:
        api: dx
        dataIn: ViewMedicalRecord.medicalRecord.document

  components:
    - .BaseHeader:
    - .HeaderLeftButton:
    - type: scrollView
      style:
        top: "0.1"
        height: "0.9"
        width: "1"
        left: "0"
        overflow: "sroll"
      children:
        - type: view
          style:
            left: "0"
            marginTop: "0"
            width: "1"
            height: "0.15"
          children:
            - type: label
              text: Document Name
              style:
                left: "0.1"
                top: "0.05"
                width: "0.72"
                height: "0.04"
                color: "0x828282"
                fontSize: .Nfont.h2
            - type: label
              dataKey: medicalRecord.document.name.title
              style:
                left: "0.1"
                top: "0.1"
                width: "0.8"
                height: "0.04"
                fontSize: .Nfont.h2
                color: "0x000000ff"
                border:
                  style: "2"
                  color: "0x000000ef"
                borderWidth: "1"
        - type: view
          style:
            left: "0.1"
            marginTop: "0"
            height: "0.5"
            width: "0.8"
          children:
            - type: image
              path=func: =.builtIn.utils.prepareDocToPath
              dataKey: formData.imgShowId
              style:
                left: "0"
                marginTop: "0"
                width: "0.8"
        - type: view
          style:
            marginTop: "0.05"
            left: "0"
            height: "0.15"
            width: "1"
          children:
            - type: button
              text: Done
              onClick:
                - actionType: builtIn
                  funcName: goBack
              style:
                display: ..formData.flag
                left: "0.133"
                top: "0"
                width: "0.72"
                height: "0.06"
                fontSize: .Nfont.h2
                backgroundColor: "0x2988e6ff"
                borderRadius: "3"
                color: "0xffffffff"
                border:
                  style: "3"
                borderColor: "0x2988e6ff"
                textAlign:
                  x: center
            - type: button
              text: Delete
              onClick:
                - actionType: evalObject
                  object: ..save
                - actionType: evalObject
                  object:
                    .Global._nonce@:
                      =.builtIn.math.random: ""
                - actionType: builtIn
                  funcName: goBack
                  reload: true
              style:
                left: "0.133"
                top: "0.08"
                borderRadius: "3"
                width: "0.72"
                height: "0.06"
                fontSize: .Nfont.h2
                backgroundColor: "0xd53c42"
                color: "0xffffffff"
                border:
                  style: "3"
                borderColor: "0xd53c42"
                textAlign:
                  x: center
