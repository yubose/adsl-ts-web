FluVaccinationConsentFormEnglishEditPage1:
  title: Flu Vaccination Consent Form 2020-2021(English)
  appointmentInfo: .Global.roomInfo.edge
  init: #Page initialization
    - .SignInCheck
    - =.builtIn.string.concat:
        dataIn:
          - =.Global.Profile.name.data.basicInfo.fullName
        dataOut: FluVaccinationConsentFormEnglishEditPage1.apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.providerInfo.providerFullName
    - if:
        - =.Global.formData.patientDoc.fluVaccinationConsentFormEnglish.doc
        - ..apiRequest.fluVaccinationConsentFormEnglish.docReq@: =.Global.formData.patientDoc.fluVaccinationConsentFormEnglish.doc
        - continue
    - if:
        - =.FluVaccinationConsentFormEnglishEditPage1.apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.whetherSign
        - continue
        # 非空修改显示的标识,刷新签名区域
        - actionType: evalObject
          object:
            # 签名的时间
            - ..formData.temporarySignature@: =.FluVaccinationConsentFormEnglishEditPage1.apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.signatureId
            - ..formData.flag@: "block"
            - actionType: builtIn
              funcName: redraw
              viewTag: signatureTag
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =.Global.formData.patientDoc.fluVaccinationConsentFormEnglish.doc.name.data.fluVaccinationInfo.VaccinationConsentOne.isRequired
              string2: ""
        - continue
        - ..formData.selectStatusOne.Vaccination.isRequired@: =.Global.formData.patientDoc.fluVaccinationConsentFormEnglish.doc.name.data.fluVaccinationInfo.VaccinationConsentOne.isRequired
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =.Global.formData.patientDoc.fluVaccinationConsentFormEnglish.doc.name.data.fluVaccinationInfo.VaccinationConsentTwo.isRequired
              string2: ""
        - continue
        - ..formData.selectStatusTwo.Vaccination.isRequired@: =.Global.formData.patientDoc.fluVaccinationConsentFormEnglish.doc.name.data.fluVaccinationInfo.VaccinationConsentTwo.isRequired
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =.Global.formData.patientDoc.fluVaccinationConsentFormEnglish.doc.name.data.fluVaccinationInfo.VaccinationConsentThree.isRequired
              string2: ""
        - continue
        - ..formData.selectStatusThree.Vaccination.isRequired@: =.Global.formData.patientDoc.fluVaccinationConsentFormEnglish.doc.name.data.fluVaccinationInfo.VaccinationConsentThree.isRequired
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =.Global.formData.patientDoc.fluVaccinationConsentFormEnglish.doc.name.data.fluVaccinationInfo.VaccinationConsentFour.isRequired
              string2: ""
        - continue
        - ..formData.selectStatusFour.Vaccination.isRequired@: =.Global.formData.patientDoc.fluVaccinationConsentFormEnglish.doc.name.data.fluVaccinationInfo.VaccinationConsentFour.isRequired
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =.Global.formData.patientDoc.fluVaccinationConsentFormEnglish.doc.name.data.fluVaccinationInfo.VaccinationConsentFour.certifyCheck
              string2: ""
        - continue
        - ..formDataTemp.isClaimsAd@: =.Global.formData.patientDoc.fluVaccinationConsentFormEnglish.doc.name.data.fluVaccinationInfo.certifyCheck
    - =.builtIn.date.getTime:
        dataIn:
        dataOut: FluVaccinationConsentFormEnglishEditPage1.apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.signTime
    - =.builtIn.string.formatUnixtimeL_en:
        dataIn:
          - =..apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.signTime
        dataOut: FluVaccinationConsentFormEnglishEditPage1.apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.signTime
  formData: #Input data here
    doc: ""
    flag: "none"
    whetherSign: true
    companyName: ""
    temporarySignature: ""
    selectStatusOne:
      Vaccination:
        isRequired: ""
    selectStatusTwo:
      Vaccination:
        isRequired: ""
    selectStatusThree:
      Vaccination:
        isRequired: ""
    selectStatusFour:
      Vaccination:
        isRequired: ""
    selectStatusInjection:
      # isRequired: false
      isRequired: ""
  formDataTemp: #Input data temp here, datatemp should not mix with formData
    isClaimsAd: false
    VaccinationConsentOne:
      - key: isRequired
        value: "Yes"
      - key: isRequired
        value: "No"
    VaccinationConsentTwo:
      - key: isRequired
        value: "Yes"
      - key: isRequired
        value: "No"
    VaccinationConsentThree:
      - key: isRequired
        value: "Yes"
      - key: isRequired
        value: "No"
    VaccinationConsentFour:
      - key: isRequired
        value: "Yes"
      - key: isRequired
        value: "No"
  apiRequest: #Input data request here
    # 签名文档
    newSign:
      docResp: ""
      docReq: #DOC
        .Document: ""
        type: .DocType.DocumentSignature
        name:
          title: ""
          type: ..apiRequest.newSign.docReq.subtype.mediaType
          data:
            size: ""
        eid: .Global.rootNotebookID
        fid: ""
        subtype:
          mediaType: "" # mediaType : "image/jpeg"
      docAPI: # DOCAPI
        .DocAPI: ""
        store:
          api: cd
          dataIn: FluVaccinationConsentFormEnglishEditPage1.apiRequest.newSign.docReq
          dataOut: FluVaccinationConsentFormEnglishEditPage1.apiRequest.newSign.docResp
    # FluVaccinationConsentFormEnglish文档
    fluVaccinationConsentFormEnglish:
      docResp: ""
      docReq:
        eid: .Global.rootNotebookID
        type: .DocType.FluVaccinationConsentFormEnglish
        name:
          title: "Flu Vaccination Consent Form 2020-2021(English)"
          user: .Global.currentUser.vertex.name.userName
          type: "text/plain"
          subtype: "0" #0是未完成，1是完成
          data:
            signTime: ""
            classTag:
              name: Patient
              fontColor: "0xf8ae29"
              backgroundColor: "0xfff4e0"
              display: block
            statusTag:
              display: none
            signatureId: ""
            whetherSign: true
            authority: ""
            fontcolor: ""
            facilityInfo:
              facilityName: .Global.currentFacility.name.data.basicInfo.medicalFacilityName
              location: .Global.currentFacility.name.data.basicInfo.location
              email: .Global.currentFacility.name.data.basicInfo.email
              aiTmedID: .Global.currentFacility.name.data.basicInfo.locationID
              phone: .Global.currentFacility.name.data.basicInfo.phoneNumber
              fax: .Global.currentFacility.name.data.basicInfo.fax
              website: .Global.currentFacility.name.data.basicInfo.website
            providerInfo:
              providerFullName: ""
              signDate: ""
            patientInfo:
              examDate: .FluVaccinationConsentFormEnglishEditPage1.appointmentInfo.stime
              patientName: .Global.Profile.name.data.basicInfo.fullName
              dob: .Global.Profile.name.data.basicInfo.dateOfBirth
              aiTmedID: .Global.Profile.name.data.basicInfo.userName
              phone: .Global.Profile.name.data.basicInfo.phone
              email: .Global.Profile.name.data.contactInfo.email
            fluVaccinationInfo:
              officeUseDescription:
                Lot: ""
                Exp: ""
                Nurse: ""
                locationOfInjection: ""
              companyName: ""
              VaccinationConsentOne: ""
              VaccinationConsentTwo: ""
              VaccinationConsentThree: ""
              VaccinationConsentFour: ""
              certifyCheck: ""
      docAPI:
        store:
          api: cd
          dataIn: FluVaccinationConsentFormEnglishEditPage1.apiRequest.fluVaccinationConsentFormEnglish.docReq
          # dataOut: fluVaccinationConsentFormEnglish.apiRequest.fluVaccinationConsentFormEnglish.docResp
          dataOut: Global.formData.patientDoc.fluVaccinationConsentFormEnglish
          subtype:
            mediaType: "text/plain"
        get:
          api: rd
          dataKey: FluVaccinationConsentFormEnglishEditPage1.docResp
          id: .Global.Note.id
          xfname: eid
          type: .DocType.FluVaccinationConsentFormEnglish
          maxcount: "1"
        delete:
          api: dx
          dataIn: FluVaccinationConsentFormEnglishEditPage1.apiRequest.fluVaccinationConsentFormEnglish.docReq

  components:
    - .BaseHeader:
    - .HeaderLeftButton:
    - type: scrollView
      style:
        top: "0.1"
        left: "0"
        width: "1"
        height: "0.8"
        overflow: scroll
      children:
        - type: view
          style:
            height: "auto"
            width: "0.9"
            left: "0.05"
          children:
            - type: view
              style:
                marginTop: "0.04"
                height: "0.15"
                width: "0.9"
              children:
                - type: view
                  style:
                    top: "0"
                    left: "0.25"
                    height: "auto"
                    width: "0.65"
                    overflow: hidden
                  children:
                    - type: label
                      # text: A&C Urgent Care
                      dataKey: apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.facilityInfo.facilityName
                      style:
                        height: "auto"
                        width: "0.65"
                        color: "0x0f0f0f"
                        fontSize: .Nfont.h4

                    - type: label
                      # text: 1000 S Anaheim Blvd Ste 200 Anaheim, CA 92805
                      dataKey: apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.facilityInfo.location
                      style:
                        marginTop: "0.01"
                        height: "auto"
                        width: "0.63"
                        color: "0x0f0f0f"
                        fontSize: .Nfont.h1

                    - type: label
                      dataKey: apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.facilityInfo.website
                      style:
                        marginTop: "0.01"
                        height: "auto"
                        width: "0.65"
                        color: "0x0f0f0f"
                        fontSize: .Nfont.h1

                - type: view
                  style:
                    top: "0"
                    left: "0"
                    height: "0.1"
                    width: "0.22"
                  children:
                    - type: image
                      path: hospital.png
                      dataKey:
                      style:
                        height: "0.1"
                        width: "0.22"
            - type: view
              style:
                height: "auto"
                width: "0.9"
                left: "0"
                # backgroundColor: 'pink'
              children:
                - type: view
                  style:
                    marginTop: "0"
                    left: "0"
                    width: "0.85"
                    height: "0.03"
                  children:
                    - type: label
                      # text: loremipsum@dictew.com
                      dataKey: apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.facilityInfo.email
                      style:
                        left: "0.13"
                        width: "0.72"
                        fontSize: .Nfont.h1
                        wordWrap: break-word

                        color: "0x0f0f0f"
                    - type: label
                      text: Email
                      style:
                        top: "0"
                        left: "0"
                        height: "auto"
                        width: "0.12"
                        fontSize: .Nfont.h1

                        color: "0x757575"
                - type: view
                  style:
                    marginTop: "0.01"
                    left: "0"
                    width: "0.85"
                    height: "0.03"
                  children:
                    - type: label
                      # text: A&Curgentcare
                      dataKey: apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.facilityInfo.aiTmedID
                      style:
                        left: "0.21"
                        width: "0.6"
                        fontSize: .Nfont.h1
                        wordWrap: break-word

                        color: "0x0f0f0f"
                    - type: label
                      text: AiTmed ID
                      style:
                        top: "0"
                        left: "0"
                        height: "auto"
                        width: "0.2"
                        fontSize: .Nfont.h1

                        color: "0x757575"
                - type: view
                  style:
                    marginTop: "0.01"
                    left: "0"
                    width: "0.85"
                    height: "0.03"
                  children:
                    - type: label
                      dataKey: apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.facilityInfo.phone
                      # text: +1 (657) 220-5555
                      style:
                        left: "0.15"
                        width: "0.65"
                        fontSize: .Nfont.h1
                        wordWrap: break-word

                        color: "0x0f0f0f"
                    - type: label
                      text: Phone
                      style:
                        top: "0"
                        left: "0"
                        height: "auto"
                        width: "0.15"
                        fontSize: .Nfont.h1

                        color: "0x757575"
                - type: view
                  style:
                    marginTop: "0.01"
                    left: "0"
                    width: "0.85"
                    height: "0.03"
                  children:
                    - type: label
                      dataKey: apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.facilityInfo.fax
                      # text:  +1 (657) 220-5556
                      style:
                        left: "0.1"
                        width: "0.7"
                        fontSize: .Nfont.h1
                        wordWrap: break-word

                        color: "0x0f0f0f"
                    - type: label
                      text: Fax
                      style:
                        top: "0"
                        left: "0"
                        height: "auto"
                        width: "0.1"
                        fontSize: .Nfont.h1

                        color: "0x757575"
            - type: view
              style:
                marginTop: "0.03"
                left: "0"
                width: "0.9"
                height: "0.01"
                backgroundColor: "0x707070"
        - type: view
          style:
            height: "auto"
            width: "0.9"
            left: "0.05"
          children:
            - type: view
              style:
                marginTop: "0.02"
                height: "auto"
                width: "0.9"
                left: "0"
                # backgroundColor: 'pink'
              children:
                - type: view
                  style:
                    marginTop: "0"
                    left: "0"
                    width: "0.85"
                    height: "0.03"
                  children:
                    - type: label
                      text=func: .builtIn.string.formatUnixtime_en
                      dataKey: apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.patientInfo.examDate
                      style:
                        left: "0.23"
                        width: "0.6"
                        fontSize: .Nfont.h1
                        wordWrap: break-word

                        color: "0x0f0f0f"
                    - type: label
                      text: Exam Date
                      style:
                        top: "0"
                        left: "0"
                        height: "auto"
                        width: "0.22"
                        fontSize: .Nfont.h1

                        color: "0x757575"
                - type: view
                  style:
                    marginTop: "0.01"
                    left: "0"
                    width: "0.85"
                    height: "0.03"
                  children:
                    - type: label
                      # text: Melissa L. West
                      dataKey: apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.patientInfo.patientName
                      style:
                        left: "0.3"
                        width: "0.55"
                        fontSize: .Nfont.h1
                        wordWrap: break-word

                        color: "0x0f0f0f"
                    - type: label
                      text: Patient Name
                      style:
                        top: "0"
                        left: "0"
                        height: "auto"
                        width: "0.27"
                        fontSize: .Nfont.h1

                        color: "0x757575"
                - type: view
                  style:
                    marginTop: "0.01"
                    left: "0"
                    width: "0.85"
                    height: "0.03"
                  children:
                    - type: label
                      dataKey: apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.patientInfo.dob
                      # text: 02/13/1994
                      style:
                        left: "0.15"
                        width: "0.65"
                        fontSize: .Nfont.h1
                        wordWrap: break-word

                        color: "0x0f0f0f"
                    - type: label
                      text: DOB
                      style:
                        top: "0"
                        left: "0"
                        height: "auto"
                        width: "0.15"
                        fontSize: .Nfont.h1

                        color: "0x757575"
                - type: view
                  style:
                    marginTop: "0.01"
                    left: "0"
                    width: "0.85"
                    height: "0.03"
                  children:
                    - type: label
                      dataKey: apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.patientInfo.aiTmedID
                      # text: Mellissa1234
                      style:
                        left: "0.26"
                        width: "0.59"
                        fontSize: .Nfont.h1
                        wordWrap: break-word

                        color: "0x0f0f0f"
                    - type: label
                      text: AiTmed ID
                      style:
                        top: "0"
                        left: "0"
                        height: "auto"
                        width: "0.25"
                        fontSize: .Nfont.h1

                        color: "0x757575"
                - type: view
                  style:
                    marginTop: "0.01"
                    left: "0"
                    width: "0.85"
                    height: "0.03"
                  children:
                    - type: label
                      dataKey: apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.patientInfo.phone
                      # text: +1 (213) 706-4507
                      style:
                        left: "0.16"
                        width: "0.75"
                        fontSize: .Nfont.h1
                        wordWrap: break-word

                        color: "0x0f0f0f"
                    - type: label
                      text: Phone
                      style:
                        top: "0"
                        left: "0"
                        height: "auto"
                        width: "0.15"
                        fontSize: .Nfont.h1

                        color: "0x757575"
                - type: view
                  style:
                    marginTop: "0.01"
                    left: "0"
                    width: "0.85"
                    height: "0.03"
                  children:
                    - type: label
                      dataKey: apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.patientInfo.email
                      # text: loremipsum@ticdes.com
                      style:
                        left: "0.14"
                        width: "0.71"
                        fontSize: .Nfont.h1
                        wordWrap: break-word

                        color: "0x0f0f0f"
                    - type: label
                      text: Email
                      style:
                        top: "0"
                        left: "0"
                        height: "auto"
                        width: "0.13"
                        fontSize: .Nfont.h1

                        color: "0x757575"
            - type: view
              style:
                marginTop: "0.03"
                left: "0"
                width: "0.9"
                height: "0.01"
                backgroundColor: "0x707070"
        - type: view
          style:
            marginTop: "0.04"
            height: "auto"
            width: "0.9"
            left: "0.05"
          children:
            - type: label
              text: "Company Name/Referred by"
              style:
                height: "auto"
                width: "0.9"
                color: "0x0f0f0f"
                fontSize: .Nfont.h1
                fontStyle: bold

            - type: view
              style:
                marginTop: "0.02"
                height: "0.05"
                width: "0.9"
              children:
                - .BaseTextField:
                  placeholder: "Enter here"
                  dataKey: apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.fluVaccinationInfo.companyName
                  style:
                    top: "0"
                    left: "0"
                    width: "0.885"
                    height: "0.03"
                    resize: "none"
                    fontSize: .Nfont.h1

                    color: "0x0f0f0f"
                    borderRadius: "3"
        - type: view
          style:
            marginTop: "0.02"
            left: "0.05"
            width: "0.9"
            height: "0.01"
            backgroundColor: "0x707070"
        - type: view
          style:
            marginTop: "0.02"
            width: "0.9"
            height: "auto"
            left: "0.05"
          children:
            - type: label
              text: "HAVE YOU EVER HAD ANY OF THE FOLLOWING?"
              style:
                width: "0.9"
                left: "0"
                height: "auto"
                fontSize: .Nfont.h1

                wordWrap: break-word
                fontStyle: bold
                color: "0x0f0f0f"
                textAlign:
                  y: center
            - type: view
              style:
                left: "0"
                width: "0.9"
                marginTop: "0.02"
              children:
                # - type: view
                #   style:
                #     left: "0"
                #     width: "0.9"
                #   children:
                #     - type: label
                #       text: "HAS TENDO ALGUNO DE LO SIGUIENTE?"
                #       style:
                #         fontSize: .Nfont.h1
                #
                #         fontWeight: "550"
                #         color: "0x0f0f0f"
                - type: view
                  style:
                    left: "0"
                    width: "0.9"
                    marginTop: "0"
                  children:
                    - type: label
                      text: "1) ALLERGIC REACTION TO CHICKEN EGGS?"
                      style:
                        fontSize: .Nfont.h1

                        color: "0x0f0f0f"
                    - type: list
                      contentType: listObject
                      listObject: ..formDataTemp.VaccinationConsentOne
                      iteratorVar: itemObject
                      viewTag: isRequiredGeactionTag
                      style:
                        left: "0.045"
                        width: "0.35"
                        # height: "0.04"
                        axis: horizontal
                      children:
                        - type: listItem
                          itemObject:
                          style:
                            width: "0.175"
                            height: "0.06"
                            left: "0"
                            marginTop: "0"
                          children:
                            - type: image
                              style:
                                top: "0.02"
                                left: "0"
                                height: "0.025"
                              path:
                                emit:
                                  dataKey:
                                    var: itemObject
                                  actions:
                                    - if:
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: =..formData.selectStatusOne.Vaccination.isRequired
                                              string2: $var.value
                                        - selectOnBlack.svg
                                        - selectOffBlack.svg
                              onClick:
                                - emit:
                                    dataKey:
                                      var: itemObject
                                    actions:
                                      - if:
                                          - =.builtIn.string.equal:
                                              dataIn:
                                                string1: =..formData.selectStatusOne.Vaccination.isRequired
                                                string2: $var.value
                                          - =.builtIn.object.clear:
                                              dataIn:
                                                object: =..formData.selectStatusOne.Vaccination
                                                key: $var.key
                                          - =.builtIn.object.set:
                                              dataIn:
                                                object: =..formData.selectStatusOne.Vaccination
                                                key: $var.key
                                                value: $var.value
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: isRequiredGeactionTag

                            - type: label
                              dataKey: itemObject.value
                              style:
                                top: "0"
                                left: "0.07"

                                fontSize: .Nfont.h1
                                height: "0.06"
                                width: "0.1"
                                textAlign:
                                  y: center

                - type: view
                  style:
                    left: "0"
                    width: "0.9"
                    marginTop: "0"
                  children:
                    - type: label
                      text: "2) ALLERGIC REACTION TO FLU SHOT OR ANY OTHER TYPE OF IMMUNIZATION SHOT?"
                      style:
                        fontSize: .Nfont.h1

                        color: "0x0f0f0f"
                    - type: list
                      contentType: listObject
                      listObject: ..formDataTemp.VaccinationConsentTwo
                      iteratorVar: itemObject
                      viewTag: isRequiredShotTag
                      style:
                        # top: "0.01"
                        left: "0.045"
                        width: "0.35"
                        # height: "0.04"
                        axis: horizontal
                      children:
                        - type: listItem
                          itemObject:
                          style:
                            width: "0.175"
                            height: "0.06"
                            left: "0"
                            marginTop: "0"
                          children:
                            - type: image
                              style:
                                top: "0.02"
                                left: "0"
                                height: "0.025"
                              path:
                                emit:
                                  dataKey:
                                    var: itemObject
                                  actions:
                                    - if:
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: =..formData.selectStatusTwo.Vaccination.isRequired
                                              string2: $var.value
                                        - selectOnBlack.svg
                                        - selectOffBlack.svg
                              onClick:
                                - emit:
                                    dataKey:
                                      var: itemObject
                                    actions:
                                      - if:
                                          - =.builtIn.string.equal:
                                              dataIn:
                                                string1: =..formData.selectStatusTwo.Vaccination.isRequired
                                                string2: $var.value
                                          - =.builtIn.object.clear:
                                              dataIn:
                                                object: =..formData.selectStatusTwo.Vaccination
                                                key: $var.key
                                          - =.builtIn.object.set:
                                              dataIn:
                                                object: =..formData.selectStatusTwo.Vaccination
                                                key: $var.key
                                                value: $var.value
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: isRequiredShotTag

                            - type: label
                              dataKey: itemObject.value
                              style:
                                top: "0"
                                left: "0.07"

                                fontSize: .Nfont.h1
                                height: "0.06"
                                width: "0.1"
                                textAlign:
                                  y: center

                - type: view
                  style:
                    left: "0"
                    width: "0.9"
                    marginTop: "0"
                  children:
                    - type: label
                      text: "3) ALLERGIC REACTION TO ANY MEDICATION OR DRUG?"
                      style:
                        fontSize: .Nfont.h1

                        wordWrap: break-word
                        # width: "0.9"
                        color: "0x0f0f0f"
                    - type: list
                      contentType: listObject
                      listObject: ..formDataTemp.VaccinationConsentThree
                      iteratorVar: itemObject
                      viewTag: isRequiredMedicationTag
                      style:
                        # top: "0.01"
                        left: "0.045"
                        width: "0.35"
                        # height: "0.04"
                        axis: horizontal
                      children:
                        - type: listItem
                          itemObject:
                          style:
                            width: "0.175"
                            height: "0.06"
                            left: "0"
                            marginTop: "0"
                          children:
                            - type: image
                              style:
                                top: "0.02"
                                left: "0"
                                height: "0.025"
                              path:
                                emit:
                                  dataKey:
                                    var: itemObject
                                  actions:
                                    - if:
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: =..formData.selectStatusThree.Vaccination.isRequired
                                              string2: $var.value
                                        - selectOnBlack.svg
                                        - selectOffBlack.svg
                              onClick:
                                - emit:
                                    dataKey:
                                      var: itemObject
                                    actions:
                                      - if:
                                          - =.builtIn.string.equal:
                                              dataIn:
                                                string1: =..formData.selectStatusThree.Vaccination.isRequired
                                                string2: $var.value
                                          - =.builtIn.object.clear:
                                              dataIn:
                                                object: =..formData.selectStatusThree.Vaccination
                                                key: $var.key
                                          - =.builtIn.object.set:
                                              dataIn:
                                                object: =..formData.selectStatusThree.Vaccination
                                                key: $var.key
                                                value: $var.value
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: isRequiredMedicationTag

                            - type: label
                              dataKey: itemObject.value
                              style:
                                top: "0"
                                left: "0.07"

                                fontSize: .Nfont.h1
                                height: "0.06"
                                width: "0.1"
                                textAlign:
                                  y: center

                - type: view
                  style:
                    left: "0"
                    width: "0.9"
                    marginTop: "0"
                  children:
                    - type: label
                      text: "4) ARE YOU OR COULD YOU BE PREGNANT?"
                      style:
                        fontSize: .Nfont.h1

                        # wordWrap: break-word
                        # width: "0.9"
                        color: "0x0f0f0f"
                    - type: list
                      contentType: listObject
                      listObject: ..formDataTemp.VaccinationConsentFour
                      iteratorVar: itemObject
                      viewTag: isRequiredPregnantTag
                      style:
                        # top: "0.01"
                        left: "0.045"
                        width: "0.35"
                        # height: "0.04"
                        axis: horizontal
                      children:
                        - type: listItem
                          itemObject:
                          style:
                            width: "0.175"
                            height: "0.06"
                            left: "0"
                            marginTop: "0"
                          children:
                            - type: image
                              style:
                                top: "0.02"
                                left: "0"
                                height: "0.025"
                              path:
                                emit:
                                  dataKey:
                                    var: itemObject
                                  actions:
                                    - if:
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: =..formData.selectStatusFour.Vaccination.isRequired
                                              string2: $var.value
                                        - selectOnBlack.svg
                                        - selectOffBlack.svg
                              onClick:
                                - emit:
                                    dataKey:
                                      var: itemObject
                                    actions:
                                      - if:
                                          - =.builtIn.string.equal:
                                              dataIn:
                                                string1: =..formData.selectStatusFour.Vaccination.isRequired
                                                string2: $var.value
                                          - =.builtIn.object.clear:
                                              dataIn:
                                                object: =..formData.selectStatusFour.Vaccination
                                                key: $var.key
                                          - =.builtIn.object.set:
                                              dataIn:
                                                object: =..formData.selectStatusFour.Vaccination
                                                key: $var.key
                                                value: $var.value
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: isRequiredPregnantTag

                            - type: label
                              dataKey: itemObject.value
                              style:
                                top: "0"
                                left: "0.07"

                                fontSize: .Nfont.h1
                                height: "0.06"
                                width: "0.1"
                                textAlign:
                                  y: center

            - type: view
              style:
                width: "0.9"
                height: "auto"
                left: "0"
                marginTop: "0.02"
              children:
                - type: image
                  viewTag: claimsAdstatusSelectTag
                  style:
                    top: "0.003"
                    height: "0.025"
                  path:
                    emit:
                      actions:
                        - if:
                            - =.builtIn.string.equal:
                                dataIn:
                                  string1: =..formDataTemp.isClaimsAd
                                  string2: true
                            - selectOnBlack.svg
                            - selectOffBlack.svg
                  onClick:
                    - actionType: evalObject
                      object:
                        - if:
                            - =.builtIn.string.equal:
                                dataIn:
                                  string1: =..formDataTemp.isClaimsAd
                                  string2: true
                            - ..formDataTemp.isClaimsAd@: false
                            - ..formDataTemp.isClaimsAd@: true
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: claimsAdstatusSelectTag

                - type: label
                  text: "I certify that the above answers are true and
                    correct to the best of my knowledge. I voluntarily
                    request a flu vaccination from Golden West Medical
                    Center. I understand that there is a remote possibility
                    of adverse reaction or other complications of the flu
                    vaccination. I voluntarily agree to assume any risks
                    associated with the administration of the flu vaccine.
                    I hereby waive and release Golden West Medical Center
                    from any and all liabilities sustained by me while
                    participating in the flu vaccination program."
                  style:
                    width: "0.8"
                    height: "auto"

                    fontSize: .Nfont.h0
                    left: "0.07"

            - type: view
              style:
                left: "0"
                width: "0.9"
                marginTop: "0.02"

              children:
                - type: label
                  text: "Signature / Firma"
                  style:
                    height: "auto"
                    width: "0.4"
                    fontSize: .Nfont.h1
                    fontStyle: "bold"

                    display: "inline-block"
                # 清除签名
                - type: label
                  text: Clear
                  style:
                    top: "0.005"
                    left: "0.8"
                    # float: "right"

                    fontSize: .Nfont.h1
                    height: auto
                    width: "0.1"
                    color: "0xff0000"
                    zIndex: "1000"
                  onClick:
                    - actionType: removeSignature
                      dataObject: BLOB
                      dataKey: FluVaccinationConsentFormEnglishEditPage1.apiRequest.newSign.docReq.name.data
                      viewTag: signatureTag
                    - actionType: evalObject
                      object:
                        - ..formData.temporarySignature@: ""
                    # 显示签名区域隐藏
                    - actionType: builtIn
                      funcName: hide
                      viewTag: signatureShowTag
                    - actionType: builtIn
                      funcName: show
                      viewTag: signatureTag
                - type: view
                  style:
                    marginTop: "0.01"
                    width: "0.88"
                    height: "0.15"
                    #  backgroundColor: "pink"
                    border:
                      style: 4
                    borderColor: "0xababab"
                    borderWidth: "2"
                  children:
                    # 签名区域
                    - type: canvas
                      dataKey: FluVaccinationConsentFormEnglishEditPage1.apiRequest.newSign.docReq.name.data
                      viewTag: signatureTag
                      style:
                        .SignCanvasStyle:
                    - type: label
                      text: X
                      style:
                        top: "0.1"
                        .SignLabelStyle:
                        # 显示暂存的签名
                    - type: image
                      viewTag: signatureShowTag
                      path=func: .builtIn.utils.prepareDocToPath
                      # 传入签名文档的id
                      dataKey: FluVaccinationConsentFormEnglishEditPage1.apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.signatureId
                      style:
                        # 控制显示
                        display: ..formData.flag
                        left: "0"
                        width: "0.88"
                        top: "0"
                        height: "0.15"
                        overflow: scroll
                        zIndex: "110"
                - type: view
                  style:
                    width: "0.9"
                    left: "0"
                    marginTop: "0.01"
                    color: "0x0f0f0f"
                    fontSize: .Nfont.h15

                  children:
                    - type: label
                      text: "PT: "
                      style:
                        display: inline-block

                    - type: label
                      text: "Mellissa West"
                      dataKey: apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.providerInfo.providerFullName
                      style:
                        left: "0.01"
                        display: inline-block
                - type: view
                  style:
                    width: "0.9"
                    left: "0"
                    color: "0x0f0f0f"
                    fontSize: .Nfont.h15

                    marginTop: "0.01"
                  children:
                    - type: label
                      text: "Date: "
                      style:
                        display: inline-block
                    - type: label
                      dataKey: apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.signTime
                      style:
                        left: "0.01"
                        display: inline-block
            - type: view
              style:
                marginTop: "0.02"
                left: "0"
                width: "0.9"
                height: "0.01"
                backgroundColor: "0x707070"

            - type: view
              style:
                width: "0.9"
                left: "0"
                marginTop: "0.01"
              children:
                - type: label
                  text: "Office use only"
                  style:
                    height: "auto"
                    width: "0.9"
                    color: "0x0f0f0f"
                    fontSize: .Nfont.h1
                    # fontStyle: bold

                - type: view
                  style:
                    marginTop: "0.01"
                    height: "0.08"
                    width: "0.9"
                    # backgroundColor: "pink"
                  children:
                    - type: view
                      style:
                        top: "0"
                        left: "0"
                        width: "0.6"
                        # display: "inline-block"
                        height: "auto"
                      children:
                        - type: label
                          text: "LOT #"
                          dataKey:
                          style:
                            height: "auto"
                            width: "0.3"
                            color: "0x9e9e9e"
                            fontSize: .Nfont.h1
                            # fontStyle: bold

                        - type: view
                          style:
                            marginTop: "0.01"
                            width: "0.25"
                            height: "0.04"
                          children:
                            - .BaseTextField:
                              isEditable: false
                              placeholder: "Enter here"
                              style:
                                top: "0"
                                left: "0"
                                width: "0.25"
                                height: "0.03"
                                resize: "none"
                                fontSize: .Nfont.h1

                                color: "0x0f0f0f"
                                borderRadius: "3"
                    - type: view
                      style:
                        top: "0"
                        left: "0.3"
                        width: "0.3"
                        height: "auto"
                      children:
                        - type: label
                          text: "EXP"
                          dataKey:
                          style:
                            height: "auto"
                            width: "0.3"
                            color: "0x9e9e9e"
                            fontSize: .Nfont.h1

                        - type: view
                          style:
                            marginTop: "0.01"
                            width: "0.25"
                            height: "0.04"
                          children:
                            - .BaseTextField:
                              isEditable: false
                              placeholder: "Enter here"
                              style:
                                top: "0"
                                left: "0"
                                width: "0.25"
                                resize: "none"
                                height: "0.03"
                                fontSize: .Nfont.h1

                                color: "0x0f0f0f"
                                borderRadius: "3"
                    - type: view
                      style:
                        top: "0"
                        left: "0.6"
                        width: "0.3"
                        height: "auto"
                      children:
                        - type: label
                          text: "Nurse"
                          dataKey:
                          style:
                            height: "auto"
                            width: "0.3"
                            color: "0x9e9e9e"
                            fontSize: .Nfont.h1

                        - type: view
                          style:
                            marginTop: "0.01"
                            width: "0.25"
                            height: "0.04"
                          children:
                            - .BaseTextField:
                              isEditable: false
                              placeholder: "Enter here"
                              style:
                                top: "0"
                                left: "0"
                                width: "0.25"
                                height: "0.03"
                                resize: "none"
                                fontSize: .Nfont.h1

                                color: "0x0f0f0f"
                                borderRadius: "3"
                - type: view
                  style:
                    width: "0.9"
                    left: "0"
                    height: "0.2"

                  children:
                    - type: label
                      text: "Location of injection"
                      style:
                        color: "0x9e9e9e"
                        fontSize: .Nfont.h1

                    - type: view
                      viewTag: isRequiredTagFive
                      style:
                        left: "0"
                        width: "0.9"
                        height: "0.06"
                      children:
                        - type: view
                          style:
                            width: "0.3"
                            height: "0.06"
                            left: "0"
                            marginTop: "0"
                            display: inline-block
                          children:
                            - type: image
                              style:
                                top: "0.02"
                                left: "0"
                                opacity: "0.3"
                                height: "0.025"
                              path:
                                emit:
                                  actions:
                                    - if:
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: =..formData.selectStatusInjection.isRequired
                                              string2: true
                                        - selectOnBlack.svg
                                        - selectOffBlack.svg

                            - type: label
                              text: "Right Deltoid"
                              style:
                                top: "0.021"
                                left: "0.07"

                                fontSize: .Nfont.h1
                                width: "0.23"
                                color: "0x9e9e9e"

                        - type: view
                          style:
                            width: "0.3"
                            height: "0.06"
                            left: "0.02"
                            marginTop: "0"
                            display: inline-block
                          children:
                            - type: image
                              style:
                                top: "0.02"
                                opacity: "0.3"
                                left: "0"
                                height: "0.025"
                              path:
                                emit:
                                  actions:
                                    - if:
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: =..formData.selectStatusInjection.isRequired
                                              string2: false
                                        - selectOnBlack.svg
                                        - selectOffBlack.svg

                            - type: label
                              text: "left Deltoid"
                              style:
                                top: "0.021"
                                left: "0.07"

                                fontSize: .Nfont.h1
                                width: "0.3"
                                color: "0x9e9e9e"

    - .NextButtonView:
      children:
        - type: button
          style:
            top: "0.0275"
            left: "0.3"
            height: "0.045"
            width: "0.4"
            fontSize: .Nfont.h2
            color: "0xffffff"
            border:
              style: "3"
            borderColor: "0x2988e6"
            backgroundColor: "0x2988e6"
            borderRadius: "3"
            textAlign:
              x: center
              y: center
          text: Done
          onClick:
            - actionType: evalObject
              object:
                - =.builtIn.array.add:
                    dataIn:
                      object: =.Global.roomInfo.edge.name.finishDoc
                      value: "Flu Vaccination Consent form 2020-2021(English)"
            # 签名处理
            - actionType: saveSignature
              dataObject: BLOB
              dataKey: FluVaccinationConsentFormEnglishEditPage1.apiRequest.newSign.docReq.name.data
              isEmpty: FluVaccinationConsentFormEnglishEditPage1.formData.whetherSign
            - actionType: evalObject
              object:
                - if:
                    - =.FluVaccinationConsentFormEnglishEditPage1.formData.whetherSign
                    - actionType: evalObject
                      object:
                        - if:
                            - =..apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.whetherSign
                            - actionType: popUp
                              popUpView: BaseWarningView
                              wait: true
                            - continue
                    - continue
                - if:
                    - =..apiRequest.fluVaccinationConsentFormEnglish.docReq.id
                    - =..apiRequest.fluVaccinationConsentFormEnglish.docAPI.delete: ""
                    - continue
                - ..apiRequest.fluVaccinationConsentFormEnglish.docReq.id@: ""
                - ..apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.authority@: "Shared"
                - ..apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.fontcolor@: "0x2FB355"
                # 获取病况调查信息
                - ..apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.fluVaccinationInfo.VaccinationConsentOne@: =..formData.selectStatusOne.Vaccination
                - ..apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.fluVaccinationInfo.VaccinationConsentTwo@: =..formData.selectStatusTwo.Vaccination
                - ..apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.fluVaccinationInfo.VaccinationConsentThree@: =..formData.selectStatusThree.Vaccination
                - ..apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.fluVaccinationInfo.VaccinationConsentFour@: =..formData.selectStatusFour.Vaccination
                - ..apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.fluVaccinationInfo.certifyCheck@: =..formDataTemp.isClaimsAd
            # 保存签名
            - actionType: evalObject
              object:
                - =..apiRequest.newSign.docAPI.store: ""
            - actionType: evalObject
              object:
                - if:
                    - =..formData.temporarySignature
                    - actionType: evalObject
                      object:
                        - ..apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.signatureId@: =..formData.temporarySignature
                        - ..apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.whetherSign@: false
                        - ..formData.whetherSign@: false
                    - actionType: evalObject
                      object:
                        - ..apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.signatureId@: =..apiRequest.newSign.docResp.doc.id
                        - ..apiRequest.fluVaccinationConsentFormEnglish.docReq.name.data.whetherSign@: =..formData.whetherSign
            - actionType: evalObject
              object:
                - ..apiRequest.fluVaccinationConsentFormEnglish.docReq.reid@: =.Global.roomInfo.edge.id
                - =..apiRequest.fluVaccinationConsentFormEnglish.docAPI.store: ""
            - actionType: evalObject
              object:
                .Global._nonce@:
                  =.builtIn.math.random: ""
            - actionType: evalObject
              object:
                - =.builtIn.array.add:
                    dataIn:
                      object: =.Global.vaccine
                      value: Flu Vaccination Consent form 2020-2021(English)
                - =.builtIn.array.elementUnique:
                    dataIn:
                      arr: =.Global.vaccine
                    dataOut: FluVaccinationConsentFormEnglishEditPage1.formData.doc
                - .Global.vaccine@: =..formData.doc
                - =.builtIn.array.add:
                    dataIn:
                      object: =.Global.roomInfo.edge.name.finishDoc
                      value: Flu Vaccination Consent form 2020-2021(English)
                - =.builtIn.array.elementUnique:
                    dataIn:
                      arr: =.Global.roomInfo.edge.name.finishDoc
                    dataOut: Global.roomInfo.edge.name.finishDoc
            - actionType: builtIn
              funcName: goBack
              reload: true
    - .BaseWarningView:
      message: "You haven't signed the form"
      viewTag: BaseWarningView
