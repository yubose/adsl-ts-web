AppointmentInfo:
  title: "Appointment Info"
  viewPort: top
  init:
    - .SignInCheck
    - actionType: evalObject
      object:
        - =.builtIn.date.stampToDate:
              dataIn:
                timeStamp: =..dataObject.etime
              dataOut: AppointmentInfo.appointment.time
    - if:
      - =..inviteMeeting.edge.name.phoneNumber
      - actionType: evalObject
        object:
         - =.builtIn.string.concat:
              dataIn:
                - =..inviteMeeting.edge.name.phoneNumber
                - "-"
                - =..inviteMeeting.edge.name.firstName
                - " "
                - =..inviteMeeting.edge.name.lastName
              dataOut: AppointmentInfo.appointment.participant
      - continue

  dataObject: .Global.DocReference.document
  save:
    - =..inviteMeeting.edgeAPI.store: ""
  inviteMeeting:
    edge:
      .Edge: ""
      type: 1053
      # refid: .MeetingLobby.rootRoom.edge.id
      refid: .Global.scheduleId
      bvid: .Global.currentUser.vertex.id
      name:
        phoneNumber: .Global.contact.document.name.data.phoneNumber
        firstName: .Global.contact.document.name.data.firstName
        lastName: .Global.contact.document.name.data.lastName
        docId: .Global.scheduleId
      _nonce: =.Global._nonce   

    edgeAPI:
      .EdgeAPI: ""
      store:
        api: ce
        dataIn: inviteMeeting.edge
  appointment:
    time: 
    participant: ""
  components:
    - .BaseHeader:
    - .HeaderLeftButton:
    - type: view
      style: 
        left: "0"
        top: "0.1"
        width: "1"
        height: "0.7"
      children: 
        - type: view
          style: 
            left: "0"
            top: "0"
            width: "1"
            height: "0.6"
            # backgroundColor: "0xcdcdcd"
          children: 
            - type: label
              text: "Appointment for:"
              style: 
                left: "0.1"
                width: "0.8"
                top: "0.04"
                height: "0.04"
                fontStyle: "bold"
                fontSize: "16"
                border: 
                  style: "2"
                  color: "0x2988e6"
                  width: "4"
                textAlign: 
                  x: left
            - type: textField
              placeholder: "Sep.10, 2020 at 8:30am"
              dataKey: appointment.time
              style: 
                left: "0.05"
                width: "0.9"
                top: "0.1"
                height: "0.03"
                color: "0x000000ad"
                fontStyle: "bold"
                fontSize: "16"
                borderColor: "0x00000011"
                border: 
                  style: "3"
                borderWidth: "1"
                textAlign: 
                  x: center
            - type: label
              text: "Room Name"
              style: 
                left: "0.13"
                top: "0.14"
                width: "0.5"
                height: "0.03"
                fontSize: "16"
                fontWeight: "500"
                textAlign: 
                  x: left
            - type: textField
              dataKey: dataObject.name.roomName
              style: 
                left: "0.13"
                top: "0.17"
                width: "0.77"
                height: "0.03"
                fontSize: "14"
                fontWeight: "500"
                textAlign: 
                  x: left  
                border: 
                  style: "2"
                borderColor: "0x00000066"
                borderWidth: "1"                
            - type: view
              style: 
                left: "0.1"
                top: "0.22"
                width: "0.8"
                height: "0.3"
              children: 
                - type: image
                  path: accompany.svg
                  style: 
                    left: "0.05"
                    top: "0.01"
                    width: "0.1"
                - type: label
                  text: Invite Participant's
                  style: 
                    left: "0.2"
                    width: "0.65"
                    top: "0.0"
                    height: "0.035"
                    fontWeight: "500"
                    color: "0x000000cd"
                    fontSize: "16"
                    textAlign: 
                      x: left
                - type: textField
                  dataKey: appointment.participant
                  style: 
                    left: "0.2"
                    width: "0.6"
                    top: "0.03"
                    height: "0.03"
                    color: "0x000000cd"
                    fontSize: "15"
                    border:
                      style: "2"
                    textAlign: 
                      x: left
                    borderWidth: "1"
                    borderColor: "0x00000066"
                - type: label
                  text: "Add"
                  onClick: 
                    - goto: UploadFavorite
                  style: 
                    left: "0.72" 
                    width: "0.08"
                    top: "0"
                    color: "0x2988e6"
                    fontSize: '16'
                    textAlign: 
                      x: right
                - type: image
                  path: message.png
                  style: 
                    left: "0.05"
                    top: "0.08"
                    width: "0.1"
                - type: label
                  text: "Enter visit reason"
                  style: 
                    left: "0.2"
                    width: "0.65"
                    top: "0.07"
                    height: "0.035"
                    fontWeight: "500"
                    color: "0x000000cd"
                    fontSize: "16"
                    textAlign: 
                      x: left
                - type: textField
                  style: 
                    left: "0.2"
                    width: "0.6"
                    top: "0.1"
                    height: "0.03"
                    color: "0x000000cd"
                    fontSize: "15"
                    border:
                      style: "2"
                    textAlign: 
                      x: left
                    borderWidth: "1"
                    borderColor: "0x00000066"  
                - type: image
                  path: placeholder.png
                  style: 
                    left: "0.05"
                    top: "0.16"
                    width: "0.1"
                - type: label
                  text: "A&C Urgent Care"
                  style: 
                    left: "0.2"
                    width: "0.65"
                    top: "0.14"
                    height: "0.035"
                    fontWeight: "500"
                    color: "0x000000cd"
                    fontSize: "16"
                    textAlign: 
                      x: left
                    
                - type: textView
                  text: "1000 S Ahaheim Blvd Ste 200"
                  style: 
                    left: "0.2"
                    width: "0.6"
                    top: "0.165"
                    height: "0.035"
                    fontWeight: "400"
                    color: "0x000000cd"
                    fontSize: "16"
                    border:
                      style: '3'
                      width: '2'
                    textAlign: 
                      x: left      
                      y: top     
        - type: button
          text: Next
          onClick: 
            - actionType: popUp
              popUpView: confirmView
          style: 
            left: "0.15"
            width: "0.7"
            top: "0.55"
            height: "0.055"
            color: "0xffffff"
            fontStyle: "bold"
            backgroundColor: "0x2988e6ff"
            fontSize: "16"
            textAlign: 
              x: center  
            border: 
              style: "1"
            borderRadius: "2"          
        - type: popUp # view
          viewTag: confirmView
          style:
            left: "0"
            top: "0"
            width: "1"
            height: "1" 
            backgroundColor: "0x00000066" 
          children:
            - type: view
              style:
                left: "0.05"
                top: "0.15"
                width: "0.89333"
                height: "0.35"
                backgroundColor: "0xeeeeeeff"
                border:
                  style: "5"
                borderRadius: "15"
              children:
                - type: label
                  text: "Send Patient Invite Link"
                  style:
                    .LabelStyle:
                      left: "0"
                      top: "0.04"
                      width: "0.89333"
                      height: "0.04"
                      color: "0x00000088"
                      fontSize: "20"
                      fontStyle: bold
                      display: inline
                      textAlign:
                        x: center
                        y: center
                - type: label
                  text: "Send Patient invite link to"
                  style:
                    .LabelStyle:
                      left: "0"
                      top: "0.1"
                      width: "0.89333"
                      height: "0.04"
                      color: "0x00000088"
                      fontSize: "14"
                      display: inline
                      textAlign:
                        x: center
                        y: center 
                - type: label
                  # text: "John"
                  dataKey: inviteMeeting.edge.name.firstName
                  style:
                    .LabelStyle:
                      left: "0"
                      top: "0.15"
                      width: "0.89333"
                      height: "0.027247"
                      color: "0x00000088"
                      fontSize: "14"
                      display: inline
                      textAlign:
                        x: center
                        y: center 
                - type: label
                  #text: "+1 7148397253"
                  dataKey: inviteMeeting.edge.name.phoneNumber
                  style:
                    .LabelStyle:
                      left: "0"
                      top: "0.20"
                      width: "0.89333"
                      height: "0.027247"
                      color: "0x00000088"
                      fontSize: "14"
                      display: inline
                      textAlign:
                        x: center
                        y: center 
                - type: divider
                  style:
                    .DividerStyle:
                      left: "0"
                      top: "0.25436"
                      width: "0.89333"
                      height: "0.001"
                      backgroundColor: "0x00000088"
                - type: button
                  onClick: 
                    - actionType: popUpDismiss
                      popUpView: confirmView
                  text: Cancel
                  style:
                    .LabelStyle:
                      left: "0"
                      top: "0.275"
                      width: "0.42"
                      height: "0.06812"
                      color: "0x007affff"
                      fontSize: "17"
                      display: inline
                      textAlign:
                        x: center
                        y: center 
                      border:
                        style: "5"
                      borderRadius: "15"

                - type: button
                  onClick: 
                    - actionType: evalObject
                      object: ..save
                    - actionType: popUpDismiss
                      popUpView: confirmView
                    # - goto: InviteSuccess01
                    - goto: InviteSuccessfuk
                  text: Confirm
                  style:
                    .LabelStyle:
                      left: "0.45"
                      top: "0.275"
                      width: "0.42"
                      height: "0.06812"
                      color: "0x007affff"
                      fontSize: "17"
                      display: inline
                      textAlign:
                        x: center
                        y: center 
                      border:
                        style: "5"
                      borderRadius: "15"  