MobileContacts1:
  title: "Schedule an Appointment"
  init:
    - .SignInCheck
    - .Global.optionalForms@: []
    - .Global.formData.patientChart@: ""
    - actionType: evalObject
      object:
        .Global._nonce@:
          =.builtIn.math.random: ""
    - actionType: updateObject
      dataKey: Global.formData.cov19Test
      dataObject: .EmptyObj
    - actionType: updateObject
      dataKey: Global.formData.back_InsuranceCard
      dataObject: .EmptyObj
    - actionType: updateObject
      dataKey: Global.formData.front_IDCard
      dataObject: .EmptyObj
    - actionType: updateObject
      dataKey: Global.formData.front_InsuranceCard
      dataObject: .EmptyObj
    - actionType: updateObject
      dataKey: Global.formData.signature0
      dataObject: .EmptyObj
    - actionType: updateObject
      dataKey: Global.formData.signature1
      dataObject: .EmptyObj
    - actionType: updateObject
      dataKey: Global.formData.visitQuestionnaireDoc
      dataObject: .EmptyObj
    - actionType: updateObject
      dataKey: Global.formData.pifzerBioNTech
      dataObject: .EmptyObj
    - actionType: updateObject
      dataKey: Global.formData.moderna
      dataObject: .EmptyObj
    - actionType: updateObject
      dataKey: Global.formData.cov19TestNewPatForm
      dataObject: .EmptyObj
    - actionType: updateObject
      dataKey: Cov19TestDM.patientChart
      dataObject: ..patientChart
    - actionType: evalObject
      object:
        - =..getRooms.get: ""
    - .MobileContacts1.VisitReason.doc.id@: =..getRooms.response.vertex.0.id
    - ..schedule.edge.id@: =..getRooms.response.vertex.0.id
    - .MobileContacts1.roomId@: =..getRooms.response.vertex.0.id
    - actionType: evalObject
      object:
        - =.builtIn.array.getKeyByArray:
            dataIn:
              array: =..getRooms.response.vertex
              path: name.basicInfo.roomName
            dataOut: MobileContacts1.RoomsName
    - .Global.patientChartDoc@: ""
    - .Global.visitQuestionnaireDoc@: ""
    - .Global.generalInfoDoc@: ""
    - .Global.vaccine@: []
    - .Global.vaccineDoc@: []
    - actionType: evalObject
      object:
        - =.builtIn.date.getMonth:
            dataIn: ""
            dataOut: MobileContacts1.calendarDate.month
    - actionType: evalObject
      object:
        - =.builtIn.date.getYear:
            dataIn: ""
            dataOut: MobileContacts1.calendarDate.year
    - actionType: evalObject
      object:
        - =.builtIn.date.getDate:
            dataIn: ""
            dataOut: MobileContacts1.calendarDate.day
    - actionType: evalObject
      object:
        - =.builtIn.date.transformMonth:
            dataIn:
              month: =..calendarDate.month
            dataOut: MobileContacts1.calendarDate.monthName
    - actionType: evalObject
      object:
        - =.builtIn.string.concat:
            dataIn:
              - =..calendarDate.year
              - "-"
              - =..calendarDate.month
              - "-"
              - =..calendarDate.day
            dataOut: MobileContacts1.calendarDate.todayDate
    - actionType: evalObject
      object:
        - =.builtIn.date.getTimeStampOfDate:
            dataIn:
              date: =..calendarDate.todayDate
            dataOut: MobileContacts1.calendarDate.todayStamp
    - actionType: evalObject
      object:
        - =.builtIn.string.concat:
            dataIn:
              - "(stime<"
              - =..calendarDate.todayStamp.start
              - " AND "
              - "etime>"
              - =..calendarDate.todayStamp.start
              - " OR "
              - "stime>"
              - =..calendarDate.todayStamp.start
              - " AND "
              - "etime<"
              - =..calendarDate.todayStamp.end
              - " OR "
              - "stime<"
              - =..calendarDate.todayStamp.end
              - " AND "
              - "etime>"
              - =..calendarDate.todayStamp.end
              - ")"
              - " AND "
              - "subtype="
              - =..formData.currentSubtype
            dataOut: Global.scheduleScondition
    - actionType: evalObject
      object:
        - =..schedule.get: ""
    - actionType: evalObject
      object:
        - =.builtIn.date.ShowDateByNumber:
            dataIn:
              year: =..calendarDate.year
              month: =..calendarDate.month
              day: =..calendarDate.day
            dataOut: MobileContacts1.selectDate
    - actionType: evalObject
      object:
        - =.builtIn.date.miniWeeklyCalendarArray:
            dataIn:
              year: =..calendarDate.year
              month: =..calendarDate.month
              today: =..calendarDate.day
              markDay: =..calendarDate.day
              color: "0x000000"
              backgroundColor: "0x2988E6"
              todayColor: "0xffffff"
              todayBackgroundColor: "0xFFFFFF6f"
            dataOut: MobileContacts1.calendarDate.dayLable
    - ..VisitReason.docAPI.get

    - actionType: evalObject
      object:
        ..VisitReason.document@: =..VisitReason.response.doc.0

    - actionType: evalObject
      object:
        - =..schedule.get: ""
    - actionType: evalObject
      object:
        - =.builtIn.array.convertToList:
            dataIn:
              array: =..VisitReason.document.name.data.reasonForVisit
              key: reason
            dataOut: MobileContacts1.reasonForVisit
        - =.builtIn.date.splitTime:
            dataIn:
              object2: =..schedule.scheduleList.edge
              timeSlot: =..duration
              year: =..calendarDate.year
              month: =..calendarDate.month
              day: =..calendarDate.day
              isSplitCurrent: true
            dataOut: MobileContacts1.splitTime
    - if:
        - ..checkData.get
        - continue
        - =.builtIn.checkField:
            dataIn:
              contentType: messageHidden
              wait: 100
    - actionType: evalObject
      object:
        - ..reason@: =..reasonForVisit.0
        - .Global.E2Subtype@: 655362
    - =.builtIn.array.getByKey:
        dataIn:
          array: =..VisitReason.document.name.data.reasonForVisit
          key1: reason
          value: =..reason
          key2: duration
        dataOut: MobileContacts1.duration
    - =.builtIn.string.retainNumber:
        dataIn:
          value: =..duration
        dataOut: MobileContacts1.duration
    - =.builtIn.array.getByKey:
        dataIn:
          array: =..VisitReason.document.name.data.reasonForVisit
          key1: reason
          value: =..reason
          key2: document
        dataOut: MobileContacts1.docu
    - actionType: evalObject
      object:
        - =.builtIn.string.retainNumber:
            dataIn:
              value: =..duration
            dataOut: MobileContacts1.formData.duration
    - actionType: evalObject
      object:
        - =.builtIn.date.splitTime:
            dataIn:
              object2: =..schedule.scheduleList.edge
              timeSlot: =..duration
              year: =..calendarDate.year
              month: =..calendarDate.month
              day: =..calendarDate.day
              isSplitCurrent: true
            dataOut: MobileContacts1.splitTime
  patientChart:
    patientInfo:
      firstName: " "
      middleName: " "
      lastName: " "
      dateOfBirth: " "
      gender: " "
      address: " "
      city: " "
      state: " "
      zipCode: " "
      residence: " "
      mainContact: " "
      alternativePhone: " "
      email: " "
      employer: " "
      occupation: " "
      name: " "
      relation: " "
      phoneNumber: " "
    symptomProfile:
      experience: []
      remark: " "
      problem1: " "
      problem2: " "
      problem3: " "
      problem4: " "
    billingInfo:
      medicalInsurance: " "
      indentification:
        membersID: " "
        companyName: " "
        insuredName: " "
        relationship: " "
        securityNumber: " "
  # get all room
  RoomsName: []
  getRooms:
    vertex:
      ObjType: "4"
      id: .Global.ActiveLocation.bsig
      xfname: "E.bvid"
      sCondition: "E.type=1100 AND V.type=30"
    get:
      api: rv
      dataIn: getRooms.vertex
      dataOut: getRooms.response
  splitTime:
    morning: []
    afternoon: []
  reasonForVisit: []
  reason: ""
  duration: ""
  selectDate: ""
  visitType: "Covid19Test"
  docu:
  clock: ""
  VisitReason:
    response: ""
    document:
      type: .DocType.VisitReason
      name:
        data:
          reasonForVisit: []
      eid: .Global.rootNotebookID
    doc:
      type: .DocType.VisitReason
      id: ""
      xfname: ovid
      _nonce: =.Global._nonce
    docAPI:
      get:
        .DocAPI.get: ""
        api: rd
        dataIn: MobileContacts1.VisitReason.doc
        dataOut: MobileContacts1.VisitReason.response
  formData:
    doctorId: .Global.ActiveProvider.bsig
    rootnootbookInfo:
    rootnootbookId: ""
    duration: ""
    currentSubtype: "655361"
  checkData:
    check:
      edge: ""
    get:
      edgeAPI.get: ""
      api: re
      dataKey: checkData.check
      id:
        - .Global.ActiveProvider.bsig
        - .Global.ActiveProvider.bsig
      xfname: bvid,evid
      type: 40000
      sCondition: "subtype=655361"
      _nonce: =.Global._nonce
  save:
    - =.MobileContacts1.newAppointment.edgeAPI.store: ""

  schedule:
    response: ""
    scheduleList: ""
    edge:
      type: 40000
      id:
        ""
        # - .Global.ActiveProvider.bsig
        # - .Global.ActiveProvider.bsig
      sCondition: =.Global.scheduleScondition
      maxcount: "10000"
      xfname: evid
      obfname: "stime"
      # sCondition: "subtype=196609"
      asc: true
      _nonce: =.Global._nonce
    get:
      .EdgeAPI.get: ""
      api: re
      dataIn: schedule.edge
      dataOut: schedule.scheduleList
  todaySchedule: ""
  calendarDate:
    month: ""
    year: ""
    day: ""
    dayLable: []
    weekLabel:
      - key: SU
      - key: MO
      - key: TU
      - key: WE
      - key: TH
      - key: FR
      - key: SA
    todayDate: "YYYY-MM-DD"
    monthName: ""
    tempDate: ""
    calendarDate:
    Scondition: ""
    todayStamp: ""
  components:
    - .BaseHeader:
    - .HeaderLeftButton:
    - type: view
      style:
        top: "0.1"
        left: "0"
        height: "0.25"
        width: "1"
        # backgroundColor: "0xcdcdcd"
      children:
        - .MCLabel:
        - type: select
          dataKey: visitType
          options:
            # .SelectINformationDM.VisitType
            # - Telemedicine
            - Covid19Test
            - Office Visits
          onChange:
            - emit:
                actions:
                  - if:
                      - =.builtIn.string.equal:
                          dataIn:
                            string1: =..visitType
                            string2: "Covid19Test"
                      - .MobileContacts1.formData.currentSubtype@: "655361"
                      - continue
                  - if:
                      - =.builtIn.string.equal:
                          dataIn:
                            string1: =..visitType
                            string2: "Office Visits"
                      - .MobileContacts1.formData.currentSubtype@: "131073"
                      - continue
                  - if:
                      - =.builtIn.string.equal:
                          dataIn:
                            string1: =..visitType
                            string2: "Covid19Test"
                      - .Global.E2Subtype@: 655362
                      - continue
                  - if:
                      - =.builtIn.string.equal:
                          dataIn:
                            string1: =..visitType
                            string2: "Office Visits"
                      - .Global.E2Subtype@: 131074
                      - continue
                  - =.builtIn.string.concat:
                      dataIn:
                        - "(stime<"
                        - =..calendarDate.todayStamp.start
                        - " AND "
                        - "etime>"
                        - =..calendarDate.todayStamp.start
                        - " OR "
                        - "stime>"
                        - =..calendarDate.todayStamp.start
                        - " AND "
                        - "etime<"
                        - =..calendarDate.todayStamp.end
                        - " OR "
                        - "stime<"
                        - =..calendarDate.todayStamp.end
                        - " AND "
                        - "etime>"
                        - =..calendarDate.todayStamp.end
                        - ")"
                        - " AND "
                        - "subtype="
                        - =..formData.currentSubtype
                        # - " AND "
                        # - "name like '%"
                        # - =..visitType
                        # - "%'"
                      dataOut: Global.scheduleScondition
                  - .MobileContacts1.splitTime@: []
                  - .MobileContacts1.splitTime@: []
                  - ..schedule.scheduleList.edge@: []
                  - .Global._nonce@:
                      =.builtIn.math.random: ""
                  - =..schedule.get: ""
                  - =.builtIn.string.retainNumber:
                      dataIn:
                        value: =..duration
                      dataOut: MobileContacts1.formData.duration
                  - =.builtIn.date.splitTime:
                      dataIn:
                        object2: =..schedule.scheduleList.edge
                        timeSlot: =..duration
                        year: =..calendarDate.year
                        month: =..calendarDate.month
                        day: =..calendarDate.day
                        isSplitCurrent: true
                      dataOut: MobileContacts1.splitTime
            - actionType: builtIn
              funcName: redraw
              viewTag: splitTimeTag
          style:
            top: "0.05"
            left: "0.1"
            height: "0.05"
            width: "0.75"
            textIndent: "10px"
            backgroundColor: "0xffffff"
            fontSize: "14"
            borderWidth: "1"
            box-sizing: "border-box"
            border:
              style: "2"
              color: "0x00000058"
        - .MCLabel:
          text: Location
          style:
            top: "0.13"
            left: "0.11"
        - type: label
          dataKey: Global.ActiveLocation.name.data.basicInfo.medicalFacilityName
          style:
            top: "0.16"
            left: "0.11"
            width: "0.3"
            height: "0.046"
            lineHeight: "2"
            border:
              style: "3"
            textIndent: "10"
            textAlign:
              x: center
        - .MCLabel:
          text: Room
          style:
            top: "0.13"
            left: "0.55"
        - type: select
          dataKey: room
          #placeHolder: "Select from blow"
          options: ..RoomsName
          onChange:
            - emit:
                actions:
                  - =.builtIn.array.SelectKeyByArray:
                      dataIn:
                        array: =..getRooms.response.vertex
                        matchPath: name.basicInfo.roomName
                        selectpath: id
                        value: =..room
                      dataOut: MobileContacts1.roomId
          style:
            top: "0.16"
            left: "0.55"
            width: "0.3"
            height: "0.046"
            lineHeight: "2"
            border:
              style: "3"
            textIndent: "10"
            textAlign:
              x: center
        - .MCLabel:
          text: Reason for visit
          style:
            top: "0.26"
            left: "0.11"
        - type: select
          dataKey: reason
          #placeHolder: "Select from blow"
          options: ..reasonForVisit
          onChange:
            - emit:
                actions:
                  - =.builtIn.array.getByKey:
                      dataIn:
                        array: =..VisitReason.document.name.data.reasonForVisit
                        key1: reason
                        value: =..reason
                        key2: duration
                      dataOut: MobileContacts1.duration
                  - =.builtIn.string.retainNumber:
                      dataIn:
                        value: =..duration
                      dataOut: MobileContacts1.duration
                  - =.builtIn.array.getByKey:
                      dataIn:
                        array: =..VisitReason.document.name.data.reasonForVisit
                        key1: reason
                        value: =..reason
                        key2: document
                      dataOut: MobileContacts1.docu
                  - =.builtIn.string.retainNumber:
                      dataIn:
                        value: =..duration
                      dataOut: MobileContacts1.formData.duration
                  - .MobileContacts1.splitTime@: []
                  - .MobileContacts1.splitTime@: []
                  - =.builtIn.date.splitTime:
                      dataIn:
                        object2: =..schedule.scheduleList.edge
                        timeSlot: =..duration
                        year: =..calendarDate.year
                        month: =..calendarDate.month
                        day: =..calendarDate.day
                        isSplitCurrent: true
                      dataOut: MobileContacts1.splitTime
            - actionType: builtIn
              funcName: redraw
              viewTag: durationTag
            - actionType: builtIn
              funcName: redraw
              viewTag: splitTimeTag
          style:
            top: "0.29"
            left: "0.1"
            height: "0.05"
            width: "0.4"
            border:
              style: "3"
              color: "#e6e6e6"
              width: "1"
            textIndent: "10px"
        - .MCLabel:
          text: Duration
          style:
            top: "0.26"
            left: "0.55"
        - type: label
          dataKey: duration
          viewTag: durationTag
          style:
            top: "0.29"
            left: "0.55"
            width: "0.3"
            height: "0.046"
            lineHeight: "2"
            border:
              style: "3"
            textIndent: "10"
            textAlign:
              x: center
    - type: view
      viewTag: setSchedule
      style:
        width: "1"
        height: "0.2"
        backgroundColor: "0x2988E6"
        top: "0.48"
        left: "0"
      children:
        - type: view
          style:
            left: "0.2"
            width: "0.3"
            height: "0.08"
          children:
            - type: image
              path: whiteLeft.svg
              onClick:
                - actionType: evalObject
                  object:
                      - =.builtIn.date.loopMonth:
                          dataIn:
                            month: =..calendarDate.month
                            step: -1
                          dataOut: MobileContacts1.calendarDate.month
                      - =.builtIn.date.transformMonth:
                          dataIn:
                            month: =..calendarDate.month
                          dataOut: MobileContacts1.calendarDate.monthName
                      - =.builtIn.date.miniWeeklyCalendarArray:
                          dataIn:
                            year: =..calendarDate.year
                            month: =..calendarDate.month
                            today: 33
                            markDay: 1
                            color: "0x000000"
                            backgroundColor: "0x2988E6"
                            todayColor: "0xffffff"
                            todayBackgroundColor: "0xFFFFFF6f"
                          dataOut: MobileContacts1.calendarDate.dayLable
                - actionType: builtIn
                  funcName: redraw
                  viewTag: setSchedule
              style:
                top: "0.025"
                height: "0.02"
            - type: label
              # text: "1"
              dataKey: calendarDate.monthName
              style:
                width: "0.12"
                # height: "0.08"
                top: "0.02"
                left: "0.05"
                fontSize: "18"
                color: "0xffffff"
                textAlign:
                  x: center
            - type: image
              path: whiteRight.svg
              onClick:
                - actionType: evalObject
                  object:
                      - =.builtIn.date.loopMonth:
                          dataIn:
                            month: =..calendarDate.month
                            step: 1
                          dataOut: MobileContacts1.calendarDate.month
                      - =.builtIn.date.transformMonth:
                          dataIn:
                            month: =..calendarDate.month
                          dataOut: MobileContacts1.calendarDate.monthName
                      - =.builtIn.date.miniWeeklyCalendarArray:
                          dataIn:
                            year: =..calendarDate.year
                            month: =..calendarDate.month
                            today: 33
                            markDay: 1
                            color: "0x000000"
                            backgroundColor: "0x2988E6"
                            todayColor: "0xffffff"
                            todayBackgroundColor: "0xFFFFFF6f"
                          dataOut: MobileContacts1.calendarDate.dayLable
                - actionType: builtIn
                  funcName: redraw
                  viewTag: setSchedule
              style:
                left: "0.16"
                top: "0.025"
                height: "0.02"
        - type: view
          style:
            top: "0"
            left: "0.5"
            width: "0.4"
            height: "0.08"
          children:
            - type: image
              path: whiteLeft.svg
              onClick:
                - actionType: evalObject
                  object:
                      - =.builtIn.number.Subtraction:
                          dataIn:
                            num: =..calendarDate.year
                            step: 1
                          dataOut: MobileContacts1.calendarDate.year
                      - =.builtIn.date.miniWeeklyCalendarArray:
                          dataIn:
                            year: =..calendarDate.year
                            month: 1
                            today: 33
                            markDay: 1
                            color: "0x000000"
                            backgroundColor: "0x2988E6"
                            todayColor: "0xffffff"
                            todayBackgroundColor: "0xFFFFFF6f"
                          dataOut: MobileContacts1.calendarDate.dayLable
                - actionType: evalObject
                  object:
                    - .MobileContacts1.calendarDate.month@: 1
                - actionType: evalObject
                  object:
                    - =.builtIn.date.transformMonth:
                        dataIn:
                          month: =..calendarDate.month
                        dataOut: MobileContacts1.calendarDate.monthName
                - actionType: builtIn
                  funcName: redraw
                  viewTag: setSchedule
              style:
                top: "0.025"
                height: "0.02"
            - type: label
              # text: "2021"
              dataKey: calendarDate.year
              style:
                width: "0.12"
                # height: "0.08"
                top: "0.02"
                left: "0.06"
                fontSize: "18"
                color: "0xffffff"
                textAlign:
                  x: center
            - type: image
              path: whiteRight.svg
              onClick:
                - actionType: evalObject
                  object:
                      - =.builtIn.number.addition:
                          dataIn:
                            num: =..calendarDate.year
                            step: 1
                          dataOut: MobileContacts1.calendarDate.year
                      - =.builtIn.date.miniWeeklyCalendarArray:
                          dataIn:
                            year: =..calendarDate.year
                            month: 1
                            today: 33
                            markDay: 1
                            color: "0x000000"
                            backgroundColor: "0x2988E6"
                            todayColor: "0xffffff"
                            todayBackgroundColor: "0xFFFFFF6f"
                          dataOut: MobileContacts1.calendarDate.dayLable
                - actionType: evalObject
                  object:
                    .MobileContacts1.calendarDate.month@: 1
                - actionType: evalObject
                  object:
                    - =.builtIn.date.transformMonth:
                        dataIn:
                          month: =..calendarDate.month
                        dataOut: MobileContacts1.calendarDate.monthName
                - actionType: builtIn
                  funcName: redraw
                  viewTag: setSchedule
              style:
                left: "0.2"
                top: "0.025"
                height: "0.02"
        - type: view
          style:
            top: "0.06"
            # left: "0.5"
            width: "0.08"
            height: "0.08"
          children:
            - type: image
              path: whiteLeft.svg
              onClick:
                - actionType: evalObject
                  object:
                      - =.builtIn.date.LastWeek:
                          dataIn:
                            year: =..calendarDate.dayLable.0.year
                            month: =..calendarDate.dayLable.0.month
                            day: =..calendarDate.dayLable.0.day
                          dataOut: MobileContacts1.calendarDate.tempDate
                      - =.builtIn.date.miniWeeklyCalendarArray:
                          dataIn:
                            year: =..calendarDate.tempDate.year
                            month: =..calendarDate.tempDate.month
                            today: =..calendarDate.day
                            markDay: =..calendarDate.tempDate.day
                            color: "0x000000"
                            backgroundColor: "0x2988E6"
                            todayColor: "0xffffff"
                            todayBackgroundColor: "0xFFFFFF6f"
                          dataOut: MobileContacts1.calendarDate.dayLable
                - actionType: evalObject
                  object:
                    - ..calendarDate.year@: =..calendarDate.tempDate.year
                    - ..calendarDate.month@: =..calendarDate.tempDate.month
                    - =.builtIn.date.transformMonth:
                        dataIn:
                          month: =..calendarDate.month
                        dataOut: MobileContacts1.calendarDate.monthName
                - actionType: builtIn
                  funcName: redraw
                  viewTag: setSchedule
              style:
                top: "0.02"
                height: "0.04"
        - type: list
          #for Andorid Only
          # no Scrolling
          # with out listType: linearList will be recycler view, scrollable
          scrollable: false #会改变宽度
          contentType: listObject
          listObject: ..calendarDate.dayLable
          iteratorVar: itemObject
          viewTag: calendarColor
          style:
            axis: horizontal
            top: "0.05"
            left: "0.08"
            width: "0.84"
            display: "flex"
            height: "0.1"
            justifyContent: "space-between"
          children:
            - type: listItem
              itemObject: ""
              onClick:
                - emit:
                    dataKey:
                      var: itemObject
                    actions:
                      - =.builtIn.date.miniWeeklyCalendarArray:
                          dataIn:
                            year: $var.year
                            month: $var.month
                            today: $var.day
                            markDay: $var.day
                            color: "0x000000"
                            backgroundColor: "0x2988E6"
                            todayColor: "0xffffff"
                            todayBackgroundColor: "0xFFFFFF6f"
                          dataOut: MobileContacts1.calendarDate.dayLable
                      - .MobileContacts1.splitTime@: []
                      - .MobileContacts1.splitTime@: []
                      - ..calendarDate.year@: $var.year
                      - ..calendarDate.month@: $var.month
                      - ..calendarDate.day@: $var.day
                      - =.builtIn.date.ShowDateByNumber:
                          dataIn:
                            year: =..calendarDate.year
                            month: =..calendarDate.month
                            day: =..calendarDate.day
                          dataOut: MobileContacts1.selectDate
                      - =.builtIn.date.transformMonth:
                          dataIn:
                            month: =..calendarDate.month
                          dataOut: MobileContacts1.calendarDate.monthName
                      - =.builtIn.string.concat:
                          dataIn:
                            - =..calendarDate.year
                            - "-"
                            - =..calendarDate.month
                            - "-"
                            - $var.day
                          dataOut: MobileContacts1.calendarDate.todayDate
                      - =.builtIn.date.getTimeStampOfDate:
                          dataIn:
                            date: =..calendarDate.todayDate
                          dataOut: MobileContacts1.calendarDate.todayStamp
                      - =.builtIn.string.concat:
                          dataIn:
                            - "(stime<"
                            - =..calendarDate.todayStamp.start
                            - " AND "
                            - "etime>"
                            - =..calendarDate.todayStamp.start
                            - " OR "
                            - "stime>"
                            - =..calendarDate.todayStamp.start
                            - " AND "
                            - "etime<"
                            - =..calendarDate.todayStamp.end
                            - " OR "
                            - "stime<"
                            - =..calendarDate.todayStamp.end
                            - " AND "
                            - "etime>"
                            - =..calendarDate.todayStamp.end
                            - ")"
                            - " AND "
                            - "subtype="
                            - =..formData.currentSubtype
                            # - " AND "
                            # - "name like '%"
                            # - =..visitType
                            # - "%'"
                          dataOut: Global.scheduleScondition
                - actionType: evalObject
                  object:
                    - ..schedule.scheduleList.edge@: []
                - actionType: evalObject
                  object:
                    .Global._nonce@:
                      =.builtIn.math.random: ""
                - actionType: evalObject
                  object:
                    - =..schedule.get: ""
                - actionType: evalObject
                  object:
                    - =.builtIn.string.retainNumber:
                        dataIn:
                          value: =..duration
                        dataOut: MobileContacts1.formData.duration
                - actionType: evalObject
                  object:
                    - .MobileContacts1.splitTime@: []
                    - .MobileContacts1.splitTime@: []
                - actionType: evalObject
                  object:
                    - =.builtIn.date.splitTime:
                        dataIn:
                          object2: =..schedule.scheduleList.edge
                          timeSlot: =..duration
                          year: =..calendarDate.year
                          month: =..calendarDate.month
                          day: =..calendarDate.day
                          isSplitCurrent: true
                        dataOut: MobileContacts1.splitTime
                - actionType: builtIn
                  funcName: redraw
                  viewTag: splitTimeTag
                - actionType: builtIn
                  funcName: redraw
                  viewTag: setSchedule
              style:
                # top: "0"
                width: "0.12"
                height: "0.1"
                boxSizing: "border-box"
                border: "none"
                padding: "0px"
                display: "inline-block"
                flex: "auto"
              children:
                - type: label
                  dataKey: itemObject.weekDay
                  style:
                    width: "0.1"
                    color: "0xffffff"
                    textAlign:
                      x: center
                - type: label
                  dataKey: itemObject.day
                  style:
                    top: "0.04"
                    width: "0.075"
                    height: "0.035"
                    color: "0xffffff"
                    backgroundColor: itemObject.backgroundColor
                    borderRadius: "50"
                    textAlign:
                      x: center
                      y: center
        - type: view
          style:
            top: "0.06"
            left: "0.92"
            width: "0.08"
            height: "0.08"
          children:
            - type: image
              path: whiteRight.svg
              style:
                top: "0.02"
                height: "0.04"
              onClick:
                - actionType: evalObject
                  object:
                      - =.builtIn.date.NextWeek:
                          dataIn:
                            year: =..calendarDate.dayLable.6.year
                            month: =..calendarDate.dayLable.6.month
                            day: =..calendarDate.dayLable.6.day
                          dataOut: MobileContacts1.calendarDate.tempDate
                      - =.builtIn.date.miniWeeklyCalendarArray:
                          dataIn:
                            year: =..calendarDate.tempDate.year
                            month: =..calendarDate.tempDate.month
                            today: =..calendarDate.day
                            markDay: =..calendarDate.tempDate.day
                            color: "0x000000"
                            backgroundColor: "0x2988E6"
                            todayColor: "0xffffff"
                            todayBackgroundColor: "0xFFFFFF6f"
                          dataOut: MobileContacts1.calendarDate.dayLable
                - actionType: evalObject
                  object:
                    - ..calendarDate.year@: =..calendarDate.tempDate.year
                    - ..calendarDate.month@: =..calendarDate.tempDate.month
                    - =.builtIn.date.transformMonth:
                        dataIn:
                          month: =..calendarDate.month
                        dataOut: MobileContacts1.calendarDate.monthName
                - actionType: builtIn
                  funcName: redraw
                  viewTag: setSchedule
        - type: label
          dataKey: MobileContacts1.selectDate
          style:
            width: "1"
            top: "0.16"
            fontSize: "15"
            fontFamily: "Poppins"
            color: "0xffffff"
            fontWeight: "550"
            textAlign:
              x: center
    - type: view
      style:
        top: "0.69"
        left: "0"
        width: "1"
        height: "0.42"
      viewTag: splitTimeTag
      children:
        # - type: label
        #   text: "Morning"
        #   style:
        #     left: "0.4"
        #     top: "0.03"
        #     width: "0.4"
        #     height: "0.04"
        #     color: "#808080"
        #     fontSize: "20"
        - .BaseList:
          androidGrid: true
          listObject: ..splitTime
          style:
            top: "0.03"
            height: "0.4"
            width: "0.9"
            left: "0.05"
            overflow: scroll
          children:
            - type: listItem
              itemObject: ""
              style:
                left: "0"
                # top: "0"
                width: "0.3"
                height: "0.07"
                display: "inline-block"
              children:
                - type: label
                  dataKey: itemObject.showTime
                  onClick:
                    - emit:
                        dataKey:
                          var: itemObject
                        actions:
                          - ..clock@: $var
                          - .Global.clock@: $var
                    - actionType: evalObject
                      object:
                        - .Global.formData.appointment.visitType@: =..visitType
                        - .Global.formData.appointment.selectDate@: =..selectDate
                        - .Global.formData.appointment.duration@: =..duration
                        - .Global.formData.appointment.reason@: =..reason
                        - .Global.formData.appointment.docu@: =..docu
                        - .Cov19TestDM.patientChart.patientInfo@: ""
                        - .Cov19TestDM.patientChart.symptomProfile@: ""
                        - .Cov19TestDM.patientChart.billingInfo@: ""
                    - goto: CreateAppointment2
                  style:
                    width: "0.25"
                    height: "0.06"
                    # top: "0.01"
                    left: "0.03"
                    color: "#ffffff"
                    fontSize: "20"
                    fontWeight: "400"
                    zIndex: "100"
                    backgroundColor: "0x2988e6ff"
                    borderRadius: "6"
                    textAlign:
                      x: center
                      y: center
        # - type: label
        #   text: "Afternoon"
        #   style:
        #     left: "0.39"
        #     top: "0.25"
        #     width: "0.4"
        #     height: "0.04"
        #     color: "#808080"
        #     fontSize: "20"
        # - .BaseList:
        #   listObject: ..splitTime.afternoon
        #   style:
        #     top: "0.27"
        #     height: "0.15"
        #     width: "0.9"
        #     left: "0.05"
        #     overflow: scroll
        #   children:
        #     - type: listItem
        #       itemObject: ""
        #       style:
        #         left: "0"
        #         # top: "0"
        #         width: "0.3"
        #         height: "0.07"
        #         display: "inline-block"

        #       children:
        #         - type: label
        #           dataKey: itemObject.showTime
        #           onClick:
        #             - emit:
        #                 dataKey:
        #                   var: itemObject
        #                 actions:
        #                   - ..clock@: $var
        #                   - .Global.clock@: $var
        #             - goto: CreateAppointment1
        #           style:
        #             width: "0.25"
        #             height: "0.06"
        #             # paddingTop: "1px"
        #             top: "0.01"
        #             left: "0.03"
        #             color: "#ffffff"
        #             fontSize: "20"
        #             fontWeight: "400"
        #             zIndex: "100"
        #             backgroundColor: "0x2988e6ff"
        #             borderRadius: "6"
        #             textAlign:
        #               x: center
        #               y: center
    - type: view
      viewTag: tipsView
      style:
        width: "0.8"
        height: "0.3"
        top: "0.3"
        left: "0.1"
        backgroundColor: "0xffffff"
        borderRadius: "7"
        border:
          style: "3"
        borderColor: "#f4f8fa"
        borderWidth: "3"
        zIndex: "1000"
      children:
        - type: label
          text: Tips
          style:
            left: "0.01"
            top: "0.02"
            width: "0.78"
            height: "0.04"
            color: "0x2988e6"
            fontSize: "18"
            fontWeight: "350"
            display: inline
            # fontStyle: "bold"
            fontFamily: "sans-serif"
            textAlign:
              x: center
        - type: view
          style:
            left: "0"
            width: "0.8"
            top: "0.07"
            height: "0.15"
          children:
            - type: label
              text: "1. choose type of appointment"
              style:
                left: "0.07"
                top: "0"
                width: "0.7"
                height: "0.03"
                color: "0x2988e6"
                fontSize: "16"
                fontWeight: "350"
                fontFamily: "sans-serif"
                textAlign:
                  x: left
            - type: label
              text: "2.  choose reason for your visit"
              style:
                left: "0.07"
                top: "0.05"
                width: "0.7"
                height: "0.03"
                color: "0x2988e6"
                fontSize: "16"
                fontWeight: "350"
                fontFamily: "sans-serif"
                textAlign:
                  x: left
            - type: label
              text: "3. select a time"
              style:
                left: "0.07"
                top: "0.1"
                width: "0.7"
                height: "0.03"
                color: "0x2988e6"
                fontSize: "16"
                fontWeight: "350"
                # fontStyle: "bold"
                fontFamily: "sans-serif"
                textAlign:
                  x: left
        - type: button
          text: OK
          onClick:
            - actionType: popUpDismiss
              popUpView: tipsView
          style:
            left: "0.2"
            top: "0.22"
            width: "0.4"
            height: "0.04"
            color: "0xffffff"
            backgroundColor: "0x2988e6"
            fontSize: "18"
            fontWeight: "350"
            fontFamily: "sans-serif"
            border:
              style: "3"
            borderColor: "0x2988e6"
            borderWidth: "1"
            borderRadius: "5"
            textAlign:
              x: center
