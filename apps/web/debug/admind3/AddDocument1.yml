AddDocument1:
  init:
    - .SignInCheck
    - actionType: evalObject
      object:
        - ..tempInformation@: =.Global.formData.giveAddDocument1Userdata
    - actionType: evalObject
      object:
        - ..profile.docResponse.doc.0@: =..tempInformation
    - actionType: evalObject
      object:
        - .AddDocument1.dataObjectView@: =.Global.formData.medicalRecords
        - ..listData.docIn.id@: =.Global.formData.medicalRecords.id
        - actionType: evalObject
          object:
            - =.builtIn.utils.prepareDoc:
                dataIn:
                  doc: =..dataObjectView
                dataOut: AddDocument1.dataObjectView
    - =..inMeeting.edgeAPI.get: ""
    - .Global.formData.meetingRoom@: =..inMeeting.docResponse.edge.0
    - =..providerList.docAPI.get: ""
    - =.builtIn.array.add:
        dataIn:
          object: =..profile.docIn.ids
          value: =..inMeeting.docResponse.edge.0.bvid
    - =.builtIn.array.add:
        dataIn:
          object: =..profile.docIn.ids
          value: =..inMeeting.docResponse.edge.0.evid
    - ..currentLocation.ids@: =..profile.docIn.ids
    - =.builtIn.array.removeByValue:
        dataIn:
          object: =..currentLocation.ids
          value: =..profile.docResponse.doc.0.bsig
    - ..currentLocation.vertexIn.id@: =..currentLocation.ids.0
    - =..currentLocation.vertexAPI.get: ""
    - ..currentLocationDoc.docIn.id@: =..currentLocation.vertexResp.vertex.0.id
    - =..currentLocationDoc.docAPI.get: ""
    - .Global.formData.roomScheduleLocation@: =..currentLocationDoc.docResp.doc.0
    - =..afterAgree.edgeAPI.get: ""
    - ..afterAgree.storeEdge@: =..afterAgree.edgeResp.edge.0
    - ..dataObject@: =..inMeeting.docResponse.edge.0
    - =.builtIn.string.concat:
        dataIn:
          - =..profile.docResponse.doc.0.name.data.fullName
          - " ("
          - =..profile.docResponse.doc.0.name.data.gender
          - ")"
        dataOut: AddDocument1.info
    - =.builtIn.date.getDurationByMinute:
        dataIn:
          ctime: dataObject.ctime
          stime: dataObject.stime
        dataOut: AddDocument1.duration
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =..afterAgree.edgeResp.edge.0.name.providerName
              string2: ""
        - .AddDocument1.participants@: =..dataObject.name.patientName
        - =.builtIn.string.concat:
            dataIn:
              - =..afterAgree.edgeResp.edge.0.name.providerName
              - " 、 "
              - =..dataObject.name.patientName
            dataOut: AddDocument1.participants
    - =.builtIn.date.getDurationByMinute:
        dataIn:
          stime: =..dataObject.stime
          etime: =..dataObject.etime
        dataOut: AddDocument1.duration
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =..afterAgree.edgeResp.edge.0.evid
              string2: ""
        - ..isInvite@: false
        - ..isInvite@: true
    - ..medicalRecords.docAPI.get
    - =.builtIn.array.transformPage:
        dataIn:
          array: =..medicalRecords.docRes.doc
          type: "Review"
          dataKey: "name.title"
        dataOut: AddDocument1.formData.docList
    - actionType: evalObject
      object:
        - actionType: builtIn
          funcName: show
          viewTag: documentView
    - actionType: evalObject
      object:
        - actionType: builtIn
          funcName: hide
          viewTag: pageView
  currentLocation:
    vertexResp: ""
    ids: []
    vertexIn:
      ObjType: 4
      id: ""
      xfname: E.evid
      sCondition: "E.type=1100 AND V.type=21"
    vertexAPI:
      get:
        api: rv
        dataIn: currentLocation.vertexIn
        dataOut: AddDocument1.currentLocation.vertexResp
  currentLocationDoc:
    docResp: ""
    docIn:
      ObjType: 8
      id: ""
      xfname: E.bvid
      type: 271361
      sCondition: "E.type=10000"
    docAPI:
      get:
        api: rd
        dataIn: currentLocationDoc.docIn
        dataOut: AddDocument1.currentLocationDoc.docResp
  newAppointment:
    edgeRes: ""
    edgeReq:
      id: ""
    edgeAPI:
      get:
        api: re
        dataIn: AddDocument1.newAppointment.edgeReq
        dataOut: AddDocument1.newAppointment.edgeRes
  dataObject: ""
  duration: ""
  participants: ""
  info: ""
  pageJump: ""
  tempInformation: ""
  patientPage: "VisitQuestionnaire"
  inMeeting:
    # 同意预约后，正在开会的40000那条边（subtype为6或者100）
    docResponse:
    edge:
      id: =.Global.formData.patientHistoryInfo.id
      xfname: "id"
      obfname: "ctime"
      _nonce: .Global._nonce
      maxcount: "100"
      type: 40000
    edgeAPI:
      get:
        api: re
        dataIn: inMeeting.edge
        dataOut: AddDocument1.inMeeting.docResponse
  afterAgree:
    #(E5那条边，用于拿到provider的name)
    edgeResp:
    edge:
      id: =.Global.formData.patientHistoryInfo.id
      xfname: refid
      obfname: "ctime"
      _nonce: =.Global._nonce
      maxcount: "1"
      type: 40000
      sCondition: subtype in (10)
    storeEdge:
    response:
    edgeAPI:
      get:
        api: re
        dataIn: afterAgree.edge
        dataOut: AddDocument1.afterAgree.edgeResp
      store:
        api: ce
        dataIn: afterAgree.storeEdge
        dataOut: AddDocument1.afterAgree.response
  medicalRecords:
    showDoc: ""
    storeRes: ""
    docRes: ""
    docReq:
      id: .Global.formData.patientHistoryInfo.id
      xfname: eid
      sCondition: "type in
        (1025,1537,1793,2305,2049,84480,87040,92161,94721,107521,110081,112641,\
        115201,117761,120321,138241,143361,145921)"
      maxcount: "500"
      obfname: "mtime"
      _nonce: =.Global._nonce
    storeReq:
      eid: .Global.formData.patientHistoryInfo.id
      type: .DocType.UploadFile
      name:
        title: ""
        type: ..medicalRecords.docAPI.store.subtype.mediaType
        data: binFile
        user: .Global.currentFacility.name.basicInfo.medicalFacilityName
    docAPI:
      get:
        api: rd
        dataIn: AddDocument1.medicalRecords.docReq
        dataOut: AddDocument1.medicalRecords.docRes
      store:
        api: cd
        dataIn: AddDocument1.medicalRecords.storeReq
        subtype:
          mediaType: ""
        dataOut: AddDocument1.medicalRecords.storeRes
  flagType: 4
  profile:
    docResponse: ""
    docIn:
      ids: []
      xfname: bvid
      type: .DocType.PatientProfile #  type: "257"
      obfname: "mtime"
      ObjType: 12
      sCondition: "E.type=10000"
      maxcount: "1"
      _nonce: =.Global._nonce
    docAPI:
      get:
        .DocAPI.get: ""
        api: rd
        dataIn: profile.docIn
        dataOut: AddDocument1.profile.docResponse
  patientName: ""
  # pagePath: VisitQuestionnaire
  Infor:
    - img: remoteHealth0.svg
      title: Vital Signs
      bgc: "#f4f8fa"
      pageName: VitalSigns
    - img: visitquestionaire.jpg
      title: Visit Questionnaire
      bgc: "#ffffff"
      pageName: VisitQuestionnaire
    - img: patientChart.svg
      title: Patient Chart
      bgc: "#ffffff"
      pageName: PatientChart
    - img: medicalRecords.svg
      title: Medical Documents
      bgc: "#ffffff"
      pageName: MedicalRecords
  # the following is covid-19 test
  formDataTemp:
    documentList:
      - title: COVID-19 Results & Flu A&B Results
        pageName: Cov19ResultsAndFluResultsEdit
      - title: Parental Consent to Treat Minor (Child)
  providerList:
    list: ""
    edge:
      ObjType: 12
      type: .DocType.DoctorProfile
      id: .Global.currentFacility.id
      xfname: E.bvid|E.evid
      sCondition: E.type=10002 AND E.tage=1 AND E.subtype&0xf0000=0x30000
      maxcount: "10000"
      _nonce: =.Global._nonce
    docAPI:
      get:
        api: rd
        dataOut: providerList.list
        dataIn: providerList.edge

  dataObjectView: ""
  listData:
    docIn:
      id: ""
    docAPI:
      delete:
        api: dx
        dataIn: AddDocument1.listData.docIn
  components:
    - type: view
      style:
        width: '1'
        height: '1'
        margin: auto
      children:
        - .SideMenuBar:
          children:
            - .aitLogo:
            - .MenuBar:
        - .TopBar:
        - .BodyView:
          children:
            - type: view
              style:
                left: "0.05"
                width: "0.73"
                height: "0.2"
                top: "0.05"
                border:
                  style: "5"
                borderRadius: "5"
                boxShadow: "#dededf 0px 0px 10px"
                backgroundColor: "0xffffff"
              children:
                - type: label
                  text: Patient Information
                  style:
                    left: '0.015'
                    top: "0.01"
                    width: "0.12"
                    height: "0.035"
                    fontSize: .Nfont.nf5
                    color: "#517086"
                - type: image
                  path=func: .builtIn.utils.prepareDocToPath
                  dataKey: profile.docResponse.doc.0.name.data.avatar
                  path: ava.png
                  style:
                    left: "0.02"
                    width: "0.075"
                    top: "0.05"
                    height: "0.12"
                - type: view
                  style:
                    left: "0.13"
                    width: "0.3"
                    height: "0.15"
                    top: "0.025"
                  children:
                    - .PatientSummaryTitle:
                      text: Patient Name
                    - .PatientHistoryText:
                      viewTag: providerInfo1Tag
                      dataKey: profile.docResponse.doc.0.name.data.fullName
                      style:
                        top: "0.0375"
                    - .PatientHistoryText:
                      dataKey: profile.docResponse.doc.0.name.data.phone
                      style:
                        top: "0.075"
                    - .PatientHistoryText:
                      dataKey: profile.docResponse.doc.0.name.data.email
                      style:
                        top: "0.11"
                    - .PatientHistoryText:
                      text: Emergency Contact
                      style:
                        left: "0.25"
                        color: "0x586f84"
                    - .PatientHistoryText:
                      dataKey: profile.docResponse.doc.0.name.data.name
                      style:
                        top: "0.0375"
                        left: "0.25"
                    - .PatientHistoryText:
                      dataKey: profile.docResponse.doc.0.name.data.relation
                      style:
                        left: "0.25"
                        top: "0.075"
                    - .PatientHistoryText:
                      dataKey: profile.docResponse.doc.0.name.data.phone2
                      style:
                        left: "0.25"
                        top: "0.11"
                - type: button
                  text: Done
                  onClick:
                    - actionType: builtIn
                      funcName: goBack
                      reload: true
                    - actionType: evalObject
                      object:
                        - .Global.formData.patientHistoryInfo@: "1"
                    # - actionType: updateObject
                    #   dataKey: Global.formData.patientHistoryInfo
                    #   dataObject: []

                  style:
                    left: "0.62"
                    top: "0.05"
                    width: "0.09"
                    height: "0.04"
                    backgroundColor: "0x005795"
                    color: "0xffffff"
                    fontSize: .Nfont.nf3
                    border:
                      style: '5'
                    borderRadius: "5"
            - type: view
              style:
                left: "0.05"
                width: "0.73"
                height: "0.6"
                top: "0.28"
                border:
                  style: "5"
                borderRadius: "5"
                boxShadow: "#dededf 0px 0px 10px"
                backgroundColor: "0xffffff"
              children:
                - type: view
                  style:
                    left: "0"
                    height: "0.6"
                    width: "0.21"
                    top: "0"
                    boxShadow: "#dededf 0px 0px 10px"
                  children:
                    - type: view
                      style:
                        left: "0"
                        width: "0.21"
                        height: "0.06"
                        top: "0"
                        border:
                          style: "5"
                        borderRadius: "5"
                        # boxShadow: "#dededf 0px 0px 10px"
                        backgroundColor: "0xffffff"
                      children:
                        - type: label
                          text: Medical Records
                          style:
                            left: '0.015'
                            top: "0.02"
                            width: "0.12"
                            height: "0.035"
                            fontSize: .Nfont.nf4
                            color: "#517086"
                        - type: button
                          text: Add Form
                          onClick:
                            # - actionType: evalObject
                            #   object:
                            - actionType: builtIn
                              funcName: show
                              viewTag: addFormView
                            - actionType: builtIn
                              funcName: hide
                              viewTag: documentView
                            - actionType: builtIn
                              funcName: hide
                              viewTag: photoView
                            - actionType: builtIn
                              funcName: hide
                              viewTag: pageView
                          style:
                            left: "0.1"
                            top: "0.02"
                            width: "0.05"
                            height: "0.03"
                            fontSize: .Nfont.nf2
                            color: "#005795"
                            borderRadius: "3"
                            border:
                              style: "3"
                            borderWidth: "2"
                            textAlign:
                              x: center
                            backgroundColor: "#ffffff"
                            borderColor: "#005795"
                        - type: button
                          text: UpLoad
                          onClick:
                            # - actionType: evalObject
                            #   object:
                            - actionType: builtIn
                              funcName: show
                              viewTag: documentView
                            - actionType: builtIn
                              funcName: hide
                              viewTag: addFormView
                            - actionType: builtIn
                              funcName: hide
                              viewTag: photoView
                            - actionType: builtIn
                              funcName: hide
                              viewTag: pageView
                          style:
                            left: "0.16"
                            top: "0.02"
                            width: "0.04"
                            height: "0.03"
                            fontSize: .Nfont.nf2
                            color: "#005795"
                            borderRadius: "3"
                            border:
                              style: "3"
                            borderWidth: "2"
                            textAlign:
                              x: center
                            backgroundColor: "#ffffff"
                            borderColor: "#005795"
                    - type: scrollView
                      style:
                        left: "0"
                        width: "0.21"
                        height: "0.52"
                        top: "0.07"
                        border:
                          style: "5"
                        borderRadius: "5"
                        # boxShadow: "#dededf 0px 0px 10px"
                        backgroundColor: "0xffffff"
                      children:
                        - type: list
                          viewTag: medicalRecordsTag
                          contentType: listObject
                          listObject: ..medicalRecords.docRes.doc
                          iteratorVar: itemObject
                          style:
                            top: "0"
                            width: '0.21'
                            margin: '0'
                            height: auto
                          children:
                            - type: listItem
                              onClick:
                                - actionType: updateObject
                                  dataKey: Global.formData.medicalRecords
                                  dataObject: itemObject
                                - emit:
                                    dataKey:
                                      var: itemObject
                                    actions:
                                      - if:
                                          - true
                                          - .Global.formData.patientPage@: $var.pageName
                                          - .Global.formData.patientPage@: $var.pageName
                                - actionType: evalObject
                                  object:
                                    - .Global.DocReference.document.id@: =.Global.formData.medicalRecords.id
                                    - ..dataObjectView@: =.Global.formData.medicalRecords
                                    - ..listData.docIn.id@: =..dataObjectView.id

                                    - if:
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: =.Global.formData.medicalRecords.type
                                              string2: 1537
                                        - .Global.formData.patientPage@: "BlankNoteEdit"
                                        - continue
                                    - if:
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: =.Global.formData.medicalRecords.type
                                              string2: 1793
                                        - .Global.formData.patientPage@: "EvaluationNoteEdit"
                                        - continue
                                    - if:
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: =.Global.formData.medicalRecords.type
                                              string2: 2049
                                        - .Global.formData.patientPage@: "Prescription2"
                                        - continue

                                    - if:
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: =.Global.formData.medicalRecords.type
                                              string2: 143361
                                        - .Global.formData.patientPage@: "FluVaccinationConsentFormEnglish"
                                        - continue
                                    - if:
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: =.Global.formData.medicalRecords.type
                                              string2: 145921
                                        - .Global.formData.patientPage@: "FluVaccinationConsentFormSpanish"
                                        - continue
                                    - if:
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: =.Global.formData.medicalRecords.type
                                              string2: 2305
                                        - .Global.formData.patientPage@: "AbsentNoteEdit"
                                        - continue

                                    - if:
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: =.Global.formData.medicalRecords.type
                                              string2: 1025
                                        - actionType: builtIn
                                          funcName: show
                                          viewTag: photoView
                                        - actionType: builtIn
                                          funcName: show
                                          viewTag: pageView

                                    - if:
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: =.Global.formData.medicalRecords.type
                                              string2: 138241
                                        - goto: "Cov19ResultsAndFluResultsReview"
                                        - continue

                                - actionType: evalObject
                                  object:
                                    - ..pageJump@: =.Global.formData.patientPage
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: photoView
                                - actionType: builtIn
                                  funcName: hide
                                  viewTag: documentView
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: pageView
                              itemObject:
                              style:
                                width: '20vw'
                                height: '0.1'
                                left: '0'
                                marginTop: '0'
                                border:
                                  style: "2"
                                borderWidth: "1"
                                borderColor: "0x00000033"
                              children:
                                - type: label
                                  dataKey: itemObject.name.title
                                  style:
                                    left: "2.5vw"
                                    top: "0.02"
                                    width: "16vw"
                                    height: "0.04"
                                    fontSize: .Nfont.nf4 #16
                                    textAlign:
                                      y: center
                                - type: label
                                  text=func: .builtIn.string.formatUnixtime_en
                                  dataKey: itemObject.ctime
                                  style:
                                    left: "2.5vw"
                                    top: "0.05"
                                    width: "12vw"
                                    height: "0.04"
                                    fontSize: .Nfont.nf1
                                    color: "0x828282"
                                    textAlign:
                                      y: center
                                    fontFamily: PMingLiU
                # photoView
                - type: view
                  viewTag: photoView
                  style:
                    left: "0.211"
                    width: "0.519"
                    boxSizing: "border-box"
                    height: '0.6'
                    top: '0'
                    margin: auto
                    isHidden: true
                    backgroundColor: '0xffffff'
                    zIndex: '15'
                  children:
                    - type: image
                      path=func: .builtIn.utils.prepareDocToPath
                      dataKey: dataObjectView.id
                      style:
                        left: "15vw"
                        width: "0.16"
                        top: "0.04"
                    - type: button
                      text: Delete
                      style:
                        border:
                          style: '1'
                        width: '0.06'
                        height: '0.04'
                        top: '0.52'
                        left: '0.43'
                        borderRadius: '3'
                        color: '0xffffff'
                        fontSize: .Nfont.nf4
                        backgroundColor: '0xd7362c'
                        textAlign:
                          x: center
                          y: center
                      onClick:
                        - actionType: evalObject
                          object:
                            .Global._nonce@:
                              =.builtIn.math.random: ""
                        - actionType: evalObject
                          object:
                            - .Global.jwt.edge.bvid@: =..dataObjectView.bsig
                            - =.Global.jwt.edgeAPI.store: ""
                            - =..listData.docAPI.delete: ""
                        - actionType: evalObject
                          object:
                            - ..medicalRecords.docRes.doc@: []
                            - =..medicalRecords.docAPI.get: ""
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: medicalRecordsTag
                        - actionType: builtIn
                          funcName: hide
                          viewTag: photoView
                - type: view
                  viewTag: addFormView
                  style:
                    top: "0"
                    left: "0.211"
                    width: "0.519"
                    boxSizing: "border-box"
                    backgroundColor: "0xffffff"
                    height: "0.6"
                    isHidden: true
                    zIndex: "10"
                  children:
                    - type: view
                      style:
                        top: "0"
                        width: "0.4"
                        left: "0.055"
                        height: "0.6"
                      children:
                        - type: view
                          style:
                            marginTop: "0.03"
                            width: "0.4"
                            left: "0.02"
                            display: flex
                            justifyContent: space-between
                          children:
                            - type: label
                              text: Add a document
                              dataKey:
                              style:
                                fontSize: "2.4vh"
                                fontFamily: Poppins
                                fontWeight: "600"
                            - type: image
                              path: close.svg
                              onClick:
                                - actionType: builtIn
                                  funcName: hide
                                  viewTag: addFormView
                              style:
                                width: "0.015"
                        - type: label
                          text: Select a document to continue
                          dataKey:
                          style:
                            marginTop: "0.01"
                            width: "0.2"
                            left: "0.02"
                            fontSize: .Nfont.nf2
                            fontFamily: Poppins
                            color: "0x696969"
                            fontWeight: "500"
                        - type: list
                          contentType: listObject
                          listObject: ..formDataTemp.documentList
                          iteratorVar: itemObject
                          style:
                            width: '0.4'
                            margin: '0'
                            marginTop: "0.02"
                            height: auto
                            borderTop: "2px solid #e8e8e8"
                          children:
                            - type: listItem
                              itemObject:
                              onClick:
                                - emit:
                                    dataKey:
                                      var: itemObject
                                    actions:
                                      - if:
                                          - true
                                          - goto: $var.pageName
                                          - goto: $var.pageName
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: pageView
                                - actionType: builtIn
                                  funcName: hide
                                  viewTag: addFormView
                                - actionType: builtIn
                                  funcName: show
                                  viewTag: pageView
                              style:
                                width: '0.4'
                                height: '0.05'
                                left: '0'
                                marginTop: ''
                                border:
                                  style: "2"
                                borderWidth: "2"
                                borderColor: "0xe8e8e8"
                              children:
                                - type: label
                                  text:
                                  dataKey: itemObject.title
                                  style:
                                    width: "0.4"
                                    height: "0.05"
                                    fontSize: .Nfont.nf4
                                    color: "0x4b4b4b"
                                    textAlign:
                                      x: center
                                      y: center
                - type: view
                  viewTag: documentView
                  style:
                    top: "0"
                    left: "0.211"
                    width: "0.519"
                    boxSizing: "border-box"
                    backgroundColor: "0xffffff"
                    height: "0.6"
                    zIndex: "10"
                  children:
                    - type: view
                      style:
                        width: "27.6vw"
                        height: "0.6"
                        margin: auto
                      children:
                        - type: label
                          text: "Add new document"
                          style:
                            fontSize: .Nfont.nf5
                            fontWeight: "500"
                            top: "0.02"
                            left: "0.08"
                        - type: label
                          text: "Fill out required fields*"
                          style:
                            fontSize: "14"
                            fontWeight: "400"
                            top: "0.08"
                            left: "0.1"
                            width: "0.35"
                            color: "0xD53C42"
                            # textAlign:
                            #   x: center
                        - type: label
                          textBoard:
                            - text: "Create Document Name"
                              color: "0x517086"
                            - text: "*"
                              color: "0xD53C42"
                          style:
                            fontSize: "14"
                            fontWeight: "400"
                            top: "0.13"
                            left: "0.03"
                            width: "0.35"
                        - type: textField
                          placeholder: "Enter here"
                          dataKey: medicalRecords.storeReq.name.title
                          style:
                            top: "0.16"
                            left: "0.03"
                            width: "0.2"
                            height: "0.03"
                        - type: label
                          textBoard:
                            - text: "This file type is not supported"
                              fontWeight: "600"
                            - br:
                            - br:
                            - text: "Only the following file types are supported: "
                            - br:
                            - text: ".jpeg, .png, .pdf, .xlsx, .xls, .pptx, .ppt, .docx, .doc, .numbers"
                            - br:
                            - br:
                            - br:
                            - text: "File size must be no larger than BLANK"
                          style:
                            left: "0"
                            fontSize: "14"
                            fontWeight: "350"
                            top: "0.25"
                            width: "0.3"
                            color: "0x707070"
                            textAlign:
                              x: center
                        - view:
                          children:
                            - type: image
                              viewTag: imageTag
                              path: uploaddocument.svg
                                # emit:
                                #   actions:
                                #     - if:
                                #       - ..medicalRecord.showDoc.doc
                                #       - =..medicalRecord.url
                                #       - uploaddocument.svg                 
                              onClick:
                                - actionType: updateObject
                                  dataKey: AddDocument1.medicalRecords.storeReq.name.data
                                  dataObject: BLOB
                                - actionType: popUp
                                  popUpView: uploadSuccessfullyTag
                              style:
                                height: "0.1"
                                left: "0.07"
                          style:
                            top: "0.4"
                            width: "0.1"
                            height: "0.05"
                            textAlign: center
                        - type: button
                          text: Submit
                          onClick:
                            - actionType: evalObject
                              object:
                                - if:
                                    - =..medicalRecords.storeReq.name.title
                                    - continue
                                    - actionType: popUp
                                      popUpView: checkName
                                      wait: true
                                - ..newAppointment.edgeReq.id@: =.Global.formData.patientHistoryInfo.id
                                - =..newAppointment.edgeAPI.get: ""
                            - actionType: evalObject
                              object:
                                - .Global.jwt.edge.bvid@: =..newAppointment.edgeRes.edge.0.bvid
                                - =.Global.jwt.edgeAPI.store: ""
                            - actionType: evalObject
                              object:
                                - =.AddDocument1.medicalRecords.docAPI.store: ""
                            - actionType: evalObject
                              object:
                                .Global._nonce@:
                                  =.builtIn.math.random: ""
                            - actionType: evalObject
                              object:
                                - ..medicalRecords.storeReq@: ""
                                - =..medicalRecords.docAPI.get: ""
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: medicalRecordsTag
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: documentView
                            - actionType: evalObject
                              object:
                                - .Global.jwt.edge.bvid@: =.Global.currentUser.vertex.id
                                - =.Global.jwt.edgeAPI.store: ""
                          style:
                            left: "0.12"
                            top: "0.53"
                            width: "0.05"
                            height: "0.03"
                            fontSize: .Nfont.nf2
                            color: "#005795"
                            borderRadius: "3"
                            border:
                              style: "3"
                            borderWidth: "2"
                            textAlign:
                              x: center
                            backgroundColor: "#ffffff"
                            borderColor: "#005795"

                - type: view
                  viewTag: pageView
                  style:
                    left: "0.211"
                    width: "0.519"
                    boxSizing: "border-box"
                    top: "0"
                    height: "0.6"
                    border:
                      style: "5"
                    borderRadius: "5"
                    isHidden: true
                    zIndex: "10"
                    backgroundColor: "0xffffff"
                  children:
                    - type: page
                      path:
                        # Cov19ResultsAndFluResultsEdit
                        if:
                          - true
                          - ..pageJump
                          - ..pageJump
                      style:
                        left: "0"
                        width: "0.519"
                        height: "0.59"
                        top: "0"
                        border:
                          style: "1"
        - .BaseCheckView: ""
          message: "Document name is required"
          viewTag: checkName
        - .BaseCheckView: ""
          message: "Upload Successfully"
          viewTag: uploadSuccessfullyTag
