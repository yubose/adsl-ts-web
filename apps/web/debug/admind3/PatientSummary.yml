PatientSummary:
  title: "Visit Summary"
  init:
    - .SignInCheck
    #生成年份
    - =.builtIn.date.generateYear:
        dataIn:
          last: 40
          next: 10
        dataOut: BaseDate.year
    - actionType: evalObject
      object: .BaseDate.getDate
    - actionType: updateObject
      dataKey: Global.formData.medicalRecords
      dataObject: {}
    - actionType: updateObject
      dataKey: Global.formData.patientInfo
      dataObject: {}
    - actionType: updateObject
      dataKey: Global.formData.visitQuestionnaire
      dataObject: {}
    - actionType: updateObject
      dataKey: Global.formData.patientChart
      dataObject: {}
    - actionType: updateObject
      dataKey: Global.formData.providerInfo
      dataObject: {}
    - actionType: updateObject
      dataKey: Global.formData.financialResponsibility
      dataObject: {}
    - actionType: updateObject
      dataKey: Global.formData.patientInsurance
      dataObject: {}

    # 初始化会议里的patient id 为空
    - .Global.formData.patientId@: ""
    - .Global.formData.judgeEditProfileEdge@: ""
    # 初始化回复邮件为空  
    - .Global.formData.reply.name.data.receiverName@: ""
    - .Global.formData.reply.name.data.receiverAvatarId@: ""
    - .Global.formData.reply.eid@: =.Global.fac_rootNotebook
    # 获取开会边的信息
    - actionType: evalObject
      object:
        .Global._nonce@:
          =.builtIn.math.random: ""
    # 清空financial responsibility 中变量
    - .Global.formData.isEditFinancial@: "none"
    # #获取会议中provider的个人信息
    # - ..formData.providerInfo@: =..apiRequest.providerInfo.docResp.doc.0
    # provider列表
    - ..formData.providerList@: =.Global.providerAll
    - ..formData.currentAppointment@: =.Global.formData.appointment
    # 获取patient id， F->P, D->P, P->D 只要E6 evid不是provider，那E6 evid一定是patient
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =..formData.currentAppointment.evid
              string2: =..formData.currentAppointment.name.providerId
        - ..formData.patientId@: =..formData.currentAppointment.bvid
        - ..formData.patientId@: =..formData.currentAppointment.evid
    - actionType: evalObject
      object:
        # - ..apiRequest.inviteParticipant.edgeIn.id.0@: =.Global.currentFacility.id
        # - ..apiRequest.inviteParticipant.edgeIn.id.1@: =..formData.currentAppointment.id
        - =.builtIn.array.add:
            dataIn:
              object: =..apiRequest.inviteParticipant.edgeIn.id
              value: =.Global.currentFacility.id
        - =.builtIn.array.add:
            dataIn:
              object: =..apiRequest.inviteParticipant.edgeIn.id
              value: =..formData.currentAppointment.id
        - =..apiRequest.inviteParticipant.edgeAPI.get: ""
        - if:
            - =..apiRequest.inviteParticipant.edgeGetResp.edge.0
            - actionType: evalObject
              object:
                - ..formData.participant@: =..apiRequest.inviteParticipant.edgeGetResp.edge
                - =.builtIn.object.extractArray:
                    dataIn:
                      obj: =..formData.participant
                      arr:
                        - name.roleName
                    dataOut: PatientSummary.formData.invitedProvider # id + roomName + service      
                - =.builtIn.array.selectOneToArr:
                    dataIn:
                      arr: =..formData.invitedProvider
                      key: "roleName"
                    dataOut: PatientSummary.formData.invitedProvider
            - continue
        - =.builtIn.array.add:
            dataIn:
              object: =..formData.invitedProvider
              value: =..formData.currentAppointment.name.providerName
        - if:
            - =.builtIn.string.equal:
                dataIn:
                  string1: =.Global.currentFacility.id
                  string2: =..formData.currentAppointment.bvid
            - ..formData.providerNameShowOrHide@: none
            - ..formData.providerNameShowOrHide@: block
        - if:
            - =.builtIn.string.equal:
                dataIn:
                  string1: =..formData.currentAppointment.bvid
                  string2: =.Global.currentFacility.id
            - actionType: evalObject
              object:
                - .Global.formData.meetingDocEid@: =..formData.currentAppointment.id
                - .Global.formData.meetingDocReid@: =..formData.currentAppointment.id

            - actionType: evalObject
              object:
                - ..apiRequest.getBelongEdge.edgeIn.id.0@: =.Global.currentFacility.id
                - ..apiRequest.getBelongEdge.edgeIn.id.1@: =..formData.currentAppointment.id
                - =..apiRequest.getBelongEdge.edgeAPI.get: ""
                - .Global.formData.meetingDocEid@: =..apiRequest.getBelongEdge.edgeResp.edge.0.id
                - .Global.formData.meetingDocReid@: =..formData.currentAppointment.id
        - ..apiRequest.changeAppointmentFee.docStoreReq.reid@: =.Global.formData.meetingDocReid
        - ..apiRequest.changeAppointmentFee.docStoreReq.eid@: =.Global.formData.meetingDocEid
        - ..apiRequest.changeAppointmentFee.docQueryReq.id@: =.Global.formData.meetingDocReid
        - =..apiRequest.changeAppointmentFee.docAPI.get: ""
        - if:
            - ..apiRequest.changeAppointmentFee.docQueryResp.doc.0
            - ..formData.fee@: =..apiRequest.changeAppointmentFee.docQueryResp.doc.0.name.data.paymentInfo.fee
            - ..formData.fee@: =..formData.currentAppointment.name.fee
        - =..profile.docAPI.get: ""
        - .Global.formData.patientInfo@: =..profile.docResponse.doc.0
        - ..apiRequest.providerInfo.docIn.id@: =..formData.currentAppointment.name.providerId
        - =..apiRequest.providerInfo.docAPI.get: ""
        - .Global.formData.providerInfo@: =..apiRequest.providerInfo.docResp.doc.0
        - .Global.formData.appointment@: =..formData.currentAppointment
        - =.builtIn.string.concat:
            dataIn:
              - =..profile.docResponse.doc.0.name.data.basicInfo.fullName
              - " ("
              - =..profile.docResponse.doc.0.name.data.basicInfo.gender
              - ")"
            dataOut: PatientSummary.info
        - =.builtIn.string.concat:
            dataIn:
              - =..formData.currentAppointment.name.providerName
              - " 、 "
              - =..formData.currentAppointment.name.patientName
              # - " 、 "  
              # - =..formData.currentAppointment.name.patientName     
            dataOut: PatientSummary.participants
        - =.builtIn.date.getDurationByMinute:
            dataIn:
              stime: =..formData.currentAppointment.stime
              etime: =..formData.currentAppointment.etime
            dataOut: PatientSummary.formData.duration
        - if:
            - =.builtIn.string.equal:
                dataIn:
                  string1: =..formData.currentAppointment.name.visitType
                  string2: "Telemedicine"
            - actionType: evalObject
              object:
                - ..key@: "Duration"
                - =.builtIn.string.concat:
                    dataIn:
                      - =..formData.duration
                      - " Min"
                    dataOut: PatientSummary.value
            - continue
    - .Global.formData.patientPage@: VitalSigns
    # 获取会议里的VitalSign
    - =..apiRequest.vitalSign.docAPI.get: ""
    - if:
        - =..apiRequest.vitalSign.docResp.doc.0
        - actionType: evalObject
          object:
            - ..formData.vitalSignList@: =..apiRequest.vitalSign.docResp.doc.0.name.data
            - ..apiRequest.vitalSign.document@: =..apiRequest.vitalSign.docResp.doc.0
        - actionType: evalObject
          object:
            # 如果没有创建过就新建一个vitalSign
            - ..apiRequest.vitalSign.document.reid@: =.Global.formData.meetingDocReid
            - ..apiRequest.vitalSign.document.eid@: =.Global.formData.meetingDocEid
    # 判断tage以显示/隐藏Finish
    - if:
        - =.builtIn.number.less:
            dataIn:
              num1: 0
              num2: =..formData.currentAppointment.tage
        - ..inMeetingEdgeFlag@: "true"
        - continue
    # 查询facility 和 inMeeting的evid 之间10002的边
    - =.builtIn.array.add:
        dataIn:
          object: =..apiRequest.emailEdge.edgeReq.id
          value: =.Global.currentFacility.id
    - =.builtIn.array.add:
        dataIn:
          object: =..apiRequest.emailEdge.edgeReq.id
          value: =..formData.currentAppointment.evid
    - =..apiRequest.emailEdge.edgeAPI.get: ""
    # - ..formData@: =..PatientSummary.apiRequest.providerInfo.docResp.doc
    - ..apiRequest.emailEdge.edgeReq@: =..apiRequest.emailEdge.edgeReqIn

    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =..formData.currentAppointment.evid
              string2: =..formData.currentAppointment.name.providerId
        # 若evid 和 providerId相等.profile文档的bsig是patient的id
        - actionType: evalObject
          object:
            - ..apiRequest.email.docStoreReq.name.data.receiverName@: =..formData.currentAppointment.name.providerName
            - ..apiRequest.emailEdge.edgeReq.id.1@: =..formData.patientId

        # 若evid 和 providerId 不等， 再provider
        - actionType: evalObject
          object:
            - ..apiRequest.emailEdge.edgeReq.id.1@: =..formData.currentAppointment.name.providerId
            - ..apiRequest.email.docStoreReq.name.data.receiverName@: =..formData.currentAppointment.name.patientName

    - ..apiRequest.emailEdge.edgeReq.id.0@: =.Global.currentFacility.id
    - =..apiRequest.emailEdge.edgeAPI.reGet: ""

    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: "Telemedicine"
              string2: =..formData.currentAppointment.name.visitType
        - ..formData.isHiddenLocation@: none
        - ..formData.isHiddenLocation@: block

    # 分割手机号
    - =.builtIn.string.phoneNumberSplit:
        dataIn:
          phoneNumber: =..formData.currentAppointment.name.patientPhoneNumber
          sign: " "
        dataOut: PatientSummary.formData.splitPatPhoneNumber
    - =.builtIn.date.formatDataPro:
        dataIn:
          date: =..formData.currentAppointment.stime
          separator: "/"
        dataOut: PatientSummary.formData.sendMessageSTime

    - =.builtIn.date.startMeeting:
        dataIn:
          stime: =..formData.currentAppointment.stime
        dataOut: PatientSummary.formData.startIf

    # 判断是否隐藏Finish Appointment按钮
    - if:
        - =.builtIn.number.typeIsValid:
            dataIn:
              docType: =..formData.currentAppointment.subtype
              localArr: [ 17 ]
              binaryArr: [ 0 ]                 
        - actionType: evalObject
          object:
            # - if:
            #   - =.builtIn.string.equal:
            #       dataIn:
            #         string1: =..formData.startIf
            #         string2: true
            #   - actionType: evalObject
            #     object:
            #       - if:
            #         - =.builtIn.number.typeIsValid:
            #             dataIn:
            #               docType: =..formData.currentAppointment.tage
            #               localArr: [4]
            #               binaryArr: [1]
            #         - actionType: evalObject
            #           object:
            #             - ..formData.isStartMeeting@: false
            #         - continue
            #   - continue
            - ..formData.isStartMeeting@: false
        - continue

    - =..apiRequest.paymentEdge.edgeAPI.get: ""
    - =.builtIn.array.selectOneToArr:
        dataIn:
          arr: =..apiRequest.paymentEdge.edgeResp.edge
          key: id
        dataOut: PatientSummary.formData.transactionIds

    - ..apiRequest.hasPaidProfile.getDocReq.id@: =..formData.transactionIds
    - =..apiRequest.hasPaidProfile.docAPI.get: ""
    # 获取Macro
    - .Global.macro.req.id@: =.Global.fac_rootNotebook
    - if:
        - =.Global.macro.resp.doc.0.id
        - continue
        - =.Global.macro.docAPI.get: ""

    - =.builtIn.array.getObjectByArray:
        dataIn:
          array: =..apiRequest.hasPaidProfile.getDocResp.doc
          key: "type"
          value: 2001
        dataOut: PatientSummary.formData.currentPaidTrans
    # 判断 ，如果是
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =..apiRequest.hasPaidProfile.getDocResp.doc.0.type
              string2: 2002
        - actionType: evalObject
          object:
            - ..formData.controlRefundPhoto@: true
            - if:
                - =.builtIn.string.equal:
                    dataIn:
                      string1: =..apiRequest.hasPaidProfile.getDocResp.doc.0.deat.state
                      string2: "COMPLETED"
                - ..formData.paymentStatusColor@: "0xF8AE29"
                - continue
            - if:
                - =.builtIn.string.equal:
                    dataIn:
                      string1: =..apiRequest.hasPaidProfile.getDocResp.doc.0.deat.state
                      string2: "COMPLETED"
                - ..formData.meetingStatus@: "0.00" #"Refunded"
                - ..formData.meetingStatus@: =..apiRequest.hasPaidProfile.getDocResp.doc.0.name.title
        - actionType: evalObject
          object:
            - ..formData.controlRefundPhoto@: false
            - if:
                - =.builtIn.string.equal:
                    dataIn:
                      string1: =..apiRequest.hasPaidProfile.getDocResp.doc.0.deat.state
                      string2: "COMPLETED"
                - ..formData.paymentStatusColor@: "0x2fb355"
                - ..formData.paymentStatusColor@: "0xE24445"
            - if:
                - =.builtIn.string.equal:
                    dataIn:
                      string1: =..apiRequest.hasPaidProfile.getDocResp.doc.0.deat.state
                      string2: "COMPLETED"
                - ..formData.meetingStatus@: "0.00" #"Paid"           
                - ..formData.meetingStatus@: =..formData.fee #"Unpaid"           
    - ..formData.receiptList.0.dateOfService@: =.PatientSummary.formData.currentPaidTrans.ctime
    - ..formData.receiptList.0.reason@: =.PatientSummary.formData.currentPaidTrans.name.data.appointmentInfo.reason
    - ..formData.receiptList.0.due@: =.PatientSummary.formData.currentPaidTrans.name.data.orderInfo.amount
    - =.builtIn.string.retainNumber:
        dataIn:
          value: =..formData.fee
        dataOut: PatientSummary.formData.changeAmount
    - =.builtIn.math.toFixedNum:
        dataIn:
          num: =..formData.changeAmount
        dataOut: PatientSummary.formData.changeAmount
    # 获取是否开启payment 功能
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =.Global.formData.payAiTmedEid
              string2: ""
        - actionType: evalObject
          object:
            - =..apiRequest.turnOnPayment.edgeAPI.get: ""
            - if:
                - =..apiRequest.turnOnPayment.edgeResp.edge.0
                - actionType: evalObject
                  object:
                    - ..formData.paymentStatusIf@: false
                    - ..formData.paymentIconIf@: true
                - actionType: evalObject
                  object:
                    - ..formData.paymentStatusIf@: true
                    - ..formData.paymentIconIf@: false
        - actionType: evalObject
          object:
            - ..formData.paymentStatusIf@: false
            - ..formData.paymentIconIf@: true
    # 筛出2001
    - =.builtIn.array.filterArrayByPath:
        dataIn:
          objArr: =..apiRequest.hasPaidProfile.getDocResp.doc
          path: type
          compareStr: [ 2001 ]
        dataOut: PatientSummary.formData.paidSuccessfulArr
    # 筛出完成的交易记录 2001 2002
    - =.builtIn.array.filterArrayByPath:
        dataIn:
          objArr: =..apiRequest.hasPaidProfile.getDocResp.doc
          path: "deat.state"
          compareStr: [ "COMPLETED" ]
        dataOut: PatientSummary.formData.completeArr
    - =.builtIn.object.extractArray:
        dataIn:
          obj: =..formData.completeArr
          arr:
            - name.data.orderInfo.amount
        dataOut: PatientSummary.formData.amountPaidArr
    - =.builtIn.array.selectOneToArr:
        dataIn:
          arr: =..formData.amountPaidArr
          key: "amount"
        dataOut: PatientSummary.formData.amountArr
    - =.builtIn.math.cumulative:
        dataIn:
          numArr: =..formData.amountArr
        dataOut: PatientSummary.formData.amountPaidTemp
    - =.builtIn.number.multiply:
        dataIn:
          number: =..formData.amountPaidTemp
          multiple: 100
        dataOut: PatientSummary.formData.amountPaid
    # 判断是否填写了required forms
    - if:
        - =..profile.docResponse.doc.0
        - ..formData.judgeRequiredForm@: "none"
        - ..formData.judgeRequiredForm@: "block"

    - ..apiRequest.profileFriend.docReq.ids.0@: =.Global.currentFacility.id
    - ..apiRequest.profileFriend.docReq.ids.1@: =..formData.patientId
    - =..apiRequest.profileFriend.docAPI.get: ""
    - ..apiRequest.hashTag.docQueryReq.id@: =..apiRequest.profileFriend.docResp.doc.0.id

    - =..apiRequest.hashTag.docAPI.get: ""

    - ..apiRequest.hashTag.docReGetReq.id@: =..profile.docResponse.doc.0.id
    - =..apiRequest.hashTag.docAPI.reGet: ""

    - if:
        - =.builtIn.number.less:
            dataIn:
              num1: =..apiRequest.hashTag.docQueryResp.doc.0.name.data.hashTime # 10000
              num2: =..apiRequest.hashTag.docReGetResp.doc.0.name.data.hashTime # 40000
        - ..formData.controlHashTime@: "block"
        - ..formData.controlHashTime@: "none"

    - =.builtIn.string.concat:
        dataIn:
          - =..apiRequest.profileFriend.docResp.doc.0.name.data.basicInfo.fullName
          - " "
          - "has updated his profile. Please review to confirm."
        dataOut: PatientSummary.formData.updatePatientInfo

  inMeetingEdgeFlag: "false"
  formData:
    updatePatientInfo: "" # 控制是否修改弹窗
    patientId: "" # 会议里patient 的id
    controlHashTime: ""
    judgeRequiredForm: "block" # 判断patient 是否填写了required forms
    invitedBgc: "0xc1c1c1" # 邀请provider按钮变色
    invitedProvider: []       
    paidSuccessfulArr: []
    completeArr: []
    amountPaidArr: []
    amountArr: []
    amountPaidTemp: ""
    amountPaid: ""
    paymentStatusIf: ""
    paymentIconIf: ""
    controlRefundPhoto: false
    meetingStatus: "" # 会议的状态，是否付款或者退款
    limitRefundColor: "0xc1c1c1" # 如果退款金额的格式不对，会变成红框
    refundData:
      patientName: ""
      paidAmount: "" # 支付金额
      notes: ""
      refundAmount: "" # 退款金额
    moreOptions: []
    refundTotalArr: []       
    refundTotal: "" # 退款的总金额,不包括当前这次
    refundJudge: "" # 退款总金额，包括当前退款，用于判断是否超过总付款
    isTransCompleted: false # 判断当前交易是否为Refunded或者Paid，从而决定弹窗是否展示receipt以及refunded
    currentBalance: "" # 当前账户总余额
    refundMultiply: ""
    transactionIds: []
    currentTransaction: ""
    receiptList:
      - dateOfService: ""
        reason: ""
        due: ""
    currentPaidTrans: ""
    paymentStatus: ""
    paymentStatusColor: ""
    participant: []
    medicalDoc: []
    currentAppointment: {}       
    providerList: []       
    providerListSelect: []       
    providerSelectInfo: {}       
    temp: ""
    judgeAppointmentBvid: ""
    providerNameShowOrHide: ""
    nextBtnColor: "0xd3dde9" # 预约时不选时间就不许下一步
    sendMessageSTime: "" # 发送邮件的开始时间
    patientChart: []       
    goPatdForm: false # 判断medicalDocuments 里面的列表是否去Patient form
    medicalDocuments: []       
    judgeStatus: ""
    currentSubtype: ""
    splitTime: []       
    duration: ""
    scheduleScondition: "" # For schedule to get all E1
    availScheduleScondition: "" # For getFirstAvailSchedule to get the nearest available time
    currentLocalTime: ""
    adjacentEdgeTime: ""
    changeAppointmentTime: {}       
    splitPatPhoneNumber: ""
    # originalTimeString: ""
    currentTimeString: "" # 改变预约发送的邮件
    reasonForCancelation: ""
    cancelSingle:
      cancelSelect: ""
    isHiddenLocation: ""
    isHiddenCalAndChange: false
    cancelByPatientOrProvider: ""
    concatProviderName: ""
    concatPatientName: ""
    sendMessageContent:
      msg1: "Hello, "
      msg2: ""
      msg3: "Reason: "
      res: ""
      cancelTime: ""
    sendMessageChange: ""
    isStartMeeting: "true"
    startIf: ""
    patdInfo: "" # for displaying patdInfo in popUp
    patdInfoInsuranceId: ""
    patInfoEmerContactFullName: ""
    patdInfoEmploymentAddress: ""
    providerInfo: ""
    isShowDownArrowGray: block
    isShowUpArrowGray: none
    isShowMedicalInsuranceInfo: none
    changeAmount: "" # 更新病人所要支付的金额  
    note: ""
    fee: ""
    vitalSignList:
      - time: ""
        id: "bp"
        measurements: []
        label1: "Blood Pressure"
        label2: "Heart Rate"
        unit1: "mmHg"
        unit2: "bpm"
        data1: ""
        data2: ""
        imgPath: vitalsHeart.png
      - time: ""
        id: "resp"
        measurements: []
        label1: "Respiratory Rate"
        unit1: "breaths/min"
        data1: ""
        data2: VITALS_DATA_HIDE_TEXTFIELD
        imgPath: vitalsGeneric.png
      - time: ""
        id: "spo2"
        measurements: []
        label1: "Pulse Oximetry"
        label2: "Heart Rate"
        unit1: "O₂ %"
        unit2: "bpm"
        data1: ""
        data2: ""
        imgPath: vitalsGeneric.png
      - time: ""
        id: "temp"
        measurements: []
        label1: "Temperature"
        unit1: "°F/°C"
        data1: ""
        data2: VITALS_DATA_HIDE_TEXTFIELD
        imgPath: vitalsTemperature.paddingBottom
      - time: ""
        id: "height"
        measurements: []
        label1: "Height"
        unit1: "ft."
        unit2: "in."
        data1: ""
        data2: ""
        imgPath: vitalsHeight.png
      - time: ""
        id: "weight"
        measurements: []
        label1: "Weight"
        unit1: "lbs"
        data1: ""
        data2: VITALS_DATA_HIDE_TEXTFIELD
        imgPath: vitalsWeight.png
      - time: ""
        id: "bmi"
        measurements: []
        label1: "Body Mass Index (BMI)"
        unit1: "kg/m²"
        data1: ""
        data2: VITALS_DATA_HIDE_TEXTFIELD
        imgPath: vitalsBMI.png
  formDataTemp:
    notesList:
      - title: Progress Report
        pageName: ProgressReportEdit
      - title: Initial Evaluation Report
        pageName: InitEvalReportEdit
      - title: COVID-19 Results & Flu A&B Results
        pageName: Cov19ResultsAndFluResultsEdit

      - title: Evaluation Note
        pageName: EvaluationNoteEdit
      # - title: Prescription
      #   pageName: Prescription2             
      - title: Absence / Excuse Note
        pageName: AbsentNoteEdit
      - title: Blank Note/Form
        pageName: BlankNoteEdit
      - title: Work Status Form
        pageName: WorkStatusFormEdit
      - title: PR-1
        pageName: PROneEdit
      - title: PR-2
        pageName: PRTwoEdit
      - title: DWC Form RFA
        pageName: DWCFormRFAEdit
      - title: Surgery Authorization
        pageName: SurgeryAuthorizationEdit
      - title: Patient Consent Form - HIPPA
        pageName: PatientConsentFormHIPPAEdit
      - title: Confidential Morbidity Report
        pageName: ConfidentialMorbidityReportEdit
      - title: Invoice
        pageName: InvoiceEdit
      - title: Financial Responsibility Form
        pageName: FinancialResponsibilityReviewPage1
      # - title: COVID-19 Testing Consent
      #   pageName: Cov19TestFormEditPage1
      # - title: COVID-19 Testing Consent - New Patient
      #   pageName: Cov19TestNewPatEditPage1
      # - title: Pfizer-BioNTech Vaccine - First Dose
      #   pageName: PifzerVaccineFirDoseEditPage1
      # - title: Pfizer-BioNTech Vaccine - Second Dose
      #   pageName: PifzerVaccineSecDoseEditPage1
      # - title: Moderna Vaccine Form - First Dose
      #   pageName: ModernaVaccineFirDoseEditPage1
      # - title: Moderna Vaccine Form - Second Dose
      #   pageName: ModernaVaccineSecDoseEditPage1
    cancelAppointmentSelect:
      - key: cancelSelect
        value: Patient
      - key: cancelSelect
        value: Provider
    providerCategory:
      - Attorney
      - Specialist
      - Provider
      - Employer
    providerCategoryAll:
      - key: Attorney
        value: "110"
      - key: Specialist
        value: "120"
      - key: Provider
        value: "130"
      - key: Employer
        value: "140"
    assignType:
      - text: "All"
        textColor: "0x2988e6"
        borderColor: "0x2986e3"
        backgroundColor: "0xdfedfc"
        tagCategory: "All"
        value: All
      - text: "@Me"
        textColor: "0xfc3a3a"
        borderColor: "0xffeaea"
        backgroundColor: "0xffeaea"
        tagCategory: ""
        value: "@Me"
      - text: "Patient"
        textColor: "0xf8ae29"
        borderColor: "0xfff4e0"
        backgroundColor: "0xfff4e0"
        tagCategory: classTag
        value: "Patient"
      - text: "Provider"
        textColor: "0x30b354"
        borderColor: "0xe4f5e9"
        backgroundColor: "0xe4f5e9"
        tagCategory: classTag
        value: "Provider"
      - text: "Admin"
        textColor: "0x005795"
        borderColor: "0xe9f2fc"
        backgroundColor: "0xe9f2fc"
        tagCategory: classTag
        value: "Admin"
      - text: "Private"
        textColor: "0x4c5264"
        borderColor: "0xececee"
        backgroundColor: "0xececee"
        tagCategory: statusTag
        value: "Private"
      - text: "Released"
        textColor: "0x2988e6"
        borderColor: "0xdfedfc"
        backgroundColor: "0xdfedfc"
        tagCategory: statusTag
        value: "Released"
    pay:
      - date: 07/27/2021
        reason: New Consult
        amount: $75.00
      # - date: 07/27/2021
      #   reason: New Consult
      #   amount: $75.00        
  apiRequest:
    paymentFeeBit:
      docResp: ""
      docReq:
        type: "10496"
        tage: "32"
        eid: ""
        reid: ""
      docAPI:
        store:
          api: cd
          dataIn: PatientSummary.apiRequest.paymentFeeBit.docReq
          dataOut: PatientSummary.apiRequest.paymentFeeBit.docResp
    paymentNotFeeBit:
      docResp: ""
      docReq:
        type: "10240"
        tage: "479"
        eid: .Global.formData.meetingDocEid
        reid: .Global.formData.meetingDocReid
      docAPI:
        store:
          api: cd
          dataIn: PatientSummary.apiRequest.paymentNotFeeBit.docReq
          dataOut: PatientSummary.apiRequest.paymentNotFeeBit.docResp

    # refund info
    refundOrder:
      docReq:
        type: 2002 # .DocType.refundOrder
        eid: "" # once click the order, they share the same eid 
        name:
          data:
            appointmentInfo: ""
            orderInfo:
              amount: "" # 退款金额 
              payer: ""
          title: ""
          nonce: "" # once click the order, get the squareID from response.document.deat.squareID   
      docRes: ""
      docAPI:
        store:
          api: cd
          dataIn: PatientSummary.apiRequest.refundOrder.docReq
          dataOut: PatientSummary.apiRequest.refundOrder.docRes
    # all PatientSummary of the same meeting room (同一会议下的所有交易记录,包括pay和refund)
    onceTransaction:
      docResp: ""
      docReq:
        id: ""
        xfname: eid
        sCondition: "type in (2001,2002)"
        _nonce: .Global._nonce
      docAPI:
        get:
          api: rd
          dataIn: apiRequest.onceTransaction.docReq
          dataOut: PatientSummary.apiRequest.onceTransaction.docResp

    paymentEdge:
      edgeResp: ""
      edgeIn:
        id: .Global.formData.appointment.id
        xfname: refid
        _nonce: .Global._nonce
        type: 1113
        obfname: mtime
      edgeAPI:
        get:
          api: re
          dataIn: PatientSummary.apiRequest.paymentEdge.edgeIn
          dataOut: PatientSummary.apiRequest.paymentEdge.edgeResp
    # 同一会议下的所有交易记录,包括pay和refund
    hasPaidProfile:
      getDocResp: ""
      getDocReq:
        id: []
        xfname: Eid
        # type: 2001
        obfname: mtime
        sCondition: "type in (2001,2002)"
        _nonce: =.Global._nonce
        maxcount: "100"
      docAPI:
        get:
          api: rd
          dataIn: PatientSummary.apiRequest.hasPaidProfile.getDocReq
          dataOut: PatientSummary.apiRequest.hasPaidProfile.getDocResp
    # 获取是否开启payment功能
    turnOnPayment:
      # record the relationship of payment
      edgeResp: ""
      edgeIn:
        id:
          - .Config.aitmedPaymentID
          - .Global.currentFacility.id
        xfname: bvid,evid
        type: 1113
        obfname: mtime

      edgeAPI:
        get:
          api: re
          dataIn: PatientSummary.apiRequest.turnOnPayment.edgeIn
          dataOut: PatientSummary.apiRequest.turnOnPayment.edgeResp
    # 获取 visit Questionnaire中的信息
    visitQuestionnaire:
      docResp:
        doc: []
      docReq:
        id: .Global.formData.patientHistoryInfo.id
        xfname: reid
        type: .DocType.VisitQuestionnaire
        obfname: mtime
        maxcount: "1"
      docAPI:
        get:
          api: rd
          dataIn: PatientSummary.apiRequest.visitQuestionnaire.docReq
          dataOut: PatientSummary.apiRequest.visitQuestionnaire.docResp
    # 获取Facility 和provider以及patient之间的E10002，用于发邮件
    connection:
      edgeResp: ""
      edgeIn:
        id:
          - .Global.currentFacility.id
        xfname: Bvid,Evid
        type: 10002
        obfname: mtime
        tage: "1"
        maxcount: "1"
      edgeAPI:
        get:
          api: re
          dataIn: apiRequest.connection.edgeIn
          dataOut: PatientSummary.apiRequest.connection.edgeResp
    # 获取当前会议里的provider profile
    providerInfo:
      docResp: ""
      docIn:
        id: ""
        xfname: "ovid"
        type: .DocType.DoctorProfile
        obfname: mtime
      docAPI:
        get:
          api: rd
          dataIn: apiRequest.providerInfo.docIn
          dataOut: PatientSummary.apiRequest.providerInfo.docResp
    #获取最近可预约时间段
    getFirstAvail:
      response: ""
      edge:
        type: 40000
        id: []
        sCondition: ..formData.availScheduleScondition
        maxcount: "1"
        xfname: "evid,bvid"
        obfname: "stime"
        asc: true
        _nonce: =.Global._nonce
      edgeAPI:
        get:
          .EdgeAPI.get: ""
          api: re
          dataIn: PatientSummary.apiRequest.getFirstAvail.edge
          dataOut: PatientSummary.apiRequest.getFirstAvail.response
    # change 会议，建立E8的边挂在E6上
    changeAppointment:
      response: ""
      edgeIn:
        type: 40000
        subtype: 8
        refid: "" # 指向原来的E2，存储取消的记录
        bvid: .Global.currentFacility.id
        evid: "" # 为改变的新的预约时间的eid
        stime: ""
        etime: ""
        name: ""
      edgeAPI:
        store:
          api: ce
          dataIn: PatientSummary.apiRequest.changeAppointment.edgeIn
          dataOut: PatientSummary.apiRequest.changeAppointment.response

    changeAppointmentFee:
      docStoreResp: ""
      docStoreReq:
        type: .DocType.FinancialInfo
        reid: ""
        eid: ""
        name:
          data:
            paymentInfo:
              fee: ""
              note: ""
            billingInfo:
      docQueryReq:
        type: .DocType.FinancialInfo
        id: ""
        xfname: reid
        maxcount: "1"
        obfname: mtime
        _nonce: =.Global._nonce
      docQueryResp: ""
      docAPI:
        get:
          api: rd
          dataIn: PatientSummary.apiRequest.changeAppointmentFee.docQueryReq
          dataOut: PatientSummary.apiRequest.changeAppointmentFee.docQueryResp
        store:
          api: cd
          dataIn: PatientSummary.apiRequest.changeAppointmentFee.docStoreReq
          dataOut: PatientSummary.apiRequest.changeAppointmentFee.docStoreResp
    # 会议里的Patient chart
    patientChart:
      docResp: ""
      docIn:
        id: .Global.formData.patientHistoryInfo.id
        xfname: eid
        type: .DocType.PatientChart
        maxcount: "1"
        obfname: "mtime"
        _nonce: .Global._nonce
      docAPI:
        get:
          api: rd
          dataIn: PatientSummary.apiRequest.patientChart.docIn
          dataOut: PatientSummary.apiRequest.patientChart.docResp
    # 会议里的VitalSign
    vitalSign:
      document:
        name:
          data: []
        type: .DocType.VitalSigns
      docStoreResp: ""
      docResp:
        doc: []
      docIn:
        id: .Global.formData.appointment.id
        xfname: reid
        type: .DocType.VitalSigns
        maxcount: "1"
        _nonce: .Global._nonce
        obfname: "mtime"
      docAPI:
        get:
          api: rd
          dataIn: PatientSummary.apiRequest.vitalSign.docIn
          dataOut: PatientSummary.apiRequest.vitalSign.docResp
        store:
          api: cd
          dataIn: PatientSummary.apiRequest.vitalSign.document
          dataOut: PatientSummary.apiRequest.vitalSign.docStoreResp
    # financial responsibility form
    financialResponse:
      docRes: ""
      docIn:
        id: .Global.formData.appointment.id
        xfname: reid
        type: .DocType.financialResponsibility
        maxcount: "1"
        _nonce: .Global._nonce
        obfname: "mtime"
      docAPI:
        get:
          api: rd
          dataIn: PatientSummary.apiRequest.financialResponse.docIn
          dataOut: PatientSummary.apiRequest.financialResponse.docRes
    # 获取patient insurance profile
    insurance:
      docRes: ""
      docReq:
        type: .DocType.InsuranceCard
        id: .Global.formData.patientInfo.name.data.insuranceId
        xfname: id
        _nonce: =.Global._nonce
        obfname: ctime
      docAPI:
        get:
          api: rd
          dataIn: PatientSummary.apiRequest.insurance.docReq
          dataOut: Global.formData.patientInsurance

    # 会议里的文档
    medicalDocuments:
      docResp: ""
      docIn:
        id: .Global.formData.patientHistoryInfo.id
        xfname: reid
        # PatientChart是单独提出来的 (25601)
        sCondition: .DocumentQuery.AdminAllMeetingDocuments
        maxcount: "500"
        obfname: "mtime"
        _nonce: =.Global._nonce
      docAPI:
        get:
          api: rd
          dataIn: apiRequest.medicalDocuments.docIn
          dataOut: PatientSummary.apiRequest.medicalDocuments.docResp
    # 如果是facility创建的E2，文档挂E2；否则文档挂E10 ，此处获取E10
    getBelongEdge:
      edgeResp: ""
      edgeIn:
        id:
        xfname: evid,refid
        type: 1053
        obfname: ctime
        maxcount: "1"
      edgeAPI:
        get:
          api: re
          dataIn: apiRequest.getBelongEdge.edgeIn
          dataOut: PatientSummary.apiRequest.getBelongEdge.edgeResp
    # 创建新的预约邀请参与者
    inviteParticipant:
      edgeResp: ""
      edgeGetResp: ""
      edgeIn:
        id: []
        xfname: bvid,refid
        type: 1053
        obfname: ctime
        asc: true
        _nonce: =.Global._nonce
      edge:
        .Edge: ""
        bvid: .Global.currentFacility.id
        evid: ""
        refid: ""
        type: 1053
        subtype: 130
        name:
          roleName: ""
          role: ""
        _handledCode: 23010
        stime: ""
        etime: ""
      edgeReGet:
        id: []
        xfname: bvid,refid
        type: 1053
        obfname: ctime
        asc: true
        _nonce: =.Global._nonce
      edgeReGetResp: ""
      edgeAPI:
        store:
          api: ce
          dataIn: apiRequest.inviteParticipant.edge
          dataOut: PatientSummary.apiRequest.inviteParticipant.edgeResp
        get:
          api: re
          dataIn: apiRequest.inviteParticipant.edgeIn
          dataOut: PatientSummary.apiRequest.inviteParticipant.edgeGetResp
        reget:
          api: re
          dataIn: apiRequest.inviteParticipant.edgeReGet
          dataOut: PatientSummary.apiRequest.inviteParticipant.edgeReGetResp
    # 取消会议发送邮件
    email:
      docStoreIn:
        #邮件类型，默认1281
        type: .DocType.InboxMessage
        #邮件所挂载的edge(是10002) 默认挂在 rootNotebookID 10000，当点击send的时候再修改为 10002
        eid: ""
        name:
          data:
            #邮件内容
            content: ""
            #收件人姓名 
            receiverName: ""
            #发送人姓名 
            senderName: ""
            #发件人头像的id
            senderAvatarId: ""
            #是否携带附件
            haveAttachment: false
          #邮件标题
          title: ""
          #收件人头像的id 
          user: ""
      docQueryRes: ""
      docQueryReq:
        ObjType: 544
        #邮件类型，默认1281
        type: 1281
        id: .Global.currentFacility.id
        # 查询条件
        sCondition: E.type=10002 AND (D2.type & 0xFF18 =0xE00 OR D2.reid is NULL OR
          D2.Type = 66561)
        # 发送者id  接收者id  邮件的发送者id
        xfname: (E.bvid|E.evid)&!D.ovid
        obfname: ctime
        _nonce: =.Global._nonce
        maxcount: "100"
      docQueryRegetResp: ""
      # 这里用原先的get会让列表数据消失，换一个
      docQueryReGet:
        # 使得当emailTag变化时，email type就会变化
        ObjType: 544
        #邮件类型，默认1281
        type: 1281
        id: .Global.currentFacility.id
        # 查询条件
        sCondition: E.type=10002 AND (D2.type & 0xFF18 =0xE00 OR D2.reid is NULL OR
          D2.Type = 66561)
        # 发送者id  接收者id  邮件的发送者id
        xfname: (E.bvid|E.evid)&!D.ovid
        obfname: ctime
        _nonce: =.Global._nonce
        maxcount: "100"
      docStoreRes: ""
      docStoreReq:
        #邮件类型，默认1281
        type: .DocType.InboxMessage
        #邮件所挂载的edge(是10002) 默认挂在 rootNotebookID 10000，当点击send的时候再修改为 10002
        eid: .Global.rootNotebookID
        name:
          data:
            #邮件内容
            content: ""
            #收件人姓名 
            receiverName: ""
            #发送人姓名 
            senderName: ""
            #发件人头像的id
            senderAvatarId: ""
            #是否携带附件
            haveAttachment: false
          #邮件标题
          title: ""
          #收件人头像的id 
          user: ""
      docAPI:
        reget:
          api: rd
          dataIn: PatientSummary.apiRequest.email.docQueryReGet
          dataOut: PatientSummary.apiRequest.email.docQueryRegetResp
        get:
          api: rd
          dataIn: PatientSummary.apiRequest.email.docQueryReq
          dataOut: PatientSummary.apiRequest.email.docQueryRes
        store:
          api: cd
          dataIn: PatientSummary.apiRequest.email.docStoreReq
          dataOut: PatientSummary.apiRequest.email.docStoreRes

    # 获取邮件的边
    emailEdge:
      edgeReqIn:
        id: []
        type: 10002
        xfname: Bvid,Evid
        obfname: "ctime"
      edgeResp: ""
      reEdgeResp: ""
      edgeReq:
        id: []
        type: 10002
        xfname: Bvid,Evid
        obfname: "ctime"
      edgeAPI:
        get:
          api: re
          dataIn: PatientSummary.apiRequest.emailEdge.edgeReq
          dataOut: PatientSummary.apiRequest.emailEdge.edgeResp
        reGet:
          api: re
          dataIn: PatientSummary.apiRequest.emailEdge.edgeReq
          dataOut: PatientSummary.apiRequest.emailEdge.reEdgeResp

    # 邀请医生邮件
    inviteEmail:
      docStoreIn:
        type: 1281
        #邮件所挂载的edge(是10002) 默认挂在 rootNotebookID 10000，当点击send的时候再修改为 10002
        eid: .Global.rootNotebookID
        name:
          data:
            content: ""
            receiverName: ""
            senderName: ""
            senderAvatarId: ""
            appointmentId: ""
          title: ""
          user: ""
      docStoreRes: ""
      docStoreReq:
        type: 1281
        #邮件所挂载的edge(是10002) 默认挂在 rootNotebookID 10000，当点击send的时候再修改为 10002
        eid: .Global.rootNotebookID
        name:
          data:
            content: ""
            receiverName: ""
            senderName: ""
            senderAvatarId: ""
            appointmentId: ""
          title: ""
          user: ""
      docAPI:
        store:
          api: cd
          dataIn: PatientSummary.apiRequest.inviteEmail.docStoreReq
          dataOut: PatientSummary.apiRequest.inviteEmail.docStoreRes
    inviteEmailTag:
      docStoreRes: ""
      docStoreReq:
        eid: .Global.rootNotebookID
        reid: ""
        type: .DocType.MailTypeTag
        tage: 1
      docAPI:
        store:
          api: cd
          dataIn: PatientSummary.apiRequest.inviteEmailTag.docStoreReq
          dataOut: PatientSummary.apiRequest.inviteEmailTag.docStoreRes
    # 10002 好友边的 patient doc
    profileFriend:
      docResp: ""
      docReq:
        ObjType: 8
        ids: []
        xfname: (bvid,evid)|(evid,bvid)
        sCondition: "E.type=10002 AND D.type = 102401"
        obfname: "ctime"
        _nonce: .Global._nonce
      docStoreResp: ""
      docStoreReq: ""
      docAPI:
        store:
          api: cd
          dataIn: PatientSummary.apiRequest.profileFriend.docStoreReq
          dataOut: PatientSummary.apiRequest.profileFriend.docStoreResp
        get:
          api: rd
          dataIn: PatientSummary.apiRequest.profileFriend.docReq
          dataOut: PatientSummary.apiRequest.profileFriend.docResp

    # hashTag 
    hashTag:
      docQueryResp: ""
      # 10002
      docQueryReq:
        id: ""
        xfname: reid
        type: .DocType.HashTag
        _nonce: =.Global._nonce
        obfname: mtime
        maxcount: 1
      docReGetResp: ""
      # 40000
      docReGetReq:
        id: ""
        xfname: reid
        type: .DocType.HashTag
        _nonce: =.Global._nonce
        obfname: mtime
        maxcount: 1
      docStoreResp: ""
      docStoreReq:
        type: .DocType.HashTag
        reid: ""
        eid: ""
        name:
          data:
            hashFields:
              - name
              - mtime
              - type
            hashCode: ""
            hashTime: ""
      docAPI:
        get:
          api: rd
          dataIn: PatientSummary.apiRequest.hashTag.docQueryReq
          dataOut: PatientSummary.apiRequest.hashTag.docQueryResp
        reGet:
          api: rd
          dataIn: PatientSummary.apiRequest.hashTag.docReGetReq
          dataOut: PatientSummary.apiRequest.hashTag.docReGetResp
        store:
          api: cd
          dataIn: PatientSummary.apiRequest.hashTag.docStoreReq
          dataOut: PatientSummary.apiRequest.hashTag.docStoreResp

    # 结束会议
    finishMeeting:
      docResp: ""
      document:
        type: "10496"
        tage: "256"
        eid: ""
        reid: ""
      docAPI:
        store:
          api: cd
          dataIn: PatientSummary.apiRequest.finishMeeting.document
          dataOut: PatientSummary.apiRequest.finishMeeting.docResp
    # 取消会议建立的文档，带cancel的信息
    cancelMeetingDoc:
      docIn:
        type: 166401
        eid:
        reid:
        name:
          data:
            role: ""
            reason: ""
      docStoreResp: ""
      docAPI:
        store:
          api: cd
          dataIn: PatientSummary.apiRequest.cancelMeetingDoc.docIn
          dataOut: PatientSummary.apiRequest.cancelMeetingDoc.docStoreResp
  # 获取provider list
  providerList:
    list: ""
    edge:
      ObjType: 12
      type: .DocType.DoctorProfile
      id: .Global.currentFacility.id
      xfname: E.bvid|E.evid
      sCondition: E.type=10002 AND E.tage=1 AND E.subtype&0xf0000=0x30000
      maxcount: "10000"
      _nonce: =.Global._nonce
    docAPI:
      get:
        api: rd
        dataOut: providerList.list
        dataIn: providerList.edge
  deleteMeeting:
    #删除当前房间
    response:
    edge:
      ..formData.currentAppointment: ""
      id: ""
      bvid: .Global.currentFacility.id
      refid: ..formData.currentAppointment.id
      evid: ""
      subtype: 7
    edgeAPI:
      store:
        api: ce
        dataIn: deleteMeeting.edge
        dataOut: deleteMeeting.response
  participants: ""
  info: ""
  patientPage: "VisitQuestionnaire"
  inMeeting:
    # 同意预约后，正在开会的40000那条边（subtype为6或者100）
    edgeResp: ""
    edge:
      id: .Global.formData.patientHistoryInfo.id
      xfname: "id"
      obfname: "ctime"
      _nonce: =.Global._nonce
      maxcount: "100"
      type: 40000
    edgeAPI:
      get:
        api: re
        dataIn: inMeeting.edge
        dataOut: PatientSummary.inMeeting.edgeResp
  profile:
    docResponse: ""
    docIn:
      # ids: []
      id: .Global.formData.appointment.id
      xfname: eid
      type: .DocType.PatientProfile #  type: "257"
      obfname: "mtime"
      ObjType: 8
      # sCondition: "E.type=10002 AND E.subtype=131072"
      maxcount: "1"
      _nonce: =.Global._nonce
    docAPI:
      get:
        .DocAPI.get: ""
        api: rd
        dataIn: profile.docIn
        dataOut: PatientSummary.profile.docResponse
  patientName: ""
  # pagePath: VisitQuestionnaire
  infor:
    - img: remoteHealth0.svg
      title: Vital Signs
      bgc: "0xf0f6fc"
      pageName: VitalSigns
    - img: patientChart.svg
      title: Patient Chart
      bgc: "0xffffff"
      pageName: PatientChart
    - img: providerNotes.svg
      title: Provider Notes
      bgc: "0xffffff"
      pageName: ProviderNotes
    - img: medicalRecords.svg
      title: Medical Documents
      bgc: "0xffffff"
      pageName: MedicalRecords
    - img: paymentInMeeting.svg
      title: Payment
      bgc: "0xffffff"
      pageName: Payment

  # 获取Availability，可用时间的        
  schedule:
    scheduleList:
      edge: []
    get:
      api: re
      dataIn: PatientSummary.schedule.edge
      dataOut: PatientSummary.schedule.scheduleList
    edge:
      type: 40000
      id: []
      sCondition: PatientSummary.formData.scheduleScondition
      xfname: "evid,bvid"
      maxcount: "1000"
      obfname: "stime"
      asc: true
      _nonce: =.Global._nonce
  # 获取当前E2指向的E1，
  originSchedule:
    scheduleList:
      edge: []
    edgeIn:
      type: 40000
      id: ""
      xfname: "id"
      _nonce: =.Global._nonce
    edgeAPI:
      get:
        api: re
        dataIn: PatientSummary.originSchedule.edgeIn
        dataOut: PatientSummary.originSchedule.scheduleList
  components:
    - type: view
      style:
        width: '1'
        height: '1'
        margin: auto
      children:
        - type: view
          style:
            left: "0"
            width: "1"
            top: "0"
            height: "1"
            backgroundColor: "0x00000033"
            zIndex: "10"
            display: ..formData.judgeRequiredForm
          children:
            - .BaseJudgeInnerView:
              style:
                height: "0.23"
              children:
                - type: view
                  style:
                    height: "0.16"
                    width: "0.32"
                    border:
                      style: "3"
                    borderWidth: "1"
                    borderColor: "0xffffff00"
                    borderRadius: ""
                  children:
                    - type: label
                      text: Patient forms are required, please contact patient to complete.
                      dataKey:
                      style:
                        marginTop: "0.03"
                        left: "0.035"
                        width: "0.25"
                        fontSize: .Nfont.nf4
                        fontFamily: "Arial"
                        color: "0x333333"
                        fontWeight: "500"
                        lineHeight: "1.4"
                    - type: view
                      style:
                        marginTop: "0.005"
                        left: "0.035"
                        width: "0.25"
                      children:
                        - type: label
                          text: "Patient name:"
                          dataKey:
                          style:
                            display: inline-block
                            lineHeight: "1.7"
                            verticalAlign: middle
                            fontSize: .Nfont.nf4
                            fontFamily: "Arial"
                            color: "0x666666"
                            fontWeight:
                        - type: label
                          dataKey: formData.currentAppointment.name.patientName
                          style:
                            marginLeft: "0.005"
                            display: inline-block
                            lineHeight: "1.7"
                            verticalAlign: middle
                            fontSize: .Nfont.nf4
                            fontFamily: "Arial"
                            color: "0x333333"
                            fontWeight: "600"
                    - type: view
                      style:
                        left: "0.035"
                        width: "0.25"
                      children:
                        - type: label
                          text: "Phone #"
                          dataKey:
                          style:
                            display: inline-block
                            lineHeight: "1.7"
                            verticalAlign: middle
                            fontSize: .Nfont.nf4
                            fontFamily: "Arial"
                            color: "0x666666"
                            fontWeight:
                        - type: label
                          dataKey: formData.currentAppointment.name.patientPhoneNumber
                          style:
                            marginLeft: "0.005"
                            display: inline-block
                            lineHeight: "1.7"
                            verticalAlign: middle
                            fontSize: .Nfont.nf4
                            fontFamily: "Arial"
                            color: "0x333333"
                            fontWeight: "600"
                - .BaseJudgeButtonView:
                  style:
                    marginTop: "0"
                  children:
                    - type: label
                      text: OK
                      onClick:
                        - actionType: builtIn
                          funcName: goBack
                          reload: true
                      dataKey:
                      style:
                        textDecoration: underline
                        color: "0x005795"
                        fontSize: .Nfont.nf4
                        fontFamily: "Arial"
                        fontWeight: "600"
                        width: "0.32"
                        height: "0.07"
                        textAlign:
                          x: center
                          y: center
        - .SideMenuBar:
          children:
            - .aitLogo:
            - .MenuBar:
        - .TopBar:
        - .BodyView:
          children:
            - .AppointmentLobby:
              style:
                width: "0.18"
            - .GotoBack:
              onClick:
                - actionType: builtIn
                  funcName: goBack
                  reload: true
            - type: view
              style:
                width: "0.824"
                top: "0.035"
              children:
                - type: view
                  style:
                    left: "0.008"
                    width: "0.824"
                    height: "0.15"
                    top: "0.06"
                    border:
                      style: "5"
                    backgroundColor: "0xffffff"
                  children:
                    - type: image
                      path: patientDefault.svg
                      path=func: .builtIn.utils.prepareDocToPath
                      dataKey: profile.docResponse.doc.0.name.data.basicInfo.avatar
                      style:
                        left: "0.03"
                        width: "0.06"
                        top: "0.027"
                        height: "0.1"
                    - type: view
                      style:
                        left: "0.11"
                        width: "0.2"
                        top: "0"
                      children:
                        - .PatientHistoryTextNewUI:
                          dataKey: info
                          style:
                            fontWeight: "600"
                            fontSize: "1.4vw"
                            color: "#005795"
                            marginTop: "0.008"
                            textDecoration: underline
                            width: "auto"
                          onClick:
                            - actionType: evalObject
                              object:
                                - .Global.formData.patientId@: =..formData.patientId
                                - .Global.formData.patientInfo@: =..profile.docResponse.doc.0
                                - .Global.formData.judgeEditProfileEdge@: "40000"
                            - goto: PatientProfile
                        - type: view
                          style:
                            marginTop: "0.05"
                          children:
                            - type: label
                              text: "User Name: "
                              dataKey:
                              style:
                                fontSize: .Nfont.nf2
                                fontWeight: "500"
                                display: inline-block
                            - type: label
                              dataKey: profile.docResponse.doc.0.name.data.basicInfo.userName
                              style:
                                marginLeft: "0.01"
                                top: "0"
                                width: "0.21"
                                fontSize: .Nfont.nf2
                                display: inline-block
                                height: "auto"

                        - type: view
                          style:
                            marginTop: "0"
                          children:
                            - type: label
                              text: "DOB: "
                              style:
                                fontSize: .Nfont.nf2
                                fontWeight: "500"
                                display: inline-block
                            - type: label
                              dataKey: profile.docResponse.doc.0.name.data.basicInfo.dateOfBirth
                              style:
                                marginLeft: "0.01"
                                top: "0"
                                width: "0.21"
                                display: inline-block
                                fontSize: .Nfont.nf2
                                height: "auto"
                        - type: view
                          style:
                            marginTop: "0"
                          children:
                            - type: label
                              text: "Phone #: "
                              dataKey:
                              style:
                                display: inline-block
                                fontSize: .Nfont.nf2
                                fontWeight: "500"
                            - type: label
                              dataKey: profile.docResponse.doc.0.name.data.basicInfo.phone
                              style:
                                marginLeft: "0.01"
                                top: "0"
                                display: inline-block
                                width: "0.21"
                                fontSize: .Nfont.nf2
                                height: "auto"
                        - type: view
                          style:
                            marginTop: "0"
                          children:
                            - type: label
                              text: "Address: "
                              style:
                                display: inline-block
                                fontSize: .Nfont.nf2
                                fontWeight: "500"
                            - type: label
                              dataKey: profile.docResponse.doc.0.name.data.contactInfo.address.fullAddress
                              style:
                                marginLeft: "0.01"
                                top: "0"
                                display: inline-block
                                width: "0.23"
                                fontSize: .Nfont.nf2
                                height: "auto"
                    # - type: view
                    #   viewTag: makeBtnTag
                    #   children: 
                    #     - type: button
                    #       text: "Make Appointment"
                    #       style:
                    #         left: "0.7"
                    #         top: "0.05"
                    #         width: "0.1" 
                    #         height: "0.04" 
                    #         backgroundColor: "0x1263a8"
                    #         color: "0xffffff"
                    #         fontSize: .Nfont.nf2
                    #         fontFamily: "Poppins"
                    #         border: 
                    #           style: '5'
                    #         borderRadius: "5"
                    #         textAlign:
                    #           x: center
                    #           y: center
                    #       onClick:
                    - type: view
                      viewTag: calAndChangeBtnTag
                      style:
                        left: "0.59"
                        isHidden: ..formData.isHiddenCalAndChange
                        top: "0.05"
                        width: "0.21"
                        height: "0.04"
                      children:
                        - type: button
                          text: Cancel Appointment
                          onClick:
                            - actionType: evalObject
                              object:
                                - if:
                                    - =.builtIn.number.typeIsValid:
                                        dataIn:
                                          docType: =..formData.currentAppointment.tage
                                          localArr: [ 7 ]
                                          binaryArr: [ 1 ]
                                    - actionType: popUp
                                      popUpView: warningView
                                      wait: true
                                    - continue
                                - if:
                                    - =.builtIn.number.typeIsValid:
                                        dataIn:
                                          docType: =..formData.currentAppointment.tage
                                          localArr: [ 8 ]
                                          binaryArr: [ 1 ]
                                    - actionType: popUp
                                      popUpView: warningView
                                      wait: true
                                    - continue
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: calAndChangeBtnTag
                            - actionType: popUp
                              popUpView: cancelAppointmentTag
                            # - actionType: builtIn
                            #   funcName: goBack
                            #   reload: true
                            # - actionType: evalObject
                            #   object: 
                            #     - .Global.formData.patientHistoryInfo@: "1"
                            # - actionType: updateObject
                            #   dataKey: Global.formData.patientHistoryInfo
                            #   dataObject: []
                          style:
                            width: "0.1"
                            height: "0.04"
                            backgroundColor: "0xd50000"
                            color: "0xffffff"
                            fontSize: .Nfont.nf2
                            display: inline-block
                            fontFamily: "Poppins"
                            border:
                              style: '5'
                            borderRadius: "5"
                        - type: button
                          text: Change Appointment
                          style:
                            width: "0.1"
                            height: "0.04"
                            backgroundColor: "0x1263a8"
                            display: inline-block
                            left: "0.01"
                            color: "0xffffff"
                            fontSize: .Nfont.nf2
                            fontFamily: "Poppins"
                            border:
                              style: '5'
                            borderRadius: "5"
                            # isHidden: ..inMeetingEdgeFlag
                          onClick:
                            - actionType: evalObject
                              object:
                                - if:
                                    - =.builtIn.number.typeIsValid:
                                        dataIn:
                                          docType: =..formData.currentAppointment.tage
                                          localArr: [ 7 ]
                                          binaryArr: [ 1 ]
                                    - actionType: popUp
                                      popUpView: warningView
                                      wait: true
                                    - continue
                                - if:
                                    - =.builtIn.number.typeIsValid:
                                        dataIn:
                                          docType: =..formData.currentAppointment.tage
                                          localArr: [ 8 ]
                                          binaryArr: [ 1 ]
                                    - actionType: popUp
                                      popUpView: warningView
                                      wait: true
                                    - continue

                                # 获取前一天的时间戳
                                - =.builtIn.date.getTime:
                                    dataIn:
                                    dataOut: PatientSummary.formData.nowTimeStamp # 用于检查选择前一天的时间进行提示                                                
                                # 获取原来的预约
                                - ..originSchedule.edgeIn.id@: =..formData.currentAppointment.refid
                                - =..originSchedule.edgeAPI.get: ""
                                - ..formData.currentSubtype@: =..originSchedule.scheduleList.edge.0.subtype
                                # 获取原来预约的subtype用于查询所有的E1
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..originSchedule.scheduleList.edge.0.subtype
                                          string2: "196617"
                                    - ..formData.currentSubtype@: "196609"
                                    - continue
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..originSchedule.scheduleList.edge.0.subtype
                                          string2: "131081"
                                    - ..formData.currentSubtype@: "131073"
                                    - continue
                                # 获取当前时间的unix时间戳
                                - =.builtIn.date.getNowLocalUnixTime:
                                    dataIn: ""
                                    dataOut: PatientSummary.formData.currentLocalTime
                                # 设置可预约时间的scondition
                                - =.builtIn.string.concat:
                                    dataIn:
                                      - "(etime>"
                                      - =..formData.currentLocalTime
                                      - " OR "
                                      - "stime>="
                                      - =..formData.currentLocalTime
                                      - ")"
                                      - " AND "
                                      - "subtype="
                                      - =..formData.currentSubtype
                                    dataOut: PatientSummary.formData.availScheduleScondition
                                - ..apiRequest.getFirstAvail.edge.sCondition@: =.formData.availScheduleScondition
                                # 添加id
                                - ..apiRequest.getFirstAvail.edge.id.0@: =..originSchedule.scheduleList.edge.0.evid
                                - ..apiRequest.getFirstAvail.edge.id.1@: =..originSchedule.scheduleList.edge.0.bvid
                                # 获取原来预约的bvid,evid用于查询所有的E1即当前的Availability
                                - ..schedule.edge.id.0@: =..originSchedule.scheduleList.edge.0.evid
                                - ..schedule.edge.id.1@: =..originSchedule.scheduleList.edge.0.bvid
                                - =..apiRequest.getFirstAvail.edgeAPI.get: ""
                                - if:
                                    - =..apiRequest.getFirstAvail.response.edge.0.id
                                    - actionType: evalObject
                                      object:
                                        # 获取最近可预约时间，刷新BaseDate和calendar         
                                        - =.builtIn.date.stampToDay:
                                            dataIn:
                                              timeStamp: =..apiRequest.getFirstAvail.response.edge.0.stime
                                            dataOut: PatientSummary.formData.adjacentEdgeTime
                                        - .BaseDate.calendarDate.year@: =.PatientSummary.formData.adjacentEdgeTime.year
                                        - .BaseDate.calendarDate.month@: =.PatientSummary.formData.adjacentEdgeTime.month
                                        - .BaseDate.calendarDate.day@: =.PatientSummary.formData.adjacentEdgeTime.day
                                    - continue
                                - =.builtIn.date.ShowDateByNumber:
                                    dataIn:
                                      year: =.BaseDate.calendarDate.year
                                      month: =.BaseDate.calendarDate.month
                                      day: =.BaseDate.calendarDate.day
                                      formatType: "Y-M-D"
                                    dataOut: BaseDate.calendarDate.todayDate
                                - =.builtIn.date.miniWeeklyCalendarArray:
                                    dataIn:
                                      year: =.BaseDate.calendarDate.year
                                      month: =.BaseDate.calendarDate.month
                                      today: =.BaseDate.calendarDate.day
                                      markDay: =.BaseDate.calendarDate.day
                                      color: "0x000000"
                                      backgroundColor: "0xFFFFFF6f"
                                      todayColor: "0xffffff"
                                      todayBackgroundColor: "0x2988E6"
                                    dataOut: BaseDate.calendarDate.minidayLable
                                - =.builtIn.date.transformMonth:
                                    dataIn:
                                      month: =.BaseDate.calendarDate.month
                                    dataOut: BaseDate.calendarDate.monthName
                                - =.builtIn.date.getTimeStampOfDate:
                                    dataIn:
                                      date: =.BaseDate.calendarDate.todayDate
                                    dataOut: BaseDate.calendarDate.todayStamp
                                - =.builtIn.string.concat:
                                    dataIn:
                                      - "(stime<"
                                      - =.BaseDate.calendarDate.todayStamp.start
                                      - " AND "
                                      - "etime>"
                                      - =.BaseDate.calendarDate.todayStamp.start
                                      - " OR "
                                      - "stime>"
                                      - =.BaseDate.calendarDate.todayStamp.start
                                      - " AND "
                                      - "etime<"
                                      - =.BaseDate.calendarDate.todayStamp.end
                                      - " OR "
                                      - "stime<"
                                      - =.BaseDate.calendarDate.todayStamp.end
                                      - " AND "
                                      - "etime>"
                                      - =.BaseDate.calendarDate.todayStamp.end
                                      - ")"
                                      - " AND "
                                      - "subtype="
                                      - =..formData.currentSubtype
                                    dataOut: PatientSummary.formData.scheduleScondition
                            - actionType: evalObject
                              object:
                                - ..schedule.edge.sCondition@: =..formData.scheduleScondition
                                - .BaseDate.schedule.scheduleList.edge@: []
                            - actionType: evalObject
                              object:
                                - =..schedule.get: ""
                                - ..schedule.edge.id@: []
                            - actionType: evalObject
                              object:
                                - =.builtIn.date.splitTime:
                                    dataIn:
                                      object2: =..schedule.scheduleList.edge
                                      timeSlot: =..formData.duration
                                      year: =.BaseDate.calendarDate.year
                                      month: =.BaseDate.calendarDate.month
                                      day: =.BaseDate.calendarDate.day
                                      isSplitCurrent: true
                                    dataOut: PatientSummary.formData.splitTime
                                - =.builtIn.object.setObjectKey:
                                    dataIn:
                                      objectArr: =..formData.splitTime
                                      key: fontColor
                                      value: "0x4b4b4b"
                                    dataOut: PatientSummary.formData.splitTime
                                - =.builtIn.object.setObjectKey:
                                    dataIn:
                                      objectArr: =..formData.splitTime
                                      key: borColor
                                      value: "0xebebeb"
                                    dataOut: PatientSummary.formData.splitTime
                                - ..formData.nextBtnColor@: "0xd3dde9"
                            - actionType: evalObject
                              object:
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..formData.currentAppointment.name.visitType
                                          string2: "Telemedicine"
                                    - actionType: builtIn
                                      funcName: hide
                                      viewTag: addressView
                                    - actionType: builtIn
                                      funcName: show
                                      viewTag: addressView
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: btnView
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: appointmentChangeTag
                            - actionType: popUp
                              popUpView: appointmentChangeTag

                    - type: view
                      viewTag: finishBtnTag
                      style:
                        isHidden: ..formData.isStartMeeting
                      children:
                        - type: button
                          text: "Finish Appointment"
                          style:
                            left: "0.48"
                            top: "0.05"
                            width: "0.1"
                            height: "0.04"
                            backgroundColor: "0x2fb355"
                            color: "0xffffff"
                            fontSize: .Nfont.nf2
                            fontFamily: "Poppins"
                            border:
                              style: '5'
                            borderRadius: "5"
                            textAlign:
                              x: center
                              y: center
                          onClick:
                            - actionType: evalObject
                              object:
                                - ..apiRequest.finishMeeting.document.eid@: =.Global.formData.meetingDocEid
                                - ..apiRequest.finishMeeting.document.reid@: =.Global.formData.meetingDocReid
                                - =..apiRequest.finishMeeting.docAPI.store: ""
                            - actionType: popUp
                              popUpView: finishSuccessTag

                    - type: view
                      viewTag: appointmentStatusTag
                      style:
                        height: auto
                        width: '0.15'
                        top: "0.11"
                        left: "0.66"
                        display: flex
                        justifyContent: flex-start
                        isHidden: ..formData.paymentStatusIf
                      children:
                        - type: label
                          text: "Current Balance:"
                          dataKey:
                          style:
                            fontSize: .Nfont.nf4
                            fontWeight: "600"
                            marginRight: "0.01"
                        - type: label
                          dataKey: formData.meetingStatus
                          text=func: .builtIn.string.dollarFormat
                          style:
                            fontSize: .Nfont.nf4
                            fontWeight: "700"
                            color: ..formData.paymentStatusColor

                - type: view
                  style:
                    left: "0.008"
                    width: "0.824"
                    height: "0.662"
                    top: "0.21"
                    border:
                      style: "5"
                    backgroundColor: "0xffffff"
                  children:
                    - type: view
                      style:
                        left: "0"
                        width: "0.38"
                        height: "0.64"
                        top: "0"
                        border:
                          style: "5"
                        borderRadius: "5"
                        backgroundColor: "0xffffff"
                      children:
                        - type: view
                          style:
                            width: "0.35"
                            height: "0.035"
                            backgroundColor: "0xeff0f2"
                            borderRadius: "5"
                            marginTop: "0.01"
                            left: '0.03'
                            display: flex
                            justifyContent: space-between
                            alignItems: center
                          children:
                            - .PatientSummaryTitleLabel: ""
                              text: "Appointment Info"
                              style:
                                marginTop: "0"
                                left: '0'
                                width: auto

                        - type: view
                          viewTag: appointmentInfoTag
                          style:
                            left: "0.03"
                            width: "0.35"
                            marginTop: "0.01"
                            height: "auto"
                          children:
                            - type: view
                              style:
                                width: "0.34"
                                display: flex
                                justifyContent: space-between
                                alignItems: center
                              children:
                                - .PatientSummaryTitleNewUI:
                                  text: Provider Name
                                  style:
                                    left: "0.012"
                                - .PatientSummaryTextNewUI:
                                  style:
                                    textIndent: "0px"
                                    display: flex
                                    justifyContent: flex-end
                                    textDecoration: underline
                                    color: "#005795"
                                    borderBottom: "#005795"
                                  dataKey: formData.currentAppointment.name.providerName
                                  onClick:
                                    - actionType: popUp
                                      popUpView: providerProfile

                            - type: view
                              style:
                                width: "0.34"
                                display: flex
                                justifyContent: space-between
                                alignItems: center
                              children:
                                - .PatientSummaryTitleNewUI:
                                  text: Visit Type
                                  style:
                                    left: "0.012"
                                - .PatientSummaryTextNewUI:
                                  style:
                                    textIndent: "0px"
                                    width: "0.2"
                                    display: flex
                                    justifyContent: flex-end
                                  dataKey: formData.currentAppointment.name.visitType

                            - type: view
                              style:
                                width: "0.34"
                                display: flex
                                justifyContent: space-between
                                alignItems: center
                              children:
                                - .PatientSummaryTitleNewUI:
                                  text: Reason for Visit
                                  style:
                                    left: "0.012"
                                - .PatientSummaryTextNewUI:
                                  style:
                                    display: flex
                                    justifyContent: flex-end
                                  dataKey: formData.currentAppointment.name.visitReason
                            - type: view
                              style:
                                width: "0.34"
                                display: flex
                                justifyContent: space-between
                                alignItems: center
                              children:
                                - .PatientSummaryTitleNewUI:
                                  text: Date
                                  style:
                                    left: "0.012"
                                - .PatientSummaryTextNewUI:
                                  style:
                                    textIndent: "0px"
                                    display: flex
                                    justifyContent: flex-end
                                  text=func: .builtIn.string.formatUnixtimeL_en
                                  dataKey: formData.currentAppointment.stime
                            - type: view
                              style:
                                width: "0.34"
                                display: flex
                                justifyContent: space-between
                                alignItems: center
                              children:
                                - .PatientSummaryTitleNewUI:
                                  text: Time
                                  style:
                                    left: "0.012"
                                - .PatientSummaryTextNewUI:
                                  style:
                                    textIndent: "0px"
                                    display: flex
                                    justifyContent: flex-end
                                  text=func: .builtIn.date.ShowTimeSpan
                                  dataKey: formData.currentAppointment
                            - type: view
                              style:
                                width: "0.34"
                                display: flex
                                justifyContent: space-between
                                alignItems: center
                              children:
                                - .PatientSummaryTitleNewUI:
                                  text: Facility
                                  style:
                                    left: "0.012"
                                - .PatientSummaryTextNewUI:
                                  dataKey: Global.currentFacility.name.basicInfo.medicalFacilityName
                                  style:
                                    textIndent: "0px"
                                    display: flex
                                    justifyContent: flex-end

                            - type: view
                              style:
                                width: "0.34"
                                display: flex
                                justifyContent: space-between
                                alignItems: center
                              children:
                                - .PatientSummaryTitleNewUI:
                                  text: Financial Responsibility Form
                                  style:
                                    left: "0.012"
                                - .PatientSummaryTextNewUI:
                                  text: View/Edit
                                  style:
                                    textIndent: "0px"
                                    display: flex
                                    justifyContent: flex-end
                                    color: "0x005795"
                                    textDecoration: underline
                                  onClick:
                                    - actionType: evalObject
                                      object:
                                        # 设置返回的值
                                        - .Global.formData.reviewFromProvider@: true
                                        - .Global.formData.reviewFromMeeting@: true
                                        # 获取financialResponse数据
                                        - =..apiRequest.financialResponse.docAPI.get: ""
                                        # 获取 patient insurance profile
                                        - =..apiRequest.insurance.docAPI.get: ""
                                        - .Global.formData.financialResponsibility.name.data.billingInfo.isSignature@: ""
                                        - if:
                                            - =..apiRequest.financialResponse.docRes.doc.0
                                            - .Global.formData.financialResponsibility@: =..apiRequest.financialResponse.docRes.doc.0
                                            - continue
                                        - if:
                                            - =.builtIn.string.equal:
                                                dataIn:
                                                  string1: =.Global.formData.financialResponsibility.name.data.billingInfo.isSignature
                                                  string2: ""
                                            - goto: FinancialResponsibilityEditPage1
                                            - goto: FinancialResponsibilityReviewPage1

                            - type: view
                              style:
                                width: "0.34"
                                display: ..formData.isHiddenLocation
                              children:
                                - type: view
                                  style:
                                    width: "0.34"
                                    display: flex
                                    justifyContent: space-between
                                  children:
                                    - .PatientSummaryTitleNewUI:
                                      text: Location
                                      style:
                                        left: "0.012"
                                    - .PatientSummaryTextNewUI:
                                      style:
                                        width: "0.25"
                                        display: flex
                                        justifyContent: flex-end
                                      dataKey: formData.currentAppointment.name.locationName
                                - type: view
                                  style:
                                    width: "0.34"
                                    display: flex
                                    justifyContent: space-between
                                    # alignItems: center
                                    # isHidden: ..formData.isHiddenLocation
                                  children:
                                    - .PatientSummaryTitleNewUI:
                                      text: Address
                                      style:
                                        left: "0.012"
                                    - .PatientSummaryTextNewUI:
                                      style:
                                        width: "0.25"
                                        height: "0.045"
                                        display: flex
                                        justifyContent: flex-end
                                      dataKey: formData.currentAppointment.name.location

                        - type: view
                          style:
                            width: "0.35"
                            height: "0.035"
                            backgroundColor: "0xeff0f2"
                            borderRadius: "5"
                            marginTop: "0.01"
                            left: '0.03'
                            display: flex
                            justifyContent: space-between
                            alignItems: center
                          children:
                            - .PatientSummaryTitleLabel: ""
                              text: Medical Info
                              style:
                                marginTop: "0"
                                left: '0'
                                width: auto
                            - type: label
                              text: "Document History"
                              dataKey:
                              style:
                                color: "0x4094e7"
                                paddingRight: "0.015"
                                fontSize: .Nfont.nf0
                                textDecoration: underline
                        - type: view
                          style:
                            left: "0.03"
                            width: "0.35"
                            height: "0.115"
                            marginTop: "0.027"
                          children:
                            - type: list
                              contentType: listObject
                              listObject: ..infor
                              iteratorVar: itemObject
                              viewTag: medicalInfoView
                              style:
                                width: '0.35'
                                left: "0"
                                top: "0"
                                height: "0.085"
                                axis: horizontal
                                margin: '0'
                                justifyContent: space-between
                              children:
                                - type: listItem
                                  itemObject: ""
                                  viewTag: infoView
                                  onClick:
                                    - actionType: updateObject
                                      dataKey: Global.formData.providerNotesForm
                                      dataObject: {}
                                    - actionType: popUpDismiss
                                      popUpView: patientChartView
                                    - actionType: popUpDismiss
                                      popUpView: providerNotesView
                                    - actionType: popUpDismiss
                                      popUpView: medicalDocumentsView
                                    - actionType: popUpDismiss
                                      popUpView: paymentView
                                    - actionType: popUpDismiss
                                      popUpView: patientPayView
                                    - actionType: popUpDismiss
                                      popUpView: receiptView
                                    - emit:
                                        dataKey:
                                          var: itemObject
                                        actions:
                                          - =.builtIn.object.setProperty:
                                              dataIn:
                                                obj: =..infor
                                                label: "pageName"
                                                text: $var.pageName
                                                arr: [ "bgc" ]
                                                valueArr: [ "0xf0f6fc" ]
                                                errorArr: [ "0xffffff" ]
                                          - if:
                                              - =.builtIn.string.equal:
                                                  dataIn:
                                                    string1: $var.pageName
                                                    string2: "VitalSigns"
                                              - ..formData.judgeStatus@: "1"
                                              - continue
                                          - if:
                                              - =.builtIn.string.equal:
                                                  dataIn:
                                                    string1: $var.pageName
                                                    string2: "PatientChart"
                                              - ..formData.judgeStatus@: "2"
                                              - continue
                                          - if:
                                              - =.builtIn.string.equal:
                                                  dataIn:
                                                    string1: $var.pageName
                                                    string2: "ProviderNotes"
                                              - ..formData.judgeStatus@: "3"
                                              - continue
                                          - if:
                                              - =.builtIn.string.equal:
                                                  dataIn:
                                                    string1: $var.pageName
                                                    string2: "MedicalRecords"
                                              - ..formData.judgeStatus@: "4"
                                              - continue
                                          - if:
                                              - =.builtIn.string.equal:
                                                  dataIn:
                                                    string1: $var.pageName
                                                    string2: "Payment"
                                              - ..formData.judgeStatus@: "5"
                                              - continue
                                          - .Global.formData.patientPage@: $var.pageName
                                    - actionType: builtIn
                                      funcName: redraw
                                      viewTag: medicalInfoView
                                    - actionType: evalObject
                                      object:
                                        - if:
                                            - =.builtIn.string.equal:
                                                dataIn:
                                                  string1: =..formData.judgeStatus
                                                  string2: '1'
                                            - actionType: popUp
                                              popUpView: vitalSignsView
                                              wait: true
                                            - continue

                                        - if:
                                            - =.builtIn.string.equal:
                                                dataIn:
                                                  string1: =..formData.judgeStatus
                                                  string2: '2'
                                            - actionType: evalObject
                                              object:
                                                # 获取patientChart信息
                                                - =..apiRequest.patientChart.docAPI.get: ""
                                                - if:
                                                    - =..apiRequest.patientChart.docResp
                                                    # 获取medicalDocuments记录文档
                                                    - actionType: evalObject
                                                      object:
                                                        - ..formData.patientChart@: =..apiRequest.patientChart.docResp.doc.0
                                                        # - .Global.formData.patientChart@: =..apiRequest.patientChart.docResp.doc
                                                    - continue
                                                - actionType: builtIn
                                                  funcName: redraw
                                                  viewTag: patientChartView
                                            - continue
                                        - if:
                                            - =.builtIn.string.equal:
                                                dataIn:
                                                  string1: =..formData.judgeStatus
                                                  string2: '2'
                                            - actionType: popUp
                                              popUpView: patientChartView
                                              wait: true
                                            - continue
                                        # 点击provider note 判断Global中是否存入visit questionnaire中信息，没有则需要重新get                                        
                                        - if:
                                            - =.builtIn.string.equal:
                                                dataIn:
                                                  string1: =..formData.judgeStatus
                                                  string2: '3'
                                            - actionType: evalObject
                                              object:
                                                - if:
                                                    - =.Global.formData.visitQuestionnaire.id
                                                    - continue
                                                    - actionType: evalObject
                                                      object:
                                                        - =..apiRequest.visitQuestionnaire.docAPI.get: ""
                                                        - .Global.formData.visitQuestionnaire@: =..apiRequest.visitQuestionnaire.docResp.doc.0
                                            - continue
                                        # 点击provider note 判断Global中是否存入patient chart中信息，没有则需要重新get 
                                        - if:
                                            - =.builtIn.string.equal:
                                                dataIn:
                                                  string1: =..formData.judgeStatus
                                                  string2: '3'
                                            - actionType: evalObject
                                              object:
                                                - if:
                                                    - =.Global.formData.patientChart.id
                                                    - continue
                                                    - actionType: evalObject
                                                      object:
                                                        - =..apiRequest.patientChart.docAPI.get: ""
                                                        - .Global.formData.patientChart@: =..apiRequest.patientChart.docResp.doc.0
                                            - continue
                                        - if:
                                            - =.builtIn.string.equal:
                                                dataIn:
                                                  string1: =..formData.judgeStatus
                                                  string2: '3'
                                            - actionType: popUp
                                              popUpView: providerNotesView
                                              wait: true
                                            - contin ue
                                        - if:
                                            - =.builtIn.string.equal:
                                                dataIn:
                                                  string1: =..formData.judgeStatus
                                                  string2: '4'
                                            - actionType: evalObject
                                              object:
                                                - .Global._nonce@:
                                                    =.builtIn.math.random: ""
                                                # 判断是否是PatientSummaryRoom 进去的会议，用于文档的goback
                                                - .Global.formData.previewFromProvider@: true
                                                - =..apiRequest.medicalDocuments.docAPI.get: ""
                                                # 获取patient chart中信息
                                                - =..apiRequest.patientChart.docAPI.get: ""
                                                - if:
                                                    - =..apiRequest.patientChart.docResp
                                                    - .Global.formData.patientChart@: =..apiRequest.patientChart.docResp.doc.0
                                                    - continue
                                                # 获取financial responsibility form 中信息
                                                - =..apiRequest.financialResponse.docAPI.get: ""
                                                # 获取 patient insurance profile
                                                - =..apiRequest.insurance.docAPI.get: ""
                                                - if:
                                                    - =..apiRequest.financialResponse.docRes
                                                    - .Global.formData.financialResponsibility@: =..apiRequest.financialResponse.docRes.doc.0
                                                    - continue
                                                # 根据type类型，获取visit questionnaire中信息
                                                - =.builtIn.array.getObjectByArray:
                                                    dataIn:
                                                      array: =..apiRequest.medicalDocuments.docResp.doc
                                                      key: "type"
                                                      value: =.DocType.VisitQuestionnaire
                                                    dataOut: Global.formData.visitQuestionnaire
                                                # 有记录文档的话 title加上 Review跳转页面 
                                                - if:
                                                    - =..apiRequest.medicalDocuments.docResp.doc.0
                                                    - =.builtIn.array.setFormJumpPage:
                                                        dataIn:
                                                          objArry: =..apiRequest.medicalDocuments.docResp.doc
                                                          docFormObj: =..DocumentList
                                                        dataOut: PatientSummary.formData.medicalDocuments
                                                    - continue
                                                - if:
                                                    - =..apiRequest.medicalDocuments.docResp.doc.0
                                                    - =.builtIn.array.checkType:
                                                        dataIn:
                                                          objArr: =..formData.medicalDocuments
                                                          path: "type"
                                                        # dataOut: PatientSummary.formData.medicalDocuments
                                                    - continue
                                                - actionType: builtIn
                                                  funcName: redraw
                                                  viewTag: medicalDocumentsView
                                            - continue
                                        - if:
                                            - =.builtIn.string.equal:
                                                dataIn:
                                                  string1: =..formData.judgeStatus
                                                  string2: '4'
                                            - actionType: popUp
                                              popUpView: medicalDocumentsView
                                              wait: true
                                            - continue
                                        # - if: 
                                        #   - =.builtIn.string.equal:
                                        #       dataIn:
                                        #         string1: =..formData.judgeStatus
                                        #         string2: '5'
                                        #   - actionType: popUp
                                        #     popUpView: paymentView
                                        #     wait: true
                                        #   - continue
                                        - if:
                                            - =.builtIn.string.equal:
                                                dataIn:
                                                  string1: =..formData.judgeStatus
                                                  string2: '5'
                                            - actionType: evalObject
                                              object:
                                                - if:
                                                    - =.builtIn.string.equal:
                                                        dataIn:
                                                          string1: =..formData.paidSuccessfulArr.0.deat.state
                                                          string2: "COMPLETED"
                                                    - actionType: popUp
                                                      popUpView: receiptView
                                                      wait: true
                                                    - actionType: popUp
                                                      popUpView: paymentView
                                                      wait: true
                                            - continue
                                  style:
                                    width: '0.063'
                                    height: '0.085'
                                    backgroundColor: itemObject.bgc
                                    boxSizing: border-box
                                    boxShadow: "#dededf 0px 0px 10px"
                                    border:
                                      style: "5"
                                    borderRadius: "5"
                                    textAlign:
                                      x: center
                                  children:
                                    - type: image
                                      path:
                                        emit:
                                          dataKey:
                                            var: itemObject
                                          actions:
                                            - if:
                                                - true
                                                - $var.img
                                                - $var.img
                                      style:
                                        marginTop: "0.01"
                                        height: "0.04"
                                        width: "0.035"
                                    - type: label
                                      dataKey: itemObject.title
                                      style:
                                        left: "0"
                                        width: "0.063"
                                        height: "0.025"
                                        letterSpacing: "-1px"
                                        fontSize: .Nfont.nf0
                                        fontFamily: "Roboto"
                                        textAlign:
                                          x: center
                                          y: center
                            - type: view
                              style:
                                left: "0.287"
                                top: "0"
                                width: '0.063'
                                height: '0.085'
                                isHidden: ..formData.paymentIconIf
                                boxSizing: border-box
                                boxShadow: "#dededf 0px 0px 10px"
                                border:
                                  style: "5"
                                borderRadius: "5"
                                textAlign:
                                  x: center
                                backgroundColor: "0xffffff66"
                        - type: view
                          style:
                            width: "0.35"
                            height: "0.035"
                            backgroundColor: "0xeff0f2"
                            borderRadius: "5"
                            left: '0.03'
                            display: flex
                            justifyContent: space-between
                            alignItems: center
                          children:
                            - .PatientSummaryTitleLabel: ""
                              text: Participants
                              style:
                                marginTop: "0"
                                left: '0'
                                width: auto
                            - type: label
                              text: "+ Invite"
                              onClick:
                                - actionType: popUp
                                  popUpView: ProviderListTag
                              style:
                                color: "0x4094e7"
                                paddingRight: "0.015"
                                fontSize: .Nfont.nf0
                                textDecoration: underline

                        - type: scrollView

                          style:
                            left: "0.03"
                            width: "0.34"
                            marginTop: "0.01"
                            height: "0.1"
                          children:
                            - type: view
                              style:
                                width: "0.34"
                                display: flex
                                justifyContent: space-between
                                alignItems: center
                              children:
                                - .PatientSummaryTitleNewUI:
                                  text: Patient
                                  style:
                                    left: "0.012"
                                - .PatientSummaryTextNewUI:
                                  style:
                                    textIndent: "0px"
                                    display: flex
                                    justifyContent: flex-end
                                  dataKey: formData.currentAppointment.name.patientName
                            - type: view
                              style:
                                width: "0.34"
                                height: auto
                                display: ..formData.providerNameShowOrHide
                              children:
                                - type: view
                                  style:
                                    width: "0.34"
                                    display: flex
                                    justifyContent: space-between
                                    alignItems: center
                                  children:
                                    - .PatientSummaryTitleNewUI:
                                      text: Provider
                                      style:
                                        left: "0.012"
                                    - .PatientSummaryTextNewUI:
                                      style:
                                        textIndent: "0px"
                                        display: flex
                                        justifyContent: flex-end
                                      dataKey: formData.currentAppointment.name.providerName

                            - type: list
                              contentType: listObject
                              listObject: ..formData.participant
                              iteratorVar: itemObject
                              viewTag: participantsView
                              style:
                                width: '0.34'
                                margin: '0'
                                height: auto
                                # display: ..formData.judgeAppointmentBvid
                              children:
                                - type: listItem
                                  itemObject:
                                  style:
                                    width: "0.34"
                                    display: flex
                                    justifyContent: space-between
                                    alignItems: center
                                  children:
                                    - .PatientSummaryTitleNewUI:
                                      dataKey: itemObject.name.role
                                      style:
                                        left: "0.012"
                                    - .PatientSummaryTextNewUI:
                                      style:
                                        textIndent: "0px"
                                        display: flex
                                        justifyContent: flex-end
                                      dataKey: itemObject.name.roleName
                        # - type: view
                        #   style:
                        #     width: "0.35"
                        #     height: "0.035"
                        #     backgroundColor: "0xeff0f2"
                        #     borderRadius: "5"
                        #     marginTop: "0.01"
                        #     left: '0.03'
                        #     display: flex
                        #     justifyContent: space-between
                        #     alignItems: center
                        #   children:
                        #     - .PatientSummaryTitleLabel: ""
                        #       text: Previous Appointments
                        #       style: 
                        #         marginTop: "0"
                        #         left: '0'
                        #         width: auto
                        # provider notes
                    - type: popUp
                      viewTag: providerNotesView
                      style:
                        left: '0.41'
                        width: "0.39"
                        top: "0"
                        height: "0.64"
                        zIndex: "10"
                        border:
                          style: "3"
                        borderWidth: "1"
                        borderColor: "0xeff0f2"
                        borderRadius: "5"
                        boxSizing: border-box
                        backgroundColor: "0xeff0f2"
                      children:
                        - type: label
                          text: Provider Notes
                          dataKey:
                          style:
                            left: "0.013"
                            width: "0.36"
                            textIndent: "1em"
                            marginTop: "0.01"
                            fontSize: .Nfont.nf4
                            fontFamily: "Roboto"
                            fontWeight: "500"
                        - type: view
                          onClick:
                            - goto: AddMedicalDocument
                          style:
                            left: "0.013"
                            marginTop: "0.01"
                            width: "0.364"
                            height: "0.055"
                            backgroundColor: "0xffffff"
                            borderRadius: "5"
                            display: flex
                            justifyContent: center
                            alignItems: center
                          children:
                            - type: image
                              path: addCircleBlue.svg
                              style:
                                width: "0.01"
                            - type: label
                              text: Add Documents
                              dataKey:
                              style:
                                marginLeft: "0.01"
                                color: "0x2988e6"
                                fontSize: .Nfont.nf2
                                fontFamily: "Roboto"
                        - type: scrollView
                          style:
                            left: "0.013"
                            width: "0.364"
                            marginTop: "0.015"
                            height: "0.505"
                            border:
                              style: "5"
                            borderWidth: "1"
                            borderColor: "0xffffff"
                            borderRadius: "3"
                            boxSizing: border-box
                            backgroundColor: "0xffffff"
                          children:
                            - type: list
                              contentType: listObject
                              listObject: ..formDataTemp.notesList
                              iteratorVar: itemObject
                              style:
                                width: '0.334'
                                left: "0.015"
                                margin: '0'
                                height: auto
                              children:
                                - type: listItem
                                  onClick:
                                    - emit:
                                        dataKey:
                                          var: itemObject
                                        actions:
                                          - goto: $var.pageName

                                  itemObject:
                                  style:
                                    width: '0.334'
                                    height: '0.08'
                                    border:
                                      style: "2"
                                    borderWidth: "1"
                                    borderColor: "0xd4d4d4"
                                    marginTop: ''
                                    textAlign:
                                      y: center
                                  children:
                                    - type: label
                                      text:
                                      dataKey: itemObject.title
                                      style:
                                        width: "0.30"
                                        display: inline-block
                                    - type: image
                                      path: enterInLi.svg
                                      style:
                                        width: "0.007"
                                        display: inline-block
                    # Medical Documents
                    - type: popUp
                      viewTag: medicalDocumentsView
                      style:
                        left: '0.41'
                        width: "0.39"
                        top: "0"
                        height: "0.64"
                        zIndex: "10"
                        border:
                          style: "3"
                        borderWidth: "1"
                        borderColor: "0xeff0f2"
                        borderRadius: "5"
                        boxSizing: border-box
                        backgroundColor: "0xeff0f2"
                      children:
                        - type: view
                          style:
                            width: "0.364"
                            marginTop: "0.01"
                            left: "0.013"
                            display: inline-block
                            alignItems: center
                          children:
                            - type: label
                              text: Medical Document
                              dataKey:
                              style:
                                display: inline-block
                                width: "0.28"
                                left: "0.004"
                                fontSize: .Nfont.nf4
                                fontFamily: "Roboto"
                                fontWeight: "500"
                            - .MacroButton:
                            - type: view
                              onClick:
                                - goto: AddMedicalDocument
                              style:
                                display: inline-block
                                marginLeft: "0.015"
                              children:
                                - type: image
                                  path: addBlue.svg
                                  style:
                                    width: "0.00624"
                                    marginTop: "0.01"
                                    display: inline-block
                                - type: label
                                  text: Add
                                  style:
                                    marginTop: "0.005"
                                    marginLeft: "0.005"
                                    color: "0x2988e6"
                                    display: inline-block
                                    textDecoration: underline
                                    fontSize: .Nfont.nf1
                                    fontWeight: "600"
                        - type: scrollView
                          style:
                            left: "0.013"
                            width: "0.364"
                            marginTop: "0.015"
                            height: "0.56"
                            border:
                              style: "5"
                            borderWidth: "1"
                            borderColor: "0xffffff"
                            borderRadius: "3"
                            boxSizing: border-box
                            backgroundColor: "0xffffff"
                          children:
                            - type: list
                              contentType: listObject
                              listObject: ..formDataTemp.assignType
                              iteratorVar: itemObject
                              viewTag: assignTypeTag
                              style:
                                margin: '0'
                                width: "0.334"
                                left: "0.015"
                                marginTop: "0.015"
                                height: "0.04"
                                axis: horizontal
                                alignItems: center
                              children:
                                - type: listItem
                                  itemObject:
                                  style:
                                    height: '0.025'
                                    marginRight: "0.01"
                                    marginTop: ''
                                    backgroundColor: itemObject.backgroundColor
                                    border:
                                      style: 3
                                    borderColor: itemObject.borderColor
                                    borderRadius: "3"
                                    boxSizing: border-box
                                    color: itemObject.textColor
                                    textAlign:
                                      y: center
                                  onClick:
                                    - emit:
                                        dataKey:
                                          var: itemObject
                                        actions:
                                          - =.builtIn.object.setProperty:
                                              dataIn:
                                                obj: =..formDataTemp.assignType
                                                label: "text"
                                                text: $var.text
                                                arr: [ "borderColor" ]
                                                valueArr: $var.textColor
                                                errorArr: [ "0x00000000" ]
                                          - =.builtIn.array.setFormJumpPage:
                                              dataIn:
                                                objArry: =..apiRequest.medicalDocuments.docResp.doc
                                                docFormObj: =..DocumentList
                                              dataOut: PatientSummary.formData.medicalDoc
                                          - =.builtIn.array.filterByTag:
                                              dataIn:
                                                sourceDoc: =..formData.medicalDoc
                                                tagCategory: $var.tagCategory
                                                tagName: $var.value
                                              dataOut: PatientSummary.formData.medicalDocuments
                                          # - =.builtIn.array.concatArray:
                                          #     dataIn:
                                          #       array1: =..formData.docList
                                          #       array2: []
                                          #       sortby: ctime
                                          #       orders: desc
                                          #     dataOut: PatientSummary.formData.medicalDocuments
                                    - actionType: builtIn
                                      funcName: redraw
                                      viewTag: assignTypeTag
                                    - actionType: builtIn
                                      funcName: redraw
                                      viewTag: medicalDocumentsListTag
                                  children:
                                    - type: label
                                      text:
                                      dataKey: itemObject.text
                                      style:
                                        marginLeft: "0.005"
                                        marginRight: "0.005"
                                        fontSize: .Nfont.nf2
                            - type: list
                              contentType: listObject
                              listObject: ..formData.medicalDocuments
                              iteratorVar: itemObject
                              viewTag: medicalDocumentsListTag
                              style:
                                width: '0.334'
                                left: "0.015"
                                margin: '0'
                                height: auto
                              children:
                                - type: listItem
                                  onClick:
                                    - actionType: updateObject
                                      dataKey: Global.formData.medicalRecords
                                      dataObject: itemObject
                                    - emit:
                                        dataKey:
                                          var: itemObject
                                        actions:
                                          - .Global.formData.reviewFromProvider@: true
                                          - .Global.formData.reviewFromMeeting@: true
                                          - goto: $var.pageName
                                  itemObject:
                                  style:
                                    width: '0.334'
                                    height: '0.08'
                                    border:
                                      style: "2"
                                    borderWidth: "1"
                                    borderColor: "0xd4d4d4"
                                    marginTop: ''
                                    display: flex
                                    flexDirection: column
                                    justifyContent: center
                                  children:
                                    - type: view
                                      style:
                                        width: "0.334"
                                      children:
                                        - type: label
                                          text:
                                          dataKey: itemObject.name.title
                                          style:
                                            width: "0.30"
                                            display: inline-block
                                            fontSize: .Nfont.nf3
                                    - type: view
                                      style:
                                        marginLeft: "0.02"
                                        height: "2.5vh"
                                        width: "0.11"
                                        left: "0.203"
                                        top: "0.017"
                                        display: flex
                                        justifyContent: space-between
                                        alignItems: center
                                        overflow: hidden
                                      children:
                                        - type: label
                                          dataKey: itemObject.name.data.classTag.name
                                          style:
                                            height: "0.028"
                                            width: "0.06"
                                            color: itemObject.name.data.classTag.fontColor
                                            fontFamily: "Poppins"
                                            fontSize: .Nfont.nf0
                                            backgroundColor: itemObject.name.data.classTag.backgroundColor
                                            borderRadius: "5"
                                            textAlign:
                                              x: center
                                              y: center
                                        - type: label
                                          dataKey: itemObject.name.data.statusTag.name
                                          style:
                                            # display: itemObject.name.data.statusTag.display
                                            height: "0.028"
                                            width: "0.04"
                                            color: itemObject.name.data.statusTag.fontColor
                                            fontFamily: "Poppins"
                                            fontSize: .Nfont.nf0
                                            borderRadius: "5"
                                            backgroundColor: itemObject.name.data.statusTag.backgroundColor
                                            textAlign:
                                              x: center
                                              y: center

                                    - type: view
                                      style:
                                        marginTop: "0.005"
                                        width: "0.334"
                                        display: flex
                                        justifyContent: space-between
                                        alignItems: center
                                      children:
                                        - type: label
                                          dataKey: itemObject.name.user
                                          style:
                                            fontSize: .Nfont.nf2
                                        - type: label
                                          text=func: .builtIn.string.formatUnixtime_en
                                          dataKey: itemObject.ctime
                                          style:
                                            color: "0x666666"
                                            fontSize: .Nfont.nf1
                    # Vital Signs
                    - type: view
                      viewTag: vitalSignsView
                      style:
                        left: '0.41'
                        width: "0.39"
                        top: "0"
                        height: "0.64"
                        border:
                          style: "3"
                        borderWidth: "1"
                        borderColor: "0xeff0f2"
                        borderRadius: "5"
                        boxSizing: border-box
                        backgroundColor: "0xeff0f2"
                      children:
                        - type: label
                          text: Vital Signs
                          dataKey:
                          style:
                            left: "0.013"
                            width: "0.36"
                            textIndent: "1em"
                            marginTop: "0.01"
                            fontSize: .Nfont.nf4
                            fontFamily: "Roboto"
                            fontWeight: "500"
                        - type: scrollView
                          style:
                            left: "0.013"
                            width: "0.364"
                            marginTop: "0.015"
                            height: "0.565"
                            border:
                              style: "5"
                            borderWidth: "1"
                            borderColor: "0xffffff"
                            borderRadius: "3"
                            boxSizing: border-box
                            backgroundColor: "0xffffff"
                          children:
                            - type: list
                              contentType: listObject
                              listObject: =..formData.vitalSignList
                              iteratorVar: itemObject
                              style:
                                left: "0.017"
                                width: '0.33'
                                margin: '0'
                                marginTop: "0.01"
                                height: auto
                              children:
                                - type: listItem
                                  itemObject:
                                  style:
                                    width: '0.33'
                                    height: '0.065'
                                    left: '0'
                                    marginTop: ''
                                    border:
                                      style: "2"
                                    borderWidth: "1"
                                    borderColor: "0xdedede"
                                  children:
                                    - type: label
                                      dataKey: itemObject.label1
                                      style:
                                        left: "0"
                                        height: "0.035"
                                        top: "0.015"
                                        width: "0.085"
                                        fontSize: .Nfont.nf2
                                        fontFamily: "Arial"
                                        color: "0x333333"
                                        textAlign:
                                          y: center
                                    - type: textField
                                      placeholder: Enter here
                                      dataKey: itemObject.data1
                                      style:
                                        top: "0.015"
                                        left: "0.085"
                                        width: "0.055"
                                        height: "0.035"
                                        fontSize: .Nfont.nf3
                                        fontFamily: "Arial"
                                        color: "0x333333"
                                        boxSizing: border-box
                                        border:
                                          style: "3"
                                        borderWidth: "1"
                                        borderColor: "0xdedede"
                                        borderRadius: "2"
                                    - type: label
                                      dataKey: itemObject.unit1
                                      style:
                                        left: "0.145"
                                        width: "0.045"
                                        height: "0.035"
                                        top: "0.015"
                                        fontSize: .Nfont.nf1
                                        fontFamily: "Arial"
                                        color: "0x999999"
                                        textAlign:
                                          y: center
                                    - type: label
                                      dataKey: itemObject.label2
                                      style:
                                        left: "0.19"
                                        height: "0.035"
                                        top: "0.015"
                                        width: "0.06"
                                        fontSize: .Nfont.nf2
                                        fontFamily: "Arial"
                                        color: "0x333333"
                                        textAlign:
                                          y: center
                                    - type: textField
                                      placeholder: Enter here
                                      dataKey: itemObject.data2
                                      style:
                                        top: "0.015"
                                        left: "0.25"
                                        width: "0.055"
                                        height: "0.035"
                                        fontSize: .Nfont.nf3
                                        fontFamily: "Arial"
                                        color: "0x333333"
                                        boxSizing: border-box
                                        border:
                                          style: "3"
                                        borderWidth: "1"
                                        borderColor: "0xdedede"
                                        borderRadius: "2"
                                    - type: label
                                      dataKey: itemObject.unit2
                                      style:
                                        left: "0.31"
                                        width: "0.02"
                                        height: "0.035"
                                        top: "0.015"
                                        fontSize: .Nfont.nf1
                                        fontFamily: "Arial"
                                        color: "0x999999"
                                        textAlign:
                                          y: center
                            - type: button
                              text: Confirm
                              onClick:
                                - actionType: evalObject
                                  object:
                                    - ..apiRequest.vitalSign.document.name.data@: =..formData.vitalSignList
                                    - =..apiRequest.vitalSign.docAPI.store: ""
                                - actionType: popUp
                                  popUpView: vitalSignSuccessTag
                                  wait: 2000
                              style:
                                width: "0.1"
                                marginLeft: "0.132"
                                height: "0.04"
                                marginTop: "0.03"
                                color: "0xffffff"
                                fontSize: .Nfont.nf2
                                border:
                                  style: "3"
                                borderWidth: "1"
                                borderColor: "0x1263a8"
                                borderRadius: "5"
                                backgroundColor: "0x1263a8"
                                textAlign:
                                  x: center
                                  y: center
                    # Patient Chart
                    - type: popUp
                      viewTag: patientChartView
                      style:
                        left: '0.41'
                        width: "0.39"
                        top: "0"
                        height: "0.64"
                        zIndex: "10"
                        border:
                          style: "3"
                        borderWidth: "1"
                        borderColor: "0xeff0f2"
                        borderRadius: "5"
                        boxSizing: border-box
                        backgroundColor: "0xeff0f2"
                      children:
                        - type: label
                          text: Patient Chart
                          dataKey:
                          style:
                            left: "0.013"
                            width: "0.36"
                            textIndent: "1em"
                            marginTop: "0.01"
                            fontSize: .Nfont.nf4
                            fontFamily: "Roboto"
                            fontWeight: "500"
                        - type: scrollView
                          style:
                            left: "0.013"
                            width: "0.364"
                            marginTop: "0.015"
                            height: "0.565"
                            border:
                              style: "5"
                            borderWidth: "1"
                            borderColor: "0xffffff"
                            borderRadius: "3"
                            boxSizing: border-box
                            backgroundColor: "0xffffff"
                          children:
                            - .PatientChartTitle:
                              text: "General Information"
                            - type: view
                              style:
                                width: "0.34"
                                height: auto
                                left: "0.017"
                              children:
                                - .PatientChartShowLine:
                                  children:
                                    - .PatientChartShowTitle:
                                      text: First name
                                    - .PatientChartShowData:
                                      dataKey: formData.patientChart.name.data.generalInfo.firstName
                                - .PatientChartShowLine:
                                  children:
                                    - .PatientChartShowTitle:
                                      text: Middle name or initial
                                    - .PatientChartShowData:
                                      dataKey: formData.patientChart.name.data.generalInfo.middleName
                                - .PatientChartShowLine:
                                  children:
                                    - .PatientChartShowTitle:
                                      text: Last name
                                    - .PatientChartShowData:
                                      dataKey: formData.patientChart.name.data.generalInfo.lastName
                                - .PatientChartShowLine:
                                  children:
                                    - .PatientChartShowTitle:
                                      text: Preferred name
                                    - .PatientChartShowData:
                                      dataKey: formData.patientChart.name.data.generalInfo.preferredName
                                - .PatientChartShowLine:
                                  children:
                                    - .PatientChartShowTitle:
                                      text: Gender
                                    - .PatientChartShowData:
                                      dataKey: formData.patientChart.name.data.generalInfo.gender
                                - .PatientChartShowLine:
                                  children:
                                    - .PatientChartShowTitle:
                                      text: Date of birth
                                    - .PatientChartShowData:
                                      dataKey: formData.patientChart.name.data.generalInfo.dateOfBirth
                                - .PatientChartShowLine:
                                  children:
                                    - .PatientChartShowTitle:
                                      text: Occupation
                                    - .PatientChartShowData:
                                      dataKey: formData.patientChart.name.data.generalInfo.occupation
                                - .PatientChartShowLine:
                                  children:
                                    - .PatientChartShowTitle:
                                      text: Relationship status
                                    - .PatientChartShowData:
                                      dataKey: formData.patientChart.name.data.generalInfo.relationshipStatus
                                - .PatientChartShowLine:
                                  children:
                                    - .PatientChartShowTitle:
                                      text: Primary Care Physician
                                    - .PatientChartShowData:
                                      dataKey: formData.patientChart.name.data.generalInfo.primaryCarePhysician
                                - .PatientChartShowLine:
                                  children:
                                    - .PatientChartShowTitle:
                                      text: Primary Care clinic
                                    - .PatientChartShowData:
                                      dataKey: formData.patientChart.name.data.generalInfo.primaryCareClinic

                            - .PatientChartTitle:
                              text: Past Medical History
                            - .PatientChartListView:
                              children:
                                - type: list
                                  contentType: listObject
                                  listObject: ..formData.patientChart.name.data.pastMedicalHistory # to dataObject to enumerate the list
                                  iteratorVar: itemObject
                                  style:
                                    width: "0.32"
                                    height: "auto"
                                    left: "0.01"
                                    margin: "0"
                                  children:
                                    - type: listItem
                                      itemObject: ""
                                      style:
                                        width: "0.32"
                                        height: "0.03"
                                      children:
                                        - type: label
                                          text: '-'
                                          style:
                                            top: "0"
                                            width: "0.05"
                                            fontSize: .Nfont.nf2
                                        - type: label
                                          dataKey: itemObject
                                          style:
                                            marginLeft: "0.01"
                                            top: "0"
                                            width: "0.25"
                                            fontSize: .Nfont.nf2
                            - .PatientChartTitle:
                              text: "Allergies"
                            - type: view
                              style:
                                width: "0.34"
                                height: "0.03"
                                left: "0.017"
                                textAlign:
                                  y: center
                              children:
                                - type: label
                                  text: Allergen/Irritant
                                  style:
                                    fontSize: .Nfont.nf2
                                    fontWeight: "500"
                                    textAlign:
                                      x: center
                                    width: "0.17"
                                    display: inline-block
                                - type: label
                                  text: What happens
                                  style:
                                    fontSize: .Nfont.nf2
                                    fontWeight: "500"
                                    textAlign:
                                      x: center
                                    width: "0.17"
                                    display: inline-block
                            - .PatientChartListView:
                              children:
                                - type: list
                                  contentType: listObject
                                  listObject: ..formData.patientChart.name.data.allergies # to dataObject to enumerate the list
                                  iteratorVar: itemObject
                                  style:
                                    width: "0.34"
                                    height: "auto"
                                    left: "0"
                                    margin: "0"
                                  children:
                                    - type: listItem
                                      itemObject: ""
                                      style:
                                        width: "0.34"
                                        height: "0.03"
                                        left: "0"
                                      children:
                                        - type: label
                                          dataKey: itemObject.allergy
                                          style:
                                            fontSize: .Nfont.nf2
                                            textAlign:
                                              x: center
                                            width: "0.17"
                                            display: inline-block
                                        - type: label
                                          dataKey: itemObject.happen
                                          style:
                                            fontSize: .Nfont.nf2
                                            textAlign:
                                              x: center
                                            width: "0.17"
                                            display: inline-block
                            - .PatientChartTitle:
                              text: Current Medications
                            - type: view
                              style:
                                width: "0.34"
                                left: "0.017"
                                height: "0.03"
                                textAlign:
                                  y: center
                              children:
                                - type: label
                                  text: Name
                                  style:
                                    fontSize: .Nfont.nf2
                                    display: inline-block
                                    fontWeight: "500"
                                    textAlign:
                                      x: center
                                    width: "0.085"
                                - type: label
                                  text: Strength
                                  style:
                                    fontSize: .Nfont.nf2
                                    display: inline-block
                                    fontWeight: "500"
                                    textAlign:
                                      x: center
                                    width: "0.085"
                                - type: label
                                  text: Amount
                                  style:
                                    fontSize: .Nfont.nf2
                                    display: inline-block
                                    fontWeight: "500"
                                    textAlign:
                                      x: center
                                    width: "0.085"
                                - type: label
                                  text: Frequency
                                  style:
                                    fontSize: .Nfont.nf2
                                    display: inline-block
                                    fontWeight: "500"
                                    textAlign:
                                      x: center
                                    width: "0.085"
                            - .PatientChartListView:
                              children:
                                - type: list
                                  contentType: listObject
                                  listObject: ..formData.patientChart.name.data.currentMedications # to dataObject to enumerate the list
                                  iteratorVar: itemObject
                                  style:
                                    width: "0.34"
                                    height: "auto"
                                    left: "0"
                                  children:
                                    - type: listItem
                                      itemObject: ""
                                      style:
                                        width: "0.34"
                                        height: "0.03"
                                        left: "0"
                                      children:
                                        - type: label
                                          dataKey: itemObject.name
                                          style:
                                            fontSize: .Nfont.nf2
                                            display: inline-block
                                            textAlign:
                                              x: center
                                            width: "0.085"
                                        - type: label
                                          dataKey: itemObject.strength
                                          style:
                                            fontSize: .Nfont.nf2
                                            display: inline-block
                                            textAlign:
                                              x: center
                                            width: "0.085"
                                        - type: label
                                          dataKey: itemObject.amount
                                          style:
                                            fontSize: .Nfont.nf2
                                            display: inline-block
                                            textAlign:
                                              x: center
                                            width: "0.085"
                                        - type: label
                                          dataKey: itemObject.frequency
                                          style:
                                            fontSize: .Nfont.nf2
                                            display: inline-block
                                            textAlign:
                                              x: center
                                            width: "0.085"
                            - .PatientChartTitle:
                              text: Immunizations
                            - type: view
                              style:
                                width: "0.34"
                                left: "0.017"
                                height: "0.03"
                                textAlign:
                                  y: center
                              children:
                                - type: label
                                  text: Name
                                  style:
                                    fontSize: .Nfont.nf2
                                    display: inline-block
                                    fontWeight: "500"
                                    textAlign:
                                      x: center
                                    width: "0.085"
                                - type: label
                                  text: 1st Dose
                                  style:
                                    fontSize: .Nfont.nf2
                                    display: inline-block
                                    fontWeight: "500"
                                    textAlign:
                                      x: center
                                    width: "0.085"
                                - type: label
                                  text: 2st Dose
                                  style:
                                    fontSize: .Nfont.nf2
                                    display: inline-block
                                    fontWeight: "500"
                                    textAlign:
                                      x: center
                                    width: "0.085"
                                - type: label
                                  text: Recent
                                  style:
                                    fontSize: .Nfont.nf2
                                    display: inline-block
                                    fontWeight: "500"
                                    textAlign:
                                      x: center
                                    width: "0.085"
                            - .PatientChartListView:
                              children:
                                - type: list
                                  contentType: listObject
                                  listObject: ..formData.patientChart.name.data.immunizations # to dataObject to enumerate the list
                                  iteratorVar: itemObject
                                  style:
                                    width: "0.34"
                                    height: "auto"
                                    left: "0"
                                  children:
                                    - type: listItem
                                      itemObject: ""
                                      style:
                                        width: "0.34"
                                        height: "0.03"
                                        left: "0"
                                      children:
                                        - type: label
                                          dataKey: itemObject.name
                                          style:
                                            fontSize: .Nfont.nf2
                                            display: inline-block
                                            textAlign:
                                              x: center
                                            width: "0.085"
                                        - type: label
                                          dataKey: itemObject.firstDose
                                          style:
                                            fontSize: .Nfont.nf2
                                            display: inline-block
                                            textAlign:
                                              x: center
                                            width: "0.085"
                                        - type: label
                                          dataKey: itemObject.secondDose
                                          style:
                                            fontSize: .Nfont.nf2
                                            display: inline-block
                                            textAlign:
                                              x: center
                                            width: "0.085"
                                        - type: label
                                          dataKey: itemObject.mostRecent
                                          style:
                                            fontSize: .Nfont.nf2
                                            display: inline-block
                                            textAlign:
                                              x: center
                                            width: "0.085"
                            - .PatientChartTitle:
                              text: "Hospitalizations"
                            - type: view
                              style:
                                width: "0.34"
                                height: "0.03"
                                left: "0.017"
                                textAlign:
                                  y: center
                              children:
                                - type: label
                                  text: Date
                                  style:
                                    fontSize: .Nfont.nf2
                                    fontWeight: "500"
                                    textAlign:
                                      x: center
                                    width: "0.17"
                                    display: inline-block
                                - type: label
                                  text: Reason
                                  style:
                                    fontSize: .Nfont.nf2
                                    fontWeight: "500"
                                    textAlign:
                                      x: center
                                    width: "0.17"
                                    display: inline-block
                            - .PatientChartListView:
                              children:
                                - type: list
                                  contentType: listObject
                                  listObject: ..formData.patientChart.name.data.hospitalizations # to dataObject to enumerate the list
                                  iteratorVar: itemObject
                                  style:
                                    width: "0.34"
                                    height: "auto"
                                    left: "0"
                                    margin: "0"
                                  children:
                                    - type: listItem
                                      itemObject: ""
                                      style:
                                        width: "0.34"
                                        height: "0.03"
                                        left: "0"
                                      children:
                                        - type: label
                                          dataKey: itemObject.date
                                          style:
                                            fontSize: .Nfont.nf2
                                            textAlign:
                                              x: center
                                            width: "0.17"
                                            display: inline-block
                                        - type: label
                                          dataKey: itemObject.reason
                                          style:
                                            fontSize: .Nfont.nf2
                                            textAlign:
                                              x: center
                                            width: "0.17"
                                            display: inline-block
                            - .PatientChartTitle:
                              text: " Surgical History"
                            - type: view
                              style:
                                width: "0.34"
                                height: "0.03"
                                left: "0.017"
                                textAlign:
                                  y: center
                              children:
                                - type: label
                                  text: Date
                                  style:
                                    fontSize: .Nfont.nf2
                                    fontWeight: "500"
                                    textAlign:
                                      x: center
                                    width: "0.17"
                                    display: inline-block
                                - type: label
                                  text: Reason
                                  style:
                                    fontSize: .Nfont.nf2
                                    fontWeight: "500"
                                    textAlign:
                                      x: center
                                    width: "0.17"
                                    display: inline-block
                            - .PatientChartListView:
                              children:
                                - type: list
                                  contentType: listObject
                                  listObject: ..formData.patientChart.name.data.surgicalHistory # to dataObject to enumerate the list
                                  iteratorVar: itemObject
                                  style:
                                    width: "0.34"
                                    height: "auto"
                                    left: "0"
                                    margin: "0"
                                  children:
                                    - type: listItem
                                      itemObject: ""
                                      style:
                                        width: "0.34"
                                        height: "0.03"
                                        left: "0"
                                      children:
                                        - type: label
                                          dataKey: itemObject.date
                                          style:
                                            fontSize: .Nfont.nf2
                                            textAlign:
                                              x: center
                                            width: "0.17"
                                            display: inline-block
                                        - type: label
                                          dataKey: itemObject.reason
                                          style:
                                            fontSize: .Nfont.nf2
                                            textAlign:
                                              x: center
                                            width: "0.17"
                                            display: inline-block
                            - .PatientChartTitle:
                              text: Family History
                            - .PatientChartListView:
                              children:
                                - type: list
                                  contentType: listObject
                                  listObject: ..formData.patientChart.name.data.familyHistory # to dataObject to enumerate the list
                                  iteratorVar: itemObject
                                  style:
                                    width: "0.32"
                                    height: "auto"
                                    left: "0.01"
                                    margin: "0"
                                  children:
                                    - type: listItem
                                      itemObject: ""
                                      style:
                                        width: "0.32"
                                        height: "0.03"
                                      children:
                                        - type: label
                                          text: '-'
                                          style:
                                            top: "0"
                                            width: "0.05"
                                            fontSize: .Nfont.nf2
                                        - type: label
                                          dataKey: itemObject
                                          style:
                                            marginLeft: "0.01"
                                            top: "0"
                                            width: "0.25"
                                            fontSize: .Nfont.nf2
                            - .PatientChartTitle:
                              text: Obstetrical History
                            - .PatientChartView:
                              children:
                                - .PatientChartLittleTitle:
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.obstetricalHistory.pregnancy.currentlyPregnant
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: How many times have you been pregnant?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.obstetricalHistory.pregnancy.pregnantsTimes
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: How many children?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.obstetricalHistory.pregnancy.children
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: How many abortions?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.obstetricalHistory.pregnancy.abortionsTime
                                - .PatientChartLittleTitle:
                                  text: Menses
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: How often?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.obstetricalHistory.menses.howOften
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: For how many days?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.obstetricalHistory.menses.howlong
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: Do they occur every month?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.obstetricalHistory.menses.isEveryMonth
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: Heavy flow?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.obstetricalHistory.menses.isHeavyFlow
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: Any spotting or clots?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.obstetricalHistory.menses.spottingOrClots
                                - .PatientChartLittleTitle:
                                  text: Mammogram
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: Have you had a mammogram?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.obstetricalHistory.mammogram.haveMammogram
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: When was the last one?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.obstetricalHistory.mammogram.lastTime
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: Ever have an abnormal result?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.obstetricalHistory.mammogram.abnormalResult
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: If yes, please describe?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.obstetricalHistory.mammogram.abnormalResultDescribe

                            - .PatientChartTitle:
                              text: Sexual History
                            - .PatientChartView:
                              children:
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: Are you sexually active?
                                    - .PatientChartLittleData:
                                      style:
                                        textAlign:
                                          x: right
                                      dataKey: formData.patientChart.name.data.sexualHistoryDM.sexuallyActive
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: Use condoms for protection?
                                    - .PatientChartLittleData:
                                      style:
                                        textAlign:
                                          x: right
                                      dataKey: formData.patientChart.name.data.sexualHistoryDM.useCondom
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: History of STD(s)?
                                    - .PatientChartLittleData:
                                      style:
                                        textAlign:
                                          x: right
                                      dataKey: formData.patientChart.name.data.sexualHistoryDM.STDSHistory
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: Are you currently on birth control?
                                    - .PatientChartLittleData:
                                      style:
                                        textAlign:
                                          x: right
                                      dataKey: formData.patientChart.name.data.sexualHistoryDM.birthControl
                                - .PatientChartLittleTitle:
                                  text: Pap smear
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: Have you had a pap smear?
                                    - .PatientChartLittleData:
                                      style:
                                        textAlign:
                                          x: right
                                      dataKey: formData.patientChart.name.data.sexualHistoryDM.papSmear.havePapSmear
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: When was the last one?
                                    - .PatientChartLittleData:
                                      style:
                                        textAlign:
                                          x: right
                                      dataKey: formData.patientChart.name.data.sexualHistoryDM.papSmear.lastTime
                                - .PatientChartLittleView:
                                  style:
                                    marginBottom: "0.02"
                                  children:
                                    - .PatientChartLittleText:
                                      text: Ever have an abnormal result?
                                    - .PatientChartLittleData:
                                      style:
                                        textAlign:
                                          x: right
                                      dataKey: formData.patientChart.name.data.sexualHistoryDM.papSmear.abnormalResult
                            - .PatientChartTitle:
                              text: Socical History
                            - .PatientChartView:
                              children:
                                - .PatientChartLittleTitle:
                                  text: Alcohol
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: Do you drink?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.socialHistory.alcohol.drink
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: What type?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.socialHistory.alcohol.types
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: How many drinks per week?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.socialHistory.alcohol.timesPerWeek
                                - .PatientChartLittleTitle:
                                  text: Tobacco
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: Do you currently use tobacco?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.socialHistory.tobacco.currently
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: What type?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.socialHistory.tobacco.types
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: How many packs per day?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.socialHistory.tobacco.packs
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: Number of years using?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.socialHistory.tobacco.timesPerWeek
                                - .PatientChartLittleTitle:
                                  text: Caffeine
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: Do you have caffeine?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.socialHistory.caffeine.haveCaffeine
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: What type?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.socialHistory.caffeine.types
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: How many drinks per week?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.socialHistory.caffeine.timesPreDay
                                - .PatientChartLittleTitle:
                                  text: Recreational Drugs
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: Do you use illicit drugs?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.socialHistory.recreationalDrug.haveIllicitDrugs
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: What type?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.socialHistory.recreationalDrug.drugsType
                                - .PatientChartLittleTitle:
                                  text: Exerise
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: Do you exercise?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.socialHistory.exercise.haveExercise
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: What type?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.socialHistory.exercise.type
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: How many days per week?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.socialHistory.exercise.daysPerWeek
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: How many hours per day?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.socialHistory.exercise.hoursPerDay
                                - .PatientChartLittleTitle:
                                  text: Nutrition/Diet
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: Do you follow a diet?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.socialHistory.nutrition.haveDiet
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: What type?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.socialHistory.nutrition.type
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: How many meals on average per day?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.socialHistory.nutrition.mealsPerDay
                                - .PatientChartLittleTitle:
                                  text: Personal Safety
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: Do you live alone?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.socialHistory.personalSafety.liveAlone
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: Do you frequently fall?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.socialHistory.personalSafety.frequentlyFall
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: Need assistance walking?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.socialHistory.personalSafety.needAssistanceWalking
                                - .PatientChartLittleView:
                                  children:
                                    - .PatientChartLittleText:
                                      text: Have you ever been abused?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.socialHistory.personalSafety.abused
                                - .PatientChartLittleView:
                                  style:
                                    marginBottom: "0.01"
                                  children:
                                    - .PatientChartLittleText:
                                      text: Do you wear a seatbelt?
                                    - .PatientChartLittleData:
                                      dataKey: formData.patientChart.name.data.socialHistory.personalSafety.seatBelt
                            - type: view
                              style:
                                height: "0.06"
                                marginTop: "0.03"
                              children:
                                - type: button
                                  text: Confirm
                                  style:
                                    width: "0.1"
                                    marginLeft: "0.132"
                                    height: "0.04"
                                    color: "0xffffff"
                                    fontSize: .Nfont.nf2
                                    border:
                                      style: "3"
                                    borderWidth: "1"
                                    borderColor: "0x1263a8"
                                    borderRadius: "5"
                                    backgroundColor: "0x1263a8"
                                    textAlign:
                                      x: center
                                      y: center
                    # Payment
                    - type: popUp
                      viewTag: paymentView
                      style:
                        left: '0.41'
                        width: "0.39"
                        top: "0"
                        height: "0.64"
                        border:
                          style: "3"
                        borderWidth: "1"
                        borderColor: "0xeff0f2"
                        borderRadius: "5"
                        boxSizing: border-box
                        backgroundColor: "0xeff0f2"
                      children:
                        - type: view
                          viewTag: paymentViewLabel
                          style:
                            width: "0.364"
                            marginTop: "0.01"
                            left: "0.013"
                            display: flex
                            justifyContent: space-around
                            alignItems: center
                          children:
                            - type: label
                              text: Payment
                              dataKey:
                              style:
                                width: "0.324"
                                left: "0.004"
                                fontSize: .Nfont.nf4
                                fontFamily: "Roboto"
                                fontWeight: "500"
                            - type: view
                              onClick:
                                - actionType: popUp
                                  popUpView: paymentSetting
                              style:
                                marginLeft: "0.005"
                                width: "0.03"
                                display: flex
                                justifyContent: space-around
                                alignItems: center
                              children:
                                # - type: image
                                #   path: addBlue.png
                                #   style:
                                #     width: "0.008"
                                #     display: inline-block
                                - type: label
                                  text: Update
                                  dataKey:
                                  style:
                                    # marginLeft: "0.005"
                                    color: "0x2988e6"
                                    display: inline-block
                        - type: scrollView
                          viewTag: paymentViewData
                          style:
                            left: "0.013"
                            width: "0.364"
                            marginTop: "0.015"
                            height: "0.565"
                            border:
                              style: "5"
                            borderWidth: "1"
                            borderColor: "0xffffff"
                            borderRadius: "3"
                            boxSizing: border-box
                            backgroundColor: "0xffffff"
                          children:
                            - type: label
                              text: Financial Agreement
                              dataKey:
                              style:
                                width: "0.364"
                                fontSize: .Nfont.n5_2
                                fontWeight: "600"
                                fontFamily: Arial
                                height: "0.06"
                                textAlign:
                                  x: center
                                  y: center
                            - type: view
                              style:
                                width: "0.344"
                                marginTop: "0"
                                left: "0.01"
                                height: "0.035"
                                backgroundColor: "0xeff0f2"
                                boxSizing: border-box
                                border:
                                  style: "3"
                                borderWidth: "1"
                                borderColor: "0xeff0f2"
                                borderRadius: "3"
                                textAlign:
                                  y: center
                              children:
                                - type: label
                                  text: Appointment fee
                                  dataKey:
                                  style:
                                    left: "0.015"
                                    fontSize: .Nfont.n6_1_1
                                    fontFamily: Arial
                            - type: view
                              style:
                                left: "0.025"
                                width: "0.314"
                                # height: "0.16"
                                # backgroundColor: red
                                border:
                                  style: "2"
                                borderWidth: "1"
                                borderColor: "0xdededf"
                              children:
                                - type: label
                                  text: The payment below must be paid in full before the appointment can be made
                                  dataKey:
                                  style:
                                    marginTop: "0.01"
                                    fontSize: .Nfont.n6_1
                                    fontFamily: "sans-serif"
                                    color: "0x666666"
                                - .PatdSumPayView:
                                  style:
                                    marginTop: "0.01"
                                  children:
                                    - .PatdSumPayText:
                                      text: Payment Date
                                    - .PatdSumPayText:
                                      dataKey: formData.currentAppointment.ctime
                                      text=func: .builtIn.string.formatUnixtimeL_en
                                      style:
                                        fontWeight: "600"
                                        textAlign:
                                          x: right
                                - .PatdSumPayView:
                                  children:
                                    - .PatdSumPayText:
                                      text: Appointment Type
                                    - .PatdSumPayText:
                                      dataKey: formData.currentAppointment.name.visitType
                                      style:
                                        fontWeight: "600"
                                        textAlign:
                                          x: right
                                - .PatdSumPayView:
                                  children:
                                    - .PatdSumPayText:
                                      text: Reason for Visit
                                    - .PatdSumPayText:
                                      dataKey: formData.currentAppointment.name.visitReason
                                      style:
                                        fontWeight: "600"
                                        textAlign:
                                          x: right
                                - .PatdSumPayView:
                                  children:
                                    - .PatdSumPayText:
                                      text: Payment Due
                                    - .PatdSumPayText:
                                      dataKey: formData.fee
                                      text=func: .builtIn.string.dollarFormat
                                      style:
                                        fontWeight: "600"
                                        textAlign:
                                          x: right
                            - type: view
                              style:
                                left: "0.025"
                                width: "0.314"
                                height: "0.04"
                                textAlign:
                                  y: center
                              children:
                                - type: label
                                  text: Total Payment
                                  style:
                                    fontSize: .Nfont.n6_1_1
                                    fontFamily: "sans-serif"
                                    fontWeight: "500"
                                    width: "0.157"
                                    color: "0x005795"
                                    display: inline-block
                                    textAlign:
                                      x: left
                                - type: label
                                  dataKey: formData.fee
                                  text=func: .builtIn.string.dollarFormat
                                  style:
                                    fontSize: .Nfont.n6_1_1
                                    fontFamily: "sans-serif"
                                    fontWeight: "500"
                                    width: "0.157"
                                    color: "0x005795"
                                    display: inline-block
                                    textAlign:
                                      x: right
                            - type: view
                              style:
                                marginTop: "0.12"
                                left: "0.025"
                                width: "0.314"
                                height: "0.12"
                                # backgroundColor: "0xcdcdcd"
                                # textAlign: 
                                #   y: center
                              children:
                                - type: label
                                  text: Patients with medical coverage
                                  dataKey:
                                  style:
                                    fontSize: .Nfont.n6_1
                                    fontFamily: "sans-serif"
                                    fontWeight: "600"
                                    # width: "0.157"
                                    color: "0x333333"
                                    # display: inline-block
                                    textAlign:
                                      x: left
                                - type: label
                                  text: You may request for a billing statement after you r visit and submit a
                                    reimbursement request through your insurance
                                    company.
                                  dataKey:
                                  style:
                                    marginTop: "0.008"
                                    fontSize: .Nfont.n6_2_2
                                    # fontFamily: "sans-serif"
                                    fontWeight: "500"
                                    # width: "0.157"
                                    color: "0x333333"
                                - type: view
                                  style:
                                    marginTop: "0.008"
                                  children:
                                    - type: label
                                      text: "Refunds may be requested to "
                                      dataKey:
                                      style:
                                        fontSize: .Nfont.n6_2
                                        display: inline-block
                                        fontWeight: "500"
                                        color: "0x333333"
                                        marginRight: "0.001"
                                    - type: label
                                      dataKey: Global.currentFacility.name.basicInfo.medicalFacilityName
                                      style:
                                        fontSize: .Nfont.n6_2
                                        fontWeight: "500"
                                        display: inline-block
                                        color: "0x333333"
                                        marginRight: "0.001"
                                    - type: label
                                      text: ", please contact them directly at "
                                      dataKey:
                                      style:
                                        display: inline-block
                                        fontSize: .Nfont.n6_2
                                        fontWeight: "500"
                                        color: "0x333333"
                                        marginRight: "0.002"
                                    - type: label
                                      dataKey: Global.currentFacility.name.basicInfo.phoneNumber
                                      style:
                                        fontSize: .Nfont.n6_2
                                        display: inline-block
                                        fontWeight: "500"
                                        color: "0x333333"
                                - type: view
                                  style:
                                    width: "0.314"
                                    marginTop: "0.01"
                                    textAlign:
                                      x: center
                                  children:
                                    - type: label
                                      text: Payment are processed by
                                      dataKey:
                                      style:
                                        marginTop: "0.007"
                                        fontSize: .Nfont.n6_2
                                        # fontFamily: "sans-serif"
                                        fontWeight: "500"
                                        # width: "0.157"
                                        color: "0x333333"
                                        display: inline-block
                                    - type: image
                                      path: squareText.svg
                                      style:
                                        marginLeft: "0.005"
                                        width: "0.03"
                                        marginTop: "0.01"

                    # receipt
                    - type: popUp
                      viewTag: receiptView
                      style:
                        left: '0.41'
                        width: "0.39"
                        top: "0"
                        height: "0.64"
                        border:
                          style: "3"
                        borderWidth: "1"
                        borderColor: "0xeff0f2"
                        borderRadius: "5"
                        boxSizing: border-box
                        backgroundColor: "0xeff0f2"
                      children:
                        - type: view
                          style:
                            display: flex
                            justifyContent: space-between
                            alignItems: flex-end
                            width: "0.37"
                          children:
                            - type: label
                              text: Payment
                              dataKey:
                              style:
                                left: "0.013"
                                width: "0.12"
                                textIndent: "1em"
                                marginTop: "0.01"
                                fontSize: .Nfont.n6
                                fontFamily: "Roboto"
                                fontWeight: "500"
                                display: inline-block
                            - type: view
                              style:
                                width: "0.1"
                                display: flex
                                justifyContent: space-between
                              children:
                                - type: view
                                  style:
                                    width: "0.05"
                                    display: flex
                                    justifyContent: space-between
                                    alignItems: center
                                  children:
                                    - type: image
                                      path: downLoadBlue.svg
                                      style:
                                        width: "0.01"
                                    - type: label
                                      text: Download
                                      dataKey:
                                      style:
                                        fontSize: .Nfont.n6_1
                                        fontWeight: "600"
                                        color: "0x2e75a8"
                                - type: view
                                  viewTag: refundPhotoTag
                                  style:
                                    width: "0.04"
                                    marginLeft: "0.012"
                                    display: flex
                                    justifyContent: space-between
                                    alignItems: center
                                    isHidden: =..formData.controlRefundPhoto
                                  onClick:
                                    - actionType: evalObject
                                      object:
                                        - ..apiRequest.onceTransaction.docReq.id@: =..apiRequest.paymentEdge.edgeResp.edge.0.id
                                        - =..apiRequest.onceTransaction.docAPI.get: ""
                                        - ..formData.moreOptions@: =..apiRequest.onceTransaction.docResp.doc
                                        - =.builtIn.object.extractArray:
                                            dataIn:
                                              obj: =..formData.moreOptions
                                              arr:
                                                - name.data.orderInfo.amount
                                            dataOut: PatientSummary.formData.refundTotalArr
                                        - =.builtIn.array.selectOneToArr:
                                            dataIn:
                                              arr: =..formData.refundTotalArr
                                              key: "amount"
                                            dataOut: PatientSummary.formData.refundTotalArr
                                    - actionType: popUp
                                      popUpView: refundTag
                                  children:
                                    - type: image
                                      path: refund.svg
                                      style:
                                        width: "0.01"
                                    - type: label
                                      text: Refund
                                      dataKey:
                                      style:
                                        fontSize: .Nfont.n6_1
                                        fontWeight: "600"
                                        color: "0xe24849"
                                        textDecoration: underline

                        - type: scrollView
                          style:
                            left: "0.013"
                            width: "0.364"
                            marginTop: "0.015"
                            height: "0.565"
                            border:
                              style: "5"
                            borderWidth: "1"
                            borderColor: "0xffffff"
                            borderRadius: "3"
                            boxSizing: border-box
                            backgroundColor: "0xffffff"
                          children:
                            - type: label
                              text: Receipt
                              dataKey:
                              style:
                                width: "0.364"
                                fontSize: .Nfont.n5_2
                                fontWeight: "600"
                                fontFamily: Arial
                                height: "0.06"
                                textAlign:
                                  x: center
                                  y: center

                            - type: view
                              style:
                                left: "0.025"
                                width: "0.314"
                                height: "0.16"
                                borderWidth: "1"
                              children:
                                - .PatdSumPayView:
                                  style:
                                  children:
                                    - .PatdSumPayText:
                                      text: Payment Date
                                    - .PatdSumPayText:
                                      dataKey: formData.currentAppointment.ctime
                                      text=func: .builtIn.string.formatUnixtimeL_en
                                      style:
                                        fontWeight: "600"
                                        textAlign:
                                          x: right
                                - .PatdSumPayView:
                                  style:
                                  children:
                                    - .PatdSumPayText:
                                      text: "Receipt #"
                                      style:
                                        width: "0.06"
                                    - .PatdSumPayText:
                                      dataKey: formData.currentPaidTrans.deat.squareID
                                      style:
                                        fontWeight: "600"
                                        width: "0.254"
                                        textAlign:
                                          x: right
                                - .PatdSumPayView:
                                  style:
                                  children:
                                    - .PatdSumPayText:
                                      text: "Patient"
                                    - .PatdSumPayText:
                                      dataKey: formData.currentPaidTrans.name.data.orderInfo.payer
                                      style:
                                        fontWeight: "600"
                                        textAlign:
                                          x: right
                                - .PatdSumPayView:
                                  children:
                                    - .PatdSumPayText:
                                      text: Appointment Type
                                    - .PatdSumPayText:
                                      dataKey: formData.currentPaidTrans.name.data.appointmentInfo.visitType
                                      style:
                                        fontWeight: "600"
                                        textAlign:
                                          x: right
                                - .PatdSumPayView:
                                  children:
                                    - .PatdSumPayText:
                                      text: Provider
                                    - .PatdSumPayText:
                                      dataKey: formData.currentPaidTrans.name.data.appointmentInfo.providerName
                                      style:
                                        fontWeight: "600"
                                        textAlign:
                                          x: right
                            - type: view
                              style:
                                left: "0.025"
                                width: "0.314"
                              children:
                                - type: view
                                  style:
                                    height: auto
                                    width: "0.314"
                                  children:
                                    - type: label
                                      text: "Date of Service"
                                      dataKey:
                                      style:
                                        width: "0.135"
                                        height: "0.035"
                                        backgroundColor: "0xeff0f2"
                                        display: inline-block
                                        fontSize: .Nfont.nf2
                                        lineHeight: "3.5vh"
                                        paddingLeft: "0.01"
                                        boxSizing: border-box
                                    - type: label
                                      text: "Payment reason"
                                      dataKey:
                                      style:
                                        width: "0.12"
                                        height: "0.035"
                                        backgroundColor: "0xeff0f2"
                                        display: inline-block
                                        fontSize: .Nfont.nf2
                                        lineHeight: "3.5vh"
                                        boxSizing: border-box
                                    - type: label
                                      text: "Amount Due"
                                      dataKey:
                                      style:
                                        width: "0.059"
                                        height: "0.035"
                                        backgroundColor: "0xeff0f2"
                                        display: inline-block
                                        fontSize: .Nfont.nf2
                                        lineHeight: "3.5vh"
                                        boxSizing: border-box
                                - type: list
                                  contentType: listObject
                                  listObject: ..formData.receiptList
                                  iteratorVar: itemObject
                                  style:
                                    width: '0.314'
                                    height: auto
                                    border:
                                      style: "3"
                                    borderColor: "0xdededf"
                                    boxSizing: border-box
                                    borderTop: "0xffffff"
                                  children:
                                    - type: listItem
                                      itemObject:
                                      style:
                                        width: '0.314'
                                        height: auto
                                      children:
                                        - type: label
                                          dataKey: itemObject.dateOfService
                                          text=func: .builtIn.string.formatUnixtimeL_en
                                          style:
                                            width: "0.135"
                                            height: "0.035"
                                            display: inline-block
                                            fontSize: .Nfont.nf2
                                            lineHeight: "3.5vh"
                                            paddingLeft: "0.01"
                                            fontWeight: "600"
                                            boxSizing: border-box
                                        - type: label
                                          dataKey: itemObject.reason
                                          style:
                                            width: "0.12"
                                            height: "0.035"
                                            display: inline-block
                                            fontSize: .Nfont.nf2
                                            lineHeight: "3.5vh"
                                            fontWeight: "600"
                                            boxSizing: border-box
                                        - type: label
                                          dataKey: itemObject.due
                                          text=func: .builtIn.string.dollarFormat
                                          style:
                                            width: "0.059"
                                            height: "0.035"
                                            display: inline-block
                                            fontWeight: "600"
                                            paddingLeft: "0.003"
                                            fontSize: .Nfont.nf2
                                            lineHeight: "3.5vh"
                                            boxSizing: border-box
                                - type: view
                                  viewTag: amountPaidTag
                                  style:
                                    width: '0.314'
                                    height: "0.05"
                                    display: flex
                                    justifyContent: flex-end
                                    alignItems: center
                                  children:
                                    - type: label
                                      text: "Amount Paid:"
                                      dataKey:
                                      style:
                                        fontSize: .Nfont.nf3
                                        fontWeight: "600"
                                    - type: label
                                      text=func: .builtIn.string.dollarFormat
                                      dataKey: formData.amountPaid
                                      style:
                                        fontWeight: "700"
                                        color: "0x005795"
                                        fontSize: .Nfont.nf3
                                        marginLeft: "0.005"

                            - type: view
                              style:
                                marginTop: "0.05"
                                left: "0.025"
                                width: "0.314"
                                height: "0.12"
                              children:
                                - type: label
                                  text: "Paid to: "
                                  dataKey:
                                  style:
                                    fontSize: .Nfont.n6_1
                                    fontFamily: "sans-serif"
                                    fontWeight: "600"
                                    color: "0x333333"
                                    textAlign:
                                      x: left
                                - type: view
                                  style:
                                    marginTop: "0.01"
                                  children:
                                    # - type: label
                                    #   text: "Medical facility name: "
                                    #   dataKey: 
                                    #   style:
                                    #     fontSize: .Nfont.n6_2
                                    #     display: inline-block
                                    #     fontWeight: "500"
                                    #     color: "0x333333"
                                    #     marginRight: "0.01"
                                    - type: label
                                      dataKey: Global.currentFacility.name.basicInfo.medicalFacilityName
                                      style:
                                        fontSize: .Nfont.n6_2
                                        fontWeight: "500"
                                        display: inline-block
                                        color: "0x333333"
                                        marginRight: "0.001"
                                - type: view
                                  style:
                                    marginTop: "0.004"
                                  children:
                                    # - type: label
                                    #   text: "Medical facility name address: "
                                    #   dataKey: 
                                    #   style:
                                    #     display: inline-block
                                    #     fontSize: .Nfont.n6_2
                                    #     fontWeight: "500"
                                    #     color: "0x333333"
                                    #     marginRight: "0.01"
                                    - type: label
                                      dataKey: Global.currentFacility.name.basicInfo.location
                                      style:
                                        fontSize: .Nfont.n6_2
                                        display: inline-block
                                        fontWeight: "500"
                                        color: "0x333333"

                    # Patient Payment 
                    - type: popUp
                      viewTag: patientPayView
                      style:
                        left: '0.41'
                        width: "0.39"
                        top: "0"
                        height: "0.64"
                        zIndex: "10"
                        border:
                          style: "3"
                        borderWidth: "1"
                        borderColor: "0xeff0f2"
                        borderRadius: "5"
                        boxSizing: border-box
                        backgroundColor: "0xeff0f2"
                      children:
                        - type: view
                          style:
                            marginTop: "0.01"
                            width: "0.364"
                            left: "0.013"
                          children:
                            - type: label
                              text: Patient Payment
                              dataKey:
                              style:
                                width: "0.239"
                                display: inline-block
                                textIndent: "1em"
                                fontSize: .Nfont.n6
                                fontFamily: "Roboto"
                                fontWeight: "500"
                            - type: view
                              style:
                                width: "0.06"
                                display: inline-block
                              children:
                                - type: image
                                  path: downLoadBlue.svg
                                  style:
                                    width: "0.01"
                                    display: inline-block
                                - type: label
                                  text: Download
                                  dataKey:
                                  style:
                                    marginLeft: "0.005"
                                    fontSize: .Nfont.n6_1_1
                                    display: inline-block
                                    color: "0x005795"
                            - type: view
                              style:
                                width: "0.05"
                                marginLeft: "0.01"
                                display: inline-block
                                textAlign:
                                  x: right
                              children:
                                - type: image
                                  path: refundInMeeting.svg
                                  style:
                                    marginTop: "0.003"
                                    width: "0.01"
                                    display: inline-block
                                - type: label
                                  text: Refund
                                  dataKey:
                                  style:
                                    marginLeft: "0.005"
                                    fontSize: .Nfont.n6_1_1
                                    display: inline-block
                                    color: "0xe24445"
                        - type: scrollView
                          style:
                            left: "0.013"
                            width: "0.364"
                            marginTop: "0.015"
                            height: "0.565"
                            border:
                              style: "5"
                            borderWidth: "1"
                            borderColor: "0xffffff"
                            borderRadius: "3"
                            boxSizing: border-box
                            backgroundColor: "0xffffff"
                          children:
                            - type: label
                              text: Receipt
                              dataKey:
                              style:
                                width: "0.364"
                                fontSize: .Nfont.n5_2
                                fontWeight: "600"
                                fontFamily: Arial
                                height: "0.06"
                                textAlign:
                                  x: center
                                  y: center
                            - type: view
                              style:
                                left: "0.025"
                                width: "0.314"
                                height: "0.16"
                              children:
                                - .PatdSumPayView:
                                  children:
                                    - .PatdSumPayText:
                                      text: Payment Date
                                    - .PatdSumPayText:
                                      text: 07/27/2021
                                      style:
                                        textAlign:
                                          x: right
                                - .PatdSumPayView:
                                  children:
                                    - .PatdSumPayText:
                                      text: "Receipt #"
                                    - .PatdSumPayText:
                                      text: 12345
                                      style:
                                        textAlign:
                                          x: right
                                - .PatdSumPayView:
                                  children:
                                    - .PatdSumPayText:
                                      text: Patient
                                    - .PatdSumPayText:
                                      text: Mellissa West
                                      style:
                                        textAlign:
                                          x: right
                                - .PatdSumPayView:
                                  children:
                                    - .PatdSumPayText:
                                      text: Appointment Type
                                    - .PatdSumPayText:
                                      text: Telemedicine
                                      style:
                                        textAlign:
                                          x: right
                                - .PatdSumPayView:
                                  children:
                                    - .PatdSumPayText:
                                      text: Provider
                                    - .PatdSumPayText:
                                      text: Lisa Lee,M.D.
                                      style:
                                        textAlign:
                                          x: right
                            - type: view
                              style:
                                marginTop: "0.015"
                                left: "0.025"
                                width: "0.314"
                                # height: "0.08"
                                # backgroundColor: "0xcdcdcd"
                              children:
                                - type: view
                                  style:
                                    height: "0.035"
                                    width: "0.314"
                                    boxSizing: border-box
                                    backgroundColor: "0xeff0f2"
                                    textAlign:
                                      y: center
                                  children:
                                    - type: label
                                      text: Date of Service
                                      dataKey:
                                      style:
                                        display: inline-block
                                        width: "0.134"
                                        fontSize: .Nfont.n6_2_1
                                        fontFamily: "sans-serif"
                                        color: "0x565656"
                                        textIndent: 1em
                                    - type: label
                                      text: Payment reason
                                      dataKey:
                                      style:
                                        display: inline-block
                                        width: "0.12"
                                        fontSize: .Nfont.n6_2_1
                                        fontFamily: "sans-serif"
                                        color: "0x565656"
                                    - type: label
                                      text: Amount Due
                                      dataKey:
                                      style:
                                        display: inline-block
                                        width: "0.06"
                                        fontSize: .Nfont.n6_2_1
                                        fontFamily: "sans-serif"
                                        color: "0x565656"
                                - type: list
                                  contentType: listObject
                                  listObject: ..formDataTemp.pay
                                  iteratorVar: itemObject
                                  style:
                                    width: '0.314'
                                    margin: '0'
                                    height: auto
                                  children:
                                    - type: listItem
                                      itemObject:
                                      style:
                                        width: '0.314'
                                        height: '0.035'
                                        left: '0'
                                        marginTop: ''
                                        boxSizing: border-box
                                        borderLeft: "1px solid #dededf"
                                        borderRight: "1px solid #dededf"
                                        borderBottom: "1px solid #dededf"
                                        textAlign:
                                          y: center
                                      children:
                                        - type: label
                                          text:
                                          dataKey: itemObject.date
                                          style:
                                            display: inline-block
                                            width: "0.134"
                                            fontSize: .Nfont.n6_2_1
                                            fontFamily: "sans-serif"
                                            color: "0x565656"
                                            textIndent: 1em
                                        - type: label
                                          text:
                                          dataKey: itemObject.reason
                                          style:
                                            display: inline-block
                                            width: "0.12"
                                            fontSize: .Nfont.n6_2_1
                                            fontFamily: "sans-serif"
                                            color: "0x565656"
                                        - type: label
                                          text:
                                          dataKey: itemObject.amount
                                          style:
                                            display: inline-block
                                            width: "0.06"
                                            fontSize: .Nfont.n6_2_1
                                            fontFamily: "sans-serif"
                                            color: "0x565656"
                                - type: view
                                  style:
                                    marginTop: "0.01"
                                    width: "0.314"
                                    textAlign:
                                      x: right
                                      y: center
                                  children:
                                    - type: label
                                      text: Amount Paid
                                      dataKey:
                                      style:
                                        fontSize: .Nfont.n6_1_1
                                        fontFamily: "sans-serif"
                                        fontWeight: "500"
                                        color: "0x005795"
                                        display: inline-block
                                    - type: label
                                      text: $30.00
                                      dataKey:
                                      style:
                                        marginLeft: "0.008"
                                        fontSize: .Nfont.n6_1_1
                                        fontFamily: "sans-serif"
                                        fontWeight: "500"
                                        color: "0x005795"
                                        display: inline-block
                            - type: view
                              style:
                                marginTop: "0.12"
                                left: "0.025"
                                width: "0.314"
                              children:
                                - type: label
                                  text: "Paid to:"
                                  dataKey:
                                  style:
                                    fontSize: .Nfont.n6_1_1
                                    fontFamily: "sans-serif"
                                    fontWeight: "500"
                                    # color: "0x005795"
                                - type: label
                                  text: Medical facility name
                                  dataKey:
                                  style:
                                    marginTop: "0.005"
                                    fontSize: .Nfont.n6_2_1
                                    fontFamily: "sans-serif"
                                    color: "0x333333"
                                    textAlign:
                                      x: left
                                - type: label
                                  text: Medical facility name address
                                  dataKey:
                                  style:
                                    marginTop: "0.005"
                                    fontSize: .Nfont.n6_2_1
                                    fontFamily: "sans-serif"
                                    color: "0x333333"
                                    textAlign:
                                      x: left

        - .PopupLightPromptRight:
          viewTag: noSelectProvider
          msg: Please select one provider
        # provider 列表
        - .BasePopUp:
          viewTag: ProviderListTag
          children:
            - type: view
              style:
                left: "0.6"
                width: "0.4"
                top: "0"
                height: "1"
                zIndex: "10"
                backgroundColor: "0xffffff"
              children:
                - .PopUphead:
                  children:
                    - .CreateLabel:
                      text: "Choose to Invite"
                    - .Closebutton:
                      onClick:
                        - actionType: evalObject
                          object:
                            - ..formData.providerListSelect@: []
                            - ..formData.invitedBgc@: "0xc1c1c1"
                        - actionType: popUpDismiss
                          popUpView: ProviderListTag
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: ProviderListTag

                - type: view
                  style:
                    height: '0.82'
                    width: '0.4'
                    top: '0.08'
                    backgroundColor: '0xffffff'
                  children:
                    - type: label
                      text: Provider
                      dataKey:
                      style:
                        fontSize: .Nfont.nf3
                        fontFamily: "Arial"
                        fontWeight: "600"
                        color: "0x333333"
                        width: "0.15"
                        left: "0.06"
                        marginTop: "0.027"
                    - type: label
                      text: Please select someone to Invite
                      style:
                        fontSize: .Nfont.nf2
                        fontFamily: "Arial"
                        color: "0x666666"
                        left: "0.06"
                        width: "0.15"
                        marginTop: "0.014"
                    - type: list
                      contentType: listObject
                      listObject: ..formData.providerList
                      iteratorVar: itemObject
                      viewTag: proListTag
                      style:
                        left: "0.06"
                        width: '0.3'
                        margin: '0'
                        marginTop: "0.01"
                        height: auto
                      children:
                        - type: listItem
                          itemObject:
                          style:
                            width: '0.3'
                            height: '0.05'
                            marginTop: '0.012'
                          children:
                            - type: image
                              viewTag: singleSelect
                              path:
                                emit:
                                  dataKey:
                                    var: itemObject
                                  actions:
                                    - if:
                                        - =.builtIn.array.has:
                                            dataIn:
                                              object: =..formData.providerListSelect
                                              value: $var.name.data.fullName
                                        - yes.png
                                        - no.png
                              onClick:
                                - actionType: updateObject
                                  dataKey: PatientSummary.formData.providerSelectInfo
                                  dataObject: itemObject
                                - emit:
                                    dataKey:
                                      var: itemObject
                                    actions:
                                      - ..formData.providerListSelect@: []
                                      - if:
                                          - =.builtIn.array.has:
                                              dataIn:
                                                object: =..formData.providerListSelect
                                                value: $var.name.data.fullName
                                          - continue
                                          - =.builtIn.array.add:
                                              dataIn:
                                                object: =..formData.providerListSelect
                                                value: $var.name.data.fullName
                                      - ..formData.invitedBgc@: "0x005795"
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: btnView
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: singleSelect
                              style:
                                width: "0.009"
                                display: "inline-block"
                                verticalAlign: "middle"
                            - type: image
                              path: providerDefault.svg
                              path=func: .builtIn.utils.prepareDocToPath
                              dataKey: itemObject.name.data.avatar
                              style:
                                marginLeft: "0.01"
                                width: "0.02"
                                height: "0.04"
                                display: "inline-block"
                                verticalAlign: "middle"
                            - type: view
                              style:
                                marginLeft: "0.01"
                                lineHeight: "2"
                                width: "0.2"
                                height: "0.05"
                                display: "inline-block"
                                verticalAlign: "middle"
                              children:
                                - type: view
                                  style:
                                    width: "0.2"
                                    height: "0.025"
                                  children:
                                    - type: label
                                      dataKey: itemObject.name.data.fullName
                                      style:
                                        display: "inline-block"
                                        verticalAlign: top
                                        fontSize: .Nfont.nf2
                                        fontWeight: "600"
                                        fontFamily: "Arial"
                                        color: "0x333333"
                                    - type: label
                                      text: "-"
                                      style:
                                        marginLeft: "0.005"
                                        display: "inline-block"
                                        verticalAlign: top
                                        fontSize: .Nfont.nf2
                                        fontWeight: "600"
                                        fontFamily: "Arial"
                                        color: "0x333333"
                                    - type: label
                                      dataKey: itemObject.name.data.title
                                      style:
                                        marginLeft: "0.005"
                                        display: "inline-block"
                                        verticalAlign: top
                                        fontSize: .Nfont.nf2
                                        fontWeight: "600"
                                        fontFamily: "Arial"
                                        color: "0x333333"
                                - type: label
                                  dataKey: itemObject.name.data.selectedSpecialty
                                  style:
                                    width: "0.2"
                                    height: "0.025"
                                    color: "0x666666"
                                    fontSize: .Nfont.nf2
                                    fontFamily: "Arial"
                                    overflow: hidden
                                    textOverflow: ellipsis
                                    whiteSpace: nowrap
                - .ConfirmBtnView:
                  children:
                    - .ConfirmButton:
                      text: "Invite"
                      viewTag: btnView
                      style:
                        backgroundColor: ..formData.invitedBgc
                        border: none
                      onClick:
                        - actionType: evalObject
                          object:
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..formData.invitedBgc
                                      string2: "0x005795"
                                - actionType: evalObject
                                  object:
                                    - if:
                                        - =.builtIn.array.has:
                                            dataIn:
                                              object: =..formData.invitedProvider
                                              value: =..formData.providerSelectInfo.name.data.fullName
                                        - actionType: popUp
                                          popUpView: invitedTag
                                          wait: true
                                          popUpDismiss: 2000
                                        - continue
                                    # invite
                                    # 10002
                                    - ..apiRequest.emailEdge.edgeReq.id.0@: =.Global.currentFacility.id
                                    - ..apiRequest.emailEdge.edgeReq.id.1@: =..formData.providerSelectInfo.bsig
                                    - =..apiRequest.emailEdge.edgeAPI.get: ""
                                    # inviteEmail
                                    - ..apiRequest.inviteEmail.docStoreReq@: =..apiRequest.inviteEmail.docStoreIn
                                    - ..apiRequest.inviteEmail.docStoreReq.eid@: =..apiRequest.emailEdge.edgeResp.edge.0.id
                                    - ..apiRequest.inviteEmail.docStoreReq.name.title@: "Appointment invite Notification"
                                    - ..apiRequest.inviteEmail.docStoreReq.name.data.senderAvatarId@: =.Global.facilityAvatarID
                                    - ..apiRequest.inviteEmail.docStoreReq.name.data.receiverName@:
                                        =..formData.providerSelectInfo.name.data.fullName
                                    - ..apiRequest.inviteEmail.docStoreReq.name.data.appointmentId@: =.Global.formData.appointment.id
                                    - ..apiRequest.inviteEmail.docStoreReq.name.user@: =.Global.facilityAvatarID
                                    - ..apiRequest.inviteEmail.docStoreReq.name.data.senderName@: "AiTmed Auto-Reply"
                                    - =.builtIn.string.concat:
                                        dataIn:
                                          - "Hello, You are invited to an
                                            appointment by"
                                          - " "
                                          - =.Global.currentFacility.name.basicInfo.medicalFacilityName
                                          - ". Please check the appointment
                                            details follow."
                                        dataOut: PatientSummary.apiRequest.inviteEmail.docStoreReq.name.data.content
                                    - =..apiRequest.inviteEmail.docAPI.store: ""
                                    # tage
                                    - ..apiRequest.inviteEmailTag.docStoreReq.eid@: =..apiRequest.emailEdge.edgeResp.edge.0.id
                                    - ..apiRequest.inviteEmailTag.docStoreReq.reid@: =..apiRequest.inviteEmail.docStoreRes.doc.id
                                    - =..apiRequest.inviteEmailTag.docAPI.store: ""

                                    # invite
                                    - ..apiRequest.inviteParticipant.edge.evid@: =..formData.providerSelectInfo.bsig
                                    - ..apiRequest.inviteParticipant.edge.refid@: =..formData.currentAppointment.id
                                    - ..apiRequest.inviteParticipant.edge.stime@: =..formData.currentAppointment.stime
                                    - ..apiRequest.inviteParticipant.edge.etime@: =..formData.currentAppointment.etime
                                    - ..apiRequest.inviteParticipant.edge.name.roleName@: =..formData.providerSelectInfo.name.data.fullName
                                    - ..apiRequest.inviteParticipant.edge.name.role@: "Provider"
                                    - =..apiRequest.inviteParticipant.edgeAPI.store: ""
                                    - =.builtIn.array.add:
                                        dataIn:
                                          object: =..formData.invitedProvider
                                          value: =..formData.providerSelectInfo.name.data.fullName
                                    - ..formData.providerListSelect@: []
                                    - ..formData.invitedBgc@: "0xc1c1c1"
                                    - actionType: popUpDismiss
                                      popUpView: ProviderListTag
                                    - actionType: popUp
                                      popUpView: inviteSuccessView
                                    - actionType: builtIn
                                      funcName: redraw
                                      viewTag: ProviderListTag
                                - continue

        # 确定选择的provider角色
        # - .BaseJudgeView: 
        #   viewTag: confirmSelectTag
        #   children: 
        #     - .BaseJudgeInnerView: 
        #       style: 
        #         height: "0.3"
        #       children: 
        #         - type: view
        #           style:
        #             width: "0.32"
        #             height: "0.2"
        #           children: 
        #             - type: label
        #               text: Invite To
        #               dataKey: 
        #               style:
        #                 left: "0.02"
        #                 width: "0.2"
        #                 height: "0.04"
        #                 marginTop: "0.03"
        #                 fontSize: .Nfont.nf6
        #                 fontFamily: "Arial"
        #                 color: "0x333333"
        #                 fontWeight: "600"
        #             - type: view
        #               style:
        #                 marginTop: "0.02"
        #                 width: "0.28"
        #                 left: "0.023"
        #               children: 
        #                 - type: label
        #                   text: Provider
        #                   dataKey: 
        #                   style:
        #                     color: "0x333333"
        #                     fontSize: .Nfont.nf2
        #                     fontFamily: "Arial"
        #                     display: inline-block
        #                     verticalAlign: top
        #                 - type: view
        #                   style:
        #                     width: "0.2"
        #                     marginLeft: "0.03"
        #                     display: "inline-block"
        #                   children: 
        #                     - type: view
        #                       style:
        #                         width: "0.2"
        #                         height: "0.025"
        #                         display: "inline-block"
        #                       children: 
        #                         - type: label
        #                           dataKey: formData.providerSelectInfo.name.data.fullName
        #                           style:
        #                             display: "inline-block"
        #                             verticalAlign: top
        #                             fontSize: .Nfont.nf3
        #                             fontWeight: "600"
        #                             fontFamily: "Arial"
        #                             color: "0x333333"
        #                         - type: label
        #                           text: "-"
        #                           style:
        #                             marginLeft: "0.005"
        #                             display: "inline-block"
        #                             verticalAlign: top
        #                             fontSize: .Nfont.nf3
        #                             fontWeight: "600"
        #                             fontFamily: "Arial"
        #                             color: "0x333333"
        #                         - type: label
        #                           dataKey: formData.providerSelectInfo.name.data.title
        #                           style:
        #                             marginLeft: "0.005"
        #                             display: "inline-block"
        #                             verticalAlign: top
        #                             fontSize: .Nfont.nf3
        #                             fontWeight: "600"
        #                             fontFamily: "Arial"
        #                             color: "0x333333"
        #                     - type: label
        #                       dataKey: formData.providerSelectInfo.name.data.selectedSpecialty
        #                       style:
        #                         width: "0.2"
        #                         height: "0.02"
        #                         color: "0x666666"
        #                         fontSize: .Nfont.nf2
        #                         fontFamily: "Arial"
        #                         overflow: hidden
        #                         textOverflow: ellipsis
        #                         whiteSpace: nowrap
        #             - type: label
        #               text: Category
        #               dataKey: 
        #               style:
        #                 marginTop: "0.01"
        #                 left: "0.023"
        #                 color: "0x333333"
        #                 fontSize: .Nfont.nf2
        #                 fontFamily: "Arial"
        #             - type: select
        #               dataKey: apiRequest.inviteParticipant.edge.name.role
        #               options: 
        #                 ..formDataTemp.providerCategory
        #               style:
        #                 marginTop: "0.01"
        #                 left: "0.023"
        #                 color: "0x333333"
        #                 width: "0.274"
        #                 height: "0.035"
        #                 boxSizing: border-box
        #                 fontSize: .Nfont.nf2
        #                 fontFamily: "Arial"
        #                 border: 
        #                   style: "3"
        #                 borderWidth: "1"
        #                 borderColor: "0xDEDEDF"
        #                 borderRadius: "3"                        
        #         - .BaseJudgeButtonView: 
        #           style: 
        #             marginTop: "0"
        #           children: 
        #             - .BaseJudgeButtonNo:   # 可以重写
        #               text: Cancel
        #               style: 
        #                 textDecoration: underline
        #                 left: "0.18"
        #             - .BaseJudgeButtonYes:  # 可以重写
        #               text: Confirm
        #               onClick:
        #                 - actionType: evalObject
        #                   object:
        #                     # - =.builtIn.array.getValueByKey:
        #                     #     dataIn:
        #                     #       array: =..formDataTemp.providerCategoryAll
        #                     #       key1: key
        #                     #       value: =..apiRequest.inviteParticipant.edge.name.role
        #                     #       key2: value
        #                     #     dataOut: PatientSummary.apiRequest.inviteParticipant.edge.subtype
        #                     - ..apiRequest.inviteParticipant.edge.evid@: =..formData.providerSelectInfo.bsig
        #                     - ..apiRequest.inviteParticipant.edge.refid@: =..formData.currentAppointment.id
        #                     - ..apiRequest.inviteParticipant.edge.stime@: =..formData.currentAppointment.stime
        #                     - ..apiRequest.inviteParticipant.edge.etime@: =..formData.currentAppointment.etime
        #                     - ..apiRequest.inviteParticipant.edge.name.roleName@: =..formData.providerSelectInfo.name.data.fullName
        #                     - =..apiRequest.inviteParticipant.edgeAPI.store: ""

        #                 - actionType: popUpDismiss
        #                   popUpView: ProviderListTag
        #                 - actionType: popUpDismiss
        #                   popUpView: confirmSelectTag                          
        #                 - actionType: popUp
        #                   popUpView: inviteSuccessView                            

        # 取消会议弹窗
        - type: popUp
          viewTag: cancelAppointmentTag
          style:
            width: "1"
            height: "1"
            backgroundColor: "0xcccccc33"
            zIndex: "100"
          children:
            - type: view
              style:
                width: "0.29"
                height: "0.43"
                backgroundColor: "0xffffff"
                top: "0.23"
                left: "0.435"
                boxShadow: "1px 1px 11px 9px #b3b3b333"
                borderRadius: "10"
              children:
                - type: image
                  path: cancelGray.svg
                  style:
                    height: "0.015"
                    left: "0.27"
                    top: "0.02"
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: cancelAppointmentTag
                - type: label
                  text: "Are you sure you want to cancel this appointment?"
                  dataKey:
                  style:
                    textAlign:
                      x: center
                    fontSize: .Nfont.nf5
                    marginTop: "0.075"
                - type: label
                  text: "Cancel by"
                  dataKey:
                  style:
                    fontSize: .Nfont.nf5
                    color: "0x4b4b4b"
                    left: "0.022"
                    marginTop: "0.01"
                    fontWeight: "600"
                - type: view
                  viewTag: cancelAppointmentSelectTag
                  style:
                    width: "0.2"
                    height: "0.05"
                    textAlign:
                      y: center
                    left: "0.022"
                  children:
                    - type: list
                      contentType: listObject
                      listObject: ..formDataTemp.cancelAppointmentSelect
                      iteratorVar: itemObject
                      style:
                        width: "0.27"
                        display: flex
                        axis: horizontal
                      children:
                        - type: listItem
                          itemObject:
                          style:
                            width: "0.055"
                            height: "0.05"
                            marginTop: ''
                            marginRight: "0.01"
                            display: flex
                            justifyContent: center
                            alignItems: center
                          children:
                            - type: image
                              path:
                                # whiteCircle.svg
                                emit:
                                  dataKey:
                                    var: itemObject
                                  actions:
                                    - if:
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: =..formData.cancelSingle.cancelSelect
                                              string2: $var.value
                                        - whiteAndBlueCircle.svg
                                        - whiteCircle.svg
                              onClick:
                                - emit:
                                    dataKey:
                                      var: itemObject
                                    actions:
                                      - if:
                                          - =.builtIn.string.equal:
                                              dataIn:
                                                string1: =..formData.cancelSingle.single
                                                string2: $var.value
                                          - =.builtIn.object.clear:
                                              dataIn:
                                                object: =..formData.cancelSingle
                                                key: $var.key
                                          - =.builtIn.object.set:
                                              dataIn:
                                                object: =..formData.cancelSingle
                                                key: $var.key
                                                value: $var.value
                                - actionType: evalObject
                                  object:
                                    - if:
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: =..formData.cancelSingle.cancelSelect
                                              string2: "Provider"
                                        - actionType: evalObject
                                          object:
                                            - ..formData.reasonForCancelation@: "we cannot provide the healthcare service at
                                                this time."
                                        - actionType: evalObject
                                          object:
                                            - ..formData.reasonForCancelation@: ""
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: reasonContentTag
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: cancelAppointmentSelectTag
                              style:
                                height: "0.02"
                                marginRight: "0.007"
                            - type: label
                              text: ""
                              dataKey: itemObject.value
                              style:
                                fontSize: .Nfont.nf5

                - type: view
                  style:
                    width: "0.123"
                    height: "0.04"
                    display: flex
                    left: "0.022"
                    justifyContent: space-between
                    alignItems: flex-start
                  children:
                    - type: label
                      text: "Reason for "
                      dataKey:
                      style:
                        fontSize: .Nfont.nf5
                        color: "0x4b4b4b"
                        fontWeight: "600"
                    - type: label
                      text: "cancelation"
                      dataKey:
                      style:
                        fontSize: .Nfont.nf5
                        color: "0xfc3a3a"
                        fontWeight: "600"
                - type: textView
                  placeholder: Enter here...
                  viewTag: reasonContentTag
                  dataKey: formData.reasonForCancelation
                  style:
                    width: "0.25"
                    left: "0.022"
                    borderColor: "0xe5e5e5"
                    height: "0.11"
                    borderRadius: "5"
                    textIndent: "1em"
                    fontFamily: "Poppins"
                    paddingTop: "5px"
                    color: "#999999"
                - type: view
                  style:
                    width: "0.29"
                    height: "0.07"
                    backgroundColor: "0xedeef2"
                    border-bottom-left-radius: "5"
                    border-bottom-right-radius: "5"
                    marginTop: "0.02"
                    boxShadow: "1px 8px 10px 10px #b3b3b333"
                  children:
                    - .BaseJudgeButtonNo: ""
                      style:
                        left: "0.172"
                        fontFamily: "Proxima Nova"
                    - .BaseJudgeButtonYes:
                      style:
                        left: "0.205"
                        width: "0.058"
                        fontFamily: "Proxima Nova"
                      onClick:
                        - actionType: evalObject
                          object:
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..formData.cancelSingle.cancelSelect
                                      string2: ""
                                - actionType: popUp
                                  popUpView: noMessageTag
                                  popUpDismiss: 1200
                                  wait: true
                                - continue
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..formData.reasonForCancelation
                                      string2: ""
                                - actionType: popUp
                                  popUpView: noReasonTag
                                  popUpDismiss: 1200
                                  wait: true
                                - continue
                            - =.builtIn.string.concat:
                                dataIn:
                                  - =..formData.currentAppointment.name.providerName
                                  - " (provider)"
                                dataOut: PatientSummary.formData.concatProviderName
                            - =.builtIn.string.concat:
                                dataIn:
                                  - =..formData.currentAppointment.name.patientName
                                  - " (patient)"
                                dataOut: PatientSummary.formData.concatPatientName

                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..formData.cancelSingle.cancelSelect
                                      string2: "Provider"
                                - ..formData.cancelByPatientOrProvider@: =..formData.concatProviderName
                                - ..formData.cancelByPatientOrProvider@: =..formData.concatPatientName
                            - =.builtIn.string.concat:
                                dataIn:
                                  - "Your appointment for "
                                  - =..formData.sendMessageSTime
                                  - " has been canceled by "
                                  - =..formData.cancelByPatientOrProvider
                                  - ". "
                                dataOut: PatientSummary.formData.sendMessageContent.msg2
                            - =.builtIn.string.concat:
                                dataIn:
                                  - =..formData.sendMessageContent.msg1
                                  - =..formData.sendMessageContent.msg2
                                  - " "
                                  - =..formData.sendMessageContent.msg3
                                  - =..formData.reasonForCancelation
                                dataOut: PatientSummary.formData.sendMessageContent.res
                            # 删除预约
                            - =..deleteMeeting.edgeAPI.store: ""
                        - actionType: evalObject
                          object:
                            - ..apiRequest.email.docStoreReq.eid@: =..apiRequest.emailEdge.edgeResp.edge.0.id
                            - ..apiRequest.email.docStoreReq.name.data.content@: =..formData.sendMessageContent.res
                            - ..apiRequest.email.docStoreReq.name.title@: "Appointment cancelled notification"
                            - ..apiRequest.email.docStoreReq.name.data.senderAvatarId@: =.Global.facilityAvatarID
                            - ..apiRequest.email.docStoreReq.name.user@: =.Global.facilityAvatarID
                            - ..apiRequest.email.docStoreReq.name.data.senderName@: "AiTmed Auto-Reply"
                            - =..apiRequest.email.docAPI.store: ""
                            - ..apiRequest.email.docStoreReq.name.data.content@: ""

                            - ..apiRequest.email.docStoreReq@: =..apiRequest.email.docStoreIn
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..formData.currentAppointment.evid
                                      string2: =..formData.currentAppointment.name.providerId
                                - ..apiRequest.email.docStoreReq.name.data.receiverName@: =..formData.currentAppointment.name.providerName
                                - ..apiRequest.email.docStoreReq.name.data.receiverName@: =..formData.currentAppointment.name.patientName
                            - ..apiRequest.email.docStoreReq.eid@: =..apiRequest.emailEdge.reEdgeResp.edge.0.id
                            - ..apiRequest.email.docStoreReq.name.data.content@: =..formData.sendMessageContent.res
                            - ..apiRequest.email.docStoreReq.name.title@: "Appointment cancelled notification"
                            - ..apiRequest.email.docStoreReq.name.data.senderAvatarId@: =.Global.facilityAvatarID
                            - ..apiRequest.email.docStoreReq.name.user@: =.Global.facilityAvatarID
                            - ..apiRequest.email.docStoreReq.name.data.senderName@: "AiTmed Auto-Reply"
                            - =..apiRequest.email.docAPI.store: ""
                            - ..apiRequest.cancelMeetingDoc.docIn.eid@: =.Global.formData.meetingDocEid
                            - ..apiRequest.cancelMeetingDoc.docIn.reid@: =.Global.formData.meetingDocReid
                            - ..apiRequest.cancelMeetingDoc.docIn.name.data.role@: =..formData.cancelSingle.cancelSelect
                            - ..apiRequest.cancelMeetingDoc.docIn.name.data.reason@: =..formData.reasonForCancelation
                            - =..apiRequest.cancelMeetingDoc.docAPI.store: ""
                            - ..apiRequest.email.docStoreReq.name.data.content@: ""
                        # 取消会议后的退款
                        - actionType: evalObject
                          object:
                            - if:
                                - =..apiRequest.hasPaidProfile.getDocResp.doc.0
                                - actionType: evalObject
                                  object:
                                    - ..apiRequest.refundOrder.docReq.name.title@: =.PatientSummary.formData.currentPaidTrans.name.data.orderInfo.amount
                                    - =.builtIn.string.concat:
                                        dataIn:
                                          - "-"
                                          - =..apiRequest.refundOrder.docReq.name.title
                                        dataOut: PatientSummary.apiRequest.refundOrder.docReq.name.title
                                    - ..apiRequest.refundOrder.docReq.eid@: =..apiRequest.paymentEdge.edgeResp.edge.0.id
                                    - ..apiRequest.refundOrder.docReq.name.data.appointmentInfo@: =..apiRequest.hasPaidProfile.getDocResp.doc.0.name.data.appointmentInfo
                                    - ..apiRequest.refundOrder.docReq.name.data.orderInfo.amount@:
                                        =..apiRequest.refundOrder.docReq.name.title
                                    - ..apiRequest.refundOrder.docReq.name.data.orderInfo.payer@: =..apiRequest.hasPaidProfile.getDocResp.doc.0.name.data.orderInfo.payer
                                    - ..apiRequest.refundOrder.docReq.name.nonce@: =..apiRequest.hasPaidProfile.getDocResp.doc.0.deat.squareID
                                    - =..apiRequest.refundOrder.docAPI.store: ""
                                - continue
                        - actionType: popUp
                          popUpView: successView
                        - actionType: popUpDismiss
                          popUpView: cancelAppointmentTag
                        - goto: ScheduleManagement

        # 取消会议成功弹窗
        - .BaseSuccessfulView: ""
          viewTag: successView
          msg: "cancel Successfully!"
        # 退款成功弹窗
        - .BaseSuccessfulView: ""
          viewTag: refundSuccessView
          msg: "Refund Successfully!"
          onClick:
            - actionType: evalObject
              object:
                .Global._nonce@:
                  =.builtIn.math.random: ""
            - actionType: evalObject
              object:
                - =..apiRequest.hasPaidProfile.docAPI.get: ""
                - =.builtIn.array.getObjectByArray:
                    dataIn:
                      array: =..apiRequest.hasPaidProfile.getDocResp.doc
                      key: "type"
                      value: 2001
                    dataOut: PatientSummary.formData.currentPaidTrans
                - if:
                    - =.builtIn.string.equal:
                        dataIn:
                          string1: =..apiRequest.hasPaidProfile.getDocResp.doc.0.type
                          string2: 2002
                    - actionType: evalObject
                      object:
                        - ..formData.controlRefundPhoto@: true
                        - if:
                            - =.builtIn.string.equal:
                                dataIn:
                                  string1: =..apiRequest.hasPaidProfile.getDocResp.doc.0.deat.state
                                  string2: "COMPLETED"
                            - ..formData.paymentStatusColor@: "0xF8AE29"
                            - continue
                        - if:
                            - =.builtIn.string.equal:
                                dataIn:
                                  string1: =..apiRequest.hasPaidProfile.getDocResp.doc.0.deat.state
                                  string2: "COMPLETED"
                            - ..formData.meetingStatus@: "0.00" #"Refunded"
                            - continue
                    - actionType: evalObject
                      object:
                        - ..formData.controlRefundPhoto@: false
                        - if:
                            - =.builtIn.string.equal:
                                dataIn:
                                  string1: =..apiRequest.hasPaidProfile.getDocResp.doc.0.deat.state
                                  string2: "COMPLETED"
                            - ..formData.paymentStatusColor@: "0x2fb355"
                            - ..formData.paymentStatusColor@: "0xE24445"
                        - if:
                            - =.builtIn.string.equal:
                                dataIn:
                                  string1: =..apiRequest.hasPaidProfile.getDocResp.doc.0.deat.state
                                  string2: "COMPLETED"
                            - ..formData.meetingStatus@: "0.00" #"Paid"           
                            - ..formData.meetingStatus@: =..formData.fee #"Unpaid"   
                - ..formData.receiptList.0.dateOfService@: =.PatientSummary.formData.currentPaidTrans.ctime
                - ..formData.receiptList.0.reason@: =.PatientSummary.formData.currentPaidTrans.name.data.appointmentInfo.reason
                - ..formData.receiptList.0.due@: =.PatientSummary.formData.currentPaidTrans.name.data.orderInfo.amount
                - =.builtIn.array.filterArrayByPath:
                    dataIn:
                      objArr: =..apiRequest.hasPaidProfile.getDocResp.doc
                      path: "deat.state"
                      compareStr: [ "COMPLETED" ]
                    dataOut: PatientSummary.formData.completeArr
                - =.builtIn.object.extractArray:
                    dataIn:
                      obj: =..formData.completeArr
                      arr:
                        - name.data.orderInfo.amount
                    dataOut: PatientSummary.formData.amountPaidArr
                - =.builtIn.array.selectOneToArr:
                    dataIn:
                      arr: =..formData.amountPaidArr
                      key: "amount"
                    dataOut: PatientSummary.formData.amountArr
                - =.builtIn.math.cumulative:
                    dataIn:
                      numArr: =..formData.amountArr
                    dataOut: PatientSummary.formData.amountPaidTemp
                - =.builtIn.number.multiply:
                    dataIn:
                      number: =..formData.amountPaidTemp
                      multiple: 100
                    dataOut: PatientSummary.formData.amountPaid
            - actionType: builtIn
              funcName: redraw
              viewTag: appointmentStatusTag
            - actionType: builtIn
              funcName: redraw
              viewTag: refundPhotoTag
            - actionType: builtIn
              funcName: redraw
              viewTag: amountPaidTag
            - actionType: popUpDismiss
              popUpView: refundSuccessView

        - type: popUp
          viewTag: refundTag
          style:
            top: "0"
            width: "1"
            height: "1"
            backgroundColor: "0x00000033"
            zIndex: "10"
          children:
            - type: view
              style:
                width: "0.39"
                height: "0.42"
                top: "0.29"
                left: "0.385"
                backgroundColor: "0xffffff"
                zIndex: "201"
                boxShadow: "1px 2px 7px 4px #cccccc"
                borderRadius: "5"
              children:
                - type: view
                  style:
                    marginTop: "0.025"
                    marginLeft: "0.0325"
                  children:
                    - type: label
                      text: Refund
                      dataKey:
                      style:
                        width: "0.07"
                        fontSize: .Nfont.n4_2
                        fontWeight: "600"
                        display: inline-block
                        verticalAlign: bottom
                    - type: image
                      path: ConfirmCashOutClose.svg
                      onClick:
                        - actionType: popUpDismiss
                          popUpView: refundTag
                        - actionType: popUp
                          popUpView: moreOptionsTag
                      style:
                        marginLeft: "0.25"
                        display: inline-block
                        width: "0.009"
                        marginTop: "0.015"
                - type: view
                  style:
                    marginTop: "0.012"
                    marginLeft: "0.06"
                    width: "0.27"
                  children:
                    - type: label
                      text: Please enter amount and reason for refund.
                      dataKey:
                      style:
                        width: "0.2"
                        fontSize: .Nfont.nf2
                        fontFamily: Proxima Nova
                        color: "0x545454"
                    - type: view
                      style:
                        marginTop: "0.02"
                      children:
                        - type: label
                          text: Patient
                          dataKey:
                          style:
                            left: "0"
                            display: inline-block
                            fontSize: .Nfont.nf1
                            fontFamily: Proxima Nova
                            color: "0x333333"
                        - type: label
                          dataKey: info
                          style:
                            left: "0.042"
                            fontSize: .Nfont.nf2
                            fontWeight: "600"
                            fontFamily: Proxima Nova
                            color: "0x333333"
                            display: inline-block
                    - type: view
                      style:
                        marginTop: "0.005"
                      children:
                        - type: label
                          text: Amount
                          dataKey:
                          style:
                            left: "0"
                            display: inline-block
                            fontSize: .Nfont.nf1
                            fontFamily: Proxima Nova
                            color: "0x333333"
                        - type: label
                          text=func: .builtIn.string.dollarFormat
                          dataKey: formData.receiptList.0.due
                          style:
                            left: "0.042"
                            fontSize: .Nfont.nf2
                            fontWeight: "600"
                            fontFamily: Proxima Nova
                            color: "0x333333"
                            display: inline-block
                    - type: view
                      style:
                        marginTop: "0.006"
                      children:
                        - type: label
                          text: Notes
                          dataKey:
                          style:
                            fontSize: .Nfont.nf1
                            fontFamily: Proxima Nova
                            color: "0x333333"
                        - type: textView
                          placeholder: Appointment canceled by pt
                          dataKey: formData.refundData.notes
                          style:
                            width: "0.27"
                            marginTop: "0.006"
                            textIndent: "10px"
                            height: "0.06"
                            paddingTop: "0.008"
                            fontFamily: Proxima Nova
                            border:
                              style: "3"
                            borderWidth: "1"
                            borderColor: "0xc1c1c1"
                            borderRadius: "4"
                    - type: view
                      style:
                        marginTop: "0.006"
                      children:
                        - type: label
                          text: Amount
                          dataKey:
                          style:
                            fontSize: .Nfont.nf1
                            fontFamily: Proxima Nova
                            color: "0x333333"
                        - type: view
                          viewTag: refundAmountTag
                          style:
                            marginTop: "0.006"
                            width: "0.07"
                            height: "0.035"
                            boxSizing: border-box
                            border:
                              style: "3"
                            borderWidth: "1"
                            borderColor: ..formData.limitRefundColor
                            borderRadius: "4"
                            textAlign:
                              x: center
                              y: center
                          children:
                            - type: label
                              text: $
                              style:
                                marginLeft: "0.005"
                                display: inline-block
                                verticalAlign: middle
                                fontSize: .Nfont.nf2
                                fontFamily: Proxima Nova
                                color: "0x333333"
                            - type: textField
                              placeholder: "30.00"
                              dataKey: formData.refundData.refundAmount
                              onChange:
                                - actionType: evalObject
                                  object:
                                    - if:
                                        - =.builtIn.number.judgeNumber:
                                            dataIn:
                                              num: =..formData.refundData.refundAmount
                                        - actionType: evalObject
                                          object:
                                            - ..formData.limitRefundColor@: "0xc1c1c1"
                                            - =.builtIn.math.toFixedNum:
                                                dataIn:
                                                  num: =..formData.refundData.refundAmount
                                                dataOut: PatientSummary.formData.refundData.refundAmount
                                        - ..formData.limitRefundColor@: "0xff0000"
                                    - ..formData.meetingStatus@: =..formData.refundData.refundAmount
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: appointmentStatusTag
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: refundAmountTag
                              style:
                                marginRight: "0.005"
                                boxSizing: border-box
                                width: "0.045"
                                display: inline-block
                                verticalAlign: middle
                                border:
                                  style: "1"
                                borderWidth: "1"
                    - type: view
                      style:
                        marginTop: "0.032"
                        width: "0.27"
                        textAlign:
                          x: right
                          y: center
                      children:
                        - type: label
                          text: Cancel
                          dataKey:
                          style:
                            display: inline-block
                            fontSize: .Nfont.nf4
                            color: "0x4c5264"
                            textDecoration: underline
                          onClick:
                            - actionType: popUpDismiss
                              popUpView: refundTag
                        - type: button
                          text: Refund
                          onClick:
                            - actionType: evalObject
                              object:
                                - =.builtIn.math.cumulative:
                                    dataIn:
                                      numArr: =..formData.refundTotalArr
                                    dataOut: PatientSummary.formData.refundTotal
                                - =.builtIn.string.concat:
                                    dataIn:
                                      - "-"
                                      - =..formData.refundData.refundAmount
                                    dataOut: PatientSummary.apiRequest.refundOrder.docReq.name.title

                                # - =.builtIn.number.multiply: 
                                #     dataIn: 
                                #       number: =..apiRequest.refundOrder.docReq.name.title
                                #       multiple: 100
                                #     dataOut: PatientSummary.formData.refundMultiply
                                - =.builtIn.number.addition:
                                    dataIn:
                                      num: =..formData.refundTotal
                                      step: =..apiRequest.refundOrder.docReq.name.title
                                    dataOut: PatientSummary.formData.refundJudge
                                - if:
                                    - =.builtIn.math.greater:
                                        dataIn:
                                          num1: =..formData.refundJudge
                                          num2: 0
                                    - continue
                                    - actionType: popUp
                                      popUpView: refundFailTag
                                      wait: true
                            - actionType: popUp
                              popUpView: refundWarningView
                            - actionType: popUpDismiss
                              popUpView: refundTag
                          style:
                            marginLeft: "0.02"
                            border:
                              style: "1"
                            borderRadius: "5"
                            color: "0xffffff"
                            display: inline-block
                            fontSize: .Nfont.nf4
                            width: "0.055"
                            height: "0.038"
                            backgroundColor: "0xe24445"
                            fontWeight: "600"
                            textAlign:
                              x: center
                              y: center

        # 警示框
        - type: popUp
          msg1: Refund Payment
          msg2: Are you sure you want to complete payment refund?
          viewTag: refundWarningView
          style:
            left: "0"
            width: "1"
            top: "0"
            height: "1"
            backgroundColor: "0x00000033"
            zIndex: "1000"
          children:
            - type: view
              style:
                left: "0.43"
                width: "0.28"
                top: "0.3"
                height: "0.345"
                boxShadow: "0px 2px 2px 1px #b7b7b7"
                borderRadius: "5"
                backgroundColor: "0xffffff"
              children:
                - type: view
                  style:
                    marginTop: "0"
                    left: "0"
                    width: "0.28"
                    height: "0.013"
                    backgroundColor: "0xe24445"
                    border-top-left-radius: "5px"
                    border-top-right-radius: "5px"
                - type: view
                  style:
                    marginTop: "0"
                    width: "0.28"
                    left: "0"
                    height: "0.332"
                  children:
                    - type: image
                      path: warningRed.svg
                      style:
                        left: "0.12"
                        width: "0.04"
                        marginTop: "0.04"
                    - type: label
                      text: ____.msg1
                      style:
                        left: "0.05"
                        width: "0.18"
                        fontSize: .Nfont.n5_1
                        color: "0x171725"
                        fontWeight: "500"
                        fontFamily: "Robot"
                        marginTop: "0.02"
                        textAlign:
                          x: center
                    - type: label
                      text: ____.msg2
                      style:
                        left: "0.02"
                        width: "0.24"
                        marginTop: "0.02"
                        fontSize: .Nfont.n6_1
                        fontFamily: "Roboto"
                        color: "0x707070"
                        textAlign:
                          x: center
                    - type: view
                      style:
                        display: flex
                        justifyContent: space-evenly
                        alignItems: center
                        marginTop: "0.04"
                        width: "0.28"
                      children:
                        - type: label
                          text: Edit
                          dataKey:
                          style:
                            textDecoration: underline
                            fontSize: .Nfont.n6
                            color: "0x5c6172"
                            fontWeight: "600"
                          onClick:
                            - actionType: popUp
                              popUpView: refundTag
                            - actionType: popUpDismiss
                              popUpView: refundWarningView
                        - type: button
                          text: Refund
                          onClick:
                            - actionType: evalObject
                              object:
                                - ..apiRequest.refundOrder.docReq.eid@: =..apiRequest.paymentEdge.edgeResp.edge.0.id
                                - ..apiRequest.refundOrder.docReq.name.data.appointmentInfo@: =..apiRequest.hasPaidProfile.getDocResp.doc.0.name.data.appointmentInfo
                                - ..apiRequest.refundOrder.docReq.name.data.orderInfo.amount@: =..apiRequest.refundOrder.docReq.name.title
                                - ..apiRequest.refundOrder.docReq.name.data.orderInfo.payer@: =..apiRequest.hasPaidProfile.getDocResp.doc.0.name.data.orderInfo.payer
                                - ..apiRequest.refundOrder.docReq.name.nonce@: =..apiRequest.hasPaidProfile.getDocResp.doc.0.deat.squareID
                                - =..apiRequest.refundOrder.docAPI.store: ""
                                - ..apiRequest.refundOrder.docReq.name.title@: ""
                                # - =..apiRequest.hasPaidProfile.docAPI.get: ""

                            - actionType: popUp
                              popUpView: refundSuccessView
                              # popUpDismiss: 2000  
                            - actionType: popUpDismiss
                              popUpView: refundWarningView
                            # - actionType: builtIn
                            #   funcName: redraw
                            #   viewTag: refundTag

                          style:
                            border:
                              style: "1"
                            borderRadius: "5"
                            color: "0xffffff"
                            fontSize: .Nfont.n6
                            width: "0.06"
                            height: "0.045"
                            backgroundColor: "0xe24445"
                            fontWeight: "600"
                            textAlign:
                              x: center
                              y: center

        - .BaseWarningView:
          viewTag: refundFailTag
          msg2: The Refund amount is more than total amount

        # 取消会议成功弹窗
        - .BaseSuccessfulView: ""
          viewTag: successView
          msg: "cancel Successfully!"
        # Macro列表弹窗
        - .MacroPopUp: # viewTag: macroTag
        - .CopyMacroSucPromptRight: # 没有选中patient provider的轻提示
        - type: popUp # popUp
          viewTag: noMessageTag
          img: miniRedAlert.svg
          style:
            width: "1"
            height: "1"
            backgroundColor: "0x00000033"
            top: "0"
            zIndex: "20"
          msg: Please select cancel by
          onClick:
            - actionType: popUpDismiss
              popUpView: noMessageTag
          children:
            - type: view
              style:
                width: "0.29"
                height: "0.055"
                top: "0.04"
                left: "0.435"
                zIndex: "10"
                backgroundColor: "0xffffff"
                borderRadius: "3px"
                textAlign:
                  y: center
              children:
                - type: image
                  path: ___.img
                  style:
                    top: "0.017"
                    left: "0.08"
                    width: "0.015"
                    height: "0.022"
                - type: label
                  text: ___.msg
                  style:
                    top: "0.016"
                    left: "0.1"
                    height: "0.055"
                    fontSize: .Nfont.nf4
                    color: "0xe24445"

        # 没有填内容的轻提示
        - type: popUp # popUp
          viewTag: noReasonTag
          img: miniRedAlert.svg
          style:
            width: "1"
            height: "1"
            backgroundColor: "0x00000033"
            top: "0"
            zIndex: "20"
          msg: Please enter reason for cancelation
          onClick:
            - actionType: popUpDismiss
              popUpView: noMessageTag
          children:
            - type: view
              style:
                width: "0.29"
                height: "0.055"
                top: "0.04"
                left: "0.435"
                zIndex: "10"
                backgroundColor: "0xffffff"
                borderRadius: "3px"
                textAlign:
                  y: center
              children:
                - type: image
                  path: ___.img
                  style:
                    top: "0.017"
                    left: "0.06"
                    width: "0.015"
                    height: "0.022"
                - type: label
                  text: ___.msg
                  style:
                    top: "0.016"
                    left: "0.08"
                    height: "0.055"
                    fontSize: .Nfont.nf4
                    color: "0xe24445"

        # Change Appointment
        - type: popUp
          style:
            top: "0"
            left: "0"
            height: "1"
            width: "1"
            zIndex: "1000"

          viewTag: appointmentChangeTag
          children:
            - .PopUphead:
              style:
                left: '0.6'
                boxShadow: "1px 1px 5px 3px #cccccc"
              children:
                - .CreateLabel:
                  text: Change Appointment
                - .Closebutton:
                  onClick:
                    - .BaseDate.calendarDate.minidayLable@: []
                    - actionType: popUpDismiss
                      popUpView: appointmentChangeTag
                    - actionType: builtIn
                      funcName: hide
                      viewTag: changeAppointAddressView
            - type: view
              style:
                height: '0.92'
                width: '0.4'
                top: '0.08'
                left: '0.6'
                backgroundColor: '0xffffff'
                boxShadow: "-10px -5px 2px -6px #cccccc"
              children:
                - type: view
                  style:
                    marginTop: "0.03"
                    left: "0.06"
                    width: "0.28"
                    height: "0.26"
                  children:
                    - type: label
                      text: Please complete the fields below
                      style:
                        width: "0.28"
                        marginTop: '0.01'
                        fontSize: .Nfont.nf4
                        fontWeight: "500"
                    - type: view
                      style:
                        marginTop: "0.03"
                        width: "0.28"
                        height: "0.08"
                      children:
                        - type: label
                          text: Provider
                          style:
                            top: "0"
                            width: "0.082"
                            fontSize: .Nfont.nf2
                            fontWeight: "600"
                        - type: textField
                          dataKey: formData.currentAppointment.name.providerName
                          isEditable: "false"
                          style:
                            marginTop: "0.025"
                            width: "0.082"
                            fontSize: .Nfont.nf0
                            borderRadius: "5"
                            border:
                              style: "3"
                            borderColor: "0xf4f4f4"
                            height: '0.042'
                            textIndent: 2em
                            boxSizing: border-box
                        # TYPE
                        - type: label
                          text: Appointment Type
                          style:
                            top: "0"
                            left: "0.099"
                            width: "0.082"
                            fontSize: .Nfont.nf2
                            fontWeight: "600"
                        - type: textField
                          dataKey: formData.currentAppointment.name.visitType
                          isEditable: "false"
                          style:
                            marginTop: "0.025"
                            width: "0.082"
                            marginLeft: "0.017"
                            fontSize: .Nfont.nf0
                            borderRadius: "5"
                            border:
                              style: "3"
                            borderColor: "0xf4f4f4"
                            height: '0.042'
                            textIndent: 2em
                            boxSizing: border-box
                        # ADDRESS
                        - type: view
                          viewTag: changeAppointAddressView
                          style:
                            left: "0.198"
                            top: '0'
                            width: '0.082'
                            height: 'auto'
                            isHidden: true
                          children:
                            - type: label
                              text: Address
                              style:
                                top: "0"
                                width: "0.082"
                                fontSize: .Nfont.nf2
                                fontWeight: "600"
                            - type: textField
                              dataKey: formData.currentAppointment.name.locationName
                              isEditable: "false"
                              style:
                                marginTop: "0.025"
                                width: "0.082"
                                fontSize: .Nfont.nf0
                                borderRadius: "5"
                                border:
                                  style: "3"
                                borderColor: "0xf4f4f4"
                                boxSizing: border-box
                                height: '0.042'
                                textIndent: 2em
                    - type: view
                      style:
                        marginTop: "0.01"
                        width: "0.28"
                        height: "0.08"
                      children:
                        # REASON FOR VISIT
                        - type: label
                          text: Reason for visit
                          style:
                            top: "0"
                            width: "0.1315"
                            fontSize: .Nfont.nf2
                            fontWeight: "600"
                        - type: textField
                          dataKey: formData.currentAppointment.name.visitReason
                          isEditable: "false"
                          viewTag: reasonView
                          style:
                            marginTop: "0.025"
                            width: "0.1315"
                            fontSize: .Nfont.nf0
                            borderRadius: "5"
                            border:
                              style: "3"
                            borderColor: "0xf4f4f4"
                            height: '0.042'
                            textIndent: 2em
                            boxSizing: border-box
                        # DURATION
                        - type: label
                          text: Duration
                          style:
                            top: "0"
                            left: "0.1485"
                            width: "0.1"
                            fontSize: .Nfont.nf2
                            fontWeight: "600"
                        - type: textField
                          dataKey: PatientSummary.formData.duration
                          isEditable: false
                          style:
                            marginTop: "0.025"
                            width: "0.1"
                            marginLeft: "0.017"
                            fontSize: .Nfont.nf0
                            borderRadius: "5"
                            border:
                              style: "3"
                            borderColor: "0xf4f4f4"
                            height: '0.042'
                            textIndent: 2em
                            boxSizing: border-box

                    - type: label
                      text: Date
                      style:
                        width: "0.28"
                        marginTop: '0.01'
                        fontSize: .Nfont.nf2
                        fontWeight: "600"
                # CALENDAR
                - .BaseDate.calendar:
                  style:
                    left: "0"
                    top: "0.29"
                    width: "0.4"
                    height: "0.19"
                    backgroundColor: "0xf7f9fa"
                    border:
                      style: "1"
                    borderRadius: ""
                  children:
                    - .BaseDate.calendarHeader:
                      style:
                        top: "0.02"
                        left: "0.06"
                        width: "0.28"
                        height: "0.05"
                        border:
                          style: "1"
                      children:
                        # monthView
                        - type: view
                          style:
                            top: "0"
                            left: "0.06"
                            width: "0.06"
                            height: "0.045"
                            backgroundColor:
                          children:
                            - type: image
                              path: blueLeft.svg
                              onClick:
                                - emit:
                                    actions:
                                      - .BaseDate.calendarDate.day@: 1
                                      - =.builtIn.date.loopMonth:
                                          dataIn:
                                            month: =.BaseDate.calendarDate.month
                                            step: -1
                                          dataOut: BaseDate.calendarDate.month
                                      - =.builtIn.date.transformMonth:
                                          dataIn:
                                            month: =.BaseDate.calendarDate.month
                                          dataOut: BaseDate.calendarDate.monthName
                                      - =.builtIn.date.miniWeeklyCalendarArray:
                                          dataIn:
                                            year: =.BaseDate.calendarDate.year
                                            month: =.BaseDate.calendarDate.month
                                            today: 32
                                            markDay: =.BaseDate.calendarDate.day
                                            color: "0x000000"
                                            backgroundColor: "0xFFFFFF6f"
                                            todayColor: "0xffffff"
                                            todayBackgroundColor: "0x2988E6"
                                          dataOut: BaseDate.calendarDate.minidayLable
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: calendarTag
                              style:
                                height: "0.015"
                                top: "0.0175"
                            - type: label
                              dataKey: BaseDate.calendarDate.monthName
                              style:
                                width: "0.02"
                                height: "0.02"
                                left: "0.019"
                                top: "0.01"
                                fontSize: .Nfont.nf3
                                color: "0x003254"
                                textAlign:
                                  x: center
                            - type: image
                              path: blackRight.svg
                              onClick:
                                - emit:
                                    actions:
                                      - .BaseDate.calendarDate.day@: 1
                                      - =.builtIn.date.loopMonth:
                                          dataIn:
                                            month: =.BaseDate.calendarDate.month
                                            step: 1
                                          dataOut: BaseDate.calendarDate.month
                                      - =.builtIn.date.transformMonth:
                                          dataIn:
                                            month: =.BaseDate.calendarDate.month
                                          dataOut: BaseDate.calendarDate.monthName
                                      - =.builtIn.date.miniWeeklyCalendarArray:
                                          dataIn:
                                            year: =.BaseDate.calendarDate.year
                                            month: =.BaseDate.calendarDate.month
                                            today: 32
                                            markDay: =.BaseDate.calendarDate.day
                                            color: "0x000000"
                                            backgroundColor: "0xFFFFFF6f"
                                            todayColor: "0xffffff"
                                            todayBackgroundColor: "0x2988E6"
                                          dataOut: BaseDate.calendarDate.minidayLable
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: calendarTag
                              style:
                                left: "0.055"
                                height: "0.015"
                                top: "0.0175"
                        # yearView
                        - type: view
                          style:
                            top: "0"
                            left: "0.16"
                            width: "0.06"
                            height: "0.045"
                          children:
                            - type: image
                              path: blueLeft.svg
                              onClick:
                                - emit:
                                    actions:
                                      - .BaseDate.calendarDate.month@: 1
                                      - .BaseDate.calendarDate.day@: 1
                                      - =.builtIn.number.Subtraction:
                                          dataIn:
                                            num: =.BaseDate.calendarDate.year
                                            step: 1
                                          dataOut: BaseDate.calendarDate.year
                                      - =.builtIn.date.miniWeeklyCalendarArray:
                                          dataIn:
                                            year: =.BaseDate.calendarDate.year
                                            month: =.BaseDate.calendarDate.month
                                            today: 32
                                            markDay: =.BaseDate.calendarDate.day
                                            color: "0x000000"
                                            backgroundColor: "0xFFFFFF6f"
                                            todayColor: "0xffffff"
                                            todayBackgroundColor: "0x2988E6"
                                          dataOut: BaseDate.calendarDate.minidayLable
                                - actionType: evalObject
                                  object:
                                    - =.builtIn.date.transformMonth:
                                        dataIn:
                                          month: =.BaseDate.calendarDate.month
                                        dataOut: BaseDate.calendarDate.monthName
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: calendarTag
                              style:
                                height: "0.015"
                                top: "0.0175"
                            - type: label
                              dataKey: BaseDate.calendarDate.year
                              style:
                                width: "0.02"
                                height: "0.02"
                                left: "0.019"
                                top: "0.01"
                                fontSize: .Nfont.nf3
                                color: "0x003254"
                                textAlign:
                                  x: center
                            - type: image
                              path: blackRight.svg
                              onClick:
                                - emit:
                                    actions:
                                      - .BaseDate.calendarDate.month@: 1
                                      - .BaseDate.calendarDate.day@: 1
                                      - =.builtIn.number.addition:
                                          dataIn:
                                            num: =.BaseDate.calendarDate.year
                                            step: 1
                                          dataOut: BaseDate.calendarDate.year
                                      - =.builtIn.date.miniWeeklyCalendarArray:
                                          dataIn:
                                            year: =.BaseDate.calendarDate.year
                                            month: =.BaseDate.calendarDate.month
                                            today: 32
                                            markDay: =.BaseDate.calendarDate.day
                                            color: "0x000000"
                                            backgroundColor: "0xFFFFFF6f"
                                            todayColor: "0xffffff"
                                            todayBackgroundColor: "0x2988E6"
                                          dataOut: BaseDate.calendarDate.minidayLable
                                - actionType: evalObject
                                  object:
                                    - =.builtIn.date.transformMonth:
                                        dataIn:
                                          month: =.BaseDate.calendarDate.month
                                        dataOut: BaseDate.calendarDate.monthName
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: calendarTag
                              style:
                                left: "0.055"
                                height: "0.015"
                                top: "0.0175"
                        - type: list
                          contentType: listObject
                          listObject:
                            - key: SU
                            - key: MO
                            - key: TU
                            - key: WE
                            - key: TH
                            - key: FR
                            - key: SA
                          iteratorVar: itemObject
                          style:
                            top: "0.065"
                            width: "0.21"
                            left: "0.035"
                            height: "0.03"
                            justifyContent: "space-between"
                          children:
                            - type: listItem
                              itemObject: ""
                              style:
                                width: "0.03"
                                height: "0.03"
                                boxSizing: "border-box"
                                border: "none"
                                padding: "0"
                                display: "inline-block"
                              children:
                                - type: label
                                  dataKey: itemObject.key
                                  style:
                                    color: "0x003254"
                                    width: "0.03"
                                    height: "0.03"
                                    fontSize: .Nfont.nf2
                                    fontFamily: Poppins
                                    textAlign:
                                      x: center
                                      y: center
                        - type: list
                          contentType: listObject
                          listObject: =.BaseDate.calendarDate.minidayLable
                          iteratorVar: itemObject
                          style:
                            top: "0.085"
                            left: "0.035"
                            width: "0.21"
                            margin: "0"
                          children:
                            - type: listItem
                              itemObject: ""
                              style:
                                width: "0.03"
                                height: "0.02"
                                padding: "0"
                                margin: "0"
                                display: "inline-block"
                                marginTop: "0.02"
                              onClick:
                                - emit:
                                    dataKey:
                                      var: itemObject
                                    actions:
                                      - ..BaseDate.calendarDate.minidayLable@: []
                                      - =.builtIn.date.miniWeeklyCalendarArray:
                                          dataIn:
                                            year: $var.year
                                            month: $var.month
                                            today: $var.day
                                            markDay: $var.day
                                            color: "0x000000"
                                            backgroundColor: "0xFFFFFF6f"
                                            todayColor: "0xffffff"
                                            todayBackgroundColor: "0x2988E6"
                                          dataOut: BaseDate.calendarDate.minidayLable
                                      - .BaseDate.calendarDate.year@: $var.year
                                      - .BaseDate.calendarDate.month@: $var.month
                                      - .BaseDate.calendarDate.day@: $var.day
                                      - =.builtIn.date.ShowDateByNumber:
                                          dataIn:
                                            year: =.BaseDate.calendarDate.year
                                            month: =.BaseDate.calendarDate.month
                                            day: =.BaseDate.calendarDate.day
                                            formatType: "Y-M-D"
                                          dataOut: BaseDate.calendarDate.todayDate
                                      - =.builtIn.date.transformMonth:
                                          dataIn:
                                            month: =.BaseDate.calendarDate.month
                                          dataOut: BaseDate.calendarDate.monthName
                                      - =.builtIn.date.getTimeStampOfDate:
                                          dataIn:
                                            date: =.BaseDate.calendarDate.todayDate
                                          dataOut: BaseDate.calendarDate.todayStamp
                                - actionType: evalObject
                                  object:
                                    - =.builtIn.string.concat:
                                        dataIn:
                                          - "(stime<"
                                          - =.BaseDate.calendarDate.todayStamp.start
                                          - " AND "
                                          - "etime>"
                                          - =.BaseDate.calendarDate.todayStamp.start
                                          - " OR "
                                          - "stime>"
                                          - =.BaseDate.calendarDate.todayStamp.start
                                          - " AND "
                                          - "etime<"
                                          - =.BaseDate.calendarDate.todayStamp.end
                                          - " OR "
                                          - "stime<"
                                          - =.BaseDate.calendarDate.todayStamp.end
                                          - " AND "
                                          - "etime>"
                                          - =.BaseDate.calendarDate.todayStamp.end
                                          - ")"
                                          - " AND "
                                          - "subtype="
                                          - =..formData.currentSubtype
                                        dataOut: PatientSummary.formData.scheduleScondition
                                    - ..schedule.edge.sCondition@: =..formData.scheduleScondition
                                    #如果选择过去的时候，进行提示
                                    - if:
                                        - =.builtIn.math.greater:
                                            dataIn:
                                              num1: =.BaseDate.calendarDate.todayStamp.end
                                              num2: =.PatientSummary.formData.nowTimeStamp
                                        - continue
                                        - actionType: popUp
                                          popUpView: dateCheck
                                          wait: true
                                - actionType: evalObject
                                  object:
                                    .Global._nonce@:
                                      =.builtIn.math.random: ""
                                - actionType: evalObject
                                  object:
                                    - .BaseDate.schedule.scheduleList.edge@: []
                                    # - ..formData.splitTime@: [] 
                                    - ..schedule.scheduleList.edge@: []
                                    # 获取原来预约的bvid,evid用于查询所有的E1即当前的Availability
                                    - ..schedule.edge.id.0@: =..originSchedule.scheduleList.edge.0.evid
                                    - ..schedule.edge.id.1@: =..originSchedule.scheduleList.edge.0.bvid
                                - actionType: evalObject
                                  object:
                                    # 获取所有的Availability
                                    - =..schedule.get: ""
                                    - ..schedule.edge.id@: []
                                - actionType: evalObject
                                  object:
                                    - if:
                                        - =..schedule.scheduleList.edge.0
                                        - continue
                                        - actionType: popUp
                                          popUpView: noAvailableTag
                                          wait: true
                                    - if:
                                        - ..schedule.scheduleList.edge.0
                                        - =.builtIn.date.splitTime:
                                            dataIn:
                                              object2: =..schedule.scheduleList.edge
                                              timeSlot: =..formData.duration
                                              year: =.BaseDate.calendarDate.year
                                              month: =.BaseDate.calendarDate.month
                                              day: =.BaseDate.calendarDate.day
                                              isSplitCurrent: true
                                            dataOut: PatientSummary.formData.splitTime
                                    #如果没有avail，进行提示

                                    - =.builtIn.object.setObjectKey:
                                        dataIn:
                                          objectArr: =..formData.splitTime
                                          key: fontColor
                                          value: "0x4b4b4b"
                                        dataOut: PatientSummary.formData.splitTime
                                    - =.builtIn.object.setObjectKey:
                                        dataIn:
                                          objectArr: =..formData.splitTime
                                          key: borColor
                                          value: "0xebebeb"
                                        dataOut: PatientSummary.formData.splitTime

                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: calendarTag
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: DataTag
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: splitTimeTag
                              children:
                                - type: label
                                  dataKey: itemObject.day
                                  style:
                                    top: "0"
                                    left: "0.0065"
                                    width: "0.017"
                                    height: "0.03"
                                    color: itemObject.color
                                    backgroundColor: itemObject.backgroundColor
                                    borderRadius: "50"
                                    fontSize: .Nfont.nf4
                                    textAlign:
                                      x: center
                                      y: center
                    - .BaseDate.leftWeek:
                      style:
                        left: "0.06"
                        top: "0.088"
                    - .BaseDate.nextWeek:
                      style:
                        left: "0.336"
                        top: "0.038"
                # AVAILABILITY
                - type: label
                  text: Availability
                  style:
                    top: "0.5"
                    left: "0.06"
                    width: "0.28"
                    fontSize: .Nfont.nf2
                    fontWeight: "600"
                - type: scrollView
                  viewTag: splitTimeTag
                  style:
                    top: "0.52"
                    height: "0.29"
                    width: "0.32"
                    left: "0.06"
                    overflow: scroll
                  children:
                    - type: list
                      contentType: listObject
                      listObject: =.PatientSummary.formData.splitTime
                      iteratorVar: itemObject
                      style:
                        top: "0"
                        width: "0.32"
                        left: "0"
                        margin: "0"
                        display: inline-block
                      children:
                        - type: listItem
                          itemObject: ""
                          onClick:
                            - emit:
                                dataKey:
                                  var: itemObject
                                actions:
                                  - =.builtIn.object.setProperty:
                                      dataIn:
                                        obj: =.PatientSummary.formData.splitTime
                                        label: "showTime"
                                        text: $var.showTime
                                        arr: [ "fontColor", "bgColor", "borColor" ]
                                        valueArr: [ "0x005795", "0xeaf1f6", "0xeaf1f6" ]
                                        errorArr: [ "0x4b4b4b", "0xffffff", "0xebebeb" ]
                                  - ..formData.changeAppointmentTime@: $var
                                  - ..apiRequest.changeAppointment.edgeIn.stime@: $var.stime
                                  - ..apiRequest.changeAppointment.edgeIn.etime@: $var.etime
                                  - ..apiRequest.changeAppointment.edgeIn.refid@: =..formData.currentAppointment.id
                                  - ..apiRequest.changeAppointment.edgeIn.evid@: $var.refid # var是当天切出的时间的，refid指向当天时间即E1
                                  - =.builtIn.date.formatDataPro:
                                      dataIn:
                                        date: $var.stime
                                        separator: "/"
                                      dataOut: PatientSummary.formData.currentTimeString
                                  - =.builtIn.string.concat:
                                      dataIn:
                                        - "The appointment will be changed from"
                                        - =..formData.sendMessageSTime
                                        - " to "
                                        - =..formData.currentTimeString
                                      dataOut: PatientSummary.formData.sendMessageChange
                                  - =.builtIn.string.concat:
                                      dataIn:
                                        - =..formData.currentTimeString
                                        - ". "
                                      dataOut: PatientSummary.formData.currentTimeString
                                  - ..formData.nextBtnColor@: "0x005795"
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: btnView
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: splitTimeTag
                          style:
                            width: '0.0576'
                            height: '0.035'
                            marginRight: "0.015"
                            float: left
                            marginTop: "0.02"
                            backgroundColor: itemObject.bgColor
                            border:
                              style: '3'
                            borderColor: itemObject.borColor
                            borderRadius: "3"
                          children:
                            - type: label
                              dataKey: itemObject.showTime
                              style:
                                left: "0"
                                height: "0.035"
                                color: itemObject.fontColor
                                fontSize: .Nfont.nf2
                                textAlign:
                                  x: center
                                  y: center
                - type: button
                  text: Next
                  viewTag: btnView
                  onClick:
                    - actionType: builtIn
                      funcName: hide
                      viewTag: addressView
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: appointmentInfoChangeTag
                    - actionType: evalObject
                      object:
                        - if:
                            - =.builtIn.string.equal:
                                dataIn:
                                  string1: =..formData.nextBtnColor
                                  string2: "0x005795"
                            - actionType: popUpDismiss
                              popUpView: appointmentChangeTag
                            - continue
                    - actionType: evalObject
                      object:
                        - if:
                            - =.builtIn.string.equal:
                                dataIn:
                                  string1: =..formData.nextBtnColor
                                  string2: "0x005795"
                            - actionType: popUp
                              popUpView: appointmentInfoChangeTag
                            - continue
                  style:
                    top: "0.83"
                    width: "0.28"
                    height: "0.043"
                    left: "0.06"
                    color: "0xffffff"
                    fontSize: .Nfont.nf2
                    fontFamily: "Roboto"
                    backgroundColor: =..formData.nextBtnColor
                    border:
                      style: "1"
                    borderRadius: "3"
                    textAlign:
                      x: center
                      y: center
        # Change Appointment - Appointment info
        - type: popUp
          style:
            top: "0"
            left: "0"
            height: "1"
            width: "1"
            zIndex: "1000"
          viewTag: appointmentInfoChangeTag
          children:
            - .PopUphead:
              style:
                left: '0.6'
              children:
                - .CreateLabel:
                  text: Change Appointment
                - .Closebutton:
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: appointmentInfoChangeTag
                    - actionType: popUp
                      popUpView: appointmentChangeTag
            - type: view
              style:
                height: '0.92'
                width: '0.4'
                top: '0.08'
                left: '0.6'
                backgroundColor: '0xffffff'
              children:
                - type: view
                  style:
                    marginTop: "0.03"
                    left: "0.06"
                    width: "0.28"
                    height: "0.26"
                  children:
                    - type: label
                      text: Appointment info
                      style:
                        width: "0.28"
                        marginTop: '0.007'
                        fontSize: .Nfont.nf5
                        fontFamily: "sans-serif"
                        fontWeight: "600"
                    - type: view
                      style:
                        marginTop: "0.018"
                        width: "0.28"
                        height: "auto"
                        border:
                          style: "3"
                        borderColor: "0xf7f9fa"
                        borderRadius: "5"
                        backgroundColor: "0xf7f9fa"
                      children:
                        - type: view
                          style:
                            marginTop: "0.018"
                            left: "0.013"
                            width: "0.254"
                            height: "0.042"
                          children:
                            - type: label
                              text: Date
                              style:
                                top: "0"
                                width: "0.127"
                                fontSize: .Nfont.nf2
                                fontWeight: "700"
                            - type: label
                              text=func: .builtIn.string.formatUnixtimeL_en
                              dataKey: formData.changeAppointmentTime.stime
                              style:
                                width: "0.127"
                                top: "0"
                                left: "0.127"
                                fontSize: .Nfont.nf2
                        - type: view
                          style:
                            left: "0.013"
                            width: "0.254"
                            height: "0.042"
                          children:
                            - type: label
                              text: Time
                              style:
                                top: "0"
                                width: "0.127"
                                fontSize: .Nfont.nf2
                                fontWeight: "700"
                            - type: label
                              text=func: .builtIn.date.ShowTimeSpan
                              dataKey: formData.changeAppointmentTime
                              style:
                                width: "0.127"
                                top: "0"
                                left: "0.127"
                                fontSize: .Nfont.nf2
                        - type: view
                          style:
                            left: "0.013"
                            width: "0.254"
                            height: "0.042"
                          children:
                            - type: label
                              text: Appointment Type
                              style:
                                top: "0"
                                width: "0.127"
                                fontSize: .Nfont.nf2
                                fontWeight: "700"
                            - type: label
                              dataKey: formData.currentAppointment.name.visitType
                              style:
                                width: "0.127"
                                top: "0"
                                left: "0.127"
                                fontSize: .Nfont.nf2
                        - type: view
                          style:
                            left: "0.013"
                            width: "0.254"
                            height: "0.042"
                          children:
                            - type: label
                              text: Reason for visit
                              style:
                                top: "0"
                                width: "0.127"
                                fontSize: .Nfont.nf2
                                fontWeight: "700"
                            - type: label
                              dataKey: formData.currentAppointment.name.visitReason
                              style:
                                width: "0.127"
                                top: "0"
                                left: "0.127"
                                fontSize: .Nfont.nf2
                        - type: view
                          style:
                            left: "0.013"
                            width: "0.254"
                            height: "0.042"
                          children:
                            - type: label
                              text: Provider
                              style:
                                top: "0"
                                width: "0.127"
                                fontSize: .Nfont.nf2
                                fontWeight: "700"
                            - type: label
                              dataKey: formData.currentAppointment.name.providerName
                              style:
                                width: "0.127"
                                top: "0"
                                left: "0.127"
                                fontSize: .Nfont.nf2
                        - type: view
                          style:
                            left: "0.013"
                            width: "0.254"
                            height: "0.042"
                            display: ..formData.isHiddenLocation
                          children:
                            - type: label
                              text: Location Name
                              style:
                                top: "0"
                                width: "0.127"
                                fontSize: .Nfont.nf2
                                fontWeight: "700"
                            - type: label
                              dataKey: formData.currentAppointment.name.locationName
                              style:
                                width: "0.127"
                                top: "0"
                                left: "0.127"
                                fontSize: .Nfont.nf2
                    - type: label
                      text: Add Patient
                      style:
                        width: "0.28"
                        marginTop: '0.028'
                        fontSize: .Nfont.nf5
                        fontFamily: "sans-serif"
                        fontWeight: "600"
                    - type: view
                      style:
                        marginTop: "0.028"
                        width: "0.28"
                        height: "0.08"
                      children:
                        - type: label
                          text: Patient Name
                          style:
                            top: "0"
                            width: "0.12"
                            fontSize: .Nfont.nf2
                            fontWeight: "600"
                        - type: textField
                          dataKey: formData.currentAppointment.name.patientName
                          isEditable: "false"
                          style:
                            marginTop: "0.025"
                            width: "0.12"
                            fontSize: .Nfont.nf2
                            borderRadius: "5"
                            border:
                              style: "3"
                            borderColor: "0xf4f4f4"
                            height: '0.042'
                            textIndent: 2em
                            boxSizing: border-box
                        - type: label
                          text: Phone Number
                          style:
                            left: "0.135"
                            top: "0"
                            width: "0.146"
                            fontSize: .Nfont.nf2
                            fontWeight: "600"
                        - type: textField
                          dataKey: formData.splitPatPhoneNumber.0
                          isEditable: false
                          style:
                            marginLeft: "0.015"
                            top: "0.025"
                            width: "0.04"
                            fontSize: .Nfont.nf2
                            borderRadius: "5"
                            border:
                              style: "3"
                            borderColor: "0xf4f4f4"
                            height: '0.042'
                            textIndent: 2em
                            boxSizing: border-box
                            backgroundColor: "0xf9f9f9"
                        - type: textField
                          dataKey: formData.splitPatPhoneNumber.1
                          isEditable: "false"
                          style:
                            marginLeft: "0.06"
                            top: "0.025"
                            width: "0.1"
                            fontSize: .Nfont.nf2
                            borderRadius: "5"
                            border:
                              style: "3"
                            borderColor: "0xf4f4f4"
                            height: '0.042'
                            textIndent: 2em
                            boxSizing: border-box
                    - type: view
                      style:
                        top: "0.696"
                        width: "0.28"
                        height: "0.06"
                      children:
                        - type: image
                          path: smallestAlert.svg
                          style:
                            top: "0.003"
                            width: "0.008"
                            height: "0.01"
                        - type: label
                          textBoard:
                            - text: "The appointment will be changed from"
                            - text: " "
                            - text: =..formData.sendMessageSTime # "Sara Brown, 07/20/2021, 9:00 am"
                              color: "0x4094e7"
                            - text: " "
                            - text: "to "
                          style:
                            top: "0"
                            left: "0.01"
                            width: "0.28"
                            fontSize: .Nfont.nf2
                        - type: label
                          dataKey: formData.currentTimeString
                          style:
                            color: "0x4094e7"
                            top: "0.019"
                            left: "0.01"
                            width: "0.08"
                            fontSize: .Nfont.nf2
                        - type: label
                          text: "An email will be sent to other participants."
                          style:
                            top: "0.019"
                            left: "0.092"
                            width: "0.15"
                            fontSize: .Nfont.nf2

                    - type: button
                      text: Change Appointment
                      style:
                        top: "0.8"
                        width: "0.28"
                        height: "0.043"
                        color: "0xffffff"
                        fontSize: .Nfont.nf2
                        fontFamily: "Roboto"
                        backgroundColor: "0x005795"
                        border:
                          style: "1"
                        borderRadius: "3"
                        textAlign:
                          x: center
                          y: center
                      onClick:
                        - actionType: evalObject
                          object:
                            .Global._nonce@:
                              =.builtIn.math.random: ""
                        - actionType: updateObject
                          dataKey: PatientSummary.formData.currentAppointment
                          dataObject: {}
                        - actionType: evalObject
                          object:
                            - ..inMeeting.edgeResp.edge@: []
                            - =..apiRequest.changeAppointment.edgeAPI.store: ""
                            # 发送给一个参与者
                            - ..apiRequest.email.docStoreReq.eid@: =..apiRequest.emailEdge.edgeResp.edge.0.id
                            - ..apiRequest.email.docStoreReq.name.title@: "Appointment changed notification"
                            - ..apiRequest.email.docStoreReq.name.data.content@: =..formData.sendMessageChange
                            - ..apiRequest.email.docStoreReq.name.data.senderAvatarId@: =.Global.facilityAvatarID
                            - ..apiRequest.email.docStoreReq.name.user@: =.Global.facilityAvatarID
                            - ..apiRequest.email.docStoreReq.name.data.senderName@: "AiTmed Auto-Reply"
                            - =..apiRequest.email.docAPI.store: ""
                            - ..apiRequest.email.docStoreReq.name.data.content@: ""
                            # 发送给另一个参与者
                            - ..apiRequest.email.docStoreReq@: =..apiRequest.email.docStoreIn
                            - ..apiRequest.email.docStoreReq.eid@: =..apiRequest.emailEdge.reEdgeResp.edge.0.id
                            - ..apiRequest.email.docStoreReq.name.title@: "Appointment changed notification"
                            - ..apiRequest.email.docStoreReq.name.data.content@: =..formData.sendMessageChange
                            - ..apiRequest.email.docStoreReq.name.data.senderAvatarId@: =.Global.facilityAvatarID
                            - ..apiRequest.email.docStoreReq.name.user@: =.Global.facilityAvatarID
                            - ..apiRequest.email.docStoreReq.name.data.senderName@: "AiTmed Auto-Reply"
                            - =..apiRequest.email.docAPI.store: ""
                            - ..apiRequest.email.docStoreReq.name.data.content@: ""
                            # 重新获取E2更新dataObject

                        - actionType: popUpDismiss
                          popUpView: appointmentInfoChangeTag
                        - actionType: popUp
                          popUpView: changeSuccessTag
                        # - actionType: popUp
                        #   popUpView: changeSuccessTag   
                        #   popUpDismiss: 2000                  
                        # Change Appointment Successfully
        - .BaseSuccessfulView: ""
          viewTag: changeSuccessTag
          msg: "Changed Successfully!"
          onClick:
            - actionType: evalObject
              object:
                - =..inMeeting.edgeAPI.get: ""
                - ..formData.currentAppointment@: =..inMeeting.edgeResp.edge.0
                - .Global.formData.appointment@: =..inMeeting.edgeResp.edge.0

            - actionType: builtIn
              funcName: redraw
              viewTag: appointmentInfoTag
            - actionType: popUpDismiss
              popUpView: changeSuccessTag
        # Finish Appointment Successfully
        - .BaseSuccessfulView: ""
          viewTag: finishSuccessTag
          msg: "Finish Successfully!"
          onClick:
            - actionType: builtIn
              funcName: goBack
              reload: true
        # vitalSign设置成功
        - .BaseSuccessfulView: ""
          viewTag: vitalSignSuccessTag
          msg: "Successfully!"

        # Provider的个人信息
        - type: popUp
          viewTag: providerProfile
          style:
            width: "1"
            height: "1"
            top: "0"
            left: "0"
            backgroundColor: "0x00000033"
            zIndex: "10"
          children:
            - type: view
              style:
                left: "0.6"
                width: "0.4"
                height: "1"
                backgroundColor: "0xFFFFFF"
              children:
                - .PopUphead:
                  children:
                    - .CreateLabel:
                      text: "Provider Profile"
                    - .Closebutton:
                      onClick:
                        - actionType: popUpDismiss
                          popUpView: providerProfile
                - type: view
                  viewTag: infoView
                  style:
                    height: "0.92"
                    width: "0.31"
                    top: "0.08"
                    left: "0.055"
                  children:
                    - type: view
                      style:
                        width: "0.295"
                        height: "auto"
                        left: "0"
                        marginTop: "0.03"
                      children:
                        - type: image
                          path: providerDefault.svg
                          dataKey: apiRequest.providerInfo.docResp.doc.0.name.data.avatar
                          path=func: .builtIn.utils.prepareDocToPath
                          style:
                            height: "0.082"
                            left: "0"
                            top: "0"
                        - type: label
                          dataKey: apiRequest.providerInfo.docResp.doc.0.name.data.fullName
                          style:
                            left: "0.062"
                            width: "0.14"
                            marginTop: "0"
                            fontSize: .Nfont.nf5
                            fontFamily: "Roboto"
                            fontWeight: "600"
                        - type: view
                          style:
                            left: "0.062"
                            width: "0.14"
                            height: "auto"
                            marginTop: "0.01"
                            fontSize: .Nfont.nf2
                            fontFamily: "Roboto"
                            display: flex
                            alignItems: center
                          children:
                            - type: label
                              text: "User Name:"
                              dataKey:
                              style:
                                marginLeft: "0"
                            - type: label
                              dataKey: apiRequest.providerInfo.docResp.doc.0.name.data.userName
                              style:
                                marginLeft: "0.01"
                        - type: view
                          style:
                            left: "0.062"
                            width: "0.14"
                            height: "auto"
                            marginTop: "0.01"
                            fontSize: .Nfont.nf2
                            fontFamily: "Roboto"
                            display: flex
                            alignItems: center
                          children:
                            - type: label
                              text: "Phone #:"
                              dataKey:
                              style:
                                marginLeft: "0"
                            - type: label
                              dataKey: apiRequest.providerInfo.docResp.doc.0.name.data.phone
                              style:
                                marginLeft: "0.01"
                    - type: view
                      onClick:
                        - actionType: evalObject
                          object:
                            - ..apiRequest.connection.edgeIn.id.1@: =..apiRequest.providerInfo.docResp.doc.0.bsig
                            - =..apiRequest.connection.edgeAPI.get: ""
                            - .Global.formData.reply.eid@: =..apiRequest.connection.edgeResp.edge.0.id
                            - .Global.formData.reply.name.data.receiverAvatarId@: =..apiRequest.providerInfo.docResp.doc.0.name.data.avatar
                            - .Global.formData.reply.name.data.receiverName@: =..apiRequest.providerInfo.docResp.doc.0.name.data.fullName
                        - goto: NewMessage
                      style:
                        top: "0.04"
                        left: "0.295"
                        height: "auto"
                      children:
                        - type: image
                          path: Inbox.svg
                          style:
                            height: "0.016"
                            marginTop: "0"
                        - type: label
                          text: Mail
                          style:
                            fontSize: .Nfont.nf0
                            fontFamily: "Roboto"
                    - type: scrollView
                      viewTag: prodInfoTag
                      style:
                        width: "0.295"
                        height: "0.74"
                        left: "0"
                        marginTop: "0.02"
                        overflow: hidden
                      children:
                        # Basic Info Start
                        - .ProfileInfoTitle:
                          text: "Basic Info"
                          style:
                            marginTop: "0"
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "First Name"
                            - .ProfileInfoRightText:
                              dataKey: apiRequest.providerInfo.docResp.doc.0.name.data.firstName
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Middle Name"
                            - .ProfileInfoRightText:
                              dataKey: apiRequest.providerInfo.docResp.doc.0.name.data.middleName
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Last Name"
                            - .ProfileInfoRightText:
                              dataKey: apiRequest.providerInfo.docResp.doc.0.name.data.lastName
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Title Training"
                            - .ProfileInfoRightText:
                              dataKey: apiRequest.providerInfo.docResp.doc.0.name.data.title
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Language Spoken"
                            - .ProfileInfoRightText:
                              dataKey: apiRequest.providerInfo.docResp.doc.0.name.data.languages
                              style:
                                wordBreak: break-all
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Gender"
                            - .ProfileInfoRightText:
                              dataKey: apiRequest.providerInfo.docResp.doc.0.name.data.gender
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Email"
                            - .ProfileInfoRightText:
                              dataKey: apiRequest.providerInfo.docResp.doc.0.name.data.email
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Fax #"
                            - .ProfileInfoRightText:
                              dataKey: apiRequest.providerInfo.docResp.doc.0.name.data.fax
                        # Basic Info End

                        # Credentials Start
                        - .ProfileInfoTitle:
                          text: "Credentials"
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Specialty and board certified"
                              style:
                                width: "0.295"
                        - type: list
                          contentType: listObject
                          listObject: ..apiRequest.providerInfo.docResp.doc.0.name.data.specialty
                          iteratorVar: itemObject
                          style:
                            width: "0.295"
                            margin: "0"
                            left: "0"
                            height: "auto"
                          children:
                            - type: listItem
                              itemObject:
                              style:
                                width: "0.295"
                                height: "auto"
                                left: "0"
                                marginTop: ""
                              children:
                                - .ProfileInfoTextView:
                                  children:
                                    - .ProfileInfoLeftText:
                                      dataKey: itemObject.specialty
                                      style:
                                        width: "auto"
                                        fontWeight: ""
                                    - .ProfileInfoRightText:
                                      dataKey: itemObject.boardCertified
                                      style:
                                        marginLeft: "0.02"
                                        width: "0.02"
                                        borderLeft: "1px solid #666666"
                                        fontSize: .Nfont.nf0
                                        textAlign:
                                          x: center
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Medical License"
                              style:
                                width: "0.295"
                        - .ProfileInfoTextView:
                          children:
                            - type: list
                              contentType: listObject
                              listObject: ..apiRequest.providerInfo.docResp.doc.0.name.data.MedicalLicense
                              iteratorVar: itemObject
                              style:
                                width: "0.23"
                                marginLeft: "0.01"
                                margin: "0"
                                height: auto
                              children:
                                - type: listItem
                                  itemObject:
                                  style:
                                    width: "0.23"
                                    height: "0.03"
                                    marginTop: ""
                                    display: flex
                                  children:
                                    - type: label
                                      dataKey: itemObject.medicalLicense
                                      style:
                                        height: "0.03"
                                        fontFamily: "Roboto"
                                        fontSize: .Nfont.nf2
                                        color: "0x333333"
                                        textAlign:
                                          y: top
                                    - type: label
                                      text: "|"
                                      dataKey:
                                      style:
                                        marginLeft: "0.005"
                                        height: "0.03"
                                        fontFamily: "Roboto"
                                        fontSize: .Nfont.nf2
                                        color: "0x333333"
                                        textAlign:
                                          y: top
                                    - type: label
                                      dataKey: itemObject.state
                                      style:
                                        marginLeft: "0.005"
                                        height: "0.03"
                                        fontFamily: "Roboto"
                                        fontSize: .Nfont.nf2
                                        color: "0x333333"
                                        textAlign:
                                          y: top
                                    - type: label
                                      text: "|"
                                      dataKey:
                                      style:
                                        marginLeft: "0.005"
                                        height: "0.03"
                                        fontFamily: "Roboto"
                                        fontSize: .Nfont.nf2
                                        color: "0x333333"
                                        textAlign:
                                          y: top
                                    - type: label
                                      dataKey: itemObject.expiration
                                      style:
                                        marginLeft: "0.005"
                                        height: "0.03"
                                        fontFamily: "Roboto"
                                        fontSize: .Nfont.nf2
                                        color: "0x333333"
                                        textAlign:
                                          y: top
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "NPI #"
                              style:
                            - .ProfileInfoRightText:
                              dataKey: apiRequest.providerInfo.docResp.doc.0.name.data.NPI
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "DEA #"
                              style:
                            - .ProfileInfoRightText:
                              dataKey: apiRequest.providerInfo.docResp.doc.0.name.data.DEA
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Description"
                              style:
                                width: "0.295"
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              dataKey: apiRequest.providerInfo.docResp.doc.0.name.data.description
                              style:
                                fontWeight: ""
                                width: "0.295"
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "Education and training"
                              style:
                                width: "0.295"
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              dataKey: apiRequest.providerInfo.docResp.doc.0.name.data.education
                              style:
                                left: "0"
                                width: "0.295"
                                fontWeight: ""
                        - .ProfileInfoTextView:
                          children:
                            - .ProfileInfoLeftText:
                              text: "CV"
                              style:
                                width: "0.295"
                            - .ProfileInfoRightText:
                              text: "View"
                              # viewTag: cvViewTag
                              style:
                                color: "0x004779"
                                textDecoration: underline
                                isHidden: ..formData.cvViewFlag
                              onClick:
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: viewCvTag
                                - actionType: popUp
                                  popUpView: viewCvTag
                        # Credentials End
                        # 查看图片的弹框 
        - type: popUp
          viewTag: searchCvView
          style:
            left: "0"
            width: "1"
            top: "0"
            height: "1"
            zIndex: "10"
            backgroundColor: "0x00000033"
          children:
            - type: view
              style:
                left: "0.4"
                width: "0.334"
                height: "0.445"
                top: "0.248"
                borderRadius: "5px"
                backgroundColor: "0xffffff"
              children:
                - type: view
                  style:
                    left: "0.264"
                    height: "0.1"
                    marginTop: "0"
                    width: "0.07"
                    display: flex
                    justifyContent: space-around
                    alignItems: center
                  children:
                    - type: image
                      path: close.svg
                      onClick:
                        - actionType: popUpDismiss
                          popUpView: _____.viewTag
                      style:
                        width: "0.012"
                - type: view
                  style:
                    width: "0.334"
                    marginTop: "0"
                    height: "0.365"
                    textAlign:
                      x: center
                  children:
                    - type: image
                      path: null.png
                      dataKey: formData.searchProd.name.data.cv
                      path=func: .builtIn.utils.prepareDocToPath
                      style:
                        width: "0.28"
                        height: "0.3"
        # 邀请provider成功的弹窗
        - .BaseSuccessfulView: ""
          viewTag: inviteSuccessView
          msg: "Invite Successfully!"
          onClick:
            - actionType: evalObject
              object:
                .Global._nonce@:
                  =.builtIn.math.random: ""
            - actionType: evalObject
              object:
                - ..apiRequest.inviteParticipant.edgeReGet.id.0@: =.Global.currentFacility.id
                - ..apiRequest.inviteParticipant.edgeReGet.id.1@: =..formData.currentAppointment.id
                - =..apiRequest.inviteParticipant.edgeAPI.reget: ""
                - ..formData.participant@: =..apiRequest.inviteParticipant.edgeReGetResp.edge
            - actionType: builtIn
              funcName: redraw
              viewTag: participantsView
            - actionType: popUpDismiss
              popUpView: inviteSuccessView
        # 已经邀请过的轻提示
        - .PopupLightPromptRight:
          viewTag: invitedTag
          msg: The person has been invited
        - type: popUp
          viewTag: viewCvTag
          style:
            left: "0"
            width: "1"
            top: "0"
            height: "1"
            zIndex: "10"
            backgroundColor: "0x00000033"
          children:
            - type: view
              style:
                left: "0.37"
                width: "0.334"
                height: "0.445"
                top: "0.248"
                borderRadius: "5px"
                backgroundColor: "0xffffff"
              children:
                - type: view
                  style:
                    left: "0.264"
                    height: "0.1"
                    marginTop: "0"
                    width: "0.07"
                    display: flex
                    justifyContent: space-around
                    alignItems: center
                  children:
                    - type: image
                      path: close.svg
                      onClick:
                        - actionType: popUpDismiss
                          popUpView: _____.viewTag
                      style:
                        width: "0.012"
                - type: view
                  style:
                    width: "0.334"
                    marginTop: "0"
                    height: "0.365"
                    textAlign:
                      x: center
                  children:
                    - type: image
                      path: null.png
                      dataKey: apiRequest.providerInfo.docResp.doc.0.name.data.cv
                      path=func: .builtIn.utils.prepareDocToPath
                      style:
                        width: "0.28"
                        height: "0.3"
        - .BaseWarningView:
          msg1: Warning
          msg2: "The meeting is already in progress, the meeting cannot be modified"
          viewTag: warningView
        #change the amount
        - type: popUp
          viewTag: paymentSetting
          style:
            width: '1'
            height: '1'
            top: '0'
            left: '0'
            backgroundColor: '0x00000033'
            zIndex: "1000"
          children:
            - type: view
              style:
                width: "0.39"
                height: "0.42"
                top: "0.29"
                left: "0.385"
                backgroundColor: "0xffffff"
                zIndex: "201"
                boxShadow: "1px 2px 7px 4px #cccccc"
                borderRadius: "5"
              children:
                - type: view
                  style:
                    marginTop: "0.025"
                    marginLeft: "0.0325"
                  children:
                    - type: label
                      text: Update
                      dataKey:
                      style:
                        width: "0.07"
                        fontSize: .Nfont.n4_2
                        fontWeight: "600"
                        display: inline-block
                        verticalAlign: bottom
                    - type: image
                      path: ConfirmCashOutClose.svg
                      onClick:
                        - actionType: popUpDismiss
                          popUpView: paymentSetting
                      style:
                        marginLeft: "0.25"
                        display: inline-block
                        width: "0.009"
                        marginTop: "0.015"
                - type: view
                  style:
                    marginTop: "0.012"
                    marginLeft: "0.06"
                    width: "0.27"
                  children:
                    - type: label
                      text: Please enter amount and reason for patient appointment.
                      dataKey:
                      style:
                        width: "0.2"
                        fontSize: .Nfont.nf2
                        fontFamily: Proxima Nova
                        color: "0x545454"
                    - type: view
                      style:
                        marginTop: "0.02"
                      children:
                        - type: label
                          text: Patient
                          dataKey:
                          style:
                            left: "0"
                            display: inline-block
                            fontSize: .Nfont.nf1
                            fontFamily: Proxima Nova
                            color: "0x333333"
                        - type: label
                          dataKey: formData.currentAppointment.name.patientName
                          style:
                            left: "0.042"
                            fontSize: .Nfont.nf2
                            fontWeight: "600"
                            fontFamily: Proxima Nova
                            color: "0x333333"
                            display: inline-block
                    - type: view
                      style:
                        marginTop: "0.005"
                      children:
                        - type: label
                          text: Original Amount
                          dataKey:
                          style:
                            left: "0"
                            display: inline-block
                            fontSize: .Nfont.nf1
                            fontFamily: Proxima Nova
                            color: "0x333333"
                        - type: label
                          # text: ff
                          text=func: .builtIn.string.dollarFormat
                          dataKey: formData.fee
                          style:
                            left: "0.042"
                            fontSize: .Nfont.nf2
                            fontWeight: "600"
                            fontFamily: Proxima Nova
                            color: "0x333333"
                            display: inline-block
                    - type: view
                      style:
                        marginTop: "0.006"
                      children:
                        - type: label
                          text: Notes
                          dataKey:
                          style:
                            fontSize: .Nfont.nf1
                            fontFamily: Proxima Nova
                            color: "0x333333"
                        - type: textView
                          placeholder: Appointment canceled by pt
                          dataKey: formData.note
                          style:
                            width: "0.27"
                            marginTop: "0.006"
                            textIndent: "10px"
                            height: "0.06"
                            fontFamily: Proxima Nova
                            border:
                              style: "3"
                            borderWidth: "1"
                            borderColor: "0xc1c1c1"
                            borderRadius: "4"
                    - type: view
                      style:
                        marginTop: "0.006"
                      children:
                        - type: label
                          text: Final Amount
                          dataKey:
                          style:
                            fontSize: .Nfont.nf1
                            fontFamily: Proxima Nova
                            color: "0x333333"
                        - type: view
                          viewTag: settingAmountTag
                          style:
                            marginTop: "0.006"
                            width: "0.07"
                            height: "0.035"
                            boxSizing: border-box
                            border:
                              style: "3"
                            borderWidth: "1"
                            borderColor: ..formData.limitRefundColor
                            borderRadius: "4"
                            textAlign:
                              x: center
                              y: center
                          children:
                            - type: label
                              text: $
                              style:
                                marginLeft: "0.005"
                                display: inline-block
                                verticalAlign: middle
                                fontSize: .Nfont.nf2
                                fontFamily: Proxima Nova
                                color: "0x333333"
                            - type: textField
                              placeholder: "Enter amount"
                              dataKey: formData.changeAmount
                              onChange:
                                - actionType: evalObject
                                  object:
                                    - if:
                                        - =.builtIn.number.judgeNumber:
                                            dataIn:
                                              num: =..formData.changeAmount
                                        - actionType: evalObject
                                          object:
                                            - ..formData.limitRefundColor@: "0xc1c1c1"
                                            - =.builtIn.math.toFixedNum:
                                                dataIn:
                                                  num: =..formData.changeAmount
                                                dataOut: PatientSummary.formData.changeAmount
                                        - ..formData.limitRefundColor@: "0xff0000"
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: settingAmountTag
                              style:
                                marginLeft: "0.005"
                                boxSizing: border-box
                                width: "0.045"
                                display: inline-block
                                verticalAlign: middle
                                border:
                                  style: "1"
                                borderWidth: "1"
                    - type: view
                      style:
                        marginTop: "0.032"
                        width: "0.27"
                        textAlign:
                          x: right
                          y: center
                      children:
                        - type: label
                          text: Cancel
                          dataKey:
                          style:
                            display: inline-block
                            fontSize: .Nfont.nf4
                            color: "0x4c5264"
                            textDecoration: underline
                          onClick:
                            - actionType: popUpDismiss
                              popUpView: paymentSetting
                        - type: button
                          text: Change
                          onClick:
                            - actionType: evalObject
                              object:
                                - ..formData.fee@: =..formData.changeAmount
                                - ..formData.meetingStatus@: =..formData.changeAmount
                                - ..apiRequest.changeAppointmentFee.docStoreReq.name.data.paymentInfo.fee@: =..formData.fee
                                - ..apiRequest.changeAppointmentFee.docStoreReq.name.data.paymentInfo.note@: =..formData.note
                                #  有点问题 有待讨论
                                - =..apiRequest.changeAppointmentFee.docAPI.store: ""
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..formData.changeAmount
                                          string2: "0.00"
                                    - actionType: evalObject
                                      object:
                                        - ..apiRequest.paymentFeeBit.docReq.eid@: =.Global.formData.meetingDocEid
                                        - ..apiRequest.paymentFeeBit.docReq.reid@: =.Global.formData.meetingDocReid
                                        - =..apiRequest.paymentFeeBit.docAPI.store: ""
                                    - actionType: evalObject
                                      object:
                                        - ..apiRequest.paymentNotFeeBit.docReq.eid@: =.Global.formData.meetingDocEid
                                        - ..apiRequest.paymentNotFeeBit.docReq.reid@: =.Global.formData.meetingDocReid
                                        - =..apiRequest.paymentNotFeeBit.docAPI.store: ""

                            - actionType: builtIn
                              funcName: redraw
                              viewTag: appointmentStatusTag
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: paymentViewData
                            - actionType: popUpDismiss
                              popUpView: paymentSetting

                          style:
                            marginLeft: "0.02"
                            border:
                              style: "1"
                            borderRadius: "5"
                            color: "0xffffff"
                            display: inline-block
                            fontSize: .Nfont.nf4
                            width: "0.055"
                            height: "0.038"
                            backgroundColor: "0xe24445"
                            fontWeight: "600"
                            textAlign:
                              x: center
                              y: center

        - type: view
          msg:
          style:
            left: "0"
            width: "1"
            top: "0"
            height: "1"
            display: ..formData.controlHashTime
            backgroundColor: "0x00000033"
            zIndex: "10"
          children:
            - .BaseJudgeInnerView:
              children:
                # - .BaseJudgeCancelImg: 
                - .BaseJudgeTxt:
                  text: "--"
                  dataKey: formData.updatePatientInfo
                  style:
                    marginTop: "0.06"
                - .BaseJudgeButtonView:
                  children:
                    - .BaseJudgeButtonNo:
                      text: View
                      style:
                        left: "0.14"
                        fontWeight: "600"
                        textDecoration: underline
                        color: "0x004e8f"
                      onClick:
                        - actionType: evalObject
                          object:
                            - ..apiRequest.profileFriend.docStoreReq@: =..apiRequest.profileFriend.docResp.doc.0
                            - ..apiRequest.profileFriend.docStoreReq.name@: =..profile.docResponse.doc.0.name
                            - =..apiRequest.profileFriend.docAPI.store: ""
                            - .Global.formData.patientInfo@: =..apiRequest.profileFriend.docStoreResp.doc

                            # - ..apiRequest.hashTag.docStoreReq@: =..apiRequest.hashTag.docQueryResp.doc.0
                            - ..apiRequest.hashTag.docStoreReq.name.data.hashTime@: =..apiRequest.hashTag.docReGetResp.doc.0.name.data.hashTime
                            - ..apiRequest.hashTag.docStoreReq.name.data.hashCode@: =..apiRequest.hashTag.docReGetResp.doc.0.name.data.hashCode
                            - ..apiRequest.hashTag.docStoreReq.eid@: =..formData.currentAppointment.id
                            - ..apiRequest.hashTag.docStoreReq.reid@: =..apiRequest.profileFriend.docResp.doc.0.id
                            - =..apiRequest.hashTag.docAPI.store: ""

                        - goto: PatientProfile

    - type: popUp
      viewTag: noAvailableTag
      message: "There is no appointment available"
      path: aboutBlue.svg
      style:
        width: "0.3"
        height: "0.4"
        top: "0.3"
        left: "0.415"
        zIndex: "100000"
        backgroundColor: "0xffffff"
        borderRadius: "7"
        border:
          style: "3"
        borderColor: "#f4f8fa"
        boxShadow: "1px 1px  5px 2px #cccccc"
      children:
        - type: image
          path: __.path
          style:
            left: "0.12"
            width: "0.06"
            top: "0.04"
        - type: label
          text: __.message
          text2: _.text3 # "v'
          text3: "v"
          text4: __.children.1.text # "ok"
          style:
            .LabelStyle:
              left: "0"
              top: "0.18"
              width: "0.3"
              height: "0.06"
              color: "0x000000"
              fontSize: .Nfont.nf4
              fontFamily: "sans-serif"
              textAlign:
                x: center
                y: center
        - type: button
          text: ok
          style:
            width: "0.06"
            left: "0.12"
            height: "0.04"
            top: "0.3"
            color: "0xffffff"
            backgroundColor: "#005795"
            fontSize: .Nfont.nf4
            border:
              style: "3"
              color: "#005795"
            borderRadius: "5"
          onClick:
            - actionType: popUpDismiss
              popUpView: noAvailableTag
    - type: popUp
      viewTag: dateCheck
      message: "Please don't choose the past time"
      path: aboutBlue.svg
      style:
        width: "0.3"
        height: "0.4"
        top: "0.3"
        left: "0.415"
        zIndex: "100000"
        backgroundColor: "0xffffff"
        borderRadius: "7"
        border:
          style: "3"
        borderColor: "#f4f8fa"
        boxShadow: "1px 1px  5px 2px #cccccc"
      children:
        - type: image
          path: __.path
          style:
            left: "0.12"
            width: "0.06"
            top: "0.04"
        - type: label
          text: __.message
          text2: _.text3 # "v'
          text3: "v"
          text4: __.children.1.text # "ok"
          style:
            .LabelStyle:
              left: "0"
              top: "0.18"
              width: "0.3"
              height: "0.06"
              color: "0x000000"
              fontSize: .Nfont.nf4
              # fontStyle: "bold"
              fontFamily: "sans-serif"
              textAlign:
                x: center
                y: center
        - type: button
          text: ok
          style:
            width: "0.06"
            left: "0.12"
            height: "0.04"
            top: "0.3"
            color: "0xffffff"
            backgroundColor: "#005795"
            fontSize: .Nfont.nf4
            border:
              style: "3"
              color: "#005795"
            borderRadius: "5"
          onClick:
            - actionType: popUpDismiss
              popUpView: dateCheck
