MacroDetail:
  title: "Macro Detail"
  init:
    # 弹窗编辑时的数据
    - if:
        - =.Global.formData.currentMacro.id
        - actionType: evalObject
          object:
            - ..apiRequest.macro.document@: =.Global.formData.currentMacro
            - ..formData.macroFlag@: false
            - ..formData.macroConfirmClr@: "0x005795"
        - continue
    # 清空
    - actionType: updateObject
      dataKey: Global.formData.currentMacro
      dataObject: {}
    # 设置Macro的展示属性
    - ..formData.macro.doc@: =.Global.macro.resp.doc
    # 记录Macro长度
    - =.builtIn.array.getListLength:
        dataIn:
          object: =..formData.macro.doc
        dataOut: MacroDetail.formData.macroListLength
    - actionType: evalObject
      object: ..macroRedraw
  formData:
    macro:
      doc: []
    macroFlag: true # true是创建Macro, false是编辑Macro(update),用于页面Back时是否弹窗提示保存以及编辑时是否添加到Global
    macroDisplay: "none"
    noMacroDisplay: "block"
    macroConfirmClr: "0xc1c1c1"
    isAllSelected: false # 是否全选
    selectedMacroList: []       
    selectedMacroListLength: "0" # 记录选中的Macro数量
    macroListLength: "0" # 记录全部Macro长度

  formDataTemp:
  macroRedraw:
    - if:
        - =..formData.macro.doc.0.id
        - actionType: evalObject
          object:
            # 设置More、Hide属性
            - =.builtIn.object.setObjectKey:
                dataIn:
                  objectArr: =..formData.macro.doc
                  key: isHideMacroContent
                  value: none
                dataOut: MacroDetail.formData.macro.doc
            - =.builtIn.object.setObjectKey:
                dataIn:
                  objectArr: =..formData.macro.doc
                  key: isMoreMacroContent
                  value: block
                dataOut: MacroDetail.formData.macro.doc
            # 展示列表
            - ..formData.macroDisplay@: "block"
            - ..formData.noMacroDisplay@: "none"
        - actionType: evalObject
          object:
            # 隐藏列表
            - ..formData.macroDisplay@: "none"
            - ..formData.noMacroDisplay@: "block"
    - actionType: builtIn
      funcName: redraw
      viewTag: noMacroDataVT
    - actionType: builtIn
      funcName: redraw
      viewTag: macroDataVT
  apiRequest:
    macro:
      response: ""
      document:
        .Document: ""
        eid: .Global.fac_rootNotebook
        type: .DocType.Macro
        name:
          type: "text/plain"
          title: ""
          data:
            content: ""
      deleteReq:
        id: []
      docAPI:
        .DocAPI: ""
        store:
          api: cd
          dataIn: apiRequest.macro.document
          dataOut: MacroDetail.apiRequest.macro.response
          subtype:
            mediaType: "text/plain" # mediaType : "image/jpeg"
        delete:
          api: dx
          dataIn: MacroDetail.apiRequest.macro.deleteReq
  components:
    - type: view
      style:
        width: '1'
        height: '1'
        margin: auto
      children:
        - .SideMenuBar:
          children:
            - .aitLogo:
            - .MenuBar:
        - .TopBar:
        - .BodyView:
          style:
            height: "0.93"
          children:
            - .AppointmentLobby:
            - .GotoBack:
              onClick:
                - actionType: evalObject
                  object:
                    - if:
                        - =..formData.macroFlag # false表示更改Macro需要提示是否保存
                        - actionType: builtIn
                          funcName: goBack
                          reload: true
                        - actionType: popUp
                          popUpView: saveMacroTag
            - type: view
              style:
                left: "0.008"
                width: "0.824"
                height: "0.816"
                top: "0.1"
                overflow: hidden
                backgroundColor: "0xffffff"
                borderRadius: "6"
              children:
                # Left Body
                - type: view
                  viewTag: editMacroTag
                  style:
                    top: "0.03"
                    left: "0.026"
                    width: "0.32"
                    height: "0.738"
                  children:
                    - type: view
                      style:
                        height: "0.65"
                      children:
                        - .ProFormsLabel:
                          text: Title
                        - .ProFormsTextField:
                          dataKey: apiRequest.macro.document.name.title
                          onInput:
                            - actionType: evalObject
                              object:
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..apiRequest.macro.document.name.data.content
                                          string2: ""
                                    - ..formData.macroConfirmClr@: "0xc1c1c1"
                                    - ..formData.macroConfirmClr@: "0x005795"
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: confirmMacroTag
                          style:
                            width: "0.32"
                        - .ProFormsLabel:
                          text: Content
                          style:
                            marginTop: "0.011"
                        - .ProFormsTextView:
                          dataKey: apiRequest.macro.document.name.data.content
                          # onChange:
                          #   - actionType: evalObject
                          #     object:
                          #       - if: 
                          #         - =.builtIn.string.equal:
                          #             dataIn:
                          #               string1: =..apiRequest.macro.document.name.data.content
                          #               string2: ""
                          #         - ..formData.macroConfirmClr@: "0xc1c1c1"
                          #         - ..formData.macroConfirmClr@: "0x005795"
                          #   - actionType: builtIn
                          #     funcName: redraw
                          #     viewTag: confirmMacroTag
                          onInput:
                            - actionType: evalObject
                              object:
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..apiRequest.macro.document.name.title
                                          string2: ""
                                    - ..formData.macroConfirmClr@: "0xc1c1c1"
                                    - ..formData.macroConfirmClr@: "0x005795"
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: confirmMacroTag
                          style:
                            width: "0.32"
                            height: "0.563"
                    - .StandBtn:
                      viewTag: confirmMacroTag
                      btnText: "Confirm"
                      style:
                        marginTop: "0.046"
                        left: "0.07488"
                        width: "0.17"
                        backgroundColor: ..formData.macroConfirmClr
                      onClick:
                        - actionType: evalObject
                          object:
                            # - if:
                            #   - =..apiRequest.macro.document.name.title
                            #   - continue
                            #   - ..apiRequest.macro.document.name.title@: "Macro"
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..apiRequest.macro.document.name.title
                                      string2: ""
                                - actionType: popUp
                                  popUpView: alertTag
                                  popUpDismiss: 800
                                  wait: true
                                - continue
                            - if:
                                - =..apiRequest.macro.document.name.data.content
                                - actionType: evalObject
                                  object:
                                    - =..apiRequest.macro.docAPI.store: ""
                                    - ..apiRequest.macro.document.id@: ""
                                    - ..apiRequest.macro.document.name.title@: ""
                                    - ..apiRequest.macro.document.name.data.content@: ""
                                    - ..formData.macroConfirmClr@: "0xc1c1c1"
                                    # Add&Update Macro
                                    - if:
                                        - =..formData.macroFlag
                                        - actionType: evalObject
                                          object:
                                            - actionType: popUp
                                              popUpView: addMacroSucTag
                                              popUpDismiss: 1200
                                            # 增加Macro
                                            # - =.builtIn.array.add:
                                            #     dataIn:
                                            #       object: =..formData.macro.doc
                                            #       value: =..apiRequest.macro.response.doc
                                            - =.builtIn.array.push:
                                                dataIn:
                                                  messages: =..formData.macro.doc
                                                  newMessage: =..apiRequest.macro.response.doc
                                                dataOut: MacroDetail.formData.macro.doc
                                            # 更新Macro长度
                                            - =.builtIn.array.getListLength:
                                                dataIn:
                                                  object: =..formData.macro.doc
                                                dataOut: MacroDetail.formData.macroListLength
                                        - actionType: evalObject
                                          object:
                                            # 更改Macro
                                            - =.builtIn.array.ChangeAnItemInArray:
                                                dataIn:
                                                  array: =..formData.macro.doc
                                                  path: "id"
                                                  obj: =..apiRequest.macro.response.doc
                                    # 更改为默认是创建Macro状态
                                    - ..formData.macroFlag@: true
                                    # Update Global Macro
                                    - .Global.macro.resp.doc@: =..formData.macro.doc
                                    # 设置Macro的展示属性
                                    # - ..macroRedraw
                                    - if:
                                        - =..formData.macro.doc.0.id
                                        - actionType: evalObject
                                          object:
                                            # 设置More、Hide属性
                                            - =.builtIn.object.setObjectKey:
                                                dataIn:
                                                  objectArr: =..formData.macro.doc
                                                  key: isHideMacroContent
                                                  value: none
                                                dataOut: MacroDetail.formData.macro.doc
                                            - =.builtIn.object.setObjectKey:
                                                dataIn:
                                                  objectArr: =..formData.macro.doc
                                                  key: isMoreMacroContent
                                                  value: block
                                                dataOut: MacroDetail.formData.macro.doc
                                            # 展示列表
                                            - ..formData.macroDisplay@: "block"
                                            - ..formData.noMacroDisplay@: "none"
                                        - actionType: evalObject
                                          object:
                                            # 隐藏列表
                                            - ..formData.macroDisplay@: "none"
                                            - ..formData.noMacroDisplay@: "block"
                                    - actionType: builtIn
                                      funcName: redraw
                                      viewTag: noMacroDataVT
                                    - actionType: builtIn
                                      funcName: redraw
                                      viewTag: macroDataVT
                                - actionType: popUp
                                  popUpView: alertTag
                                  popUpDismiss: 2000
                                  wait: true
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: editMacroTag
                # Right Body
                - type: view
                  style:
                    top: "0.03"
                    left: "0.384"
                    backgroundColor: "0xeff0f2"
                    width: "0.4"
                    height: "0.738"
                    borderRadius: "8"
                  children:
                    - type: label
                      text: "Macro List"
                      style:
                        left: "0.023"
                        marginTop: "0.013"
                        color: "0x333333"
                        fontSize: .Nfont.nf2
                        fontWeight: "700"
                    # 没有Macro
                    - type: view
                      viewTag: noMacroDataVT
                      style:
                        display: ..formData.noMacroDisplay
                        marginTop: "0.011"
                        left: "0.0125"
                        backgroundColor: "0xffffff"
                        width: "0.375"
                        height: "0.678"
                        borderRadius: "6"
                      children:
                        - type: image
                          path: noMacro.svg
                          style:
                            marginTop: "0.2"
                            left: "0.128"
                            width: "0.126"
                            height: "0.2"
                        - type: label
                          text: "No Macro here, please add from the left area."
                          style:
                            marginTop: "0.0534"
                            left: "0.097"
                            color: "0x666666"
                            fontSize: .Nfont.nf3
                            fontWeight: "700"
                    # 有Macro
                    - type: view
                      viewTag: macroDataVT
                      style:
                        display: ..formData.macroDisplay
                        marginTop: "0.011"
                        left: "0.0125"
                        backgroundColor: "0xffffff"
                        width: "0.375"
                        height: "0.678"
                        borderRadius: "6"
                      children:
                        - type: view
                          style:
                            width: "0.375"
                            height: "0.06"
                            border:
                              style: "2"
                            borderWidth: "1"
                            borderColor: "0xdedede"
                          children:
                            - type: image
                              viewTag: allSelectedImgView
                              path:
                                emit:
                                  actions:
                                    - if:
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: true
                                              string2: =..formData.isAllSelected
                                        - selectBlue.svg
                                        - selectGray.svg
                              onClick:
                                - actionType: evalObject
                                  object:
                                    - if:
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: =..formData.isAllSelected
                                              string2: true
                                        # 取消全选
                                        - actionType: evalObject
                                          object:
                                            - ..formData.isAllSelected@: false
                                            - =.builtIn.object.setObjectKey:
                                                dataIn:
                                                  objectArr: =..formData.macro.doc
                                                  key: isSelected
                                                  value: false
                                                dataOut: MacroDetail.formData.macro.doc
                                            - ..formData.selectedMacroList@: []
                                            - ..formData.selectedMacroListLength@: "0"
                                        # 全选
                                        - actionType: evalObject
                                          object:
                                            - ..formData.isAllSelected@: true
                                            - =.builtIn.object.setObjectKey:
                                                dataIn:
                                                  objectArr: =..formData.macro.doc
                                                  key: isSelected
                                                  value: true
                                                dataOut: MacroDetail.formData.macro.doc
                                            - ..formData.selectedMacroList@: =..formData.macro.doc
                                            - ..formData.selectedMacroListLength@: =..formData.macroListLength
                                            # - =.builtIn.array.getListLength: 
                                            #     dataIn: 
                                            #       object: =..formData.selectedMacroList
                                            #     dataOut: MacroDetail.formData.selectedMacroListLength                                                                        
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: macroDataVT
                              style:
                                left: "0.01"
                                top: "0.022"
                                height: "0.01472"
                                width: "0.00832"
                            - type: image
                              path: cash.svg
                              onClick:
                                - actionType: evalObject
                                  object:
                                    - if:
                                        - =..formData.selectedMacroList.0
                                        - actionType: popUp
                                          popUpView: deleteMacroTag
                                        - actionType: popUp
                                          popUpView: noSelectMacroTag
                                          popUpDismiss: 800
                              style:
                                left: "0.0345"
                                top: "0.02"
                                width: "0.0104"
                                height: "0.0184"
                        - type: scrollView
                          style:
                            left: "0.01"
                            width: "0.3575"
                            height: "0.6"
                            # backgroundColor: "0xff000022"
                          children:
                            - type: list
                              contentType: listObject
                              listObject: ..formData.macro.doc
                              iteratorVar: itemObject
                              style:
                                width: "0.3575"
                                margin: "0"
                                height: auto
                              children:
                                - type: listItem
                                  viewTag: dataView
                                  itemObject:
                                  style:
                                    width: "0.3575"
                                    height: "auto"
                                    marginTop: "0"
                                  children:
                                    - type: image
                                      viewTag: selectImgView
                                      path:
                                        emit:
                                          dataKey:
                                            var: itemObject
                                          actions:
                                            - if:
                                                - =.builtIn.string.equal:
                                                    dataIn:
                                                      string1: true
                                                      string2: $var.isSelected
                                                - selectBlue.svg
                                                - selectGray.svg
                                      onClick:
                                        - emit:
                                            dataKey:
                                              var: itemObject
                                            actions:
                                              - if:
                                                  - =.builtIn.string.equal:
                                                      dataIn:
                                                        string1: true
                                                        string2: $var.isSelected
                                                  - =.builtIn.object.set:
                                                      dataIn:
                                                        object: $var
                                                        key: isSelected
                                                        value: false
                                                  - =.builtIn.object.set:
                                                      dataIn:
                                                        object: $var
                                                        key: isSelected
                                                        value: true
                                              - if:
                                                  - =.builtIn.string.equal:
                                                      dataIn:
                                                        string1: true
                                                        string2: $var.isSelected
                                                  - =.builtIn.array.add:
                                                      dataIn:
                                                        object: =..formData.selectedMacroList
                                                        value: $var
                                                  - =.builtIn.array.removeById:
                                                      dataIn:
                                                        object: =..formData.selectedMacroList
                                                        id: $var.id
                                        # 每选中一条Macro判断是否全选以更新“全选”图片
                                        - actionType: evalObject
                                          object:
                                            # - =.builtIn.array.getListLength: 
                                            #     dataIn: 
                                            #       object: =..formData.macro.doc
                                            #     dataOut: MacroDetail.formData.macroListLength
                                            - =.builtIn.array.getListLength:
                                                dataIn:
                                                  object: =..formData.selectedMacroList
                                                dataOut: MacroDetail.formData.selectedMacroListLength
                                            - if:
                                                - =.builtIn.string.equal:
                                                    dataIn:
                                                      string1: =..formData.macroListLength
                                                      string2: =..formData.selectedMacroListLength
                                                - ..formData.isAllSelected@: true
                                                - ..formData.isAllSelected@: false
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: selectImgView
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: allSelectedImgView
                                      style:
                                        top: "0.03"
                                        height: "0.01472"
                                        width: "0.00832"
                                    - type: view
                                      style:
                                        left: "0.017"
                                        width: "0.34"
                                        border:
                                          style: "2"
                                        borderWidth: "1"
                                        borderColor: "0xdedede"
                                      children:
                                        - type: view
                                          style:
                                            display: inline-block
                                            width: "0.276"
                                            height: "auto"
                                            paddingTop: "0.0182"
                                            paddingBottom: "0.0182"
                                          children:
                                            - type: label
                                              dataKey: itemObject.name.title
                                              style:
                                                fontSize: .Nfont.nf2
                                                fontWeight: "700"
                                                fontFamily: "Arial"
                                                color: "0x333333"
                                            - type: view
                                              viewTag: moreContentTag
                                              style:
                                                display: itemObject.isMoreMacroContent
                                                width: "0.276"
                                              children:
                                                - type: label
                                                  dataKey: itemObject.name.data.content
                                                  style:
                                                    width: "0.25"
                                                    color: "0x333333"
                                                    fontSize: .Nfont.nf1
                                                    display: inline-block
                                                    overflow: hidden
                                                    textOverflow: ellipsis
                                                    whiteSpace: nowrap
                                                - type: label
                                                  text: "More"
                                                  style:
                                                    marginLeft: "0.0046"
                                                    display: inline-block
                                                    textDecoration: underline
                                                    fontSize: .Nfont.nf1
                                                    fontWeight: "400"
                                                    color: "0x005795"
                                                  onClick:
                                                    - emit:
                                                        dataKey:
                                                          var: itemObject
                                                        actions:
                                                          - =.builtIn.object.setProperty:
                                                              dataIn:
                                                                obj: =..formData.macro.doc
                                                                label: "id"
                                                                text: $var.id
                                                                arr: [ "isHideMacroContent", "isMoreMacroContent" ]
                                                                valueArr: [ "block", "none" ]
                                                                errorArr: [ "none", "block" ]
                                                    - actionType: builtIn
                                                      funcName: redraw
                                                      viewTag: dataView
                                            - type: view
                                              viewTag: hideContentTag
                                              style:
                                                display: itemObject.isHideMacroContent
                                                wordBreak: break-all
                                                width: "0.276"
                                              children:
                                                - type: label
                                                  dataKey: itemObject.name.data.content
                                                  style:
                                                    display: inline
                                                    fontSize: .Nfont.nf1
                                                    fontWeight: "400"
                                                    color: "0x333333"
                                                - type: label
                                                  text: "Hide"
                                                  style:
                                                    marginLeft: "0.0046"
                                                    display: inline
                                                    textDecoration: underline
                                                    fontSize: .Nfont.nf1
                                                    fontWeight: "400"
                                                    color: "0x005795"
                                                  onClick:
                                                    - emit:
                                                        dataKey:
                                                          var: itemObject
                                                        actions:
                                                          - =.builtIn.object.setProperty:
                                                              dataIn:
                                                                obj: =..formData.macro.doc
                                                                label: "id"
                                                                text: $var.id
                                                                arr: [ "isHideMacroContent", "isMoreMacroContent" ]
                                                                valueArr: [ "none", "block" ]
                                                                errorArr: [ "none", "block" ]
                                                    - actionType: builtIn
                                                      funcName: redraw
                                                      viewTag: dataView
                                        - type: view
                                          style:
                                            marginLeft: "0.022"
                                            display: inline-block
                                            width: "0.042"
                                            height: "0.0736"
                                          children:
                                            - type: image
                                              path: editPenMainBlue.svg
                                              style:
                                                marginTop: "0.03"
                                                height: "0.01472"
                                              onClick:
                                                - emit:
                                                    dataKey:
                                                      var: itemObject
                                                    actions:
                                                      - ..apiRequest.macro.document@: $var
                                                      - ..formData.macroFlag@: false
                                                      - ..formData.macroConfirmClr@: "0x005795"
                                                - actionType: builtIn
                                                  funcName: redraw
                                                  viewTag: editMacroTag
                                            - type: image
                                              path: copyNewBlue.svg
                                              style:
                                                marginTop: "0.03"
                                                marginLeft: "0.024"
                                                height: "0.01472"
                                              onClick:
                                                - actionType: updateObject
                                                  dataObject: itemObject
                                                  dataKey: Global.docReference.document
                                                - actionType: evalObject
                                                  object:
                                                    - =.builtIn.utils.copyToClip:
                                                        dataIn:
                                                          object: =.Global.docReference.document.name.data.content
                                                        dataOut: Global.formData.macroCopied
                                                    - actionType: popUp
                                                      popUpView: copyMacroSucTag
                                                      popUpDismiss: 800
        # Macro 更改是否保存弹窗
        - .BaseJudgeView:
          viewTag: saveMacroTag
          msg: "Do you want to save your changes?"
          style:
            width: "1"
            height: "1"
            top: "0"
            backgroundColor: "0x00000033"
            zIndex: "10"
          children:
            - .BaseJudgeInnerView:
              style:
                top: "0.378"
                width: "0.315"
                height: "0.217"
                left: "0.42"
                boxShadow: ""
              children:
                - .BaseJudgeCancelImg:
                  style:
                    left: "0.296"
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: ____.viewTag
                - .BaseJudgeTxt:
                  style:
                    fontSize: .Nfont.nf4
                    fontWeight: "500"
                - .BaseJudgeButtonView:
                  style:
                    width: "0.315"
                  children:
                    - .BaseJudgeButtonNo:
                      style:
                        textDecoration: underline
                        fontSize: .Nfont.nf3
                        fontWeight: "600"
                      onClick:
                        - actionType: evalObject
                          object:
                            - ..apiRequest.macro.document.name.title@: ""
                            - ..apiRequest.macro.document.name.data.content@: ""
                        - actionType: popUpDismiss
                          popUpView: _____.viewTag
                        - actionType: builtIn
                          funcName: goBack
                          reload: true
                    - .BaseJudgeButtonYes:
                      style:
                        fontSize: .Nfont.nf2
                        fontWeight: "600"
                      onClick:
                        - actionType: popUpDismiss
                          popUpView: _____.viewTag
                        - actionType: evalObject
                          object:
                            # - if:
                            #   - =..apiRequest.macro.document.name.title
                            #   - continue
                            #   - ..apiRequest.macro.document.name.title@: "Macro"
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..apiRequest.macro.document.name.title
                                      string2: ""
                                - actionType: popUp
                                  popUpView: alertTag
                                  popUpDismiss: 800
                                  wait: true
                                - continue
                            - if:
                                - =..apiRequest.macro.document.name.data.content
                                - actionType: evalObject
                                  object:
                                    - =..apiRequest.macro.docAPI.store: ""
                                    # Update Global Macro
                                    - =.builtIn.array.ChangeAnItemInArray:
                                        dataIn:
                                          array: =.Global.macro.resp.doc
                                          path: "id"
                                          obj: =..apiRequest.macro.response.doc
                                    - actionType: builtIn
                                      funcName: goBack
                                      reload: true
                                - actionType: popUp
                                  popUpView: alertTag
                                  popUpDismiss: 2000
                                  wait: true
        # Macro 删除是否确认弹窗
        - .BaseJudgeView:
          viewTag: deleteMacroTag
          msg: "Are you sure you want to delete it?"
          style:
            width: "1"
            height: "1"
            top: "0"
            backgroundColor: "0x00000033"
            zIndex: "10"
          children:
            - .BaseJudgeInnerView:
              style:
                top: "0.378"
                width: "0.315"
                height: "0.217"
                left: "0.42"
                boxShadow: ""
              children:
                - .BaseJudgeCancelImg:
                  style:
                    left: "0.296"
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: ____.viewTag
                - .BaseJudgeTxt:
                  style:
                    fontSize: .Nfont.nf4
                    fontWeight: "500"
                - .BaseJudgeButtonView:
                  style:
                    width: "0.315"
                  children:
                    - .BaseJudgeButtonNo:
                      text: "Cancel"
                      style:
                        textDecoration: underline
                        fontSize: .Nfont.nf3
                        fontWeight: "600"
                      onClick:
                        - actionType: popUpDismiss
                          popUpView: _____.viewTag
                    - .BaseJudgeButtonYes:
                      text: "Confirm"
                      style:
                        fontSize: .Nfont.nf2
                        fontWeight: "600"
                      onClick:
                        - actionType: popUpDismiss
                          popUpView: _____.viewTag
                        - actionType: evalObject
                          object:
                            # 删除Macro
                            ## 删除远程
                            - =.builtIn.array.selectOneToArr:
                                dataIn:
                                  arr: =..formData.selectedMacroList
                                  key: "id"
                                dataOut: MacroDetail.apiRequest.macro.deleteReq.id
                            - =..apiRequest.macro.docAPI.delete: ""
                            ## 删除本地
                            - =.builtIn.array.removeByArray:
                                dataIn:
                                  parentObject: =..formData.macro.doc
                                  subObject: =..formData.selectedMacroList
                                  key: "id"
                                dataOut: MacroDetail.formData.macro.doc
                            # Update Global Macro
                            - .Global.macro.resp.doc@: =..formData.macro.doc
                            # 更新Macro长度
                            - =.builtIn.array.getListLength:
                                dataIn:
                                  object: =..formData.macro.doc
                                dataOut: MacroDetail.formData.macroListLength
                            # 恢复列表显示初始状态
                            - =.builtIn.object.setObjectKey:
                                dataIn:
                                  objectArr: =..formData.macro.doc
                                  key: isSelected
                                  value: false
                                dataOut: MacroDetail.formData.macro.doc
                            - ..formData.isAllSelected@: false
                            - ..formData.selectedMacroList@: []
                            - ..formData.selectedMacroListLength@: "0"
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: macroDataVT
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: selectImgView
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: allSelectedImgView
                        - actionType: popUp
                          popUpView: deleteSuccessTag
        # Macro 删除成功弹窗
        - .BaseSuccessfulView:
          viewTag: deleteSuccessTag
          msg: "Delete Successfully!"
        # Macro 填写Content提示弹窗
        - .PopupLightPrompt:
          viewTag: alertTag
          msg: "Please complete the required items."
        # Macro 删除提示弹窗（是否选中了Macro）
        - .PopupLightPrompt:
          viewTag: noSelectMacroTag
          msg: "You didn't chose any Macro."
        # Macro 添加成功弹窗
        - .PopupLightPrompt:
          viewTag: addMacroSucTag
          msg: "Add successfully!"
          style:
            left: "0"
            width: "1"
            top: "0"
            height: "1"
            backgroundColor: ""
            zIndex: "10"
          children:
            - type: view
              style:
                width: "0.3"
                height: "0.05"
                left: "0.43"
                top: "0.092"
                backgroundColor: "0xffffff"
                zIndex: "15"
                display: flex
                justifyContent: center
                alignItems: center
                boxShadow: "0px 4px 15px -8px #707070"
              children:
                - type: image
                  path: copySuccess.svg
                  style:
                    width: "0.015"
                    height: "0.02"
                    left: "0"
                - type: label
                  text: ___.msg
                  dataKey:
                  style:
                    color: "0x30b354"
                    fontWeight: "600"
                    marginLeft: "0.014"
                    textAlign:
                      x: center
                      y: center
        # Macro 复制成功弹窗
        - .PopupLightPrompt:
          viewTag: copyMacroSucTag
          msg: "Copy successfully!"
          style:
            left: "0"
            width: "1"
            top: "0"
            height: "1"
            backgroundColor: ""
            zIndex: "10"
          children:
            - type: view
              style:
                width: "0.3"
                height: "0.05"
                left: "0.43"
                top: "0.092"
                backgroundColor: "0xffffff"
                zIndex: "15"
                display: flex
                justifyContent: center
                alignItems: center
                boxShadow: "0px 4px 15px -8px #707070"
              children:
                - type: image
                  path: copySuccess.svg
                  style:
                    width: "0.015"
                    height: "0.02"
                    left: "0"
                - type: label
                  text: ___.msg
                  dataKey:
                  style:
                    color: "0x30b354"
                    fontWeight: "600"
                    marginLeft: "0.014"
                    textAlign:
                      x: center
                      y: center
