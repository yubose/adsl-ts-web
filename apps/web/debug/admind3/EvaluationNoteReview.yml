EvaluationNoteReview:
  title: 'Evaluation Note'
  init:
    - .SignInCheck
    - ..apiRequest.newNote.docReq@: =.Global.formData.medicalRecords
    - if:
        - =..apiRequest.newNote.docReq.name.data.descriptiveList.0
        - actionType: evalObject
          object:
            - ..formData.isDisplayIcd@: block
            - ..formData.isNoContent@: none
        - continue
    - if:
        - =..apiRequest.newNote.docReq.name.data.whetherSign
        - ..formData.signShow@: "none"
        - ..formData.signShow@: "block"

  formData:
    signShow: "none"
    isDisplayIcd: none
    isNoContent: block
  # 签名显示,默认为none
  apiRequest:
    newNote:
      docResp: ""
      docReq: ""
  components:
    - type: view
      style:
        width: '1'
        height: '1'
        margin: auto
      children:
        - .SideMenuBar:
          children:
            - .aitLogo:
            - .MenuBar:
        - .TopBar:
        - .BodyView:
          style:
            height: "0.93"
          children:
            - .AppointmentLobby:
            - .DownLoadBtn:
              onClick:
                - actionType: evalObject
                  object:
                    - =.builtIn.EcosObj.exportPDF:
                        dataIn:
                          ecosObj: =.Global.formData.medicalRecords
                          viewTag: mainView
            - .GotoBack:
            - type: view
              style:
                left: "0.008"
                width: "0.824"
                height: "0.74"
                top: "0.1"
                overflow: hidden
                backgroundColor: "0xffffff"
              children:
                - type: view
                  viewTag: mainView
                  style:
                    width: "0.59"
                    top: "0"
                    left: "0.117"
                    height: "0.74"
                  children:
                    - type: view
                      style:
                        width: "0.39"
                        margin: "auto"
                      children:
                        - .FormsTypeTitle:
                        - type: scrollView
                          style:
                            marginTop: "0.01"
                            width: "0.39"
                            height: "0.614"
                            overflow: scroll
                          children:
                            - .ProFormsBaseView:
                              style:
                                marginTop: "0.03"
                                height: "0.1"
                              children:
                                - .ProFormsBaseView:
                                  style:
                                    width: "0.135"
                                    display: inline-block
                                  children:
                                    - type: image
                                      path: "office-building.svg"
                                      path=func: .builtIn.utils.prepareDocToPath
                                      dataKey: apiRequest.newNote.docReq.name.data.facilityInfo.facilityAvatarID
                                      style:
                                        marginTop: "0.005"
                                        width: "0.025"
                                        height: "0.04416"
                                        display: inline-block
                                    - type: view
                                      style:
                                        marginTop: "0"
                                        marginLeft: "0.01"
                                        width: "0.1"
                                        display: inline-block
                                      children:
                                        - .ProFormsLabel:
                                          dataKey: apiRequest.newNote.docReq.name.data.facilityInfo.facilityName
                                          style:
                                            marginTop: "0"
                                            fontSize: .Nfont.nf4
                                        - .ProFormsLabel:
                                          dataKey: apiRequest.newNote.docReq.name.data.facilityInfo.address
                                          style:
                                            marginTop: "0.01"
                                            fontSize: .Nfont.nf1
                                - .ProFormsBaseView:
                                  style:
                                    marginLeft: "0.035"
                                    width: "0.12"
                                    display: inline-block
                                  children:
                                    - .ProFormsBaseView:
                                      children:
                                        - .ProFormsLabelLeft:
                                          text: Email
                                        - .ProFormsLabelRight:
                                          dataKey: apiRequest.newNote.docReq.name.data.facilityInfo.email
                                    - .ProFormsBaseView:
                                      children:
                                        - .ProFormsLabelLeft:
                                          text: "Website"
                                        - .ProFormsLabelRight:
                                          dataKey: apiRequest.newNote.docReq.name.data.facilityInfo.website
                                - .ProFormsBaseView:
                                  style:
                                    marginLeft: "0"
                                    width: "0.1"
                                    display: inline-block
                                  children:
                                    - .ProFormsBaseView:
                                      children:
                                        - .ProFormsLabelLeft:
                                          text: "Main #"
                                        - .ProFormsLabelRight:
                                          dataKey: apiRequest.newNote.docReq.name.data.facilityInfo.phone
                                    - .ProFormsBaseView:
                                      children:
                                        - .ProFormsLabelLeft:
                                          text: "Fax #"
                                        - .ProFormsLabelRight:
                                          dataKey: apiRequest.newNote.docReq.name.data.facilityInfo.fax
                            # patient profile start
                            - .ProFormsBaseView:
                              children:
                                - .ProFormsBaseView:
                                  children:
                                    - .ProFormsLabelLeft:
                                      text: Exam Date
                                    - .ProFormsLabelRight:
                                      text=func: .builtIn.string.formatUnixtime_en
                                      dataKey: apiRequest.newNote.docReq.name.data.patientInfo.examDate
                                - .ProFormsBaseView:
                                  children:
                                    - .ProFormsLabelLeft:
                                      text: Patient Name
                                    - .ProFormsLabelRight:
                                      dataKey: apiRequest.newNote.docReq.name.data.patientInfo.fullName
                                - .ProFormsBaseView:
                                  children:
                                    - .ProFormsLabelLeft:
                                      text: Date of Birth
                                    - .ProFormsLabelRight:
                                      dataKey: apiRequest.newNote.docReq.name.data.patientInfo.dob
                                - .ProFormsBaseView:
                                  children:
                                    - .ProFormsLabelLeft:
                                      text: "Phone #"
                                    - .ProFormsLabelRight:
                                      dataKey: apiRequest.newNote.docReq.name.data.patientInfo.phoneNumber
                                - .ProFormsBaseView:
                                  children:
                                    - .ProFormsLabelLeft:
                                      text: "Email"
                                    - .ProFormsLabelRight:
                                      dataKey: apiRequest.newNote.docReq.name.data.patientInfo.email
                                - .ProFormsBaseView:
                                  children:
                                    - .ProFormsLabelLeft:
                                      text: Patient Address
                                    - .ProFormsLabelRight:
                                      dataKey: apiRequest.newNote.docReq.name.data.patientInfo.address
                                      # patient profile end  
                            - .ProFormsDivider:
                            - .ProFormsBaseView:
                              style:
                                marginTop: "0.03"
                              children:
                                - .ProFormsLabel:
                                  text: 'Physician Evaluation Report'
                                  style:
                                    fontSize: .Nfont.nf2
                                    fontWeight: "600"
                                - .ProFormsBaseView:
                                  style:
                                    marginTop: "0.01"
                                  children:
                                    - .ProFormsLabel:
                                      text: 'HPI & Patient History'
                                    - .ProFormsGrayView:
                                      children:
                                        - .ProFormsLabelLeft:
                                          dataKey: apiRequest.newNote.docReq.name.data.patientHistory
                                          style:
                                            color: "0x333333"
                                            marginLeft: "0.0046"
                                            paddingTop: "0.0046"
                                            paddingBottom: "0.0046"
                                - .ProFormsBaseView:
                                  style:
                                    marginTop: "0.03"
                                  children:
                                    - .ProFormsLabel:
                                      text: 'Physical Examination'
                                    - .ProFormsGrayView:
                                      children:
                                        - .ProFormsLabelLeft:
                                          dataKey: apiRequest.newNote.docReq.name.data.PhysicalExamination
                                          style:
                                            color: "0x333333"
                                            marginLeft: "0.0046"
                                            paddingTop: "0.0046"
                                            paddingBottom: "0.0046"
                                - .ProFormsBaseView:
                                  style:
                                    marginTop: "0.03"
                                  children:
                                    - .ProFormsLabel:
                                      text: 'Lab and imaging summary'
                                    - .ProFormsGrayView:
                                      children:
                                        - .ProFormsLabelLeft:
                                          dataKey: apiRequest.newNote.docReq.name.data.LabAndImage
                                          style:
                                            color: "0x333333"
                                            marginLeft: "0.0046"
                                            paddingTop: "0.0046"
                                            paddingBottom: "0.0046"
                                - .ProFormsBaseView:
                                  style:
                                    marginTop: "0.03"
                                  children:
                                    - .ProFormsLabel:
                                      text: "ICD10:"
                                    - .ProFormsGrayView:
                                      style:
                                        display: ..formData.isNoContent
                                      children:
                                        - .ProFormsLabelLeft:
                                          style:
                                            marginLeft: "0.0046"
                                            paddingTop: "0.0046"
                                            paddingBottom: "0.0046"

                                    - type: view
                                      viewTag: listData
                                      style:
                                        width: "0.39"
                                        left: "0"
                                        height: "auto"
                                        marginTop: "0.01"
                                        backgroundColor: "0xf4f4f4"
                                        borderRadius: "4"
                                        display: ..formData.isDisplayIcd
                                      children:
                                        - type: view
                                          style:
                                            paddingTop: "0.004"
                                            paddingBottom: "0.015"
                                            paddingLeft: "0.00624"
                                          children:
                                            - type: list
                                              contentType: listObject
                                              listObject: ..apiRequest.newNote.docReq.name.data.descriptiveList
                                              iteratorVar: itemObject
                                              style:
                                                width: "0.38"
                                                height: "auto"
                                                border:
                                                  style: "5"
                                                boxSizing: border-box
                                              children:
                                                - type: listItem
                                                  itemObject: ""
                                                  style:
                                                    marginTop: "0.006"
                                                    width: "0.38"
                                                    height: "auto"
                                                    left: "0"
                                                    overflow: hidden
                                                  children:
                                                    - type: view
                                                      style:
                                                        width: "0.37752"
                                                        height: "auto"
                                                      children:
                                                        - type: view
                                                          style:
                                                            # marginLeft: "0.012"
                                                            wordBreak: break-all
                                                            display: "inline-block"
                                                            width: "0.355"
                                                          children:
                                                            - .ProFormsLabel:
                                                              dataKey: itemObject.code
                                                              style:
                                                                display: "inline"
                                                                verticalAlign: middle
                                                                color: "0x333333"
                                                                fontSize: .Nfont.nf1
                                                            - .ProFormsLabel:
                                                              text: "-"
                                                              style:
                                                                marginLeft: "0.002"
                                                                verticalAlign: middle
                                                                display: "inline"
                                                                color: "0x333333"
                                                                fontSize: .Nfont.nf1
                                                            - .ProFormsLabel:
                                                              dataKey: itemObject.description
                                                              style:
                                                                verticalAlign: middle
                                                                marginLeft: "0.002"
                                                                display: "inline"
                                                                color: "0x333333"
                                                                fontSize: .Nfont.nf1
                                                        - type: label
                                                          dataKey: itemObject.comment
                                                          style:
                                                            marginTop: "0.003"
                                                            # marginLeft: "0.012"
                                                            width: "0.355"
                                                            height: "auto"
                                                            color: "0x666666"
                                                            wordBreak: break-all
                                                            fontSize: .Nfont.nf1
                                - .ProFormsBaseView:
                                  style:
                                    marginTop: "0.03"
                                  children:
                                    - .ProFormsLabel:
                                      text: 'Assessment & Treatment Plan'
                                    - .ProFormsGrayView:
                                      children:
                                        - .ProFormsLabelLeft:
                                          dataKey: apiRequest.newNote.docReq.name.data.datatreatmentPlan
                                          style:
                                            color: "0x333333"
                                            marginLeft: "0.0046"
                                            paddingTop: "0.0046"
                                            paddingBottom: "0.0046"
                                - .ProFormsBaseView:
                                  style:
                                    marginTop: "0.03"
                                    width: "0.275"
                                    display: flex
                                    justifyContent: space-between
                                  children:
                                    - .ProFormsLabel:
                                      text: Signature
                                      style:
                                        display: inline-block
                                - .SignAreaView:
                                  style:
                                    marginTop: "0.008"
                                  children:
                                    - type: image
                                      path=func: .builtIn.utils.prepareDocToPath
                                      dataKey: apiRequest.newNote.docReq.name.data.signatureId
                                      style:
                                        left: "0"
                                        width: "0.275"
                                        top: "0"
                                        height: "0.165"
                                        display: ..formData.signShow
                                - .ProFormsBaseView:
                                  style:
                                    display: ..formData.signShow
                                  children:
                                    - .ProFormsLabelLeft:
                                      text=func: .builtIn.string.formatUnixtime_en
                                      dataKey: apiRequest.newNote.docReq.name.data.signatureTime
                                      style:
                                        display: inline
                                    - .ProFormsLabelLeft:
                                      text: " Digitally Signed"
                                      style:
                                        marginLeft: "0.0046"
                                        display: inline
                                - .ProFormsBaseView:
                                  style:
                                    marginTop: "0.03"
                                  children:
                                    - .ProFormsLabelLeft:
                                      text: "Date"
                                      style:
                                        display: inline
                                    - .ProFormsLabelRight:
                                      text=func: .builtIn.string.formatUnixtimeL_en
                                      dataKey: apiRequest.newNote.docReq.ctime
                                      style:
                                        marginLeft: "0.0046"
                                        display: inline
                                - .ProFormsBaseView:
                                  style:
                                    marginTop: "0.03"
                                  children:
                                    - .ProFormsBaseView:
                                      children:
                                        - .ProFormsLabel:
                                          dataKey: apiRequest.newNote.docReq.name.data.providerInfo.fullName
                                          style:
                                            fontSize: .Nfont.nf4
                                        - .ProFormsBaseView:
                                          children:
                                            - .ProFormsLabelLeft:
                                              dataKey: apiRequest.newNote.docReq.name.data.providerInfo.specialty
                                              style:
                                                lineHeight: "2vh"
                                        - .ProFormsBaseView:
                                          children:
                                            - .ProFormsLabelLeft:
                                              text: "LIC #"
                                            - .ProFormsLabelRight:
                                              dataKey: apiRequest.newNote.docReq.name.data.providerInfo.lic
                                        - .ProFormsBaseView:
                                          children:
                                            - .ProFormsLabelLeft:
                                              text: "NPI #"
                                            - .ProFormsLabelRight:
                                              dataKey: apiRequest.newNote.docReq.name.data.providerInfo.npi
                                        - .ProFormsBaseView:
                                          children:
                                            - .ProFormsLabelLeft:
                                              text: "DEA #"
                                            - .ProFormsLabelRight:
                                              dataKey: apiRequest.newNote.docReq.name.data.providerInfo.dea
                                        - .ProFormsBaseView:
                                          children:
                                            - .ProFormsLabelLeft:
                                              text: "Email"
                                            - .ProFormsLabelRight:
                                              dataKey: apiRequest.newNote.docReq.name.data.providerInfo.email
                                        - .ProFormsBaseView:
                                          children:
                                            - .ProFormsLabelLeft:
                                              text: "Fax #"
                                            - .ProFormsLabelRight:
                                              dataKey: apiRequest.newNote.docReq.name.data.facilityInfo.fax
                                        - .ProFormsBaseView:
                                          children:
                                            - .ProFormsLabelLeft:
                                              text: "Main #"
                                            - .ProFormsLabelRight:
                                              dataKey: apiRequest.newNote.docReq.name.data.facilityInfo.phone
                                        - .ProFormsBaseView:
                                          children:
                                            - .ProFormsLabelLeft:
                                              text: "Address"
                                            - .ProFormsLabelRight:
                                              dataKey: apiRequest.newNote.docReq.name.data.facilityInfo.address
                                - .ProFormsDivider:
            - .FormsBottomView:
              children:
                - .FormsBottomButtons:
                  children:
                    - .FormsBottomMiddleButton:
                      text: Done
                      onClick:
                        - actionType: builtIn
                          funcName: goBack
                          reload: true
