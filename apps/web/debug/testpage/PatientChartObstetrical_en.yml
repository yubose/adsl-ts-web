PatientChartObstetrical:
  pageNumber: "179"
  title: Patient Chart
  init:
    - .SignInCheck
    - if:
        - userData.Gender.male
        - goto PatientChartSexualHistory
        - continue
  obstetrical: .PatientChartDM.patientChart.obstetricalHistory  #引用用户总表单对象
  obstetricalTemp:
    pregnancy:
      yesNo:
        - key: currentlyPregnant
          value: "Yes"
        - key: currentlyPregnant
          value: "No"  
      input:
        - key: pregnantsTimes
          value: "How many times have you been pregnant?"
        - key: children
          value: "How many children?"
        - key: abortionsTime
          value: "How many abortions?"
    menses:
      input:
        - key: howOften
          value: "How often?"
          placeholder: "every 30 days"
        - key: howlong
          value: "For how many days?"
          placeholder: "5 days"
      yesNo:
        - key: month
          value: "Do they occur every month?"
        - key: heavy
          value: "Heavy flow?"
        - key: spotting
          value: "Any spotting or clots?"
      month:
        - key: isEveryMonth
          value: "Yes"
        - key: isEveryMonth
          value: "No"
      heavy:
        - key: isHeavyFlow
          value: "Yes"
        - key: isHeavyFlow
          value: "No"
      spotting:
        - key: spottingOrClots
          value: "Yes"
        - key: spottingOrClots
          value: "No"
    mammogram:
      yesNo1:
        - key: mammogram
          value: "Have you had a mammogram?"
      input1:
        - key: lastTime
          value: "When was the last one?"
      yesNo2:
        - key: abnormal
          value: "Ever have an abnormal result?"
      input2:
        - key: abnormalResultDescribe
          value: "If yes,please describe"
      haveMammogramOrNot:
        - key: haveMammogram
          value: "Yes"
        - key: haveMammogram
          value: "No"
      abnormalResultOrNot:
        - key: abnormalResult
          value: "Yes"
        - key: abnormalResult
          value: "No"
  components:
    - .BaseHeader:
      style:
        position: "fixed"
        zIndex: "1000"
    - .HeaderLeftButton: 
      style:
        position: "fixed"
        zIndex: "1000" 
    - .HeaderRightButton:
      text: Skip
      style:
        position: "fixed"
        zIndex: "1000"
      onClick:
        - goto: PatientChartSexualHistory
    - type: view
      style:
        top: "0.1"
        left: "0"
        width: "1"
        height: "1.18"
      children:
        - type: image
          path: progresspercent80.png
          style: 
            width: "0.9"
            top: "0.11"
            height: "0.035"
            left: "0.05"
            zIndex: "1000"
            position: "fixed"
        - type: view
          style: 
            top: "0.05"
            width: "1"
            left: "0"
            zIndex: "10"
            height: "0.6"
          children:
            - .H6:
              text: "Obstetrical History"
              style:
                top: "0"
                left: "0.1"
                zIndex: "10"
            - type: label
              textBoard:
                - text: "If male,please move to next area"
              style:
                top: "0.05"
                left: "0.1"
                color: "#000000"
                fontSize: "16"
                zIndex: "10"
            - type: view
              style:
                width: "1"
                height: "0.1"
                left: "0"
                top: "0.1"
                zIndex: "10"
              children:
                - type: label
                  text: Pregnancy
                  style:
                    width: "0.7"
                    left: "0.1"
                    top: "0"
                    zIndex: "10"
                    fontSize: "18"
                - type: label
                  text: currently Pregnant?
                  style:
                    width: "0.7"
                    left: "0.1"
                    top: "0.055"
                    fontSize: "16"
                    zIndex: "10"
                - type: list
                  contentType: listObject
                  listObject: ..obstetricalTemp.pregnancy.yesNo
                  iteratorVar: itemObject
                  style:
                    top: "0.04"
                    left: "0.68"
                    width: "0.26"
                    height: "0.04"
                    zIndex: "10"
                  children:
                    - type: listItem
                      itemObject: ""
                      style:
                        top: "0"
                        left: "0"
                        width: "0.13"
                        height: "0.025"
                        zIndex: "10"
                        display: "inline-block"
                        # backgroundColor: "0xcdcdcdff"
                      viewTag: pregnancyYesNoTag
                      children:
                        - type: image
                          path:
                            emit:
                              dataKey:
                                var: itemObject
                              actions:                        
                                - if:
                                  - =.builtIn.string.equal:
                                      dataIn:
                                        string1: =..obstetrical.pregnancy.currentlyPregnant
                                        string2: $var.value
                                  - https://public.aitmed.com/commonRes/selectOn.png
                                  - https://public.aitmed.com/commonRes/selectOff.png
                          onClick:
                            - emit:
                                dataKey:
                                  var: itemObject
                                actions: 
                                  - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..obstetrical.pregnancy.currentlyPregnant
                                          string2: $var.value
                                    - =.builtIn.object.clear:
                                        dataIn:
                                          object: =..obstetrical.pregnancy
                                          key: $var.key
                                    - =.builtIn.object.set:
                                        dataIn:
                                          object: =..obstetrical.pregnancy
                                          key: $var.key
                                          value: $var.value
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: pregnancyYesNoTag     
                          style:
                            height: "0.028"
                            width: "0.042"
                            top: "0"
                            left: "0"
                            zIndex: "10"
                        - type: label
                          dataKey: itemObject.value
                          style:
                            top: "0"
                            left: "0.05"  
                            color: "#5f5f5f"
                            zIndex: "10"  
                            fontSize: "14"  
            - type: list
              contentType: listObject
              listObject: ..obstetricalTemp.pregnancy.input
              iteratorVar: itemObject
              style:
                top: "0.18"
                left: "0"
                height: "0.25"
              children:
                - type: listItem
                  itemObject: ""
                  style:
                    top: "0"
                    left: "0"
                    width: "0.98"
                    height: "0.05"
                  viewTag: pregnancyInputTag
                  children:
                    - .ChartLabel:
                      dataKey: itemObject.value
                      style: 
                        width: "0.85"
                        color: "#000000"
                    - .DateTextField:
                      placeholder: 
                        emit:
                          dataKey:
                            var: itemObject
                          actions:
                            - =.builtIn.object.get:
                                dataIn:
                                  object: =..obstetrical.pregnancy
                                  key: $var.key
                      dataValue:
                        emit:
                          dataKey:
                            var: itemObject
                          actions:
                            - =.builtIn.object.get:
                                dataIn:
                                  object: =..obstetrical.pregnancy
                                  key: $var.key
                      dataKey: itemObject.dataValue
                      onChange: 
                        emit:
                          dataKey:
                            var: itemObject 
                          actions:
                            - =.builtIn.object.set:
                                dataIn:
                                  object: =..obstetrical.pregnancy
                                  key: $var.key
                                  value: $var.dataValue
                      style: 
                        left: "0.87"
                        width: "0.07"
                        height: "0.03"
                        textAlign:
                          x: center 
            - type: view
              style:
                width: "1"
                top: "0.36"
                left: "0"
                height: "0.4"
              children:
                - type: label
                  text: Menses
                  style:
                    width: "0.7"
                    left: "0.1"
                    top: "0"
                    fontSize: "18"
                    fontWeight: "500"
                - type: list
                  contentType: listObject
                  listObject: ..obstetricalTemp.menses.input
                  iteratorVar: itemObject
                  style:
                    top: "0.03"
                    left: "0"
                    height: "0.22"
                  children:
                    - type: listItem
                      itemObject: ""
                      style:
                        top: "0"
                        left: "0"
                        width: "0.98"
                        height: "0.05"
                      viewTag: mensesInputTag
                      children:
                        - .ChartLabel:
                          dataKey: itemObject.value
                          style:
                            color: "#000000"
                        - .DateTextField:
                          placeholder:
                            emit:
                              dataKey:
                                var: itemObject
                              actions:
                                - =.builtIn.object.get:
                                    dataIn:
                                      object: =..obstetrical.menses
                                      key: $var.key
                          dataValue:
                            emit:
                              dataKey:
                                var: itemObject
                              actions:
                                - =.builtIn.object.get:
                                    dataIn:
                                      object: =..obstetrical.menses
                                      key: $var.key
                          dataKey: itemObject.dataValue
                          onChange: 
                            emit:
                              dataKey:
                                var: itemObject 
                              actions:
                                - =.builtIn.object.set:
                                    dataIn:
                                      object: =..obstetrical.menses
                                      key: $var.key
                                      value: $var.dataValue
                          style: 
                            left: "0.68"
                            width: "0.27"
                            height: "0.03"
                            textAlign:
                              x: center 
                - type: view
                  style:
                    width: "0.9"
                    height: "0.1"
                    left: "0.1"
                    top: '0.13'
                  children:
                    - type: label
                      text: Do they occur every month?
                      style:
                        width: "0.7"
                        top: "0.015"
                        height: "0.1"
                        left: "0"
                    - type: list
                      contentType: listObject
                      listObject: ..obstetricalTemp.menses.month
                      iteratorVar: itemObject
                      style:
                        top: "0"
                        left: "0.64"
                        width: "0.26"
                        height: "0.03"
                      children:
                        - type: listItem
                          itemObject: ""
                          style:
                            top: "0"
                            left: "0"
                            width: "0.13"
                            height: "0.025"
                            display: "inline-block"
                          viewTag: isEveryMonth
                          children:
                            - type: image
                              path:
                                emit:
                                  dataKey:
                                    var: itemObject
                                  actions:                        
                                    - if:
                                      - =.builtIn.string.equal:
                                          dataIn:
                                            string1: =..obstetrical.menses.isEveryMonth
                                            string2: $var.value
                                      - https://public.aitmed.com/commonRes/selectOn.png
                                      - https://public.aitmed.com/commonRes/selectOff.png
                              onClick:
                                - emit:
                                    dataKey:
                                      var: itemObject
                                    actions: 
                                      - if:
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: =..obstetrical.menses.isEveryMonth
                                              string2: $var.value
                                        - =.builtIn.object.clear:
                                            dataIn:
                                              object: =..obstetrical.menses
                                              key: $var.key
                                        - =.builtIn.object.set:
                                            dataIn:
                                              object: =..obstetrical.menses
                                              key: $var.key
                                              value: $var.value
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: isEveryMonth     
                              style:
                                height: "0.028"
                                width: "0.042"
                                top: "0"
                                left: "0"
                            - type: label
                              dataKey: itemObject.value
                              style:
                                top: "0"
                                left: "0.05"  
                                color: "#5f5f5f"  
                                fontSize: "14"  
                - type: view
                  style:
                    width: "0.9"
                    height: "0.1"
                    left: "0.1"
                    top: '0.18'
                  children:
                    - type: label
                      text: Heavy flow?
                      style:
                        width: "0.7"
                        top: "0.015"
                        height: "0.1"
                        left: "0"
                    - type: list
                      contentType: listObject
                      listObject: ..obstetricalTemp.menses.heavy
                      iteratorVar: itemObject
                      style:
                        top: "0"
                        left: "0.64"
                        width: "0.26"
                        height: "0.03"
                      children:
                        - type: listItem
                          itemObject: ""
                          style:
                            top: "0"
                            left: "0"
                            width: "0.13"
                            height: "0.025"
                            display: "inline-block"
                          viewTag: isEveryMonth
                          children:
                            - type: image
                              path:
                                emit:
                                  dataKey:
                                    var: itemObject
                                  actions:                        
                                    - if:
                                      - =.builtIn.string.equal:
                                          dataIn:
                                            string1: =..obstetrical.menses.isHeavyFlow
                                            string2: $var.value
                                      - https://public.aitmed.com/commonRes/selectOn.png
                                      - https://public.aitmed.com/commonRes/selectOff.png
                              onClick:
                                - emit:
                                    dataKey:
                                      var: itemObject
                                    actions: 
                                      - if:
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: =..obstetrical.menses.isHeavyFlow
                                              string2: $var.value
                                        - =.builtIn.object.clear:
                                            dataIn:
                                              object: =..obstetrical.menses
                                              key: $var.key
                                        - =.builtIn.object.set:
                                            dataIn:
                                              object: =..obstetrical.menses
                                              key: $var.key
                                              value: $var.value
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: isEveryMonth     
                              style:
                                height: "0.028"
                                width: "0.042"
                                top: "0"
                                left: "0"
                            - type: label
                              dataKey: itemObject.value
                              style:
                                top: "0"
                                left: "0.05"  
                                color: "#5f5f5f"  
                                fontSize: "14"
                - type: view
                  style:
                    width: "0.9"
                    height: "0.1"
                    left: "0.1"
                    top: '0.23'
                  children:
                    - type: label
                      text: Any spotting or clots?
                      style:
                        width: "0.7"
                        top: "0.015"
                        height: "0.1"
                        left: "0"
                    - type: list
                      contentType: listObject
                      listObject: ..obstetricalTemp.menses.spotting
                      iteratorVar: itemObject
                      style:
                        top: "0"
                        left: "0.64"
                        width: "0.26"
                        height: "0.03"
                      children:
                        - type: listItem
                          itemObject: ""
                          style:
                            top: "0"
                            left: "0"
                            width: "0.13"
                            height: "0.025"
                            display: "inline-block"
                          viewTag: isEveryMonth
                          children:
                            - type: image
                              path:
                                emit:
                                  dataKey:
                                    var: itemObject
                                  actions:                        
                                    - if:
                                      - =.builtIn.string.equal:
                                          dataIn:
                                            string1: =..obstetrical.menses.spottingOrClots
                                            string2: $var.value
                                      - https://public.aitmed.com/commonRes/selectOn.png
                                      - https://public.aitmed.com/commonRes/selectOff.png
                              onClick:
                                - emit:
                                    dataKey:
                                      var: itemObject
                                    actions: 
                                      - if:
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: =..obstetrical.menses.spottingOrClots
                                              string2: $var.value
                                        - =.builtIn.object.clear:
                                            dataIn:
                                              object: =..obstetrical.menses
                                              key: $var.key
                                        - =.builtIn.object.set:
                                            dataIn:
                                              object: =..obstetrical.menses
                                              key: $var.key
                                              value: $var.value
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: isEveryMonth     
                              style:
                                height: "0.028"
                                width: "0.042"
                                top: "0"
                                left: "0"
                            - type: label
                              dataKey: itemObject.value
                              style:
                                top: "0"
                                left: "0.05"  
                                color: "#5f5f5f"  
                                fontSize: "14"
            - type: view
              style:
                width: "1"
                height: "0.15"
                top: "0.67"
                left: "0"
              children:
                - type: label
                  text: Mammogram
                  style:
                    width: "0.7"
                    left: "0.1"
                    top: "0"
                    fontSize: "18"
                    fontWeight: "500"
                - type: view
                  style:
                    width: "0.9"
                    height: "0.1"
                    left: "0.1"
                    top: '0.04'
                  children:
                    - type: label
                      text: Have you had a mammogram?
                      style:
                        width: "0.7"
                        top: "0.015"
                        height: "0.1"
                        left: "0"
                    - type: list
                      contentType: listObject
                      listObject: ..obstetricalTemp.mammogram.haveMammogramOrNot
                      iteratorVar: itemObject
                      style:
                        top: "0"
                        left: "0.64"
                        width: "0.26"
                        height: "0.03"
                      children:
                        - type: listItem
                          itemObject: ""
                          style:
                            top: "0"
                            left: "0"
                            width: "0.13"
                            height: "0.025"
                            display: "inline-block"
                          viewTag: haveMammogram
                          children:
                            - type: image
                              path:
                                emit:
                                  dataKey:
                                    var: itemObject
                                  actions:                        
                                    - if:
                                      - =.builtIn.string.equal:
                                          dataIn:
                                            string1: =..obstetrical.mammogram.haveMammogram
                                            string2: $var.value
                                      - https://public.aitmed.com/commonRes/selectOn.png
                                      - https://public.aitmed.com/commonRes/selectOff.png
                              onClick:
                                - emit:
                                    dataKey:
                                      var: itemObject
                                    actions: 
                                      - if:
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: =..obstetrical.mammogram.haveMammogram
                                              string2: $var.value
                                        - =.builtIn.object.clear:
                                            dataIn:
                                              object: =..obstetrical.mammogram
                                              key: $var.key
                                        - =.builtIn.object.set:
                                            dataIn:
                                              object: =..obstetrical.mammogram
                                              key: $var.key
                                              value: $var.value
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: haveMammogram     
                              style:
                                height: "0.028"
                                width: "0.042"
                                top: "0"
                                left: "0"
                            - type: label
                              dataKey: itemObject.value
                              style:
                                top: "0"
                                left: "0.05"  
                                color: "#5f5f5f"  
                                fontSize: "14"
                # - type: view
                #   style:
                #     width: "0.8"
                #     left: "0.1"
                #     top: "0.15"
                #     height: "0.05"
                #   children:
                - type: list
                  contentType: listObject
                  listObject: ..obstetricalTemp.mammogram.input1
                  iteratorVar: itemObject
                  style:
                    top: "0.08"
                    left: "0.1"
                    width: "0.9"
                    height: "0.1"
                  children:
                    - type: listItem
                      itemObject: ""
                      style:
                        top: "0"
                        left: "0"
                        width: "0.9"
                        height: "0.04"
                        # backgroundColor: "0xcdcdcd"
                      viewTag: Mammograminput1
                      children:
                        - type: label
                          # text: When was the last one
                          dataKey: itemObject.value
                          style:
                            width: "0.5"
                            left: "0"
                            height: "0.05"
                            top: "0"
                            textAlign:
                              y: center
                        - .DateTextField:
                          placeholder: 
                            emit:
                              dataKey:
                                var: itemObject
                              actions:
                                - =.builtIn.object.get:
                                    dataIn:
                                      object: =..obstetrical.mammogram
                                      key: $var.key
                          dataValue:
                            emit:
                              dataKey:
                                var: itemObject
                              actions:
                                - =.builtIn.object.get:
                                    dataIn:
                                      object: =..obstetrical.mammogram
                                      key: $var.key
                          dataKey: itemObject.dataValue
                          onChange: 
                            emit:
                              dataKey:
                                var: itemObject 
                              actions:
                                - =.builtIn.object.set:
                                    dataIn:
                                      object: =..obstetrical.mammogram
                                      key: $var.key
                                      value: $var.dataValue
                          style:
                            left: "0.005"
                            top: "0.055"
                            width: "0.45"
                            textAlign:
                              y: center
                - type: view
                  style:
                    width: "0.9"
                    height: "0.05"
                    left: "0.1"
                    top: '0.2'
                    zIndex: "100"
                  children:
                    - type: label
                      text: Ever have an abnormal result??
                      style:
                        width: "0.7"
                        top: "0.015"
                        height: "0.1"
                        left: "0"
                        zIndex: "100"
                    - type: list
                      contentType: listObject
                      listObject: ..obstetricalTemp.mammogram.abnormalResultOrNot
                      iteratorVar: itemObject
                      style:
                        top: "0"
                        left: "0.64"
                        width: "0.26"
                        height: "0.03"
                        zIndex: "100"
                      children:
                        - type: listItem
                          itemObject: ""
                          style:
                            top: "0"
                            left: "0"
                            width: "0.13"
                            height: "0.025"
                            zIndex: "100"
                            display: "inline-block"
                          viewTag: abnormalResult
                          children:
                            - type: image
                              path:
                                emit:
                                  dataKey:
                                    var: itemObject
                                  actions:                        
                                    - if:
                                      - =.builtIn.string.equal:
                                          dataIn:
                                            string1: =..obstetrical.mammogram.abnormalResult
                                            string2: $var.value
                                      - https://public.aitmed.com/commonRes/selectOn.png
                                      - https://public.aitmed.com/commonRes/selectOff.png
                              onClick:
                                - emit:
                                    dataKey:
                                      var: itemObject
                                    actions: 
                                      - if:
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: =..obstetrical.mammogram.abnormalResult
                                              string2: $var.value
                                        - =.builtIn.object.clear:
                                            dataIn:
                                              object: =..obstetrical.mammogram
                                              key: $var.key
                                        - =.builtIn.object.set:
                                            dataIn:
                                              object: =..obstetrical.mammogram
                                              key: $var.key
                                              value: $var.value
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: abnormalResult     
                              style:
                                height: "0.028"
                                width: "0.042"
                                top: "0"
                                left: "0"
                                zIndex: "100"
                            - type: label
                              dataKey: itemObject.value
                              style:
                                top: "0"
                                left: "0.05"  
                                color: "#5f5f5f"  
                                fontSize: "14"
                                zIndex: "100"
                # - type: view
                #   style:
                #     width: "0.8"
                #     left: "0.1"
                #     top: "0.3"
                #     height: "0.05"
                #   children:
                #     - type: label
                #       text: If yes,please describe
                #       style:
                #         width: "0.5"
                #         left: "0"
                #         height: "0.05"
                #         top: "0"
                #         textAlign:
                #           y: center
                #     - .DateTextField:
                #       placeholder: Date(mm/dd/yyyy)
                #       style:
                #         left: "0.6"
                #         top: "0"
                #         textAlign:
                #           y: center
                - type: list
                  contentType: listObject
                  listObject: ..obstetricalTemp.mammogram.input2
                  iteratorVar: itemObject
                  style:
                    top: "0.23"
                    left: "0.1"
                    width: "0.9"
                    zIndex: "100"
                    height: "0.12"
                  children:
                    - type: listItem
                      itemObject: ""
                      style:
                        top: "0"
                        left: "0"
                        width: "0.9"
                        height: "0.04"
                        zIndex: "100"
                      viewTag: Mammograminput2
                      children:
                        - type: label
                          # text: When was the last one
                          dataKey: itemObject.value
                          style:
                            width: "0.5"
                            left: "0"
                            height: "0.05"
                            top: "0"
                            zIndex: "100"
                            textAlign:
                              y: center
                        - .DateTextField:
                          placeholder: 
                            emit:
                              dataKey:
                                var: itemObject
                              actions:
                                - =.builtIn.object.get:
                                    dataIn:
                                      object: =..obstetrical.mammogram
                                      key: $var.key
                          dataValue:
                            emit:
                              dataKey:
                                var: itemObject
                              actions:
                                - =.builtIn.object.get:
                                    dataIn:
                                      object: =..obstetrical.mammogram
                                      key: $var.key
                          dataKey: itemObject.dataValue
                          onChange: 
                            emit:
                              dataKey:
                                var: itemObject 
                              actions:
                                - =.builtIn.object.set:
                                    dataIn:
                                      object: =..obstetrical.mammogram
                                      key: $var.key
                                      value: $var.dataValue
                          style:
                            left: "0.005"
                            top: "0.055"
                            width: "0.45"
                            zIndex: "100"
                            textAlign:
                              x: center
            - type: view
              style: 
                top: "0.9"
                width: "1"
                left: "0"
                zIndex: "500"
                height: "0.1"
                position: "fixed"
                backgroundColor: "#ffffff"
              children:
                - type: button
                  text: "Next"
                  onClick:
                    # - emit:
                    #   dataKey:
                    #     var: .PatientChartDM.patientChart.obstetricalHistory
                    #   actions:
                    #     - var@: ""
                    #     - var@: ..obstetrical
                    - actionType: evalObject
                      object:
                        - .PatientChartDM.patientChart.obstetricalHistory@: ""
                        - .PatientChartDM.patientChart.obstetricalHistory@: =..obstetrical
                    - goto: PatientChartSexualHistory
                  style:
                    left: "0.11"
                    position: "fixed"
                    top: "0.925"
                    width: "0.8"
                    height: "0.05"
                    backgroundColor: "#388ecc"
                    color: "0xFFFFFF"
                    fontSize: "17"
                    zIndex: "200"
                    borderRadius: 10
                    border:
                      style: 1