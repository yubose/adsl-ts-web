AppointmentLobbyRoom: #xd page
  title: Appointment Lobby
  init:
    - .SignInCheck
    - ..dataObject@: =.Global.roomInfo.edge
    # - .Global.jwt.edge.bvid@: =.Global.currentUser.vertex.id  #change jwt
    # - =.Global.updateJwt: ""
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =.Global.rootRoomInfo.edge.refid
              string2: ""
        - =..roomInfo.edgeAPI.store: ""
        - ..roomInfo.response.edge@: =.Global.rootRoomInfo.edge
    - .Global.rootRoomInfo.edge@: =..roomInfo.response.edge
    - ..listData.get
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =..listData.invitees.edge.0.name.name
              string2: =..dataObject.name.providerName
        - =.builtIn.array.removeByIndex:
            dataIn:
              object: =..listData.invitees.edge
              index: 0
        - continue
    - actionType: evalObject
      object:
        .Global._nonce@:
          =.builtIn.math.random: ""
    - =.builtIn.date.startMeeting:
        dataIn:
          stime: =.Global.roomInfo.edge.stime
        dataOut: AppointmentLobbyOfficeVisit.startIf
    - =..chart.docAPI.get: ""
    - =..localchart.docAPI.get: ""
  emptyId: ""
  roomInfo:
    response: ""
    edge:
      # .Global.VideoChatObjStore.reference.edge: ""
      id: ..emptyId # create a new edge
      bvid: .Global.currentUser.vertex.id # always current userId
      evid: ..emptyId
      name: ..dataObject.name
      refid: ..dataObject.id
      type: 40000 # may from 1053, need to be override
      subtype: 0
      _nonce: =.Global._nonce
    edgeAPI:
      .EdgeAPI: ""
      store:
        api: ce
        dataIn: roomInfo.edge # return result should updated to roomInfo.edge as well
        dataOut: roomInfo.response
  chart:
    document:
    getdocument:
      id: .Global.roomInfo.edge.id
      xfname: eid
      type: .DocType.PatientChart #  type: "257"
      obfname: "mtime"
      maxcount: "1"
      _nonce: =.Global._nonce
    docAPI:
      get:
        .DocAPI.get: ""
        api: rd
        dataIn: chart.getdocument
        dataOut: AppointmentLobbyOfficeVisit.chart.document
  localchart:
    document:
    getdocument:
      id: .Global.rootNotebookID
      xfname: eid
      type: .DocType.PatientChart #  type: "257"
      obfname: "mtime"
      maxcount: "1"
      _nonce: =.Global._nonce
    docAPI:
      get:
        .DocAPI.get: ""
        api: rd
        dataIn: localchart.getdocument
        dataOut: AppointmentLobbyOfficeVisit.localchart.document
  listData:
    invitees:
      edge: ""
    get:
      .EdgeAPI.get: ""
      api: re
      dataKey: listData.invitees
      id: .Global.roomInfo.edge.id
      type: .EdgeType.InviteInfo
      xfname: refid
      maxcount: "20"
      # sCondition: "tage=0 AND ctime>UNIX_TIMESTAMP()-7200"
      sCondition: "tage=0"
      _nonce: .Global._nonce
  dataObject: .Global.roomInfo.edge
  startIf: ""
  flagStart: ""
  # 查询拒绝邮件需要挂在的edge的id
  relation:
    edgeReq:
      id: []
      type: .EdgeType.Email
      xfname: Evid&Bvid
      maxcount: "1"
      obfname: "ctime"
      _nonce: =.Global._nonce
    edgeRes: ""
    edgeAPI:
      get:
        api: re
        dataIn: AppointmentLobbyOfficeVisit.relation.edgeReq
        dataOut: AppointmentLobbyOfficeVisit.relation.edgeRes
  # 创建拒绝邮件doc
  cancelEmail:
    docReq:
      type: .DocType.InboxMessage #邮件类型，默认1281
      eid: "" #邮件需要挂在的edge的id，为发送方与接收方之间10002的edge
      name:
        data:
          #邮件内容
          content: ""
          #收件人姓名
          receiverName: .AppointmentLobbyOfficeVisit.dataObject.name.providerName
          #发送人姓名
          senderName: .Global.Profile.name.data.basicInfo.fullName
          #收件人头像的id
          receiverAvatarId: ""
          #是否带附件
          haveAttachment: false
          #收件人id
          receiverId: ""
        # title: "Cancel Appointment"
        title: "Appointment cancelled Notification"
        user: .AppointmentLobbyOfficeVisit.dataObject.bvid
    docRes: ""
    docAPI:
      store:
        api: cd
        dataIn: AppointmentLobbyOfficeVisit.cancelEmail.docReq
        dataOut: AppointmentLobbyOfficeVisit.cancelEmail.docRes
  # 获取provider信息
  publicProfile:
    docResponse: ""
    document:
      id: ""
      xfname: ovid
      type: .DocType.DoctorPublicProfile
      maxcount: "1000"
      _nonce: =.Global._nonce
    docAPI:
      get:
        .DocAPI.get: ""
        api: rd
        dataIn: publicProfile.document
        dataOut: publicProfile.docResponse
  apiRequest:
    # patiet check in
    checkIn:
      docResp: ""
      doc:
        type: .DocType.GroupBitOrTage
        tage: 4
        eid: .Global.roomInfo.edge.id
        reid: .Global.roomInfo.edge.id
      docApi:
        create:
          api: cd
          dataIn: apiRequest.checkIn.doc
          dataOut: AppointmentLobbyOfficeVisit.apiRequest.docResp
    # cancel
    cancelAppoint:
      edgeRes: ""
      edge:
        type: "40000"
        subtype: 7
        bvid: .Global.currentUser.vertex.id
        refid: .Global.roomInfo.edge.id
        evid: ""
        stime: .Global.roomInfo.edge.stime
        etime: .Global.roomInfo.edge.etime
      edgeAPI:
        .EdgeAPI: ""
        store:
          api: ce
          dataIn: apiRequest.cancelAppoint.edge
          dataOut: apiRequest.cancelAppoint.edgeRes
  formData:
    patientId: ""
  components:
    - .BaseHeader:
    - .HeaderLeftBack:
    - .HeaderRightMenu:
      onClick:
        - actionType: popUp
          popUpView: selectApp
    - type: scrollView
      style:
        top: "0.1"
        left: "0"
        width: "1"
        height: "0.795"
        overflow: scroll
        # backgroundColor: "pink"
      children:
        - type: view
          style:
            height: "0.05"
            backgroundColor: "#f0f0f0"
            width: "1"
          children:
            - type: label
              text: Appointment  Info
              style:
                display: "inline-block"
                marginLeft: "0.05"
                color: "0x4b4b4b"
                height: "auto"
                width: "0.45"
                lineHeight: 5vh

                fontSize: .Nfont.h1
                textAlign:
                  x: left
            - type: label
              text: Previous
              style:
                display: "inline-block"
                color: "0x2988e6"
                height: "auto"
                width: "0.45"
                lineHeight: 5vh

                fontSize: .Nfont.h1
                textDecoration: underline
                textAlign:
                  x: right
        - type: view
          style:
            height: "auto"
            width: "0.9"
            marginLeft: "0.05"
            color: "0x4b4b4b"
          children:
            - .PresListView:
              children:
                - .PresLabelLeft:
                  text: Patient Name
                - .PresLabelRight:
                  dataKey: dataObject.name.patientName
            - .PresListView:
              children:
                - .PresLabelLeft:
                  text: Visit Type
                - .PresLabelRight:
                  dataKey: dataObject.name.visitType
            - .PresListView:
              children:
                - .PresLabelLeft:
                  text: "Reason for Visit"
                - .PresLabelRight:
                  dataKey: dataObject.name.Reason
            - .PresListView:
              children:
                - .PresLabelLeft:
                  text: "Date"
                - .PresLabelRight:
                  text=func: .builtIn.date.ShowTimeDateUS
                  dataKey: dataObject
            - .PresListView:
              children:
                - .PresLabelLeft:
                  text: "Time"
                - .PresLabelRight:
                  text=func: .builtIn.date.ShowTimeSpan
                  dataKey: dataObject
        - type: view
          style:
            marginTop: "0.015"
            height: "0.05"
            backgroundColor: "0xf0f0f0"
            width: "1"
          children:
            - type: label
              text: Medical Info
              style:
                display: "inline-block"
                marginLeft: "0.05"
                color: "0x4b4b4b"
                height: "auto"
                width: "0.45"
                lineHeight: 5vh

                fontSize: .Nfont.h1
                textAlign:
                  x: left
            - type: label
              text: Document History
              style:
                display: "inline-block"
                color: "0x2988e6"
                height: "auto"
                width: "0.45"
                lineHeight: 5vh

                fontSize: .Nfont.h1
                textDecoration: underline
                textAlign:
                  x: right

        - type: view
          style:
            height: "auto"
            width: "0.9"
            marginLeft: "0.05"
          children:
            - type: view
              style:
                marginTop: "0.02"
                height: "auto"
                width: "0.9"
              children:
                - type: view
                  onClick:
                    # - goto: VisitQuestionnaire2
                    - goto: RequiredForms
                  style:
                    display: "inline-block"
                    width: "0.28"
                    height: "0.14"
                    backgroundColor: "#ffffff"
                    border:
                      style: 3
                    borderWidth: "1"
                    borderRadius: "10"
                    # borderColor: "0xdededf"
                    borderColor: "0xfc3a3a"
                    box-sizing: border-box
                    # boxShadow: "0px 0px 6px 0.5px #DEDEDF"
                    boxShadow: "0px 0px 0px 0.5px #fc3a3a"
                    textAlign:
                      x: center
                  children:
                    - type: image
                      path: profile.svg
                      style:
                        marginTop: "0.01"
                        height: "0.06"
                    - type: label
                      text: Required Forms
                      style:
                        marginLeft: "0.065"
                        height: "auto"
                        width: "0.15"

                        fontSize: .Nfont.h1
                        color: "0x4b4b4b"
                        textAlign:
                          x: center
                - type: view
                  onClick:
                    - actionType: evalObject
                      object:
                        - .Global.vitalsInAppointment@: "true"
                    - goto: VitalSigns
                  style:
                    marginLeft: "0.03"
                    display: "inline-block"
                    width: "0.28"
                    height: "0.14"
                    backgroundColor: "#ffffff"
                    border:
                      style: 3
                    borderWidth: "1"
                    borderRadius: "10"
                    borderColor: "0xdededf"
                    box-sizing: border-box
                    boxShadow: "0px 0px 6px 0.5px #DEDEDF"
                    textAlign:
                      x: center
                  children:
                    - type: image
                      path: remoteHealth0.svg
                      style:
                        marginTop: "0.01"
                        height: "0.06"
                    - type: label
                      text: Vital Signs
                      style:
                        marginTop: "0.01"
                        height: "auto"
                        width: "0.28"

                        fontSize: .Nfont.h1
                        color: "0x4b4b4b"
                        textAlign:
                          x: center
                - type: view
                  onClick:
                    - actionType: evalObject
                      object:
                        - if:
                            - =..chart.document.doc.0.id
                            - actionType: evalObject
                              object:
                                - .Global.flag.isMeetingPatientchart@: true
                                - goto: PatientChart
                            - actionType: popUp
                              popUpView: updatePatientView
                  style:
                    marginLeft: "0.03"
                    display: "inline-block"
                    width: "0.28"
                    height: "0.14"
                    backgroundColor: "#ffffff"
                    border:
                      style: 3
                    borderWidth: "1"
                    borderRadius: "10"
                    borderColor: "0xdededf"
                    box-sizing: border-box
                    boxShadow: "0px 0px 6px 0.5px #DEDEDF"
                    textAlign:
                      x: center
                  children:
                    - type: image
                      path: patientchart.svg
                      style:
                        marginTop: "0.01"
                        height: "0.06"
                    - type: label
                      text: Patient Chart
                      style:
                        marginTop: "0.01"
                        height: "auto"
                        width: "0.28"

                        fontSize: .Nfont.h1
                        color: "0x4b4b4b"
                        textAlign:
                          x: center
            - type: view
              onClick:
                - goto: MedicalDocuments
              style:
                marginTop: "0.02"
                width: "0.9"
                height: "0.14"
                backgroundColor: "#ffffff"
                border:
                  style: 3
                borderWidth: "1"
                borderRadius: "10"
                borderColor: "0xdededf"
                box-sizing: border-box
                boxShadow: "0px 0px 6px 0.5px #DEDEDF"
              children:
                - type: view
                  style:
                    marginLeft: "0.03"
                    display: "inline-block"
                    height: "0.14"
                    width: "0.3"
                    textAlign:
                      x: center
                  children:
                    - type: image
                      path: medical.records.svg
                      style:
                        marginTop: "0.03"
                        height: "0.07"
                - type: view
                  style:
                    display: "inline-block"
                    height: "0.14"
                    width: "0.5"
                  children:
                    - type: label
                      text: Medical Documents
                      style:
                        marginTop: "0.035"
                        height: "auto"
                        width: "0.5"

                        fontSize: .Nfont.h2
                        color: "0x4b4b4b"
                    - type: label
                      text: view all documents here
                      style:
                        marginTop: "0.01"
                        height: "auto"
                        width: "0.5"

                        fontSize: .Nfont.h1
                        color: "0x4b4b4b"
        - type: view
          style:
            marginTop: "0.03"
            height: "0.05"
            backgroundColor: "#f0f0f0"
            width: "1"
          children:
            - type: label
              text: Participants
              style:
                display: "inline-block"
                marginLeft: "0.05"
                color: "0x4b4b4b"
                height: "auto"
                width: "0.45"
                lineHeight: 5vh

                fontSize: .Nfont.h1
                textAlign:
                  x: left
            # - type: label
            #   text: +
            #   style:
            #     display: "inline-block"
            #     color: "0x2988e6"
            #     height: "auto"
            #     width: "0.33"
            #     lineHeight: 4.5vh
            #
            #     fontSize: .Nfont.h4
            #     font-weight: 500
            #     textAlign:
            #       x: right
            # - type: label
            #   text: Invite
            #   style:
            #     display: "inline-block"
            #     color: "0x2988e6"
            #     height: "auto"
            #     width: "0.12"
            #     lineHeight: 5vh
            #
            #     fontSize: .Nfont.h1
            #     textAlign:
            #       x: center
        - type: view
          style:
            marginTop: "0.02"
            height: "auto"
            width: "0.9"
            marginLeft: "0.05"
            color: "0x4b4b4b"
          children:
            - .PresListView:
              children:
                - .PresLabelLeft:
                  text: Provider
                - .PresLabelRight:
                  dataKey: dataObject.name.providerName
            - .PresListView:
              children:
                - .PresLabelLeft:
                  text: Patient
                - .PresLabelRight:
                  dataKey: dataObject.name.patientName

    - .NextButtonView:
      style:
        boxShadow: "0px 1px 10px #dbdfe3"
        backgroundColor: "0xffffff"
        overflow: hidden
      children:
        - type: button
          text: Check In
          onClick:
            - actionType: evalObject
              object:
                .Global.VideoChatObjStore.reference.edge@: =..dataObject
            # - goto: VideoChat
          #  check in 暂时注释 请勿删除
          # - actionType: evalObject
          #   object:
          #     - if:
          #       - =.builtIn.string.equal:
          #           dataIn:
          #             string1: =..flagStart
          #             string2: "1"
          #       - goto: VideoChat
          #       - actionType: evalObject
          #         object:
          #           - if:
          #             - =.builtIn.string.equal:
          #                 dataIn:
          #                   string1: =..startIf
          #                   string2: true
          #             - .Global.VideoChatObjStore.reference.edge@: =..dataObject
          #             - continue
          #           - if:
          #             - =.builtIn.string.equal:
          #                 dataIn:
          #                   string1: =..startIf
          #                   string2: true
          #             # - goto: VideoChat
          #             - actionType: popUp
          #               popUpView: startMeetingView
          #             - actionType: popUp
          #               popUpView: checkInView
          # - goto: VideoChat

          style:
            display: "inline-block"
            marginTop: "0.025"
            marginLeft: "0.05"
            width: "0.5"
            height: "0.05"
            backgroundColor: "0x2988e6"
            border:
              style: 3
            borderColor: "0x2988e6"
            borderRadius: "2"

            fontSize: .Nfont.h2
            color: "0xffffff"
            textAlign:
              x: center
        - type: view
          style:
            display: "inline-block"
            marginTop: "0.011"
            marginLeft: "0.07"
            width: "0.36"
            height: "auto"
          children:
            - type: image
              path: changeApp.svg
              style:
                vertical-align: middle
                display: "inline-block"
                height: "0.075"
              onClick:
                - goto: CreateAppointmentNew
            - type: image
              path: cancelApp.svg
              style:
                marginLeft: "0.05"
                display: "inline-block"
                height: "0.075"
                vertical-align: middle
              onClick:
                - actionType: popUp
                  popUpView: confirmView

    #
    - type: popUp
      viewTag: selectApp
      style:
        left: "0"
        width: "1"
        top: "0"
        height: "1"
        zIndex: 110
        backgroundColor: "0xa9a9a990"
      children:
        - type: view
          style:
            top: "0.75"
            width: "0.9"
            height: "0.13"
            left: "0.05"
            border:
              style: "1"
            borderRadius: "10"
            backgroundColor: "0xe9e9e9"
            zIndex: 500
            overflow: hidden
          children:
            - type: label
              text: Change the appointment
              style:
                marginTop: "0.01"
                color: "0x007aff"
                fontSize: .Nfont.h3
                width: "0.9"
                height: "0.06"
                fontWeight: 500
                textAlign:
                  x: "center"
                  y: "center"
            - type: view
              style:
                height: "0.0008"
                width: "0.9"
                backgroundColor: "0x3f3f3f"
            - type: label
              text: Cancel the appointment
              onClick:
                - actionType: updateObject # updateObject(dataKey, dataObject, dataObjectKey)
                  dataKey: Global.appoinment.request
                  dataObject: ..dataObject
                - actionType: popUpDismiss
                  popUpView: selectApp
                - actionType: popUp
                  popUpView: deleteMeetingTag
              style:
                color: "0xfc3a3a"
                fontSize: .Nfont.h3
                width: "0.9"
                height: "0.06"
                fontWeight: 500
                textAlign:
                  x: "center"
                  y: "center"
        - type: button
          text: Close
          style:
            top: "0.9"
            left: "0.05"
            width: "0.9"
            height: "0.06"
            fontSize: .Nfont.h3
            color: "0x007aff"
            backgroundColor: "0xffffff"
            textAlign:
              x: center
            borderRadius: "10"
            border:
              style: 1
          onClick:
            - actionType: popUpDismiss
              popUpView: selectApp
    - type: popUp
      viewTag: updatePatientView
      message: "You did not share your patient chart to this meeting. Please update or share your patient chart"
      style:
        top: "0"
        left: "0"
        width: "1"
        height: "1"
        backgroundColor: "0x00000066"
        zIndex: "50"
        textAlign:
          y: center
      onClick:
        - actionType: popUpDismiss
          popUpView: __.viewTag
        - actionType: evalObject
          object:
            - if:
                - =..localchart.document.doc.0.id
                - actionType: evalObject
                  object:
                    - .Global.flag.isMeetingPatientchart@: false
                    - .Global.isShare@: true
                    - goto: PatientChart
                - actionType: evalObject
                  object:
                    - .Global.isShare@: true
                    # - goto: PatientChartGeneralInfo
                    - goto: PatientChart
      children:
        - type: view
          style:
            width: "0.51"
            marginLeft: "0.245"
            backgroundColor: "0xE6E6E6"
            borderRadius: "14px"
            textAlign:
              x: center
          children:
            - type: image
              path: aboutRed.svg
              style:
                marginTop: "0.029"
                width: "0.13"
            - type: label
              text: ___.message
              style:
                width: "0.436"
                marginLeft: "0.037"
                marginTop: "0.01"
                fontSize: .Nfont.n2

                textAlign:
                  x: center
                color: "0x333333"
            - type: view
              style:
                height: "0.029"
    # - type: popUp
    #   message: "You did not share your patient chart to this meeting. Please update or share your patient chart"
    #   viewTag: updatePatientView
    #   colorChange: "0x2988e6"
    #   imgPath: aboutBlue.svg
    #   otherAction:
    #   style:
    #     width: "1"
    #     height: "1"
    #     top: "0"
    #     left: "0"
    #     backgroundColor: "0xffffff00"
    #     zIndex: "1000"
    #     # isHidden: .Global.nonFirstProfile
    #   children:
    #     - type: view
    #       style:
    #         width: "0.8"
    #         height: "0.3"
    #         top: "0.3"
    #         left: "0.1"
    #         zIndex: "10000"
    #         backgroundColor: "0xffffff"
    #         borderRadius: "7"
    #         border:
    #           style: "3"
    #         borderColor: "#f4f8fa"
    #         borderWidth: "3"
    #       children:
    #         - .BaseCheckViewImg:
    #         - .BaseCheckViewLabel:
    #           style:
    #             display: block
    #             fontSize: "2.1vh"
    #             height: "0.1"
    #         - .BaseCheckViewButton:
    #           onClick:
    #             - actionType: popUpDismiss
    #               popUpView: ____.viewTag
    #             - actionType: evalObject
    #               object:
    #                 - if:
    #                     - =..localchart.document.doc.0.id
    #                     - actionType: evalObject
    #                       object:
    #                         - .Global.flag.isMeetingPatientchart@: false
    #                         - .Global.isShare@: true
    #                         - goto: PatientChart
    #                     - actionType: evalObject
    #                       object:
    #                         - .Global.isShare@: true
    #                         # - goto: PatientChartGeneralInfo
    #                         - goto: PatientChart

    - type: popUp
      viewTag: confirmView
      style:
        top: 0
        width: "1"
        height: "1"
        zIndex: "10000000"
        backgroundColor: "#00000040"
      children:
        - type: view
          style:
            width: "0.7"
            height: "0.25"
            margin: "auto"
            top: "0.25"
            left: "0.15"
            borderRadius: "10px"
            backgroundColor: "#e8e8e8"
            filter: brightness(0.95)
            textAlign:
              x: center
          children:
            - .questionTitle:
              text: "Are you sure you want to cancel this appointment?"
              style:
                width: "0.6"
                margin: "auto"
                marginTop: "0.02"
                textAlign:
                  x: left
            - .questionTitle:
              style:
                width: "0.6"
                textAlign:
                  x: left
                margin: auto
                marginTop: "0.01"
                fontWeight: "530"

              textBoard:
                - text: "Reason for"
                - text: "&nbspcancelation"
                  color: "#fa4949"
                - text: ":"
            - type: textField
              dataKey: cancelEmail.docReq.name.data.content
              placeholder: "Enter here"
              style:
                marginTop: "0.01"
                width: "0.6"
                height: "0.06"
                border: "none"
                borderRadius: "3px"
                textIndent: 1em
            - type: view
              style:
                marginTop: "0.03"
                width: "0.7"
                height: "0.06"
                borderRadius: "0 0 5px 5px"
                borderTop: "1px solid #a9a8a9"
                borderWidth: "1px"
              children:
                - type: button
                  text: "No"
                  style:
                    width: "0.35"
                    height: "0.06"
                    display: inline
                    color: "#007aff"
                    border: "1px solid #e8e8e8"
                    borderRight: "1px solid #a9a8a9"
                    borderWidth: "1px"
                    borderRadius: "0 0 0 5px"
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: confirmView
                - type: button
                  text: "Yes"
                  style:
                    width: "0.35"
                    height: "0.06"
                    display: inline
                    color: "#007aff"
                    border: "1px solid #e8e8e8"
                    borderWidth: "1px"
                    borderRadius: "0 0 5px 0"
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: confirmView
                    - actionType: evalObject
                      object:
                        - if:
                            - =.builtIn.string.equal:
                                dataIn:
                                  string1: =..dataObject.bvid
                                  string2: =.Global.currentUser.vertex.id
                            - ..formData.patientId@: =..dataObject.evid
                            - ..formData.patientId@: =..dataObject.bvid
                        - =.builtIn.array.add:
                            dataIn:
                              object: =..relation.edgeReq.id
                              value: =..formData.patientId
                        - =.builtIn.array.add:
                            dataIn:
                              object: =..relation.edgeReq.id
                              value: =.Global.currentUser.vertex.id
                        - ..publicProfile.document.id@: =..formData.patientId
                        - =..publicProfile.docAPI.get: ""
                        - =..relation.edgeAPI.get: ""
                    - actionType: evalObject
                      object:
                        - ..cancelEmail.docReq.name.data.receiverAvatarId@: =..publicProfile.docResponse.doc.0.name.data.avatar
                        - ..cancelEmail.docReq.name.data.receiverId@: =..formData.patientId
                        - ..cancelEmail.docReq.eid@: =..relation.edgeRes.edge.0.id
                        - =..apiRequest.cancelAppoint.edgeAPI.store: ""
                    - actionType: evalObject
                      object:
                        - if:
                            - =..apiRequest.cancelAppoint.edgeRes.edge.id
                            - =..cancelEmail.docAPI.store: ""
                            - continue
                    - goto: DisagreeRequest2
    # 支付成功弹框
    - .BackgroundColorGray:
      viewTag: PaymentSuccessful
      onClick:
        - actionType: popUpDismiss
          popUpView: PaymentSuccessful
      children:
        - type: view
          style:
            width: "0.5"
            height: "0.186"
            backgroundColor: "0xe5e5e5"
            borderRadius: "12"
            marginTop: "0.4"
            marginLeft: "0.25"
            textAlign:
              x: center
          children:
            - type: image
              path: deleteTrue.svg
              style:
                width: "0.106"
                marginTop: "0.03"
            - type: label
              text: "Success!"
              dataKey:
              style:
                color: "0x333333"
                fontSize: .Nfont.h1_1
                width: "0.5"
                height: "0.03"

                word-break: break-word
                margin: auto
                marginTop: "0.005"
            - type: label
              text: "Your payment has been processed"
              dataKey:
              style:
                color: "0x555555"
                fontSize: .Nfont.h1_1
                width: "0.5"
                height: "0.06"
                word-break: break-word
                margin: auto
                marginTop: "0.005"
    #支付失败弹框
    - .BackgroundColorGray:
      viewTag: PaymentFailed
      onClick:
        - actionType: popUpDismiss
          popUpView: PaymentFailed
      children:
        - type: view
          style:
            width: "0.5"
            height: "0.186"
            backgroundColor: "0xe5e5e5"
            borderRadius: "12"
            marginTop: "0.4"
            marginLeft: "0.25"
            textAlign:
              x: center
          children:
            - type: image
              path: aboutRed.svg
              style:
                width: "0.106"
                marginTop: "0.03"
            - type: label
              text: "Payment Declined"
              dataKey:
              style:
                color: "0x333333"
                fontSize: .Nfont.h1_1
                width: "0.5"
                height: "0.03"

                word-break: break-word
                margin: auto
                marginTop: "0.005"
            - type: label
              text: "Please check your payment information
                and try again"
              dataKey:
              style:
                color: "0x555555"
                fontSize: .Nfont.h1_1
                width: "0.5"
                height: "0.06"
                word-break: break-word
                margin: auto
                marginTop: "0.005"
