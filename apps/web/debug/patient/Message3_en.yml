Message3:
  pageNumber: "220"
  title: "Message"
  init:
    - .SignInCheck
    - ..listData.get
    - ..inboxMessage.get
    - ..attachmentList.get
    - actionType: evalObject
      object:
        ..inboxMessage.document@: =..inboxMessage.doc.0
    - actionType: evalObject
      object:
        =.builtIn.string.concat:
          dataIn:
            - "Re:"
            - =.Global.email.name.title
          dataOut: MessageShow.subject
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =.Global.emailNumber
              string2: "0"
        - .Global.inboxHidden@: "true"
        - .Global.inboxHidden@: "false"
  subject: ""
  InboxFolder: ""
  listData:
    folderList:
      edge: ""
    get:
      .EdgeAPI.get: ""
      api: re
      type: .EdgeType.Folder
      id: .Global.currentUser.vertex.id
      xfname: bvid
      maxcount: "200"
      dataKey: listData.folderList
      _nonce: .Global._nonce@
  # styleAttribute:
  #   funcBar: "0x00000
  email:
    edge: .Global.email
    edgeAPI:
      store:
        api: ce
        dataKey: email.edge
  update: ..email.edgeAPI.store

  #get attachment
  attachmentList:
    get:
      .DocAPI.get: ""
      api: rd
      dataKey: attachmentList
      type: .DocType.UploadFile
      id: .Global.email.id
      xfname: eid
      maxcount: "100"
      obfname: "mtime"
      _nonce: =.Global._nonce
  # get inbox message
  inboxMessage:
    document: ""
    get:
      .DocAPI.get: ""
      api: rd
      id: .Global.email.id
      xfname: eid
      type: .DocType.InboxMessage
      dataKey: Global.formData.inboxMessage
      maxcount: "10"
      obfname: "mtime"
      _nonce: =.Global._nonce
  #create new email
  saveEmail:
    - .MessageShow.NewEmail.edgeAPI.store: ""
  NewEmail:
    response: ""
    edge:
      .Edge: ""
      type: .EdgeType.Email
      subtype: 5
      name:
        title: ""
        # message: ""
        folderID: ""
        isStar: false
        isDraft: false
        isRead: false
        receiveName: ""
        senderName: ""
      bvid: .Global.currentUser.vertex.id
      evid: ""
      refid: ""
    edgeAPI:
      store:
        api: ce
        dataKey: NewEmail.edge
        dataOut: NewEmail.response
  components:
    - .BaseHeader:
    - .HeaderLeftButton:
      onClick:
        - goto: InboxDashboard
      # path: backWhiteArrow.svg
    - .HeaderRightImg:
      path:
      style:
        width: "0.05"
        height: "0.02"
      # onClick:
      #   - actionType: evalObject
      #     object:
      #       ..styleAttribute.funcBar@: "block"
      #   - actionType: builtIn
      #     funcName: redraw
      #     viewTag: funbar
      # onClick:
      #   - actionType: popUp
      #     popUpView: detailview
    - type: view
      style:
        width: "1"
        height: "0.8"
        marginTop: "0.1"
        top: "0"
        left: "0"
        # display: "block"
        overflow: scroll
      viewTag: funbar
      children:
        - type: view
          style:
            width: "1"
            height: "0.15"
            display: "block"
            backgroundColor: "0xffffff"
            boxShadow: "0px 15px 10px -15px #0000002f"
          children:
            - type: label
              text=func: .builtIn.string.getFirstChar
              dataKey: Global.email.name.data.senderName
              style:
                left: "0.05"
                top: "0.02"
                width: "0.13"
                height: "0.06"
                fontSize: "18"
                color: "#2988e6"
                # textIndent: "18px"
                textAlign:
                  y: center
                  x: center
                backgroundColor: "#b2d1ff"
            - type: label
              text: "From:"
              style:
                left: "0.23"
                top: "0.025"
                height: "0.035"
                fontSize: "15"
                textAlign:
                  x: left
            - type: label
              text: Blair Zhang
              dataKey: Global.email.name.data.senderName
              style:
                fontSize: "15"
                fontWeight: "450"
                height: "0.035"
                color: "0x707070"
                left: "0.35"
                top: "0.025"
                textAlign:
                  x: left
            - type: label
              text: "To:"
              style:
                left: "0.23"
                top: "0.055"
                height: "0.035"
                fontSize: "15"
                textAlign:
                  x: left
            - type: label
              text: Christopher Grenz
              dataKey: Global.email.name.data.receiverName
              style:
                fontSize: "15"
                fontWeight: "450"
                height: "0.035"
                color: "0x707070"
                left: "0.3"
                top: "0.055"
                textAlign:
                  x: left
            - type: label
              text: Anaheim Marketing Plan
              dataKey: Global.email.name.title
              style:
                fontSize: "22"
                fontWeight: "500"
                # color: "0x707070"
                left: "0.05"
                top: "0.09"
            # - type: view
            #   style:
            #     left: "0.05"
            #     top: "0.13"
            #     width: "0.45"
            #     height: "0.035"
            #     borderRadius: "2"
            #     backgroundColor: "0xEBEBEB"
            #   children:
            #     - type: image
            #       path: pin.svg
            #       style:
            #         left: "0"
            #         height: "0.02"
            #         top: "0"
            #     - type: label
            #       text: Anaheim Urgent Care List for ...
            #       dataKey: itemObject.name.title
            #       style:
            #         fontSize: "12"
            #         fontWeight: "200"
            #         left: "0.05"
            #         width: "0.4"
            #         height: "0.03"
            #         color: "0x4A91C4"
            #         textAlign:
            #           y: center
            - type: label
              text=func: .builtIn.string.formatUnixtime_en
              dataKey: Global.email.ctime
              style:
                top: "0.025"
                height: "0.02"
                textAlign:
                  y: center
                left: "0.66"
                fontSize: "10"
                color: "0x707070s"
            - type: image
              viewTag: select
              path:
                emit:
                  dataKey:
                    var: email
                  actions:
                    - if:
                        - $var.edge.name.isStar
                        - providerOn.svg
                        - providerOff.svg
              style:
                height: "0.02"
                left: "0.88"
                top: "0.045"
            - type: label
              text: Details
              onClick:
                - goto: Attachment
              style:
                top: "0.07"
                height: "0.02"
                left: "0.85"
                fontSize: "12"
                color: "0x4A91C4"
                textAlign:
                  y: center

        - type: view
          style:
            top: "0.17"
            left: "0"
            width: "1"
            height: "0.43"
            #backgroundColor: "0xcdcdcd"
          children:
            - type: textView
              dataKey: Global.email.name.data.content
              style:
                width: "0.9"
                left: "0.05"
                fontSize: "14"
                height: "0.4"

                color: "0x757575"
                fontWeight: 300
                isEditable: "false"
                border:
                  style: "1"
                textAlign:
                  y: top
    - type: view
      style:
        top: "0.9"
        width: "1"
        height: "0.1"
        left: "0"
        backgroundColor: "0x2988e6"
        zIndex: "10"
      children:
        - .DashboardFooterView:
          onClick:
            - goto: "PatientDashboard"
          children:
            - .DashboardBox:
              children:
                - .DashboardFooterImg:
                  path: dashboard.svg
            - .DashboardFooterTxt:
              style:
                color: "#ffffff"
        - .DashboardFooterView:
          style:
            left: "0.333"
          onClick:
            - goto: "InboxDashboard"
          children:
            - .DashboardBox:
              children:
                - .DashboardFooterImg:
                  path: inboxYellow.svg
            - .DashboardFooterTxt:
              text: "Inbox"
              style:
                color: "#FECE55"
            - type: label
              dataKey: Global.emailNumber
              style:
                left: "0.19"
                top: "0.005"
                width: "0.05"
                height: "0.025"
                fontSize: "14"
                backgroundColor: "0xfd3a3a"
                isHidden: .Global.inboxHidden
                border:
                  style: "3"
                borderColor: "0xfd3a3a"
                borderRadius: "50"
                color: "0xffffff"
                textAlign:
                  x: center
        - .DashboardFooterView:
          style:
            left: "0.666"
          onClick:
            - goto: MenuBars
          children:
            - .DashboardBox:
              children:
                - .DashboardFooterImg:
                  path: me.svg
            - .DashboardFooterTxt:
              text: "Me"
