Cov19TestFormEditPage1:
  title: "COVID-19 Testing Consent Form" # Title

  pageNumber: "" # PageNumber

  init:
    - if:
        - =.Global.formData.firstToCov19TestForm
        - actionType: evalObject
          object:
            - ..apiRequest.cov19TestForm.docReq.name.data@: =.VaccineFormDM.cov19TestFormDM
            - ..apiRequest.cov19TestForm.docReq.name.data.userInfo@:
                patientName: =.Global.Profile.name.data.basicInfo.fullName
                participateName: =.Global.formData.participateName
            - ..apiRequest.cov19TestForm.docReq.name.data.patientInfo.fullName@: =.Global.Profile.name.data.basicInfo.fullName
            - =..apiRequest.cov19TestForm.docAPI.store: ""
            # 将文档保存到本地存储
            - .Global.formData.cov19TestForm@: =..apiRequest.cov19TestForm.docResp.doc
        - continue

    - if:
        - =.Global.formData.cov19TestForm.name.data.symptomProfile
        - ..formData.symptomProfile@: =.Global.formData.cov19TestForm.name.data.symptomProfile
        - continue
    - if:
        - =.Global.formData.cov19TestForm.name.data.patientInfo.fullName
        - ..apiRequest.cov19TestForm.docReq.name.data.patientInfo.fullName@: =.Global.formData.cov19TestForm.name.data.patientInfo.fullName
        - continue
  apiRequest:
    cov19TestForm:
      docResp: ""
      docReq:
        id: ""
        eid: .Global.rootNotebookID
        type: .DocType.Cov19TestForm
        subtype:
          isEncrypted: "1"
          mediaType: "application/json"
        name:
          data: ""
          title: "COVID-19 Testing Consent Form"
          user: .Global.Profile.name.data.basicInfo.fullName
          type: "application/json"
      docAPI:
        store:
          api: cd
          dataIn: Cov19TestFormEditPage1.apiRequest.cov19TestForm.docReq
          dataOut: Cov19TestFormEditPage1.apiRequest.cov19TestForm.docResp

  formData: # Input data here
    symptomProfile:
      experience: []
      remark: ""
      problem1: ""
      problem2: ""
      problem3: ""
      problem4: ""
      flag: "none"
  formDataTemp: # Input data temp here
    experienceSelect:
      # - key: none
      #   value: None
      - key: muscieAches
        value: Muscle aches
      - key: fever
        value: Fever
      - key: nausea
        value: Nausea and vomiting
      - key: cough
        value: Cough
      - key: shortBreath
        value: Shortness of breath
      - key: diarrhea
        value: Diarrhea
      - key: tiredness
        value: Tiredness,Fatigue
      - key: headache
        value: Headache
      - key: soreThroat
        value: Sore throat
      - key: other
        value: "Other:"

    selectYesOrNo:
      problem1:
        - key: problem1
          value: "Yes"
        - key: problem1
          value: "No"
      problem2:
        - key: problem2
          value: "Yes"
        - key: problem2
          value: "No"
      problem3:
        - key: problem3
          value: "Yes"
        - key: problem3
          value: "No"
      problem4:
        - key: problem4
          value: "Yes"
        - key: problem4
          value: "No"
      problem5:
        - key: problem5
          value: "Yes"
        - key: problem5
          value: "No"
  components:
    - type: view
      style:
        ..style.formatting:
      children:
        - .BasePublicHeader:
          children:
            - type: view
              style:
                ..style.backLeft:
              children:
                - type: image
                  path: arrowLeftgrey.svg
                  style:
                    ..style.backLeftImg:
                  onClick:
                    - ..event.publicClick
                    - actionType: builtIn
                      funcName: goBack
                      reload: true
            - .BasePublicHeaderTitle:
              style:
                fontSize: .Nfont.h14
        - type: view
          style:
            ..style.bodyBox:
          children:
            - type: view
              style:
                ..style.viewBox:
              children:
                - type: view
                  style:
                    ..style.titleBox:
                  children:
                    - type: label
                      text: Symptom Profile
                      dataKey:
                      style:
                        ..style.titlelabel:
                    - type: label
                      text: "1&nbsp;/&nbsp;3"
                      dataKey:
                      style:
                        ..style.pageNum:
            - type: scrollView
              style:
                ..style.scrollBox:
              children:
                - type: view
                  style:
                    width: "0.92"
                    height: "auto"
                    overflow: hidden
                  children:
                    - type: view
                      style:
                        ..style.blockBox:
                        marginTop: "0.02216"
                      children:
                        - type: label
                          text: Patient Name
                          style:
                            ..style.blockBoxLeft:
                        - type: label
                          text:
                          dataKey: apiRequest.cov19TestForm.docReq.name.data.patientInfo.fullName
                          style:
                            ..style.blockBoxRight:
                    - type: view
                      style:
                        ..style.blockBox:
                      children:
                        - type: label
                          text: Date
                          style:
                            ..style.blockBoxLeft:
                        - type: label
                          text=func: .builtIn.string.formatUnixtimeL_en
                          dataKey: Global.formData.cov19TestForm.ctime
                          style:
                            ..style.blockBoxRight:
                - type: label
                  text: "COVID-19 screening and/or diagnostic testing, authorized by the Food and Drug Administration under an Emergency Use Authorization (EUA), will be used today. This test is meant for use in individuals with signs and/or symptoms compatible with COVID-19. "
                  style:
                    ..style.text:
                    marginTop: "0.0258"
                - type: label
                  text: "Please Mark The Symptoms You Are Currently Experiencing (If Any):"
                  dataKey:
                  style:
                    ..style.secondLabel:
                - type: view
                  viewTag: noneTag
                  style:
                    ..style.itemView:
                  children:
                    - type: image
                      path: 
                        ..event.checkNone:
                      style:
                        ..style.itemImg:
                      onClick:
                        - ..event.noneClick
                    - type: label
                      text: None
                      style:
                        ..style.itemValue:
                - type: list
                  androidGrid: true
                  contentType: listObject
                  listObject: ..formDataTemp.experienceSelect
                  iteratorVar: itemObject
                  style:
                    ..style.list:
                  children:
                    - type: listItem
                      viewTag: listTag
                      itemObject:
                      style:
                        ..style.listItem:
                        height: "0.041"
                      children:
                        - type: view
                          style:
                            ..style.itemView:
                          children:
                            - type: image
                              viewTag: experienceSelectTag
                              path:
                                ..event.checkBox:
                              style:
                                ..style.itemImg:
                              onClick:
                                - ..event.checkBoxClick
                            - type: label
                              text:
                              dataKey: itemObject.value
                              style:
                                ..style.itemValue:
                - type: view
                  viewTag: remarkTag
                  style:
                    width: "0.92"
                    display: ..formData.symptomProfile.flag
                  children:
                    - type: textField
                      placeholder: Enter here
                      dataKey: formData.symptomProfile.remark
                      style:
                        ..style.blockInput:

                - type: label
                  text: "Do you live in a group home, assisted living center or other facility with more than 3 other people older than 60 years old?"
                  style:
                    ..style.text:
                    marginTop: "0.0246"

                - type: list
                  viewTag: problem1Tag
                  contentType: listObject
                  listObject: ..formDataTemp.selectYesOrNo.problem1
                  iteratorVar: itemObject
                  style:
                    ..style.radioList:
                  children:
                    - type: listItem
                      itemObject:
                      style:
                        ..style.radioListItem:
                      children:
                        - type: image
                          path:
                            ..event.oneRadio:
                          style:
                            ..style.radioItemImg:
                          onClick:
                            - ..event.oneClick
                        - type: label
                          text:
                          dataKey: itemObject.value
                          style:
                            ..style.radioItemValue:

                - type: label
                  text: "Do you work in a hospital, long-term care facility or assisted living facility?"
                  style:
                    ..style.text:
                    marginTop: "0.0246"

                - type: list
                  viewTag: problem2Tag
                  contentType: listObject
                  listObject: ..formDataTemp.selectYesOrNo.problem2
                  iteratorVar: itemObject
                  style:
                    ..style.radioList:
                  children:
                    - type: listItem
                      itemObject:
                      style:
                        ..style.radioListItem:
                      children:
                        - type: image
                          path:
                            ..event.twoRadio:
                          style:
                            ..style.radioItemImg:
                          onClick:
                            - ..event.twoClick

                        - type: label
                          text:
                          dataKey: itemObject.value
                          style:
                            ..style.radioItemValue:
                - type: label
                  text: "Have you traveled anywhere outside of California in the past 1 month?"
                  style:
                    ..style.text:
                    marginTop: "0.0246"

                - type: list
                  viewTag: problem3Tag
                  contentType: listObject
                  listObject: ..formDataTemp.selectYesOrNo.problem3
                  iteratorVar: itemObject
                  style:
                    ..style.radioList:
                  children:
                    - type: listItem
                      itemObject:
                      style:
                        ..style.radioListItem:
                      children:
                        - type: image
                          path:
                            ..event.threeRadio:
                          style:
                            ..style.radioItemImg:
                          onClick:
                            - ..event.threeClick

                        - type: label
                          text:
                          dataKey: itemObject.value
                          style:
                            ..style.radioItemValue:

                - type: label
                  text: "Have you been in KNOWN close contact (i.e. within 6 feet) with someone confirmed to have COVID-19?"
                  style:
                    ..style.text:
                    marginTop: "0.0246"

                - type: list
                  viewTag: problem4Tag
                  contentType: listObject
                  listObject: ..formDataTemp.selectYesOrNo.problem4
                  iteratorVar: itemObject
                  style:
                    ..style.radioList:
                  children:
                    - type: listItem
                      itemObject:
                      style:
                        ..style.radioListItem:
                      children:
                        - type: image
                          path:
                            ..event.fourRadio:
                          style:
                            ..style.radioItemImg:
                          onClick:
                            - ..event.fourClick

                        - type: label
                          text:
                          dataKey: itemObject.value
                          style:
                            ..style.radioItemValue:
                - type: view
                  style:
                    marginTop: "0.03"

        - type: view
          style:
            ..style.btnBox:
          children:
            - type: button
              text: Next
              dataKey:
              style:
                ..style.btn:
              onClick:
                - ..event.publicClick
                - goto: Cov19TestFormEditPage2
  event:
    oneRadio:
      emit:
        dataKey:
          var: itemObject
        actions:
          - if:
              - =.builtIn.string.equal:
                  dataIn:
                    string1: =..formData.symptomProfile.problem1
                    string2: $var.value
              - radioOn.svg
              - radioOff.svg
    oneClick:
      - emit:
          dataKey:
            var: itemObject
          actions:
            - if:
                - =.builtIn.string.equal:
                    dataIn:
                      string1: =..formData.symptomProfile.problem1
                      string2: $var.value
                - continue
                - =.builtIn.object.set:
                    dataIn:
                      object: =..formData.symptomProfile
                      key: $var.key
                      value: $var.value
      - actionType: builtIn
        funcName: redraw
        viewTag: problem1Tag
    twoRadio:
      emit:
        dataKey:
          var: itemObject
        actions:
          - if:
              - =.builtIn.string.equal:
                  dataIn:
                    string1: =..formData.symptomProfile.problem2
                    string2: $var.value
              - radioOn.svg
              - radioOff.svg
    twoClick:
      - emit:
          dataKey:
            var: itemObject
          actions:
            - if:
                - =.builtIn.string.equal:
                    dataIn:
                      string1: =..formData.symptomProfile.problem2
                      string2: $var.value
                - continue
                - =.builtIn.object.set:
                    dataIn:
                      object: =..formData.symptomProfile
                      key: $var.key
                      value: $var.value
      - actionType: builtIn
        funcName: redraw
        viewTag: problem2Tag
    threeRadio:
      emit:
        dataKey:
          var: itemObject
        actions:
          - if:
              - =.builtIn.string.equal:
                  dataIn:
                    string1: =..formData.symptomProfile.problem3
                    string2: $var.value
              - radioOn.svg
              - radioOff.svg
    threeClick:
      - emit:
          dataKey:
            var: itemObject
          actions:
            - if:
                - =.builtIn.string.equal:
                    dataIn:
                      string1: =..formData.symptomProfile.problem3
                      string2: $var.value
                - continue
                - =.builtIn.object.set:
                    dataIn:
                      object: =..formData.symptomProfile
                      key: $var.key
                      value: $var.value
      - actionType: builtIn
        funcName: redraw
        viewTag: problem3Tag
    fourRadio:
      emit:
        dataKey:
          var: itemObject
        actions:
          - if:
              - =.builtIn.string.equal:
                  dataIn:
                    string1: =..formData.symptomProfile.problem4
                    string2: $var.value
              - radioOn.svg
              - radioOff.svg

    fourClick:
      - emit:
          dataKey:
            var: itemObject
          actions:
            - if:
                - =.builtIn.string.equal:
                    dataIn:
                      string1: =..formData.symptomProfile.problem4
                      string2: $var.value
                - continue
                - =.builtIn.object.set:
                    dataIn:
                      object: =..formData.symptomProfile
                      key: $var.key
                      value: $var.value
      - actionType: builtIn
        funcName: redraw
        viewTag: problem4Tag
    checkBox:
      emit:
        dataKey:
          var: itemObject
        actions:
          - if:
              - =.builtIn.array.has:
                  dataIn:
                    object: =..formData.symptomProfile.experience
                    value: $var.key
              - selectOnBlue.svg
              - selectOffBlue.svg
    checkNone:
      emit:
        actions:
          - if:
              - =.builtIn.array.has:
                  dataIn:
                    object: =..formData.symptomProfile.experience
                    value: none
              - selectOnBlue.svg
              - selectOffBlue.svg
    checkBoxClick:
      - emit:
          dataKey:
            var: itemObject
          actions:
            - if:
                - =.builtIn.array.has:
                    dataIn:
                      object: =..formData.symptomProfile.experience
                      value: $var.key
                - =.builtIn.array.removeByValue:
                    dataIn:
                      object: =..formData.symptomProfile.experience
                      value: $var.key
                - =.builtIn.array.add:
                    dataIn:
                      object: =..formData.symptomProfile.experience
                      value: $var.key
      - actionType: evalObject
        object:
          - if:
              - =.builtIn.array.has:
                  dataIn:
                    object: =..formData.symptomProfile.experience
                    value: "none"
              - actionType: evalObject
                object:
                  - =.builtIn.array.removeByValue:
                      dataIn:
                        object: =..formData.symptomProfile.experience
                        value: none
              - continue
          - if:
              - =.builtIn.array.has:
                  dataIn:
                    object: =..formData.symptomProfile.experience
                    value: "other"
              - ..formData.symptomProfile.flag@: "block"
              - ..formData.symptomProfile.flag@: "none"

      - actionType: builtIn
        funcName: redraw
        viewTag: remarkTag
      - actionType: builtIn
        funcName: redrawCurrent
        viewTag: experienceSelectTag
      - actionType: builtIn
        funcName: redraw
        viewTag: noneTag
    noneClick:
      - actionType: evalObject
        object:
          - if:
              - =.builtIn.array.has:
                  dataIn:
                    object: =..formData.symptomProfile.experience
                    value: "none"
              - =.builtIn.array.removeByValue:
                  dataIn:
                    object: =..formData.symptomProfile.experience
                    value: "none"
              - actionType: evalObject
                object:
                  - ..formData.symptomProfile.experience@: []
                  - ..formData.symptomProfile.experience@: ["none"]
                  - ..formData.symptomProfile.remark@: ""
          - if:
              - =.builtIn.array.has:
                  dataIn:
                    object: =..formData.symptomProfile.experience
                    value: "none"
              - ..formData.symptomProfile.flag@: "none"
              - continue
      - actionType: builtIn
        funcName: redraw
        viewTag: remarkTag
      - actionType: builtIn
        funcName: redraw
        viewTag: noneTag
      - actionType: builtIn
        funcName: redraw
        viewTag: listTag
    publicClick:
      - actionType: evalObject
        object:
          - .Global.formData.cov19TestForm@: =..cov19TestForm.docResp.doc
          - .Global.formData.cov19TestForm.name.data.symptomProfile@: =..formData.symptomProfile
          # 更新文档状态
          - .Global.formData.firstToCov19TestForm@: false

  style: #Input style fragment here
    formatting:
      margin: "0"
      padding: "0"
      height: "1"
      width: "1"
      overflow: hidden
      boxSizing: border-box

      color: "0x333333"
      fontSize: .Nfont.h16
    bodyBox:
      width: "auto"
      height: "0.84852"
    backLeft:
      marginLeft: "0.04"
      display: "inline-block"
      verticalAlign: middle
      height: "0.055"
      boxSizing: border-box
    backLeftImg:
      marginTop: "0.012"
      height: "0.0295"
    viewBox:
      marginLeft: "0.04"
      height: "auto"
      width: "0.92"
      overflow: hidden

    titleBox:
      marginTop: "0.0270"
      paddingBottom: "1.23vh"
      width: "0.92"
      height: "auto"
      border:
        style: 2
      borderWidth: "1"
      borderColor: "#dedede"
    titlelabel:
      display: "inline-block"
      fontSize: .Nfont.h16
      color: "0x333333"
      width: "0.753125"
      height: "auto"
      fontWeight: "700"
      verticalAlign: top
      lineHeight: "2.95vh"
    pageNum:
      marginLeft: "0.064"
      display: "inline-block"
      height: "0.0221"
      width: "0.1013"
      backgroundColor: "0x2988e6"
      color: "0xffffff"
      fontSize: .Nfont.h14
      fontWeight: "700"
      borderRadius: "3"
      verticalAlign: top
      textAlign:
        x: center
    scrollBox:
      marginLeft: "0.04"
      width: "0.92"
      height: "0.7832"
      boxSizing: border-box
      overflow: scroll
    blockBox:
      marginTop: "0.01"
      height: "auto"
      width: "0.92"
    blockBoxLeft:
      display: "inline-block"
      width: "auto"
      height: "auto"
      color: "0x666666"
      fontSize: .Nfont.h12
      verticalAlign: middle
    blockBoxRight:
      marginLeft: "0.0373"
      display: "inline-block"
      width: "auto"
      height: "auto"
      color: "0x333333"
      fontSize: .Nfont.h14
      fontWeight: "600"
      verticalAlign: middle
    secondLabel:
      width: "0.92"
      fontSize: .Nfont.h14
      fontWeight: "700"
      color: "0x333333"
      marginTop: "0.0246"
      lineHeight: "2.58vh"
    text:
      marginTop: "0.0172"
      height: "auto"
      width: "0.92"
      fontSize: .Nfont.h14
      lineHeight: "2.58vh"
      wordWrap: break-word
    list:
      width: "0.92"
      margin: "0"
      height: auto
      boxSizing: border-box
    listItem:
      display: "inline-block"
      width: "0.45"
      height: "auto"
      boxSizing: border-box
    itemView:
      width: "auto"
      height: "auto"
      marginTop: "0.01724"
    itemImg:
      display: "inline-block"
      width: "0.0442"
      verticalAlign: middle
    radioList:
      margin: "0"
      marginTop: "0.01477"
      width: "0.9"
      axis: horizontal
      height: auto
      boxSizing: border-box
      overflow: hidden
    radioListItem:
      display: "inline-block"
      width: "0.2666"
      height: "auto"
      boxSizing: border-box
    radioItemImg:
      display: "inline-block"
      width: "0.0442"
      verticalAlign: middle
    radioItemValue:
      marginLeft: "0.032"
      display: "inline-block"
      fontSize: .Nfont.h14
      color: "#333333"
      width: "auto"
      height: "auto"
      verticalAlign: middle
    itemValue:
      marginLeft: "0.02133"
      display: "inline-block"
      fontSize: .Nfont.h14
      color: "#333333"
      width: "auto"
      height: "auto"
      verticalAlign: middle
    blockInput:
      marginTop: "0.01"
      height: "0.0369"
      width: "0.92"
      boxSizing: border-box
      border:
        style: 3
      borderRadius: "3"
      borderWidth: "1.5"
      borderColor: "0xdedede"

      fontSize: .Nfont.h14
      color: "0x333333"
      textIndent: "12px"
    btnBox:
      height: "0.0972"
      width: "1"
      backgroundColor: "0xffffff"
      boxSizing: border-box

      boxShadow: "1px 1px 4px 1px #dededf"
      overflow: hidden
      textAlign:
        x: center
    btn:
      marginTop: "0.0123"
      height: "0.0443"
      width: "0.84"
      border:
        style: 1
      borderRadius: "5"
      backgroundColor: "#2988e6"
      color: "#ffffff"
      fontSize: .Nfont.h14
      boxSizing: border-box
      fontWeight: "600"
      textAlign:
        x: center
