FavoriteContact:
  pageNumber: "350"
  title: "My Connection"
  _nonce: 0
  init:
    - .SignInCheck 
    - ..listData.get 
    - if:
      - ..listData.contactList.doc.0
      - continue
      - =.builtIn.checkField:
          dataIn:
            contentType: messageHidden
            wait: 100 
  save:
    - =.Contacts.contactInfo.docAPI.store: ""  
  searchData:
    searchContact: ""
  listData:
    contactList: ""
    get:
      .DocAPI.get : ""
      api: rd
      dataKey: listData.contactList
      # type: "2"
      ids: 
        - .Global.rootNotebookID
      xfname: eid
      maxcount : "10"
      obfname : "mtime" 
      sCondition: .DocType.GetFavContact
      _nonce: =.Global._nonce
  contactInfo:
    document: ""
    docAPI:
      .DocAPI: "" 
      store:
        api: cd
        dataKey: Contacts.contactInfo.document
  generalInfo:
    value: true
  date: "February 12, 2021 at 2:30 PM" #add

  components:
    - .BaseHeader:
    - .HeaderLeftButton:
      style:
        backgroundColor: "#2887e5"
    - type: image
      path: addContacts.svg
      onClick:
        - goto: AddHealthNetWork
      style:
        top: "0.033"
        left: "0.84"
        width: "0.09"
        zIndex: 100
    # - .HeaderRightImg:
    #   path: sideNav.svg
    #   onClick:
    #     - goto: Dashboard
    - type: view
      style:
        top: "0.1"
        left: "0"
        width: "1"
        height: "0.8"
      children:
        - type: view
          style:
            # top: "0.1"
            # left: "0.05"
            # width: "1"
            # height: "0.05"
            # backgroundColor: "0xcdcdcd"
            top: "0"
            width: "1"
            height: "0.08"
            backgroundColor: "0x2988e6"
          children:
            - .SearchField:
              # placeHolder: "search contacts"
              # style:
              #   left: "0.2"
              #   top: "0.01"
              placeholder: "Search"
              style:
                left: "0.04"
                top: "0.01"
                backgroundColor: "0xffffff"
                textAlign:
                  x: center
                  y: center 
            # - .SearchDoc:
            #   style:
            #     left: "0"
            #     top: "0.01"
            # - type: image
            #   path: addBlue.svg
            #   onClick:
            #     - goto: AddContact
            #   style:
            #     top: "0.015"
            #     left: "0.83"
            #     height: "0.03"
            - type: image
              path: search.svg
              style:
                top: "0.02"
                left: "0.35"
                height: "0.03"
            - type: label
              contentType: messageHidden
              text: "No contacts added"
              style:
                left: "0.25"
                top: "0.25"
                textAlign: 
                  x: center
                width: "0.5"
                height: "0.04"
                # color: "0x000058"
                fontSize: .Nfont.h2
                isHidden: "true"
        - type: list
          contentType: listObject
          listObject: ..listData.contactList.doc # to dataObject to enumerate the list
          iteratorVar: itemObject
          style:
            top: "0.15"
            left: "0.05"
            width: "0.9"
            height: "0.9"
          children:
            - type: listItem
              itemObject: ""
              style:
                left: "0"
                width: "0.9"
                height: "0.1"
                border:
                  style: "2"
                borderWidth: "1"
                borderColor: "0x00000011"
              children:
                - type: image #add
                  path: ava.png
                  style:
                    top: "0.015"
                    height: "0.06"
                - type: image
                  viewTag: select
                  style:
                    top: "0.03"
                    # left: "0"
                    left: "0.8"
                    height: "0.04"
                  path:
                    emit:
                      dataKey:
                        var: itemObject
                      actions:
                        - if:
                            - =.builtIn.string.equal:
                                dataIn:
                                  string1: =..generalInfo.value
                                  string2: $var.name.data.isFavorite
                            - providerOn.svg
                            - providerOn.svg
                  onClick:
                    # - actionType: builtIn
                    #   funcName: toggleFlag
                    #   dataKey: itemObject.name.data.isFavorite
                    - actionType: updateObject # updateObject(dataKey, dataObject, dataObjectKey)
                      dataKey: ContactsList.contactInfo.document
                      dataObject: itemObject # this must be a rootRoom
                    - emit:
                        dataKey:
                          var: itemObject
                        actions:
                          - if:
                              - =.builtIn.string.equal:
                                  dataIn:
                                    string1: =..generalInfo.value
                                    string2: $var.name.data.isFavorite
                                    
                              - =.builtIn.object.set:
                                  dataIn:
                                    object: $var
                                    key: name.data.isFavorite
                                    value: false
                              - =.builtIn.object.set:
                                  dataIn:
                                    object: $var
                                    key: name.data.isFavorite
                                    value: true
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: select
                    # - actionType: evalObject
                    #   object:
                    #     - if:
                    #         - =.ContactsList.contactInfo.document.name.data.isFavorite
                    #         - .ContactsList.contactInfo.document.name.data.isFavorite@: false
                    #         - .ContactsList.contactInfo.document.name.data.isFavorite@: true
                    - actionType: evalObject
                      object:
                        - if:
                            - =.ContactsList.contactInfo.document.name.data.isFavorite
                            - .ContactsList.contactInfo.document.type@: =.DocType.ContactFav
                            - .ContactsList.contactInfo.document.type@: =.DocType.Contact
                        - .Global._nonce@:
                            =.builtIn.math.random: ""
                        - .ContactsList.contactInfo.document._nonce@:
                            =.builtIn.math.random: ""
                    - actionType: evalObject
                      object: ..save
                    - actionType: evalObject
                      object:
                        .Global._nonce@:
                          =.builtIn.math.random: ""
                    # - actionType: refresh

                  # path: providerOff.svg
                  # pathSelected: providerOn.svg
                  # new environment can use
                - type: label
                  dataKey: itemObject.name.data.firstName
                  onClick:
                    - actionType: updateObject # updateObject(dataKey, dataObject, dataObjectKey)
                      dataKey: Global.DocReference.document
                      dataObject: itemObject
                    - goto: ContactInformation
                  style:
                    left: "0.18"
                    top: "0"
                    height: "0.05"
                    width: "0.25"
                    fontSize: "17"
                    textAlign:
                      y: center
                - type: label
                  dataKey: itemObject.name.data.lastName
                  onClick:
                    - actionType: updateObject # updateObject(dataKey, dataObject, dataObjectKey)
                      dataKey: Global.DocReference.document
                      dataObject: itemObject
                    - goto: ContactInformation
                  style:
                    left: "0.43"
                    top: "0"
                    height: "0.05"
                    width: "0.25"
                    fontSize: "17"
                    textAlign:
                      y: center
                - type: label #add
                  dataKey: date
                  style:
                    top: "0.045"
                    left: "0.18"
                    height: "0.03"
                    width: "0.55"
                    fontSize: "13"
                    textAlign:
                      y: center
    - type: popUp # view
      viewTag: confirmView
      style:
        left: "0"
        top: "0"
        width: "0.8"
        height: "1"
        # backgroundColor: "0x00000066"
      children:
        - type: view
          style:
            left: "0.05"
            top: "0.3"
            width: "0.8"
            height: "0.35"
            backgroundColor: "0xeeeeeeff"
            border:
              style: "5"
            borderRadius: "15"
          children:
            - type: label
              text: "Do you want to make a phonecall?"
              style:
                .LabelStyle:
                  left: "0"
                  top: "0.12"
                  width: "0.8"
                  height: "0.04"
                  color: "0x00000088"
                  fontSize: "20"
                  fontStyle: bold
                  display: inline
                  textAlign:
                    x: center
                    y: center
            - type: divider
              style:
                .DividerStyle:
                  left: "0"
                  top: "0.25436"
                  width: "0.8"
                  height: "0.001"
                  backgroundColor: "0x00000088"
            - type: button
              onClick:
                - actionType: popUpDismiss
                  popUpView: confirmView
              text: Cancel
              style:
                .LabelStyle:
                  left: "0"
                  top: "0.275"
                  width: "0.4"
                  height: "0.06812"
                  color: "0x007affff"
                  fontSize: "17"
                  display: inline
                  textAlign:
                    x: center
                    y: center
                  border:
                    style: "5"
                  borderRadius: "15"
        - type: button
          onClick:
            - actionType: popUpDismiss
              popUpView: confirmView
            - actionType: evalObject
              object:
                - =.Global.rootRoomInfo.edgeAPI.store: ""
                - .Global._nonce@:
                    =.builtIn.math.random: ""
                - ..inviteMeeting.edge.id@: ""
                - ..inviteMeeting.edge.refid@: =.Global.rootRoomInfo.edge.edge.id
                - ..inviteMeeting.edge.name.roomName@: =.Global.rootRoomInfo.edge.edge.name.roomName
                - =.ContactsList.inviteMeeting.edgeAPI.store: ""
            - goto: MeetingLobby
          text: Confirm
          style:
            .LabelStyle:
              left: "0.4"
              top: "0.275"
              width: "0.4"
              height: "0.06812"
              color: "0x007affff"
              fontSize: "17"
              display: inline
              textAlign:
                x: center
                y: center
              border:
                style: "5"
              borderRadius: "15"
        - type: divider
          style:
            .DividerStyle:
              left: "0.4"
              top: "0.26"
              width: "0.001"
              height: "0.07"
              backgroundColor: "0x00000088"
    - .SubMenuView:
      style:
        # top: "0.09"
        # backgroundColor: "0x2988e6"
        # height: "0.1"
        # zIndex: "10"
        top: "0.18"
        height: "0.08"
        border: "none"
        borderBottom: "1px solid #dededf"
        zIndex: "10"
      children:
        - .SubMenuButton:
          text: "Recent"
          style:
            # width: "0.3"
            # top: "0.03"
            # left: "0.01"
            width: "0.25"
            height: "0.05"
            top: "0.03"
            left: "0.03"
            color: "0x2988e6"
            fontSize: '.Nfont.h2'
            backgroundColor: "0xffffff"
          onClick:
            - goto: RecentContact
        - .SubMenuButton:
          text: "Connections"
          style:
            # width: "0.3"
            # top: "0.03"
            # left: "0.3"
            width: "0.32"
            height: "0.05"
            top: "0.03"
            left: "0.32"
            color: "0x2988e6"
            backgroundColor: "0xffffff"
            fontSize: '.Nfont.h2'
          # onClick:
          #   - goto: ContactsList
          onClick:
            - goto: MyConnection
        - .SubMenuButton:
          text: "Favorites"
          style:
            # width: "0.3"
            # top: "0.03"
            # left: "0.6"
            # color: "0xffffffff"
            width: "0.25"
            height: "0.05"
            top: "0.03"
            left: "0.69"
            color: "0x2988e6"
            fontStyle: "bold"
            backgroundColor: "0xffffff"
            border:
              style: "2"
              width: "2"
              color: "0x2988e6"
            borderColor: "0x2988e6"
            fontSize: '.Nfont.h2'
          onClick:
            - goto: FavoriteContact
