DocumentProvider:
  title: Provider Documents
  pageNumber:
  init:
    - .SignInCheck
    - ..formData@: =.Global.Note
    # 判断是否是图片文件
    - if:
        - =.builtIn.array.has:
            dataIn:
              object: =..formDataTemp.imgTypeList
              value: =..formData.name.data.fileType
        - actionType: evalObject
          object:
            - ..formData.showFile@: "none"
            - ..formData.showImg@: "block"
        - actionType: evalObject
          object:
            - ..formData.showImg@: "none"
            - ..formData.showFile@: "block"
    - ..apiRequest.uplaodDoc.docReq.id@: =..formData.name.data.fileId
    - =..apiRequest.uplaodDoc.docAPI.get: ""
  formData:
    # Img
    showImg: "none"
    # file
    showFile: "none"
    fileDocument: ""
  formDataTemp:
    # 图片上传类型
    imgTypeList: ["jpeg", "jpg", "png", "pdf"]
    # doc
    docTypeList: ["docx", "doc", "pages"]
    # xls
    xlsTypeList: ["xlsx", "xls", "numbers"]
    # ppt
    pptTypeList: ["pptx", "ppt"]
    # htm
    htmTypeList: ["htm", "html"]
  apiRequest:
    uplaodDoc:
      docResp: ""
      docReq:
        id: ""
      docAPI:
        get:
          api: rd
          dataIn: DocumentProvider.apiRequest.uplaodDoc.docReq
          dataOut: DocumentProvider.apiRequest.uplaodDoc.docResp

  components:
    - .BasePublicHeader:
        children:
          - .BasePublicHeaderLeft:
          - .BasePublicHeaderTitle:
    - type: view
      style:
        ..style.scrollBox:
        overflow: hidden
      children:
        - type: label
          text: No content
          dataKey: formData.name.title
          style:
            ..style.titleInput:

        # 上传成功显示内容的区域
        - type: scrollView
          viewTag: showFileTag
          style:
            ..style.uploadSuccessBox:

          children:
            # image
            - type: view
              style:
                display: ..formData.showImg

              children:
                - type: image
                  path: null.png
                  viewTag: showImgTag
                  path=func: .builtIn.utils.prepareDocToPath
                  dataKey: formData.name.data.fileId
                  style:
                    width: "0.92"
                - type: image
                  path: downIcon.svg
                  style:
                    ..style.deleteDocImg:
                  onClick:
                    - ..event.downloadClick
            # file
            - type: view
              style:
                ..style.fileBox:
                display: ..formData.showFile
              onClick:
                - ..event.downloadClick
              children:
                - type: image
                  path:
                    ..event.iconPath:
                  style:
                    ..style.fileImg:
                - type: view
                  style:
                    ..style.contentBox:
                  children:
                    - type: label
                      text:
                      dataKey: formData.name.data.fileName
                      style:
                        ..style.contentPDFName:
                    - type: label
                      text:
                      text=func: .builtIn.string.bitFormatting
                      dataKey: formData.name.data.fileSize
                      style:
                        color: "#999999"
            - type: image
              path: downIcon.svg
              style:
                ..style.deleteDocImg:
                display: ..formData.showFile
              onClick:
                - ..event.downloadClick

    # 弹窗区域
    - .SuccessfulOneLine:
      message: "Download Successfully!"
      viewTag: successTag

    - .SoftTips:
      viewTag: failTag
      message: "Download Failed!"

    - .Normal:
      message: "Download this file?"
      viewTag: dialogueTag
      leftButton:
        - actionType: popUpDismiss
          popUpView: dialogueTag
      rightButton:
        - actionType: popUpDismiss
          popUpView: dialogueTag
        - actionType: evalObject
          object:
            - =.builtIn.utils.prepareDoc:
                dataIn:
                  doc: =..apiRequest.uplaodDoc.docResp.doc.0
                dataOut: DocumentProvider.formData.fileDocument
            - =.builtIn.EcosObj.download:
                dataIn:
                  fileName: =..formData.name.data.fileName
                  ecosObj: =..formData.fileDocument
                  successView: successTag
                  failedView: failTag

  event:
    iconPath:
      emit:
        actions:
          - if:
              - =.builtIn.array.has:
                  dataIn:
                    object: =..formDataTemp.docTypeList
                    value: =..formData.name.data.fileType
              - docIco.svg
              - if:
                  - =.builtIn.array.has:
                      dataIn:
                        object: =..formDataTemp.xlsTypeList
                        value: =..formData.name.data.fileType
                  - xlsIco.svg
                  - if:
                      - =.builtIn.array.has:
                          dataIn:
                            object: =..formDataTemp.pptTypeList
                            value: =..formData.name.data.fileType
                      - pptIco.svg
                      - if:
                          - =.builtIn.array.has:
                              dataIn:
                                object: =..formDataTemp.htmTypeList
                                value: =..formData.name.data.fileType
                          - htmIco.svg
                          - pdfIco.svg
    downloadClick:
      - actionType: popUp
        popUpView: dialogueTag

  style:
    scrollBox:
      marginLeft: "0.04"
      width: "0.92"
      height: "0.84729"
      boxSizing: "border-box"
    btnBox:
      width: "1"
      height: "0.0972"
      boxSizing: "border-box"
      overflow: "scroll"
      backgroundColor: "#ffffff"
      boxShadow: "1px 1px 4px 1px #dededf"
      textAlign:
        x: center
    btn:
      marginTop: "0.0123"
      height: "0.0443"
      width: "0.84"
      border:
        style: 1
      borderRadius: "5"
      backgroundColor: "#2988e6"
      color: "#ffffff"
      fontSize: .Nfont.h14
      boxSizing: border-box
      fontWeight: "600"
      textAlign:
        x: center
    title:
      fontSize: .Nfont.h14
      color: "#333333"
      fontWeight: "600"
      marginTop: "0.024630"
    titleInput:
      fontWeight: "600"
      marginTop: "0.024630"
      lineHeight: "2.58vh"
      width: "0.92"
      wordBreak: break-word
      fontSize: .Nfont.h14
    uploadIcon:
      display: "inline-block"
      verticalAlign: middle
      width: "0.92"
    tips:
      fontSize: .Nfont.h14
      color: "#666666"

    # 上传成功
    uploadSuccessBox:
      boxSizing: "border-box"
      paddingBottom: "0.036945"
      height: "0.695812"
      marginTop: "0.013546"
      #img
    deleteDocImg:
      top: "0.007389"
      left: "0.86"
      width: "0.048"
      height: "0.022167"
      zIndex: "10"
      # file
    fileBox:
      boxSizing: "border-box"
      width: "0.92"
      paddingLeft: "0.032019"
      paddingTop: "0.01"
      paddingBottom: "0.0123"
      backgroundColor: "#f8f8f8"
    fileImg:
      width: "0.056"
      height: "0.032019"
      verticalAlign: middle
    contentBox:
      display: "inline-block"
      boxSizing: "border-box"
      fontSize: .Nfont.h14
      paddingLeft: "0.021333"
      verticalAlign: middle
    contentPDFName:
      width: "0.733333"
      overflow: hidden;
      whiteSpace: nowrap;
      textOverflow: ellipsis;
      color: "#333333"
