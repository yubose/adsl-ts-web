MyPastProvider:
  pageNumber: "80"  # xdpage 8
  title: "My Provider"
  init:
    - .SignInCheck
    - actionType: evalObject
      object:
        .Global._nonce@:
          =.builtIn.math.random: ""
    - ..listData.get
  listData:
    invites:
      edge:
    edge:
      .Edge: ""
      type: "1050"
      maxcount : "100"
      id: .Global.currentUser.vertex.id 
      xfname : evid 
    get:
      .EdgeAPI.get : ""
      api: re
      dataIn: listData.edge
      dataOut: listData.invites
      _nonce: .Global._nonce
  accept:
    edge:
      type: 1060
      refid: ""
      bvid: .Global.currentUser.vertex.id
      evid: ""
      name: ""
    edgeAPI:
      store:
        api: ce
        dataKey: accept.edge
  saveAccept:
    - =..accept.edgeAPI.store: ""
  components:
    - type: view
      style:
        top: "0"
        left: "0"
        width: "1"
        height: "1"
        position: "fixed"
      children:
        - .BaseHeader:
        - .HeaderLeftButton:
          onClick:
            - goto: InboxMenu
        - .HeaderRightImg:
            path: sideNav.svg
            onClick:
              - goto: InboxMenu
        - type: view
          style:
            width: "1"
            height: "0.05"
            top: "0.1"
            left: "0"
            backgroundColor: "0xeff5f8"
          children:
            - type: button
              text: Active
              onClick:
                - goto: MyActiveProvider
              style:
                width: "0.15"
                height: "0.03"
                left: "0.3"
                top: "0.01"
                backgroundColor: '0x2988e6'
                border: 'none'
                color: "0xffffff"
            - type: button
              text: Pending
              style:
                width: "0.15"
                height: "0.03"
                left: "0.55"
                top: "0.01"
                backgroundColor: '0xffffff'
                borderColor: "0x2988e6"
                color: "0x2988e6"
                border:
                  style: "3"
        - type: view
          style:
            top: "0.15"
            left: "0"
            width: "0.8"
            height: "0.08"
          children:
            - type: list
              contentType: listObject
              listObject: ..listData.invites.edge # to dataObject to enumerate the list
              iteratorVar: itemObject
              style:
                top: "0"
                left: "0.05"
                width: "0.9"
                height: "0.6"
              children:
                - type: listItem
                  itemObject: ""
                  style:
                    left: "0"
                    width: "1"
                    height: "0.1"
                    border:
                      style: "2"
                    borderWidth: "1"
                    borderColor: "0x00000011"
                  children:
                    - type: button
                      text: accept
                      onClick:
                        - actionType: updateObject
                          dataKey: Global.acceptInfo
                          dataObject: itemObject 
                        - actionType: evalObject
                          object:
                            - ..accept.edge.name@: =.Global.acceptInfo.name
                            - ..accept.edge.refid@: =.Global.acceptInfo.id
                            - ..accept.edge.evid@: =.Global.acceptInfo.bvid
                        - actionType: evalObject
                          object: ..saveAccept
                        - goto: MyActiveProvider
                      style:
                        top: "0.03"
                        left: "0.7"
                        height: "0.04"
                        backgroundColor: "#32BFAE"
                        borderRadius: "8"
                        color: "0xffffff"
                        border:
                          style: "5"
                    - type: label
                      dataKey: itemObject.name.inviterName
                      onClick: 
                        - actionType: updateObject # updateObject(dataKey, dataObject, dataObjectKey)
                          dataKey: RecentList.inviteMeeting.edge
                          dataObject: itemObject                        
                        - actionType: popUp
                          popUpView: confirmView                          
                      style:
                        left: "0"
                        height: "0.1"
                        width: "0.45"
                        textAlign:
                          y: center
                    - type: label
                      dataKey: itemObject.name.inviterPhoneNumber
                      style:
                        left: "0.3"
                        top: "0.02"
                        height: "0.03"
                        fontSize: "12"
                        zIndex: 1000
                    - type: label
                      # if .buildIn.string.formatUnixtime_en(itemObject.ctime) is not valid
                      # keep the 'text' field, otherwise, replace the 'text' field with the return value.
                      text=func: .builtIn.string.formatUnixtime_en
                      dataKey: itemObject.ctime # Mon Day, Year hh:mm:ss
                      style:
                        left: "0.3"
                        top: "0.06"
                        height: "0.03"
                        fontSize: "12"
                        zIndex: 1000
                    - type: popUp # view
                      viewTag: confirmView
                      style:
                        left: "0"
                        top: "0"
                        width: "0.8"
                        height: "1" 
                        # backgroundColor: "0x00000066" 
                      children:
                        - type: view
                          style:
                            left: "0.05"
                            top: "0.15"
                            width: "0.8"
                            height: "0.35"
                            backgroundColor: "0xeeeeeeff"
                            border:
                              style: "5"
                            borderRadius: "15"
                          children:
                            - type: label
                              text: "Do you want to make a phonecall?"
                              style:
                                .LabelStyle:
                                  left: "0"
                                  top: "0.12"
                                  width: "0.8"
                                  height: "0.04"
                                  color: "0x00000088"
                                  fontSize: "20"
                                  fontStyle: bold
                                  display: inline
                                  textAlign:
                                    x: center
                                    y: center
                            - type: divider
                              style:
                                .DividerStyle:
                                  left: "0"
                                  top: "0.25436"
                                  width: "0.8"
                                  height: "0.001"
                                  backgroundColor: "0x00000088"
                            - type: button
                              onClick: 
                                - actionType: popUpDismiss
                                  popUpView: confirmView
                              text: Cancel
                              style:
                                .LabelStyle:
                                  left: "0"
                                  top: "0.275"
                                  width: "0.4"
                                  height: "0.06812"
                                  color: "0x007affff"
                                  fontSize: "17"
                                  display: inline
                                  textAlign:
                                    x: center
                                    y: center 
                                  border:
                                    style: "5"
                                  borderRadius: "15"

                            - type: button
                              onClick:                                 
                                - actionType: popUpDismiss
                                  popUpView: confirmView
                                - actionType: evalObject
                                  object: 
                                    - =.Global.rootRoomInfo.edgeAPI.store: "" 
                                    - .Global._nonce@: 
                                        =.builtIn.math.random: ""  
                                    - ..inviteMeeting.edge.id@: ""                                      
                                    - ..inviteMeeting.edge.refid@: =.Global.rootRoomInfo.edge.edge.id
                                    - ..inviteMeeting.edge.name.roomName@: =.Global.rootRoomInfo.edge.edge.name.roomName
                                    - =.RecentList.inviteMeeting.edgeAPI.store: ""                                                                                                      
                                - goto: MeetingLobby
                              text: Confirm
                              style:
                                .LabelStyle:
                                  left: "0.4"
                                  top: "0.275"
                                  width: "0.4"
                                  height: "0.06812"
                                  color: "0x007affff"
                                  fontSize: "17"
                                  display: inline
                                  textAlign:
                                    x: center
                                    y: center 
                                  border:
                                    style: "5"
                                  borderRadius: "15"
                            - type: divider
                              style:
                                .DividerStyle:
                                  left: "0.4"
                                  top: "0.26"
                                  width: "0.001"
                                  height: "0.07"
                                  backgroundColor: "0x00000088"                        