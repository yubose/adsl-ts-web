PatientChartGeneralInfo:
  pageNumber: "171"
  title: "Patient Chart"
  init:
    - .SignInCheck

    - ..generalInfo@: =.Global.formData.PatientchartInfo.name.data.generalInfo

    - =.builtIn.utils.getPageNames:
        dataIn:
        dataOut: PatientChartGeneralInfo.formData.routeList

    - if:
        - =.builtIn.array.has:
            dataIn:
              object: =..formData.routeList
              value: "MenuBars"
        - .Global.formData.patientChartStatus@: false
        - .Global.formData.patientChartStatus@: true

    #android use calendar init
    - actionType: evalObject
      object:
        - .BaseComponents.calendarDate.year@: ""
        - .BaseComponents.calendarDate.month@: ""
        - .BaseComponents.calendarDate.day@: ""
        - .BaseComponents.calendarDate.monthName@: ""
        - .BaseComponents.calendarDate.todayDate@: ""
        - .BaseComponents.calendarDate.flag@: ""
        - .BaseComponents.calendarDate.dayLable@: []
        - .BaseComponents.year@: []
        - .BaseComponents.flag: ""
        #生成年份
        - =.builtIn.date.generateYear:
            dataIn:
              last: 121
              next: 10
            dataOut: BaseComponents.year
        - =.builtIn.date.getYear:
            dataIn:
            dataOut: PatientChartGeneralInfo.calendarDate.year
    #android use calendar init
    - actionType: evalObject
      object: .BaseComponents.getDate
    #android use calendar init
    - actionType: evalObject
      object: .BaseComponents.getShow
    - actionType: evalObject
      object:
        - ..calendarDate@: =.BaseComponents.calendarDate
    #IOS use calendar init
    - actionType: evalObject
      object:
        - =.builtIn.date.getMonth:
            dataIn:
            dataOut: PatientChartGeneralInfo.calendarDate.month
        - =.builtIn.date.getYear:
            dataIn:
            dataOut: PatientChartGeneralInfo.calendarDate.year
        - =.builtIn.date.getDate:
            dataIn:
            dataOut: PatientChartGeneralInfo.calendarDate.day
    #IOS use calendar init
    - actionType: evalObject
      object:
        - =.builtIn.date.calendarArray:
            dataIn:
              year: =.PatientChartGeneralInfo.calendarDate.year
              month: =.PatientChartGeneralInfo.calendarDate.month
              today: =.PatientChartGeneralInfo.calendarDate.day
            dataOut: PatientChartGeneralInfo.calendarDate.dayLable
        - =.builtIn.date.transformMonth:
            dataIn:
              month: =.PatientChartGeneralInfo.calendarDate.month
            dataOut: PatientChartGeneralInfo.calendarDate.monthName
        - =.builtIn.date.ShowDateByNumber:
            dataIn:
              year: =.PatientChartGeneralInfo.calendarDate.year
              month: =.PatientChartGeneralInfo.calendarDate.month
              day: =.PatientChartGeneralInfo.calendarDate.day
              formatType: "M/D/Y"
            dataOut: EditProfile.calendarDate.todayDate
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =.Global.flag.isMeetingPatientchart
              string2: true
        - actionType: evalObject
          object:
            - ..apiRequest.newChart.docReq.eid@: =.Global.roomInfo.edge.id
        - actionType: evalObject
          object:
            - ..apiRequest.newChart.docReq.eid@: =.Global.rootNotebookID

  #引用用户总表单对象
  generalInfo: ""
  save:
    - =.PatientChartGeneralInfo.apiRequest.newChart.docAPI.store: ""
  # #create patient document temple to save
  apiRequest:
    newChart:
      docResp: ""
      docReq:
        id: ""
        eid: .Global.rootNotebookID
        tage: 0
        type: .DocType.PatientChart
        name:
          data: ""
          title: "Patient Chart"
          user: .Global.Profile.name.data.basicInfo.fullName
          type: "application/json"
      docAPI:
        store:
          api: cd
          dataIn: PatientChartGeneralInfo.apiRequest.newChart.docReq
          dataOut: PatientChartGeneralInfo.apiRequest.newChart.docResp
  calendarDate:
    year: ""
    month: ""
    day: ""
    monthName: ""
    todayDate: ""
    dayLable: []
  # patient填写信息
  patientInfo: ""
  formData:
    routeList: []
  # data template for update
  formDataTemp:
    genderTemp:
      - key: gender
        value: "Male"
      - key: gender
        value: "Female"
      - key: gender
        value: "Other"

  # #create patient document temple to save
  components:
    - .BasePublicHeader:
      children:
        - type: view
          style:
            ..style.backLeft:
          children:
            - type: image
              path: arrowLeftgrey.svg
              style:
                ..style.backLeftImg:
              onClick:
                - ..event.backClick
        - .BasePublicHeaderTitle:
        - .BasePublicHeaderRightText:
          text: Skip
          onClick:
            - goto: PatientChartPastMedicalHistory
    - type: view
      style:
        ..style.bodyBox:
      children:
        - type: view
          style:
            ..style.viewBox:
          children:
            - type: view
              style:
                ..style.titleBox:
              children:
                - type: label
                  text: General Information
                  dataKey:
                  style:
                    ..style.titlelabel:
                - type: label
                  text: "1&nbsp;/&nbsp;11"
                  dataKey:
                  style:
                    ..style.pageNum:
        - type: scrollView
          style:
            ..style.scrollBox:
          children:
            - type: view
              style:
                ..style.blockBox:

              children:
                - type: label
                  text: First Name
                  dataKey:
                  style:
                    ..style.blockBoxTitle:
                - type: textField
                  placeholder: Enter here
                  dataKey: generalInfo.firstName
                  style:
                    ..style.blockBoxInput:
            - type: view
              style:
                ..style.blockBox:
              children:
                - type: label
                  text: Middle Name and Initial
                  dataKey:
                  style:
                    ..style.blockBoxTitle:
                - type: textField
                  placeholder: Enter here
                  dataKey: generalInfo.middleName
                  style:
                    ..style.blockBoxInput:
            - type: view
              style:
                ..style.blockBox:
              children:
                - type: label
                  text: Last Name
                  dataKey:
                  style:
                    ..style.blockBoxTitle:
                - type: textField
                  placeholder: Enter here
                  dataKey: generalInfo.lastName
                  style:
                    ..style.blockBoxInput:
            - type: view
              style:
                ..style.blockBox:
              children:
                - type: label
                  text: Preferred Name
                  dataKey:
                  style:
                    ..style.blockBoxTitle:
                - type: textField
                  placeholder: Enter here
                  dataKey: generalInfo.preferredName
                  style:
                    ..style.blockBoxInput:
            - type: view
              style:
                ..style.blockBox:
              children:
                - type: label
                  text: Gender
                  dataKey:
                  style:
                    ..style.blockBoxTitle:
                    width: "0.4106"
                - type: view
                  style:
                    ..style.listBox:
                    width: "0.5094"
                  children:
                    - type: list
                      viewTag: genderTag
                      contentType: listObject
                      listObject: ..formDataTemp.genderTemp
                      iteratorVar: itemObject
                      style:
                        ..style.list:
                        width: "0.5094"
                        axis: horizontal
                      children:
                        - type: listItem
                          itemObject:
                          style:
                            ..style.genderListItem:
                          children:
                            - type: image
                              path:
                                ..event.raidoPath:
                                width: "0.0442"
                              style:
                                ..style.itemImg:
                              onClick:
                                - ..event.radioClick

                            - type: label
                              text:
                              dataKey: itemObject.value
                              style:
                                ..style.itemValue:

            - type: view
              style:
                ..style.blockBox:
              children:
                - type: label
                  text: Date of Birth
                  dataKey:
                  style:
                    ..style.blockBoxTitle:
                - type: view
                  viewTag: birthTag
                  style:
                    ..style.dateBox:
                  children:
                    - type: textField
                      placeholder: Select
                      dataKey: generalInfo.dateOfBirth
                      isEditable: "false"
                      style:
                        ..style.dateInput:
                    - type: image
                      path: dateImg.svg
                      style:
                        ..style.dateImg:
                  onClick:
                    - actionType: popUp
                      popUpView: birthDay

            - type: view
              style:
                ..style.blockBox:
              children:
                - type: label
                  text: Occupation
                  dataKey:
                  style:
                    ..style.blockBoxTitle:
                - type: textField
                  placeholder: Enter here
                  dataKey: generalInfo.occupation
                  style:
                    ..style.blockBoxInput:

            - type: view
              style:
                ..style.blockBox:
              children:
                - type: label
                  text: Relationship Status
                  dataKey:
                  style:
                    ..style.blockBoxTitle:
                - type: textField
                  placeholder: Enter here
                  dataKey: generalInfo.relationshipStatus
                  style:
                    ..style.blockBoxInput:

            - type: view
              style:
                ..style.blockBox:
              children:
                - type: label
                  text: Primary Care Physician
                  dataKey:
                  style:
                    ..style.blockBoxTitle:
                - type: textField
                  placeholder: Enter here
                  dataKey: generalInfo.primaryCarePhysician
                  style:
                    ..style.blockBoxInput:

            - type: view
              style:
                ..style.blockBox:
              children:
                - type: label
                  text: Primary Care Clinic
                  dataKey:
                  style:
                    ..style.blockBoxTitle:
                - type: textField
                  placeholder: Enter here
                  dataKey: generalInfo.primaryCareClinic
                  style:
                    ..style.blockBoxInput:

    #底部
    - type: view
      style:
        ..style.btnBox:
      children:
        - type: button
          text: Next
          dataKey:
          style:
            ..style.btn:
          onClick:
            - ..event.btnClick
    # 弹窗区域
    - type: popUp
      viewTag: birthDay
      style:
        left: "0"
        top: "0"
        width: "1"
        height: "1"
        backgroundColor: "0x00000066"
        zIndex: "1000"
      children:
        - .BaseComponents.calendar:
          children:
            - .BaseComponents.calendarHeader:
              children:
                - type: view
                  style:
                    marginTop: "0.024"
                    left: "0"
                    height: "0.035"
                    width: "0.86"
                  children:
                    - .BaseComponents.newMonthView:
                    - .BaseComponents.newYearView:
                - .BaseComponents.newdevider:
                - .BaseComponents.weekView:
            - .BaseComponents.dayView:
            - .BaseComponents.addButton:
              text: "Select"
              onClick:
                - actionType: evalObject
                  object:
                    - ..generalInfo.dateOfBirth@: =.BaseComponents.calendarDate.todayDate
                - actionType: builtIn
                  funcName: redraw
                  viewTag: birthTag
                - actionType: popUpDismiss
                  popUpView: birthDay

    - .Normal:
      message: "Do you want to save your changes?"
      viewTag: judgmentOperation
      leftButton:
        - actionType: evalObject
          object:
            - ..apiRequest.newChart.docReq@: =.Global.formData.PatientchartInfo
            - =.PatientChartGeneralInfo.apiRequest.newChart.docAPI.store: ""
        - actionType: popUpDismiss
          popUpView: judgmentOperation
        - goto: PatientChart
      rightButton:
        - actionType: evalObject
          object:
            - .Global.formData.PatientchartInfo.name.data.generalInfo@: =..generalInfo
            - ..apiRequest.newChart.docReq@: =.Global.formData.PatientchartInfo
            - =.PatientChartGeneralInfo.apiRequest.newChart.docAPI.store: ""
        - actionType: popUpDismiss
          popUpView: judgmentOperation
        - goto: PatientChart
  event:
    skipClick:
      - goto: PatientChartPastMedicalHistory
    raidoPath:
      emit:
        dataKey:
          var: itemObject
        actions:
          - if:
              - =.builtIn.string.equal:
                  dataIn:
                    string1: =..generalInfo.gender
                    string2: $var.value
              - radioOn.svg
              - radioOff.svg
    radioClick:
      - emit:
          dataKey:
            var: itemObject
          actions:
            - if:
                - =.builtIn.string.equal:
                    dataIn:
                      string1: =..generalInfo.gender
                      string2: $var.value
                - continue
                - =.builtIn.object.set:
                    dataIn:
                      object: =..generalInfo
                      key: $var.key
                      value: $var.value
      - actionType: builtIn
        funcName: redraw
        viewTag: genderTag
    backClick:
      - actionType: popUp
        popUpView: judgmentOperation
        wait: true
    btnClick:
      - actionType: evalObject
        object:
          - .Global.formData.PatientchartInfo.name.data.generalInfo@: =..generalInfo
      - goto: PatientChartPastMedicalHistory
  style: #Input style fragment here
    formatting:
      margin: "0"
      padding: "0"
      height: "1"
      width: "1"
      overflow: hidden
      boxSizing: border-box

      color: "0x333333"
      fontSize: .Nfont.h16
    bodyBox:
      width: "auto"
      height: "0.84729"
    skipRight:
      marginTop: "0.016"
      marginLeft: "0.04"
      color: "white"

      fontSize: .Nfont.h14
    backLeft:
      marginLeft: "0.04"
      display: "inline-block"
      verticalAlign: middle
      height: "0.055"
      boxSizing: border-box
    backLeftImg:
      marginTop: "0.012"
      height: "0.0295"
    viewBox:
      marginLeft: "0.04"
      height: "auto"
      width: "0.92"
      overflow: hidden

    titleBox:
      marginTop: "0.0270"
      paddingBottom: "1.23vh"
      width: "0.92"
      height: "auto"
      border:
        style: 2
      borderWidth: "1"
      borderColor: "#dedede"
    titlelabel:
      display: "inline-block"
      fontSize: .Nfont.h16
      color: "0x333333"
      width: "0.753125"
      height: "auto"
      fontWeight: "700"
      verticalAlign: top
      lineHeight: "2.95vh"
    pageNum:
      marginLeft: "0.064"
      display: "inline-block"
      height: "0.0221"
      width: "0.1013"
      backgroundColor: "0x2988e6"
      color: "0xffffff"
      fontSize: .Nfont.h14
      fontWeight: "700"
      borderRadius: "3"
      verticalAlign: top
      textAlign:
        x: center
    scrollBox:
      marginLeft: "0.04"
      width: "0.92"
      height: "0.7832"
      boxSizing: border-box
      overflow: scroll
    secondLabel:
      width: "0.92"
      fontSize: .Nfont.h14
      fontWeight: "700"
      color: "0x333333"
      marginTop: "0.0246"
    blockBox:
      marginTop: "0.01477"
      height: "auto"
      width: "0.92"
    blockBoxTitle:
      display: "inline-block"
      width: "0.42"
      height: "auto"
      verticalAlign: middle
      color: "#333333"
      fontSize: .Nfont.h14
    blockBoxInput:
      display: "inline-block"
      width: "0.4986"
      height: "0.0369"
      border:
        style: 3
      borderColor: "#dededf"
      boxSizing: border-box
      borderWidth: "1.5"
      borderRadius: "3"
      color: "#333333"
      fontSize: .Nfont.h14
      textIndent: "12px"
      verticalAlign: middle
    dateBox:
      display: "inline-block"
      width: "0.4986"
      height: "0.0369"
      border:
        style: 3
      borderColor: "#dededf"
      boxSizing: border-box
      borderWidth: "1.5"
      borderRadius: "3"
    dateInput:
      display: "inline-block"
      border:
        style: 1
      boxSizing: border-box
      color: "#333333"
      fontSize: .Nfont.h14
      height: "0.03078"
      verticalAlign: middle
      textIndent: "12px"
      width: "0.4266"
      backgroundColor: "#ffffff"
    dateImg:
      display: "inline-block"
      verticalAlign: middle
      height: "0.02"
    listBox:
      display: "inline-block"
      width: "auto"
      height: auto
      boxSizing: border-box
      overflow: hidden
    list:
      width: "auto"
      height: auto
      margin: "0"
      boxSizing: border-box
      overflow: hidden
    genderListItem:
      marginLeft: "0.01"
      display: "inline-block"
      width: "auto"
      height: "auto"
      boxSizing: border-box
    itemImg:
      display: "inline-block"
      width: "0.0442"
      verticalAlign: middle
    itemValue:
      marginLeft: "0.01"
      display: "inline-block"
      fontSize: .Nfont.h14
      color: "#333333"
      width: "auto"
      height: "auto"
      verticalAlign: middle
    blockInput:
      height: "0.0369"
      width: "0.92"
      boxSizing: border-box
      border:
        style: 3
      borderRadius: "3"
      borderWidth: "1.5"
      borderColor: "0xdedede"

      fontSize: .Nfont.h14
      color: "0x333333"
      textIndent: "12px"
    InputBox:
      width: "0.92"
      height: "0.048"
      overflow: hidden
    checkItem:
      margin: "0"
      marginTop: "0.01724"
      width: "0.92"
      height: "auto"
      boxSizing: border-box
    leftBox:
      marginLeft: "0.05"
      display: "inline-block"
      verticalAlign: middle
      height: "auto"
      width: "auto"
      marginTop: "0.0123"
    leftImg:
      verticalAlign: middle
      display: "inline-block"
      height: "0.02955"
    leftlabel:
      marginLeft: "0.02"
      verticalAlign: middle
      display: "inline-block"
      width: "auto"
      height: "auto"
      fontSize: .Nfont.h14
      color: "0x2988e6"
      fontWeight: "600"
    btnBox:
      height: "0.0972"
      width: "1"
      backgroundColor: "0xffffff"
      boxSizing: border-box

      boxShadow: "1px 1px 4px 1px #dededf"
      overflow: hidden
      textAlign:
        x: center
    btn:
      marginTop: "0.0123"
      height: "0.0443"
      width: "0.84"
      border:
        style: 1
      borderRadius: "5"
      backgroundColor: "#2988e6"
      color: "#ffffff"
      fontSize: .Nfont.h14
      boxSizing: border-box
      fontWeight: "600"
      textAlign:
        x: center
