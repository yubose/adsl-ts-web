MenuBar:
  init:
    - .SignInCheck
  type: view
  style:
    top: "0.11"
    width: "0.16"
    height: "0.89"
    left: "0"
    backgroundColor: "0x005795"
  children:
    - type: scrollView
      style:
        top: "0"
        left: "0"
        width: "0.16"
        height: "0.745"
        overflow: scroll
      children:
        - type: list  
          contentType: listObject
          listObject: .Global.menuBar.listData
          iteratorVar: itemObject
          viewTag: menuBarTag
          style: 
            width: "0.16"
            height: "0.741"
            left: "0"
            top: "0"
            margin: "0"
          children:
            - type: listItem
              itemObject: ""
              style: 
                left: "0"
                marginTop: "0"
                width: "0.16"
                border: 
                  style: "1"   
              children:
                - type: view
                  style:
                    backgroundColor: itemObject.backgroundColor
                    height: "0.05"
                  children: 
                    - type: image
                      path: 
                        emit:
                          dataKey:
                            var: itemObject
                          actions:
                            - if:
                              - true
                              - $var.logoPath
                              - $var.logoPath
                      style:
                        width: "0.012"
                        top: '0.015'
                        left: '0.015'
                        height: "0.02"
                    - type: label
                      dataKey: itemObject.title
                      onClick:
                        - emit: 
                            dataKey: 
                              var: itemObject
                            actions: 
                              - .Global.jwt.edge.bvid@: =.Global.currentUser.vertex.id
                              - =.Global.jwt.edgeAPI.store: ""                              
                              - =.builtIn.array.setList: 
                                  dataIn:
                                    arr: =.SideMenuBarDM.SourceData
                                    level: $var.level
                                    title: $var.title
                                  dataOut: Global.menuBar.listData
                              - goto: $var.pageName
                      style:
                        width: "0.1"
                        top: "0"
                        height: "0.05"
                        boxSizing: border-box
                        left: "0.04"
                        color: "0xffffff"
                        fontSmoothing: antialiased
                        fontFamily: Poppins
                        fontSize: .Nfont.nf2
                        backgroundColor: itemObject.backgroundColor
                        textAlign:
                          y: center
                    - type: image
                      path:
                        emit:
                          dataKey:
                            var: itemObject
                          actions:
                            - if:
                              - =.builtIn.string.equal:
                                  dataIn:
                                    string1: $var.isExpand
                                    string2: "block"
                              - arrowUp.svg
                              - arrowDown.svg
                      onClick:
                        - emit: 
                            dataKey: 
                              var: itemObject
                            actions: 
                              - if: 
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: $var.isExpand
                                      string2: "block"
                                - =.builtIn.array.setObjectByKey: 
                                    dataIn:
                                      objectArr: =.Global.menuBar.listData
                                      keyOne: title
                                      keyTwo: isExpand
                                      valueOne: $var.title
                                      valueTwo: "none"
                                - =.builtIn.array.setObjectByKey: 
                                    dataIn:
                                      objectArr: =.Global.menuBar.listData
                                      keyOne: title
                                      keyTwo: isExpand
                                      valueOne: $var.title
                                      valueTwo: "block"                                  
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: menuBarTag                              
                      style:
                        width: "0.007"
                        top: "0.02"
                        left: "0.145"
                        display: itemObject.hasChildren

                - type: list
                  contentType: listObject
                  listObject: itemObject.childList
                  iteratorVar: itemObject
                  style:
                    width: '0.16'
                    margin: '0'
                    height: auto
                    display: itemObject.isExpand
                    
                  children:
                    - type: listItem
                      itemObject: 
                      onClick:
                        - emit: 
                            dataKey: 
                              var: itemObject
                            actions: 
                              - =.builtIn.array.setList: 
                                  dataIn:
                                    arr: =.SideMenuBarDM.SourceData
                                    level: $var.level
                                    title: $var.title
                                  dataOut: Global.menuBar.listData
                              - goto: $var.pageName                      
                      style:
                        width: '0.16'
                        height: '0.04'
                        left: '0'
                        marginTop: ''
                        backgroundColor: itemObject.backgroundColor
                      children:
                        - type: label
                          text: 
                          dataKey: itemObject.title
                          style:
                            left: "0.04"
                            width: "0.1"
                            color: "0xffffff"
                            fontSmoothing: antialiased
                            fontFamily: Poppins
                            fontSize: .Nfont.nf2
                            height: "0.04"
                            textAlign: 
                              y: center    

    - type: view
      style: 
        top: "0.76"
        height: "0.13"
        width: "0.16"
        left: "0"
      children:
        - type: view
          style:
            top: "0"
            height: "0.08"
            width: "0.16"
            left: "0"
            border: 
              style: "2"
            borderWidth: "1"
            borderColor: "0x3080b9"
            display: flex
            flexDirection: column
            alignItems: center
          children: 
            - type: label
              text: "Last signed in: "
              style: 
                fontSize: .Nfont.nf3
                fontWeight: "500" 
                color: "#FFFFFFFF" 
                wordSpacing: "1.2px"  
            # - type: label
            #   # text: "October 20,2020 at 12:43 PM"
            #   text=func: =.builtIn.string.formatUnixtime_en
            #   dataKey: Global.currentUser.vertex.atime
            #   style: 
            #     fontSize: .Nfont.nf3
            #     fontWeight: "500"
            #     color: "#FFFFFFFF"
            #     wordSpacing: "1.2px"  
        - type: view
          onClick:
            - goto: LogOut
            # - actionType: popUp
            #   popUpView: logOutView
          style: 
            left: "0"
            width: "0.16" 
            top: "0.065" 
            height: "0.045"     
          children:
            - type: label
              text: "Log out"
              style: 
                fontSize: .Nfont.nf4
                fontWeight: "600"
                top: "0.02"
                left: "0.046"
                width: "0.11"
                height: "0.025"  
                color: "#FFFFFFFF"  
            - type: image
              path: "signOut.svg"
              style: 
                width: "0.02"
                top: "0.02"
                left: "0.024"
                height: "0.025"   



    # - type: view
    #   viewTag: paymentMenu
    #   style:
    #     width: 16vw
    #     # height: 2.5vw
    #     marginTop: 1vw
    #     padding: "1px"
    #   children:
    #     - type: button
    #       style:
    #         height: 2.5vw
    #         width: 16vw
    #         backgroundColor: "#ffffff00"
    #       children:
    #         - type: image
    #           path: Payment.svg
    #           style: 
    #             height: 1vw
    #             width: 1vw
    #             display: inline-block
    #             float: left
    #             marginLeft: "3vw"
    #         - type: label
    #           text: "Payment"
    #           style:
    #             float: left
    #             marginLeft: 1vw 
    #             fontSize: .Nfont.nf2
    #             display: inline-block
    #             textAlign:  
    #               x: left
    #               y: top
    #             color: "0xffffff" 
    #         - type: image
    #           path: whiteArrowDown.svg
    #           style:
    #             float: right
    #             marginRight: "1vw"
    #             width: "1vw"
    #             height: 1vw
    #       onClick:
    #         - actionType: evalObject
    #           object:
    #             - if:
    #                 - =.builtIn.string.equal:
    #                     dataIn:
    #                       string1: =.Global.formData.paymentMenuState
    #                       string2: "block"
    #                 - .Global.formData.paymentMenuState@: "none"
    #                 - .Global.formData.paymentMenuState@: "block"
    #         - actionType: builtIn
    #           funcName: redraw
    #           viewTag: paymentMenu
    #     - type: view
    #       style:
    #         margin: auto
    #         # height: "0.1"
    #         width: 16vw
    #         display: =.Global.formData.paymentMenuState
    #         backgroundColor: "#044f86"
    #         padding: "1px"
    #       children:
    #         - type: label
    #           text: Transactions
    #           style: 
    #             color: "#ffffff"
    #             fontSize: .Nfont.nf2
    #             marginLeft: "5vw"
    #             height: 2.5vw
    #             marginTop: 1vw
    #           onClick:
    #             - goto: Transactions
    #         - type: label
    #           text: "Payment Settings"
    #           style: 
    #             color: "#ffffff"
    #             fontSize: .Nfont.nf2
    #             marginLeft: "5vw"
    #             height: 2.5vw
    #             marginTop: 1vw
    #           onClick:
    #             - goto: PaymentSettings
    #         - type: label
    #           text: "Statements"
    #           style: 
    #             color: "#ffffff"
    #             fontSize: .Nfont.nf2
    #             marginLeft: "5vw"
    #             height: 2.5vw
    #             marginTop: 1vw
    #           onClick:
    #         - type: label
    #           text: "Transfer"
    #           style: 
    #             color: "#ffffff"
    #             fontSize: .Nfont.nf2
    #             marginLeft: "5vw"
    #             height: 2.5vw
    #             marginTop: 1vw
    #           onClick:
    #             - goto: Transfer

    - type: view
      style: 
        top: "0.76"
        height: "0.13"
        width: "0.16"
        left: "0"
      children:
        - type: view
          style:
            top: "0"
            height: "0.065"
            width: "0.16"
            left: "0"
            border: 
              style: "2"
            borderWidth: "1"
            borderColor: "0x3080b9"
            display: flex
            flexDirection: column
            alignItems: center
          children: 
            - type: label
              text: "Last signed in: "
              style: 
                fontSize: .Nfont.nf3
                fontWeight: "500" 
                color: "#FFFFFFFF" 
                wordSpacing: "1.2px"  
            - type: label
              # text: "October 20,2020 at 12:43 PM"
              text=func: =.builtIn.string.formatUnixtime_en
              dataKey: Global.currentUser.vertex.atime
              style: 
                fontSize: .Nfont.nf3
                fontWeight: "500"
                color: "#FFFFFFFF"
                wordSpacing: "1.2px"  
        - type: view
          onClick:
            - goto: LogOut
            # - actionType: popUp
            #   popUpView: logOutView
          style: 
            left: "0"
            width: "0.16" 
            top: "0.065" 
            height: "0.045"     
          children:
            - type: label
              text: "Log out"
              style: 
                fontSize: .Nfont.nf4
                fontWeight: "600"
                top: "0.02"
                left: "0.046"
                width: "0.11"
                height: "0.025"  
                color: "#FFFFFFFF"  
            - type: image
              path: "signOut.svg"
              style: 
                width: "0.02"
                top: "0.02"
                left: "0.024"
                height: "0.025"      
