DisplayProfile:
  pageNumber: "330"
  title: "My Profile"
  init:
    - .SignInCheck
    - ..profile.docAPI.get
    - ..profilePic.docAPI.get
    - if:
        - =..docResponse.doc.0
        - actionType: evalObject
          object:
            .DisplayProfile.profileObject@: =..docResponse.doc.0
        - continue
    - if:
        - =..docResponse.doc.0
        - actionType: evalObject
          object:
            .Global.DocProfile.document@: =..docProfile.doc.0
        - continue
    - if:
        - =..docResponse.doc.0
        - actionType: evalObject
          object:
            .DisplayProfile.docDetail.document@: =.Global.DocProfile.document
        - continue
    - if:
        - =..docProfile.doc.0
        - actionType: evalObject
          object:
            =.builtIn.utils.prepareDoc:
              dataIn:
                doc: =..docDetail.document
              dataOut: DisplayProfile.docDetail.document
        - continue
    - if:
        - =..docProfile.doc.0.name.type
        - ..tar@: ..docDetail.document.name.data
        - ..tar@: empty.png
    - if:
        - =..docProfile.doc.0
        - .Global.currentUser.vertex.name.avatar@: ..docDetail.document.name.data
        - continue
    # concat fistname and lastname to display
    - if:
        - =..profileObject.name.data.firstName
        - actionType: evalObject
          object:
            =.builtIn.string.concat:
              dataIn:
                - =..profileObject.name.data.firstName
                - " "
                - =..profileObject.name.data.lastName
              dataOut: DisplayProfile.concatInfo.name
        - continue
    # concat address information to display
    - if:
        - =..profileObject.name.data
        - actionType: evalObject
          object:
            =.builtIn.string.concat:
              dataIn:
                - =..profileObject.name.data.line1
                - " "
                - =..profileObject.name.data.line2  
              dataOut: DisplayProfile.concatInfo.address1
        - continue
    - if:
        - =..profileObject.name.data
        - actionType: evalObject
          object:
            =.builtIn.string.concat:
              dataIn:
                - =..profileObject.name.data.city
                - " "
                - =..profileObject.name.data.state
                - " "
                - =..profileObject.name.data.zip
              dataOut: DisplayProfile.concatInfo.address2
        - continue
    - if:
        - =..profileObject.name.data
        - actionType: evalObject
          object:
            =.builtIn.string.concat:
              dataIn:
                - =..profileObject.name.data.country
              dataOut: DisplayProfile.concatInfo.address3
        - continue      
 
               
  #dataObject: .EditProfile.profile.document'

  concatInfo:
    name: ""
    address1: ""
    address2: ""
    address3: ""
  docDetail:
    document:
      name:
        data: drImg.png
  tar: ""
  profileObject:
    .Document: ""
    eid: .Global.rootNotebookID
    type: .DocType.Profile
    name:
      title: ""
      type: "application/json"
      data:
        phone: .Global.currentUser.vertex.uid
        userName: .Global.currentUser.vertex.name.userName
        email: ""
        firstName: .Global.currentUser.vertex.name.firstName
        lastName: .Global.currentUser.vertex.name.lastName
        line1: ""
        line2: ""
        city: ""
        state: ""
        zip: ""
        country: ""
  profile:
    docAPI:
      get:
        .DocAPI.get: ""
        api: rd
        ids:
          - .Global.rootNotebookID
        xfname: eid
        type: .DocType.Profile #  type: "257"
        obfname: "mtime"
        maxcount: "1"
        dataKey: docResponse
        _nonce: =.Global._nonce
  docResponse:
    doc:
      - type: .DocType.Profile # - type: "257" # private profile
        eid: .Global.rootNotebookID
        name: ""
    error: ""
    jwt: ""
  profilePic:
    docAPI:
      get:
        .DocAPI.get: ""
        api: rd
        ids:
          - .Global.rootNotebookID
        xfname: eid
        type: .DocType.UploadProfile
        obfname: "mtime"
        maxcount: "1"
        dataKey: docProfile
        _nonce: =.Global._nonce
  docProfile:
    doc:
      - type: .DocType.UploadProfile
        eid: .Global.rootNotebookID
        name: ""
    error: ""
    jwt: ""
  components:
    - type: view
      style:
        top: "0"
        width: "1"
        height: "1"
      children:
        - .BaseHeader3:
        - .HeaderLeftButton:
        - .HeaderRightButton:
          text: Edit
          onClick:
            - goto: EditProfile
        - type: image
          path: ..tar
          style:
            top: "0.15"
            width: "0.2"
            left: "0.1"
        # - type: label
        #   text: CG
        #   style:
        #     top: "0.165"
        #     left: "0.1"
        #     width: "0.2"
        #     height: "0.08"
        #     fontSize: "36"
        #     fontWeight: 500
        #     Index: 10
        #     color: "0xffffff"
        #     textAlign:
        #       x: center
        - type: view
          style:
            top: "0.15"
            left: "0.35"
            width: "0.65"
            height: "0.15"
          children:
            - type: label
              # placeholder: "firstName lastName"
              dataKey: DisplayProfile.concatInfo.name
              style:
                top: "0.01"
                fontSize: "20"
                fontWeight: "500"
                width: "0.4"
                height: "0.04"
                textAlign:
                  x: left
            - type: label
              text: "Username:"
              style:
                top: "0.08"
                fontSize: "20"
                fontWeight: "400"
                width: "0.25"
                height: '0.04'
            - type: label
              dataKey: Global.currentUser.vertex.name.userName
              style:
                left: "0.22"
                top: "0.08"
                fontSize: "20"
                fontWeight: "400"
                width: "0.17"
                height: '0.04'
                textAlign:
                  x: right
            # - type: image
            #   onClick:
            #     - goto: MyQRCode
            #   path: qr.png
            #   style: 
            #     left: "0.45"
            #     top: "0.033"
            #     height: "0.06"
            # - type: image
            #   path: blueleft.png
            #   style:
            #     left: "0.55"
            #     top: "0.041"
            #     height: "0.043"
            #   onClick: 
            #     - goto: MyProfile
        - type: view
          # text: Contact Information
          style:
            top: "0.4"
            width: "0.8"
            left: "0.1"
            height: "0.4"
            border:
              style: "3"
            borderWidth: "1"
            borderColor: "0x388FCD"
            borderRadius: "5"
          children:
            - type: view
              style:
                width: "0.8"
                height: "0.05"
                backgroundColor: "0x388FCD"
              children:
                - type: label
                  text: "Contact Information"
                  style:
                    top: "0.008"
                    width: "0.8"
                    height: "0.03"
                    fontSize: "20"
                    color: "0xffffff"
                    fontWeight: "400"
                    textAlign:
                      x: center
            - type: label
              text: Phone number
              style:
                top: "0.07"
                fontSize: "16"
                fontWeight: "400"
                width: "0.35"
                height: "0.03"
                left: "0.05"
            - type: label
              # text: "123-456-7890"
              dataKey: Global.currentUser.vertex.uid
              style:
                top: "0.07"
                fontSize: "16"
                fontWeight: "400"
                width: "0.3"
                height: "0.03"
                left: "0.4"
                textAlign:
                  x: right
            - type: label
              text: Email
              style:
                top: "0.11"
                fontSize: "16"
                fontWeight: "400"
                width: "0.35"
                height: "0.03"
                left: "0.05"
            - type: label
              # text: "1234567890@gmail.com"
              dataKey: profileObject.name.data.email
              style:
                top: "0.15"
                fontSize: "16"
                fontWeight: "400"
                width: "0.6"
                height: "0.03"
                left: "0.1"
                border:
                  style: "2"
                borderWidth: "1"
                textAlign:
                  x: right
            - type: label
              text: Address
              style:
                top: "0.2"
                fontSize: "16"
                fontWeight: "400"
                width: "0.35"
                height: "0.03"
                left: "0.05"
            - type: label
              # text: "4114 Sepulveda Blvd"
              dataKey: DisplayProfile.concatInfo.address1
              style:
                top: "0.25"
                fontSize: "16"
                fontWeight: "400"
                width: "0.6"
                height: "0.03"
                left: "0.1"
                textAlign:
                  x: right

            - type: label
              dataKey: DisplayProfile.concatInfo.address2
              style:
                top: "0.28"
                fontSize: "16"
                fontWeight: "400"
                width: "0.6"
                height: "0.03"
                left: "0.1"
                textAlign:
                  x: right

            - type: label
              dataKey: DisplayProfile.concatInfo.address3
              style:
                top: "0.31"
                fontSize: "16"
                fontWeight: "400"
                width: "0.6"
                height: "0.03"
                left: "0.1"
                textAlign:
                  x: right
                border:
                  style: "2"
                  borderWidth: "1"
        - type: button
          text: Share my QR code
          onClick:
            - goto: MyQRCode
          style:
            top: "0.85"
            width: "0.5"
            left: "0.25"
            height: "0.05"
            backgroundColor: "0x398FCD"
            color: "0xffffff"
            textAlign:
              x: center




