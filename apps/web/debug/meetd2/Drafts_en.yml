Drafts:
  pageNumber: "120"
  title: "Drafts"
  init: 
    # - .SignInCheck
    - actionType: updateObject 
      dataKey: Global.inboxContact
      dataObject: .EmptyObj
    - actionType: updateObject 
      dataKey: Global.inboxMessage
      dataObject: .EmptyObj
    - actionType: evalObject
      object: 
        .Global._nonce@: 
          =.builtIn.math.random: ""
    - ..emailList.get
    # - actionType: evalObject
    #   object:
    #     =.builtIn.array.getListLength:
    #         dataIn:
    #           object: ..emailList.email.edge
    #         dataOut: Global.emailNumber   
    - if:
        - =..emailList.email.edge.0
        - continue
        - =.builtIn.checkField:
            dataIn:
              contentType: messageHidden
              wait: 100
    - if:
      - =.builtIn.string.equal:
          dataIn:
            string1: =.Global.emailNumber
            string2: "0"
      - .Global.inboxHidden@: "true"
      - .Global.inboxHidden@: "false"    
    - if:
      - =.builtIn.string.equal:
          dataIn:
            string1: =.Global.requestListNum
            string2: "0"
      - ..requestListHidden@: true
      - ..requestListHidden@: false
  requestListHidden: "true"
  lastTop: "0.0"
  emailList: 
    email: 
      edge: ""
    get: 
      .EdgeAPT.get: ""
      api: re
      dataKey: emailList.email
      id: .Global.currentUser.vertex.id
      xfname: bvid
      type: .EdgeType.Email
      maxcount: 200
      obfname: ctime
      sCondition: "subtype=10"
      _nonce: =.Global._nonce
  emailInfo:
    edge: ""
    edgeAPI:
      store:
        api: ce
        dataKey: emailInfo.edge
  update:
    ..emailInfo.edgeAPI.store
  #create new email
  saveEmail:
    - .Drafts.NewEmail.edgeAPI.store: ""
  NewEmail:
    response: ""
    edge:
      .Edge: ""
      type: .EdgeType.Email 
      subtype: 10
      name: 
        title: ""
        # message: ""
        folderID: ""
        isStar: false
        isDraft: false
        isRead: false
        receiveName: ""
        senderName: ""
      bvid: .Global.currentUser.vertex.id
      evid: ""
      refid: ""
    edgeAPI:
      store:
        api: ce
        dataKey: NewEmail.edge
        dataOut: NewEmail.response
  components:
    - .BaseHeader:
    - .HeaderRightImg:
      path: sideNav3.png
      onClick:
        - goto: InboxMenu
    - type: view
      style:
        left: "0"
        width: "1"
        top: "0.1"
        height: "0.08"
        border: 
          style: "2"
        borderColor: "0x00000033"
        backgroundColor: "0x2988e6"
        borderWidth: "1"
        zIndex: "10"
      children:
        - type: textField
          placeholder: Serach
          dataKey: ..formData.serachInfo
          style:
            top: "0.02"
            width: "0.7"
            left: "0.05"
            height: "0.035"
            backgroundColor: "0xffffff"
            borderRadius: "5"
            paddingLeft: "20px"
            borderWidth: "0"
        - type: label
          text: Edit
          onClick:
            - emit:
                actions:
                  - =.builtIn.utils.alert:
                      dataIn:
                        value: "1"
            # - goto: EditInbox
          style:
            top: "0.027"
            left: "0.84"
            height: "0.035"
            width: "0.15"
            fontSize: "17"
            color: "0xffffff"
            fontWeight: 400
            textAlign: 
              x: center
    - type: scrollView
      style: 
        left: "0"
        width: "1"
        top: "0.18"
        height: "0.63"
      children: 
        - type: label
          contentType: messageHidden
          text: "No email to receive"
          style:
            left: "0.31"
            top: "0.25"
            width: "0.68"
            height: "0.04"
            color: "0x000058"
            fontSize: "16"
            isHidden: "true"
            zIndex: 1000
        - type: list
          contentType: listObject
          listObject: ..emailList.email.edge
          iteratorVar: itemObject
          viewTag: emailList
          style: 
            left: "0"
            top: "0"
            width: "1"
            height: "0.63"
            backgroundColor: "0xffffff"
          children:   
            - type: listItem
              onClick:
                - actionType: updateObject
                  dataKey: Global.email
                  dataObject: itemObject
                - actionType: evalObject
                  object:
                    - ..emailInfo.edge@: =.Global.email
                    # - ..emailInfo.edge.name.isRead@: true
                - actionType: updateObject
                  object: ..update
                - actionType: evalObject
                  object:
                    .Global._nonce@:
                      =.builtIn.math.random: ""  
                - goto: NewMessage1
              itemObject: ""
              style: 
                left: "0"
                width: "1"
                height: "0.09"
                backgroundColor: "0xffffffff"
                borderWidth: "1"
                border:
                  style: "2"
                  color: "0xdcdcdc" 
                # backgroundColor: "0x2988e6"
              children: 
                # - type: image
                #   path: 
                #     emit:
                #       dataKey:
                #         var: itemObject
                #       actions:
                #         - if:
                #           - =.builtIn.string.equal:
                #               dataIn:
                #                 string1: 1
                #                 string2: $var.atimes
                #           - dot.png
                #           - white.png
                #   style:
                #     left: "0"
                #     top: "0.024"
                #     height: "0.04"
                - type: label
                  text=func: .builtIn.string.getFirstChar
                  dataKey: itemObject.name.senderName
                  style:  
                    left: "0.075"
                    top: "0.015"
                    width: "0.13"
                    height: "0.06"
                    fontSize: "18"
                    color: "#2988e6"
                    textIndent: "18px"
                    textAlign: 
                      y: center
                    backgroundColor: "#b2d1ff"
                - type: label
                  dataKey: itemObject.name.senderName
                  style:  
                    left: "0.25"
                    top: "0.015"
                    width: "0.45"
                    height: "0.022"
                    # fontWeight: "700"
                    fontSize: "15"
                    color: "0x000000ad"
                    textAlign: 
                      x: left
                - type: label
                  text: ""
                  dataKey: itemObject.name.title
                  style:  
                    left: "0.25"
                    top: "0.05"
                    width: "0.45"
                    # fontWeight: 500
                    height: "0.022"
                    fontSize: "13"
                    color: "0x000000ad"
                    textAlign: 
                      x: left
                # - type: label
                #   text: "Hey!Had a question about"
                #   dataKey: itemObject.name.message
                #   style:  
                #     left: "0.25"
                #     top: "0.056"
                #     width: "0.6"
                #     height: "0.022"
                #     fontWeight: "300"
                #     fontSize: "12"
                #     textAlign: 
                #       x: left
                #     fontFamily: PMingLiU
                
                - type: label
                  text: 1:30 PM
                  text=func: .builtIn.string.formatUnixtime_en
                  dataKey: itemObject.ctime
                  style: 
                    left: "0.64"
                    top: "0.025"
                    width: "0.25"
                    height: "0.04"
                    fontSize: "13"
                    textAlign: 
                      x: left
                    fontFamily: PMingLiU
                - type: image
                  path: pin.png
                  style:
                    left: "0.56"
                    top: "0.037"
                    height: "0.02"

    - type: button
      onClick: 
        - actionType: saveObject
          object: ..saveEmail
        - actionType: evalObject
          object:
            .Global.email@: =..NewEmail.response.edge
        - goto: NewMessage
      text: Compose
      style: 
        left: "0.65"
        top: "0.83"
        width: "0.25"
        height: "0.05"
        fontSize: "16"
        fontStyle: bold
        color: "0xffffff"
        backgroundColor: "0x2fb355"
        border: 
          style: "3"
        borderColor: "0x2fb355"
        borderRadius: "15"
        textAlign: 
          x: center
    - .DashboardFooter0:
      style: 
        top: "0.9"
      children:
        - .DashboardFooterView:
          onClick: 
            - goto: "Dashboard"
          children: 
            - .DashboardBox:
              children:
                - .DashboardFooterImg:
                  path: dashboard.png 
            - .DashboardFooterTxt:  
        - .DashboardFooterView:
          style: 
            left: "0.25"
          onClick: 
            - goto: "InboxDashboard"
          children: 
            - .DashboardBox:
              children:
                - .DashboardFooterImg:
                  path: inboxYellow.png
            - .DashboardFooterTxt: 
              text: "Inbox"
            - type: label
              dataKey: Global.emailNumber
              style: 
                left: "0.145"
                top: "0.01"
                width: "0.05"
                height: "0.024"
                zIndex: "2"
                fontSize: "12"
                backgroundColor: "#ff3a41"
                border:
                  style: "5"
                borderRadius: "50"
                color: "0xffffff"
                isHidden: .Global.inboxHidden
                textAlign: 
                  x: center
        - .DashboardFooterView:
          style: 
            left: "0.5"
          onClick: 
            - goto: AppointmentSchedule
          children: 
            - .DashboardBox:
              children:
                - .DashboardFooterImg:
                  path: schedule0.png
                - type: label
                  dataKey: Global.requestListNum
                  style: 
                    left: "0.145"
                    top: "0.01"
                    width: "0.05"
                    height: "0.024"
                    zIndex: "2"
                    fontSize: "12"
                    backgroundColor: "#ff3a41"
                    border:
                      style: "5"
                    borderRadius: "50"
                    color: "0xffffff"
                    isHidden: ..requestListHidden
                    textAlign: 
                      x: center    

            - .DashboardFooterTxt: 
              text: "Schedule"
        - .DashboardFooterView:
          style: 
            left: "0.75"
          onClick: 
            - goto: MenuBars
          children: 
            - .DashboardBox:
              children:
                - .DashboardFooterImg:
                  path: me.png
            - .DashboardFooterTxt: 
              text: "Me"