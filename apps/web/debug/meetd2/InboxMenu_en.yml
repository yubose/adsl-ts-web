InboxMenu:
  pageNumber: "100" # xd page 9
  init:
    - .SignInCheck
    - actionType: evalObject
      object:
        .Global._nonce@:
          =.builtIn.math.random: ""
    - ..listData.get
  folderColor:
    - color: "0x0024EB"
    - color: "0xEF53EF"
    - color: "0xFF9300"
  folder:
    edge:
      type: .EdgeType.Folder
      bvid: .Global.currentUser.vertex.id
      name:
        folderName: ""
        color: ""
    edgeAPI:
      store:
        api: ce
        dataKey: folder.edge
  listData:
    folderList:
      edge: ""
    get:
      .EdgeAPI.get: ""
      api: re
      type: .EdgeType.Folder
      id: .Global.currentUser.vertex.id
      xfname: bvid
      maxcount: "200"
      dataKey: listData.folderList
      obfname: "mtime"
      _nonce: .Global._nonce
  saveFolder:
    - ..folder.edgeAPI.store
  # update: 
  #   - =.InboxMenu.listData.get: ""
  components:
    - type: view
      style:
        top: "0"
        left: "0"
        width: "1"
        height: "1"  
        position: fixed  
      children:
        - .IndexMenuBar:
        - type: view
          style:
            top: "0.101"
            height: "0.92"    
            width: "1"
          children:
            - .MenubarInbox:
              onClick:
                - goto: InboxDashboard
              style:
                top: "0"
              children:
                - .MenubarInboxImg:
                  path: inbox2.png
                - .MenubarInboxTitle:
                  text: Inbox
            - .MenubarInbox:
              onClick:
                - goto: Starred
              style:
                top: "0.061"
              children:
                - .MenubarInboxImg:
                  path: star1.png
                - .MenubarInboxTitle:
                  text: Starred
            - .MenubarInbox:
              onClick:
                - goto: Drafts
              style:
                top: "0.122"
              children:
                - .MenubarInboxImg:
                  path: drafts1.png
                - .MenubarInboxTitle:
                  text: Drafts         
            - .MenubarInbox:
              onClick:
                - goto: Sent
              style:
                top: "0.183"
              children:
                - .MenubarInboxImg:
                  path: sent1.png
                - .MenubarInboxTitle:
                  text: Sent      
            - .MenubarInbox:
              onClick:
                - goto: Trash
              style:
                top: "0.244"
              children:
                - .MenubarInboxImg:
                  path: trash1.png
                - .MenubarInboxTitle:
                  text: Trash
            - .MenubarInbox:
              style:
                top: "0.305"
              onClick:
                - actionType: popUp
                  popUpView: feedbackView
              children:
                - .MenubarInboxImg:
                  path: folder1.png
                - .MenubarInboxTitle:
                  text: Vritual Folder
            - type: image
              onClick:
                - actionType: popUp
                  popUpView: addfolder
              path: add.png
              style:
                index: 10
                height: "0.02"
                top: "0.327"
                left: "0.83"   
            - type: scrollView
              viewTag: listView
              style:
                top: "0.36"
                height: "0.45"
                left: "0"
                width: "1"
                zIndex: "20"
                overflow: scroll
              children:
                - .BaseList:
                  listObject: ..listData.folderList.edge
                  viewTag: listView
                  style:
                    top: "0" 
                    height: "0.45"
                    margin: "0"
                    left: '0'
                    width: '1'
                    # overflow: scroll
                  children:
                    - type: listItem
                      itemObject: ""
                      style: 
                        marginTop: "0"
                        left: "0"
                        width: "1"
                        height: "0.05"
                        border: 
                          style: "2"
                        borderColor: "0xf0f0f0"
                        borderWidth: "1"
                      children:
                        - .Dot:
                          style:
                            top: "0.015"
                            left: "0.22"
                            width: "0.045"
                            height: "0.02"
                            backgroundColor: itemObject.name.color
                        - type: label
                          dataKey: itemObject.name.folderName
                          style:
                            top: "0.005"
                            left: "0.35"  
                            height: "0.04"
                            color: "0x000000ad"
                            fontSize: "18"
                            textAlign:
                              y: center
                          onClick:
                            - actionType: updateObject
                              dataKey: .Global.inboxFolder
                              dataObject: itemObject
                            - goto: InboxFolder
        - type: popUp # view
          viewTag: addfolder
          style:
            top: "0.47"
            width: "1"
            height: "0.5"
            zIndex: "210"
            backgroundColor: "0xffffff"
          children:
            - .FormView:
              children:
                - .FormViewLabel:
                  text: Folder Name
                  style:
                    fontSize: "16"
                - .FormViewTextField:
                  placeholder: Engineer
                  dataKey: folder.edge.name.folderName
                  style:
                    top: "0.05"
            - .FormView:
              style: 
                top: "0.1"
                height: "0.13"
              children:
                - .FormViewLabel:
                  text: color
                - type: view
                  style:
                    top: "0.05"
                    width: "0.8"
                    height: "0.08"
                    left: "0.1"
                    borderRadius: "10"
                    backgroundColor: "0xE4E4E4"
                  children:
                    - .BaseList:
                      listObject: ..folderColor
                      style:
                        width: '0.6'
                        height: "0.04"
                        top: "0.001"
                        # backgroundColor: "0xE4E4E4"
                      children:
                        - .BaseListItem:
                          style:
                            width: "0.1"
                            display: "inline-block"
                            backgroundColor: "0xE4E4E4"
                          children:
                            - .Dot:
                              onClick:
                                - emit:
                                    dataKey:
                                      var: itemObject
                                    actions:
                                      - ..folder.edge.name.color@: $var.color
                              style: 
                                width: "20px"
                                height: "20px"
                                top: "0.01"
                                left: "0.01"
                                backgroundColor: itemObject.color
            - type: button
              text: Create Virtual Folder
              onClick:
                - actionType: saveObject
                  object: ..saveFolder
                - actionType: popUpDismiss
                  popUpView: addfolder
                # - .InboxMenu.listData.get
                - actionType: evalObject
                  object: 
                    - =..listData.get: ""
                - actionType: builtIn
                  funcName: redraw
                  viewTag: listView
                - actionType: builtIn
                  funcName: redraw
                  viewTag: listView1
                - actionType: refresh
                # - goto: InboxMenu
              style:
                top: "0.25"
                left: "0.2"
                width: "0.6"
                height: "0.05"
                color: "0xffffff"
                borderRadius: "5"
                fontSize: "16"
                backgroundColor: "0x2988e6"
                textAlign: 
                  x: center
            - type: button
              text: Cancel
              onClick: 
                - actionType: popUpDismiss
                  popUpView: addfolder
              style:
                top: "0.32"
                left: "0.2"
                width: "0.6"
                height: "0.05"
                color: "0xff0000"
                borderRadius: "5"
                fontSize: "16"
                backgroundColor: "0xffffff"
                textAlign: 
                  x: center
