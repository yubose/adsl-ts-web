MeetingRoomHistory:
  pageNumber: "90" # xd page 6
  title: "Meeting Rooms"
  init:
    - .SignInCheck
    - ..listData.get
    - if:
      - =..listData.historyroom.edge.0
      - continue
      - =.builtIn.checkField:
          dataIn:
            contentType: messageHidden
            wait: 100 
  lastTop: "0.0" # keep updated for list rendering.
  listData: 
    historyroom:
      edge:
        # - .Edge:
        #     name: 
        #       title: "History Room 1"
        #     tage: "10"
        # - .Edge:
        #     name: 
        #       title: "History Room 2"
        #     tage: "10"
    get:
      .EdgeAPI.get : ""
      api: re
      dataKey: listData.historyroom
      ObjType: "4"
      xfname : "E.bvid|E.evid"
      sCondition: "E.type>10000 AND E.type!=10002"
      maxcount : "100"
      obfname : "E2.mtime"
      _nonce: =.Global._nonce 
  components:
    - type: view
      style:
        left: "0"
        top: "0"
        width: "1"
        height: "1"
        position: "fixed"  
      children:
        - .MenuHeader:
        - .SubMenuView:
          children:
            - .SubMenuButton:
            - .SubMenuButton:
              text: "Create"
              style:
                left: "0.34"
              onClick:
                - goto: MeetingRoomCreate
            - .SubMenuButton:
              text: "Activity"
              style:
                left: "0.67"
                color: "0xffffffff"
              onClick:
                - goto: MeetingRoomHistory
        - type: label
          contentType: messageHidden
          text: "No meetings to review"
          style:
            left: "0"
            top: "0.25"
            width: "1"
            height: "0.04"
            color: "0x000058"
            fontSize: "16"
            isHidden: "true"
            textAlign:
              x: center
        - type: scrollView
          style:
            top: "0.19"
            # top: "0.15"
            # left: "0.05"
            width: "1"
            height: "0.81"
            backgroundColor: "#ffffff"
            overflow: scroll
          children:                
            - type: list # hardcoded listObject
              contentType: listObject
              listObject: ..listData.historyroom.edge # to dataObject to enumerate the list
              iteratorVar: itemObject
              style:
                left: "0"
                # top: "0.2"
                width: "1"
                height: "0.8"
              #for loop through listObject, we got each itemObject
              children:
                - type: listItem
                  itemObject: ""
                  onClick:
                    - actionType: updateObject # updateObject(dataKey, dataObject, dataObjectKey)
                      dataKey: Global.rootRoomInfo.edge
                      dataObject: itemObject # this must be a rootRoom
                    - actionType: evalObject
                      object:                  
                        - .Global.VideoChatObjStore.reference.edge.refid@: =.Global.rootRoomInfo.edge.id
                        - .Global.rootRoomInfo.edge.refid@: =.EmptyObj                          
                    - goto: MeetingLobby
                  style:
                    left: "0"
                    # top: "0"
                    width: "1"
                    height: "0.18"
                    border:
                      style: "2"
                    borderWidth: "1"
                    borderColor: "0x00000011"
                    backgroundColor: "0xFAFAFA"
                    textAlign:
                      y: center                
                  children:
                    - type: label
                      dataKey: itemObject.name.fullName
                      #text: "Room 8"
                      style:
                        left: "0.08"
                        top: "0.02"
                        width: "0.8"
                        height: "0.04"
                        fontSize: "16"
                        fontWeight: 400
                        color: "0x000000"
                        display: inline
                        textAlign:
                          x: left
                          y: center
                    - type: label
                      dataKey: itemObject.name.title
                      style:
                        left: "0.08"
                        top: "0.07"
                        width: "0.74"
                        height: "0.03"
                        fontSize: "16"
                        fontWeight: 400
                        color: "0x000000"
                        display: inline
                        textAlign:
                          x: left
                          y: center
                    - type: label
                      text=func: =.builtIn.string.formatUnixtime_en
                      dataKey: itemObject.ctime # Mon Day, Year hh:mm:ss
                      text: "5 minutes"
                      style:
                        left: "0.08"
                        top: "0.12"
                        width: "0.74"
                        height: "0.03"
                        fontSize: "16"
                        fontWeight: 400
                        color: "0x00000058"
                        display: inline
                        textAlign:
                          x: left
                          y: center
