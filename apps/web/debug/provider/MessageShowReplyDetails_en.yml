MessageShowReplyDetails:
  pageNumber: "220"
  title: "Details"
  init:
    - .SignInCheck
    - actionType: evalObject
      object:
        .Global._nonce@:
          =.builtIn.math.random: ""
    - actionType: evalObject
      object:
        - actionType: evalObject
          async: true
          object:
            #获取tag
            - =..apiRequest.emailTag.docAPI.get: ""
            #获取附件
            - =..apiRequest.attachment.docAPI.get: ""
    - if:
        - =.builtIn.number.typeIsValid:
            dataIn:
              docType: =..apiRequest.emailTag.docQueryResp.doc.0.type
              localArr: [3]
              binaryArr: [1]
        - ..isStar@: 0
        - ..isStar@: 1
  requestListHidden: "true"
  subject: ""
  inboxFolder: ""
  isStar: 1
  apiRequest:
    #get attachment
    attachment:
      docQueryResp: ""
      docQueryReq:
        type: .DocType.Attachment
        id: .Global.email.id
        xfname: reid
        obfname: "ctime"
        _nonce: =.Global._nonce
      docAPI:
        get:
          api: rd
          dataIn: MessageShowReplyDetails.apiRequest.attachment.docQueryReq
          dataOut: MessageShowReplyDetails.apiRequest.attachment.docQueryResp
    emailTag:
      docQueryResp: ""
      docQueryReq:
        sCondition: type & 0xFF00 = 0xE00
        ids:
          - .Global.rootNotebookID
          - .Global.email.id
        xfname: eid,reid
        _nonce: =.Global._nonce
      docCreateResp: ""
      docCreateReq:
        type: .DocType.MailTag
        eid: .Global.rootNotebookID
        name:
          data: ""
        reid: ""
      docAPI:
        get:
          api: rd
          dataIn: MessageShowReplyDetails.apiRequest.emailTag.docQueryReq
          dataOut: MessageShowReplyDetails.apiRequest.emailTag.docQueryResp
        store:
          api: cd
          dataIn: MessageShowReplyDetails.apiRequest.emailTag.docCreateReq
          dataOut: MessageShowReplyDetails.apiRequest.emailTag.docCreateResp
  components:
    - .BaseHeader:
    - .HeaderLeftImg:
      onClick:
        - actionType: builtIn
          funcName: goBack
          reload: true
      path: whiteLeft.svg
    - type: view
      style:
        width: "1"
        height: "0.8"
        top: "0.1"
        left: "0"
        display: "block"
      viewTag: funbar
      children:
        - type: view
          style:
            width: "1"
            left: "0"
            height: "0.15"
            zIndex: "10"
            border:
              style: "2"
            borderColor: "0xe9e9eb"
            borderWidth: "1"
            position: "relative"
          children:
            - type: label
              text=func: .builtIn.string.formatUnixtime_en
              dataKey: Global.email.ctime
              style:
                top: "0.02"
                height: "0.02"
                width: "auto"
                textAlign:
                  y: center
                left: "0.05"
                fontSize: .Nfont.h12
                color: "0xBCC5D3"
            - type: label
              dataKey: Global.email.name.title
              style:
                fontSize: .Nfont.h16
                # fontWeight: "500"

                left: "0.05"
                top: "0.045"
                width: "0.9"
            - type: label
              text: "From:"
              style:
                left: "0.05"
                top: "0.085"
                height: "0.035"
                fontSize: "15"
                textAlign:
                  x: left
            - type: label
              text: Blair Zhang
              dataKey: Global.email.name.data.senderName
              style:
                fontSize: "15"
                fontWeight: "450"
                height: "0.035"
                width: "0.6"
                color: "0xBCC5D3"
                left: "0.2"
                top: "0.085"
                textAlign:
                  x: left
            - type: label
              text: "To:"
              style:
                left: "0.05"
                top: "0.115"
                height: "0.035"
                fontSize: "15"
                textAlign:
                  x: left
            - type: label
              text:
              dataKey: Global.email.name.data.receiverName
              style:
                fontSize: "15"
                fontWeight: "450"
                height: "0.035"
                width: "0.6"
                color: "0xBCC5D3"
                left: "0.2"
                top: "0.115"
                textAlign:
                  x: left
        - type: image
          viewTag: select
          path:
            emit:
              actions:
                - if:
                    - =.builtIn.number.typeIsValid:
                        dataIn:
                          docType: =..apiRequest.emailTag.docQueryResp.doc.0.type
                          localArr: [3]
                          binaryArr: [1]
                    - providerOn.svg
                    - providerOff.svg
          style:
            height: "0.025"
            left: "0.88"
            top: "0.09"
            zIndex: "100"
        - type: view
          style:
            top: "0.16"
            left: "0"
            width: "1"
            height: "0.42"
          children:
            - type: textView
              isEditable: "false"
              dataKey: Global.email.name.data.content
              style:
                top: "0.01"
                width: "0.9"
                left: "0.05"

                fontSize: .Nfont.h14
                height: "0.4"
                backgroundColor: "0xffffff"
                color: "0x757575"
                fontWeight: 300
                # isEditable: "false"
                border:
                  style: "2"
                  color: "0xEFEFEF"
                  width: "1"
        - type: scrollView
          style:
            top: "0.57"
            width: "1"
            height: "0.22"
          children:
            - type: list
              contentType: listObject
              listObject: ..apiRequest.attachment.docQueryResp.doc
              iteratorVar: itemObject
              style:
                left: "0"
                top: "0.01"
                width: "1"
                height: "auto"
                backgroundColor: "0xffffff"
              children:
                - type: listItem
                  itemObject: ""
                  style:
                    marginTop: "0.001"
                    left: "0"
                    width: "1"
                    height: "0.055"
                  onClick:
                    - actionType: updateObject
                      dataKey: Global.showAttachment
                      dataObject: itemObject
                    - goto: ShowAttachment
                  children:
                    - type: view
                      style:
                        top: "0.001"
                        left: "0.05"
                        width: "0.9"
                        height: "0.05"
                        backgroundColor: "0xf8f9fa"
                        borderWidth: "1"
                        borderRadius: "10"
                        border:
                          style: "1"
                      children:
                        - type: image
                          path: blackAttachment.svg
                          style:
                            top: "0.01"
                            height: "0.03"
                            left: "0.03"
                        - type: label
                          dataKey: itemObject.name.title #需要加name.type
                          style:
                            top: "0.01"
                            height: "0.03"
                            width: "0.45"
                            left: "0.13"
                            overflow: hidden
                            text-overflow: ellipsis
                            whiteSpace: nowrap
                            fontSize: .Nfont.h2
                        - type: label
                          text=func: .builtIn.string.bitFormatting
                          dataKey: itemObject.size
                          style:
                            top: "0.01"
                            height: "0.03"
                            width: "0.3"
                            left: "0.5466"
                            fontSize: .Nfont.h2
                            textAlign:
                              x: right
                            color: "0xbcc5d3"
