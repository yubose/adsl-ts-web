CreateNewAccount: # This is page name
  module: provider
  title: Create New Account
  pageNumber: "45"
  # init:
  #   - if:
  #       - ..formData.vertex.name.phoneNumber
  #       - continue
  #       - goto: SignUp
  listData:
    organization:
      vertex: []
  formData:
    response: ""
    vertex: # inherit from BaseDataModel_en.yml
      .Vertex: ""
      type: .Global.newAccountFlag
      name:
        countryCode: .SignUp.formData.countryCode
        phoneNumber: .Global.phoneNumber
        userName: ""
        email: ""
        password: ""
        firstName: ""
        lastName: ""
        confirmPassword: ""
        avatar: "https://public.aitmed.com/avatar/JohnDoe.jpg"
        verificationCode: .SignUp.formData.code
        signature: ""
    vertexAPI:
      .VertexAPI: ""
      store:
        api: builtIn.createNewAccount # construct uid, pk, esk .. for new account
        dataIn: formData.vertex
        dataOut: formData.response
  profile:
    firstName: ""
    lastName: ""
  rvCondition: ""
  checkOk: ""
  # init:
  # - if:
  #   - =.ServicesAgreement.agreement.servicesAgreement
  #   - ..selectData.tar@: "selectOn.svg"
  #   - ..selectData.tar@: "selectOff.svg"
  getVertex:
    response: ""
    vertex:
      xfname: none
      type: 1
      sCondition: =..rvCondition
      _nonce: =.Global._nonce
    vertexAPI:
      get:
        api: rv
        dataIn: CreateNewAccount.getVertex.vertex
        dataOut: CreateNewAccount.getVertex.response
  save:
    - =..formData.vertexAPI.store: "" #
    # - .Global.rootNotebook.edgeAPI.store
  update:
    - .Global.currentUser.vertex@: =..formData.response.vertex # set {".Global.currentUser.vertex":".builtIn.UserVertex"}
    - .Global.currentUser.JWT@: =..formData.response.jwt
    - .Global.rootNotebookID@: =.Global.currentUser.vertex.deat.rnb64ID
    - .Global.currentUser.dataCache.loadingDateTime@: =.Global.currentDateTime
    - .Global.formData.profile@: =..profile
  components:
    - type: view
      style:
        marginLeft: "0"
        top: "0"
        width: "1"
        height: "1"
        backgroundColor: "0xffffff"
        overflow: hidden
      children:
        - type: label
          text: Create Your Account with AiTmed
          style:
            color: "#2988e6" #"0x3185c7ff"
            marginLeft: "0.05"
            marginTop: "0.05"
            width: "0.9"
            # fontSize: "20"
            fontSize: ".Nfont.n1"
            fontStyle: bold
        - type: view
          style:
            # left: "0.121"
            marginLeft: "0.08"
            width: "0.92"
            # backgroundColor: "#ffe680"
          children:
            - type: view
              style:
                width: "0.92"
              children:
                - type: view
                  style:
                    marginTop: "0.02"
                    display: "inline-block"
                  children:
                    - type: label
                      textBoard:
                        - text: Country
                        - text: "&nbsp;*"
                          color: "0xff0000"
                      style:
                        color: "0x333333"
                        fontWeight: "500"
                        marginTop: "0.01"

                        fontSize: ".Nfont.h1"
                    - type: select
                      # contentType: countryCode
                      placeholder: ..formData.vertex.name.countryCode
                      dataKey: formData.vertex.name.countryCode # formData.countryCode : inputValue
                      # options: .SelectINformationDM.CountryCode
                      options: ..formData.vertex.name.countryCode
                      required: "true"
                      style:
                        width: "0.2"
                        marginTop: "0.01"
                        height: "0.05"
                        backgroundColor: "0xF4F4F5"
                        fontSize: .Nfont.h1
                        boxSizing: "border-box"
                        borderWidth: "1"
                        color: "0x000000"
                        borderRadius: "4"
                        textIndent: "1em"
                        box-sizing: "border-box"
                        border:
                          style: "1"
                - type: view
                  style:
                    marginTop: "0.02"
                    marginLeft: "0.05"
                    display: inline-block
                  children:
                    - type: label
                      style:
                        color: "0x333333"
                        fontWeight: "500"
                        marginTop: "0.01"

                        fontSize: ".Nfont.h1"
                      textBoard:
                        - text: Phone
                          fontSize: .Nfont.h15
                        - text: "&nbsp;*"
                          color: "0xff0000"
                    # !!please!! do not change to use textField!! It must be a label!
                    # - type: textField
                    #   contentType: phoneNumber
                    #   placeholder: (123) 456-7890
                    #   dataKey: formData.vertex.name.phoneNumber # formData.countryCode : inputValue
                    #   required: "true"
                    #   style:
                    #     fontSize: .Nfont.h14
                    #     left: "0"
                    #     top: "0.045"
                    #     width: "0.538"
                    #     height: "0.041"
                    #     borderWidth: "1"
                    #     border:
                    #       style: "2"
                    #     textAlign:
                    #       x: left
                    #       y: center
                    - type: textField
                      # contentType: phoneNumber
                      # placeholder: ..formData.vertex.name.phoneNumber
                      dataKey: formData.vertex.name.phoneNumber # formData.countryCode : inputValue
                      # required: "true"
                      isEditable: "false"
                      style:
                        width: "0.59"
                        marginTop: "0.01"
                        height: "0.05"
                        backgroundColor: "0xF4F4F5"
                        fontSize: .Nfont.h1
                        boxSizing: "border-box"
                        borderWidth: "1"
                        color: "0x000000"
                        borderRadius: "4"
                        textIndent: "1em"
                        box-sizing: "border-box"
                        border:
                          style: "1"
                        textAlign:
                          y: center
            - type: view
              children:
                - type: view
                  style:
                    marginTop: "0.01"
                    display: "inline-block"
                  children:
                    - type: label
                      textBoard:
                        - text: First Name
                        - text: "&nbsp;*"
                          color: "0xff0000"
                          left: "5"
                      style:
                        color: "0x333333"
                        fontWeight: "500"
                        marginTop: "0.01"

                        fontSize: ".Nfont.h1"
                    - type: textField
                      contentType: text
                      placeholder: "Enter Here"
                      dataKey: profile.firstName # formData.countryCode : inputValue
                      required: "true"
                      style:
                        width: "0.4"
                        marginTop: "0.01"
                        height: "0.05"
                        backgroundColor: "0xF4F4F5"
                        fontSize: .Nfont.h1
                        boxSizing: "border-box"
                        borderWidth: "1"
                        color: "0x000000"
                        borderRadius: "4"
                        textIndent: "1em"
                        box-sizing: "border-box"
                        border:
                          style: "1"
                - type: view
                  style:
                    marginTop: "0.01"
                    marginLeft: "0.04"
                    display: "inline-block"
                  children:
                    - type: label
                      textBoard:
                        - text: Last Name
                        - text: "&nbsp;*"
                          color: "0xff0000"
                          left: "5"
                      style:
                        color: "0x333333"
                        fontWeight: "500"
                        marginTop: "0.01"

                        fontSize: ".Nfont.h1"
                    - type: textField
                      contentType: text
                      placeholder: "Enter Here"
                      dataKey: profile.lastName # formData.countryCode : inputValue
                      required: "true"
                      style:
                        width: "0.4"
                        marginTop: "0.01"
                        height: "0.05"
                        backgroundColor: "0xF4F4F5"
                        fontSize: .Nfont.h1
                        boxSizing: "border-box"
                        borderWidth: "1"
                        color: "0x000000"
                        borderRadius: "4"
                        textIndent: "1em"
                        box-sizing: "border-box"
                        border:
                          style: "1"
            - type: view
              children:
                - type: view
                  style:
                    marginTop: "0.01"
                    display: "inline-block"
                  children:
                    - type: label
                      textBoard:
                        - text: Username
                        - text: "&nbsp;*"
                          color: "0xff0000"
                          left: "5"
                      style:
                        color: "0x333333"
                        fontWeight: "500"
                        marginTop: "0.01"

                        fontSize: .Nfont.h1
                    - type: textField
                      contentType: text
                      placeholder: "Enter Here"
                      dataKey: formData.vertex.name.userName # formData.countryCode : inputValue
                      required: "true"
                      style:
                        width: "0.84"
                        marginTop: "0.01"
                        height: "0.05"
                        backgroundColor: "0xF4F4F5"
                        fontSize: .Nfont.h1
                        boxSizing: "border-box"
                        borderWidth: "1"
                        color: "0x000000"
                        borderRadius: "4"
                        textIndent: "1em"
                        box-sizing: "border-box"
                        border:
                          style: "1"
            - type: view
              children:
                - type: view
                  style:
                    marginTop: "0.01"
                    display: "inline-block"
                  children:
                    - type: label
                      textBoard:
                        - text: New Password
                        - text: "&nbsp;*"
                          color: "0xff0000"
                          left: "5"
                      style:
                        color: "0x333333"
                        fontWeight: "500"
                        marginTop: "0.01"

                        fontSize: .Nfont.h1
                    - type: view
                      style:
                        backgroundColor: "0xF4F4F5"
                        borderRadius: "4"
                        height: "0.05"
                        width: "0.84"
                        marginTop: "0.01"
                        # border:
                        #   style: "3"
                      children:
                        - type: textField
                          contentType: password
                          placeholder: "Enter Here"
                          dataKey: formData.vertex.name.password # formData.countryCode : inputValue
                          required: "true"
                          style:
                            width: "0.84"
                            height: "0.05"
                            backgroundColor: "0xF4F4F5"
                            fontSize: .Nfont.h1
                            boxSizing: "border-box"
                            borderWidth: "1"
                            color: "0x000000"
                            borderRadius: "4"
                            textIndent: "1em"
                            box-sizing: "border-box"
                            border:
                              style: "1"
            - type: view
              children:
                - type: view
                  style:
                    marginTop: "0.01"
                    display: "inline-block"
                  children:
                    - type: label
                      textBoard:
                        - text: Confirm Password
                        - text: "&nbsp;*"
                          color: "0xff0000"
                          left: "5"
                      style:
                        color: "0x333333"
                        fontWeight: "500"
                        marginTop: "0.01"

                        fontSize: .Nfont.h1
                    - type: view
                      style:
                        backgroundColor: "0xF4F4F5"
                        borderRadius: "4"
                        height: "0.05"
                        width: "0.84"
                        marginTop: "0.01"
                        # border:
                        #   style: "3"
                      children:
                        - type: textField
                          contentType: password
                          placeholder: "Enter Here"
                          dataKey: formData.vertex.name.confirmPassword # formData.countryCode : inputValue
                          required: "true"
                          style:
                            width: "0.84"
                            height: "0.05"
                            backgroundColor: "0xF4F4F5"
                            fontSize: .Nfont.h1
                            boxSizing: "border-box"
                            borderWidth: "1"
                            color: "0x000000"
                            borderRadius: "4"
                            textIndent: "1em"
                            box-sizing: "border-box"
                            border:
                              style: "1"
            - type: view
              children:
                - type: view
                  style:
                    marginTop: "0.02"
                    display: "inline-block"
                  children:
                    - type: label
                      text: "By checking the boxes below, you agree and accept the following terms and policies:"
                      style:
                        color: "0x333333"
                        fontWeight: "500"
                        marginTop: "0.01"
                        width: "0.86"

                        fontSize: .Nfont.h1
            - type: view
              children:
                - type: view
                  style:
                    marginTop: "0.02"
                    display: "inline-block"
                    width: "0.84"
                  children:
                    - type: image
                      viewTag: select
                      onClick:
                        - emit:
                            actions:
                              - if:
                                  - =.CreateNewAccount.formData.target
                                  - .CreateNewAccount.formData.target@: false
                                  - .CreateNewAccount.formData.target@: true
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: select
                      path:
                        emit:
                          actions:
                            - if:
                                - =.CreateNewAccount.formData.target
                                - selectOnBlue.svg
                                - selectOff.svg
                      # path: selectOff.svg
                      # pathSelected: selectOn.svg
                      style:
                        display: "inline-block"
                        marginTop: "0.01"
                        width: "0.05"
                    - type: view
                      style:
                        display: "inline-block"
                        marginTop: "0.01"
                        marginLeft: "0.03"
                        width: "0.76"
                      children:
                        - type: label
                          style:
                            color: "0x333333"
                            fontWeight: "500"
                            # display: "inline-block"

                            fontSize: .Nfont.h1
                          onClick:
                            - goto: UserAgreement
                          textBoard:
                            - text: "I agree to&nbsp;"
                            - text: "Aitmed Terms of Use Agreement "
                              color: "0x69AAD8"
                        - type: label
                          style:
                            color: "0x333333"
                            fontWeight: "500"
                            # display: "inline-block"

                            fontSize: .Nfont.h1
                          onClick:
                            - goto: ServicesAgreement
                          textBoard:
                            - text: "&nbsp;and&nbsp;"
                            - text: "AiTmed Master Subscription Agreement."
                              color: "0x69AAD8"
            - type: view
              children:
                - type: view
                  style:
                    marginTop: "0.02"
                    display: "inline-block"
                    width: "0.84"
                  children:
                    - type: image
                      viewTag: select
                      onClick:
                        - emit:
                            actions:
                              - if:
                                  - =.CreateNewAccount.formData.tar
                                  - .CreateNewAccount.formData.tar@: false
                                  - .CreateNewAccount.formData.tar@: true
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: select
                        # - actionType: evalObject
                        #   object:
                        #     - if:
                        #       - =..formData.tar
                        #       # - goto: ServicesAgreement
                        #       - continue
                      path: #..selectData.tar
                        emit:
                          actions:
                            - if:
                                - =.CreateNewAccount.formData.tar
                                - selectOnBlue.svg
                                - selectOff.svg
                      style:
                        display: "inline-block"
                        marginTop: "0"
                        width: "0.05"
                    - type: view
                      style:
                        display: "inline-block"
                        marginTop: "0"
                        marginLeft: "0.03"
                        width: "0.76"
                      children:
                        - type: label
                          textBoard:
                            - text: "I agree to&nbsp;"
                            - text: "AiTmed's Privacy Policy"
                              color: "0x69aad8"
                          style:
                            color: "0x333333"
                            fontWeight: "500"
                            # display: "inline-block"

                            fontSize: .Nfont.h1
                          onClick:
                            - goto: PrivacyPolicy
                    # - type: label
                    #   style:
                    #     color: "0x000000"
                    #     left: "0.05"
                    #     top: "0.03"
                    #     height: "0.03"
                    #     # width: "0.5"
                    #     # height: "0.041"
                    #     fontSize: .Nfont.h1
                    #     textAlign:
                    #       x: left
                    #   onClick:
                    #     # - goto: PrivacyPolicy
                    #     - goto: ServicesAgreement
                    #   textBoard:
                    #     - text: '&nbsp;'
                    #     - text: "and"
                    #     - text: '&nbsp;'
                    #     - text: "AiTmed Master Subscription Agreement"
                    #       color: "0x69AAD8"
                    # - type: image
                    #   viewTag: select
                    #   onClick:
                    #     - emit:
                    #         actions:
                    #           - if:
                    #             - =.CreateNewAccount.formData.tar
                    #             - .CreateNewAccount.formData.tar@: false
                    #             - .CreateNewAccount.formData.tar@: true
                    #     - actionType: builtIn
                    #       funcName: redraw
                    #       viewTag: select
                    #     # - actionType: evalObject
                    #     #   object:
                    #     #     - if:
                    #     #       - =..formData.tar
                    #     #       # - goto: ServicesAgreement
                    #     #       - continue
                    #   path: #..selectData.tar
                    #     emit:
                    #       actions:
                    #         - if:
                    #             - =.CreateNewAccount.formData.tar
                    #             - selectOn.svg
                    #             - selectOff.svg
                    #   style:
                    #     left: "0"
                    #     width: "0.05"
                    #     top: "0.07"
                    # - type: label
                    #   textBoard:
                    #     - text: "I agree to"
                    #     - text: '&nbsp;'
                    #     - text: "AiTmed's Privacy Policy"
                    #       color: "0x69aad8"
                    #     # - text: "and Services Agreement"
                    #     #   color: "0x69aad8"
                    #   onClick:
                    #     - goto: PrivacyPolicy
                    #   style:
                    #     color: "0x000000"
                    #     left: "0.05"
                    #     top: "0.07"
                    #     width: "0.65"
                    #     height: "0.04"
                    #     fontSize: .Nfont.h1
                    #     lineHeight: "2"
                    #     textAlign:
                    #       x: left

                # - type: view
                #   style:
                #     top: "0.25"
                #     left: "0.121"
                #     width: "0.9"
                #     height: "0.1"
                #   children:
                #     - type: label
                #       text: email
                #       style:
                #         color: "0x000000"
                #         left: "0"
                #         top: "0.01"
                #         width: "0.2"
                #         height: "0.041"
                #         fontSize: .Nfont.h12
                #         textAlign:
                #           x: left
                #     - type: textField
                #       contentType: text
                #       placeholder: "username@aitmed.com"
                #       dataKey: formData.vertex.name.email # formData.countryCode : inputValue
                #       required: "true"
                #       style:
                #         fontSize: .Nfont.h14
                #         left: "0"
                #         backgroundColor: "0xffffff"
                #         top: "0.05"
                #         width: "0.747"
                #         height: "0.041"
                #         borderWidth: "1"
                #         border:
                #           style: "2"
                #         textAlign:
                #           x: left
                #           y: center
                # - type: view
                #   style:
                #     top: "0.35"
                #     left: "0.121"
                #     height: "0.1"
                #     width: "0.84"
                #   children:
                #     - type: label
                #       textBoard:
                #       - text: New Password
                #         fontSize: "1.8vh"
                #       - text: "*"
                #         color: "0xff0000"
                #         left: "5"
                #       style:
                #         left: "0"
                #         top: "0.01"
                #         width: "0.5"
                #         height: "0.041"
                #         textAlign:
                #           x: left
                #     - type: textField
                #       contentType: password
                #       # placeholder: "..formData.vertex.name.password"
                #       placeholder: "Enter Here"
                #       dataKey: formData.vertex.name.password # formData.countryCode : inputValue
                #       required: "true"
                #       style:
                #         fontSize: .Nfont.h2
                #         left: "0"
                #         top: "0.05"
                #         width: "0.747"
                #         height: "0.041"
                #         borderWidth: "1"
                #         border:
                #           style: "2"
                #         textAlign:
                #           x: left
                #           y: center
                # - type: view
                #   style:
                #     top: "0.45"
                #     left: "0.121"
                #     height: "0.1"
                #     width: "0.84"
                #   children:
                #     - type: label
                #       textBoard:
                #       - text: Confirm Password
                #         fontSize: "1.8vh"
                #       - text: "*"
                #         color: '0xff0000'
                #         left: "5"
                #       style:
                #         left: "0"
                #         top: "0.01"
                #         height: "0.041"
                #         width: "0.5"
                #         textAlign:
                #           x: left
                #     - type: textField
                #       contentType: password
                #       # placeholder: ..formData.vertex.name.confirmPassword
                #       placeholder: "Enter Here"
                #       dataKey: formData.vertex.name.confirmPassword # formData.countryCode : inputValue
                #       required: "true"
                #       style:
                #         fontSize: .Nfont.h2
                #         left: "0"
                #         top: "0.05"
                #         width: "0.747"
                #         height: "0.041"
                #         borderWidth: "1"
                #         border:
                #           style: "2"
                #         textAlign:
                #           x: left
                #           y: center
            # - type: label
            #   text: "By checking the boxes below, you agree and accept the following terms and policies:"
            #   style:
            #     color: "#707070"
            #     top: "0.58"
            #     left: "0.12"
            #     width: "0.8"
            #     height: "0.05"
            #     fontSize: .Nfont.h14
            #     # backgroundColor: "#8dd35f"
        #     - type: view
        #       style:
        #         top: "0.65"
        #         left: "0.12"
        #         width: "0.84"
        #         height: "0.12"
        #       children:
        #         - type: image
        #           viewTag: select
        #           onClick:
        #             - emit:
        #                 actions:
        #                   - if:
        #                     - =.CreateNewAccount.formData.target
        #                     - .CreateNewAccount.formData.target@: false
        #                     - .CreateNewAccount.formData.target@: true
        #             - actionType: builtIn
        #               funcName: redraw
        #               viewTag: select
        #           path:
        #             emit:
        #               actions:
        #                 - if:
        #                     - =.CreateNewAccount.formData.target
        #                     - selectOn.svg
        #                     - selectOff.svg
        #           # path: selectOff.svg
        #           # pathSelected: selectOn.svg
        #           style:
        #             left: "0"
        #             width: "0.05"
        #         - type: label
        #           style:
        #             color: "0x000000"
        #             left: "0.05"
        #             top: "0"
        #             fontSize: .Nfont.h1
        #             height: "0.03"
        #             textAlign:
        #               x: left
        #           onClick:
        #             - goto: UserAgreement
        #           textBoard:
        #             - text: "I agree to"
        #             - text: "&nbsp;"
        #             - text: "Aitmed Terms of Use Agreement "
        #               color: "0x69AAD8"
        #         - type: label
        #           style:
        #             color: "0x000000"
        #             left: "0.05"
        #             top: "0.03"
        #             height: "0.03"
        #             # width: "0.5"
        #             # height: "0.041"
        #             fontSize: .Nfont.h1
        #             textAlign:
        #               x: left
        #           onClick:
        #             # - goto: PrivacyPolicy
        #             - goto: ServicesAgreement
        #           textBoard:
        #             - text: '&nbsp;'
        #             - text: "and"
        #             - text: '&nbsp;'
        #             - text: "AiTmed Master Subscription Agreement"
        #               color: "0x69AAD8"
        #         - type: image
        #           viewTag: select
        #           onClick:
        #             - emit:
        #                 actions:
        #                   - if:
        #                     - =.CreateNewAccount.formData.tar
        #                     - .CreateNewAccount.formData.tar@: false
        #                     - .CreateNewAccount.formData.tar@: true
        #             - actionType: builtIn
        #               funcName: redraw
        #               viewTag: select
        #             # - actionType: evalObject
        #             #   object:
        #             #     - if:
        #             #       - =..formData.tar
        #             #       # - goto: ServicesAgreement
        #             #       - continue
        #           path: #..selectData.tar
        #             emit:
        #               actions:
        #                 - if:
        #                     - =.CreateNewAccount.formData.tar
        #                     - selectOn.svg
        #                     - selectOff.svg
        #           style:
        #             left: "0"
        #             width: "0.05"
        #             top: "0.07"
        #         - type: label
        #           textBoard:
        #             - text: "I agree to"
        #             - text: '&nbsp;'
        #             - text: "AiTmed's Privacy Policy"
        #               color: "0x69aad8"
        #             # - text: "and Services Agreement"
        #             #   color: "0x69aad8"
        #           onClick:
        #             - goto: PrivacyPolicy
        #           style:
        #             color: "0x000000"
        #             left: "0.05"
        #             top: "0.07"
        #             width: "0.65"
        #             height: "0.04"
        #             fontSize: .Nfont.h1
        #             lineHeight: "2"
        #             textAlign:
        #               x: left
        # - type: view
        #   style:
        #     top: "0.85"
        #     height: "0.05"
        #     width: "1"
        #     left: "0"
        # - type: view
        #   style:
        #     top: "0.85"
        #     height: "0.15"
        #     width: "1"
        #     left: "0"
        #     # position: fixed
        #     # backgroundColor: "0xffffffff"
        #   children:
        - type: view
          style:
            height: auto
            width: "0.92"
            marginLeft: "0.08"
            marginTop: "0.03"
            overflow: hidden
          children:
            - type: button
              text: Sign Up
              style:
                color: "0xffffffff"
                fontSize: .Nfont.h18
                # fontStyle: bold
                # marginLeft: "0.08"
                #top: "0"
                # marginTop: "0.05"
                fontWeight: 400
                width: "0.84"
                height: "0.05"
                borderRadius: "8"
                backgroundColor: "0x2988e6ff"
                border:
                  style: "1"
                display: inline
                textAlign:
                  x: center
                  y: center
              onClick:
                - actionType: evalObject
                  object:
                    - if:
                        - =..formData.target
                        - continue
                        - actionType: popUp
                          popUpView: noSelected
                          wait: true
                - actionType: evalObject
                  object:
                    - if:
                        - =..formData.tar
                        - continue
                        - actionType: popUp
                          popUpView: noSelected
                          wait: true
                - actionType: evalObject
                  object:
                    - if:
                        - =..formData.vertex.name.password
                        - continue
                        - actionType: popUp
                          popUpView: inputPassword
                          wait: true
                - actionType: evalObject
                  object:
                    - if:
                        - =..profile.firstName
                        - continue
                        - actionType: popUp
                          popUpView: inputPassword
                          wait: true
                - actionType: evalObject
                  object:
                    - if:
                        - =..profile.lastName
                        - continue
                        - actionType: popUp
                          popUpView: inputPassword
                          wait: true
                - actionType: evalObject
                  object:
                    - if:
                        - =..formData.vertex.name.userName
                        - continue
                        - actionType: popUp
                          popUpView: inputPassword
                          wait: true
                - actionType: evalObject
                  object:
                    - if:
                        - =.builtIn.string.equal:
                            dataIn:
                              string1: =..formData.vertex.name.password
                              string2: =..formData.vertex.name.confirmPassword
                        - continue
                        - actionType: popUp
                          popUpView: samePassword
                          wait: true
                - actionType: evalObject
                  object:
                    .Global._nonce@:
                      =.builtIn.math.random: ""
                - actionType: evalObject
                  object:
                    - =.builtIn.typeCheck.userName:
                        dataIn: =..formData.vertex.name.userName
                        dataOut: CreateNewAccount.checkOk
                - actionType: evalObject
                  object:
                    - if:
                        - =..checkOk
                        - continue
                        - actionType: popUp
                          popUpView: invaliduserid
                          wait: true
                - actionType: evalObject
                  object:
                    - =.builtIn.string.concat:
                        dataIn:
                          - "uid like '"
                          - =..formData.vertex.name.userName
                          - "%'"
                        dataOut: CreateNewAccount.rvCondition
                    - =..getVertex.vertexAPI.get: ""
                    - if:
                        - =..getVertex.response.vertex.0.id
                        - actionType: popUp
                          popUpView: sameuserid
                          wait: true
                        - continue
                - actionType: evalObject
                  object:
                    - ..formData.vertex.name.firstName@: =..profile.firstName
                    - ..formData.vertex.name.lastName@: =..profile.lastName
                - actionType: evalObject
                  object: ..save
                - actionType: evalObject
                  object:
                    - if:
                        - =.builtIn.string.equal:
                            dataIn:
                              string1: =..formData.response.code
                              string2: 1031
                        - actionType: popUp
                          popUpView: sameuserid
                          wait: true
                        - continue
                - actionType: evalObject
                  object: ..update
                - actionType: evalObject
                  object:
                    - =.builtIn.eccNaCl.decryptAES:
                        dataIn:
                          key: =..formData.vertex.name.password
                          message: =..formData.response.vertex.esk
                        dataOut: Global.currentUser.vertex.sk
                    - =.builtIn.storeCredentials:
                        dataIn:
                          sk: =.Global.currentUser.vertex.sk
                          pk: =.Global.currentUser.vertex.pk
                          userId: =.Global.currentUser.vertex.id
                          esk: =.Global.currentUser.vertex.esk
                - actionType: evalObject
                  object:
                    - .Global.organizations@: =..listData.organization.vertex
                    - .Global.dashboardName@: ""
                    - .Global.nonFirstProfile@: false
                - actionType: evalObject
                  object:
                    - if:
                        - =..formData.response.vertex.pk
                        - actionType: popUp
                          popUpView: successfulPopUp
                          wait: 2000
                        - actionType: popUp
                          popUpView: wrongCode
                - actionType: evalObject
                  object:
                    - if:
                        - =..formData.response.vertex.pk
                        - goto: Dashboard
                        - goto: SignUp
            - type: view
              style:
                # marginLeft: "0.08"
                marginTop: "0.03"
                width: "0.83"
                textAlign:
                  x: center
              children:
                - type: view
                  children:
                    - type: label
                      text: Already have an account?
                      style:
                        display: "inline-block"
                        color: "0x00000088"

                        fontSize: .Nfont.h1
                        textAlign:
                          x: center
                          y: center
                    - type: label
                      text: Sign In
                      style:
                        display: "inline-block"
                        color: "0x3185c7ff"

                        fontSize: .Nfont.h1
                        fontStyle: bold
                        marginLeft: "0.01"
                        fontWeight: 400
                        border:
                          style: "1"
                        textAlign:
                          x: center
                          y: center
                      onClick:
                        - goto: SignIn

    - .TipsMultiLine:
      viewTag: wrongCode
      message: "Incorrect verificationCode"

    - .TipsMultiLine:
      viewTag: samePassword
      message: "Password should be same"

    - .TipsMultiLine:
      viewTag: inputPassword
      message: "Please complete required fields"

    - .TipsMultiLine:
      viewTag: noSelected
      message: "Please check the box"

    - .TipsMultiLine:
      viewTag: sameuserid
      message: "Username has been used"
      onClick:
        - actionType: popUpDismiss
          popUpView: __.viewTag
        - actionType: updateObject
          dataKey: CreateNewAccount.getVertex.response
          dataObject: []
    - .TipsMultiLine:
      viewTag: invaliduserid
      message: "Invalid username: required length should be 6 to 16"

    - .SuccessfulOneLine:
      message: "Sign up Successfully!"
      viewTag: successfulPopUp
