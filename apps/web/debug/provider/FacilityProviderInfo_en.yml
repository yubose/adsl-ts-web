FacilityProviderInfo:
  title: Provider Information
  pageNumber:
  init:
    - .SignInCheck
    - actionType: evalObject
      object:
        .Global._nonce@:
          =.builtIn.math.random: ""

    - actionType: evalObject
      object:
        # xuchen change at 12.23 已经统一入口 所以不需要再判断&获取provider信息 直接用 global.temporaryId 里面存储的provider信息就行
        - ..formData.providerInfo@: =.Global.formData.facilityProviderInfo.name.data
        # 获取当前 provider的facility信息
        # - ..apiRequest.facilityProfile.docReq.id@: =.Global.formData.facilityProviderInfo.bsig
        # - =..apiRequest.facilityProfile.docAPI.get: ""
        # - ..formData.facilityData@: =..apiRequest.facilityProfile.docRes.doc

    - actionType: evalObject
      object:
        - =.builtIn.string.concat:
            dataIn:
              - =..formData.providerInfo.fullName
              - "&nbsp;-&nbsp;"
              - =..formData.providerInfo.title
            dataOut: FacilityProviderInfo.formData.providerTitle
        - ..apiRequest.invite.edge.name.phoneNumber@: =.FacilityProviderInfo.formData.providerInfo.phone
        - ..apiRequest.invite.edge.name.data.phone@: =.FacilityProviderInfo.formData.providerInfo.phone

    - actionType: evalObject
      object:
        # 拼接出scondition， 用来objtype 查询 是否存在该好友
        - =.builtIn.string.concat:
            dataIn:
              - "V.uid like '%"
              - =..apiRequest.invite.edge.name.phoneNumber
              - "' AND E.tage>0" #
            dataOut: FacilityProviderInfo.formData.query10002Scondition
        - =.builtIn.string.concat: #信息
            dataIn:
              - (
              - =..apiRequest.invite.edge.name.phoneNumber
              - )
            dataOut: FacilityProviderInfo.formData.inviteMessage

    # 检测是否已经是好友
    - actionType: evalObject
      object:
        - =..apiRequest.checkConnection.edgeApi.get: ""
        - if:
            - =.builtIn.array.judgeListLength:
                dataIn:
                  array: =..apiRequest.checkConnection.getResp.edge
                  len: 0
            - ..formData.addFlag@: "block"
            - ..formData.addFlag@: "none"
    - actionType: evalObject
      object:
        - if:
            - =.builtIn.string.equal:
                dataIn:
                  string1: =.Global.formData.pageName
                  string2: "NewConnections"
            - ..formData.addFlag@: "none"
            - ..formData.addFlag@: "block"

  phoneNumber: ""
  formData:
    flag: "none"
    addFlag: "none"
    providerTitle: ""
    facilityCount: ""
    providerInfo: {}
    # patientProfile: ""
    searchContent: ""
    query10002Scondition: ""
    inviteMessage: ""
    facilityData: ""
  formDataTemp:
    titleData:
      - title: About
        fontColor: "0x2988e6"
        fontWeight: "500"
        displayStyle: "block"
      - title: Credentials
        fontColor: "0x333333"
        fontWeight: "400"
        displayStyle: "none"
    blockAboutInfo: "block"
    blockCredentialsInfo: "none"
    blockFacilityInfo: "none"
    idImageStyle: "none"
    languagesHidden: "block"
    addressHidden: "none"
    educationHidden: "none"
    descriptionHidden: "none"
    DEAHidden: "none"
    NPIHidden: "none"
    emailHidden: "block"
    genderHidden: "block"
    faxHidden: "block"
    gender:
      - key: gender
        value: Male
      - key: gender
        value: Female
      - key: gender
        value: Other
  apiRequest:
    # get all facilitys which provider belongs to
    facility:
      docQueryResp: ""
      docQueryReq:
        ObjType: 12
        id: ""
        xfname: E.bvid|E.evid
        sCondition: E.tage>0 AND E.type=10002
        type: .DocType.FacilityProfile
        _nonce: =.Global._nonce
      docAPI:
        get:
          api: rd
          dataIn: FacilityProviderInfo.apiRequest.facility.docQueryReq
          dataOut: FacilityProviderInfo.apiRequest.facility.docQueryResp
    invite:
      edgeRes: ""
      edge:
        type: .EdgeType.InviteInfo
        bvid: .Global.currentUser.vertex.id
        _nonce: =.Global._nonce
        subtype: 262144 #4<<16 0x40000
        evid: ""
        name:
          phoneNumber: "" #inviteePhoneNumber  被邀请号码
          inviterPhoneNumber: .Global.currentUser.vertex.uid
          inviteeName: ""
          inviterName: .Global.MyProfile.name.data.fullName
          inviterAvatar: .Global.MyProfile.name.data.avatar
          inviteeAvatar: ""
          data:
            phone: ""
      edgeAPI:
        store:
          api: ce
          dataIn: FacilityProviderInfo.apiRequest.invite.edge
          dataOut: FacilityProviderInfo.apiRequest.invite.edgeRes
    checkConnection:
      getResp:
        edge: []
      connectEdge:
        id: .Global.currentUser.vertex.id
        sfname: '{"result":"E.*", "join": "INNER JOIN Vertex V on V.id = E.evid OR V.id = E.bvid"}'
        xfname: "E.bvid|E.evid"
        sCondition: =..formData.query10002Scondition
        type: 10002
        ObjType: 28
        _nonce: =.Global._nonce
      edgeApi:
        get:
          api: re
          dataIn: FacilityProviderInfo.apiRequest.checkConnection.connectEdge
          dataOut: FacilityProviderInfo.apiRequest.checkConnection.getResp

    profile:
      docResponse: ""
      edge:
        id: ""
        xfname: ovid
        type: .DocType.DoctorPublicProfile
        _nonce: =.Global._nonce
      docAPI:
        get:
          .DocAPI.get: ""
          api: rd
          dataIn: apiRequest.profile.edge
          dataOut: apiRequest.profile.docResponse
    # get all facility profile
    facilityProfile:
      docRes: ""
      docReq:
        id: ""
        xfname: (E.evid|E.bvid)&(!D.ovid)
        type: .DocType.FacilityProfile #  type: "257"
        ObjType: 12
        sCondition: "E.type=10002"
        _nonce: =.Global._nonce
      docAPI:
        get:
          api: rd
          dataIn: FacilityProviderInfo.apiRequest.facilityProfile.docReq
          dataOut: FacilityProviderInfo.apiRequest.facilityProfile.docRes
    sendNotification:
      document:
        .Document: ""
        eid: =.FacilityProviderInfo.apiRequest.invite.edgeRes.edge.id
        subtype:
          isOnServer: 1
          isZipped: 0
          isBinary: 0
          isEncrypted: 0
          isExtraKeyNeeded: 0
          isEditable: 0
          applicationDataType: 0
          # 7 th bit
          notification: 1
          ringToneNotify: 0
          sendtoSelf: 0
          # 10 bit
          textMessage: 0
          mediaType: 8
        type: .DocType.Notification
        name:
          data: ""
          notification:
            title: AiTmed Connection Request
            context: Connection request from provider
            body: Connection request from provider
            onClickLandingPage: NewPatients
            targetApp: =.FirebaseToken.response.edge.evid
      docAPI:
        store:
          api: cd
          dataIn: apiRequest.sendNotification.document

  components:
    - .BasePublicHeader:
      children:
        - .BasePublicHeaderLeft:
          leftClick:
            - actionType: builtIn
              funcName: goBack
              reload: true
            - actionType: updateObject
              dataKey: Global.formData.facilityProviderInfo
              dataObject: {}
        - .BasePublicHeaderTitle:
        - .BasePublicHeaderRightIcon:
          path: qrCodeWhilte.svg
          onClick:
            - actionType: evalObject
              object:
                - .Global.formData.currentProviderQRCode@: =.Global.formData.facilityProviderInfo
                - goto: ProviderQRCode
    # - .BaseHeader:
    # - .HeaderLeftBack:
    #   onClick:
    #     - actionType: builtIn
    #       funcName: goBack
    #       reload: true
    #     - actionType: updateObject
    #       dataKey: Global.formData.facilityProviderInfo
    #       dataObject: {}
    # - .HeaderRightAdd:
    #   imgPath: qrCodeWhilte.svg
    #   onClick:
    #     - actionType: evalObject
    #       object:
    #         - .Global.formData.currentProviderQRCode@: =.Global.formData.facilityProviderInfo
    #         - goto: ProviderQRCode
    #  body
    - type: view
      style:
        width: "1"
        left: "0"
        height: "auto"
        backgroundColor: "0xffffff"
      children:
        - type: view
          style:
            width: "1"
            left: "0"
            marginTop: "0"
            height: "0.15"
          children:
            - type: image
              path: providerImage.svg
              path=func: .builtIn.utils.prepareDocToPath
              dataKey: formData.providerInfo.avatar
              style:
                width: "0.3"
                height: "0.08"
                marginTop: "0.02"
                marginLeft: "0.35"
            - type: label
              dataKey: formData.providerTitle
              style:
                width: "1"
                height: "0.035"
                marginTop: "0.01"
                marginLeft: "0"
                textAlign:
                  x: center
                fontSize: .Nfont.h18

                fontWeight: "600"
                color: "0x4B4B4B"
        - type: label
          dataKey: formData.providerInfo.specialty.0.specialty
          style:
            marginLeft: "0.1"
            marginTop: "0"
            width: "0.8"
            height: "0.04"
            fontWidth: "100"
            fontSize: .Nfont.h12
            color: "#4b4b4b"
            zIndex: 100
            textAlign:
              y: center
              x: center
            overflow: hidden
            text-overflow: ellipsis
            whiteSpace: nowrap
        - type: view
          style:
            width: "1"
            marginLeft: "0"
            height: "auto"
            marginTop: "0"
            overflow: hidden
            display: ..formData.addFlag
          children:
            - type: view
              style:
                height: "0.06"
                width: "1"
                textAlign:
                  x: center
              children:
                - type: image
                  path: contactAdd.svg
                  style:
                    height: "0.06"
                    # marginLeft: "0.05"
                    # display: "inline-block"
                    # verticalAlign: middle
                  onClick:
                    - actionType: evalObject
                      object:
                        # 拼接出scondition， 用来objtype 查询 是否存在该好友
                        - =.builtIn.string.concat:
                            dataIn:
                              - "V.uid like '%"
                              - =..apiRequest.invite.edge.name.phoneNumber
                              - "' AND E.tage>=0" #
                            dataOut: FacilityProviderInfo.formData.query10002Scondition
                        - =.builtIn.string.concat: #信息
                            dataIn:
                              - (
                              - =..apiRequest.invite.edge.name.phoneNumber
                              - )
                            dataOut: FacilityProviderInfo.formData.inviteMessage
                    - actionType: evalObject
                      object:
                        .Global._nonce@:
                          =.builtIn.math.random: ""
                    # 检测是否已经是好友
                    - actionType: evalObject
                      object:
                        - =..apiRequest.checkConnection.edgeApi.get: ""
                        - if:
                            - =.builtIn.array.judgeListLength:
                                dataIn:
                                  array: =..apiRequest.checkConnection.getResp.edge
                                  len: 0
                            # 如果是空 说明不存在好友关系
                            - continue
                            - actionType: popUp
                              popUpView: phoneInvited
                              wait: true
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: inviteLabel
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: phoneNumber
                    - actionType: popUp
                      popUpView: inviteView
    - type: view
      viewTag: blockMarginTag
      style:
        marginTop: "0.01"
        width: "1"
        height: "0.05"
        zIndex: "100"
        border:
          style: 2
          color: "0xDEDEDF"
        borderWidth: "2px"
      children:
        - type: list
          viewTag: profileInfoTag
          contentType: listObject
          listObject: ..formDataTemp.titleData
          iteratorVar: itemObject
          style:
            width: "1"
            margin: "0"
            axis: horizontal
            height: auto
            border:
              style: "2"
            borderColor: "0xdededf"
            borderWidth: "2px"
            # zIndex: 100
          children:
            - type: listItem
              itemObject:
              style:
                width: "auto"
                height: "auto"
                marginTop: "0"
              onClick:
                - emit:
                    dataKey:
                      var: itemObject
                    actions:
                      - =.builtIn.object.setProperty:
                          dataIn:
                            obj: =..formDataTemp.titleData
                            label: "title"
                            text: $var.title
                            arr: ["fontColor", "fontWeight", "displayStyle"]
                            valueArr: ["0x2988e6", "500", "block"]
                            errorArr: ["0x333333", "400", "none"]
                      - if:
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: $var.title
                                string2: "About"
                          - ..formDataTemp.blockAboutInfo@: "block"
                          - continue
                      - if:
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: $var.title
                                string2: "About"
                          - ..formDataTemp.blockCredentialsInfo@: "none"
                          - continue
                      - if:
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: $var.title
                                string2: "About"
                          - ..formDataTemp.blockFacilityInfo@: "none"
                          - continue
                      - if:
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: $var.title
                                string2: "Credentials"
                          - ..formDataTemp.blockAboutInfo@: "none"
                          - continue
                      - if:
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: $var.title
                                string2: "Credentials"
                          - ..formDataTemp.blockCredentialsInfo@: "block"
                          - continue
                      - if:
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: $var.title
                                string2: "Credentials"
                          - ..formDataTemp.blockFacilityInfo@: "none"
                          - continue
                      - if:
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: $var.title
                                string2: "Facility"
                          - ..formDataTemp.blockFacilityInfo@: "block"

                          - continue
                      - if:
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: $var.title
                                string2: "Facility"
                          - ..formDataTemp.blockAboutInfo@: "none"

                          - continue
                      - if:
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: $var.title
                                string2: "Facility"
                          - ..formDataTemp.blockCredentialsInfo@: "none"
                          - continue
                - actionType: builtIn
                  funcName: redraw
                  viewTag: leftBlockTag
                - actionType: builtIn
                  funcName: redraw
                  viewTag: profileInfoTag
                - actionType: builtIn
                  funcName: redraw
                  viewTag: AboutInfoTag
                - actionType: builtIn
                  funcName: redraw
                  viewTag: CredentialsInfoTag
                - actionType: builtIn
                  funcName: redraw
                  viewTag: FacilityInfoTag
                - actionType: builtIn
                  funcName: redraw
                  viewTag: blockMarginTag
                - actionType: builtIn
                  funcName: redraw
                  viewTag: blockHeightTag
              children:
                - type: label
                  dataKey: itemObject.title
                  style:
                    color: itemObject.fontColor
                    lineHeight: "6vh"
                    height: "0.045"
                    width: "0.5"
                    fontWeight: itemObject.fontWeight
                    display: "inline-block"
                    textAlign:
                      x: center
                    fontSize: .Nfont.n2
                - type: view
                  viewTag: leftBlockTag
                  style:
                    display: itemObject.displayStyle
                    marginLeft: "0.21"
                    width: "0.08"
                    height: "0.005"
                    backgroundColor: "0x2988e6"
                    borderRadius: "20"
    - type: scrollView
      viewTag: blockHeightTag
      style:
        margin: "0.01"
        height: "0.62"
        width: "1"
        # backgroundColor: "0xffffff"
      children:
        - type: view
          viewTag: AboutInfoTag
          style:
            width: "1"
            display: ..formDataTemp.blockAboutInfo
            height: "0.56"
            fontSize: .Nfont.n2
          children:
            - type: view
              style:
                width: "1"
                height: "auto"
                marginTop: "0"
                backgroundColor: "0xf0f0f0"
              children:
                - type: label
                  text: Basic Info
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.9"
                    marginLeft: "0.05"
                    lineHeight: "4.5vh"
                    height: "0.045"
            - type: view
              style:
                width: "0.9"
                height: "0.045"
                marginLeft: "0.05"
                marginTop: "0.01"
              children:
                - type: label
                  text: "First Name:"
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.21"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"
                - type: label
                  dataKey: formData.providerInfo.firstName
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.69"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"
                    textAlign:
                      x: right
            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0"
              children:
                - type: label
                  text: "Middle Name:"
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.25"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"

                - type: label
                  dataKey: formData.providerInfo.middleName
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.65"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"
                    textAlign:
                      x: right
            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0"
              children:
                - type: label
                  text: "Last Name: "
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.21"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"
                - type: label
                  dataKey: formData.providerInfo.lastName
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.69"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"
                    textAlign:
                      x: right
            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0"
              children:
                - type: label
                  text: "Title/Training: "
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.24"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"
                - type: label
                  dataKey: formData.providerInfo.title
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.66"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    textAlign:
                      x: right
                    height: "0.045"

            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0"
              children:
                - type: label
                  text: "Languages Spoken:"
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.9"
                    lineHeight: "4.5vh"
                    height: "0.045"
                - type: label
                  dataKey: formData.providerInfo.languages
                  style:
                    width: "0.9"
                    lineHeight: "4.5vh"
                    color: "0x707070"
                    height: "auto"
                    textAlign:
                      x: left
                    wordWrap: break-word
            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0"
              children:
                - type: label
                  text: "Gender:"
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.15"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"
                - type: label
                  dataKey: formData.providerInfo.gender
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.7"
                    lineHeight: "4.5vh"
                    marginLeft: "0.02"
                    display: "inline-block"
                    textAlign:
                      x: right
                    height: "0.045"

            - type: view
              style:
                width: "1"
                height: "auto"
                marginTop: "0.01"
                backgroundColor: "0xf0f0f0"
              children:
                - type: label
                  text: Contact
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.9"
                    marginLeft: "0.05"
                    lineHeight: "4.5vh"
                    height: "0.045"
            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0.01"
              children:
                - type: label
                  text: "Email:"
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.12"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"
                - type: label
                  dataKey: formData.providerInfo.email
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.78"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"
                    textAlign:
                      x: right
            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0"
              children:
                - type: label
                  text: "Fax #"
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.11"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"
                - type: label
                  dataKey: formData.providerInfo.fax
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.79"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"
                    textAlign:
                      x: right
        - type: view
          viewTag: CredentialsInfoTag
          style:
            width: "1"
            height: "auto"
            fontSize: .Nfont.n2
            display: ..formDataTemp.blockCredentialsInfo
          children:
            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0.01"
              children:
                - type: label
                  text: "Specialty & Board Certified:"
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.8"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"
            - type: list
              scrollable: "false"
              contentType: listObject
              listObject: ..formData.providerInfo.specialty
              iteratorVar: itemObject
              style:
                width: "1"
                margin: "0"
                left: "0"
                marginTop: "0"
                height: auto
              children:
                - type: listItem
                  itemObject:
                  style:
                    width: "1"
                    left: "0"
                    marginTop: "0"
                    lineHeight: "2.58vh"
                  children:
                    - type: label
                      dataKey: itemObject.specialty
                      style:
                        display: "inline-block"
                        width: "0.7"
                        fontWeight: "600"
                        fontSize: .Nfont.h1
                        wordBreak: break-word
                        left: "0.06"
                    - type: label
                      dataKey: itemObject.boardCertified
                      style:
                        display: "inline-block"
                        width: "0.2"
                        fontWeight: "600"
                        fontSize: .Nfont.h1
                        wordBreak: break-word
                        textAlign:
                          x: right
            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0"
              children:
                - type: label
                  text: "Medical License,State and Expiration:"
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.8"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"

            - type: list
              scrollable: "false"
              contentType: listObject
              listObject: ..formData.providerInfo.MedicalLicense
              iteratorVar: itemObject
              style:
                width: "1"
                margin: "0"
                left: "0"
                marginTop: "0"
                height: auto
              children:
                - type: listItem
                  itemObject:
                  style:
                    width: "1"
                    height: "0.03"
                    left: "0"
                    marginTop: "0"
                  children:
                    - type: label
                      dataKey: itemObject.medicalLicense
                      style:
                        width: "0.3"
                        fontWeight: "600"
                        height: "0.03"
                        display: inline-block
                        fontSize: .Nfont.h1
                        marginLeft: "0.06"
                    - type: label
                      dataKey: itemObject.state
                      style:
                        width: "0.2"
                        fontWeight: "600"
                        height: "0.03"
                        display: inline-block
                        textAlign:
                          x: center
                        fontSize: .Nfont.h1
                    - type: label
                      dataKey: itemObject.expiration
                      style:
                        width: "0.38"
                        fontWeight: "600"
                        height: "0.03"
                        display: inline-block
                        fontSize: .Nfont.h1
                        textAlign:
                          x: right
            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0"
              children:
                - type: label
                  text: "NPI #:"
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.11"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"

                - type: label
                  dataKey: formData.providerInfo.NPI
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.79"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"
                    textAlign:
                      x: right
            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0"
              children:
                - type: label
                  text: "DEA #:"
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.12"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"
                - type: label
                  dataKey: formData.providerInfo.DEA
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.78"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    textAlign:
                      x: right
                    height: "0.045"

            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0"
              children:
                - type: label
                  text: "Description:"
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.9"
                    lineHeight: "4.5vh"
                    height: "0.045"

                - type: label
                  dataKey: formData.providerInfo.description
                  style:
                    color: "0x333333"
                    height: "0.15"
                    width: "0.9"
            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0"
              children:
                - type: label
                  text: "Education & Training:"
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.9"
                    lineHeight: "4.5vh"
                    height: "0.045"

                - type: label
                  dataKey: formData.providerInfo.education
                  style:
                    olor: "0x333333"
                    height: "0.15"
                    width: "0.9"
            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0"
              children:
                - type: label
                  text: "CV:"
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.7"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"
            - type: view
              viewTag: cvBox
              style:
                width: "0.9"
                height: "0.1"
                marginLeft: "0.05"
                marginTop: "0.03"
              children:
                - type: image
                  viewTag: cvTag
                  path: null.png
                  path=func: =.builtIn.utils.prepareDocToPath
                  dataKey: FacilityProviderInfo.formData.providerInfo.cv
                  style:
                    left: "0"
                    top: "0"
                    height: "0.1"
                    width: "0.2"
    # - type: popUp
    #   viewTag: confirmView
    #   style:
    #     top: 0
    #     width: "1"
    #     height: "1"
    #     backgroundColor: "#00000040"
    #     zIndex: 1000
    #   children:
    #     - type: view
    #       style:
    #         width: "0.72"
    #         height: "0.22"
    #         margin: "auto"
    #         marginTop: "0.23"
    #         borderRadius: "10px"
    #         backgroundColor: "#F8F8F8"
    #         filter: brightness(0.95)
    #       children:
    #         - type: view
    #           style:
    #             width: "0.72"
    #             height: "0.17"
    #             borderRadius: "10px 10px 0 0"
    #             padding: "1px"
    #           children:
    #             - type: label
    #               text: "Send  Link To"
    #               style:
    #                 margin: "auto"
    #                 marginTop: "0.02"
    #                 textAlign:
    #                   x: "center"
    #
    #                 color: "#4B4B4B"
    #                 fontWeight: "500"
    #                 fontSize: "2vh"
    #             - type: view
    #               style:
    #                 width: "0.64"
    #                 height: "0.09"
    #                 margin: "auto"
    #                 marginTop: "0.01"
    #               children:
    #                 - type: image
    #                   path=func: .builtIn.utils.prepareDocToPath
    #                   dataKey: formData.providerInfo.avatar
    #                   path: providerImage.svg
    #                   style:
    #                     width: "6vh"
    #                     height: "7vh"
    #                     marginTop: "0.01"
    #                     display: "inline-block"
    #                 - type: view
    #                   style:
    #                     width: "0.51"
    #                     height: "0.07"
    #                     marginTop: "0.01"
    #                     display: "inline-block"
    #                     left: "1vh"
    #                   children:
    #                     - type: label
    #                       dataKey: formData.providerInfo.fullName
    #                       style:
    #
    #                         color: "#4B4B4B"
    #                         fontWeight: "500"
    #                         fontSize: "1.5vh"
    #                     - type: label
    #                       dataKey: formData.providerInfo.specialty.0.specialty
    #                       style:
    #
    #                         color: "#4B4B4B"
    #                         fontWeight: "500"
    #                         fontSize: "1.5vh"

    #         - type: view
    #           style:
    #             width: "0.72"
    #             height: "0.05"
    #             borderRadius: "0 0 10px 10px"
    #             borderTop: "1px solid #3f3f3f"
    #             borderWidth: "1px"
    #           children:
    #             - type: button
    #               text: Cancel
    #               style:
    #                 color: "#007aff"
    #                 fontSize: "1.7vh"
    #
    #                 width: "0.36"
    #                 height: "0.05"
    #                 borderRight: "1px solid #3f3f3f"
    #                 border: none
    #                 fontWeight: 500
    #                 padding: "1px"
    #                 borderRadius: "0 0 0 10px"
    #               onClick:
    #                 - actionType: popUpDismiss
    #                   popUpView: confirmView
    #             - type: button
    #               text: Confirm
    #               style:
    #                 color: "#007aff"
    #                 fontSize: "1.7vh"
    #
    #                 width: "0.36"
    #                 height: "0.05"
    #                 fontWeight: 500
    #                 border: none
    #                 borderLeft: "1px solid #3f3f3f"
    #                 borderLeftWidth: "1px"
    #                 borderRadius: "0 0 10px 0"
    #               onClick:
    #                 - actionType: evalObject
    #                   object: ..save
    #                 - actionType: popUpDismiss
    #                   popUpView: confirmView
    #                 - actionType: popUp
    #                   popUpView: successView
    #                 - goto: MyConnection
    - type: popUp
      viewTag: successView
      style:
        top: 0
        width: "1"
        height: "1"
        backgroundColor: "#00000040"
        zIndex: 1000
      onClick:
        - actionType: popUpDismiss
          popUpView: successView
      children:
        - type: view
          style:
            width: "0.56"
            height: "0.18"
            margin: "auto"
            marginTop: "0.25"
            borderRadius: "10px"
            backgroundColor: "#F8F8F8"
            filter: brightness(0.95)
            textAlign:
              x: center
          children:
            - type: image
              path: deleteTrue.svg
              style:
                height: "0.06"
                marginTop: "0.04"
            - type: label
              text: "Successfully!"
              style:
                color: "#171725"

                fontSize: "1.8vh"
                marginTop: "0.02"

    - .SuccessfulOneLine:
      style:
        zIndex: 1000
      message: Send Successfully!
      viewTag: finalView

    - .TipsMultiLine:
      style:
        zIndex: "100"
      viewTag: phoneInvited
      message: "The phone number is already invited or invites you"
      onClick:
        - actionType: evalObject
          object:
            # to ensure old data can not influence new data
            - ..apiRequest.checkConnection.getResp.edge@: []
        - actionType: popUpDismiss
          popUpView: phoneInvited
    - .ProgressCheckView:
      message: "loading ..."
      viewTag: uploading

    - type: popUp
      viewTag: inviteView
      message: "Send Invite Link To"
      style:
        top: "0"
        left: "0"
        width: "1"
        height: "1"
        backgroundColor: "0x00000066"
        zIndex: "150"
        textAlign:
          y: center
      children:
        - type: view
          style:
            width: "0.72"
            marginLeft: "0.14"
            backgroundColor: "0xE6E6E6"
            borderRadius: "14px"
          children:
            - type: label
              text: ___.message
              style:
                width: "0.616"
                marginLeft: "0.052"
                marginTop: "0.029"
                fontWeight: "600"
                fontSize: .Nfont.h16

                color: "0x4B4B4B"
                textAlign:
                  x: center
            - type: view
              style:
                marginTop: "0.02"
                textAlign:
                  x: center
                width: "0.72"
              children:
                - type: view
                  children:
                    - type: image
                      path: providerImage.svg
                      path=func: .builtIn.utils.prepareDocToPath
                      dataKey: formData.providerInfo.avatar
                      style:
                        height: "0.06"
                        # width: "6vh"
                        backgroundColor: "0xFFFFFF"
                        verticalAlign: middle
                        display: "inline-block"
                        borderRadius: "5"
                        textAlign:
                          x: center
                    - type: view
                      style:
                        display: "inline-block"
                        verticalAlign: middle
                        marginLeft: "0.037"
                        width: "0.388"
                        textAlign:
                          x: left
                      children:
                        - type: label
                          dataKey: formData.providerTitle
                          style:
                            fontSize: .Nfont.h1
                            color: "0x333333"
                            fontWeight: "600"
                            width: "0.388"
                            overflow: hidden
                            text-overflow: ellipsis
                            whiteSpace: nowrap
                        - type: label
                          dataKey: formData.providerInfo.selectedSpecialty.0
                          style:
                            fontSize: .Nfont.h12
                            maxWidth: "0.43"
                            marginTop: "0"
                            zIndex: "1000"
                            color: "0x666666"
                            fontWeight: "500"
                            width: "0.388"
                            overflow: hidden
                            text-overflow: ellipsis
                            whiteSpace: nowrap
            - type: view
              style:
                height: "0.02"
                border:
                  style: 2
                  color: "0x919192"
                borderWidth: "1"
                width: "0.72"
            - type: view
              style:
                width: "0.72"
              children:
                - type: button
                  text: "Cancel"
                  style:
                    color: "0x007AFF"
                    backgroundColor: "0xE6E6E6"
                    display: inline-block
                    width: "0.359"
                    borderRadius: "0 0 0 14px"
                    fontSize: .Nfont.h1
                    height: "0.054"
                    border:
                      style: "1"
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: inviteView
                - type: view
                  style:
                    width: "0.002"
                    backgroundColor: "0x919192"
                    display: inline-block
                    height: "0.054"
                    zIndex: "50"
                - type: button
                  text: "Confirm"
                  style:
                    color: "0x007AFF"
                    fontWeight: "700"
                    backgroundColor: "0xE6E6E6"
                    display: inline-block
                    width: "0.359"
                    fontSize: .Nfont.h1
                    borderRadius: "0 0 14px 0"
                    height: "0.054"
                    border:
                      style: "1"
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: inviteView
                    - actionType: popUp
                      popUpView: uploading
                    - actionType: evalObject
                      object:
                        - =.FacilityProviderInfo.apiRequest.invite.edgeAPI.store: ""
                        # - =.builtIn.ecos.shareDoc:
                        #     dataIn:
                        #       sourceDoc: =..formData.patientProfile
                        #       targetEdgeID: =.FacilityProviderInfo.apiRequest.invite.edgeRes.edge.refid
                        #                        - =.builtIn.FCM.getAPPID:
                        #                            dataIn:
                        #                              appName: =.TargetApp.provider
                        #                            dataOut: FirebaseToken.edge.evid
                        #                        - actionType: evalObject
                        #                          object: .Global.updateJwt
                        #                        - =.Global.jwt.edgeAPI.store: ""
                        - ..apiRequest.sendNotification.document.fid@: =.FirebaseToken.edge.evid
                        - ..apiRequest.sendNotification.document.eid@: =..apiRequest.invite.edgeRes.edge.id
                        - =..apiRequest.sendNotification.docAPI.store: ""
                    #                        - =.builtIn.FCM.getAPPID:
                    #                            dataIn:
                    #                              appName: =.AppName
                    #                            dataOut: FirebaseToken.edge.evid
                    #                        - actionType: evalObject
                    #                          object: .Global.updateJwt
                    #                        - =.Global.jwt.edgeAPI.store: ""
                    - actionType: popUpDismiss
                      popUpView: uploading
                    - actionType: popUp
                      popUpView: finalView
