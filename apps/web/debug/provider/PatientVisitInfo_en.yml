PatientVisitInfo:
  title: "Patient Info"
  init:
    - .SignInCheck
    - ..formData.patientInfo@: =.Global.middleInformation.PatientVisitInfo
    - ..listData.get
  formData:
    patientInfo: ""
  listData:
    visitHistory:
      edge: ""
    get:
      .EdgeAPI.get: ""
      api: re
      dataKey: listData.visitHistory
      type: .EdgeType.WaitingRoom
      id: ..formData.patientInfo.bsig
      sCondition: "tage!=0 AND subtype in (0x30006,0x20006,0x30064)"
      xfname: "evid | bvid"
      obfname: "ctime"
      maxcount: "20"
      _nonce: .Global._nonce
  components:
    - .BaseHeader:
    - .HeaderLeftButton:
    - type: view
      style:
        width: "1"
        top: "0.1"
        height: "0.25"
        # backgroundColor: "0x000000cc"
      children:
        - type: button
          text=func: .builtIn.string.getFirstChar
          dataKey: formData.patientInfo.fullName
          style:
            width: "0.17"
            height: "0.075"
            left: "0.4"
            textAlign:
              x: center
              y: center
            fontSize: "22"
            border:
              style: "1"
            margin: "auto"
            top: "0.02"
            backgroundColor: "#0088e2"
            color: "0xffffff"
        - type: label
          dataKey: formData.patientInfo.fullName
          style:
            width: "1"
            height: "0.05"
            top: "0.1"
            left: "0"
            textAlign:
              x: center
            fontSize: "22"
        - type: view
          style:
            width: "1"
            left: "0"
            height: "0.1"
            top: "0.15"
          children:
            - type: image
              path: mailIcon.png
              style:
                left: "0.3"
                width: "0.15"
            - type: label
              text: AiTmail
              style:
                left: "0.25"
                width: "0.25"
                top: "0.07"
                fontSize: .Nfont.h12
                fontWeight: "100"
                textAlign:
                  x: center
            - type: image
              path: telIcon.svg
              style:
                left: "0.5"
                width: "0.15"
                top: "0"
            - type: label
              text: AiTmeet
              style:
                left: "0.45"
                width: "0.25"
                top: "0.07"
                fontWeight: "100"
                fontSize: .Nfont.h12

                textAlign:
                  x: center
        - type: image
          path: qr.png
          style:
            top: "0.02"
            left: "0.85"
            width: "0.09"
    - type: view
      style:
        width: "1"
        left: "0"
        top: "0.35"
        height: "0.65"
      children:
        - type: view
          style:
            width: "1"
            left: "0"
            height: "0.05"
            top: "0"
          children:
            - type: label
              text: "        Visit History"
              style:
                width: "1"
                left: "0"
                paddingLeft: "20px"
                boxSizing: "border-box"
                top: "0"
                height: "0.05"
                backgroundColor: "#f0f0f0"
                textAlign:
                  y: center
                fontSize: "15"
        - type: list
          iteratorVar: itemObject
          listObject: ..listData.visitHistory.edge
          contentType: listObject
          style:
            top: "0.05"
            left: "0"
            width: "1"
            height: "0.55"
            overflow: scroll
          children:
            - type: listItem
              itemObject: ""
              style:
                width: "0.9"
                height: "0.08"
                left: "0.05"
                borderBottom: " 1px solid #f0f0f0"
              children:
                - type: label
                  dataKey: itemObject.name.visitReason
                  style:
                    width: "0.5"
                    height: "0.045"
                    top: "0"
                    left: "0"
                    fontSize: .Nfont.h16
                    textAlign:
                      y: center
                - type: label
                  text=func: .builtIn.string.formatUnixtime_en
                  dataKey: itemObject.stime
                  style:
                    width: "0.5"
                    height: "0.02"
                    top: "0.045"
                    left: "0"
                    fontSize: "10"
                    textAlign:
                      y: center
                - type: label
                  dataKey: itemObject.name.visitType
                  style:
                    width: "0.3"
                    height: "0.03"
                    top: "0.025"
                    left: "0.6"
                    fontSize: "10"
                    color: itemObject.name.fontColor
                    textAlign:
                      y: center
