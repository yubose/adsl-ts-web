FluVaccinationConsentFormReviewPage1:
  title: Flu Vaccination Consent Form
  pageNumber:
  init:
    - .SignInCheck
    - =.builtIn.date.currentDateTime:
        dataIn:
        dataOut: Global.formData.auditLog.startTime
    - if:
        - =.Global.roomInfo.edge.id
        - =..apiRequest.fluVaccinationConsentForm.docAPI.get: ""
        - continue
    - .FluVaccinationConsentFormReviewPage1.formData@: =..apiRequest.fluVaccinationConsentForm.docRes.doc.0

    - actionType: evalObject
      object:
        # 下载pdf的样式控制
        - .Global.formData.downloadPDF.titleName@: "Flu Vaccination Consent Form"
        - .Global.formData.downloadPDF.scaleX@: 1
        - .Global.formData.downloadPDF.scaleY@: 1
        - .Global.formData.downloadPDF.originX@: 0
        - .Global.formData.downloadPDF.originY@: 0
    # 记录下载行为
    - .Global.formData.auditLog.actionTypeCode@: =.ActionTypeCode.download
    - .Global.formData.auditLog.recordTypeCode@: 176641
  formData: ""
  apiRequest:
    fluVaccinationConsentForm:
      docRes: ""
      docReq:
        id: .Global.roomInfo.edge.id
        type: .DocType.FluVaccinationConsent
        xfname: eid
      docAPI:
        get:
          api: rd
          dataIn: FluVaccinationConsentFormReviewPage1.apiRequest.fluVaccinationConsentForm.docReq
          dataOut: FluVaccinationConsentFormReviewPage1.apiRequest.fluVaccinationConsentForm.docRes

  formDataTemp:
    AllergicEggsTemp:
      - key: isAllergicEggs
        value: "Yes"
      - key: isAllergicEggs
        value: "No"
    AllergicImmunizationTemp:
      - key: isAllergicImmunization
        value: "Yes"
      - key: isAllergicImmunization
        value: "No"
    AllergicMedicationTemp:
      - key: isAllergicMedication
        value: "Yes"
      - key: isAllergicMedication
        value: "No"
    PregnantTemp:
      - key: isPregnant
        value: "Yes"
      - key: isPregnant
        value: "No"
    LocationTemp:
      - key: location
        value: "Right Deltoid"
      - key: location
        value: "Left Deltoid"

  components:
    - .BasePublicHeader:
        children:
          - .BasePublicHeaderLeft:
            leftClick:
              - actionType: evalObject
                object:
                  - =.builtIn.utils.createAuditLog:
                      dataIn:
                        date: =.Global.formData.auditLog.startTime
                        actionTypeCode: .ActionTypeCode.view
                        recordTypeCode: 176641
                        eid: =.Global.formData.currentFacility.relationEdge.id
                        user: =.Global.MyProfile.name.data.fullName
                        userId: =.Global.currentUser.vertex.id
                        targetUserId: =.Global.formData.auditLog.patientId
                        targetUser: =.Global.formData.auditLog.patientName
                        accessPort: provider
                      dataOut: Global.formData.auditLog.result
              - actionType: builtIn
                funcName: goBack
                reload: true
          - .BasePublicHeaderTitle:
          - .BasePublicHeaderMenu:
    - type: scrollView
      viewTag: mainView
      style:
        ..style.scrollBox:
      children:
        - type: view
          style:
            ..style.publicBox:
          children:
            - type: view
              style:
                ..style.facilityInfoBox:
              children:
                - type: image
                  path: office-building.svg
                  path=func: =.builtIn.utils.prepareDocToPath
                  dataKey: formData.name.data.facilityInfo.facilityAvatarID
                  style:
                    ..style.avatar:
                - type: view
                  style:
                    ..style.infoBox:
                  children:
                    - type: label
                      dataKey: formData.name.data.facilityInfo.facilityName
                      style:
                        ..style.facilityTitle:
                    - type: label
                      dataKey: formData.name.data.facilityInfo.location
                      style:
                        ..style.facilityLocation:
            - type: view
              style:
                ..style.facilityOtherBox:
              children:
                - .DocPublicStyleOneBox:
                  children:
                    - .DocPublicStyleOneLeft:
                      text: Email
                    - .DocPublicStyleOneRight:
                      dataKey: formData.name.data.facilityInfo.email
                - .DocPublicStyleOneBox:
                  children:
                    - .DocPublicStyleOneLeft:
                      text: Website
                    - .DocPublicStyleOneRight:
                      dataKey: formData.name.data.facilityInfo.website
                - .DocPublicStyleOneBox:
                  children:
                    - .DocPublicStyleOneLeft:
                      text: "Main #"
                    - .DocPublicStyleOneRight:
                      dataKey: formData.name.data.facilityInfo.main
                - .DocPublicStyleOneBox:
                  children:
                    - .DocPublicStyleOneLeft:
                      text: "Fax #"
                    - .DocPublicStyleOneRight:
                      dataKey: formData.name.data.facilityInfo.fax
        - type: view
          style:
            ..style.publicBox:
          children:
            - type: view
              style:
                ..style.partitionBox:
              children:
                - type: label
                  text: Patient Part
                  dataKey:
                  style:
                    ..style.partitionLabel:
            - type: view
              style:
                ..style.facilityOtherBox:
              children:
                - type: view
                  style:
                    ..style.blockBox:
                    marginTop: "0.0270935"
                  children:
                    - type: label
                      text: Exam Date
                      dataKey:
                      style:
                        ..style.blockBoxTitle:
                    - type: label
                      text=func: .builtIn.string.formatUnixtime_en
                      dataKey: formData.name.data.patientInfo.examDate
                      style:
                        ..style.timeLabel:
                - type: view
                  style:
                    ..style.blockBox:
                  children:
                    - type: label
                      text: Patient Name
                      dataKey:
                      style:
                        ..style.blockBoxTitle:
                    - type: label
                      dataKey: formData.name.data.patientInfo.patientName
                      style:
                        ..style.inlineLabel:
                - type: view
                  style:
                    ..style.blockBox:
                  children:
                    - type: label
                      text: Date of Birth
                      dataKey:
                      style:
                        ..style.blockBoxTitle:
                    - type: label
                      dataKey: formData.name.data.patientInfo.dob
                      style:
                        ..style.inlineLabel:

                - type: view
                  style:
                    ..style.blockBox:
                  children:
                    - type: label
                      text: "Phone #"
                      dataKey:
                      style:
                        ..style.blockBoxTitle:
                    - type: label
                      dataKey: formData.name.data.patientInfo.phone
                      style:
                        ..style.inlineLabel:
                - type: view
                  style:
                    ..style.blockBox:
                  children:
                    - type: label
                      text: "Email"
                      dataKey:
                      style:
                        ..style.blockBoxTitle:
                    - type: label
                      dataKey: formData.name.data.patientInfo.email
                      style:
                        ..style.inlineLabel:

                - type: view
                  style:
                    ..style.blockBox:
                  children:
                    - type: label
                      text: Patient Address
                      dataKey:
                      style:
                        ..style.blockBoxTitle:
                        display: "block"
                    - type: label
                      text: "No content"
                      dataKey: formData.name.data.patientInfo.address.fullAddress
                      style:
                        ..style.blocklabel:
                        display: "block"
                - type: view
                  style:
                    ..style.blockBox:
                  children:
                    - type: label
                      text: Company Name/Referred by
                      dataKey:
                      style:
                        ..style.blockBoxTitle:
                        display: "block"
                        width: "0.92"
                    - type: label
                      text: "No content"
                      dataKey: formData.name.data.patientInfo.companyName
                      style:
                        ..style.blocklabel:
                        display: "block"

        - .DocPublicLine:
        - type: view
          style:
            ..style.publicBox:
            marginLeft: "0.04"
          children:
            - type: label
              text: HAVE YOU EVER HAD ANY OF THE FOLLOWING?
              dataKey:
              style:
                ..style.secondLabel:
            - type: label
              text: 1) Allergic reaction to chicken eggs?
              style:
                ..style.questionLabel:
            - type: list
              contentType: listObject
              listObject: ..formDataTemp.AllergicEggsTemp
              iteratorVar: itemObject
              androidGrid: true
              viewTag: allergicEggsTag
              style:
                ..style.selectList:
              children:
                - type: listItem
                  itemObject:
                  style:
                    ..style.selectListItem:
                  children:
                    - type: image
                      path:
                        ..event.allergicEggsRaidoPath:
                      style:
                        ..style.itemImg:

                    - type: label
                      text:
                      dataKey: itemObject.value
                      style:
                        ..style.itemValue:
            - type: label
              text: 2) Allergic reaction to flu shot or any other type of immunization shot?
              style:
                ..style.questionLabel:
            - type: list
              contentType: listObject
              listObject: ..formDataTemp.AllergicImmunizationTemp
              iteratorVar: itemObject
              androidGrid: true
              viewTag: allergicImmunizationTag
              style:
                ..style.selectList:
              children:
                - type: listItem
                  itemObject:
                  style:
                    ..style.selectListItem:
                  children:
                    - type: image
                      path:
                        ..event.immunizationRaidoPath:
                      style:
                        ..style.itemImg:

                    - type: label
                      text:
                      dataKey: itemObject.value
                      style:
                        ..style.itemValue:
            - type: label
              text: 3) Allergic reaction to any medication or drug?
              style:
                ..style.questionLabel:
            - type: list
              contentType: listObject
              listObject: ..formDataTemp.AllergicMedicationTemp
              iteratorVar: itemObject
              androidGrid: true
              viewTag: allergicMedicationTag
              style:
                ..style.selectList:
              children:
                - type: listItem
                  itemObject:
                  style:
                    ..style.selectListItem:
                  children:
                    - type: image
                      path:
                        ..event.medicationRaidoPath:
                      style:
                        ..style.itemImg:

                    - type: label
                      text:
                      dataKey: itemObject.value
                      style:
                        ..style.itemValue:
            - type: label
              text: 4) Are you or could you be pregnant?
              style:
                ..style.questionLabel:
            - type: list
              contentType: listObject
              listObject: ..formDataTemp.PregnantTemp
              iteratorVar: itemObject
              androidGrid: true
              viewTag: pregnantTag
              style:
                ..style.selectList:
              children:
                - type: listItem
                  itemObject:
                  style:
                    ..style.selectListItem:
                  children:
                    - type: image
                      path:
                        ..event.pregnantRaidoPath:
                      style:
                        ..style.itemImg:
                    - type: label
                      text:
                      dataKey: itemObject.value
                      style:
                        ..style.itemValue:
            - type: view
              viewTag: defaultTag
              style:
                ..style.blockBox:
                marginTop: "0.0246305"
              children:
                - type: image
                  path:
                    ..event.checkBoxPath:
                  style:
                    ..style.img:
                - type: label
                  textBoard:
                    - text: "I certify that the above answers are true and correct to the best of my knowledge. I voluntarily request a flu vaccination from "
                    - text: "Golden West Medical Center"
                      dataKey: formData.name.data.facilityInfo.facilityName
                    - text: ". I understand that there is a remote possibility of adverse reaction or other complications of the flu vaccination. I voluntarily agree to assume any risks associated with the administration of the flu vaccine. I hereby waive and release "
                    - text: "Golden West Medical Center"
                      dataKey: formData.name.data.facilityInfo.facilityName
                    - text: " from any and all liabilities sustained by me while participating in the flu vaccination program."
                  dataKey:
                  style:
                    ..style.setLabel:
        - type: view
          style:
            ..style.publicBox:
          children:
            - type: view
              style:
                ..style.partitionBox:
                marginTop: "0.065270"
              children:
                - type: label
                  text: Admin Part
                  dataKey:
                  style:
                    ..style.partitionLabel:
            - type: view
              style:
                ..style.facilityOtherBox:
              children:
                - type: view
                  style:
                    ..style.blockBox:
                    marginTop: "0.0270935"
                  children:
                    - type: label
                      text: "LOT #"
                      style:
                        ..style.blockBoxTitle:
                    - type: label
                      text: "No content"
                      dataKey: formData.name.data.adminInfo.lot
                      style:
                        ..style.inlineLabel:
                - type: view
                  style:
                    ..style.blockBox:
                  children:
                    - type: label
                      text: "Expiration"
                      dataKey:
                      style:
                        ..style.blockBoxTitle:
                    - type: label
                      text: "No content"
                      dataKey: formData.name.data.adminInfo.expiration
                      style:
                        ..style.inlineLabel:
                - type: view
                  style:
                    ..style.blockBox:
                  children:
                    - type: label
                      text: "Nurse"
                      dataKey:
                      style:
                        ..style.blockBoxTitle:
                    - type: label
                      text: "No content"
                      dataKey: formData.name.data.adminInfo.nurse
                      style:
                        ..style.inlineLabel:
                - type: view
                  style:
                    ..style.blockBox:
                    marginTop: "0.02709359"
                  children:
                    - type: label
                      text: "Location"
                      dataKey:
                      style:
                        ..style.blockBoxTitle:
                        display: "block"
                        fontWeight: "600"
                - type: list
                  contentType: listObject
                  listObject: ..formDataTemp.LocationTemp
                  iteratorVar: itemObject
                  androidGrid: true
                  viewTag: locationTag
                  style:
                    ..style.selectList:
                  children:
                    - type: listItem
                      itemObject:
                      style:
                        ..style.selectListItem:
                        width: "0.33066666"
                      children:
                        - type: image
                          path:
                            ..event.locationRaidoPath:
                          style:
                            ..style.itemImg:
                        - type: label
                          text:
                          dataKey: itemObject.value
                          style:
                            ..style.itemValue:
                - type: view
                  style:
                    ..style.blockBox:
                    marginTop: "0.024630"
                  children:
                    - type: label
                      text: "MA`s Signature"
                      dataKey:
                      style:
                        ..style.blockBoxTitle:
                    - type: label
                      text: "No content"
                      dataKey: formData.name.data.adminInfo.maSignature
                      style:
                        ..style.inlineLabel:
        - type: view
          style:
            marginTop: "0.03"
    - .HeaderPopUpMenu:
  event:
    allergicEggsRaidoPath:
      emit:
        dataKey:
          var: itemObject
        actions:
          - if:
              - =.builtIn.string.equal:
                  dataIn:
                    string1: =..formData.name.data.status.isAllergicEggs
                    string2: $var.value
              - radioOn.svg
              - radioGray.svg

    immunizationRaidoPath:
      emit:
        dataKey:
          var: itemObject
        actions:
          - if:
              - =.builtIn.string.equal:
                  dataIn:
                    string1: =..formData.name.data.status.isAllergicImmunization
                    string2: $var.value
              - radioOn.svg
              - radioGray.svg

    medicationRaidoPath:
      emit:
        dataKey:
          var: itemObject
        actions:
          - if:
              - =.builtIn.string.equal:
                  dataIn:
                    string1: =..formData.name.data.status.isAllergicMedication
                    string2: $var.value
              - radioOn.svg
              - radioGray.svg

    pregnantRaidoPath:
      emit:
        dataKey:
          var: itemObject
        actions:
          - if:
              - =.builtIn.string.equal:
                  dataIn:
                    string1: =..formData.name.data.status.isPregnant
                    string2: $var.value
              - radioOn.svg
              - radioGray.svg
    checkBoxPath:
      emit:
        actions:
          - if:
              - =..formData.name.data.status.isCertify
              - selectOnBlue.svg
              - selectOffBlue.svg

    locationRaidoPath:
      emit:
        dataKey:
          var: itemObject
        actions:
          - if:
              - =.builtIn.string.equal:
                  dataIn:
                    string1: =..formData.name.data.adminInfo.location
                    string2: $var.value
              - radioOn.svg
              - radioGray.svg

  style:
    scrollBox:
      width: "1"
      height: "0.94"
      boxSizing: "border-box"
      paddingBottom: "0.03"
    publicBox:
      width: "auto"
      height: "auto"
      overflow: hidden
    facilityInfoBox:
      marginLeft: "0.04"
      marginTop: "0.0246"
      height: "auto"
      width: "0.92"
    avatar:
      verticalAlign: middle
      display: "inline-block"
      height: "0.0578"
      width: "5.78vh"
    infoBox:
      verticalAlign: middle
      marginLeft: "0.08"
      display: "inline-block"
      height: "auto"
      width: "0.71"
      overflow: hidden
    facilityTitle:
      width: "0.71"
      height: "auto"
      fontSize: .Nfont.h20
      fontWeight: "600"

      verticalAlign: middle
      wordWrap: break-word
    facilityLocation:
      marginTop: "0.0110"
      width: "0.71"
      height: "auto"
      fontSize: .Nfont.h14
      color: "0x666666"

      verticalAlign: middle
      wordWrap: break-word
    facilityOtherBox:
      marginLeft: "0.04"
      marginTop: "0.00738"
      width: "0.92"
      height: "auto"
      overflow: hidden
    partitionBox:
      marginTop: "0.0270935"
      backgroundColor: "#e6effc"
      height: "auto"
      width: "1"
      overflow: hidden
    partitionLabel:
      marginLeft: "0.04"
      color: "#2988e6"
      lineHeight: "3.94088vh"
      fontWeight: "700"
    blockBox:
      marginTop: "0.01477"
      width: "auto"
      height: "auto"
      overflow: hidden
    blockBoxTitle:
      display: "inline-block"
      width: "0.42"
      height: "auto"
      color: "#666666"
      fontSize: .Nfont.h12
    timeLabel:
      display: "inline-block"
      width: "0.4986"
      height: "auto"
      color: "#333333"
      fontSize: .Nfont.h14
      boxSizing: border-box
      fontWeight: "600"
      textAlign:
        x: right
    blockInputInline:
      height: "0.0369"
      width: "0.92"
      boxSizing: border-box
      border:
        style: 3
      borderRadius: "3"
      borderWidth: "1.5"
      borderColor: "0xdedede"

      fontSize: .Nfont.h14
      color: "0x333333"
      textIndent: "12px"
      verticalAlign: "middle"
      display: "inline-block"
    secondLabel:
      marginTop: "0.02709359"
      fontSize: .Nfont.h14
      color: "#333333"
      fontWeight: "600"
    selectList:
      width: "0.92"
      height: "auto"
      margin: "0"
      marginTop: "0.017241"
    selectListItem:
      display: "inline-block"
      width: "0.25333"
      height: "auto"
    itemImg:
      display: "inline-block"
      height: "0.02093"
      width: "0.0442"
      verticalAlign: middle
    itemValue:
      marginLeft: "0.02133"
      display: "inline-block"
      fontSize: .Nfont.h14
      color: "#333333"
      width: "auto"
      height: "auto"
      verticalAlign: middle
    questionLabel:
      marginTop: "0.0233990"
      width: "0.92"
      height: "auto"
      color: "#333333"
      fontWeight: "600"
      lineHeight: "2.58vh"
    img:
      display: "inline-block"
      height: "0.01970"
    setLabel:
      display: "inline-block"
      marginLeft: "0.026666"
      height: "auto"
      width: "0.8506666"
      fontSize: .Nfont.h14
      color: "#333333"
      lineHeight: "2.58vh"
    btnBox:
      width: "1"
      height: "0.0972"
      boxSizing: "border-box"
      overflow: "scroll"
      backgroundColor: "#ffffff"
      boxShadow: "1px 1px 4px 1px #dededf"
      textAlign:
        x: center
    btn:
      marginTop: "0.0123"
      height: "0.0443"
      width: "0.84"
      border:
        style: 1
      borderRadius: "5"
      backgroundColor: "#2988e6"
      color: "#ffffff"
      fontSize: .Nfont.h14
      boxSizing: border-box
      fontWeight: "600"
      textAlign:
        x: center
    inlineLabel:
      display: "inline-block"
      width: "0.4986"
      height: "auto"
      boxSizing: border-box
      color: "#333333"
      fontSize: .Nfont.h14
      fontWeight: "600"
      textAlign:
        x: right
      wordBreak: break-word
    blocklabel:
      display: "inline-block"
      height: "auto"
      boxSizing: border-box
      color: "#333333"
      fontSize: .Nfont.h14
      fontWeight: "600"
      width: "0.92"
      marginTop: "0.01"
      textAlign:
        x: left
      wordBreak: break-word
      lineHeight: "2.58vh"
