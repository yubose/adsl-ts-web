InitEvalReportShared:
  title: Initial Evaluation Report
  pageNumber:
  init: #Page initialization
    - .SignInCheck
    - =.builtIn.date.currentDateTime:
        dataIn:
        dataOut: Global.formData.auditLog.startTime
    - ..formData@: =.Global.Note

    # 记录下载行为
    - .Global.formData.auditLog.actionTypeCode@: =.ActionTypeCode.download
    - .Global.formData.auditLog.recordTypeCode@: =.DocType.InitEvalReport

    # 判断是否私有只读
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =.Global.Note.tage
              string2: 1
        - actionType: evalObject
          object:
            - if:
                - =.builtIn.string.equal:
                    dataIn:
                      string1: =.Global.Note.name.data.classTag.name
                      string2: "Admin"
                - actionType: evalObject
                  object:
                    # 显示重置滚动条高度按钮
                    - ..formDataTemp.scrollHeight@: "0.945"
                    # 显示分享按钮
                    - ..formDataTemp.displayBtn@: "none"
                - actionType: evalObject
                  object:
                    # 取回当前文档信息
                    - ..apiRequest.initialEvaluationReport.docReq@: =.Global.Note
                    # 显示重置滚动条高度按钮
                    - ..formDataTemp.scrollHeight@: "0.84729"
                    # 显示分享按钮
                    - ..formDataTemp.displayBtn@: "block"
        - actionType: evalObject
          object:
            # 显示重置滚动条高度按钮
            - ..formDataTemp.scrollHeight@: "0.945"
            # 显示分享按钮
            - ..formDataTemp.displayBtn@: "none"

    - actionType: evalObject
      object:
        .Global._nonce@:
          =.builtIn.math.random: ""

    - actionType: evalObject
      object:
        - =.builtIn.array.getListLength:
            dataIn:
              object: =.Global.formData.providerDoc.diagnosesDoc.name.data.diagnosis.descriptiveList
            dataOut: InitEvalReportShared.formDataTemp.desListLength

    - actionType: evalObject
      object:
        - if:
            - =.builtIn.string.equal:
                dataIn:
                  string1: =..formDataTemp.desListLength
                  string2: "0"
            - actionType: evalObject
              object:
                - ..formDataTemp.desListFlag@: "block"
                - ..formDataTemp.listFlag@: "none"
            - actionType: evalObject
              object:
                - ..formDataTemp.desListFlag@: "none"
                - ..formDataTemp.listFlag@: "block"

    - actionType: evalObject
      object:
        - if:
            # 根据Liz要求，所有release后的，不管是否让patient看，都可以下载pdf
            - =.builtIn.number.typeIsValid:
                dataIn:
                  docType: =.Global.Note.type
                  localArr: [1]
                  binaryArr: [1]
            - continue
            - ..formDataTemp.downFlag@: "none"
        # 下载pdf的样式控制
        - .Global.formData.downloadPDF.titleName@: "Initial Evaluation Report"
        - .Global.formData.downloadPDF.scaleX@: 1
        - .Global.formData.downloadPDF.scaleY@: 1
        - .Global.formData.downloadPDF.originX@: 0
        - .Global.formData.downloadPDF.originY@: 0

    # 判断签名是否存在
    - actionType: evalObject
      object:
        - if:
            - =.InitEvalReportShared.formData.name.data.signatureId
            - ..formData.displaySign@: "block"
            - ..formData.displaySign@: "none"

  formData:
    # 控制签名是否显示
    displaySign: "none"

  formDataTemp: #Input data temp here, datatemp should not mix with formData
    downFlag: "inline-block"
    desListLength: ""
    desListFlag: "none"
    listFlag: "none"
    # 控制当前滚动条高度
    scrollHeight: "0.84729"
    # 是否显示分享按钮
    displayBtn: "none"
  apiRequest: #Input data request here
    initialEvaluationReport:
      docResp: ""
      docReq: ""
      docAPI:
        store:
          api: cd
          dataIn: InitEvalReportShared.apiRequest.initialEvaluationReport.docReq
          dataOut: InitEvalReportShared.apiRequest.initialEvaluationReport.docResp

  components:
    - .BasePublicHeader:
      children:
        - .BasePublicHeaderLeft:
          leftClick:
            - actionType: evalObject
              object:
                - =.builtIn.utils.createAuditLog:
                    dataIn:
                      date: =.Global.formData.auditLog.startTime
                      actionTypeCode: .ActionTypeCode.view
                      recordTypeCode: .DocType.InitEvalReport
                      eid: =.Global.formData.currentFacility.relationEdge.i
                      user: =.Global.MyProfile.name.data.fullName
                      userId: =.Global.currentUser.vertex.id
                      targetUserId: =.Global.formData.auditLog.patientId
                      accessPort: provider
                    dataOut: Global.formData.auditLog.result
            - actionType: builtIn
              funcName: goBack
              reload: true
        - .BasePublicHeaderTitle:
        - .BasePublicHeaderMenu:
          style:
            display: ..formDataTemp.downFlag
    - type: scrollView
      viewTag: mainView
      style:
        ..style.scrollBox:
        height: ..formDataTemp.scrollHeight
      children:
        - type: view
          style:
            marginLeft: "0.04"
            marginTop: "0.0246"
            height: "auto"
            width: "0.92"
          children:
            - type: image
              path: office-building.svg
              path=func: .builtIn.utils.prepareDocToPath
              dataKey: formData.name.data.facilityInfo.facilityAvatarID
              style:
                verticalAlign: middle
                display: "inline-block"
                height: "0.0578"
                width: "5.78vh"
            - type: view
              style:
                verticalAlign: middle
                marginLeft: "0.08"
                display: "inline-block"
                height: "auto"
                width: "0.71"
                overflow: hidden
              children:
                - type: label
                  dataKey: formData.name.data.facilityInfo.facilityName
                  style:
                    width: "0.71"
                    height: "auto"
                    fontSize: .Nfont.h20
                    fontWeight: "600"

                    verticalAlign: middle
                    wordBreak: "break-word"
                - type: label
                  dataKey: formData.name.data.facilityInfo.address
                  style:
                    marginTop: "0.0110"
                    width: "0.71"
                    height: "auto"
                    fontSize: .Nfont.h14
                    color: "0x666666"

                    verticalAlign: middle
                    wordBreak: "break-word"
        - type: view
          style:
            marginLeft: "0.04"
            marginTop: "0.00738"
            width: "0.92"
            height: "auto"
            overflow: hidden
          children:
            - .DocPublicStyleOneBox:
              children:
                - .DocPublicStyleOneLeft:
                  text: Email
                - .DocPublicStyleOneRight:
                  dataKey: formData.name.data.facilityInfo.email
            - .DocPublicStyleOneBox:
              children:
                - .DocPublicStyleOneLeft:
                  text: Website
                - .DocPublicStyleOneRight:
                  dataKey: formData.name.data.facilityInfo.website
            - .DocPublicStyleOneBox:
              children:
                - .DocPublicStyleOneLeft:
                  text: "Main #"
                - .DocPublicStyleOneRight:
                  dataKey: formData.name.data.facilityInfo.phone
            - .DocPublicStyleOneBox:
              children:
                - .DocPublicStyleOneLeft:
                  text: "Fax #"
                - .DocPublicStyleOneRight:
                  dataKey: formData.name.data.facilityInfo.fax
        - .DocPublicLine:
        - type: view
          style:
            marginLeft: "0.04"
            marginTop: "0.00738"
            width: "0.92"
            height: "auto"
            overflow: hidden
          children:
            - .DocPublicStyleTwoBox:
              children:
                - .DocPublicStyleTwoLeft:
                  text: Exam Date
                - .DocPublicStyleTwoRight:
                  text=func: .builtIn.string.formatUnixtime_en
                  dataKey: formData.name.data.patientInfo.examDate
            - .DocPublicStyleTwoBox:
              children:
                - .DocPublicStyleTwoLeft:
                  text: Patient Name
                - .DocPublicStyleTwoRight:
                  dataKey: formData.name.data.patientInfo.name
            - .DocPublicStyleTwoBox:
              children:
                - .DocPublicStyleTwoLeft:
                  text: Date of Birth
                - .DocPublicStyleTwoRight:
                  dataKey: formData.name.data.patientInfo.dob
            - .DocPublicStyleTwoBox:
              children:
                - .DocPublicStyleTwoLeft:
                  text: Phone
                - .DocPublicStyleTwoRight:
                  dataKey: formData.name.data.patientInfo.phoneNumber
            - .DocPublicStyleTwoBox:
              children:
                - .DocPublicStyleTwoLeft:
                  text: Email
                - .DocPublicStyleTwoRight:
                  dataKey: formData.name.data.patientInfo.email
            - .DocPublicStyleTwoBox:
              children:
                - .DocPublicStyleTwoLeft:
                  text: Patient Address
            - .DocPublicStyleTwoBox:
              children:
                - .DocPublicStyleTwoLeft:
                  dataKey: formData.name.data.patientInfo.address
                  style:
                    height: "auto"
                    width: "0.92"
                    fontSize: .Nfont.h14
                    wordWrap: break-word
                    color: "0x333333"
                    fontWeight: "600"
        - .DocPublicLine:
        - type: label
          text: Referral From
          style:
            marginLeft: "0.04"
            marginTop: "0.0185"
            fontWeight: "600"
            width: "0.92"
            height: "auto"
            color: "0x333333"
            fontSize: .Nfont.h14
        - type: label
          text: "No content"
          dataKey: formData.name.data.referralFrom
          style:
            marginLeft: "0.04"
            marginTop: "0.01"
            padding: "6px 12px"
            height: "auto"
            width: "0.92"
            boxSizing: border-box
            border:
              style: 1
            borderRadius: "4"

            fontSize: .Nfont.h14
            color: "0x333333"
            wordBreak: break-word
            backgroundColor: "0xf4f4f4"
        - type: label
          text: To Whom It May Concern
          style:
            marginLeft: "0.04"
            marginTop: "0.0185"
            fontWeight: "600"
            width: "0.92"
            height: "auto"
            color: "0x333333"
            fontSize: .Nfont.h14
        - type: label
          text: "No content"
          dataKey: formData.name.data.toWhomMayConcern
          style:
            marginLeft: "0.04"
            marginTop: "0.01"
            padding: "6px 12px"
            height: "auto"
            width: "0.92"
            boxSizing: border-box
            border:
              style: 1
            borderRadius: "4"

            fontSize: .Nfont.h14
            color: "0x333333"
            wordBreak: break-word
            backgroundColor: "0xf4f4f4"
        - type: label
          text: Reason For Evaluation
          style:
            marginLeft: "0.04"
            marginTop: "0.0185"
            fontWeight: "600"
            width: "0.92"
            height: "auto"
            color: "0x333333"
            fontSize: .Nfont.h14
        - type: label
          text: "No content"
          dataKey: formData.name.data.reasonForEvaluation
          style:
            marginLeft: "0.04"
            marginTop: "0.01"
            padding: "6px 12px"
            height: "auto"
            width: "0.92"
            boxSizing: border-box
            border:
              style: 1
            borderRadius: "4"

            fontSize: .Nfont.h14
            color: "0x333333"
            wordBreak: break-word
            backgroundColor: "0xf4f4f4"
        - type: label
          text: History of Present Illness
          style:
            marginLeft: "0.04"
            marginTop: "0.0185"
            fontWeight: "600"
            width: "0.92"
            height: "auto"
            color: "0x333333"
            fontSize: .Nfont.h14
        - type: label
          text: "No content"
          dataKey: formData.name.data.historyOfIllness
          style:
            marginLeft: "0.04"
            marginTop: "0.01"
            padding: "6px 12px"
            height: "auto"
            width: "0.92"
            boxSizing: border-box
            border:
              style: 1
            borderRadius: "4"

            fontSize: .Nfont.h14
            color: "0x333333"
            wordBreak: break-word
            backgroundColor: "0xf4f4f4"
        - type: label
          text: Past Medical History
          style:
            marginLeft: "0.04"
            marginTop: "0.0185"
            fontWeight: "600"
            width: "0.92"
            height: "auto"
            color: "0x333333"
            fontSize: .Nfont.h14
        - type: label
          text: "No content"
          dataKey: formData.name.data.pastMedicalHistory
          style:
            marginLeft: "0.04"
            marginTop: "0.01"
            padding: "6px 12px"
            height: "auto"
            width: "0.92"
            boxSizing: border-box
            border:
              style: 1
            borderRadius: "4"

            fontSize: .Nfont.h14
            color: "0x333333"
            wordBreak: break-word
            backgroundColor: "0xf4f4f4"
        - type: label
          text: Past Surgical History
          style:
            marginLeft: "0.04"
            marginTop: "0.0185"
            fontWeight: "600"
            width: "0.92"
            height: "auto"
            color: "0x333333"
            fontSize: .Nfont.h14
        - type: label
          text: "No content"
          dataKey: formData.name.data.socialHistory
          style:
            marginLeft: "0.04"
            marginTop: "0.01"
            padding: "6px 12px"
            height: "auto"
            width: "0.92"
            boxSizing: border-box
            border:
              style: 1
            borderRadius: "4"

            fontSize: .Nfont.h14
            color: "0x333333"
            wordBreak: break-word
            backgroundColor: "0xf4f4f4"
        - type: label
          text: Allergies
          style:
            marginLeft: "0.04"
            marginTop: "0.0185"
            fontWeight: "600"
            width: "0.92"
            height: "auto"
            color: "0x333333"
            fontSize: .Nfont.h14
        - type: label
          text: "No content"
          dataKey: formData.name.data.allergies
          style:
            marginLeft: "0.04"
            marginTop: "0.01"
            padding: "6px 12px"
            height: "auto"
            width: "0.92"
            boxSizing: border-box
            border:
              style: 1
            borderRadius: "4"

            fontSize: .Nfont.h14
            color: "0x333333"
            wordBreak: break-word
            backgroundColor: "0xf4f4f4"
        - type: label
          text: Family History
          style:
            marginLeft: "0.04"
            marginTop: "0.0185"
            fontWeight: "600"
            width: "0.92"
            height: "auto"
            color: "0x333333"
            fontSize: .Nfont.h14
        - type: label
          text: "No content"
          dataKey: formData.name.data.familyHistory
          style:
            marginLeft: "0.04"
            marginTop: "0.01"
            padding: "6px 12px"
            height: "auto"
            width: "0.92"
            boxSizing: border-box
            border:
              style: 1
            borderRadius: "4"

            fontSize: .Nfont.h14
            color: "0x333333"
            wordBreak: break-word
            backgroundColor: "0xf4f4f4"
        - type: label
          text: Social History
          style:
            marginLeft: "0.04"
            marginTop: "0.0185"
            fontWeight: "600"
            width: "0.92"
            height: "auto"
            color: "0x333333"
            fontSize: .Nfont.h14
        - type: label
          text: "No content"
          dataKey: formData.name.data.socialHistory
          style:
            marginLeft: "0.04"
            marginTop: "0.01"
            padding: "6px 12px"
            height: "auto"
            width: "0.92"
            boxSizing: border-box
            border:
              style: 1
            borderRadius: "4"

            fontSize: .Nfont.h14
            color: "0x333333"
            wordBreak: break-word
            backgroundColor: "0xf4f4f4"
        - type: label
          text: Medications
          style:
            marginLeft: "0.04"
            marginTop: "0.0185"
            fontWeight: "600"
            width: "0.92"
            height: "auto"
            color: "0x333333"
            fontSize: .Nfont.h14
        - type: label
          text: "No content"
          dataKey: formData.name.data.medications
          style:
            marginLeft: "0.04"
            marginTop: "0.01"
            padding: "6px 12px"
            height: "auto"
            width: "0.92"
            boxSizing: border-box
            border:
              style: 1
            borderRadius: "4"

            fontSize: .Nfont.h14
            color: "0x333333"
            wordBreak: break-word
            backgroundColor: "0xf4f4f4"
        - type: label
          text: Objective Findings
          style:
            marginLeft: "0.04"
            marginTop: "0.0185"
            fontWeight: "600"
            width: "0.92"
            height: "auto"
            color: "0x333333"
            fontSize: .Nfont.h16

        - type: label
          text: "Vital Signs"
          dataKey:
          style:
            ..style.vital:

        # Blood
        - type: view
          style:
            ..style.signBox:
          children:
            - type: label
              text: "Blood Pressure (mmHg)"
              dataKey:
              style:
                ..style.signTitle:
            - type: label
              text: "Heart Rate (bpm)"
              dataKey:
              style:
                ..style.signTitle:
        - type: view
          style:
            ..style.inputBox:
          children:
            - type: label
              text: "--"
              dataKey: formData.name.data.vitalSigns.BP
              style:
                ..style.vitalInput:
            - type: label
              text: "--"
              dataKey: formData.name.data.vitalSigns.HR
              style:
                ..style.vitalInput:
                marginLeft: "0.04"
        #Respiratory Rate
        - type: view
          style:
            ..style.signBox:
          children:
            - type: label
              text: "Respiratory Rate (breaths/min)"
              dataKey:
              style:
                ..style.signTitle:
            - type: label
              text: "Pulse Oximetry (O₂ %)"
              dataKey:
              style:
                ..style.signTitle:
        - type: view
          style:
            ..style.inputBox:
          children:
            - type: label
              text: "--"
              dataKey: formData.name.data.vitalSigns.RR
              style:
                ..style.vitalInput:
            - type: label
              text: "--"
              dataKey: formData.name.data.vitalSigns.PO
              style:
                ..style.vitalInput:
                marginLeft: "0.04"
        #Temperature
        - type: view
          style:
            ..style.signBox:
          children:
            - type: label
              text: "Temperature (°F/°C)"
              dataKey:
              style:
                ..style.signTitle:
            - type: label
              text: "Height (ft/in)"
              dataKey:
              style:
                ..style.signTitle:
        - type: view
          style:
            ..style.inputBox:
          children:
            - type: label
              text: "--"
              dataKey: formData.name.data.vitalSigns.temperature
              style:
                ..style.vitalInput:
            - type: label
              text: "--"
              dataKey: formData.name.data.vitalSigns.height
              style:
                ..style.vitalInput:
                marginLeft: "0.04"
        #Weight
        - type: view
          style:
            ..style.signBox:
          children:
            - type: label
              text: "Weight (lb)"
              dataKey:
              style:
                ..style.signTitle:
            - type: label
              text: "BMI (kg/m²)"
              dataKey:
              style:
                ..style.signTitle:
        - type: view
          style:
            ..style.inputBox:
          children:
            - type: label
              text: "--"
              dataKey: formData.name.data.vitalSigns.weight
              style:
                ..style.vitalInput:
            - type: label
              text: "--"
              dataKey: formData.name.data.vitalSigns.BMI
              style:
                marginLeft: "0.04"
                ..style.vitalInput:
        - type: label
          text: "Physical Examination"
          dataKey:
          style:
            marginTop: "0.01724"
            marginLeft: "0.04"
            width: "auto"

            fontSize: .Nfont.h14
            fontWeight: "600"
        - type: label
          text: "No content"
          dataKey: formData.name.data.objectiveFindings
          style:
            ..style.objectiveFindings:
        - type: label
          text: Labs
          style:
            marginLeft: "0.04"
            marginTop: "0.0185"
            fontWeight: "700"
            width: "0.92"
            height: "auto"
            color: "0x333333"
            fontSize: .Nfont.h14
        - type: label
          text: Blood Glucose
          style:
            marginLeft: "0.04"
            marginTop: "0.0185"
            fontWeight: "600"
            width: "0.92"
            height: "auto"
            color: "0x333333"
            fontSize: .Nfont.h12
        - type: label
          text: "No content"
          dataKey: formData.name.data.bloodGlucose
          style:
            marginLeft: "0.04"
            marginTop: "0.01"
            padding: "6px 12px"
            height: "auto"
            width: "0.92"
            boxSizing: border-box
            border:
              style: 1
            borderRadius: "4"

            fontSize: .Nfont.h14
            color: "0x333333"
            wordBreak: break-word
            backgroundColor: "0xf4f4f4"
        - type: label
          text: Imaging Studies
          style:
            marginLeft: "0.04"
            marginTop: "0.0185"
            fontWeight: "600"
            width: "0.92"
            height: "auto"
            color: "0x333333"
            fontSize: .Nfont.h14
        - type: label
          text: "No content"
          dataKey: formData.name.data.imageStudies
          style:
            marginLeft: "0.04"
            marginTop: "0.01"
            padding: "6px 12px"
            height: "auto"
            width: "0.92"
            boxSizing: border-box
            border:
              style: 1
            borderRadius: "4"

            fontSize: .Nfont.h14
            color: "0x333333"
            wordBreak: break-word
            backgroundColor: "0xf4f4f4"

          # Diagnoses
        - type: label
          text: Diagnoses
          style:
            marginLeft: "0.04"
            marginTop: "0.0185"
            fontWeight: "600"
            width: "0.92"
            height: "auto"
            color: "0x333333"
            fontSize: .Nfont.h14
        - type: view
          viewTag: listData
          style:
            marginLeft: "0.04"
            width: "0.92"
            height: "auto"
            marginTop: "0.01477"
            border:
              style: 1
            borderColor: "0xc2c2c2"
            backgroundColor: "0xf4f4f4"
            borderRadius: "4"
            overflow: hidden
          children:
            - type: label
              text: No content
              style:
                display: ..formDataTemp.desListFlag
                height: "auto"
                width: "auto"
                fontSize: .Nfont.h14
                padding: "6px 12px"
                color: "0x333333"

            - type: list
              viewTag: listData
              contentType: listObject
              listObject: .Global.formData.providerDoc.diagnosesDoc.name.data.diagnosis.descriptiveList # to dataObject to enumerate the list
              iteratorVar: itemObject
              style:
                display: ..formDataTemp.listFlag
                width: "0.92"
                height: "auto"
                margin: "0"
                marginTop: "0.0147"
              children:
                - type: listItem
                  itemObject: ""
                  style:
                    marginTop: "0.01"
                    width: "0.92"
                    height: "auto"
                    left: "0"
                    overflow: hidden
                  children:
                    - type: view
                      style:
                        width: "0.92"
                        height: "auto"
                      children:
                        - type: label
                          text: "&#8226"
                          dataKey:
                          style:
                            marginLeft: "0.032"
                            boxSizing: border-box
                            display: "inline-block"
                            height: "auto"
                            width: "auto"
                            fontSize: .Nfont.h16
                            verticalAlign: top
                        - type: view
                          style:
                            verticalAlign: top
                            display: "inline-block"
                            width: "0.842"
                            height: "auto"
                          children:
                            - type: label
                              dataKey: itemObject.code
                              style:
                                display: "inline-block"
                                marginLeft: "0.02"
                                height: "auto"
                                width: "0.17"
                                textAlign:
                                  x: left

                                wordWrap: break-word
                                fontSize: .Nfont.h14
                                fontWeight: "550"
                                verticalAlign: top
                                color: "0x333333"
                            - type: label
                              text: "-"
                              style:
                                # verticalAlign: middle
                                display: "inline-block"
                                width: "auto"
                                height: "auto"
                                fontSize: .Nfont.h2
                            - type: label
                              dataKey: itemObject.description
                              style:
                                verticalAlign: top
                                marginLeft: "0.015"
                                display: "inline-block"
                                height: "auto"
                                width: "0.614"
                                textAlign:
                                  x: left

                                wordWrap: break-word
                                fontSize: .Nfont.h14
                                color: "0x333333"
                    - type: label
                      dataKey: itemObject.comment
                      style:
                        marginTop: "0.002"
                        marginLeft: "0.06"
                        width: "0.83"
                        height: "auto"
                        color: "0x666666"

                        wordWrap: break-word
                        fontSize: .Nfont.h14
            - type: view
              style:
                display: ..formDataTemp.listFlag
                marginTop: "0.0147"
        - type: label
          text: Plan And Recommendations
          style:
            marginTop: "0.01"
            marginLeft: "0.04"
            width: "0.92"
            height: "auto"
            color: "0x333333"
            fontSize: .Nfont.h14
            fontWeight: "600"
            lineHeight: "2.58vh"
        - type: label
          text: "&#8226 Note"
          style:
            marginLeft: "0.04"
            width: "0.92"
            fontSize: .Nfont.h14
            lineHeight: "2.58vh"
        - type: label
          text: No content
          dataKey: formData.name.data.planAndRecommendations
          style:
            marginLeft: "0.04"
            marginTop: "0.01"
            height: "auto"
            width: "0.92"
            boxSizing: border-box
            border:
              style: 1
            borderRadius: "4"
            borderWidth: "1.5"

            color: "0x333333"
            padding: "6px 12px"
            backgroundColor: "0xf4f4f4"
            fontSize: .Nfont.h14
            wordBreak: break-word

        # - type: view
        #   viewTag: defaultTag
        #   style:
        #     ..style.blockBox:
        #   children:
        #     - type: image
        #       path:
        #         ..event.checkBoxPath:
        #       style:
        #         ..style.img:
        #     - type: label
        #       text: Superbill
        #       style:
        #         ..style.setLabel:

        - .DocPublicLine:
        - type: view
          style:
            marginTop: "0.02"
            height: "auto"
            width: "0.92"
            marginLeft: "0.04"
          children:
            - type: view
              style:
                height: "auto"
                width: "0.92"
              children:
                - type: label
                  text: "Signature"
                  style:
                    display: "inline-block"
                    width: "0.816"
                    fontSize: .Nfont.h14
                    height: "auto"
                    color: "0x333333"
                    fontWeight: "600"
                    textAlign:
                      x: left
            - type: view
              style:
                marginTop: "0.01"
                height: "0.128"
                width: "0.9"
                border:
                  style: "4"
                  color: "0xa9a9a9"
                borderWidth: "2"
              children:
                # - type: label
                #   text: X
                #   style:
                #     .SignLabelStyle:
                # - type: canvas
                #   dataKey:
                #   viewTag: signatureTag
                #   style:
                #     left: "0"
                #     width: "0.88"
                #     height: "0.128"
                #     overflow: scroll
                # 显示暂存的签名
                - type: image
                  viewTag: signatureShowTag
                  path=func: .builtIn.utils.prepareDocToPath
                  # 传入签名文档的id
                  dataKey: InitEvalReportShared.formData.name.data.signatureId
                  style:
                    left: "0"
                    width: "0.88"
                    top: "0"
                    height: "0.128"
                    overflow: scroll
                    zIndex: "1000"
                    display: ..formData.displaySign
        - type: view
          style:
            marginLeft: "0.04"
            marginTop: "0.0146"
            width: "0.92"
            height: "auto"
            overflow: hidden
            display: ..formData.displaySign
          children:
            - type: view
              viewTag: signatureTimeTag
              style:
                marginTop: "0.01"
                height: "auto"
                width: "0.92"
              children:
                - type: label
                  text=func: .builtIn.string.formatUnixtimeSecond
                  dataKey: formData.name.data.signatureTime
                  style:
                    display: "inline-block"
                    width: "auto"
                    height: "auto"
                    fontSize: .Nfont.h12
                    color: "0x757575"
                    verticalAlign: middle
                - type: label
                  text: "Digitally Signed"
                  dataKey:
                  style:
                    marginLeft: "0.02"
                    display: "inline-block"
                    width: "auto"
                    height: "auto"
                    fontSize: .Nfont.h12
                    color: "0x757575"
                    verticalAlign: middle
            - type: view
              style:
                marginTop: "0.01"
                width: "auto"
                height: "auto"
              children:
                - type: label
                  text: Date
                  style:
                    display: "inline-block"
                    width: "auto"
                    height: "auto"
                    color: "0x666666"
                    fontSize: .Nfont.h12
                - type: label
                  text=func: .builtIn.string.formatUnixtimeL_en
                  dataKey: formData.ctime
                  style:
                    marginLeft: "0.0373"
                    display: "inline-block"
                    width: "auto"
                    height: "auto"
                    color: "0x333333"
                    fontSize: .Nfont.h12
                    fontWeight: "600"

        - type: view
          style:
            marginLeft: "0.04"
            marginTop: "0.0246"
            width: "0.92"
            height: "auto"
            overflow: hidden
          children:
            - type: label
              dataKey: formData.name.data.providerInfo.providerFullName
              style:
                height: "auto"
                width: "0.92"
                color: "0x333333"
                fontSize: .Nfont.h16
                fontWeight: "600"
                wordBreak: break-word
            - type: label
              dataKey: formData.name.data.providerInfo.specialty
              style:
                marginTop: "0.006"
                height: "auto"
                width: "0.92"
                color: "0x666666"
                fontSize: .Nfont.h14
                wordBreak: break-word
            - .DocPublicStyleOneBox:
              children:
                - .DocPublicStyleOneLeft:
                  text: "LIC #"
                - .DocPublicStyleOneRight:
                  dataKey: formData.name.data.providerInfo.lic
            - .DocPublicStyleOneBox:
              children:
                - .DocPublicStyleOneLeft:
                  text: "NPI #"
                - .DocPublicStyleOneRight:
                  dataKey: formData.name.data.providerInfo.npi
            - .DocPublicStyleOneBox:
              children:
                - .DocPublicStyleOneLeft:
                  text: "DEA #"
                - .DocPublicStyleOneRight:
                  dataKey: formData.name.data.providerInfo.dea
            - .DocPublicStyleOneBox:
              children:
                - .DocPublicStyleOneLeft:
                  text: "Email"
                - .DocPublicStyleOneRight:
                  dataKey: formData.name.data.providerInfo.email
            - .DocPublicStyleOneBox:
              children:
                - .DocPublicStyleOneLeft:
                  text: "Fax #"
                - .DocPublicStyleOneRight:
                  dataKey: formData.name.data.facilityInfo.fax
            - .DocPublicStyleOneBox:
              children:
                - .DocPublicStyleOneLeft:
                  text: "Main #"
                - .DocPublicStyleOneRight:
                  dataKey: formData.name.data.facilityInfo.phone
            - .DocPublicStyleOneBox:
              children:
                - .DocPublicStyleOneLeft:
                  text: "Address"
                - .DocPublicStyleOneRight:
                  dataKey: formData.name.data.facilityInfo.address
            - .DocPublicLine:
              style:
                marginTop: "0.0246"
                height: "0.00369"
        - type: label
          dataKey: formData.name.data.facilityInfo.website
          text: "www.website.com"
          style:
            marginTop: "0.01"
            width: "1"
            height: "auto"
            color: "0x666666"
            fontSize: .Nfont.h12
            textAlign:
              x: center
        - type: view
          style:
            marginTop: "0.03"
    - type: view
      style:
        ..style.btnBox:
        display: ..formDataTemp.displayBtn
      children:
        - type: button
          text: Release
          style:
            ..style.btn:
          onClick:
            - ..event.btnClick
    # - .HeaderPopUpDownload:
    - .HeaderPopUpMenu:
  event:
    checkBoxPath:
      emit:
        actions:
          - if:
              - =..formData.name.data.superbill
              - selectOnBlue.svg
              - selectOffBlue.svg
    btnClick:
      - actionType: evalObject
        object:
          # 更新文档状态
          - ..apiRequest.initialEvaluationReport.docReq.name.data.statusTag.name@: "Released"
          - ..apiRequest.initialEvaluationReport.docReq.name.data.statusTag.fontColor@: "0x2988e6"
          - ..apiRequest.initialEvaluationReport.docReq.name.data.statusTag.backgroundColor@: "0xdfedfc"

      - actionType: evalObject
        object:
          # 修改tage
          - ..apiRequest.initialEvaluationReport.docReq.tage@: -1
          - =..apiRequest.initialEvaluationReport.docAPI.store:

      - actionType: evalObject
        object:
          .Global._nonce@:
            =.builtIn.math.random: ""

      - actionType: evalObject
        object:
          - goto: MoreOptions
  style:
    scrollBox:
      width: "1"
      height: "0.84729"
      boxSizing: "border-box"
      overflow: "scroll"
    btnBox:
      width: "1"
      height: "0.0972"
      boxSizing: "border-box"
      overflow: "scroll"
      backgroundColor: "#ffffff"
      boxShadow: "1px 1px 4px 1px #dededf"
      textAlign:
        x: center
    btn:
      marginTop: "0.0123"
      height: "0.0443"
      width: "0.84"
      border:
        style: 1
      borderRadius: "5"
      backgroundColor: "#2988e6"
      color: "#ffffff"
      fontSize: .Nfont.h14
      boxSizing: border-box
      fontWeight: "600"
      textAlign:
        x: center
    signBox:
      width: "auto"
      height: "auto"
      marginTop: "0.0123"
      marginLeft: "0.04"
    signTitle:
      height: "auto"
      width: "0.48"

      fontSize: .Nfont.h12
      display: "inline-block"
      vertical-align: middle
    vital:
      width: "0.92"
      height: "auto"
      marginLeft: "0.04"
      marginTop: "0.014778"

      fontSize: .Nfont.h14
      fontWeight: "600"
    inputBox:
      width: "0.92"
      height: "0.037"
      marginTop: "0.01"
      marginLeft: "0.04"

    vitalInput:
      width: "0.44"
      height: "auto"

      fontSize: .Nfont.h14
      border:
        style: "1"
      backgroundColor: "#f4f4f4"
      borderRadius: "4"
      boxSizing: "border-box"
      display: "inline-block"
      color: "0x333333"
      padding: "6px 12px"
    objectiveFindings:
      marginLeft: "0.04"
      width: "0.92"
      height: "auto"
      marginTop: "0.014778"

      fontSize: .Nfont.h14
      borderRadius: "4"
      color: "0x333333"
      backgroundColor: "0xf4f4f4"
      border:
        style: "1"
      boxSizing: "border-box"
      padding: "6px 12px"
      wordBreak: break-word
    blockBox:
      marginTop: "0.024630"
      marginLeft: "0.04"
      width: "0.92"
      height: "auto"
      overflow: hidden
    img:
      display: "inline-block"
      height: "0.01970"
      verticalAlign: middle
    setLabel:
      display: "inline-block"
      marginLeft: "0.026666"
      height: "auto"
      width: "auto"
      fontSize: .Nfont.h14
      color: "#2988e6"
      fontWeight: "700"
      verticalAlign: middle
      textDecoration: underline
