VisitDetial:
  title: Visit Detail
  init:
    - .SignInCheck
    # 指定当前页面
    - .Global.formData.backPageName@: "VisitDetial"
    - .Global.formData.unPageName@: ""
    - ..listData.get
    - .Global.currentRoomInfo.edge@: =.Global.roomInfo.edge
    - ..dataObject@: =.Global.roomInfo.edge
    # 获取当前房间的 patient id 以备后用
    - actionType: evalObject
      object:
        # 获取patient id， F->P, D->P, P->D 只要E6 evid不是provider，那E6 evid一定是patient
        - if:
            - =.builtIn.string.equal:
                dataIn:
                  string1: =.Global.roomInfo.edge.evid
                  string2: =.Global.roomInfo.edge.name.providerId
            - ..formData.patientId@: =.Global.roomInfo.edge.bvid
            - ..formData.patientId@: =.Global.roomInfo.edge.evid
        - .Global.formData.relatedApp.activePatientId@: =..formData.patientId
    #change E10   Global.currentRoom.edge, this is can access edge
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =.Global.roomInfo.edge.bvid
              string2: =.Global.currentUser.vertex.id
        - .Global.currentRoom.edge@: =.Global.roomInfo.edge
        - actionType: evalObject
          object:
            - if:
                - =.builtIn.string.equal:
                    dataIn:
                      string1: =.Global.roomInfo.edge.evid
                      string2: =.Global.currentUser.vertex.id
                - .Global.currentRoom.edge@: =.Global.roomInfo.edge
                - actionType: evalObject
                  object:
                    - =..apiRequest.accessRoomInfo.edgeAPI.get: ""
                    - .Global.currentRoom.edge@: =..apiRequest.accessRoomInfo.response.edge.0
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =..dataObject.name.visitType
              string2: Telemedicine
        - ..formData.isTelemedicine@: none
        - ..formData.isTelemedicine@: ""
    - =..patientProfile.get: ""
    - .Global.currentMeetingPatientProfile@: ""
    - .Global.currentMeetingPatientProfile@: =..patientProfile.docReponse.doc.0.name.data
    - =..apiRequest.financialInfo.docAPI.get: ""
    - if:
        - =.builtIn.utils.judgeAll:
            dataIn:
              value:
                - =.Global.roomInfo.edge.name.fee
                - =..apiRequest.financialInfo.docQueryResp.doc.0.name.data.paymentInfo.fee
              index: "0.00"
        - actionType: evalObject
          object:
            - ..formData.opacity_payStatus@: 0.6
            - ..formData.backgroundColor_status@: "#f4f4f4"
            - ..formData.pointerEvents_payStatus@: none
            - ..formData.display_payStatus@: none
        - continue
    - =..apiRequest.paymentEdge.edgeAPI.get: ""
    - if:
        - =..apiRequest.paymentEdge.edgeResp.edge.0.id
        - actionType: evalObject
          object:
            - ..apiRequest.hasPaidProfile.getDocReq.id@: =..apiRequest.paymentEdge.edgeResp.edge.0.id
            - =..apiRequest.hasPaidProfile.docAPI.get: ""
        - continue
    - ..apiRequest.appointment_E10.edgeAPI.get
    - if:
        - =..apiRequest.appointment_E10.edgeQueryResp.edge
        - actionType: evalObject
          object:
            - ..formData.participants_others@: ""
            - =.builtIn.object.extract:
                dataIn:
                  array: =..apiRequest.appointment_E10.edgeQueryResp.edge
                  field: name.role
                dataOut: VisitDetial.formData.roleList
        - continue
    - =.builtIn.object.extract:
        dataIn:
          array: =..apiRequest.appointment_E10.edgeQueryResp.edge
          field: name
        dataOut: VisitDetial.formData.participants
    # 去除邀请者中与provider相同的人
    - =.builtIn.array.removeByName:
        dataIn:
          object: =..formData.participants
          key: roleName
          name: =..dataObject.name.providerName
    # According to the design team, only reserve patient and provider roles in participants
    - =.builtIn.array.removeByName:
        dataIn:
          object: =..formData.participants
          key: role
          name: Location
    - =.builtIn.array.removeByName:
        dataIn:
          object: =..formData.participants
          key: role
          name: Room
    - =.builtIn.array.removeByName:
        dataIn:
          object: =..formData.participants
          key: role
          name: Facility
    - =..apiRequest.financialInfo.docAPI.get: ""
    - if:
        - =.builtIn.utils.judgeAll:
            dataIn:
              value:
                - =.Global.roomInfo.edge.name.fee
                - =..apiRequest.financialInfo.docQueryResp.doc.0.name.data.paymentInfo.fee
              index: "0.00"
        - actionType: evalObject
          object:
            - ..formData.opacity_payStatus@: 0.6
            - ..formData.backgroundColor_status@: "#f4f4f4"
            - ..formData.pointerEvents_payStatus@: none
            - ..formData.display_payStatus@: none
        - continue
    # 首先我们要获取所有的related appointment的 doc, 用当前的房间id作为reid 去查所有的doc就可以
    # 有三种情况 1. 0个 doc， 说明是老预约 2. 1个doc 说明只有当前一个 ，也可以说明没有 related app
    # 3. 有多个 出去当前的房间id 其他的就是当前的 related
    - actionType: evalObject
      object:
        # 获取自己房间的小尾巴， 目的： 1。 reid 是跟房间 2. 自己的id 为下一个 related app的fid
        - =..apiRequest.getRelatedLink.docAPI.get: ""
        # 把自己的东西放到全局
        - .Global.formData.relatedApp.activeRelatedlink@: =..apiRequest.getRelatedLink.getResp.doc.0
        - =..apiRequest.getRelatedAppointment.docAPI.get: ""
        - =.builtIn.array.getListLength:
            dataIn:
              object: =..apiRequest.getRelatedAppointment.getResp.doc
            dataOut: VisitDetial.formData.relatedAppointmentCountString
        - =.builtIn.string.retainNumber:
            dataIn:
              value: =..formData.relatedAppointmentCountString
            dataOut: VisitDetial.formData.relatedAppointmentCount
        - if:
            - =.builtIn.math.greater:
                dataIn:
                  num1: =..formData.relatedAppointmentCount
                  num2: 0
            - =.builtIn.object.extract:
                dataIn:
                  array: =..apiRequest.getRelatedAppointment.getResp.doc
                  field: eid
                dataOut: VisitDetial.formData.relatedAppointmentIdList
            - continue
        # 把所有的appointment id 存放在 global里面
        - .Global.currentRoomrelatedAppointment@: =..formData.relatedAppointmentIdList
        - if:
            - =.builtIn.math.greater:
                dataIn:
                  num1: =..formData.relatedAppointmentCount
                  num2: 2
            - actionType: evalObject
              object:
                - ..formData.relatedAppointmentDisplay@: "inline-block"
                - .Global.formData.tabBarShow@: "block"
            - actionType: evalObject
              object:
                - ..formData.relatedAppointmentDisplay@: "none"
                - .Global.formData.tabBarShow@: "none"
    - actionType: builtIn
      funcName: redraw
      viewTag: participants
    - =..apiRequest.patientChart.docAPI.get: ""
    - if:
        - =.builtIn.array.judgeListLength:
            dataIn:
              array: =..apiRequest.patientChart.docQueryResp.doc
              len: 0
        - continue
        - .Global.formData.patientChart@: =..apiRequest.patientChart.docQueryResp.doc.0
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =.Global.formData.showBackButton.visitDetail
              string2: "true"
        - actionType: evalObject
          object:
            - ..formData.showHeader@: "block"
            - ..formData.showHeaderCenter@: "none"
        - actionType: evalObject
          object:
            - ..formData.showHeader@: "none"
            - ..formData.showHeaderCenter@: "block"
    # 处理diagnoses
    - =..apiRequest.diagnosesDoc.docAPI.get: ""
    - if:
        - =.builtIn.array.judgeListLength:
            dataIn:
              array: =..apiRequest.diagnosesDoc.docResp.doc
              len: 0
        - .Global.formData.providerDoc.diagnosesDoc@: ""
        - .Global.formData.providerDoc.diagnosesDoc@: =..apiRequest.diagnosesDoc.docResp.doc.0
    # 处理Medical Recommendation
    - =..apiRequest.recommendation.docAPI.get: ""
    - if:
        - =.builtIn.array.judgeListLength:
            dataIn:
              array: =..apiRequest.recommendation.docResp.doc
              len: 0
        - actionType: evalObject
          object:
            - .Global.formData.isFirstRecommendation@: true
            - .Global.formData.productionSelectionList@: []
        - actionType: evalObject
          object:
            - .Global.formData.isFirstRecommendation@: false
            - .Global.formData.providerDoc.recommendationDoc@: =..apiRequest.recommendation.docResp.doc.0
            - .Global.formData.productionSelectionList@: =..apiRequest.recommendation.docResp.doc.0.name.data.goodsList
  listData:
    invitees:
      edge: ""
    get:
      .EdgeAPI.get: ""
      api: re
      dataKey: listData.invitees
      id: .Global.roomInfo.edge.id
      type: .EdgeType.InviteInfo
      xfname: refid
      maxcount: "20"
      # sCondition: "tage=0 AND ctime>UNIX_TIMESTAMP()-7200"
      sCondition: "tage=0"
      _nonce: .Global._nonce
  formData:
    relatedAppointmentDisplay: "none"
    relatedAppointmentCountString: ""
    relatedAppointmentCount: ""
    relatedAppointmentIdList: ""
    # control location and address display or not
    isTelemedicine: none
    display_payStatus: ""
    pointerEvents_payStatus: ""
    backgroundColor_status: "#ffffff"
    opacity_payStatus: 1
    participants: []
    showHeader: "block"
    roleList: []
    showHeaderCenter: "none"
  apiRequest:
    diagnosesDoc:
      docResp: ""
      docReq:
        id:
          - =.Global.currentRoom.edge.id
          - =.Global.roomInfo.edge.id
        xfname: "eid,reid"
        type: .DocType.Diagnoses
        obfname: "mtime"
        maxcount: "1"
        _nonce: .Global._nonce
      docAPI:
        .DocAPI: ""
        get:
          api: rd
          dataIn: VisitDetial.apiRequest.diagnosesDoc.docReq
          dataOut: VisitDetial.apiRequest.diagnosesDoc.docResp
    recommendation:
      docResp: ""
      docReq:
        id:
          - =.Global.roomInfo.edge.id
        xfname: "reid"
        sCondition: type & 0xff000 in (0x32000)
        obfname: "mtime"
        maxcount: "1"
        _nonce: .Global._nonce
      docAPI:
        .DocAPI: ""
        get:
          api: rd
          dataIn: VisitDetial.apiRequest.recommendation.docReq
          dataOut: VisitDetial.apiRequest.recommendation.docResp
    # get patient chart for the provider notes auto fill
    patientChart:
      docQueryResp: ""
      docQueryReq:
        id: .Global.roomInfo.edge.id
        xfname: eid
        type: .DocType.PatientChart #  type: "257"
        obfname: "mtime"
        maxcount: "1"
        _nonce: =.Global._nonce
      docAPI:
        get:
          api: rd
          dataIn: VisitDetial.apiRequest.patientChart.docQueryReq
          dataOut: VisitDetial.apiRequest.patientChart.docQueryResp
    #获取自己房间的realated 小尾巴
    getRelatedLink:
      getDocinfo:
        id: .Global.roomInfo.edge.id
        xfname: "eid"
        type: .DocType.RelatedAppTag
        _nonce: .Global._nonce
      getResp: ""
      docAPI:
        get:
          api: rd
          dataIn: apiRequest.getRelatedLink.getDocinfo
          dataOut: VisitDetial.apiRequest.getRelatedLink.getResp
    #获取所有的关联预约
    getRelatedAppointment:
      getDocinfo:
        id: =.Global.formData.relatedApp.activeRelatedlink.esig
        xfname: "reid"
        type: .DocType.RelatedAppTag
        obfname: mtime
      getResp: ""
      docAPI:
        get:
          api: rd
          dataIn: apiRequest.getRelatedAppointment.getDocinfo
          dataOut: VisitDetial.apiRequest.getRelatedAppointment.getResp
    # get the E10
    appointment_E10:
      edgeQueryResp: ""
      edgeQueryReq:
        id: .Global.roomInfo.edge.id
        xfname: refid
        type: .EdgeType.InviteInfo
        sCondition: subtype!=0
        _nonce: =.Global._nonce
      edgeAPI:
        get:
          api: re
          dataIn: VisitDetial.apiRequest.appointment_E10.edgeQueryReq
          dataOut: VisitDetial.apiRequest.appointment_E10.edgeQueryResp
    # get self E10
    accessRoomInfo:
      response: ""
      edge:
        type: .EdgeType.InviteInfo
        id:
          - .Global.currentUser.vertex.id
          - .Global.roomInfo.edge.id
        xfname: "bvid|evid,refid"
      edgeAPI:
        get:
          api: re
          dataIn: apiRequest.accessRoomInfo.edge
          dataOut: apiRequest.accessRoomInfo.response
    paymentEdge:
      edgeResp: ""
      edgeIn:
        id: .Global.roomInfo.edge.id
        xfname: refid
        _nonce: .Global._nonce
        type: 1113
        obfname: mtime
        subtype: 1
      edgeAPI:
        get:
          api: re
          dataIn: VisitDetial.apiRequest.paymentEdge.edgeIn
          dataOut: VisitDetial.apiRequest.paymentEdge.edgeResp
    hasPaidProfile:
      getDocResp: ""
      getDocReq:
        id: ""
        xfname: eid
        type: 2001
        obfname: mtime
        _nonce: .Global._nonce
        maxcount: "100"
      docAPI:
        get:
          api: rd
          dataIn: VisitDetial.apiRequest.hasPaidProfile.getDocReq
          dataOut: VisitDetial.apiRequest.hasPaidProfile.getDocResp
    financialInfo:
      docQueryResp: ""
      docQueryReq:
        type: .DocType.FinancialInfo
        id: .Global.roomInfo.edge.id
        xfname: reid
        obfname: mtime
        maxcount: "1"
        _nonce: =.Global._nonce
      docAPI:
        get:
          api: rd
          dataIn: VisitDetial.apiRequest.financialInfo.docQueryReq
          dataOut: VisitDetial.apiRequest.financialInfo.docQueryResp
  patientProfile:
    # get all patient profile
    docReponse: ""
    doc:
      ids:
        - .Global.roomInfo.edge.name.providerId
        - .Global.roomInfo.edge.bvid
        - .Global.roomInfo.edge.evid
      xfname: (!D.ovid) & E.Bvid
      type: .DocType.PatientProfile #  type: "102401"
      obfname: "ctime"
      maxcount: "1"
      ObjType: 12
      sCondition: "E.type=10000"
      _nonce: =.Global._nonce
    get:
      api: rd
      dataIn: patientProfile.doc
      dataOut: VisitDetial.patientProfile.docReponse
  components:
    - .BasePublicHeader:
      style:
        display: ..formData.showHeader
      children:
        - .BasePublicHeaderLeft:
          leftClick:
            - actionType: evalObject
              object:
                - if:
                    - =.builtIn.string.equal:
                        dataIn:
                          string1: =.Global.formData.entrancePageName
                          string2: "MenuBars"
                    - actionType: evalObject
                      object:
                        - .Global.formData.unPageName@: "RecommendationsRecord"
                        - .Global.formData.backPageName@: RecommendationsRecord
                        - goto: RecommendationShared
                    - actionType: builtIn
                      funcName: goBack
                      reload: true
        - .BasePublicHeaderTitle:
    - .BasePublicHeader:
      style:
        display: ..formData.showHeaderCenter
      children:
        - .BasePublicHeaderCenter:
    - type: scrollView
      style:
        width: "1"
        height: "0.85"
      children:
        - type: view
          style:
            height: "0.05"
            backgroundColor: "#f0f0f0"
            width: "1"
          children:
            - type: label
              text: Appointment  Info
              style:
                display: "inline-block"
                marginLeft: "0.05"
                color: "0x666666"
                height: "0.05"
                width: "0.485"
                lineHeight: 5vh

                fontSize: .Nfont.h14
                fontWeight: "600"
                textAlign:
                  x: left
            - type: label
              text: + Create Appointment
              onClick:
                - goto: ScheduleAppointment
              style:
                display: "inline-block"
                marginLeft: "0.01"
                height: "0.05"
                width: "0.405"
                lineHeight: 5vh

                fontSize: .Nfont.h14
                fontWeight: "400"
                color: "#2988e6"
                textDecoration: underline
                textAlign:
                  x: right
        - type: view
          style:
            height: "auto"
            width: "0.9"
            marginLeft: "0.05"
            color: "0x4b4b4b"
          children:
            - .PresListView:
              children:
                - .PresLabelLeft:
                  text: Patient Name
                - .PresLabelRight:
                  dataKey: dataObject.name.patientName
            - .PresListView:
              children:
                - .PresLabelLeft:
                  text: Visit Type
                - .PresLabelRight:
                  dataKey: dataObject.name.visitType
            - .PresListView:
              children:
                - .PresLabelLeft:
                  text: "Reason for Visit"
                - .PresLabelRight:
                  dataKey: dataObject.name.visitReason
            - .PresListView:
              children:
                - .PresLabelLeft:
                  text: "Date"
                - .PresLabelRight:
                  text=func: .builtIn.string.formatUnixtimeL_en
                  dataKey: dataObject.stime
            - .PresListView:
              children:
                - .PresLabelLeft:
                  text: "Time"
                - .PresLabelRight:
                  text=func: .builtIn.date.ShowTimeSpan
                  dataKey: dataObject
            - .PresListView:
              viewTag: locationAndAddress
              style:
                display: ..formData.isTelemedicine
              children:
                - .PresLabelLeft:
                  text: "Location"
                - .PresLabelRight:
                  dataKey: dataObject.name.locationName
            - .PresListView:
              viewTag: locationAndAddress
              style:
                display: ..formData.isTelemedicine
              children:
                - .PresLabelLeft:
                  text: "Address"
            - .PresListView:
              viewTag: locationAndAddress
              style:
                display: ..formData.isTelemedicine
              children:
                - .PresLabelLeft:
                  dataKey: dataObject.name.location
                  style:
                    width: "0.9"
                    fontWeight: "normal"
                    wordBreak: break-word
            - .PresListView:
              viewTag: tag_payStatus
              style:
                display: ..formData.display_payStatus
              children:
                - .PresLabelLeft:
                  text: "Payment Status"
                - .PresLabelRight:
                  text: ""
                  dataKey: apiRequest.hasPaidProfile.getDocResp.doc.0
                  text=func: .builtIn.object.transformStatus
                  style:
                    color: ..formData.payStatus.fontColor
            - .PresListView:
              children:
                - .PresLabelLeft:
                  style:
                    width: "0.630666"
                  text: "Medical Recommendation"
                - .PresLabelRight:
                  text: View/Edit
                  style:
                    color: "#2988e6"
                    width: "0.260333"
                    textDecoration: underline
                  onClick:
                    - actionType: evalObject
                      object:
                        - if:
                            - =.Global.formData.providerDoc.recommendationDoc.id
                            - actionType: evalObject
                              object:
                                - .Global.Note@: =.Global.formData.providerDoc.recommendationDoc
                                - goto: RecommendationShared
                            - goto: MedicalRecommendation
        - type: view
          style:
            marginTop: "0.015"
            height: "0.05"
            backgroundColor: "0xf0f0f0"
            width: "1"
          children:
            - type: label
              text: Medical Info
              style:
                display: "inline-block"
                marginLeft: "0.05"
                color: "0x666666"
                height: "0.05"
                width: "0.48533333"
                lineHeight: 5vh

                fontSize: .Nfont.h14
                fontWeight: "600"
                textAlign:
                  x: left
            - type: view
              style:
                width: auto
                height: auto
                display: inline-block
              children:
                - type: label
                  text: Related Appointments
                  onClick:
                    - goto: RelatedAppointments
                  style:
                    display: ..formData.relatedAppointmentDisplay
                    marginLeft: "0.05"
                    height: "0.05"
                    width: "auto"
                    lineHeight: 5vh

                    fontSize: .Nfont.h14
                    fontWeight: "400"
                    color: "#2988e6"
                    textDecoration: underline
                    textAlign:
                      x: left
            # - type: label
            #   text: Related Appointments
            #   onClick:
            #     - goto: RelatedAppointments
            #   style:
            #     display: =..formData.relatedAppointmentDisplay
            #     marginLeft: "0.05"
            #     height: "0.05"
            #     width: "auto"
            #     lineHeight: 5vh
            #
            #     fontSize: .Nfont.h14
            #     fontWeight: "400"
            #     color: "#2988e6"
            #     textDecoration: underline
            #     textAlign:
            #       x: left
        - type: view
          style:
            height: "auto"
            width: "1"
            # marginLeft: "0.05"
          children:
            - type: view
              style:
                marginTop: "0.02"
                height: "0.16"
                width: "1"
              children:
                - type: view
                  # onClick:
                  #   - goto: VitalSigns
                  style:
                    display: "inline-block"
                    width: "0.28"
                    height: "0.14"
                    marginLeft: "0.05"
                    backgroundColor: "#ffffff"
                    border:
                      style: 3
                    borderWidth: "1"
                    borderRadius: "10"
                    borderColor: "0xdededf"
                    box-sizing: border-box
                    boxShadow: "0px 0px 6px 0.5px #DEDEDF"
                    textAlign:
                      x: center
                  onClick:
                    - actionType: evalObject
                      object:
                        - .Global.vitalsInAppointment@: "true"
                    - goto: VitalSigns
                  children:
                    - type: image
                      path: remoteHealth.svg
                      style:
                        marginTop: "0.01"
                        height: "0.06"
                    - type: label
                      text: Vital Signs
                      style:
                        marginTop: "0.01"
                        height: "auto"
                        width: "0.28"

                        fontSize: .Nfont.h12
                        fontWeight: "600"
                        color: "0x4b4b4b"
                        textAlign:
                          x: center
                - type: view
                  onClick:
                    - goto: PatientChart
                  style:
                    marginLeft: "0.03"
                    display: "inline-block"
                    width: "0.28"
                    height: "0.14"
                    backgroundColor: "#ffffff"
                    border:
                      style: 3
                    borderWidth: "1"
                    borderRadius: "10"
                    borderColor: "0xdededf"
                    box-sizing: border-box
                    boxShadow: "0px 0px 6px 0.5px #DEDEDF"
                    textAlign:
                      x: center
                  children:
                    - type: image
                      path: patientChart.svg
                      style:
                        marginTop: "0.01"
                        height: "0.06"
                    - type: label
                      text: Patient Chart
                      style:
                        marginTop: "0.01"
                        height: "auto"
                        width: "0.28"

                        fontSize: .Nfont.h12
                        fontWeight: "600"
                        color: "0x4b4b4b"
                        textAlign:
                          x: center
                - type: view
                  onClick:
                    - goto: ProviderNoteSelect
                  style:
                    marginLeft: "0.03"
                    display: "inline-block"
                    width: "0.28"
                    height: "0.14"
                    backgroundColor: "#ffffff"
                    border:
                      style: 3
                    borderWidth: "1"
                    borderRadius: "10"
                    borderColor: "0xdededf"
                    box-sizing: border-box
                    boxShadow: "0px 0px 6px 0.5px #DEDEDF"
                    textAlign:
                      x: center
                  children:
                    - type: image
                      path: providerNotes.svg
                      style:
                        marginTop: "0.01"
                        height: "0.06"
                    - type: label
                      text: Provider Notes
                      style:
                        marginTop: "0.01"
                        height: "auto"
                        width: "0.28"

                        fontSize: .Nfont.h12
                        fontWeight: "600"
                        color: "0x4b4b4b"
                        textAlign:
                          x: center
            - type: view
              style:
                height: "0.12"
                width: "1"
              children:
                - type: view
                  onClick:
                    - goto: ProviderNotes
                  style:
                    width: "0.59"
                    height: "0.1"
                    backgroundColor: "#ffffff"
                    border:
                      style: 3
                    borderWidth: "1"
                    marginLeft: "0.05"
                    borderRadius: "10"
                    borderColor: "0xdededf"
                    box-sizing: border-box
                    boxShadow: "0px 0px 6px 0.5px #DEDEDF"
                    display: "inline-block"
                  children:
                    - type: view
                      style:
                        marginLeft: "0.03"
                        display: "inline-block"
                        height: "0.12"
                        textAlign:
                          x: center
                      children:
                        - type: image
                          path: medicalRecords.svg
                          style:
                            marginTop: "0.022"
                            height: "0.05"
                    - type: view
                      style:
                        width: "0.37"
                        height: "0.06"
                        marginTop: "0.03"
                        marginLeft: "0.0246"
                        display: "inline-block"
                      children:
                        - type: label
                          text: "Medical Documents"
                          dataKey:
                          style:
                            fontSize: .Nfont.h12
                            fontWeight: "600"
                            color: "#333333"
                        - type: label
                          text: view all documents here
                          dataKey:
                          style:
                            fontSize: .Nfont.h12
                            fontWeight: "400"
                            color: "#666666"
                            marginTop: "0.005"

                - type: view
                  style:
                    marginLeft: "0.03"
                    width: "0.28"
                    height: "0.1"
                    backgroundColor: ..formData.backgroundColor_status
                    pointerEvents: ..formData.pointerEvents_payStatus
                    opacity: ..formData.opacity_payStatus
                    border:
                      style: 3
                    borderWidth: "1"
                    borderRadius: "10"
                    borderColor: "0xdededf"
                    box-sizing: border-box
                    boxShadow: "0px 0px 6px 0.5px #DEDEDF"
                    display: "inline-block"
                    textAlign:
                      x: "center"
                  onClick:
                    - goto: PaymentReceipt
                  children:
                    - type: image
                      path: paymentYellow.svg
                      style:
                        marginTop: "0.01"
                        height: "0.045"
                    - type: label
                      text: "Receipt"
                      style:
                        height: "auto"
                        width: "0.28"

                        fontSize: .Nfont.h12
                        color: "#333333"
                        fontWeight: "600"
                        textAlign:
                          x: center

        - type: view
          style:
            marginTop: "0.01"
            height: "0.05"
            backgroundColor: "#f0f0f0"
            width: "1"
          children:
            - type: label
              text: Participants
              style:
                display: "inline-block"
                marginLeft: "0.05"
                color: "0x666666"
                height: "0.05"
                width: "0.72266"
                lineHeight: 5vh

                fontSize: .Nfont.h14
                fontWeight: "600"
                textAlign:
                  x: left
            - type: label
              text: + Invite
              dataKey:
              onClick:
                - actionType: evalObject
                  object:
                    - .Global.formData.pageName@: "AppointmentLobby"
                - goto: ChooseInvite
              style:
                display: "inline-block"
                marginLeft: "0.05"
                height: "0.05"
                width: "auto"
                textDecoration: underline
                lineHeight: 5vh

                fontSize: .Nfont.h14
                fontWeight: "400"
                color: "#2988e6"
                textAlign:
                  x: left
        - type: view
          style:
            marginTop: "0.02"
            height: "auto"
            width: "0.9"
            marginLeft: "0.05"
            color: "0x4b4b4b"
          children:
            - .PresListView:
              children:
                - .PresLabelLeft:
                  text: Provider
                - .PresLabelRight:
                  dataKey: dataObject.name.providerName
            - .PresListView:
              children:
                - .PresLabelLeft:
                  text: Patient
                - .PresLabelRight:
                  dataKey: dataObject.name.patientName
            - type: list
              contentType: listObject
              listObject: ..formData.participants
              iteratorVar: itemObject
              style:
                display: ..formData.participants_others
                width: "0.9"
                margin: "0"
                marginTop: "0"
                height: "auto"
              children:
                - type: listItem
                  itemObject: ""
                  style:
                    width: "0.9"
                    height: "auto"
                    left: "0"
                    marginTop: "0.01"
                    overflow: hidden
                  children:
                    - .PresLabelLeft:
                      dataKey: itemObject.role
                    - .PresLabelRight:
                      dataKey: itemObject.roleName
    - .NextButtonView:
      style:
        top: "0.92"
        height: "0.08"
        width: "1"
        boxShadow: "0px 1px 10px #dbdfe3"
        overflow: hidden
      children:
        - type: button
          text: Back To Dashboard
          viewTag: nextBtn
          style:
            marginTop: "0.02"
            marginLeft: "0.2"
            width: "0.6"
            height: "0.04"
            backgroundColor: "0x2988e6"
            border:
              style: 5
            borderRadius: "4"

            color: "0xffffff"
            fontWeight: "600"
            fontSize: .Nfont.h14
            textAlign:
              x: center
          onClick:
            - actionType: evalObject
              object:
                .Global.VideoChatObjStore.reference.edge@: =..dataObject
            - goto: Dashboard
    # 不要删除
    # - type: scrollView
    #   style:
    #     left: "0"
    #     width: "1"
    #     top: "0"
    #     height: "1"
    #     overflow: scroll
    #   children:
    #     - .BaseHeader:
    #     - .HeaderLeftButton:
    #     - type: view
    #       style:
    #         width: "1"
    #         height: "0.05"
    #         top: "0.1"
    #         left: "0"
    #         backgroundColor: "#F0F0F0"
    #       children:
    #         - type: label
    #           text: "Appointment Info"
    #           style:
    #             color: "0x4b4b4bff"
    #             fontSize: "15"
    #             width: "0.5"
    #             height: "0.05"
    #             top: "0"
    #             left: "0.08"
    #
    #             textAlign:
    #               y: center
    #     - type: view
    #       style:
    #         top: "0.15"
    #         width: "1"
    #         height: "0.22"
    #         backgroundColor: "0xffffff"
    #
    #       children:
    #         - type: label
    #           text: "Patient Name"
    #           style:
    #             color: "#4B4B4B"
    #             fontSize: "15"
    #             width: "0.4"
    #             left: "0.08"
    #             height: "0.04"
    #             top: "0.015"
    #             # textIndent: '25px'
    #             lineHeight: "2"
    #         - type: label
    #           text: "Visit Type"
    #           style:
    #             color: "#4B4B4B"
    #             fontSize: "15"
    #             width: "0.4"
    #             left: "0.08"
    #             height: "0.04"
    #             top: "0.053"
    #             # textIndent: '25px'
    #             lineHeight: "2"
    #         - type: label
    #           text: "Reason for Visit"
    #           style:
    #             color: "#4B4B4B"
    #             fontSize: "15"
    #             width: "0.4"
    #             left: "0.08"
    #             height: "0.04"
    #             top: "0.091"
    #             # textIndent: '25px'
    #             lineHeight: "2"
    #         - type: label
    #           text: "Date"
    #           style:
    #             color: "#4B4B4B"
    #             fontSize: "15"
    #             width: "0.4"
    #             left: "0.08"
    #             height: "0.04"
    #             top: "0.129"
    #             # textIndent: '25px'
    #             lineHeight: "2"
    #         - type: label
    #           text: "Time"
    #           style:
    #             color: "#4B4B4B"
    #             fontSize: "15"
    #             width: "0.4"
    #             left: "0.08"
    #             height: "0.04"
    #             top: "0.167"
    #             # textIndent: '25px'
    #             lineHeight: "2"
    #         - type: label
    #           dataKey: dataObject.name.patientName
    #           style:
    #             color: "#000000"
    #             fontSize: .Nfont.h14
    #             width: "0.47"
    #             left: "0.45"
    #             height: "0.04"
    #             textAlign:
    #               x: right
    #             top: "0.015"
    #             # textIndent: '25px'
    #             lineHeight: "2"
    #         - type: label
    #           dataKey: dataObject.name.visitType
    #           style:
    #             color: "#000000"
    #             fontSize: .Nfont.h14
    #             width: "0.47"
    #             left: "0.45"
    #             height: "0.04"
    #             textAlign:
    #               x: right
    #             top: "0.053"
    #             # textIndent: '25px'
    #             lineHeight: "2"
    #         - type: label
    #           dataKey: dataObject.name.visitReason
    #           style:
    #             color: "#000000"
    #             fontSize: .Nfont.h14
    #             width: "0.47"
    #             left: "0.45"
    #             height: "0.04"
    #             textAlign:
    #               x: right
    #             top: "0.091"
    #             # textIndent: '25px'
    #             lineHeight: "2"
    #             # backgroundColor: "0xcdcdcd"
    #         - type: label
    #           text=func: .builtIn.date.ShowTimeDateUS
    #           dataKey: dataObject
    #           # text=func: .builtIn.string.formatUnixtime_en
    #           # dataKey: dataObject.stime
    #           style:
    #             color: "#000000"
    #             fontSize: "15"
    #             width: "0.65"
    #             left: "0.27"
    #             height: "0.04"
    #             textAlign:
    #               x: right
    #             top: "0.129"
    #             # textIndent: '25px'
    #             lineHeight: "2"
    #         - type: label
    #           text=func: .builtIn.date.ShowTimeSpan
    #           dataKey: dataObject
    #           # text=func: .builtIn.string.formatUnixtime_en
    #           # dataKey: dataObject.stime
    #           style:
    #             color: "#000000"
    #             fontSize: "15"
    #             width: "0.65"
    #             left: "0.27"
    #             height: "0.04"
    #             textAlign:
    #               x: right
    #             top: "0.167"
    #             # textIndent: '25px'
    #             lineHeight: "2"
    #     - type: view
    #       style:
    #         width: "1"
    #         height: "0.05"
    #         top: "0.35"
    #         left: "0"
    #         backgroundColor: "#F0F0F0"
    #       children:
    #         - type: label
    #           text: "Medical Info"
    #           style:
    #             color: "#4B4B4B"
    #             textAlign:
    #               y: center
    #             fontSize: "15"
    #             width: "0.5"
    #             height: "0.05"
    #             top: "0"
    #             left: "0.08"
    #
    #     - type: view
    #       style:
    #         top: "0.41"
    #         left: "0"
    #         height: "0.29"
    #         width: "1"
    #
    #         backgroundColor: "0xffffff"
    #       children:
    #         - type: view
    #           onClick:
    #             - goto: PatientChart
    #           style:
    #             width: "0.25"
    #             height: "0.125"
    #             borderRadius: "10"
    #             border:
    #               style: "3"
    #             borderWidth: "1"
    #             borderColor: "0xdededf"
    #             top: "0.03"
    #             left: "0.07"
    #             boxShadow: "0px 0px 0px 1.5px #DEDEDF"
    #           children:
    #             - type: image
    #               path: patientChart.svg
    #               style:
    #                 width: "0.11"
    #                 top: "0.02"
    #                 left: "0.07"
    #             - type: label
    #               text: "Patient Chart"
    #               style:
    #                 top: "0.085"
    #                 width: "0.25"
    #                 height: "0.05"
    #                 fontSize: .Nfont.h12
    #                 textAlign:
    #                   x: center
    #         - type: view
    #           onClick:
    #             - goto: VisitQuestionnaire
    #           style:
    #             width: "0.25"
    #             height: "0.125"
    #             borderRadius: "10"
    #             border:
    #               style: "3"
    #             borderWidth: "1"
    #             borderColor: "0xdededf"
    #             top: "0.03"
    #             left: "0.375"
    #             boxShadow: "0px 0px 0px 1.5px #DEDEDF"
    #           children:
    #             - type: image
    #               path: visitQueationnaire.svg
    #               style:
    #                 width: "0.12"
    #                 top: "0.016"
    #                 left: "0.07"
    #             - type: label
    #               text: "Visit Questionnaire"
    #               style:
    #                 top: "0.075"
    #                 width: "0.25"
    #                 height: "0.05"
    #                 fontSize: .Nfont.h12
    #                 textAlign:
    #                   x: center
    #         - type: view
    #           # onClick:
    #           #   - goto: VitalSigns
    #           style:
    #             width: "0.25"
    #             height: "0.125"
    #             borderRadius: "10"
    #             border:
    #               style: "3"
    #             borderWidth: "1"
    #             borderColor: "0xdededf"
    #             top: "0.03"
    #             left: "0.68"
    #             boxShadow: "0px 0px 0px 1.5px #DEDEDF"
    #           children:
    #             - type: image
    #               path: remoteHealth.svg
    #               style:
    #                 width: "0.12"
    #                 top: "0.02"
    #                 left: "0.07"
    #             - type: label
    #               text: "Vital Signs "
    #               style:
    #                 top: "0.085"
    #                 width: "0.25"
    #                 height: "0.05"
    #                 fontSize: .Nfont.h12
    #                 textAlign:
    #                   x: center
    #         - type: view
    #           onClick:
    #             - goto: MedicalDocuments_VistoryHistory
    #           style:
    #             width: "0.86"
    #             left: "0.07"
    #             top: "0.17"
    #             height: "0.1"
    #             boxShadow: "0px 0px 0px 1.5px #DEDEDF"
    #             borderRadius: "10"
    #             border:
    #               style: "3"
    #             borderWidth: "1"
    #             borderColor: "0xdededf"
    #           children:
    #             - type: image
    #               path: medicalRecords.svg
    #               style:
    #                 width: "0.12"
    #                 top: "0.018"
    #                 left: "0.07"
    #             - type: label
    #               text: "Medical Documents"
    #               style:
    #                 top: "0.035"
    #                 width: "0.4"
    #                 left: "0.25"
    #                 height: "0.04"
    #                 fontSize: "13"
    #                 textAlign:
    #                   x: center
    #     - type: view
    #       style:
    #         width: "1"
    #         height: "0.05"
    #         top: "0.72"
    #         left: "0"
    #         backgroundColor: "#F0F0F0"
    #       children:
    #         - type: label
    #           text: "Participants"
    #           style:
    #             color: "#4B4B4B"
    #             textAlign:
    #               y: center
    #             fontSize: "15"
    #             width: "1"
    #             height: "0.05"
    #             top: "0"
    #             left: "0.08"
    #
    #         - type: image
    #           path: addBlue.svg
    #           style:
    #             width: "0.04"
    #             left: "0.76"
    #             top: "0.015"
    #         - type: label
    #           text: Invite
    #           onClick:
    #             - goto: ParticipantsInvite
    #           style:
    #             color: "#2988E6"
    #             width: "0.19"
    #             left: "0.81"
    #             top: "0"
    #             height: "0.05"
    #             fontSize: .Nfont.h2
    #             textAlign:
    #               y: center
    #     - type: view
    #       style:
    #         height: "0.2"
    #         width: "1"
    #         left: "0"
    #         top: "0.77"
    #
    #       children:
    #         - type: label
    #           text: "Provider"
    #           style:
    #             color: "#4B4B4B"
    #             fontSize: "15"
    #             width: "0.4"
    #             left: "0.08"
    #             height: "0.05"
    #             top: "0.015"
    #             lineHeight: "2"
    #         - type: label
    #           text: "Patient"
    #           style:
    #             color: "#4B4B4B"
    #             fontSize: "15"
    #             width: "0.4"
    #             left: "0.08"
    #             height: "0.05"
    #             top: "0.05"
    #             lineHeight: "2"
    #         - type: label
    #           dataKey: dataObject.name.providerName
    #           # textBoard:
    #           #   - text: 'Lisa Lee M.D.'
    #           #   - br:
    #           #   - text: 'Thomas Mueller'
    #           style:
    #             color: "#000000"
    #             fontSize: "15"
    #             width: "0.35"
    #             left: "0.57"
    #             height: "0.05"
    #             textAlign:
    #               x: right
    #             top: "0.015"
    #             # textIndent: '25px'
    #             lineHeight: "2"
    #         - type: label
    #           dataKey: dataObject.name.patientName
    #           style:
    #             color: "#000000"
    #             fontSize: "15"
    #             width: "0.35"
    #             left: "0.57"
    #             height: "0.05"
    #             textAlign:
    #               x: right
    #             top: "0.05"
    #             # textIndent: '25px'
    #             lineHeight: "2"
    #         - type: list
    #           contentType: listObject
    #           listObject: ..listData.invitees.edge # to dataObject to enumerate the list
    #           iteratorVar: itemObject
    #           style:
    #             top: "0.08"
    #             left: "0"
    #             width: "1"
    #             height: "0.12"
    #             margin: "0"
    #             overflow: scroll
    #           children:
    #             - type: listItem
    #               itemObject: ""
    #               # onClick:
    #               #   - goto:
    #               style:
    #                 left: "0"
    #                 width: "1"
    #                 height: "0.03"
    #               children:
    #                 - type: label
    #                   text: "Patient"
    #                   style:
    #                     color: "#4B4B4B"
    #                     fontSize: "15"
    #                     width: "0.4"
    #                     left: "0.08"
    #                     height: "0.03"
    #                     # top: '0.015'
    #                     lineHeight: "2"
    #                 - type: label
    #                   dataKey: itemObject.name.firstName
    #                   style:
    #                     color: "#000000"
    #                     fontSize: "15"
    #                     width: "0.35"
    #                     left: "0.57"
    #                     top: "0"
    #                     height: "0.03"
    #                     textAlign:
    #                       x: right
    #                     # top: '0.015'
    #                     # textIndent: '25px'
    #                     lineHeight: "2"
    #     # - type: view
    #     #   style:
    #     #     width: '1'
    #     #     height: '0.05'
    #     #     top: '0.975'
    #     #     left: '0'
    #     #     backgroundColor: '#F0F0F0'
    #     #   children:
    #     #     - type: label
    #     #       text: Medical Insurance
    #     #       style:
    #     #         color: '#4B4B4B'
    #     #         textAlign:
    #     #           y: center
    #     #         fontSize: '15'
    #     #         width: '0.5'
    #     #         height: '0.05'
    #     #         top: '0'
    #     #         left: '0.08'
    #     #
    #     #     - type: label
    #     #       onClick:
    #     #         - goto: ViewMedicalInsurance
    #     #       text: View card
    #     #       style:
    #     #         color: '#2988E6'
    #     #         width: '0.3'
    #     #         left: '0.69'
    #     #         top: "0"
    #     #         height: '0.05'
    #     #         textAlign:
    #     #           y: center
    #     # - type: view
    #     #   style:
    #     #     width: '1'
    #     #     top: '1.025'
    #     #     height: '0.2'
    #     #     left: '0'
    #     #
    #     #   children:
    #     #     - type: view
    #     #       style:
    #     #         width: '0.8'
    #     #         left: '0.1'
    #     #         top: '0.025'
    #     #         height: '0.17'
    #     #         boxShadow: '0px 1.5px 3px 2px #DEDEDF'
    #     #         borderRadius: '10'
    #     #         border:
    #     #           style: "3"
    #     #         borderWidth: "1"
    #     #         borderColor: "0xdededf"
    #     #       children:
    #     #         - type: label
    #     #           textBoard:
    #     #             - text: 'Insurance Provider:'
    #     #             - br:
    #     #             - text: 'Policy holder name:'
    #     #             - br:
    #     #             - text: 'Group or Policy #'
    #     #             - br:
    #     #             - text: 'Member ID'
    #     #           style:
    #     #             color: "#4B4B4B"
    #     #             fontSize: '14'
    #     #             width: '0.4'
    #     #             left: '0.04'
    #     #             height: '0.15'
    #     #             top: '0.015'
    #     #             lineHeight: "2"
    #     #         - type: label
    #     #           textBoard:
    #     #             - text: 'Aetna'
    #     #             - br:
    #     #             - text: 'Susie Wright'
    #     #             - br:
    #     #             - text: '1Z9835'
    #     #             - br:
    #     #             - text: '9827405124'
    #     #           style:
    #     #             color: "#000000"
    #     #             fontSize: '14'
    #     #             width: '0.35'
    #     #             left: '0.4'
    #     #             height: '0.15'
    #     #             textAlign:
    #     #               x: right
    #     #             top: '0.015'
    #     #             # textIndent: '25px'
    #     #             lineHeight: "2"
    #     # - type: view
    #     #   style:
    #     #     width: '1'
    #     #     height: '0.05'
    #     #     top: '1.25'
    #     #     left: '0'
    #     #     backgroundColor: '#F0F0F0'
    #     #   children:
    #     #     - type: label
    #     #       text: Payment Method
    #     #       style:
    #     #         color: '#4B4B4B'
    #     #         textAlign:
    #     #           y: center
    #     #         fontSize: '15'
    #     #         width: '0.5'
    #     #         height: '0.05'
    #     #         top: '0'
    #     #         left: '0.08'
    #     #
    #     # - type: view
    #     #   style:
    #     #     width: '1'
    #     #     top: '1.3'
    #     #     height: '0.23'
    #     #     left: '0'
    #     #
    #     #   children:
    #     #     - type: view
    #     #       onClick:
    #     #         - goto: PaymentInformation
    #     #       style:
    #     #         left: '0'
    #     #         top: "0"
    #     #         height: '0.12'
    #     #         width: '1'
    #     #         border:
    #     #           style: "3"
    #     #           width: "1"
    #     #           color: "0xdededf"
    #     #         boxShadow: '0px 3px 2px 0.5px #DEDEDF'
    #     #       children:
    #     #         - type: image
    #     #           path: vISA.png
    #     #           style:
    #     #             left: '0.1'
    #     #             width: '0.25'
    #     #             top: '0.02'
    #     #         - type: label
    #     #           text: Card ending in 4444
    #     #           style:
    #     #             left: '0.43'
    #     #             top: '0.02'
    #     #             color: "0x000000"
    #     #             fontSize: '15'
    #     #         - type: label
    #     #           textBoard:
    #     #             - text: 'Exp 12/2020'
    #     #             - br:
    #     #             - text: 'Last used on: 10/19/2020'
    #     #           style:
    #     #             left: '0.43'
    #     #             top: '0.045'
    #     #             fontSize: '13'
    #     #             color: "0x000000"
    #     #             lineHeight: '1.6'
    # - type: view
    #   style:
    #     width: "1"
    #     height: "0.08"
    #     left: "0"
    #     top: "0.9"
    #     backgroundColor: "0xffffff"
    #     position: fixed
    #   children:
    #     - type: button
    #       onClick:
    #         # - actionType: updateObject
    #         #   dataKey: Global.roomInfo.edge.name.roomName
    #         #   dataObject: ..roomInfo.edge.name.roomName
    #         # - actionType: evalObject
    #         #   object: ..save
    #         - actionType: evalObject
    #           object:
    #             .Global.VideoChatObjStore.reference.edge@: =..dataObject
    #         - goto: Dashboard
    #       text: Back To Dashboard
    #       style:
    #         left: "0.1"
    #         height: "0.05"
    #         top: "0.015"
    #         width: "0.8"
    #         backgroundColor: "#2988E6"
    #         borderRadius: "5"
    #         color: "0xffffff"
    #         fontSize: "15"
    #         textAlign:
    #           x: center
