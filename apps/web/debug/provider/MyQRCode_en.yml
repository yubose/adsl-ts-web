MyQRCode:
  title: "My QR Code"
  init:
    - .SignInCheck
    - ..profile.docAPI.get
    - actionType: evalObject
      object:
        - =.builtIn.string.concat:
            dataIn:
              - '{"userName": "'
              - =.Global.MyProfile.name.data.fullName
              - '","id":"'
              - =.Global.currentUser.vertex.id
              - '","uid": "'
              - =.Global.currentUser.vertex.uid
              - '","identify": 10' # 10 provider 20 patient 30 facility
              - ',"function": 10' # 10 预约 provider  20   30 预约facility
              - "}"
            dataOut: MyQRCode.imagepath
    - if:
        - =..profile.docResponse.doc.0.id
        - actionType: evalObject
          object:
            - =.builtIn.string.concat:
                dataIn:
                  - =.Global.MyProfile.name.data.fullName
                  - "&nbsp;-&nbsp;"
                  - =.Global.MyProfile.name.data.title
                dataOut: MyQRCode.name
        #     - =.builtIn.string.concat:
        #         dataIn:
        #           - =..profile.docResponse.doc.0.name.data.firstName
        #           - " "
        #           - =..profile.docResponse.doc.0.name.data.lastName
        #         dataOut: MyQRCode.name
        - actionType: evalObject
          object:
            - .MyQRCode.name@: ""
  name: " "
  imagepath: ""

  profile:
    docResponse: ""
    docAPI:
      get:
        .DocAPI.get: ""
        api: rd
        id: .Global.rootNotebookID
        xfname: eid
        type: .DocType.DoctorProfile
        dataKey: profile.docResponse
        _nonce: =.Global._nonce
  components:
    - .BaseHeader:
    - .HeaderLeftButton:
      onClick:
        - actionType: builtIn
          funcName: goBack
          reload: true
    - .HeaderRightButton:
      text: Save
      onClick:
        - actionType: evalObject
          object:
            - =.builtIn.downloadQRCode:
                dataIn:
                  content: =.MyQRCode.imagepath
                  scale: 12
                  viewTag: saveQRCodeTag
        - actionType: popUp
          popUpView: successTag
      # children:
      #   - type: image
      #     path: download.svg
      #     style:
      #       left: "0.08"
      #       top: "0.04"
      #       height: "0.023"
      #       zIndex: 100
    - type: scrollView
      viewTag: saveQRCodeTag
      style:
        top: "0.1"
        left: "0.04"
        height: "0.88"
        width: "0.92"
        overflow: hidden
      children:
        - type: view
          style:
            marginTop: "0.12"
            height: "0.548"
            width: "0.92"
            backgroundColor: "0xf0f0f0"
            borderRadius: "10"
            overflow: hidden
          children:
            - type: view
              style:
                marginTop: "0.022"
                marginLeft: "0.048"
                width: "auto"
                height: "auto"
                overflow: hidden
              children:
                - type: view
                  style:
                    display: "inline-block"
                    height: "auto"
                    width: "0.16"
                    borderRadius: "5"
                    overflow: hidden
                    verticalAlign: middle
                  children:
                    - type: image
                      path: providerImage.svg
                      path=func: =.builtIn.utils.prepareDocToPath
                      dataKey: Global.MyProfile.name.data.avatar
                      style:
                        verticalAlign: middle
                        height: "0.0738"
                        width: "0.16"
                - type: label
                  dataKey: name
                  style:
                    display: "inline-block"
                    height: "auto"
                    width: "auto"
                    marginLeft: "0.045"
                    verticalAlign: middle
                    fontWeight: "700"
                    color: "0x4b4b4b"
                    fontSize: .Nfont.h16

            - type: image
              contentType: QRCode
              dataKey: MyQRCode.imagepath
              style:
                marginLeft: "0.048"
                marginTop: "0.016"
                height: "0.379"
                width: "0.821"
                box-sizing: "border-box"

            - type: label
              text: Scan the QR code to view Schedule Profile
              dataKey:
              style:
                marginTop: "0.016"
                width: "0.92"
                color: "0x4b4b4b"
                fontSize: .Nfont.h12
                fontWeight: "400"
                textAlign:
                  x: center
    # - type: scrollView
    #   viewTag: saveQRCodeTag
    #   style:
    #     top: "0.15"
    #     width: "1"
    #     height: "0.85"
    #   children:
    #     - type: view
    #       style:
    #         marginTop: "0.01"
    #         width: "0.9"
    #         left: "0.05"
    #         height: "0.6"
    #         backgroundColor: "0xF0F0F0"
    #         borderRadius: "5"
    #       children:
    #         - type: view
    #           style:
    #             marginTop: "0.01"
    #             top: "0"
    #             left: "0.05"
    #             height: "0.1"
    #             width: "0.22"
    #           children:
    #             - type: image
    #               path: providerImage.svg
    #               path=func: =.builtIn.utils.prepareDocToPath
    #               dataKey: Global.MyProfile.name.data.avatar
    #               # path:
    #               #   emit:
    #               #     actions:
    #               #       - if:
    #               #         - =.builtIn.string.equal:
    #               #             dataIn:
    #               #               string1: =..avatar.showdocument.name.data
    #               #               string2: "binFile"
    #               #         - ava.png
    #               #         - ..avatar.url
    #               style:
    #                 height: "0.1"
    #                 width: "0.22"
    #         - type: label
    #           dataKey: MenuBars.formData.providerTitle   #Global.currentUser.vertex.name.userName
    #           style:
    #             left: "0.28"
    #             marginTop: "0.02"
    #             fontWeight: "650"
    #             height: "0.08"
    #             width: "0.5"
    #             top: "0"
    #             fontFamily: "Arial"
    #             fontSize: .Nfont.h16
    #             textAlign:
    #               y: center
    #         # - type: view
    #         #   style:
    #         #     top: '0.12'
    #         #     width: "0.74"
    #         #     left: "0.08"
    #         #     height: "0.4"
    #         #     backgroundColor
    #         - type: image
    #           contentType: QRCode
    #           dataKey: imagepath
    #           style:
    #             top: "0.117"
    #             width: "0.8"
    #             height: "0.4"
    #             box-sizing: "border-box"
    #             left: "0.05"
    #             # border:
    #             #   style: 3
    #             # borderColor: "#ffffff"
    #             # borderWidth: "20"
    #         - type: label
    #           text: "Scan the QR code to add me on AiTmed"
    #           style:
    #             top: "0.543"
    #             width: "0.9"
    #             height: "0.08"
    #             fontSize: .Nfont.h14
    #             left: "0"
    #             textAlign:
    #               x: center
    - type: popUp
      viewTag: SendLinkTag
      style:
        left: "0"
        top: "0"
        width: "1"
        height: "1"
        backgroundColor: "0x00000066"
      children:
        - type: view
          style:
            top: "0.73"
            width: "0.9"
            left: "0.05"
            height: "0.14"
            borderRadius: "10"
            backgroundColor: "0xe9e9e9"
          children:
            - type: button
              text: Send Invite Link
              contentType: file
              style:
                top: "0.01"
                width: "0.9"
                # left: "0.05"
                height: "0.06"
                fontSize: "18"
                color: "0x1d88fc"
                backgroundColor: "0xe9e9e9"
                textAlign:
                  x: center
                # borderRadius: "5"
                border:
                  style: "2"
                  width: "0.0001"
                borderColor: "0x00000066"
            - type: button
              text: Save Image
              style:
                # left: "0.05"
                top: "0.07"
                width: "0.9"
                height: "0.06"
                fontSize: "18"
                color: "0x1d88fc"
                # borderRadius: "5"
                backgroundColor: "0xe9e9e9"
                textAlign:
                  x: center
                border:
                  style: 1
        - type: button
          text: Cancel
          style:
            top: "0.9"
            left: "0.05"
            width: "0.9"
            height: "0.06"
            fontSize: "18"
            color: "0x1d88fc"
            backgroundColor: "0xffffff"
            textAlign:
              x: center
            borderRadius: "10"
            border:
              style: 1
          onClick:
            - actionType: popUpDismiss
              popUpView: SendLinkTag

    - .SuccessfulOneLine:
      message: Save Successfully!
      viewTag: successTag
