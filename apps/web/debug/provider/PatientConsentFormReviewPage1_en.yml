PatientConsentFormReviewPage1:
  title: Patient Consent Form - HIPPA
  pageNumber:
  init: #Page initialization
    - .SignInCheck
    - =.builtIn.date.currentDateTime:
        dataIn:
        dataOut: Global.formData.auditLog.startTime
    - if:
        - =.Global.roomInfo.edge.id
        - ..apiRequest.patientConsentForm.docAPI.get
        - continue
    - .PatientConsentFormReviewPage1.formData@: =..apiRequest.patientConsentForm.docRes.doc.0

    - actionType: evalObject
      object:
        # 下载pdf的样式控制
        - .Global.formData.downloadPDF.titleName@: "Patient Consent Form - HIPPA"
        - .Global.formData.downloadPDF.scaleX@: 1
        - .Global.formData.downloadPDF.scaleY@: 1
        - .Global.formData.downloadPDF.originX@: 0
        - .Global.formData.downloadPDF.originY@: 0

  apiRequest:
    patientConsentForm:
      docRes: ""
      docReq:
        id: .Global.roomInfo.edge.id
        type: .DocType.PatientConsentForm
        xfname: eid
      docAPI:
        get:
          api: rd
          dataIn: PatientConsentFormReviewPage1.apiRequest.patientConsentForm.docReq
          dataOut: PatientConsentFormReviewPage1.apiRequest.patientConsentForm.docRes
  formData: ""

  components:
    - .BasePublicHeader:
      children:
        - .BasePublicHeaderLeft:
          leftClick:
            - actionType: evalObject
              object:
                - =.builtIn.utils.createAuditLog:
                    dataIn:
                      date: =.Global.formData.auditLog.startTime
                      actionTypeCode: .ActionTypeCode.view
                      recordTypeCode: 156161
                      eid: =.Global.formData.currentFacility.relationEdge.id
                      user: =.Global.MyProfile.name.data.fullName
                      userId: =.Global.currentUser.vertex.id
                      targetUserId: =.Global.formData.auditLog.patientId
                      accessPort: provider
                    dataOut: Global.formData.auditLog.result
            - actionType: builtIn
              funcName: goBack
              reload: true
        - .BasePublicHeaderTitle:
        - .BasePublicHeaderMenu:
    - type: scrollView
      viewTag: mainView
      style:
        ..style.scrollBox:
      children:
        - type: label
          text: "Please carefully read the following informed consent:"
          style:
            marginTop: "0.0246"
            marginLeft: "0.04"
            width: "0.92"
            height: "auto"
            color: "0x333333"
            fontSize: .Nfont.h16
            fontWeight: "700"
            lineHeight: "2.58vh"

        - type: label
          text: The Department of Health and Human Services has established a “Privacy Rule” to help insure that personal health care information is protected for privacy. The Privacy Rule was also created in order to provide a standard for certain health care providers to obtain their patients' consent for uses and disclosures of health information about the patient to carry out treatment, payment or health care operations.
          dataKey:
          style:
            marginTop: "0.0246"
            marginLeft: "0.04"
            width: "0.92"
            height: "auto"
            color: "0x333333"
            fontSize: .Nfont.h14
            lineHeight: "2.58vh"

        - type: label
          text: As our patient we want you to know that we respect the privacy of your personal medical records and will do all we can to secure and protect that privacy. We strive to always take reasonable precautions to protect your privacy. When it is appropriate and necessary, we provide the minimum necessary information to only those we feel are in need of your healthcare information and information about treatment, payment or health care operations, in order to provide health care that is in your best interest.
          dataKey:
          style:
            marginTop: "0.0246"
            marginLeft: "0.04"
            width: "0.92"
            height: "auto"
            color: "0x333333"
            fontSize: .Nfont.h14
            lineHeight: "2.58vh"

        - type: label
          text: We also want you to know that we support your full access to your personal medical records. We may have indirect treatments relationships with you (such as laboratories that only interact with physicians and not patients), and may have to disclose personal health information for purposes of treatment, payment, or health operations, These entities are most often not required to obtain patient consent.
          dataKey:
          style:
            marginTop: "0.0246"
            marginLeft: "0.04"
            width: "0.92"
            height: "auto"
            color: "0x333333"
            fontSize: .Nfont.h14
            lineHeight: "2.58vh"

        - type: label
          text: You may refuse to consent to the use or disclosure of your personal health information but this must be in writing. Under this law, we have the right to refuse to treat you should you choose to refuse to disclose your Personal Health Information (PIH). If you choose to give consent in this document, at some future time you may request to refuse all or part of your PHI. You may not revoke actions that have already been taken which relied on this or a previously signed consent.
          dataKey:
          style:
            marginTop: "0.0246"
            marginLeft: "0.04"
            width: "0.92"
            height: "auto"
            color: "0x333333"
            fontSize: .Nfont.h14
            lineHeight: "2.58vh"

        - type: label
          text: If your have objections to this form, please ask to speak with out HIPPA Compliance Officer.
          dataKey:
          style:
            marginTop: "0.0246"
            marginLeft: "0.04"
            width: "0.92"
            height: "auto"
            color: "0x333333"
            fontSize: .Nfont.h14
            lineHeight: "2.58vh"

        - type: label
          text: You have the right to review our privacy notice to request restrictions and revoke consent in writing after you have reviewed our privacy notice.
          dataKey:
          style:
            marginTop: "0.0246"
            marginLeft: "0.04"
            width: "0.92"
            height: "auto"
            color: "0x333333"
            fontSize: .Nfont.h14
            lineHeight: "2.58vh"

        - type: label
          text: HIPPA Notice of Privacy Practices
          dataKey:
          style:
            marginTop: "0.0246"
            marginLeft: "0.04"
            width: "0.92"
            height: "auto"
            color: "0x333333"
            fontSize: .Nfont.h16
            fontWeight: "700"

        - type: label
          text: "Signature below is only acknowledgement that you havereceived this Notice of our Privacy Practices:"
          dataKey:
          style:
            marginTop: "0.01"
            marginLeft: "0.04"
            width: "0.92"
            height: "auto"
            color: "0x333333"
            fontSize: .Nfont.h14
            lineHeight: "2.58vh"

        - .DocPublicStyleFiveBox:
          children:
            - .DocPublicStyleFiveTitle:
              text: "Name of Recipient/Healthcare Proxy"
            - type: label
              text: "No content"
              dataKey: formData.name.data.signatureHippa.recipientName
              style:
                ..style.input:
        - type: label
          text: "Signature"
          dataKey:
          style:
            ..style.secondLabel:

        - type: view
          style:
            marginTop: "0.01"
            marginLeft: "0.04"
            height: "0.128"
            width: "0.9"
            border:
              style: "4"
              color: "0xa9a9a9"
            borderWidth: "2"
          children:
            - type: label
              text: X
              style:
                .SignLabelStyle:
                zIndex: -1
            # 显示暂存的签名
            - type: image
              viewTag: signatureShowTag
              path=func: .builtIn.utils.prepareDocToPath
              # 传入签名文档的id
              dataKey: formData.name.data.signatureHippa.signatureId
              style:
                width: "0.88"
                height: "0.128"
                overflow: scroll
        - type: view
          style:
            ..style.timeBox:
          children:
            - type: view
              viewTag: signatureTimeTag
              style:
                ..style.signatureTimeBox:
              children:
                - type: label
                  text=func: .builtIn.string.formatUnixtime_en
                  dataKey: formData.name.data.signatureHippa.signatureTime
                  style:
                    ..style.signatureCtime:
                - type: label
                  text: "Digitally Signed"
                  dataKey:
                  style:
                    ..style.digitally:
        - type: view
          style:
            marginLeft: "0.04"
            width: "0.92"
            height: "auto"
            overflow: hidden
          children:
            - type: view
              style:
                ..style.blockBox:
                marginTop: "0.02216"
              children:
                - type: label
                  text: Patient Name
                  style:
                    ..style.blockBoxLeft:
                - type: label
                  text:
                  dataKey: formData.name.data.patientName
                  style:
                    ..style.blockBoxRight:
            - type: view
              style:
                ..style.blockBox:
              children:
                - type: label
                  text: Date
                  style:
                    ..style.blockBoxLeft:
                - type: label
                  text=func: .builtIn.string.formatUnixtimeL_en
                  dataKey: formData.ctime
                  style:
                    ..style.blockBoxRight:
        - type: view
          style:
            marginTop: "0.03"
    - .HeaderPopUpMenu:

  style:
    scrollBox:
      width: "1"
      height: "0.945"
      boxSizing: "border-box"
      overflow: "scroll"
    btnBox:
      width: "1"
      height: "0.0972"
      boxSizing: "border-box"
      overflow: "scroll"
      backgroundColor: "#ffffff"
      boxShadow: "1px 1px 4px 1px #dededf"
      textAlign:
        x: center
    btn:
      marginTop: "0.0123"
      height: "0.0443"
      width: "0.84"
      border:
        style: 1
      borderRadius: "5"
      backgroundColor: "#2988e6"
      color: "#ffffff"
      fontSize: .Nfont.h14
      boxSizing: border-box
      fontWeight: "600"
      textAlign:
        x: center
    blockBox:
      marginTop: "0.006157"
      height: "auto"
      width: "0.92"
    blockBoxLeft:
      display: "inline-block"
      width: "auto"
      height: "auto"
      color: "0x666666"
      fontSize: .Nfont.h12
      verticalAlign: middle
    blockBoxRight:
      marginLeft: "0.0373"
      display: "inline-block"
      width: "auto"
      height: "auto"
      color: "0x333333"
      fontSize: .Nfont.h14
      fontWeight: "600"
      verticalAlign: middle
    secondLabel:
      marginLeft: "0.04"
      width: "0.92"
      fontSize: .Nfont.h14
      fontWeight: "700"
      color: "0x333333"
      marginTop: "0.0246"
      lineHeight: "2.58vh"
    signTips:
      marginLeft: "0.04"
      display: "inline-block"
      color: "#666666"
      fontSize: .Nfont.h12
      verticalAlign: middle
      width: "0.8266"
      height: "auto"
    timeBox:
      marginLeft: "0.04"
      width: "0.92"
      height: "auto"
      overflow: hidden
    signatureTimeBox:
      marginTop: "0.01"
      height: "auto"
      width: "0.92"
    signatureCtime:
      display: "inline-block"
      width: "auto"
      height: "auto"
      fontSize: .Nfont.h12
      color: "0x757575"
      verticalAlign: middle
    digitally:
      marginLeft: "0.02"
      display: "inline-block"
      width: "auto"
      height: "auto"
      fontSize: .Nfont.h12
      color: "0x757575"
      verticalAlign: middle
    input:
      marginTop: "0.009852"
      height: "auto"
      width: "0.92"
      fontSize: .Nfont.h14
      color: "#333333"
      boxSizing: border-box
      borderRadius: "4"
      padding: "6px 12px"
      wordBreak: break-word
      backgroundColor: "#f4f4f4"
