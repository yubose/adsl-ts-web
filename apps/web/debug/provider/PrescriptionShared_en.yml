PrescriptionShared:
  pageNumber: "181"
  title: "Prescription(RX)"
  appointmentInfo: .Global.roomInfo.edge
  init:
    - .SignInCheck
    - =.builtIn.date.currentDateTime:
        dataIn:
        dataOut: Global.formData.auditLog.startTime
    # 记录下载行为
    - .Global.formData.auditLog.actionTypeCode@: =.ActionTypeCode.download
    - .Global.formData.auditLog.recordTypeCode@: =.DocType.Prescription

    - ..formData@: =.Global.Note
    - actionType: evalObject
      object:
        .Global._nonce@:
          =.builtIn.math.random: ""

    # 判断是否私有只读
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =.Global.Note.tage
              string2: 1
        - actionType: evalObject
          object:
            - if:
                - =.builtIn.string.equal:
                    dataIn:
                      string1: =.Global.Note.name.data.classTag.name
                      string2: "Admin"
                - actionType: evalObject
                  object:
                    # 显示重置滚动条高度按钮
                    - ..formDataTemp.scrollHeight@: "0.945"
                    # 显示分享按钮
                    - ..formDataTemp.displayBtn@: "none"
                - actionType: evalObject
                  object:
                    # 取回当前文档信息
                    - ..apiRequest.prescription.docReq@: =.Global.Note
                    # 显示重置滚动条高度按钮
                    - ..formDataTemp.scrollHeight@: "0.84729"
                    # 显示分享按钮
                    - ..formDataTemp.displayBtn@: "block"
        - actionType: evalObject
          object:
            # 显示重置滚动条高度按钮
            - ..formDataTemp.scrollHeight@: "0.945"
            # 显示分享按钮
            - ..formDataTemp.displayBtn@: "none"
    - actionType: evalObject
      object:
        - =.builtIn.array.getListLength:
            dataIn:
              object: =..formData.name.data.prescriptionArray
            dataOut: PrescriptionShared.formDataTemp.listDatalength
    # 判断Diagnoses
    - actionType: evalObject
      object:
        - if:
            - =.builtIn.string.equal:
                dataIn:
                  string1: =..formDataTemp.listDatalength
                  string2: "0"
            - actionType: evalObject
              object:
                - ..formDataTemp.listFlag@: "none"
                - ..formDataTemp.flag@: "block"
            - actionType: evalObject
              object:
                - ..formDataTemp.listFlag@: "block"
                - ..formDataTemp.flag@: "none"
    - actionType: evalObject
      object:
        - if:
            # 根据Liz要求，所有release后的，不管是否让patient看，都可以下载pdf
            - =.builtIn.number.typeIsValid:
                dataIn:
                  docType: =.Global.Note.type
                  localArr: [1]
                  binaryArr: [1]
            - continue
            - ..formDataTemp.downFlag@: "none"
        # 下载pdf的样式控制
        - .Global.formData.downloadPDF.titleName@: "Prescription(RX)"
        - .Global.formData.downloadPDF.scaleX@: 0.86
        - .Global.formData.downloadPDF.scaleY@: 0.86
        - .Global.formData.downloadPDF.originX@: 0
        - .Global.formData.downloadPDF.originY@: 0
  formData: ""
  formDataTemp:
    # 控制当前滚动条高度
    scrollHeight: "0.84729"
    # 是否显示分享按钮
    displayBtn: "none"
    listDatalength: ""
    listFlag: "none"
    flag: "none"
    downFlag: "inline-block"
  apiRequest:
    prescription:
      docRes: ""
      docReq: ""
      docAPI:
        .DocAPI: ""
        store:
          api: cd
          dataIn: PrescriptionShared.apiRequest.prescription.docReq
          dataOut: PrescriptionShared.apiRequest.prescription.docRes
  components:
    - .BasePublicHeader:
      children:
        - .BasePublicHeaderLeft:
          leftClick:
            - actionType: evalObject
              object:
                - =.builtIn.utils.createAuditLog:
                    dataIn:
                      actionTypeCode: .ActionTypeCode.view
                      recordTypeCode: .DocType.Prescription
                      eid: =.Global.formData.currentFacility.relationEdge.id
                      date: =.Global.formData.auditLog.startTime
                      user: =.Global.MyProfile.name.data.fullName
                      userId: =.Global.currentUser.vertex.id
                      targetUserId: =.Global.formData.auditLog.patientId
                      targetUser: =.Global.formData.auditLog.patientName
                      accessPort: provider
                    dataOut: Global.formData.auditLog.result
            - actionType: builtIn
              funcName: goBack
              reload: true
        - .BasePublicHeaderTitle:
        - .BasePublicHeaderMenu:
          style:
            display: ..formDataTemp.downFlag
    - type: scrollView
      viewTag: mainView
      style:
        ..style.scrollBox:
        height: ..formDataTemp.scrollHeight
      children:
        - type: view
          style:
            marginLeft: "0.04"
            marginTop: "0.0246"
            height: "auto"
            width: "0.92"
          children:
            - type: image
              path: office-building.svg
              path=func: .builtIn.utils.prepareDocToPath
              dataKey: formData.name.data.facilityInfo.facilityAvatarID
              style:
                verticalAlign: middle
                display: "inline-block"
                height: "0.0578"
                width: "5.78vh"
            - type: view
              style:
                verticalAlign: middle
                marginLeft: "0.08"
                display: "inline-block"
                height: "auto"
                width: "0.71"
                overflow: hidden
              children:
                - type: label
                  dataKey: formData.name.data.facilityInfo.facilityName
                  style:
                    width: "0.71"
                    height: "auto"
                    fontSize: .Nfont.h20
                    fontWeight: "600"

                    verticalAlign: middle
                    wordWrap: break-word
                - type: label
                  dataKey: formData.name.data.facilityInfo.address
                  style:
                    marginTop: "0.0110"
                    width: "0.71"
                    height: "auto"
                    fontSize: .Nfont.h14
                    color: "0x666666"

                    verticalAlign: middle
                    wordWrap: break-word
        - type: view
          style:
            marginLeft: "0.04"
            marginTop: "0.00738"
            width: "0.92"
            height: "auto"
            overflow: hidden

          children:
            - .DocPublicStyleOneBox:
              children:
                - .DocPublicStyleOneLeft:
                  text: Email
                - .DocPublicStyleOneRight:
                  dataKey: formData.name.data.facilityInfo.email
            - .DocPublicStyleOneBox:
              children:
                - .DocPublicStyleOneLeft:
                  text: Website
                - .DocPublicStyleOneRight:
                  dataKey: formData.name.data.facilityInfo.website
            - .DocPublicStyleOneBox:
              children:
                - .DocPublicStyleOneLeft:
                  text: "Main #"
                - .DocPublicStyleOneRight:
                  dataKey: formData.name.data.facilityInfo.phone
            - .DocPublicStyleOneBox:
              children:
                - .DocPublicStyleOneLeft:
                  text: "Fax #"
                - .DocPublicStyleOneRight:
                  dataKey: formData.name.data.facilityInfo.fax
        - .DocPublicLine:
        - type: view
          style:
            marginLeft: "0.04"
            marginTop: "0.00738"
            width: "0.92"
            height: "auto"
            overflow: hidden
          children:
            - .DocPublicStyleTwoBox:
              children:
                - .DocPublicStyleTwoLeft:
                  text: Exam Date
                - .DocPublicStyleTwoRight:
                  text=func: .builtIn.string.formatUnixtime_en
                  dataKey: formData.name.data.patientInfo.examDate
            - .DocPublicStyleTwoBox:
              children:
                - .DocPublicStyleTwoLeft:
                  text: Patient Name
                - .DocPublicStyleTwoRight:
                  dataKey: formData.name.data.patientInfo.fullName
            - .DocPublicStyleTwoBox:
              children:
                - .DocPublicStyleTwoLeft:
                  text: Date of Birth
                - .DocPublicStyleTwoRight:
                  dataKey: formData.name.data.patientInfo.dob
            - .DocPublicStyleTwoBox:
              children:
                - .DocPublicStyleTwoLeft:
                  text: "Phone #"
                - .DocPublicStyleTwoRight:
                  dataKey: formData.name.data.patientInfo.phoneNumber
            - .DocPublicStyleTwoBox:
              children:
                - .DocPublicStyleTwoLeft:
                  text: "Email"
                - .DocPublicStyleTwoRight:
                  dataKey: formData.name.data.patientInfo.email
            - .DocPublicStyleTwoBox:
              children:
                - .DocPublicStyleTwoLeft:
                  text: "Patient Address"
            - .DocPublicStyleTwoBox:
              children:
                - .DocPublicStyleTwoLeft:
                  dataKey: formData.name.data.patientInfo.address
                  style:
                    height: "auto"
                    width: "0.92"
                    fontSize: .Nfont.h14
                    wordWrap: break-word
                    color: "0x333333"
                    fontWeight: "600"
        - .DocPublicLine:

        - type: view
          viewTag: prescriptionTag
          style:
            marginTop: "0.0246"
            marginLeft: "0.04"
            width: "0.92"
            height: "auto"
            border:
              style: 1
            boxSizing: border-box
            borderRadius: "4"
            backgroundColor: "0xf4f4f4"
            overflow: hidden
            paddingBottom: "0.0147"
          children:
            - type: label
              text: No content
              style:
                display: ..formDataTemp.flag
                height: "auto"
                width: "auto"
                fontSize: .Nfont.h14
                padding: "12px 12px 0"
                color: "0x333333"

            - type: list
              contentType: listObject
              listObject: =..formData.name.data.prescriptionArray
              iteratorVar: itemObject
              style:
                width: "0.92"
                height: "auto"
                boxSizing: border-box
              children:
                - type: listItem
                  style:
                    width: "0.9"
                    height: "auto"
                    overflow: hidden
                    boxSizing: border-box
                    backgroundColor: "0xf4f4f4"
                  children:
                    - type: view
                      style:
                        marginTop: "0.0147"
                        width: "auto"
                        height: "auto"
                      children:
                        - type: view
                          style:
                            marginLeft: "0.032"
                            width: "0.856"
                            height: "auto"
                          children:
                            - type: label
                              text: "&#8226"
                              dataKey:
                              style:
                                marginLeft: "0.032"
                                boxSizing: border-box
                                display: "inline-block"
                                height: "auto"
                                width: "auto"
                                fontSize: .Nfont.h16
                                verticalAlign: top
                            - type: label
                              text: Drug
                              style:
                                marginLeft: "0.0213"
                                display: "inline-block"
                                height: "auto"
                                width: "0.78"
                                fontSize: .Nfont.h12
                                color: "0x666666"
                                verticalAlign: middle
                        - type: label
                          dataKey: itemObject.drugName
                          style:
                            marginLeft: "0.1013"
                            width: "0.78"
                            height: "auto"
                            textAlign:
                              x: left
                            fontSize: .Nfont.h14
                            fontWeight: "600"
                            wordWrap: break-word
                        - type: label
                          text: Generic Name
                          style:
                            marginTop: "0.0074"
                            marginLeft: "0.1013"
                            width: "0.78"
                            height: "auto"
                            fontSize: .Nfont.h12
                            color: "0x666666"
                        - type: label
                          dataKey: itemObject.genericName
                          style:
                            marginLeft: "0.1013"
                            width: "0.78"
                            height: "auto"
                            textAlign:
                              x: left
                            fontSize: .Nfont.h14
                            fontWeight: "600"
                            wordWrap: break-word
                        - type: label
                          text: Strength
                          style:
                            marginTop: "0.0074"
                            marginLeft: "0.1013"
                            width: "0.78"
                            height: "auto"
                            fontSize: .Nfont.h12
                            color: "0x666666"
                        - type: label
                          dataKey: itemObject.strength
                          style:
                            marginLeft: "0.1013"
                            width: "0.78"
                            height: "auto"
                            textAlign:
                              x: left
                            fontSize: .Nfont.h14
                            fontWeight: "600"
                            wordWrap: break-word
                        - type: view
                          style:
                            marginTop: "0.0074"
                            marginLeft: "0.1013"
                            width: "0.78"
                            height: "auto"
                            overflow: hidden
                          children:
                            - type: view
                              style:
                                display: "inline-block"
                                height: "auto"
                                width: "0.416"
                                overflow: hidden
                                boxSizing: border-box
                              children:
                                - type: label
                                  text: Dosage Form
                                  style:
                                    width: "0.416"
                                    height: "auto"
                                    fontSize: .Nfont.h12
                                    color: "0x666666"
                                    boxSizing: border-box
                                - type: label
                                  dataKey: itemObject.dosage
                                  style:
                                    width: "0.416"
                                    height: "auto"
                                    textAlign:
                                      x: left
                                    fontSize: .Nfont.h14
                                    fontWeight: "600"
                                    wordWrap: break-word
                            - type: view
                              style:
                                marginLeft: "0.0492"
                                display: "inline-block"
                                height: "auto"
                                width: "0.083"
                                overflow: hidden
                                boxSizing: border-box
                              children:
                                - type: label
                                  text: Route
                                  style:
                                    width: "auto"
                                    height: "auto"
                                    fontSize: .Nfont.h12
                                    color: "0x666666"
                                    boxSizing: border-box
                                - type: label
                                  dataKey: itemObject.route
                                  style:
                                    width: "0.083"
                                    height: "auto"
                                    textAlign:
                                      x: left
                                    fontSize: .Nfont.h14
                                    fontWeight: "600"
                                    wordWrap: break-word
                        - type: view
                          style:
                            marginTop: "0.0074"
                            marginLeft: "0.1013"
                            width: "0.78"
                            height: "auto"
                            overflow: hidden
                          children:
                            - type: view
                              style:
                                display: "inline-block"
                                height: "auto"
                                width: "0.238"
                                overflow: hidden
                                boxSizing: border-box
                              children:
                                - type: label
                                  text: Quantity
                                  style:
                                    width: "0.238"
                                    height: "auto"
                                    fontSize: .Nfont.h12
                                    color: "0x666666"
                                    boxSizing: border-box
                                - type: label
                                  dataKey: itemObject.frequency
                                  style:
                                    width: "0.238"
                                    height: "auto"
                                    textAlign:
                                      x: left
                                    fontSize: .Nfont.h14
                                    fontWeight: "600"
                                    wordWrap: break-word
                            - type: view
                              style:
                                marginLeft: "0.032"
                                display: "inline-block"
                                height: "auto"
                                width: "0.238"
                                overflow: hidden
                                boxSizing: border-box
                              children:
                                - type: label
                                  text: Directions
                                  style:
                                    width: "0.238"
                                    height: "auto"
                                    fontSize: .Nfont.h12
                                    color: "0x666666"
                                    boxSizing: border-box
                                - type: label
                                  dataKey: itemObject.disp
                                  style:
                                    width: "0.238"
                                    height: "auto"
                                    textAlign:
                                      x: left
                                    fontSize: .Nfont.h14
                                    fontWeight: "600"
                                    wordWrap: break-word
                            - type: view
                              style:
                                marginLeft: "0.032"
                                display: "inline-block"
                                height: "auto"
                                width: "0.238"
                                overflow: hidden
                                boxSizing: border-box
                              children:
                                - type: label
                                  text: Refills
                                  style:
                                    width: "0.238"
                                    height: "auto"
                                    fontSize: .Nfont.h12
                                    color: "0x666666"
                                    boxSizing: border-box
                                - type: label
                                  dataKey: itemObject.refills
                                  style:
                                    width: "0.238"
                                    height: "auto"
                                    textAlign:
                                      x: left
                                    fontSize: .Nfont.h14
                                    fontWeight: "600"
                                    wordWrap: break-word
                        - type: view
                          style:
                            marginTop: "0.0147"
                            marginLeft: "0.1013"
                            width: "0.78"
                            height: "1px"
                            backgroundColor: "0xf0f0f0"

        - type: view
          style:
            marginTop: "0.0246"
            marginLeft: "0.04"
            height: "auto"
            width: "0.92"
          children:
            - type: label
              textBoard:
                - text: Prescription is
                - text: "&nbsp;VOID&nbsp;"
                  color: "0xfb5051"
                - text: if the number of drugs prescribed is not noted.
              style:
                width: "0.7173"
                display: "inline-block"
                lineHeight: "2.58vh"
                fontSize: .Nfont.h14
                verticalAlign: top
            - type: textField
              placeholder: "0"
              dataKey: formData.name.data.prescriptionCount
              isEditable: "false"
              style:
                marginLeft: "0.0933"
                display: "inline-block"
                width: "0.1093"
                height: "0.0369"
                boxSizing: border-box
                verticalAlign: top
                border:
                  style: "1"
                borderRadius: "4"
                textIndent: "12px"
                fontSize: .Nfont.h14
                backgroundColor: "0xf4f4f4"
                color: "0x333333"
        - .DocPublicLine:
        - type: view
          style:
            marginLeft: "0.04"
            marginTop: "0.03"
            width: "0.92"
            height: "auto"
            overflow: hidden
          children:
            - type: view
              style:
                height: "auto"
                width: "0.92"
              children:
                - type: label
                  text: "Signature"
                  style:
                    display: "inline-block"
                    width: "0.816"
                    fontSize: .Nfont.h14
                    height: "auto"
                    color: "0x333333"
                    fontWeight: "600"
                    textAlign:
                      x: left
        - type: view
          style:
            marginLeft: "0.04"
            marginTop: "0.01"
            height: "0.128"
            width: "0.9"
            border:
              style: "4"
              color: "0xa9a9a9"
            borderWidth: "2"
          children:
            - type: label
              text: X
              style:
                .SignLabelStyle:
            # 显示暂存的签名
            - type: image
              viewTag: signatureShowTag
              path=func: .builtIn.utils.prepareDocToPath
              # 传入签名文档的id
              dataKey: PrescriptionShared.formData.name.data.signatureId
              style:
                left: "0"
                width: "0.88"
                top: "0"
                height: "0.128"
                overflow: scroll
                zIndex: "10"

        - type: view
          style:
            marginLeft: "0.04"
            marginTop: "0.0146"
            width: "0.92"
            height: "auto"
            overflow: hidden
          children:
            - type: view
              viewTag: signatureTimeTag
              style:
                display: ..formData.flag
                marginTop: "0.01"
                height: "auto"
                width: "0.92"
              children:
                - type: label
                  text=func: .builtIn.string.formatUnixtime_en
                  dataKey: formData.name.data.signatureTime
                  style:
                    display: "inline-block"
                    width: "auto"
                    height: "auto"
                    fontSize: .Nfont.h12
                    color: "0x757575"
                    verticalAlign: middle
                - type: label
                  text: "Digitally Signed"
                  dataKey:
                  style:
                    marginLeft: "0.02"
                    display: "inline-block"
                    width: "auto"
                    height: "auto"
                    fontSize: .Nfont.h12
                    color: "0x757575"
                    verticalAlign: middle
            - type: view
              style:
                marginTop: "0.01"
                width: "auto"
                height: "auto"
              children:
                - type: label
                  text: Date
                  style:
                    display: "inline-block"
                    width: "auto"
                    height: "auto"
                    color: "0x666666"
                    fontSize: .Nfont.h12
                - type: label
                  text=func: .builtIn.string.formatUnixtimeL_en
                  dataKey: formData.mtime
                  style:
                    marginLeft: "0.0373"
                    display: "inline-block"
                    width: "auto"
                    height: "auto"
                    color: "0x333333"
                    fontSize: .Nfont.h12
                    fontWeight: "600"

        - type: view
          style:
            marginLeft: "0.04"
            marginTop: "0.0246"
            width: "0.92"
            height: "auto"
            overflow: hidden
          children:
            - type: label
              dataKey: formData.name.data.providerInfo.fullName
              style:
                height: "auto"
                width: "0.92"
                color: "0x333333"
                fontSize: .Nfont.h16
                fontWeight: "600"
                wordWrap: break-word
            - type: label
              dataKey: formData.name.data.providerInfo.specialty
              style:
                marginTop: "0.006"
                height: "auto"
                width: "0.92"
                color: "0x666666"
                fontSize: .Nfont.h14
                wordWrap: break-word
            - .DocPublicStyleOneBox:
              children:
                - .DocPublicStyleOneLeft:
                  text: "LIC #"
                - .DocPublicStyleOneRight:
                  dataKey: formData.name.data.providerInfo.lic
            - .DocPublicStyleOneBox:
              children:
                - .DocPublicStyleOneLeft:
                  text: "NPI #"
                - .DocPublicStyleOneRight:
                  dataKey: formData.name.data.providerInfo.npi
            - .DocPublicStyleOneBox:
              children:
                - .DocPublicStyleOneLeft:
                  text: "DEA #"
                - .DocPublicStyleOneRight:
                  dataKey: formData.name.data.providerInfo.dea
            - .DocPublicStyleOneBox:
              children:
                - .DocPublicStyleOneLeft:
                  text: "Email"
                - .DocPublicStyleOneRight:
                  dataKey: formData.name.data.providerInfo.email
            - .DocPublicStyleOneBox:
              children:
                - .DocPublicStyleOneLeft:
                  text: "Fax #"
                - .DocPublicStyleOneRight:
                  dataKey: formData.name.data.facilityInfo.fax
            - .DocPublicStyleOneBox:
              children:
                - .DocPublicStyleOneLeft:
                  text: "Main #"
                - .DocPublicStyleOneRight:
                  dataKey: formData.name.data.facilityInfo.phone
            - .DocPublicStyleOneBox:
              children:
                - .DocPublicStyleOneLeft:
                  text: "Address"
                - .DocPublicStyleOneRight:
                  dataKey: formData.name.data.facilityInfo.address
            - .DocPublicLine:
              style:
                marginTop: "0.0246"
                height: "0.00369"
        - type: label
          dataKey: formData.name.data.facilityInfo.website
          style:
            marginTop: "0.01"
            width: "1"
            height: "auto"
            color: "0x666666"
            fontSize: .Nfont.h12
            textAlign:
              x: center
        - type: view
          style:
            marginTop: "0.03"
    - type: view
      style:
        ..style.btnBox:
        display: ..formDataTemp.displayBtn
      children:
        - type: button
          text: Release
          style:
            ..style.btn:
          onClick:
            - ..event.btnClick

    - type: popUp
      viewTag: MenuBoxTag
      style:
        top: "0"
        left: "0"
        width: "1"
        height: "1"
        marginTop: "0"
        overflow: hidden
      children:
        - type: view
          style:
            width: "1"
            height: "1"
          onClick:
            - actionType: popUpDismiss
              popUpView: MenuBoxTag
        - type: view
          bubble: true
          style:
            top: "0.0431034"
            left: "0.52266666"
            width: "0.4453333"
            boxSizing: "border-box"
            borderRadius: "5"
            border: "1px solid #dedede"
            backgroundColor: "#ffffff"
            overflow: hidden
            zIndex: 10
          children:
            - type: view
              onClick:
                - actionType: evalObject
                  object:
                    - =.builtIn.utils.downloadPDF:
                        dataIn:
                          viewTag: mainView
                          titleName: =.Global.formData.downloadPDF.titleName
                          scaleX: =.Global.formData.downloadPDF.scaleX
                          scaleY: =.Global.formData.downloadPDF.scaleY
                          originX: =.Global.formData.downloadPDF.originX
                          originY: =.Global.formData.downloadPDF.originY
                    - actionType: popUpDismiss
                      popUpView: MenuBoxTag
              children:
                - type: image
                  path: PDFIcon.svg
                  style:
                    marginLeft: "0.053"
                    display: "inline-block"
                    verticalAlign: middle
                    height: "0.024"
                    width: "0.05333"
                - type: label
                  text: Download PDF
                  style:
                    marginLeft: "0.0213"
                    display: "inline-block"
                    wordWrap: break-word
                    verticalAlign: middle
                    fontSize: .Nfont.h14
                    lineHeight: 5.75492vh
                    fontWeight: "400"
                    color: "0x333333"

            - type: view
              style:
                borderTop: "1px solid #dedede"
                width: "0.4453333"
              onClick:
                - actionType: evalObject
                  object:
                    - =.builtIn.array.add:
                        dataIn:
                          object: =.Global.sendModule.selectDoc
                          value: =.Global.Note
                    - =.builtIn.ecos.copyDocToAttachment:
                        dataIn:
                          sourceDocList: =.Global.sendModule.selectDoc
                          newType: =.DocType.Attachment
                        dataOut: Global.sendModule.attachments
                    - =.builtIn.object.extract:
                        dataIn:
                          array: =.Global.sendModule.attachments
                          field: doc
                        dataOut: Global.sendModule.attachments
                    - =.builtIn.array.concat:
                        dataIn:
                          array1: =.Global.sendModule.attachments
                          array2: =.Global.formData.attachments
                        dataOut: Global.formData.attachments
                - goto: PharmacyList
              children:
                - type: image
                  path: sendIcon.svg
                  style:
                    marginLeft: "0.053"
                    display: "inline-block"
                    verticalAlign: middle
                    height: "0.024"
                    width: "0.05333"
                - type: label
                  text: Send
                  style:
                    marginLeft: "0.0213"
                    display: "inline-block"
                    wordWrap: break-word
                    verticalAlign: middle
                    fontSize: .Nfont.h14
                    lineHeight: 5.75492vh
                    fontWeight: "400"
                    color: "0x333333"

    # - .HeaderPopUpDownload:
    #     viewTag: selectTag
    #     children:
    #       - .DashboardPopDismiss:
    #         onClick:
    #           - actionType: popUpDismiss
    #             popUpView: selectTag
    #       - .DashboardPopUpBox:
    #         style:
    #           marginTop: "0.0517"
    #         children:
    #           - .DashboardPopUpBoxChild:
    #             style:
    #               height: "0.15"
    #             children:
    #               - .DashboardFlexColumnView:
    #                 style:
    #                   borderTopLeftRadius: "5px"
    #                   borderTopRightRadius: "5px"
    #                 children:
    #                   - .DashboardListBox:

    #                     children:
    #                       - .DashboardListImg:
    #                         path: pdf.png
    #                       - .DashboardListText0:
    #                         text: "Download PDF"
    #                         style:
    #                           textAlign:
    #                             y: center
    #                         onClick:
    #                           - actionType: evalObject
    #                             object:
    #                               - =.builtIn.utils.downloadPDF:
    #                                   dataIn:
    #                                     viewTag: mainView
    #                                     scaleX: =.Global.formData.downloadPDF.scaleX
    #                                     scaleY: =.Global.formData.downloadPDF.scaleY
    #                                     originX: =.Global.formData.downloadPDF.originX
    #                                     originY: =.Global.formData.downloadPDF.originY
    #                               - actionType: popUpDismiss
    #                                 popUpView: selectTag
    #                   - .DashboardListBox:
    #                     onClick:
    #                       - actionType: evalObject
    #                         object:
    #                           - =.builtIn.array.add:
    #                               dataIn:
    #                                 object: =.Global.sendModule.selectDoc
    #                                 value: =.Global.Note
    #                           - =.builtIn.ecos.copyDocToAttachment:
    #                               dataIn:
    #                                 sourceDocList: =.Global.sendModule.selectDoc
    #                                 newType: =.DocType.Attachment
    #                               dataOut: Global.sendModule.attachments
    #                           - =.builtIn.object.extract:
    #                               dataIn:
    #                                 array: =.Global.sendModule.attachments
    #                                 field: doc
    #                               dataOut: Global.sendModule.attachments
    #                           - =.builtIn.array.concat:
    #                               dataIn:
    #                                 array1: =.Global.sendModule.attachments
    #                                 array2: =.Global.formData.attachments
    #                               dataOut: Global.formData.attachments
    #                       - goto: PharmacyList
    #                     children:
    #                       - .DashboardListImg:
    #                         path: send.png
    #                       - .DashboardListText0:
    #                         text: "Send"
    #                         style:
    #                           textAlign:
    #                             y: center
    #成功提示
    - .SuccessfulOneLine:
      message: "Successfully"
      viewTag: successTag
  event:
    btnClick:
      # 更新文档状态
      - actionType: evalObject
        object:
          - ..apiRequest.prescription.docReq.name.data.statusTag.name@: Released
          - ..apiRequest.prescription.docReq.name.data.statusTag.fontColor@: "0x2988e6"
          - ..apiRequest.prescription.docReq.name.data.statusTag.backgroundColor@: "0xdfedfc"

      # 保存newNote
      - actionType: evalObject
        object:
          - ..apiRequest.prescription.docReq.tage@: -1
          - =..apiRequest.prescription.docAPI.store: ""

      - actionType: evalObject
        object:
          .Global._nonce@:
            =.builtIn.math.random: ""

      - actionType: evalObject
        object:
          - =.builtIn.utils.createAuditLog:
              dataIn:
                actionTypeCode: .ActionTypeCode.view
                recordTypeCode: .DocType.Prescription
                eid: =.Global.formData.currentFacility.relationEdge.id
                date: =.Global.formData.auditLog.startTime
                user: =.Global.MyProfile.name.data.fullName
                userId: =.Global.currentUser.vertex.id
                targetUserId: =.Global.formData.auditLog.patientId
                targetUser: =.Global.formData.auditLog.patientName
                accessPort: provider
              dataOut: Global.formData.auditLog.result

      - actionType: popUp
        popUpView: successTag

      # 返回路径
      - actionType: builtIn
        funcName: goBack
        reload: true

  style:
    scrollBox:
      width: "1"
      height: "0.84729"
      boxSizing: "border-box"
      overflow: "scroll"
    btnBox:
      width: "1"
      height: "0.0972"
      boxSizing: "border-box"
      overflow: "scroll"
      backgroundColor: "#ffffff"
      boxShadow: "1px 1px 4px 1px #dededf"
      textAlign:
        x: center
    btn:
      marginTop: "0.0123"
      height: "0.0443"
      width: "0.84"
      border:
        style: 1
      borderRadius: "5"
      backgroundColor: "#2988e6"
      color: "#ffffff"
      fontSize: .Nfont.h14
      boxSizing: border-box
      fontWeight: "600"
      textAlign:
        x: center
