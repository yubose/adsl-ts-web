Vaccine2:
  pageNumber: "160"
  title: "Visit Questionnaire"
  init:
    - .SignInCheck
    # - .Global.visitQuestionnaire.docAPI.get
    - ..visitQuestionnaire.docAPI.get
    - actionType: evalObject
      object:
        .Vaccine2.visitQuestionnaireObject.document@: =..docResponse.doc.0
    # - actionType: evalObject
    #   object:
    #     ..visitQuestionnaire.document@: =..visitQuestionnaire.document.doc.0

  save:
    - =.Vaccine2.visitQuestionnaireObject.docAPI.store: ""
  visitQuestionnaireTemp:
    Visit:
      input1:
        - key: purpose
          value: "What is the purpose of your visit?"
        - key: anythingElse
          value: "Is there anything else you would like to talk about?"
      radio:
        - key: prescribed
          value: "Taking medication"
    isPrescribed:
      - key: isPrescribed
        value: "Yes"
      - key: isPrescribed
        value: "Sometimes"
      - key: isPrescribed
        value: "No"
    isProblems:
      - key: isProblems
        value: "Yes"
      - key: isProblems
        value: "Sometimes"
      - key: isProblems
        value: "No"
    isToEmergency:
      - key: isToEmergency
        value: "Yes"
      - key: isToEmergency
        value: "No"
    isFamilyHistoryChanges:
      - key: isFamilyHistoryChanges
        value: "Yes"
      - key: isFamilyHistoryChanges
        value: "No"
    isNewDrug:
      - key: isNewDrug
        value: "Yes"
      - key: isNewDrug
        value: "No"
  visitQuestionnaireObject:
    document:
      type: .DocType.Vaccine2
      eid: .Global.currentRoom.edge.id
      name:
        type: "application/json"
        data:
          purpose: ""
          anythingElse: ""
          isPrescribed: "Yes"
          isProblems: "Yes"
          problems: ""
          isToEmergency: "No"
          toEmergency: ""
          isFamilyHistoryChanges: "No"
          familyHistoryChanges: ""
          isNewDrug: "No"
          newDrug: ""
          notes: ""
    docAPI:
      .DocAPI: ""
      store:
        api: cd
        dataKey: visitQuestionnaireObject.document
        subtype:
          mediaType: "application/json"
  visitQuestionnaire:
    # document:
    docAPI:
      .DocAPI: ""
      get:
        dataKey: docResponse
        id: .Global.roomInfo.edge.id
        xfname: "eid"
        type: .DocType.Vaccine2
        _nonce: =.Global._nonce
  # subvisitQuestionnaire:

  docResponse:
    doc:
      - type: .DocType.Vaccine2 # - type: "257" # private profile
        eid: .Global.currentRoom.edge.id
        name: ""
    error: ""
    jwt: ""
  components:
    - .BaseHeader:
    - .HeaderLeftButton:
    - type: view
      style:
        top: "0.1"
        width: "1"
        height: "1.45"
        left: "0"
      children:
        - type: label
          text: "Please update information if appplicable or requested"
          style:
            color: "0x00000066"
            left: "0"
            width: "1"
            fontSize: .Nfont.h14
            top: "0.02"
            height: "0.04"
            textAlign:
              x: center
            border:
              style: "2"
              width: "0.5"
            borderColor: "0xd4d4d4"
        - type: view
          style:
            top: "0.05"
            width: "1"
            height: "0.5"
            left: "0"
          children:
            - .H6:
              text: "Today's Visit"
              style:
                fontStyle: "bold"
                top: "0.01"
                left: "0.1"
                width: "0.9"
            - type: label
              text: "What is the purpose of your visit?"
              style:
                top: "0.08"
                left: "0.1"
                fontSize: .Nfont.h14
            - .BaseTextField:
              placeholder: "Ex: Follow-up,wirst pain,lab results,physical,etc"
              dataKey: visitQuestionnaireObject.document.name.data.purpose
              style:
                fontSize: .Nfont.h14
                left: "0.1"
                width: "0.8"
                top: "0.12"
                height: "0.03"
                color: "0x00000088"
                borderRadius: "5"
                border:
                  color: "#9e9e9e"
            - type: label
              text: "Is there anything else you would like to talk about?"
              style:
                top: "0.17"
                left: "0.1"
                fontSize: .Nfont.h14
            - .BaseTextField:
              placeholder: "Ex: medication refill,fill out from,screening,advice"
              dataKey: visitQuestionnaireObject.document.name.data.anythingElse
              style:
                fontSize: .Nfont.h14
                left: "0.1"
                width: "0.8"
                top: "0.21"
                color: "0x00000088"
                height: "0.03"
                border:
                  color: "#9e9e9e"
                borderRadius: "5"
            - type: view
              style:
                top: "0.26"
                width: "1"
                left: "0"
              children:
                - type: label
                  text: "Taking medications as prescribed?"
                  style:
                    top: "0"
                    left: "0.1"
                    fontSize: .Nfont.h14
                    width: "0.6"
                - type: list
                  contentType: listObject
                  listObject: ..visitQuestionnaireTemp.isPrescribed
                  iteratorVar: itemObject
                  style:
                    width: "1"
                    height: "0.03"
                    left: "0"
                    top: "0.02"
                  children:
                    - type: listItem
                      itemObject: ""
                      style:
                        left: "0"
                        top: "0"
                        width: "0.33"
                        height: "0.025"
                        display: "inline-block"
                        backgroundColor: "0xffffffff"
                      viewTag: isPrescribed
                      children:
                        - type: image
                          style:
                            height: "0.025"
                            width: "0.042"
                            top: "0"
                            left: "0.1"
                          path:
                            emit:
                              dataKey:
                                var: itemObject
                              actions:
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..visitQuestionnaireObject.document.name.data.isPrescribed
                                          string2: $var.value
                                    - selectOn.svg
                                    - selectOff.svg
                          onClick:
                            - emit:
                                dataKey:
                                  var: itemObject
                                actions:
                                  - if:
                                      - =.builtIn.string.equal:
                                          dataIn:
                                            string1: =..visitQuestionnaireObject.document.name.data.isPrescribed
                                            string2: $var.value
                                      - =.builtIn.object.clear:
                                          dataIn:
                                            object: =..visitQuestionnaireObject.document.name.data
                                            key: $var.key
                                      - =.builtIn.object.set:
                                          dataIn:
                                            object: =..visitQuestionnaireObject.document.name.data
                                            key: $var.key
                                            value: $var.value
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: isPrescribed
                        - type: label
                          dataKey: itemObject.value
                          style:
                            top: "0"
                            left: "0.15"
                            color: "#5f5f5f"
                            fontSize: .Nfont.h14
            - type: view
              style:
                top: "0.35"
                width: "1"
                left: "0"
              children:
                - type: label
                  text: "Any problems with your medications?"
                  style:
                    top: "0"
                    left: "0.1"
                    fontSize: .Nfont.h14
                - type: list
                  contentType: listObject
                  listObject: ..visitQuestionnaireTemp.isProblems
                  iteratorVar: itemObject
                  style:
                    width: "1"
                    height: "0.03"
                    left: "0"
                    top: "0.02"
                  children:
                    - type: listItem
                      itemObject: ""
                      style:
                        left: "0"
                        top: "0"
                        width: "0.33"
                        height: "0.025"
                        display: "inline-block"
                        backgroundColor: "0xffffffff"
                      viewTag: isProblems
                      children:
                        - type: image
                          style:
                            height: "0.025"
                            width: "0.042"
                            top: "0"
                            left: "0.1"
                          path:
                            emit:
                              dataKey:
                                var: itemObject
                              actions:
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..visitQuestionnaireObject.document.name.data.isProblems
                                          string2: $var.value
                                    - selectOn.svg
                                    - selectOff.svg
                          onClick:
                            - emit:
                                dataKey:
                                  var: itemObject
                                actions:
                                  - if:
                                      - =.builtIn.string.equal:
                                          dataIn:
                                            string1: =..visitQuestionnaireObject.document.name.data.isProblems
                                            string2: $var.value
                                      - =.builtIn.object.clear:
                                          dataIn:
                                            object: =..visitQuestionnaireObject.document.name.data
                                            key: $var.key
                                      - =.builtIn.object.set:
                                          dataIn:
                                            object: =..visitQuestionnaireObject.document.name.data
                                            key: $var.key
                                            value: $var.value
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: isProblems
                        - type: label
                          dataKey: itemObject.value
                          style:
                            top: "0"
                            left: "0.15"
                            color: "#5f5f5f"
                            fontSize: .Nfont.h14
            - .BaseTextField:
              placeholder: "Please explain here"
              dataKey: visitQuestionnaireObject.document.name.data.problems
              style:
                fontSize: .Nfont.h14
                left: "0.1"
                width: "0.8"
                top: "0.45"
                color: "0x00000088"
                height: "0.03"
                border:
                  color: "#9e9e9e"
                borderRadius: "5"
        - type: view
          style:
            top: "0.55"
            width: "1"
            height: "0.5"
            left: "0"
          children:
            - .H6:
              text: "Update Information"
              style:
                fontStyle: "bold"
                top: "0"
                left: "0.1"
                width: "0.9"
            - type: view
              style:
                top: "0.08"
                width: "1"
                left: "0"
              children:
                - type: label
                  text: "Have you been to the emergency room, hospital, or another doctor since your last visit?"
                  style:
                    top: "0"
                    width: "0.83"
                    left: "0.1"
                    fontSize: .Nfont.h14
                - type: list
                  contentType: listObject
                  listObject: ..visitQuestionnaireTemp.isToEmergency
                  iteratorVar: itemObject
                  style:
                    width: "0.26"
                    height: "0.03"
                    left: "0.74"
                    top: "0.005"
                  children:
                    - type: listItem
                      itemObject: ""
                      style:
                        left: "0"
                        top: "0"
                        width: "0.13"
                        height: "0.025"
                        display: "inline-block"
                        backgroundColor: "0xffffffff"
                      viewTag: isToEmergency
                      children:
                        - type: image
                          style:
                            height: "0.025"
                            width: "0.042"
                            top: "0"
                            left: "0"
                          path:
                            emit:
                              dataKey:
                                var: itemObject
                              actions:
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..visitQuestionnaireObject.document.name.data.isToEmergency
                                          string2: $var.value
                                    - selectOn.svg
                                    - selectOff.svg
                          onClick:
                            - emit:
                                dataKey:
                                  var: itemObject
                                actions:
                                  - if:
                                      - =.builtIn.string.equal:
                                          dataIn:
                                            string1: =..visitQuestionnaireObject.document.name.data.isToEmergency
                                            string2: $var.value
                                      - =.builtIn.object.clear:
                                          dataIn:
                                            object: =..visitQuestionnaireObject.document.name.data
                                            key: $var.key
                                      - =.builtIn.object.set:
                                          dataIn:
                                            object: =..visitQuestionnaireObject.document.name.data
                                            key: $var.key
                                            value: $var.value
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: isToEmergency
                        - type: label
                          dataKey: itemObject.value
                          style:
                            top: "0"
                            left: "0.05"
                            color: "#5f5f5f"
                            fontSize: .Nfont.h14
                - .BaseTextField:
                  placeholder: "Please explain here"
                  dataKey: visitQuestionnaireObject.document.name.data.toEmergency
                  style:
                    fontSize: .Nfont.h14
                    left: "0.1"
                    width: "0.8"
                    top: "0.07"
                    color: "0x00000088"
                    height: "0.03"
                    borderRadius: "5"
                    border:
                      color: "#9e9e9e"
            - type: view
              style:
                top: "0.22"
                width: "1"
                left: "0"
              children:
                - type: label
                  text: "Any changes or new conditions in your family history?"
                  style:
                    top: "0"
                    width: "0.8"
                    left: "0.1"
                    fontSize: .Nfont.h14
                - type: list
                  contentType: listObject
                  listObject: ..visitQuestionnaireTemp.isFamilyHistoryChanges
                  iteratorVar: itemObject
                  style:
                    width: "0.26"
                    height: "0.03"
                    left: "0.74"
                    top: "0.005"
                  children:
                    - type: listItem
                      itemObject: ""
                      style:
                        left: "0"
                        top: "0"
                        width: "0.13"
                        height: "0.025"
                        display: "inline-block"
                        backgroundColor: "0xffffffff"
                      viewTag: isFamilyHistoryChanges
                      children:
                        - type: image
                          style:
                            height: "0.025"
                            width: "0.042"
                            top: "0"
                            left: "0"
                          path:
                            emit:
                              dataKey:
                                var: itemObject
                              actions:
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..visitQuestionnaireObject.document.name.data.isFamilyHistoryChanges
                                          string2: $var.value
                                    - selectOn.svg
                                    - selectOff.svg
                          onClick:
                            - emit:
                                dataKey:
                                  var: itemObject
                                actions:
                                  - if:
                                      - =.builtIn.string.equal:
                                          dataIn:
                                            string1: =..visitQuestionnaireObject.document.name.data.isFamilyHistoryChanges
                                            string2: $var.value
                                      - =.builtIn.object.clear:
                                          dataIn:
                                            object: =..visitQuestionnaireObject.document.name.data
                                            key: $var.key
                                      - =.builtIn.object.set:
                                          dataIn:
                                            object: =..visitQuestionnaireObject.document.name.data
                                            key: $var.key
                                            value: $var.value
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: isFamilyHistoryChanges
                        - type: label
                          dataKey: itemObject.value
                          style:
                            top: "0"
                            left: "0.05"
                            color: "#5f5f5f"
                            fontSize: .Nfont.h14
                - .BaseTextField:
                  placeholder: "Please explain here"
                  dataKey: visitQuestionnaireObject.document.name.data.familyHistoryChanges
                  style:
                    fontSize: .Nfont.h14
                    left: "0.1"
                    width: "0.8"
                    top: "0.07"
                    color: "0x00000088"
                    height: "0.03"
                    borderRadius: "5"
                    border:
                      color: "#9e9e9e"
            - type: view
              style:
                top: "0.37"
                width: "1"
                left: "0"
              children:
                - type: label
                  text: "Any new drug or environmental allergies?"
                  style:
                    top: "0"
                    width: "0.6"
                    left: "0.1"
                    fontSize: .Nfont.h14
                - type: list
                  contentType: listObject
                  listObject: ..visitQuestionnaireTemp.isNewDrug
                  iteratorVar: itemObject
                  style:
                    width: "0.26"
                    height: "0.03"
                    left: "0.74"
                    top: "0.005"
                  children:
                    - type: listItem
                      itemObject: ""
                      style:
                        left: "0"
                        top: "0"
                        width: "0.13"
                        height: "0.025"
                        display: "inline-block"
                        backgroundColor: "0xffffffff"
                      viewTag: isNewDrug
                      children:
                        - type: image
                          style:
                            height: "0.025"
                            width: "0.042"
                            top: "0"
                            left: "0"
                          path:
                            emit:
                              dataKey:
                                var: itemObject
                              actions:
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..visitQuestionnaireObject.document.name.data.isNewDrug
                                          string2: $var.value
                                    - selectOn.svg
                                    - selectOff.svg
                          onClick:
                            - emit:
                                dataKey:
                                  var: itemObject
                                actions:
                                  - if:
                                      - =.builtIn.string.equal:
                                          dataIn:
                                            string1: =..visitQuestionnaireObject.document.name.data.isNewDrug
                                            string2: $var.value
                                      - =.builtIn.object.clear:
                                          dataIn:
                                            object: =..visitQuestionnaireObject.document.name.data
                                            key: $var.key
                                      - =.builtIn.object.set:
                                          dataIn:
                                            object: =..visitQuestionnaireObject.document.name.data
                                            key: $var.key
                                            value: $var.value
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: isNewDrug
                        - type: label
                          dataKey: itemObject.value
                          style:
                            top: "0"
                            left: "0.05"
                            color: "#5f5f5f"
                            fontSize: .Nfont.h14
                - .BaseTextField:
                  placeholder: "Please explain here"
                  dataKey: visitQuestionnaireObject.document.name.data.newDrug
                  style:
                    fontSize: .Nfont.h14
                    left: "0.1"
                    width: "0.8"
                    top: "0.07"
                    color: "0x00000088"
                    height: "0.03"
                    borderRadius: "5"
                    border:
                      color: "#9e9e9e"
            - type: view
              style:
                top: "0.5"
                width: "1"
                left: "0"
              children:
                - type: label
                  text: "Other notes?"
                  style:
                    top: "0"
                    width: "0.8"

                    left: "0.1"
                    fontSize: .Nfont.h14
                - type: textView
                  isEditable: "true"
                  placeholder: "Please explain here"
                  dataKey: visitQuestionnaireObject.document.name.data.notes
                  style:
                    paddingTop: "5px"
                    fontSize: .Nfont.h14
                    left: "0.1"
                    color: "0x00000088"

                    width: "0.8"
                    top: "0.05"
                    height: "0.15"
                    border:
                      style: "3"
                    borderWidth: "1"
                    boderColor: "#9e9e9e"
                    borderRadius: "5"
        - .SmallButton:
          text: Save
          style:
            fontStyle: "bold"
            fontSize: .Nfont.h14
            backgroundColor: "#2988e6"
            top: "1.35"
            height: "0.05"
            width: "0.5"
            left: "0.25"
          onClick:
            - actionType: evalObject
              object: ..save
            - actionType: evalObject
              object:
                .Global._nonce@:
                  =.builtIn.math.random: ""
            - actionType: builtIn
              funcName: goBack
              reload: true
