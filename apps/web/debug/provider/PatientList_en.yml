PatientList:
  # api
  # 1. 好友邀请列表
  title: "My Patient"
  init:
    - .SignInCheck
    - ..patient.docAPI.get
    - =.builtIn.array.getListLength:
        dataIn:
          object: =..invite.inviteList.edge
        dataOut: PatientList.newPatientLength
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =..newPatientLength
              string2: "0"
        - ..numberIsHidden@: "true"
        - ..numberIsHidden@: "false"
    - actionType: evalObject
      object:
        - =.builtIn.array.keepLatestDoc:
            dataIn:
              docList: =..patient.patientList.doc
              path: bsig
            dataOut: PatientList.patient.patientList.doc
    - =.builtIn.array.getListLength:
        dataIn:
          object: =..patient.patientList.doc
        dataOut: PatientList.allPatientLength
  newPatientLength: "0"
  numberIsHidden: "true"
  allPatientLength: "0"
  phone: ""
  formData:
    patientList: []
  patient:
    patientList:
      edge: ""
    req:
      type: .DocType.PatientProfile
      ObjType: 28
      id: .Global.currentUser.vertex.id
      xfname: E.bvid|E.evid
      sfname: "{\"result\":\"D.*\", \"join\": \"INNER JOIN Edge E on E.id = D.eid INNER JOIN Vertex V on D.ovid=V.id AND V.type>0\"}"
      sCondition: "E.type=10002 AND E.tage>0 AND E.subtype&0xff0000=0x10000"
    docAPI:
      get:
        api: rd
        dataIn: patient.req
        dataOut: PatientList.patient.patientList
  components:
    - .BasePublicHeader:
      children:
        - .BasePublicHeaderLeft:
        - .BasePublicHeaderTitle:
    - type: view
      style:
        left: "0"
        width: "1"
        height: "0.94"
      children:
        - type: label
          contentType: messageHidden
          text: "No contacts added"
          style:
            left: "0.32"
            top: "0.02"
            width: "0.6"
            height: "0.04"
            fontSize: "18"
            isHidden: "true"

        - type: list
          contentType: listObject
          listObject: ..patient.patientList.doc
          iteratorVar: itemObject
          style:
            left: "0"
            width: "1"
            overflow: "scroll"
            height: "0.94"
            margin: "0"
          children:
            - type: listItem
              itemObject: ""
              style:
                width: "1"
                height: "auto"
                marginTop: "0"
                border:
                  style: "2"
                borderWidth: "1"
                borderColor: "0xdededf"
                overflow: hidden
              onClick:
                - actionType: updateObject # updateObject(dataKey, dataObject, dataObjectKey)
                  dataKey: Global.middleInformation.PatientVisitInfo
                  dataObject: itemObject
                - actionType: evalObject
                  object:
                    - =.builtIn.string.phoneNumberSplit:
                        dataIn:
                          phoneNumber: =.Global.middleInformation.PatientVisitInfo.name.data.basicInfo.phone
                          sign: " "
                        dataOut: phone #Global.middleInformation.PatientVisitInfo.phoneNumber
                    - .Global.middleInformation.PatientVisitInfo.phoneNumber@: =..phone
                    - .Global.middleInformation.PatientVisitInfo.inputPhone@: =..phone.1
                - actionType: builtIn
                  funcName: goBack
                  reload: true
              children:
                - type: view
                  style:
                    paddingTop: "0.0123"
                    paddingBottom: "0.0123"
                  children:
                    - type: image
                      path: patientImage.png
                      path=func: .builtIn.utils.prepareDocToPath
                      dataKey: itemObject.name.data.basicInfo.avatar
                      style:
                        marginLeft: "0.04"
                        height: "12vw"
                        width: "12vw"
                        border:
                          style: 3
                        borderRadius: "5"
                        borderWidth: "1"
                        borderColor: "0xdededf"
                        overflow: hidden
                        verticalAlign: middle
                        display: "inline-block"
                    - type: label
                      dataKey: itemObject.name.data.basicInfo.fullName
                      style:
                        marginLeft: "0.032"
                        display: "inline-block"
                        width: "0.78"
                        height: "auto"
                        fontSize: .Nfont.h16
                        fontWeight: "400"

                        verticalAlign: middle
                        wordWrap: break-word
        # - type: view
        #   style:
        #     top: "0"
        #     left: "0"
        #     width: "1"
        #     height: "0.74"
        #   children:
        #     - type: view
        #       style:
        #         left: "0"
        #         width: "1"
        #         height: "0.66"
        #         overflow: "scroll"
        #       children:
        #         - type: view
        #           style:
        #             left: "0"
        #             width: "1"
        #             height: "0.61"
        #             backgroundColor: "#ffffff"
        #             overflow: "scroll"
        #           children:
        #             - type: list
        #               contentType: listObject
        #               listObject: ..patient.patientList.doc
        #               iteratorVar: itemObject
        #               style:
        #                 top: "0"
        #                 left: "0"
        #                 width: "1"
        #                 marginTop: "0"
        #                 height: "0.61"
        #                 margin: "0"
        #               children:
        #                 - type: listItem
        #                   itemObject: ""
        #                   style:
        #                     left: "0"
        #                     width: "1"
        #                     height: "auto"
        #                     overflow: hidden
        #                   onClick:
        #                     - actionType: updateObject # updateObject(dataKey, dataObject, dataObjectKey)
        #                       dataKey: Global.middleInformation.PatientVisitInfo
        #                       dataObject: itemObject
        #                     - actionType: evalObject
        #                       object:
        #                         - =.builtIn.string.phoneNumberSplit:
        #                             dataIn:
        #                               phoneNumber: =.Global.middleInformation.PatientVisitInfo.name.data.basicInfo.phone
        #                               sign: " "
        #                             dataOut: phone #Global.middleInformation.PatientVisitInfo.phoneNumber
        #                         - .Global.middleInformation.PatientVisitInfo.phoneNumber@: =..phone
        #                         - .Global.middleInformation.PatientVisitInfo.inputPhone@: =..phone.1
        #                     - actionType: builtIn
        #                       funcName: goBack
        #                       reload: true
        #                   children:
        #                     - type: view
        #                       style:
        #                         marginTop: "0.01"
        #                         width: "0.9"
        #                         height: "auto"
        #                       children:
        #                         - type: image
        #                           path: patientImage.svg
        #                           viewTag: showFileTag
        #                           path=func: .builtIn.utils.prepareDocToPath
        #                           dataKey: itemObject.name.data.basicInfo.avatar
        #                           style:
        #                             marginLeft: "0.05"
        #                             verticalAlign: middle
        #                             display: "inline-block"
        #                             width: "7vh"
        #                             height: "7vh"
        #                         - type: label
        #                           dataKey: itemObject.name.data.basicInfo.fullName
        #                           style:
        #                             marginLeft: "0.02"
        #                             verticalAlign: middle
        #                             display: "inline-block"
        #                             height: "auto"
        #                             width: "0.6"
        #
        #                             fontSize: .Nfont.h15
        #                     - type: view
        #                       style:
        #                         marginTop: "0.01"
