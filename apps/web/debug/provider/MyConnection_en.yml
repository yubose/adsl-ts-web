MyConnection:
  title: My Connection #"My Health Network"
  init:
    - .SignInCheck
    - =.builtIn.fetch:
        dataIn: http://localhost:3000/all-providers?limit=25
        dataOut: MyConnection.formData.allProviders
    - actionType: evalObject
      object:
        .Global._nonce@:
          =.builtIn.math.random: ""
    # - actionType: evalObject
    #   object:
    #     - actionType: evalObject
    #       async: true
    #       object:
    #         - =..newConnection.edgeAPI.get: ""
    #         - =..connection.docAPI.get: ""
    #         - =..apiRequest.facilityConnections.docAPI.get: ""
    # - =.builtIn.array.getListLength:
    #     dataIn:
    #       object: =..newConnection.newConnectionList.edge
    #     dataOut: MyConnection.formData.newConnectionLength
    # - if:
    #     - =.builtIn.string.equal:
    #         dataIn:
    #           string1: =..formData.newConnectionLength
    #           string2: "0"
    #     - ..connectionHidden@: "true"
    #     - ..connectionHidden@: "false"
    # - =.builtIn.array.keepLatestDoc:
    #     dataIn:
    #       docList: =..connection.connectionList.doc
    #       path: bsig
    #     dataOut: MyConnection.connection.connectionList.doc
    # - =.builtIn.object.setProperty:
    #     dataIn:
    #       obj: =..formDataTemp.titleData
    #       label: "title"
    #       text: .Global.providerOrFacility
    #       arr: ["fontColor", "fontWeight", "block"]
    #       valueArr: ["0x2988e6", "500", "block"]
    #       errorArr: ["0x666666", "400", "none"]
    #     dataOut: MyConnection.formDataTemp.titleData
    # - if:
    #     - =.builtIn.string.equal:
    #         dataIn:
    #           string1: =.Global.providerOrFacility
    #           string2: "Providers"
    #     - actionType: evalObject
    #       object:
    #         - ..showList@: =..connection.connectionList.doc
    #         - ..searchArray@: =..formDataTemp.searchArray.provider
    #         - ..localSearchQ@: =..apiRequest.localSearchProvider.connectionList.get
    #         - ..formDataTemp.providerDisplayView@: "block"
    #         - ..formDataTemp.facilityDisplayView@: "none"
    #     - continue
    # - if:
    #     - =.builtIn.string.equal:
    #         dataIn:
    #           string1: =.Global.providerOrFacility
    #           string2: "Medical Facilities"
    #     - actionType: evalObject
    #       object:
    #         - ..showList@: =..apiRequest.facilityConnections.connectionList.doc
    #         - ..searchArray@: =..formDataTemp.searchArray.Facility
    #         - ..localSearchQ@: =..apiRequest.localSearchFacility.connectionList.get
    #         - ..formDataTemp.providerDisplayView@: "none"
    #         - ..formDataTemp.facilityDisplayView@: "block"
    #     - continue
  medicalHidden: "true"
  connectionHidden: "true"
  # get all facility profile
  apiRequest:
    facilityConnections:
      connectionList:
        edge: ""
      docAPI:
        get:
          api: rd
          type: 271361
          xfname: E.bvid|E.evid
          id: .Global.currentUser.vertex.id
          ObjType: 12
          dataKey: apiRequest.facilityConnections.connectionList
          sCondition: E.type=10002 AND E.tage=1 AND E.subtype&0xff0000=0x30000
          _nonce: =.Global._nonce
    # local search for provider connection
    localSearchProvider:
      connectionList:
        doc:
          id: .Global.rootNotebookID
          xfname: eid
          maxcount: "500"
          obfname: "mtime"
          sCondition: "35841"
          ObjType: 3 # 3 is for local search
          key: =..formData.searchContent # where to get the user input
          _nonce: =.Global._nonce
        get:
          api: rd
          dataIn: apiRequest.localSearchProvider.connectionList.doc
          dataOut: MyConnection.formData.allProviders
          .DocAPI.get: ""
    # local search for facility connection
    localSearchFacility:
      connectionList:
        doc:
          id: .Global.rootNotebookID
          xfname: eid
          maxcount: "500"
          obfname: "mtime"
          sCondition: "271361"
          ObjType: 3 # 3 is for local search
          key: =..formData.searchContent # where to get the user input
          _nonce: =.Global._nonce
        get:
          api: rd
          dataIn: apiRequest.localSearchFacility.connectionList.doc
          dataOut: MyConnection.formData.allProviders
          .DocAPI.get: ""
  localSearchQ: ""
  showList: []
  searchArray: []
  formData:
    connectionList: []
    test: []
    connection: ""
    newConnectionLength: ""

    facililityList: []
    allProviders: []
    searchContent: ""
  formDataTemp:
    searchArray:
      provider:
        - name.data.phone
        - name.data.fullName
      Facility:
        - name.data.basicInfo.medicalFacilityName
        - name.data.basicInfo.businessType
        - name.data.basicInfo.phoneNumber
    providerDisplayView: "block"
    facilityDisplayView: "none"
    searchCancel: "true"
    titleData:
      - title: Providers
        fontColor: "0x2988e6"
        fontWeight: "600"
        block: "block"
      - title: Medical Facilities
        fontColor: "0x666666"
        fontWeight: "400"
        block: "none"
    newMedicalLength: ""
  newConnection:
    newConnectionList: ""
    edgeAPI:
      get:
        api: re
        type: .EdgeType.InviteInfo
        xfname: evid
        id: .Global.currentUser.vertex.id
        maxcount: "10000"
        dataKey: newConnection.newConnectionList
        sCondition: subtype in (262144,327680,196624,196608)
        _nonce: =.Global._nonce

  patient: #provider patient
    patientList: ""
  connection: #provider & provider
    connectionList:
      edge: ""
    docAPI:
      get:
        api: rd
        type: .DocType.DoctorProfile
        xfname: (E.bvid|E.evid)&!(D.ovid)
        id: .Global.currentUser.vertex.id
        ObjType: 12
        obfname: mtime
        dataKey: connection.connectionList
        sCondition: E.type=10002 AND E.tage>0 AND E.subtype&0xff0000=0x40000
        _nonce: =.Global._nonce
  edge:
    edgeAPI:
      get:
        api: re
        type: .Global.Email
        xfname: E.bvid|E.evid
        id: .Global.patientId
        dataKey: patient.patientList
        sCondition: subtype in (65536,65552,65808,65792)
  components:
    - .BasePublicHeader:
      children:
        - .BasePublicHeaderLeft:
        - .BasePublicHeaderTitle:
        - .BasePublicHeaderRightIcon:
          path: inviteWhite.svg
          onClick:
            - goto: AddConnect
    # - .HeaderRightImg:
    #   path: inviteWhite.svg
    #   onClick:
    #     - goto: AddConnect
    - type: view
      style:
        # marginTop: "0.1"
        width: "1"
        height: "0.08"
        backgroundColor: "0x2988e6"
        textAlign:
          y: center
      children:
        - type: view
          style:
            height: "0.042"
            backgroundColor: "0xffffff"
            width: "0.92"
            marginLeft: "0.04"
            boxSizing: border-box
            borderRadius: 5px
          children:
            - type: image
              path: search.svg
              style:
                height: "0.018"
                marginLeft: "0.021"
                display: inline-block
                verticalAlign: "middle"
            - type: textField
              viewTag: "searchContentVT"
              dataKey: formData.searchContent
              placeholder: Search the name, phone number…
              style:
                height: "0.042"
                fontSize: ".Nfont.h14"
                width: "0.62"
                border:
                  style: "1"
                marginLeft: "0.023"
                verticalAlign: "middle"
                display: inline-block
              onInput:
                - actionType: evalObject
                  object:
                    - if:
                        - =.builtIn.string.equal:
                            dataIn:
                              string1: =..formData.searchContent
                              string2: ""
                        - ..formDataTemp.searchCancel@: "true"
                        - ..formDataTemp.searchCancel@: "false"
                - actionType: evalObject
                  object:
                    - if:
                        - =.builtIn.string.equal:
                            dataIn:
                              string1: =..formData.searchContent
                              string2: ""
                        - actionType: builtIn
                          funcName: hide
                          viewTag: searchResultVT
                        - continue
                    - if:
                        - =.builtIn.string.equal:
                            dataIn:
                              string1: =..formData.searchContent
                              string2: ""
                        - actionType: builtIn
                          funcName: hide
                          viewTag: facilityTag
                        - continue
                    - if:
                        - =.builtIn.string.equal:
                            dataIn:
                              string1: =..formData.searchContent
                              string2: ""
                        - actionType: builtIn
                          funcName: hide
                          viewTag: providerListTag
                        - continue
                    - if:
                        - =.builtIn.string.equal:
                            dataIn:
                              string1: =..formData.searchContent
                              string2: ""
                        - actionType: builtIn
                          funcName: hide
                          viewTag: emptyTag
                        - continue
                - actionType: builtIn
                  funcName: redraw
                  viewTag: searchVT
            - type: image
              viewTag: "searchVT"
              path: searchCancel.svg
              style:
                height: "0.018"
                marginLeft: "0.012"
                isHidden: ..formDataTemp.searchCancel
                display: inline-block
                verticalAlign: "middle"
              onClick:
                - actionType: evalObject
                  object:
                    - ..formData.searchContent@: ""
                    - ..formDataTemp.searchCancel@: "true"
                - actionType: builtIn
                  funcName: hide
                  viewTag: searchResultVT
                - actionType: builtIn
                  funcName: hide
                  viewTag: facilityTag
                - actionType: builtIn
                  funcName: hide
                  viewTag: providerListTag
                - actionType: builtIn
                  funcName: hide
                  viewTag: emptyTag
                - actionType: builtIn
                  funcName: redraw
                  viewTag: searchContentVT
                - actionType: builtIn
                  funcName: redraw
                  viewTag: searchVT
            - type: label
              text: Search
              style:
                height: auto
                fontSize: ".Nfont.h14"
                width: auto
                color: "0x2988E6"
                marginLeft: "0.032"
                verticalAlign: "middle"
                display: inline-block
              onClick:
                - actionType: evalObject
                  object:
                    - if:
                        - =.builtIn.string.equal:
                            dataIn:
                              string1: =..formData.searchContent
                              string2: ""
                        - actionType: popUp
                          popUpView: errorVT
                          wait: true
                        - continue
                - actionType: popUp
                  popUpView: searchingTag
                - actionType: evalObject
                  object:
                    - =..localSearchQ: ""
                    # - =.builtIn.object.matchSearchValue:
                    #     dataIn:
                    #       objArr: =..showList
                    #       paths: =..searchArray
                    #       value: =..formData.searchContent
                    #     dataOut: MyConnection.formData.allProviders

                - actionType: builtIn
                  funcName: show
                  viewTag: searchResultVT
                - actionType: evalObject
                  object:
                    - if:
                        - =.builtIn.string.equal:
                            dataIn:
                              string1: =.Global.providerOrFacility
                              string2: "Providers"
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: providerListTag
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: facilityTag
                - actionType: evalObject
                  object:
                    - if:
                        - =.builtIn.string.equal:
                            dataIn:
                              string1: =.Global.providerOrFacility
                              string2: "Providers"
                        - actionType: builtIn
                          funcName: show
                          viewTag: providerListTag
                        - actionType: builtIn
                          funcName: hide
                          viewTag: providerListTag
                - actionType: evalObject
                  object:
                    - if:
                        - =.builtIn.string.equal:
                            dataIn:
                              string1: =.Global.providerOrFacility
                              string2: "Medical Facilities"
                        - actionType: builtIn
                          funcName: show
                          viewTag: facilityTag
                        - actionType: builtIn
                          funcName: hide
                          viewTag: facilityTag
                    - if:
                        - =.builtIn.array.judgeListLength:
                            dataIn:
                              array: =.MyConnection.formData.allProviders.doc
                              len: 0
                        - actionType: builtIn
                          funcName: show
                          viewTag: emptyTag
                        - actionType: builtIn
                          funcName: hide
                          viewTag: emptyTag
                - actionType: popUpDismiss
                  popUpView: searchingTag

        # - .SearchField:
        #   placeholder: "Search"
        #   style:
        #     left: "0.04"
        #     top: "0.01"
        #     boxSizing: border-box
        #     width: "0.92"
        #     backgroundColor: "0xffffff"
        #     textAlign:
        #       x: center
        #       y: center
        #   onClick:
        #     - goto: SearchProvider
        # - type: image
        #   path: search.svg
        #   style:
        #     top: "0.02"
        #     left: "0.35"
        #     height: "0.03"

    - type: view
      style:
        marginTop: "0"
        left: "0"
        width: "1"
        height: "0.82"
      children:
        - type: view
          style:
            marginTop: "0"
            width: "1"
            height: "auto"
            left: "0"
          children:
            - type: label
              contentType: messageHidden
              text: "No contacts added"
              style:
                left: "0.32"
                top: "0.25"
                width: "0.6"
                height: "0.04"
                fontSize: .Nfont.h3
                isHidden: "true"
            - type: view
              style:
                marginTop: "0"
                marginLeft: "0"
                width: "1"
                height: "0.08"
                textAlign:
                  y: center
              children:
                - type: view
                  style:
                    left: "0"
                    width: "1"
                    height: auto
                    marginTop: "0"
                    backgroundColor: "#ffffff"
                  onClick:
                    - actionType: evalObject
                      object:
                        .Global._nonce@:
                          =.builtIn.math.random: ""
                    - goto: NewConnections
                  children:
                    - type: view
                      style:
                        display: inline-block
                        verticalAlign: middle
                      children:
                        - type: image
                          path: newConnection.svg
                          style:
                            marginLeft: "0.04"
                            height: "0.0431034"
                            width: "0.093333"
                            # width: "0.13"
                        - type: label
                          text: "0"
                          dataKey: formData.newConnectionLength
                          style:
                            left: "0.112"
                            top: "-0.01"
                            # width: "5vw"
                            boxSizing: "border-box"
                            paddingLeft: "0.013333"
                            paddingRight: "0.013333"
                            # height: "0.017241"
                            isHidden: ..connectionHidden
                            color: "0xffffff"
                            fontSize: .Nfont.h12

                            backgroundColor: "0xff0000"
                            borderRadius: "2.5vw"
                            textAlign:
                              x: center
                              y: center
                    - type: label
                      text: "New Connections"
                      style:
                        # left: "0.28"
                        display: inline-block
                        width: "0.4"
                        height: "5vh"
                        lineHeight: "5vh"

                        fontSize: .Nfont.h16
                        verticalAlign: middle
                        zIndex: 100
                        marginLeft: "0.06"
                        color: "#333333"
                        fontWeight: "600"
                    - type: image
                      path: arrowRight.svg
                      style:
                        verticalAlign: middle
                        marginLeft: "0.274666"
                        width: "0.064"
                        height: "0.029556"
                        display: inline-block
            - type: view
              style:
                width: "1"
                height: "0.6"
              children:
                - type: view
                  style:
                    backgroundColor: "#f0f0f0"
                    width: "1"
                    overflow: hidden
                    height: "0.05"
                  children:
                    - type: label
                      text: "Connections"
                      style:
                        marginLeft: "0.05"
                        color: "0x666666"
                        height: "0.05"
                        width: "0.45"
                        lineHeight: 5vh

                        fontSize: .Nfont.h14
                        fontWeight: "600"
                        textAlign:
                          x: left
                - type: list
                  viewTag: profileInfoTag
                  contentType: listObject
                  listObject: ..formDataTemp.titleData
                  iteratorVar: itemObject
                  style:
                    ..style.tabList:
                  children:
                    - type: listItem
                      itemObject:
                      style:
                        ..style.tabListItem:
                      children:
                        - type: label
                          dataKey: itemObject.title
                          style:
                            ..style.title:
                        - type: view
                          style:
                            ..style.line:
                        - type: view
                          viewTag: leftBlockTag
                          style:
                            ..style.tabBar:
                      onClick:
                        - ..event.tabChange
                # - type: view
                #   viewTag: blockMarginTag
                #   style:
                #     width: "1"
                #     height: "0.05"
                #     zIndex: "100"
                #     backgroundColor: "0xffffff"
                #     border:
                #       style: 2
                #       color: "0xDEDEDF"
                #     borderWidth: "1px"
                #   children:
                # - type: list
                #   viewTag: profileInfoTag
                #   contentType: listObject
                #   listObject: ..formDataTemp.titleData
                #   iteratorVar: itemObject
                #   style:
                #     width: "1"
                #     margin: "0"
                #     axis: horizontal
                #     height: "0.05"
                #     border:
                #       style: "2"
                #       color: "0xdededf"
                #     borderWidth: "2px"
                #     zIndex: 100
                #   children:
                #     - type: listItem
                #       itemObject:
                #       style:
                #         width: '0.45'
                #         height: '0.05'
                #         marginTop: '0'
                #         marginLeft: "0"
                #       onClick:
                #         - emit:
                #             dataKey:
                #               var: itemObject
                #             actions:
                #               - =.builtIn.object.setProperty:
                #                   dataIn:
                #                     obj: =..formDataTemp.titleData
                #                     label: "title"
                #                     text: $var.title
                #                     arr:
                #                       [
                #                         "fontColor",
                #                         "fontWeight",
                #                         "borderColor",
                #                       ]
                #                     valueArr:
                #                       ["0x2988e6", "500", "0x2988e6"]
                #                     errorArr:
                #                       ["0x333333", "400", "0xdededf"]
                #               - if:
                #                   - =.builtIn.string.equal:
                #                       dataIn:
                #                         string1: $var.title
                #                         string2: "Providers"
                #                   - ..showList@: =..connection.connectionList.doc
                #                   - ..showList@: =..apiRequest.facilityConnections.connectionList.doc
                #               - if:
                #                   - =.builtIn.string.equal:
                #                       dataIn:
                #                         string1: $var.title
                #                         string2: "Providers"
                #                   - ..searchArray@: =..formDataTemp.searchArray.provider
                #                   - ..searchArray@: =..formDataTemp.searchArray.Facility
                #               - if:
                #                   - =.builtIn.string.equal:
                #                       dataIn:
                #                         string1: $var.title
                #                         string2: "Providers"
                #                   - ..localSearchQ@: =..apiRequest.localSearchProvider.connectionList.get
                #                   - ..localSearchQ@: =..apiRequest.localSearchFacility.connectionList.get
                #               - if:
                #                   - =.builtIn.string.equal:
                #                       dataIn:
                #                         string1: $var.title
                #                         string2: "Providers"
                #                   - ..formDataTemp.providerDisplayView@: "block"
                #                   - continue
                #               - if:
                #                   - =.builtIn.string.equal:
                #                       dataIn:
                #                         string1: $var.title
                #                         string2: "Providers"
                #                   - ..formDataTemp.facilityDisplayView@: "none"
                #                   - continue

                #               - if:
                #                   - =.builtIn.string.equal:
                #                       dataIn:
                #                         string1: $var.title
                #                         string2: "Medical Facilities"
                #                   - ..formDataTemp.facilityDisplayView@: "block"
                #                   - continue

                #               - if:
                #                   - =.builtIn.string.equal:
                #                       dataIn:
                #                         string1: $var.title
                #                         string2: "Medical Facilities"
                #                   - ..formDataTemp.providerDisplayView@: "none"
                #                   - continue
                #               - if:
                #                   - =.builtIn.string.equal:
                #                       dataIn:
                #                         string1: $var.title
                #                         string2: "Providers"
                #                   - .Global.providerOrFacility@: "Providers"
                #                   - continue
                #               - if:
                #                   - =.builtIn.string.equal:
                #                       dataIn:
                #                         string1: $var.title
                #                         string2: "Medical Facilities"
                #                   - .Global.providerOrFacility@: "Medical Facilities"
                #                   - continue
                #         - actionType: builtIn
                #           funcName: redraw
                #           viewTag: profileInfoTag
                #         - actionType: builtIn
                #           funcName: redraw
                #           viewTag: listInfoView
                #         - actionType: builtIn
                #           funcName: redraw
                #           viewTag: listInfoView1
                #       children:
                #         - type: label
                #           dataKey: itemObject.title
                #           style:
                #             color: itemObject.fontColor
                #             lineHeight: "6vh"
                #             height: "0.05"
                #             marginLeft: "0.1"
                #             width: "0.3"
                #             fontWeight: itemObject.fontWeight
                #             border:
                #               style: "2"
                #             borderWidth: "2"
                #             borderColor: itemObject.borderColor
                #             display: "inline-block"
                #             textAlign:
                #               x: center
                #             fontSize: .Nfont.n2

                - type: scrollView
                  style:
                    height: "0.62"
                    width: "1"
                    margin: "0"
                  children:
                    - type: view
                      viewTag: listInfoView1
                      style:
                        height: "0.62"
                        width: "1"
                        margin: "0"
                        display: ..formDataTemp.providerDisplayView
                      children:
                        - type: list
                          viewTag: connectTag
                          contentType: listObject
                          listObject: ..connection.connectionList.doc #..formData.connectionList
                          iteratorVar: itemObject
                          style:
                            backgroundColor: "#ffffff"
                            width: "1"
                            height: "auto"
                            margin: "0"
                          children:
                            - type: listItem
                              itemObject: ""
                              style:
                                marginLeft: "0"
                                width: "1"
                                height: "0.09"
                                border:
                                  style: "2"
                                borderWidth: "1"
                                borderColor: "0x00000011"
                                textAlign:
                                  y: center
                              onClick:
                                - emit:
                                    dataKey:
                                      var: itemObject
                                    actions:
                                      - actionType: updateObject
                                        dataKey: Global.providerId
                                        dataObject: {}
                                      - .Global.providerId@: $var
                                - goto: ProviderProviderInfo
                              children:
                                - type: view
                                  style:
                                    height: "0.09"
                                    width: "1"
                                    textAlign:
                                      y: center
                                  children:
                                    - type: view
                                      style:
                                        height: "auto"
                                        width: "auto"
                                      children:
                                        - type: image
                                          path: providerImage.svg
                                          path=func: .builtIn.utils.prepareDocToPath
                                          dataKey: itemObject.name.data.avatar
                                          style:
                                            marginLeft: "0.04"
                                            height: "12vw"
                                            width: "12vw"
                                            color: "0xffffff"
                                            verticalAlign: middle
                                            display: "inline-block"
                                            border:
                                              style: 3
                                            borderRadius: "5"
                                            borderWidth: "1"
                                            borderColor: "0xdededf"
                                            overflow: hidden
                                            zIndex: 100
                                        - type: view
                                          style:
                                            width: "0.7"
                                            marginLeft: "0.032"
                                            display: "inline-block"
                                            verticalAlign: middle
                                          children:
                                            - type: view
                                              style:
                                                height: auto
                                                width: "auto"
                                              children:
                                                - type: label
                                                  dataKey: itemObject.name.data.fullName
                                                  style:
                                                    # marginLeft: "0.015"
                                                    fontWeight: "600"
                                                    fontSize: .Nfont.h16
                                                    textDecoration: ..formDataTemp.underline
                                                    color: "#333333"
                                                    zIndex: 100
                                                    display: "inline-block"
                                                    width: "auto"
                                                    textAlign:
                                                      y: center
                                                      x: left
                                                - type: label
                                                  text: "&nbsp;-&nbsp;"
                                                  style:
                                                    display: "inline-block"
                                                    width: "auto"
                                                    height: "auto"
                                                    fontWeight: "600"
                                                    fontSize: .Nfont.h16
                                                    color: "#333333"
                                                - type: label
                                                  dataKey: itemObject.name.data.title
                                                  style:
                                                    display: "inline-block"
                                                    width: "auto"
                                                    height: "auto"
                                                    fontWeight: "600"
                                                    fontSize: .Nfont.h16
                                                    color: "#333333"

                                            - type: label
                                              dataKey: itemObject.name.data.specialty.0.specialty
                                              style:
                                                # marginLeft: "0.015"
                                                marginTop: "0"
                                                width: "0.7"
                                                fontSize: .Nfont.h14
                                                color: "#666666"
                                                zIndex: 100
                                                textAlign:
                                                  y: center
                                                  x: left

                    - type: view
                      viewTag: listInfoView
                      style:
                        height: "0.62"
                        width: "1"
                        margin: "0"
                        display: ..formDataTemp.facilityDisplayView
                      children:
                        - type: list
                          contentType: listObject
                          listObject: ..apiRequest.facilityConnections.connectionList.doc
                          iteratorVar: itemObject
                          style:
                            backgroundColor: "#ffffff"
                            width: "1"
                            height: "auto"
                            # overflow: scroll
                            margin: "0"
                          children:
                            - type: listItem
                              itemObject: ""
                              onClick:
                                - emit:
                                    dataKey:
                                      var: itemObject
                                    actions:
                                      - .Global.formData.temporaryFacilityId@: $var
                                - goto: FacilityInfomation
                              style:
                                marginLeft: "0"
                                width: "1"
                                height: "0.09"
                                border:
                                  style: "2"
                                borderWidth: "1"
                                borderColor: "0x00000011"
                                textAlign:
                                  y: center
                              children:
                                - type: view
                                  style:
                                    height: "0.09"
                                    width: "1"
                                    textAlign:
                                      y: center
                                  children:
                                    - type: view
                                      style:
                                        height: "auto"
                                        width: "auto"
                                      children:
                                        - type: image
                                          path: office-building.svg
                                          path=func: .builtIn.utils.prepareDocToPath
                                          dataKey: itemObject.name.data.basicInfo.businessLogo
                                          style:
                                            marginLeft: "0.04"
                                            height: "12vw"
                                            width: "12vw"
                                            display: "inline-block"
                                            verticalAlign: middle
                                            border:
                                              style: 3
                                            borderRadius: "5"
                                            borderWidth: "1"
                                            borderColor: "0xdededf"
                                            overflow: hidden
                                        - type: view
                                          style:
                                            marginLeft: "0.032"
                                            width: "0.7"
                                            height: "auto"
                                            display: "inline-block"
                                            verticalAlign: middle
                                          children:
                                            - type: label
                                              dataKey: itemObject.name.data.basicInfo.medicalFacilityName
                                              style:
                                                height: "auto"
                                                fontWeight: "600"
                                                fontSize: .Nfont.h16
                                                color: "#333333"
                                                width: "0.7"
                                                wordBreak: break-word
                                            - type: label
                                              dataKey: itemObject.name.data.basicInfo.businessType
                                              style:
                                                marginTop: "0.0"
                                                width: "0.7"
                                                height: "auto"
                                                fontSize: .Nfont.h14
                                                color: "#666666"
                                                wordBreak: break-word
    - type: view
      viewTag: searchResultVT
      style:
        height: "0.82"
        backgroundColor: "0xffffff"
        display: block
        top: "0.1477832"
        width: "1"
        zIndex: "100"
      children:
        - type: view
          viewTag: emptyTag
          style:
            margin: "0"
            height: "auto"
            width: "1"
            display: none
          children:
            - type: image
              path: emptyPage.svg
              style:
                width: "0.8"
                marginLeft: "0.1"
                marginTop: "0.15"
            - type: label
              text: "There is no result now."
              style:
                fontSize: .Nfont.n2
                width: "0.9"
                marginTop: "0.03"
                marginLeft: "0.05"
                height: "0.05"
                color: "#666666"
                textAlign:
                  x: center
                  y: center
        - type: list
          viewTag: facilityTag
          contentType: listObject
          listObject: ..formData.allProviders.doc
          iteratorVar: itemObject
          style:
            backgroundColor: "#ffffff"
            width: "1"
            height: "auto"
            # overflow: scroll
            margin: "0"
            display: none
          children:
            - type: listItem
              itemObject: ""
              onClick:
                - actionType: evalObject
                  object:
                    .Global._nonce@:
                      =.builtIn.math.random: ""
                - emit:
                    dataKey:
                      var: itemObject
                    actions:
                      - .Global.formData.temporaryFacilityId@: $var
                - goto: FacilityInfomation
              style:
                left: "0"
                width: "1"
                height: "0.09"
                border:
                  style: "2"
                borderWidth: "1"
                borderColor: "0x00000011"
              children:
                - type: image
                  path: office-building.png
                  path=func: .builtIn.utils.prepareDocToPath
                  dataKey: itemObject.name.data.basicInfo.businessLogo
                  style:
                    left: "0.1"
                    top: "0.022"
                    height: "0.045"
                    width: "0.1"

                    fontSize: "15"
                    textAlign:
                      x: center
                    zIndex: 100
                - type: label
                  dataKey: itemObject.name.data.basicInfo.medicalFacilityName
                  style:
                    left: "0.27"
                    top: "0.02"
                    width: "0.7"
                    fontWeight: "600"
                    fontSize:
                    color: "#333333"
                    zIndex: 100
                - type: label
                  dataKey: itemObject.name.data.basicInfo.businessType
                  style:
                    left: "0.27"
                    top: "0.05"
                    width: "0.4"
                    fontWeight: "600"
                    fontSize: .Nfont.12
                    color: "#66666"
                    zIndex: 100
        - type: list
          viewTag: providerListTag
          contentType: listObject
          listObject: ..formData.allProviders.doc
          iteratorVar: itemObject
          style:
            width: "1"
            margin: "0"
            left: "0"
            height: "0.82"
            marginTop: "0"
            overflowY: scroll
            overflowX: hidden
          children:
            - type: listItem
              itemObject: ''
              style:
                width: "1"
                height: "auto"
                marginTop: "0"
                overflow: hidden
              onClick:
                - emit:
                    dataKey:
                      var: itemObject
                    actions:
                      - actionType: updateObject
                        dataKey: Global.providerId
                        dataObject: {}
                      - .Global.providerId@: $var
                - goto: ProviderProviderInfo
              children:
                - type: view
                  style:
                    marginTop: "0.0198"
                    marginLeft: "0.04" #16.01px
                    height: "auto"
                    width: "0.92"
                  children:
                    - type: image
                      path: providerImage.svg
                      path=func: .builtIn.utils.prepareDocToPath
                      dataKey: itemObject.name.data.avatar
                      style:
                        verticalAlign: middle
                        display: "inline-block"
                        marginLeft: "0.05"
                        width: "12vw"
                        height: "12vw"
                    - type: view
                      style:
                        verticalAlign: middle
                        display: "inline-block"
                        marginLeft: "0.05"
                      children:
                        - type: view
                          style:
                            verticalAlign: middle
                            display: "inline-block"
                          children:
                            - type: label
                              dataKey: itemObject.name.data.fullName
                              style:
                                display: "inline-block"
                                verticalAlign: middle
                                width: "auto"
                                height: "auto"
                                fontWeight: "600"
                                fontSize: .Nfont.h14
                                color: "#333333"
                            - type: label
                              text: "&nbsp;-&nbsp;"
                              style:
                                display: "inline-block"
                                verticalAlign: middle
                                width: "auto"
                                height: "auto"
                                fontWeight: "600"
                                fontSize: .Nfont.h14
                                color: "#333333"
                            - type: label
                              dataKey: itemObject.name.data.title
                              style:
                                display: "inline-block"
                                verticalAlign: middle
                                width: "auto"
                                height: "auto"
                                fontWeight: "600"
                                fontSize: .Nfont.h14
                                color: "#333333"
                        - type: label
                          dataKey: itemObject.name.data.specialty.0.specialty
                          style:
                            verticalAlign: middle
                            width: "0.7"
                            height: "auto"
                            fontWeight: "600"
                            fontSize: .Nfont.h12
                            color: "#666666"

                    # - emit:
                    #     dataKey:
                    #       var: itemObject
                    #     actions:
                    #       - ..formData.providerId@: $var._source.vid
                    # - actionType: evalObject
                    #   object:
                    #     - ..formData.providerInfo@: ""
                    #     - =..apiRequest.getProviderPublicProfile.docApi.get: ""
                    #     - ..formData.providerInfo@: =..apiRequest.getProviderPublicProfile.resp.doc.0
                    #     # 存的是 profile 35840的信息
                    #     - .Global.temporaryId@: =..formData.providerInfo
                    # - goto: SearchOutProviderInfo
                - type: view
                  style:
                    height: "0.0198" #16.08px
                    width: "1"
                - type: view
                  style:
                    width: "1"
                    height: "1px"
                    background: "0xdededf"
    - type: popUp
      viewTag: searchingTag
      style:
        height: "1"
        width: "1"
        zIndex: "10000"
        backgroundColor: "0x33333366"
        top: "0"
      children:
        - type: view
          style:
            backgroundColor: "0xffffff"
            height: "0.2"
            width: "0.6"
            left: "0.2"
            top: "0.3"
            border:
              style: ""
            borderWidth: "1"
            borderColor: ""
            borderRadius: "10"
          children:
            - type: image
              path: zhuanquan.gif
              style:
                width: "0.4"
                left: "0.1"
    - .SoftTips:
      message: You need to write before search next
      style:
        zIndex: "100"
      viewTag: errorVT
  event:
    tabChange:
      - emit:
          dataKey:
            var: itemObject
          actions:
            - =.builtIn.object.setProperty:
                dataIn:
                  obj: =..formDataTemp.titleData
                  label: "title"
                  text: $var.title
                  arr: ["fontColor", "fontWeight", "block"]
                  valueArr: ["0x2988e6", "500", "block"]
                  errorArr: ["0x666666", "400", "none"]
                dataOut: MyConnection.formDataTemp.titleData
            - if:
                - =.builtIn.string.equal:
                    dataIn:
                      string1: $var.title
                      string2: "Providers"
                - ..showList@: =..connection.connectionList.doc
                - ..showList@: =..apiRequest.facilityConnections.connectionList.doc
            - if:
                - =.builtIn.string.equal:
                    dataIn:
                      string1: $var.title
                      string2: "Providers"
                - ..searchArray@: =..formDataTemp.searchArray.provider
                - ..searchArray@: =..formDataTemp.searchArray.Facility
            - if:
                - =.builtIn.string.equal:
                    dataIn:
                      string1: $var.title
                      string2: "Providers"
                - ..localSearchQ@: =..apiRequest.localSearchProvider.connectionList.get
                - ..localSearchQ@: =..apiRequest.localSearchFacility.connectionList.get
            - if:
                - =.builtIn.string.equal:
                    dataIn:
                      string1: $var.title
                      string2: "Providers"
                - ..formDataTemp.providerDisplayView@: "block"
                - continue
            - if:
                - =.builtIn.string.equal:
                    dataIn:
                      string1: $var.title
                      string2: "Providers"
                - ..formDataTemp.facilityDisplayView@: "none"
                - continue

            - if:
                - =.builtIn.string.equal:
                    dataIn:
                      string1: $var.title
                      string2: "Medical Facilities"
                - ..formDataTemp.facilityDisplayView@: "block"
                - continue

            - if:
                - =.builtIn.string.equal:
                    dataIn:
                      string1: $var.title
                      string2: "Medical Facilities"
                - ..formDataTemp.providerDisplayView@: "none"
                - continue
            - if:
                - =.builtIn.string.equal:
                    dataIn:
                      string1: $var.title
                      string2: "Providers"
                - .Global.providerOrFacility@: "Providers"
                - continue
            - if:
                - =.builtIn.string.equal:
                    dataIn:
                      string1: $var.title
                      string2: "Medical Facilities"
                - .Global.providerOrFacility@: "Medical Facilities"
                - continue
      - actionType: builtIn
        funcName: redraw
        viewTag: profileInfoTag
      - actionType: builtIn
        funcName: redraw
        viewTag: listInfoView
      - actionType: builtIn
        funcName: redraw
        viewTag: listInfoView1
  style:
    tabList:
      width: "1"
      margin: "0"
      axis: horizontal
      height: "auto"
      overflow: hidden
      marginTop: "0.02"
    tabListItem:
      width: "0.5"
      height: "auto"
      boxSizing: border-box
    title:
      color: itemObject.fontColor
      height: "auto"
      width: "0.5"
      fontWeight: itemObject.fontWeight
      textAlign:
        x: center
      fontSize: .Nfont.h16
    line:
      marginTop: "0.005"
      height: "0.0025" #2.03px
      width: "0.5"
      backgroundColor: "0xdededf"
    tabBar:
      display: itemObject.block
      top: "0.03"
      left: "0.21"
      width: "0.08"
      height: "0.0025"
      backgroundColor: "0x2988e6"
      zIndex: 10
