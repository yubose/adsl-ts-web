AddMedicalRecordsToMeeting:
  pageNumber: "195"
  title: Medical Records
  init:
    - actionType: evalObject
      object:
        .Global._nonce@:
          =.builtIn.math.random: ""
    - .SignInCheck
    - ..listData.get
  listData:
    medicalRecords:
      document: ""
    deleteDoc:
      id: ""
    get:
      .DocAPI.get: ""
      api: rd
      dataKey: listData.medicalRecords
      ids:
        - .Global.rootNotebookID
      xfname: eid
      maxcount: "500"
      obfname: "mtime"
      type: .DocType.UploadFile
      _nonce: .Global._nonce
    delete:
      api: dx
      dataIn: listData.deleteDoc
  selectedDoc:
    isSelected: false
  sharedDoc: []
  generalInfo:
    value: true
  components:
    - .BaseHeader:
    - type: button
      onClick:
        - actionType: builtIn
          funcName: goBack
          reload: true
      style:
        top: "0"
        left: "0.03"
        width: "0.2"
        height: "0.1"
        backgroundColor: "#2887e5"
        zIndex: 100
        textAlign:
          y: center
        border:
          style: "1"
      children:
        - type: label
          text: Cancel
          style:
            left: "0.06"
            top: "0.01"
            height: "0.08"
            width: "0.16"
            zIndex: 100
            fontSize: "15"
            color: "0xffffffff"
            textAlign:
              x: left
              y: center
    - .HeaderRightImg:
      path: addWhite.svg
      onClick:
        - goto: UploadMedicalRecord
    - type: view
      style:
        left: "0"
        width: "1"
        top: "0.1"
        height: "0.9"
      children:
        - type: view
          style:
            top: "0.02"
            left: "0.03"
            width: "0.7"
            height: "0.04"
            borderRadius: "5"
            backgroundColor: "#E4E4E5"
            zIndex: "100"
          children:
            - type: label
              text: "Search"
              style:
                left: "0.1"
                top: "0.005"
                textAlign:
                  x: center
                  y: center
                zIndex: "100"
            - type: image
              path: search.svg
              style:
                top: "0.005"
                left: "0.02"
                height: "0.03"
                zIndex: "100"
        - type: label
          text: "Search"
          onClick:
            - goto:
          style:
            top: "0.02"
            paddingTop: "2px"
            left: "0.77"
            width: "0.18"
            height: "0.035"
            borderRadius: "2"
            color: "#ffffff"
            backgroundColor: "0x2988e6"
            textAlign:
              x: center
            zIndex: "100"
        - type: list
          contentType: listObject
          listObject: ..listData.medicalRecords.doc
          iteratorVar: itemObject
          style:
            left: "0"
            top: "0.07"
            width: "1"
            height: "0.7"
          children:
            - type: listItem
              itemObject: ""
              viewTag: select
              style:
                left: "0"
                width: "1"
                height: "0.1"
                border:
                  style: "2"
                borderColor: "0xf3f3f3"
                backgroundColor: "0xffffffff"
              children:
                - type: image
                  path:
                    emit:
                      dataKey:
                        var: itemObject
                      actions:
                        - if:
                            - =.builtIn.string.equal:
                                dataIn:
                                  string1: =..generalInfo.value
                                  string2: $var.isSelected
                            - selectOn.svg
                            - selectOff.svg
                  onClick:
                    - emit:
                        dataKey:
                          var: itemObject
                        actions:
                          - if:
                              - =.builtIn.string.equal:
                                  dataIn:
                                    string1: =..generalInfo.value
                                    string2: $var.isSelected
                              - =.builtIn.object.clear:
                                  dataIn:
                                    object: $var
                                    key: isSelected
                              - =.builtIn.object.set:
                                  dataIn:
                                    object: $var
                                    key: isSelected
                                    value: true
                          - if:
                              - =.builtIn.string.equal:
                                  dataIn:
                                    string1: =..generalInfo.value
                                    string2: $var.isSelected
                              - =.builtIn.array.add:
                                  dataIn:
                                    object: =..sharedDoc
                                    value: $var
                              - =.builtIn.array.removeById:
                                  dataIn:
                                    object: =..sharedDoc
                                    id: $var.id
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: select
                  style:
                    left: "0.04"
                    height: "0.028"
                    top: "0.035"
                    width: "0.05"
                - type: label
                  dataKey: itemObject.name.title
                  style:
                    left: "0.16"
                    top: "0.012"
                    width: "0.45"
                    height: "0.03"
                    fontSize: .Nfont.h16
                    textAlign:
                      x: left
                - type: label
                  text=func: .builtIn.string.formatUnixtime_en
                  dataKey: itemObject.ctime
                  style:
                    left: "0.16"
                    top: "0.05"
                    width: "0.45"
                    height: "0.02"
                    fontSize: "13"
                    textAlign:
                      x: left
                    fontFamily: PMingLiU
                - type: button
                  text: delete
                  style:
                    left: "0.8"
                    top: "0.05"
                    height: "0.02"
                    width: "0.12"
                    border:
                      style: "3"
                    borderRadius: "5"
                    borderColor: "#e80000"
                    fonsSize: "12"
                    color: "#ffffff"
                    backgroundColor: "#e80000"
                    textAlign:
                      x: center
                      y: center
                  onClick:
                    - emit:
                        dataKey:
                          var: itemObject
                        actions:
                          - ..listData.deleteDoc.id@: $var.id
                          - =..listData.delete: ""
                    - actionType: evalObject
                      object:
                        .Global._nonce@:
                          =.builtIn.math.random: ""
                    - actionType: evalObject
                      object:
                        - =..listData.docAPI.get: ""
                        - =.builtIn.goto:
                            dataIn:
                              destination: AddMedicalRecordsToMeeting
                              pageReload: true
        - type: button
          text: Attach to email
          onClick:
            - actionType: evalObject
              object:
                .Global._nonce@:
                  =.builtIn.math.random: ""
            - actionType: builtIn
              funcName: goBack
              reload: true
          style:
            left: "0.15"
            width: "0.7"
            height: "0.05"
            top: "0.8"
            color: "0xffffff"
            backgroundColor: "0x2988e6"
            fontSize: .Nfont.h14
            fontFamily: "sans-serif"
            border:
              style: "3"
            borderColor: "0x2988e6"
            borderRadius: "3"
            textAlign:
              x: center
              y: center
