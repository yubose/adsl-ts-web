MyProfile:
  title: "My Profile"
  init:
    - .SignInCheck
    - ..apiRequest.profile.document@: =.Global.MyProfile
    # if username and phone in profile are missing, use the same information in Global.currentUser to replace
    - if:
        - =..apiRequest.profile.document.name.data.phone
        - continue
        - ..apiRequest.profile.document.name.data.phone@: =.Global.currentUser.vertex.uid
    - if:
        - =..apiRequest.profile.document.name.data.userName
        - continue
        - ..apiRequest.profile.document.name.data.userName@: =.Global.currentUser.vertex.name.userName
    - actionType: evalObject
      object:
        .Global._nonce@:
          =.builtIn.math.random: ""
    - =..apiRequest.publicProfile.docAPI.get: "" #use publicProfile id
    - ..apiRequest.publicProfile.document@: =..apiRequest.publicProfile.docResponse.doc.0
    - =.builtIn.object.getObjKey:
        dataIn:
          objects: =..apiRequest.publicProfile.document.name.data
        dataOut: Global.selected
    # - =..apiRequest.connections.docAPI.get: ""
    # - ..formData.FacilityData@: =..apiRequest.connections.connectionList.doc
    - =.builtIn.object.setProperty:
        dataIn:
          obj: =..formDataTemp.titleData
          label: "title"
          text: .Global.providerProfileVar
          arr: ["fontColor", "fontWeight", "block"]
          valueArr: ["0x2988e6", "500", "block"]
          errorArr: ["0x333333", "400", "none"]
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =.Global.providerProfileVar
              string2: "About"
        - actionType: evalObject
          object:
            - ..formDataTemp.leftStyle@: "11.5vw"
            - ..formDataTemp.blockCredentialsInfo@: "none"
            - ..formDataTemp.blockFacilityInfo@: "none"
            - ..formDataTemp.blockAboutInfo@: "block"
        - continue
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =.Global.providerProfileVar
              string2: "Credentials"
        - actionType: evalObject
          object:
            - ..formDataTemp.blockAboutInfo@: "none"
            - ..formDataTemp.leftStyle@: "44vw"
            - ..formDataTemp.blockCredentialsInfo@: "block"
            - ..formDataTemp.blockFacilityInfo@: "none"
        - continue
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =.Global.providerProfileVar
              string2: "Facility"
        - actionType: evalObject
          object:
            - ..formDataTemp.leftStyle@: "78vw"
            - ..formDataTemp.blockFacilityInfo@: "block"
            - ..formDataTemp.blockCredentialsInfo@: "none"
            - ..formDataTemp.blockAboutInfo@: "none"
        - continue
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =..apiRequest.profile.document.name.data.cv
              string2: ""
        - ..formData.isCvShow@: "none"
        - continue
    - actionType: evalObject
      object:
        .Global._nonce@:
          =.builtIn.math.random: ""
    # get current facility profile
    - actionType: evalObject
      object:
        - =..apiRequest.facilityProfile.docAPI.get: ""
    # 是否存在facility
    - actionType: evalObject
      object:
        - =.builtIn.array.getListLength:
            dataIn:
              object: =..apiRequest.facilityProfile.docQueryResp.doc
            dataOut: MyProfile.formData.facilityLength

    - actionType: evalObject
      object:
        - if:
            - =.builtIn.string.equal:
                dataIn:
                  string1: =..formData.facilityLength
                  string2: "0"
            - actionType: evalObject
              object:
                - ..formDataTemp.facilityInfo@: "none"
                - ..formDataTemp.emptyfacility@: "block"
            - actionType: evalObject
              object:
                - ..formDataTemp.facilityInfo@: "block"
                - ..formDataTemp.emptyfacility@: "none"
  formData:
    cv: ""
    language: ""
    currentFacility: []
    facilityLength: ""
  formDataTemp:
    titleData:
      - title: About
        fontColor: "0x2988e6"
        fontWeight: "500"
        # width: "31vw"
        # leftStyle: "11.5vw"
        block: "block"
      - title: Credentials
        fontColor: "0x333333"
        fontWeight: "400"
        # leftStyle: "44vw"
        # width: "33vw"
        block: "none"
      - title: Facility
        fontColor: "0x333333"
        fontWeight: "400"
        # leftStyle: "77vw"
        # width: "35vw"
        block: "none"
    blockAboutInfo: "block"
    blockCredentialsInfo: "none"
    blockFacilityInfo: "none"
    emptyfacility: "block"
    facilityInfo: "none"
    # leftStyle: "11.5vw"
    idImageStyle: "none"
    providerProfileVar: "About"
    # blockImageStyle: "none"
    blockMarginTop: "10vh"
    blockHeight: "84vh"

    gender:
      - key: gender
        value: Male
      - key: gender
        value: Female
      - key: gender
        value: Other
  apiRequest:
    # get current facility profile
    facilityProfile:
      docQueryResp: ""
      docQueryReq:
        id: .Global.currentUser.vertex.id
        xfname: (E.bvid|E.evid)&(!D.ovid)
        ObjType: 12
        obfname: "ctime"
        _nonce: .Global._nonce
        type: .DocType.FacilityProfile
        sCondition: E.type=10002 AND E.tage>0 AND E.subtype&0xff0000=0x30000
      docAPI:
        get:
          api: rd
          dataIn: MyProfile.apiRequest.facilityProfile.docQueryReq
          dataOut: MyProfile.apiRequest.facilityProfile.docQueryResp
    # connections:
    #   connectionList:
    #     edge: ""
    #   docAPI:
    #     get:
    #       api: rd
    #       type: 271361
    #       xfname: E.bvid|E.evid
    #       id: .Global.currentUser.vertex.id
    #       ObjType: 12
    #       _nonce: =.Global._nonce
    #       dataKey: apiRequest.connections.connectionList
    #       sCondition: E.type=10002 AND E.tage=1 #AND V.type=1
    publicProfile:
      docResponse: ""
      document:
        type: .DocType.DoctorPublicProfile
        eid: .Global.rootNotebookID
        name:
          data:
      docAPI:
        store:
          api: cd
          dataKey: apiRequest.publicProfile.document
          subtype:
            mediaType: "application/json"
        get:
          .DocAPI.get: ""
          api: rd
          id: .Global.rootNotebookID
          xfname: eid
          type: .DocType.DoctorPublicProfile
          dataKey: apiRequest.publicProfile.docResponse
          maxcount: "1"
          obfname: "ctime"
          _nonce: =.Global._nonce
    profile:
      specialty: ""
      docResponse: ""
      document:
        # .Global.MyProfile: ""
        eid: .Global.rootNotebookID
        type: .DocType.DoctorProfile
        name:
          data:
            fullName: ""
            gender: ""
            email: ""
            languages: []
          type: "application/json"
      docAPI:
        get:
          .DocAPI.get: ""
          api: rd
          id: .Global.rootNotebookID
          xfname: eid
          type: .DocType.DoctorProfile
          maxcount: "1"
          obfname: "mtime"
          dataKey: apiRequest.profile.docResponse
          _nonce: =.Global._nonce
        store:
          api: cd
          dataIn: apiRequest.profile.document
          dataOut: apiRequest.profile.response
  components:
    - .BaseHeader:
    - .HeaderLeftButton:
      onClick:
        - goto: MenuBars
    - .HeaderRightButton:
      text: Edit
      onClick:
        - goto: EditMyProfile
    #  body
    - type: view
      viewTag: blockImageTag
      style:
        width: "1"
        marginTop: "0.1"
        height: "auto"
        overflow: hidden
      children:
        - type: view
          style:
            marginTop: "0.03"
            width: "0.85"
            height: "auto"
            marginLeft: "0.1"
          children:
            - type: view
              style:
                display: "inline-block"
                height: "18vw"
                width: "0.18"
                border:
                  style: "1"
                borderWidth: "1"
                borderRadius: "5"
              children:
                - type: image
                  dataKey: apiRequest.profile.document.name.data.avatar
                  path=func: =.builtIn.utils.prepareDocToPath
                  path: providerImage.svg
                  viewTag: avatar
                  style:
                    width: "20vw"
                    height: "18vw"
                    textAlign:
                      x: center

            - type: view
              style:
                display: "inline-block"
                width: "0.67"
                height: "auto"
                # backgroundColor: "pink"
              children:
                - type: view
                  style:
                    marginTop: "0.01"
                    marginLeft: "0.05"
                    height: "auto"
                    width: "0.62"
                  children:
                    - type: label
                      text: "User Name:"
                      style:
                        display: "inline-block"
                        fontSize: .Nfont.n2
                        color: "0x000000"
                    - type: label
                      dataKey: apiRequest.profile.document.name.data.userName
                      style:
                        fontSize: .Nfont.n2
                        display: "inline-block"
                - type: view
                  style:
                    marginTop: "0.01"
                    marginLeft: "0.05"
                    height: "auto"
                    width: "0.62"
                  children:
                    - type: label
                      text: "Phone #:"
                      style:
                        display: "inline-block"
                        fontSize: .Nfont.n2
                        color: "0x000000"
                        height: "auto"
                        # fontWeight: "400"
                    - type: label
                      dataKey: apiRequest.profile.document.name.data.phone
                      style:
                        display: "inline-block"
                        fontSize: .Nfont.n2
                        color: "0x333333"
                        height: "auto"
                        # fontWeight: "400"
                - type: label
                  text: "View public profile"
                  style:
                    marginLeft: "0.05"
                    marginTop: "0.01"
                    color: "0x2988E6"
                    fontSize: "2vw"
                    textDecoration: underline
                    textDecorationColor: "0x2988e6"
                  onClick:
                    - goto: ShowForShare
    - type: view
      viewTag: blockMarginTag
      style:
        marginTop: "0.03"
        width: "1"
        height: "0.05"
        zIndex: "100"
        border:
          style: 2
          color: "0xDEDEDF"
        borderWidth: "2px"
      children:
        - type: list
          scrollable: false
          viewTag: profileInfoTag
          contentType: listObject
          listObject: ..formDataTemp.titleData
          iteratorVar: itemObject
          style:
            width: "1"
            margin: "0"
            axis: horizontal
            height: auto
            border:
              style: "2"
            borderColor: "0xdededf"
            borderWidth: "2px"
            zIndex: 100
          children:
            - type: listItem
              itemObject:
              style:
                width: "0.333"
                height: "auto"
                marginTop: "0"
              onClick:
                - emit:
                    dataKey:
                      var: itemObject
                    actions:
                      - =.builtIn.object.setProperty:
                          dataIn:
                            obj: =..formDataTemp.titleData
                            label: "title"
                            text: $var.title
                            arr: ["fontColor", "fontWeight", "block"]
                            valueArr: ["0x2988e6", "500", "block"]
                            errorArr: ["0x333333", "400", "none"]
                      # - ..formDataTemp.leftStyle@: $var.leftStyle
                      - if:
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: $var.title
                                string2: "About"
                          - ..formDataTemp.blockAboutInfo@: "block"
                          - continue
                      - if:
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: $var.title
                                string2: "About"
                          - ..formDataTemp.blockCredentialsInfo@: "none"
                          - continue
                      - if:
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: $var.title
                                string2: "About"
                          - ..formDataTemp.blockFacilityInfo@: "none"
                          - continue
                      - if:
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: $var.title
                                string2: "About"
                          - ..formDataTemp.providerProfileVar@: "About"
                          - continue
                      - if:
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: $var.title
                                string2: "Credentials"
                          - ..formDataTemp.blockAboutInfo@: "none"
                          - continue
                      - if:
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: $var.title
                                string2: "Credentials"
                          - ..formDataTemp.blockCredentialsInfo@: "block"
                          - continue
                      - if:
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: $var.title
                                string2: "Credentials"
                          - ..formDataTemp.blockFacilityInfo@: "none"
                          - continue
                      - if:
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: $var.title
                                string2: "Credentials"
                          - ..formDataTemp.providerProfileVar@: "Credentials"
                          - continue
                      - if:
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: $var.title
                                string2: "Facility"
                          - ..formDataTemp.blockFacilityInfo@: "block"

                          - continue
                      - if:
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: $var.title
                                string2: "Facility"
                          - ..formDataTemp.blockAboutInfo@: "none"

                          - continue
                      - if:
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: $var.title
                                string2: "Facility"
                          - ..formDataTemp.blockCredentialsInfo@: "none"
                          - continue
                      - if:
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: $var.title
                                string2: "Facility"
                          - ..formDataTemp.providerProfileVar@: "Facility"
                          - continue

                - actionType: evalObject
                  object:
                    - .Global.providerProfileVar@: =..formDataTemp.providerProfileVar

                - actionType: builtIn
                  funcName: redraw
                  viewTag: leftBlockTag
                - actionType: builtIn
                  funcName: redraw
                  viewTag: profileInfoTag
                - actionType: builtIn
                  funcName: redraw
                  viewTag: AboutInfoTag
                - actionType: builtIn
                  funcName: redraw
                  viewTag: CredentialsInfoTag
                - actionType: builtIn
                  funcName: redraw
                  viewTag: FacilityInfoTag
                # - actionType: builtIn
                #   funcName: redraw
                #   viewTag: blockImageTag
                - actionType: builtIn
                  funcName: redraw
                  viewTag: blockMarginTag
                - actionType: builtIn
                  funcName: redraw
                  viewTag: blockHeightTag

              children:
                - type: label
                  dataKey: itemObject.title
                  style:
                    color: itemObject.fontColor
                    lineHeight: "6vh"
                    height: "0.05"
                    # width: itemObject.width
                    width: "0.333"
                    fontWeight: itemObject.fontWeight
                    display: "inline-block"
                    textAlign:
                      x: center
                    fontSize: .Nfont.n2
                - type: view
                  viewTag: leftBlockTag
                  style:
                    display: itemObject.block
                    top: "0.045"
                    left: "0.12"
                    width: "0.08"
                    height: "0.005"
                    backgroundColor: "0x2988e6"
                    # borderRadius: "20"
    - type: scrollView
      viewTag: blockHeightTag
      style:
        margin: "0.01"
        height: "0.6"
        width: "1"
        backgroundColor: "0xffffff"
        overflow: scroll
      children:
        - type: view
          viewTag: AboutInfoTag
          style:
            width: "1"
            display: ..formDataTemp.blockAboutInfo
            height: "0.6"
            fontSize: .Nfont.n2
          children:
            - type: view
              style:
                width: "1"
                height: "auto"
                margin: "0"
                backgroundColor: "0xf0f0f0"
              children:
                - type: label
                  text: Basic Info
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.9"
                    marginLeft: "0.05"
                    lineHeight: "4.5vh"
                    height: "0.045"
            - type: view
              style:
                width: "0.9"
                height: "0.045"
                marginLeft: "0.05"
                marginTop: "0.01"
              children:
                - type: label
                  text: "First Name:"
                  style:
                    color: "0x333333"
                    fontWeight: "600"
                    width: "0.21"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"
                - type: label
                  dataKey: apiRequest.profile.document.name.data.firstName
                  style:
                    color: "0x666666"
                    fontWeight: "400"
                    width: "0.69"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"
                    textAlign:
                      x: right
            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0"
              children:
                - type: label
                  text: "Middle Name:"
                  style:
                    color: "0x333333"
                    fontWeight: "600"
                    width: "0.25"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"

                - type: label
                  dataKey: apiRequest.profile.document.name.data.middleName
                  style:
                    color: "0x666666"
                    fontWeight: "400"
                    width: "0.65"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    textAlign:
                      x: right
                    height: "0.045"
            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0"
              children:
                - type: label
                  text: "Last Name: "
                  style:
                    color: "0x333333"
                    fontWeight: "600"
                    width: "0.21"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"
                - type: label
                  dataKey: apiRequest.profile.document.name.data.lastName
                  style:
                    color: "0x666666"
                    fontWeight: "400"
                    width: "0.69"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    textAlign:
                      x: right
                    height: "0.045"
            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0"
              children:
                - type: label
                  text: "Title/Training: "
                  style:
                    color: "0x333333"
                    fontWeight: "600"
                    width: "0.24"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"
                - type: label
                  dataKey: apiRequest.profile.document.name.data.title
                  style:
                    color: "0x666666"
                    fontWeight: "400"
                    width: "0.66"
                    lineHeight: "4.5vh"
                    textAlign:
                      x: right
                    display: "inline-block"
                    height: "0.045"

            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0.01"
              children:
                - type: label
                  text: "Languages Spoken:"
                  style:
                    color: "0x333333"
                    fontWeight: "600"
                    width: "0.9"
                - type: label
                  dataKey: apiRequest.profile.document.name.data.languages
                  style:
                    marginTop: "0.01"
                    width: "0.9"
                    color: "0x666666"
                    height: "auto"
                    textAlign:
                      x: left
                    wordWrap: break-word
            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0"
              children:
                - type: label
                  text: "Gender:"
                  style:
                    color: "0x333333"
                    fontWeight: "600"
                    width: "0.15"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"
                - type: label
                  dataKey: apiRequest.profile.document.name.data.gender
                  style:
                    color: "0x666666"
                    fontWeight: "400"
                    width: "0.75"
                    lineHeight: "4.5vh"
                    textAlign:
                      x: right
                    display: "inline-block"
                    height: "0.045"

            - type: view
              style:
                width: "1"
                height: "auto"
                marginTop: "0.01"
                backgroundColor: "0xf0f0f0"
              children:
                - type: label
                  text: Contact
                  style:
                    color: "0x333333"
                    fontWeight: "400"
                    width: "0.9"
                    marginLeft: "0.05"
                    lineHeight: "4.5vh"
                    height: "0.045"
            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0.01"
              children:
                - type: label
                  text: "Email:"
                  style:
                    color: "0x333333"
                    fontWeight: "600"
                    width: "0.12"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"
                - type: label
                  # text: First Name
                  # placeholder: Enter here
                  dataKey: apiRequest.profile.document.name.data.email
                  style:
                    color: "0x666666"
                    fontWeight: "400"
                    width: "0.78"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    textAlign:
                      x: right
                    height: "0.045"
            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0"
              children:
                - type: label
                  text: "Fax #"
                  style:
                    color: "0x333333"
                    fontWeight: "600"
                    width: "0.11"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"
                - type: label
                  # placeholder: Enter here
                  dataKey: apiRequest.profile.document.name.data.fax
                  style:
                    color: "0x666666"
                    fontWeight: "400"
                    width: "0.79"
                    textAlign:
                      x: right
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"
        - type: view
          viewTag: CredentialsInfoTag
          style:
            width: "1"
            height: "auto"
            fontSize: .Nfont.n2
            display: ..formDataTemp.blockCredentialsInfo
          children:
            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0.01"
              children:
                - type: label
                  text: "Specialty and board certified:"
                  style:
                    color: "0x333333"
                    fontWeight: "600"
                    width: "0.8"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"
            - type: list
              scrollable: "false"
              contentType: listObject
              listObject: ..apiRequest.profile.document.name.data.specialty
              iteratorVar: itemObject
              style:
                width: "0.9"
                margin: "0"
                left: "0"
                marginTop: "0"
                marginLeft: "0.05"
                height: auto
              children:
                - type: listItem
                  itemObject:
                  style:
                    width: "0.9"
                    height: "0.03"
                    marginTop: "0"
                  children:
                    - type: label
                      dataKey: itemObject.specialty
                      style:
                        width: "0.8"
                        fontWeight: "400"
                        height: "0.03"
                        color: "0x666666"
                        display: "inline-block"
                        fontSize: .Nfont.h1
                    - type: label
                      dataKey: itemObject.boardCertified
                      style:
                        width: "0.1"
                        fontWeight: "400"
                        height: "0.03"
                        color: "0x666666"
                        marginLeft: "0"
                        display: "inline-block"
                        fontSize: .Nfont.h1
                        textAlign:
                          x: right
            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0"
              children:
                - type: label
                  text: "Medical License,State and Expiration:"
                  style:
                    color: "0x333333"
                    fontWeight: "600"
                    width: "0.8"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"

            - type: list
              scrollable: "false"
              contentType: listObject
              listObject: ..apiRequest.profile.document.name.data.MedicalLicense
              iteratorVar: itemObject
              style:
                width: "0.9"
                margin: "0"
                left: "0"
                marginTop: "0"
                height: auto
                marginLeft: "0.05"
              children:
                - type: listItem
                  itemObject:
                  style:
                    width: "0.9"
                    height: "0.03"
                    left: "0"
                    marginTop: "0"
                  children:
                    - type: label
                      dataKey: itemObject.medicalLicense
                      style:
                        width: "0.4"
                        fontWeight: "400"
                        height: "0.03"
                        color: "0x666666"
                        fontSize: .Nfont.h1
                        display: "inline-block"
                    - type: label
                      dataKey: itemObject.state
                      style:
                        width: "0.2"
                        fontWeight: "400"
                        height: "0.03"
                        color: "0x666666"
                        display: "inline-block"
                        fontSize: .Nfont.h1
                    - type: label
                      dataKey: itemObject.expiration
                      style:
                        width: "0.3"
                        fontWeight: "400"
                        height: "0.03"
                        color: "0x666666"
                        display: "inline-block"
                        fontSize: .Nfont.h1
                        textAlign:
                          x: right
            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0"
              children:
                - type: label
                  text: "NPI #:"
                  style:
                    color: "0x333333"
                    fontWeight: "600"
                    width: "0.11"
                    display: "inline-block"
                    height: "auto"
                - type: label
                  dataKey: apiRequest.profile.document.name.data.NPI
                  style:
                    color: "0x666666"
                    fontWeight: "400"
                    width: "0.79"
                    display: "inline-block"
                    height: "auto"
                    wordWrap: break-word
            - type: view
              style:
                marginTop: "0.01"
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
              children:
                - type: label
                  text: "DEA #:"
                  style:
                    color: "0x333333"
                    fontWeight: "600"
                    width: "0.12"
                    display: "inline-block"
                    height: "auto"
                - type: label
                  dataKey: apiRequest.profile.document.name.data.DEA
                  style:
                    color: "0x666666"
                    fontWeight: "400"
                    width: "0.78"
                    display: "inline-block"
                    height: "auto"
                    wordWrap: break-word
            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0.01"
              children:
                - type: label
                  text: "Description:"
                  style:
                    color: "0x333333"
                    fontWeight: "600"
                    width: "0.9"
                    height: "auto"

                - type: label
                  dataKey: apiRequest.profile.document.name.data.description
                  style:
                    marginTop: "0.01"
                    color: "0x666666"
                    height: "auto"
                    width: "0.9"
                    wordWrap: break-word
            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0.01"
              children:
                - type: label
                  text: "Education and training:"
                  style:
                    color: "0x333333"
                    fontWeight: "600"
                    width: "0.9"
                    height: "auto"

                - type: label
                  dataKey: apiRequest.profile.document.name.data.education
                  style:
                    marginTop: "0.01"
                    color: "0x666666"
                    height: "auto"
                    width: "0.9"
                    wordWrap: break-word
            - type: view
              style:
                width: "0.9"
                height: "auto"
                marginLeft: "0.05"
                marginTop: "0"
              children:
                - type: label
                  text: "CV:"
                  style:
                    color: "0x333333"
                    fontWeight: "600"
                    width: "0.7"
                    lineHeight: "4.5vh"
                    display: "inline-block"
                    height: "0.045"
            - type: view
              viewTag: cvBox
              style:
                width: "0.9"
                height: "0.1"
                marginLeft: "0.05"
                marginTop: "0.03"
                display: ..formData.isCvShow
              children:
                - type: image
                  viewTag: cvTag
                  path: null.png
                  path=func: =.builtIn.utils.prepareDocToPath
                  dataKey: MyProfile.apiRequest.profile.document.name.data.cv
                  style:
                    left: "0"
                    top: "0"
                    height: "0.1"
                    width: "0.2"
                  onClick:
                    - actionType: evalObject
                      object:
                        - ..formData.cv@: =..apiRequest.profile.document.name.data.cv
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: imgBlockBigTag
                    - actionType: popUp
                      popUpView: imgBlockBigTag

        - type: view
          viewTag: CredentialsInfoTag
          style:
            width: "1"
            height: "auto"
            fontSize: .Nfont.n2
            display: ..formDataTemp.blockFacilityInfo
          children:
            - type: view
              style:
                display: ..formDataTemp.emptyfacility
                width: "1"
                height: "auto"
                overflow: hidden
                textAlign:
                  x: center
              children:
                - type: image
                  path: emptyPage.svg
                  style:
                    marginTop: "0.0911"
                    width: "0.6453"
                - type: label
                  text: "There is no facility now."
                  style:
                    marginTop: "0.0467"
                    width: "1"
                    height: "auto"
                    fontSize: .Nfont.h14
                    textAlign:
                      x: center

            - type: list
              viewTag: FacilityInfoTag
              contentType: listObject
              listObject: ..apiRequest.facilityProfile.docQueryResp.doc
              iteratorVar: itemObject
              style:
                width: "1"
                margin: "0"
                display: ..formDataTemp.facilityInfo
                height: "auto"
                overflow: scroll
              children:
                - type: listItem
                  itemObject:
                  style:
                    width: "1"
                    height: "auto"
                    margin: "0"
                    border:
                      style: 2
                      color: "0xdedede"
                    borderWidth: "1"
                    overflow: hidden
                  onClick:
                    - emit:
                        dataKey:
                          var: itemObject
                        actions:
                          - .Global.formData.temporaryFacilityId@: $var
                    - goto: FacilityInfomation
                    # - actionType: updateObject
                    #   dataKey: Global.formData.temporaryFacilityId
                    #   dataObject: itemObject
                    # - goto: OrganizationInfo
                  children:
                    - type: view
                      style:
                        marginLeft: "0.04"
                        width: "0.92"
                        height: "auto"
                        backgroudnColor: "pink"
                        paddingTop: "0.01970"
                        paddingBottom: "0.01970"
                      children:
                        - type: image
                          path=func: =.builtIn.utils.prepareDocToPath
                          path: office-building.svg
                          dataKey: itemObject.name.data.basicInfo.businessLogo
                          style:
                            display: "inline-block"
                            height: "0.07389"
                            width: "0.16"
                            border:
                              style: 3
                            borderColor: "#dededf"
                            borderWidth: "1"
                            borderRadius: "4"
                            verticalAlign: middle
                        - type: view
                          style:
                            marginLeft: "0.032"
                            display: "inline-block"
                            verticalAlign: middle
                            height: "auto"
                            width: "0.65"
                            overflow: hidden
                          children:
                            - type: label
                              dataKey: itemObject.name.data.basicInfo.medicalFacilityName
                              style:
                                width: "0.65"
                                height: "auto"
                                wordBreak: break-word
                                fontSize: .Nfont.h14
                                color: "#333333"
                                fontWeight: "600"
                            - type: label
                              text: Medical Facility
                              dataKey:
                              style:
                                marginTop: "0.0123"
                                width: "0.65"
                                height: "auto"
                                wordBreak: break-word
                                fontSize: .Nfont.h12
                                color: "#666666"
                        - type: image
                          path: blackRight.svg
                          style:
                            marginLeft: "0.038"
                            display: "inline-block"
                            height: "0.014778"
                            width: "0.032"
                            verticalAlign: middle
                    # - type: view
                    #   style:
                    #     height: "0.12"
                    #     marginLeft: "0.05"
                    #     # top: "0.01"
                    #     width: "0.9"
                    #     marginTop: "0"
                    #     border:
                    #       style: "1"
                    #     borderWidth: "1"
                    #     borderColor: "0x333333"
                    #   children:
                    #     - type: image
                    #       path=func: =.builtIn.utils.prepareDocToPath
                    #       path: office-building.svg
                    #       dataKey: itemObject.name.data.basicInfo.businessLogo
                    #       style:
                    #         height: "0.08"
                    #         width: "16vw"
                    #         marginTop: "0.02"
                    #         border:
                    #           style: "3"
                    #         borderWidth: "1"
                    #         borderColor: "0xf3f3f3"
                    #         verticalAlign: middle
                    #         display: "inline-block"
                    #         borderRadius: "5"
                    #         textAlign:
                    #           x: center
                    #         # marginTop: "0.01"
                    #     - type: view
                    #       style:
                    #         width: "0.58"
                    #         display: "inline-block"
                    #         height: "0.08"
                    #         marginLeft: "0.03"
                    #         marginTop: "0.02"
                    #       children:
                    #         - type: label
                    #           # text: A&C Urgentcare
                    #           dataKey: itemObject.name.data.basicInfo.medicalFacilityName
                    #           style:
                    #             width: "0.58"
                    #             marginTop: "0.01"
                    #             height: "0.04"
                    #             fontSize: .Nfont.n2
                    #             color: "0x333333"
                    #             fontWeight: "400"
                    #         - type: label
                    #           text: Accepted Insurance
                    #           style:
                    #             fontSize: .Nfont.n2
                    #             width: "0.58"
                    #             marginTop: "0"
                    #             height: "0.03"
                    #             zIndex: "1000"
                    #             color: "0x2988e6"
                    #             fontWeight: "400"
                    #             textDecoration: underline
                    #             textDecorationColor: "0x2988e6"
                    #           onClick:
                    #             - actionType: updateObject
                    #               dataKey: Global.formData.facilityProfileInfo
                    #               dataObject: itemObject
                    #             - goto: AcceptedInsurance
                    #     - type: image
                    #       path: blackRight.svg
                    #       style:
                    #         display: "inline-block"
                    #         height: "0.025"
                    #         marginTop: "0.0475"
                    #         verticalAlign: middle
                    #         marginLeft: "0"
                    #       onClick:
                    #         - actionType: updateObject
                    #           dataKey: Global.formData.temporaryFacilityId
                    #           dataObject: itemObject
                    #         - goto: OrganizationInfo

    - type: view
      style:
        marginTop: "0"
        fontSize: .Nfont.n3
        width: "1"
        height: "0.05"
      children:
        - type: button
          text: "Share Profile"
          style:
            color: "0xffffff"
            backgroundColor: "0x2988e6"
            height: "0.045"
            width: "0.9"
            marginTop: "0.0025"
            border:
              style: "1"
            borderWidth: "1"
            borderColor: ""
            borderRadius: "5"
            left: "0.05"
          onClick:
            # - actionType: evalObject
            #   object:

            - goto: SelectForShare
    - type: popUp
      viewTag: imgBlockBigTag
      style:
        height: "1"
        width: "1"
        zIndex: "1000"
        backgroundColor: "0x33333366"
        top: "0"
        textAlign:
          x: center
          y: center
      children:
        - type: image
          path=func: =.builtIn.utils.prepareDocToPath
          dataKey: formData.cv
          style:
            width: "0.8"
      onClick:
        - actionType: popUpDismiss
          popUpView: imgBlockBigTag
    #  头像上传
    - type: popUp
      viewTag: selectView
      style:
        left: "0"
        width: "1"
        top: "0"
        height: "1"
        zIndex: 110
        backgroundColor: "0xa9a9a990"
      children:
        - type: view
          style:
            top: "0.72"
            width: "0.9"
            height: "0.15"
            left: "0.05"
            border:
              style: "1"
            borderRadius: "20"
            backgroundColor: "0xe9e9e9"
            zIndex: 1000
            overflow: hidden
          children:
            - type: button
              text: Camera
              contentType: file
              style:
                top: "0"
                width: "0.9"
                height: "0.07"
                fontSize: .Nfont.h3
                color: "0x1d88fc"
                backgroundColor: "0xe9e9e9"
                textAlign:
                  x: center
                  y: center
                border:
                  style: "2"
                  width: "0.00001"
                borderColor: "0x00000066"
              onClick:
                - actionType: openCamera
                  dataObject: BLOB
                  dataKey: MyProfile.apiRequest.avatar.document.name.data
                - actionType: evalObject
                  object:
                    - if:
                        - =.builtIn.math.lessthanSize:
                            dataIn:
                              object: =..apiRequest.avatar.document.name.data # object
                              key: 2 #mb
                        - ..formData.flag@: false
                        - actionType: evalObject
                          object:
                            - =.builtIn.utils.getFileSize:
                                dataIn:
                                  object: =..apiRequest.avatar.document.name.data
                                  units: mb
                                dataOut: MyProfile.formData.fileSize
                            - =.builtIn.string.concat:
                                dataIn:
                                  - "Your file size:"
                                  - =..formData.fileSize
                                  - "Mb"
                                dataOut: Global.formData.fileSize
                            - ..formData.flag@: true
                - actionType: builtIn
                  funcName: redraw
                  viewTag: overSize
                - actionType: evalObject
                  object:
                    - if:
                        - =..formData.flag
                        - actionType: popUp
                          popUpView: overSize
                          wait: true
                        - continue
                - actionType: evalObject
                  object:
                    - =..apiRequest.avatar.docAPI.store: ""
                    - .MyProfile.apiRequest.profile.document.name.data.avatar@: =.MyProfile.apiRequest.avatar.resp.doc.id
                - actionType: evalObject
                  object:
                    .Global._nonce@:
                      =.builtIn.math.random: ""
                - actionType: popUpDismiss
                  popUpView: selectView
                - actionType: builtIn
                  funcName: redraw
                  viewTag: avatar

            - type: button
              text: Photo Library
              contentType: file
              style:
                top: "0.08"
                width: "0.9"
                height: "0.07"
                fontSize: .Nfont.h3
                color: "0x1d88fc"
                backgroundColor: "0xe9e9e9"
                textAlign:
                  x: center
                  y: center
                border:
                  style: "1"
              onClick:
                - actionType: openPhotoLibrary
                  dataObject: BLOB
                  dataKey: MyProfile.apiRequest.avatar.document.name.data
                - actionType: evalObject
                  object:
                    - if:
                        - =.builtIn.math.lessthanSize:
                            dataIn:
                              object: =..apiRequest.avatar.document.name.data # object
                              key: 2 #mb
                        - ..formData.flag@: false
                        - actionType: evalObject
                          object:
                            - =.builtIn.utils.getFileSize:
                                dataIn:
                                  object: =..apiRequest.avatar.document.name.data
                                  units: mb
                                dataOut: MyProfile.formData.fileSize
                            - =.builtIn.string.concat:
                                dataIn:
                                  - "Your file size:"
                                  - =..formData.fileSize
                                  - "Mb"
                                dataOut: Global.formData.fileSize
                            - ..formData.flag@: true
                - actionType: builtIn
                  funcName: redraw
                  viewTag: overSize
                - actionType: evalObject
                  object:
                    - if:
                        - =..formData.flag
                        - actionType: popUp
                          popUpView: overSize
                          wait: true
                        - continue
                - actionType: evalObject
                  object:
                    - =..apiRequest.avatar.docAPI.store: ""
                    - .MyProfile.apiRequest.profile.document.name.data.avatar@: =.MyProfile.apiRequest.avatar.resp.doc.id
                - actionType: evalObject
                  object:
                    .Global._nonce@:
                      =.builtIn.math.random: ""
                - actionType: popUpDismiss
                  popUpView: selectView
                - actionType: builtIn
                  funcName: redraw
                  viewTag: avatar

        - type: button
          text: Cancel
          style:
            top: "0.9"
            left: "0.05"
            width: "0.9"
            height: "0.06"
            fontSize: .Nfont.h3
            color: "0x1d88fc"
            backgroundColor: "0xffffff"
            textAlign:
              x: center
            borderRadius: "20"
            border:
              style: 1
          onClick:
            - actionType: popUpDismiss
              popUpView: selectView
    #   cv 上传
    - type: popUp
      viewTag: selectCvUP
      style:
        left: "0"
        width: "1"
        top: "0"
        height: "1"
        zIndex: 110
        backgroundColor: "0xa9a9a990"
      children:
        - type: view
          style:
            top: "0.59"
            width: "0.9"
            height: "0.275"
            left: "0.05"
            border:
              style: "1"
            borderRadius: "10"
            backgroundColor: "0xe9e9e9"
            zIndex: 1000
            overflow: hidden
          children:
            - type: label
              textBoard:
                - text: Medical Records
                  color: "0x00000099"
                - br:
                - text: "Upload an image or document"
                  color: "0x00000066"
              style:
                top: "0.02"
                width: "0.9"
                height: "0.06"
                fontSize: .Nfont.h2
                color: "0x"
                textAlign:
                  x: center
                border:
                  style: "2"
                borderWidth: "1"
                borderColor: "0x00000066"
            - type: button
              text: Camera
              contentType: file
              style:
                top: "0.085"
                width: "0.9"
                height: "0.06"
                fontSize: .Nfont.h3
                color: "0x1d88fc"
                backgroundColor: "0xe9e9e9"
                textAlign:
                  x: center
                border:
                  style: "2"
                borderWidth: "1"
                borderColor: "0x00000066"
              onClick:
                - actionType: openCamera
                  dataObject: BLOB
                  dataKey: MyProfile.apiRequest.cv.docReq.name.data
                - actionType: evalObject
                  object:
                    - if:
                        - =.builtIn.math.lessthanSize:
                            dataIn:
                              object: =..apiRequest.cv.docReq.name.data # obejct
                              key: 2 #mb
                        - ..formData.flag@: false
                        - actionType: evalObject
                          object:
                            - =.builtIn.utils.getFileSize:
                                dataIn:
                                  object: =..apiRequest.cv.docReq.name.data
                                  units: mb
                                dataOut: MyProfile.formData.fileSize
                            - =.builtIn.string.concat:
                                dataIn:
                                  - "Your file size:"
                                  - =..formData.fileSize
                                  - "Mb"
                                dataOut: Global.formData.fileSize
                            - ..formData.flag@: true
                - actionType: builtIn
                  funcName: redraw
                  viewTag: overSize
                - actionType: evalObject
                  object:
                    - if:
                        - =..formData.flag
                        - actionType: popUp
                          popUpView: overSize
                          wait: true
                        - continue
                - actionType: evalObject
                  object:
                    - =..apiRequest.cv.docAPI.store: ""
                    - .MyProfile.apiRequest.profile.document.name.data.cv@: =..apiRequest.cv.docRes.doc.id
                - actionType: evalObject
                  object:
                    .Global._nonce@:
                      =.builtIn.math.random: ""
                - actionType: popUpDismiss
                  popUpView: selectCvUP
                - actionType: builtIn
                  funcName: redraw
                  viewTag: cvTag

            - type: button
              text: Photo Library
              contentType: file
              style:
                top: "0.146"
                width: "0.9"
                height: "0.06"
                fontSize: .Nfont.h3
                color: "0x1d88fc"
                backgroundColor: "0xe9e9e9"
                textAlign:
                  x: center
                border:
                  style: "2"
                borderWidth: "1"
                borderColor: "0x00000066"
              onClick:
                - actionType: openPhotoLibrary
                  dataObject: BLOB
                  dataKey: MyProfile.apiRequest.cv.docReq.name.data
                - actionType: evalObject
                  object:
                    - if:
                        - =.builtIn.math.lessthanSize:
                            dataIn:
                              object: =..apiRequest.cv.docReq.name.data # obejct
                              key: 2 #mb
                        - ..formData.flag@: false
                        - actionType: evalObject
                          object:
                            - =.builtIn.utils.getFileSize:
                                dataIn:
                                  object: =..apiRequest.cv.docReq.name.data
                                  units: mb
                                dataOut: MyProfile.formData.fileSize
                            - =.builtIn.string.concat:
                                dataIn:
                                  - "Your file size:"
                                  - =..formData.fileSize
                                  - "Mb"
                                dataOut: Global.formData.fileSize
                            - ..formData.flag@: true
                - actionType: builtIn
                  funcName: redraw
                  viewTag: overSize
                - actionType: evalObject
                  object:
                    - if:
                        - =..formData.flag
                        - actionType: popUp
                          popUpView: overSize
                          wait: true
                        - continue
                - actionType: evalObject
                  object:
                    - =..apiRequest.cv.docAPI.store: ""
                    - .MyProfile.apiRequest.profile.document.name.data.cv@: =..apiRequest.cv.docRes.doc.id
                - actionType: evalObject
                  object:
                    .Global._nonce@:
                      =.builtIn.math.random: ""
                - actionType: popUpDismiss
                  popUpView: selectCvUP
                - actionType: builtIn
                  funcName: redraw
                  viewTag: cvTag
            - type: button
              text: Files
              contentType: file
              style:
                top: "0.21"
                width: "0.9"
                height: "0.06"
                fontSize: .Nfont.h3
                color: "0x1d88fc"
                backgroundColor: "0xe9e9e9"
                textAlign:
                  x: center
                border:
                  style: 1
              onClick:
                - actionType: openDocumentManager
                  dataObject: BLOB
                  dataKey: MyProfile.apiRequest.cv.docReq.name.data
                - actionType: evalObject
                  object:
                    - if:
                        - =.builtIn.math.lessthanSize:
                            dataIn:
                              object: =..apiRequest.cv.docReq.name.data # obejct
                              key: 2 #mb
                        - ..formData.flag@: false
                        - actionType: evalObject
                          object:
                            - =.builtIn.utils.getFileSize:
                                dataIn:
                                  object: =..apiRequest.cv.docReq.name.data
                                  units: mb
                                dataOut: MyProfile.formData.fileSize
                            - =.builtIn.string.concat:
                                dataIn:
                                  - "Your file size:"
                                  - =..formData.fileSize
                                  - "Mb"
                                dataOut: Global.formData.fileSize
                            - ..formData.flag@: true
                - actionType: builtIn
                  funcName: redraw
                  viewTag: overSize
                - actionType: evalObject
                  object:
                    - if:
                        - =..formData.flag
                        - actionType: popUp
                          popUpView: overSize
                          wait: true
                        - continue
                - actionType: evalObject
                  object:
                    - =..apiRequest.cv.docAPI.store: ""
                    - .MyProfile.apiRequest.profile.document.name.data.cv@: =..apiRequest.cv.docRes.doc.id
                - actionType: evalObject
                  object:
                    .Global._nonce@:
                      =.builtIn.math.random: ""
                - actionType: popUpDismiss
                  popUpView: selectCvUP
                - actionType: builtIn
                  funcName: redraw
                  viewTag: cvTag
        - type: button
          text: Cancel
          style:
            top: "0.9"
            left: "0.05"
            width: "0.9"
            height: "0.06"
            fontSize: .Nfont.h3
            color: "0x007aff"
            backgroundColor: "0xffffff"
            textAlign:
              x: center
            borderRadius: "10"
            border:
              style: 1
          onClick:
            - actionType: popUpDismiss
              popUpView: selectCvUP

    - .simplePopup:
      viewTag: filePopUpView
      children:
        - .simplePopupView:
          style:
            height: "auto"
            overflow: hidden
          children:
            - type: label
              text: Are you sure you want to overwrite the original files?
              dataKey:
              style:
                marginTop: "0.04"
                marginLeft: "0.03"
                width: "0.64"
                height: "auto"
                color: "0x4b4b4b"
                fontSize: .Nfont.h2
                fontFamily: "sans-serif"
                # backgroundColor: "pink"
                textAlign:
                  x: center
            - type: view
              style:
                marginTop: "0.04"
                height: "0.001"
                width: "0.72"
                backgroundColor: "0x8f8f90"
            - type: view
              style:
                height: "0.06"
                width: "0.72"
              children:
                - .simplePopupSplit1:
                  style:
                    top: "0"
                    height: "0.06"
                - .simplePopupLeftButton:
                  text: "NO"
                  style:
                    top: "0.01"
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: filePopUpView
                - .simplePopupRightButton:
                  text: "Yes"
                  style:
                    top: "0.01"
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: filePopUpView

    - .BaseoverSize:
