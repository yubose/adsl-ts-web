SignIn: # xd page number:4
  pageNumber: "30"
  init:
    - =.builtIn.FCM.getAPPID:
        dataIn:
          appName: =.AppName
        dataOut: FirebaseToken.edge.evid
    - if:
        - =.Global.currentUser.vertex.sk #.builtIn.SignInOk
        - actionType: evalObject
          object:
            - actionType: evalObject
              object: ..getFac
            - actionType: evalObject
              object:
                - if:
                    - =.Global.currentUser.vertex.sk
                    - actionType: evalObject
                      object:
                        - =.builtIn.array.getListLength:
                            dataIn:
                              object: =.Global.organizations
                            dataOut: SignIn.formData.facilityNum
                        - =.builtIn.string.retainNumber:
                            dataIn:
                              value: =..formData.facilityNum
                            dataOut: SignIn.formData.facilityNum
                        # 根据何静的要求，如果provider有多个facility，则进入选择facility页面，否则直接进入Dashboard
                        - =.builtIn.utils.setLockScreen:
                            dataIn:
                              names: ["lockTime","lockSelect","lockPageName"]
                              values:
                                - =..apiRequest.logOutDoc.docResp.doc.0.name.data.time
                                - =.Global.autolock
                                - "LockPage"
                        - if:
                          - =.builtIn.math.greater:
                              dataIn:
                                num1: =..formData.facilityNum
                                num2: 2
                          - goto: SwitchFacility
                          - goto: Dashboard
                    - continue
        - if:
          - =.Global.currentUser.vertex.esk
          - goto: LockPage
          - continue
  listData:
    organization:
      vertex: ""
    vertex:
      ObjType: 4
      id: =.Global.currentUser.vertex.id
      xfname: E.bvid|E.evid
      sCondition: E.type=10002 AND E.tage>0 AND E.subtype&0xff0000=0x30000
      type: 20
      obfname: ctime
      _nonce: =.Global._nonce
    get:
      api: rv
      dataOut: listData.organization
      dataIn: listData.vertex
  save:
    - =.builtIn.eccNaCl.decryptAES:
        dataIn:
          key: =..formData.password
          message: =.Global.currentUser.vertex.esk
        dataOut: SignIn.formData.sk
    - if:
        - =.builtIn.eccNaCl.skCheck:
            dataIn:
              pk: =.Global.currentUser.vertex.pk
              sk: =..formData.sk
        - .Global.currentUser.vertex.sk@: =..formData.sk
        - actionType: popUp
          popUpView: WrongInformation
          wait: true
  verify:
    - actionType: evalObject
      object:
        - =.builtIn.eccNaCl.decryptAES:
            dataIn:
              key: =..formData.password
              message: =..loginNewDevice.response.edge.deat.esk
            dataOut: SignIn.formData.sk
        - =.builtIn.eccNaCl.skCheck:
            dataIn:
              pk: =..loginNewDevice.response.edge.deat.pk
              sk: =..formData.sk
            dataOut: SignIn.formData.pass
        - if:
            - =..formData.pass
            - .Global.currentUser.vertex.sk@: =..formData.sk
            - actionType: evalObject
              object:
                - ..formData.wrongPassword@: true
                - actionType: popUp
                  popUpView: wrongPassword
                  wait: true
  check:
    - =.SignIn.loginNewDevice.edgeAPI.store: ""
    - actionType: evalObject
      object:
        .Global._nonce@:
          =.builtIn.math.random: ""
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =..loginNewDevice.response.code
              string2: 0
        - continue
        - actionType: popUp
          popUpView: wrongCode
          wait: true
  update:
    - =.builtIn.date.currentDateTime:
        dataOut: Global.currentDateTime
    - =.SignIn.retrieveVertex.vertexAPI.get: ""
    # prepare data for the future 1031 jwt exchange, and save the vertex contains JWT
    - .Global.sigVertexResp@: =.SignIn.retrieveVertex.response.vertex.0
    - ..myLoginTime@: =.Global.currentDateTime
    - =.builtIn.string.concat:
        dataIn:
          - =.SignIn.loginUser2.edge.bvid
          - " "
          - =..myLoginTime
        dataOut: SignIn.loginMessage
    - =.builtIn.storeCredentials:
        dataIn:
          sk: =.Global.currentUser.vertex.sk
    - =.builtIn.eccNaCl.signature:
        dataIn:
          message: =..loginMessage
          sk: =.Global.currentUser.vertex.sk
          eskSign: =..retrieveVertex.response.vertex.0.name.eskSign
        dataOut: SignIn.loginUser2.edge.name.sig
    - .SignIn.loginUser2.edge.name.ctime@: =..myLoginTime
    - =.SignIn.loginUser2.edgeAPI.store: ""
    - actionType: evalObject
      object:
        .Global._nonce@:
          =.builtIn.math.random: ""
    - =.SignIn.retrieveVertex.vertexAPI.get: ""
    - .Global.currentUser.vertex@: =..retrieveVertex.response.vertex.0
    - .Global.currentUser.JWT@: =..loginUser2.response.jwt
    - .Global.phoneNumber@: =..formData.phoneNumber
    - =.builtIn.storeCredentials:
        dataIn:
          sk: =.Global.currentUser.vertex.sk
          pk: =.Global.currentUser.vertex.pk
          userId: =.Global.currentUser.vertex.id
          esk: =.Global.currentUser.vertex.esk
    - .Global.currentUser.dataCache.loadingDateTime@: =.Global.currentDateTime
    - .Global.rootNotebookID@: =.Global.currentUser.vertex.deat.rnb64ID
    - .Global.currentUser.dataCache.loadingDateTime@: =.Global.currentDateTime
  getFac:
    - actionType: evalObject
      object:
        - ..listData.vertex.id@: =.Global.currentUser.vertex.id
        - =..listData.get: ""

        - ..apiRequest.profile.doc.id@: =.Global.rootNotebookID
        - ..apiRequest.currentFacilityDoc.docReq.id@: =..listData.organization.vertex.0.id
        
        - actionType: evalObject
          object:
            - actionType: evalObject
              async: true
              object:
                - =..apiRequest.currentFacilityDoc.docAPI.get: ""
                - =..apiRequest.logOutDoc.docAPI.get: ""
                - =..apiRequest.profile.docAPI.get: ""
        # fac
        - .Global.organizations@: =..listData.organization.vertex
        - if:
            - =..listData.organization.vertex.0.id
            - actionType: evalObject
              object:
                - .Global.dashboardName@: =..listData.organization.vertex.0.name.basicInfo.medicalFacilityName
                - .Global.currentFacility@: =..listData.organization.vertex.0
                - .Global.organizations.0.isSelected@: true
                - .Global.currentFacilityDoc@: =..apiRequest.currentFacilityDoc.docResp.doc.0
            - actionType: evalObject
              object:
                - .Global.dashboardName@: ""
                - .Global.currentFacility@: []
        # logout doc
        - if:
          - =.builtIn.array.judgeListLength:
              dataIn:
                array: =..apiRequest.logOutDoc.docResp.doc
                len: 0
          - .Global.autolock@: false
          - .Global.autolock@: =..apiRequest.logOutDoc.docResp.doc.0.name.data.autolock
        # profile
        - if:
            - =..apiRequest.profile.docResponse.doc.0.id
            - .Global.nonFirstProfile@: true
            - .Global.nonFirstProfile@: false
  formData:
    # provider对应facility的数目
    facilityNum: ""
    checkOk: false
    checkMessage: "no message"
    countryCode: "+1"
    phoneNumber: ""
    password: ""
    code: ""
    sk: ""
    pass: ""
    wrongPassword: false
  retrieveVertex:
    response: ""
    vertex:
      id: =..loginNewDevice.response.edge.deat.user_id
      _nonce: =.Global._nonce
    vertexAPI:
      get:
        api: rv
        dataIn: SignIn.retrieveVertex.vertex
        dataOut: SignIn.retrieveVertex.response
  getVertex:
    response: ""
    vertex:
      xfname: none
      type: 1
      sCondition: =..rvCondition
      _nonce: =.Global._nonce
    vertexAPI:
      get:
        api: rv
        dataIn: SignIn.getVertex.vertex
        dataOut: SignIn.getVertex.response
  verificationCode:
    response: ""
    edge:
      .Edge: ""
      type: 1010
      _nonce: =.Global._nonce
      evid: =.FirebaseToken.edge.evid
      name:
        phone_number: =..apiData.phoneNumber
    edgeAPI:
      .EdgeAPI: ""
      store:
        api: ce
        dataIn: SignIn.verificationCode.edge
        dataOut: SignIn.verificationCode.response
  loginNewDevice:
    response: ""
    edge:
      .Edge: ""
      type: 1040
      _nonce: =.Global._nonce
      name:
        phone_number: =..apiData.phoneNumber
        verification_code: =..formData.code
    edgeAPI:
      .EdgeAPI: ""
      store:
        api: ce
        dataIn: SignIn.loginNewDevice.edge
        dataOut: SignIn.loginNewDevice.response
  loginMessage: ""
  myLoginTime: ""
  loginUser2:
    response: ""
    edge:
      .Edge: ""
      type: 1031
      name:
        ctime: ""
        sig: ""
      _nonce: =.Global._nonce
      bvid: =..loginNewDevice.response.edge.deat.user_id
      evid: =.FirebaseToken.edge.evid
    edgeAPI:
      .EdgeAPI: ""
      store:
        api: ce
        dataIn: SignIn.loginUser2.edge
        dataOut: SignIn.loginUser2.response
  apiData:
    phoneNumber: ""

  rvCondition: ""
  userNameRv: ""

  initFocus: phoneNumberVT
  tt:
    - actionType: popUp
      popUpView: WrongPhoneNum
      wait: true
  apiRequest:
    logOutDoc:
      documentResp: ""
      document: 
        type: .DocType.autoLogOut
        eid: =.Global.rootNotebookID
        subtype:
          mediaType: "application/json"
        name:
          data:
            autolock: false
            time: "20min"
      docReq:
        id: =.Global.rootNotebookID
        type: .DocType.autoLogOut
        xfname: eid
        _nonce: =.Global._nonce
      docResp: ""
      docAPI:
        store:
          api: cd
          dataIn: SignIn.apiRequest.logOutDoc.document
          dataOut: SignIn.apiRequest.logOutDoc.documentResp
        get:
          api: rd
          dataIn: SignIn.apiRequest.logOutDoc.docReq
          dataOut: SignIn.apiRequest.logOutDoc.docResp
    # rd currentFacilityDoc
    currentFacilityDoc:
      docResp: ""
      docReq:
        id: ""
        obfname: "ctime"
        maxcount: "1"
        xfname: ovid
        type: .DocType.FacilityProfile
        _nonce: =.Global._nonce
      docAPI:
        get:
          api: rd
          dataIn: SignIn.apiRequest.currentFacilityDoc.docReq
          dataOut: SignIn.apiRequest.currentFacilityDoc.docResp

    profile:
      docResponse: ""
      doc:
        id: ""
        xfname: eid
        type: .DocType.DoctorProfile
        maxcount: "1000"
        _nonce: =.Global._nonce
      docAPI:
        get:
          .DocAPI.get: ""
          api: rd
          dataOut: apiRequest.profile.docResponse
          dataIn: apiRequest.profile.doc
  changeColor:
    phone:
      color: "0xffffff"
      backgroundColor: "0x2988e6"
      borderColor: "0xF4F4F5"
    userName:
      color: "0x4B4B4B"
      borderColor: "0xF4F4F5"
      backgroundColor: "0xE9F2FC"
    password:
      borderColor: "0xF4F4F5"
  baseColor:
    blueBgColor: "0x2988e6"
    otherBgColor: "0xE9F2FC"
    blueColor: "0xffffff"
    otherColor: "0x4B4B4B"
  basePhoneWeight: "600"
  baseUserWeight: "400"
  sigInColor: "0xC1C1C1"

  components:
    # - .BaseCheckView: ""
    #   message: "Invalid Username: Required length should be 6 to 16"
    #   viewTag: invaliduserid
    #   colorChange: "0xd81e06"
    #   imgPath: delete.svg
    #   children:
    #     - type: view
    #       style:
    #         width: "0.8"
    #         height: "0.3"
    #         top: "0.3"
    #         left: "0.1"
    #         zIndex: "100"
    #         backgroundColor: "0xffffff"
    #         borderRadius: "7"
    #         border:
    #           style: "3"
    #         borderColor: '#f4f8fa'
    #         borderWidth: "3"
    #       children:
    #         - .BaseCheckViewImg:
    #         - .BaseCheckViewLabel:
    #         - .BaseCheckViewButton:
    #           onClick:
    #             - actionType: popUpDismiss
    #               popUpView: ____.viewTag
    - type: view
      style:
        left: "0"
        top: "0"
        width: "1"
        height: "1"
        overflow: hidden
      children:
        - type: image
          path: back.png
          style:
            left: "0"
            width: "1"
            top: "0"
        - type: view
          style:
            left: "0"
            width: "1"
            # height: "0.32"
            textAlign:
              x: center
          children:
            - type: image
              path: aitmedLogo.svg
              style:
                marginTop: "0.08"
                width: "0.3"
            - type: label
              text: PROVIDER
              style:
                left: "0"
                width: "1"
                color: "0xFFFFFF"
                fontSize: .Nfont.h7
                fontStyle: bold
                textShadow: "0 2px #0000001a"
                letterSpacing: "0.1em"
                textIndent: "0.2em"

                textAlign:
                  x: center
        - type: view
          style:
            width: "1"
            marginTop: "0.028"
            backgroundColor: "0xffffff"
            border:
              style: "3"
            borderColor: "0xffffff"
            borderRadius: "40px 40px 0 0"
            height: "1"

            boxSizing: "border-box"
          children:
            - type: label
              text: Welcome back!
              style:
                color: "0x033333"
                marginLeft: "0.09"
                marginTop: "0.04" #32.48px
                width: "0.72"
                fontSize: .Nfont.h4

                fontStyle: bold
                textAlign:
                  x: left
                  y: center
            - type: label
              text: Sign in to continue
              style:
                color: "0x999999"
                left: "0.1"
                width: "0.72"
                marginTop: "0.0025" #2px
                fontSize: ".Nfont.h14"
                fontWeight: "500"
            - type: view
              viewTag: userOrPhone
              style:
                marginTop: "0.0221" #17.95px
                borderRadius: "20"
                width: "auto"
                marginLeft: "0.1"
              children:
                - type: view
                  style:
                    display: inline-block
                    backgroundColor: "0xE9F2FC"
                    borderRadius: "40px 0 0 40px"
                  children:
                    - type: label
                      text: "Phone"
                      style:
                        paddingLeft: "0.04"
                        paddingRight: "0.04"
                        paddingTop: "0.009"
                        paddingBottom: "0.009"
                        fontWeight: ..basePhoneWeight
                        color: ..changeColor.phone.color
                        fontSize: .Nfont.h14
                        backgroundColor: ..changeColor.phone.backgroundColor
                        borderRadius: "40px"
                      onClick:
                        - actionType: builtIn
                          funcName: show
                          viewTag: usePhoneNumber
                        - actionType: builtIn
                          funcName: hide
                          viewTag: useUserName
                        - actionType: evalObject
                          object:
                            - ..apiData.phoneNumber@: ""
                            - ..formData.phoneNumber@: ""
                            - ..formData.password@: ""
                            - ..userNameRv@: ""
                            - ..formData.checkOk@: false
                            - ..sigInColor@: "0xC1C1C1"
                        - actionType: evalObject
                          object:
                            - ..changeColor.phone.backgroundColor@: =..baseColor.blueBgColor
                            - ..changeColor.phone.color@: =..baseColor.blueColor
                            - ..changeColor.userName.backgroundColor@: =..baseColor.otherBgColor
                            - ..changeColor.userName.color@: =..baseColor.otherColor
                            - ..baseUserWeight@: "400"
                            - ..basePhoneWeight@: "600"
                            - ..changeColor.userName.borderColor@: "0xF4F4F5"
                            - ..changeColor.phone.borderColor@: "0xF4F4F5"
                            - ..changeColor.password.borderColor@: "0xF4F4F5"
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: userOrPhone
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: phoneNumberVT
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: passwordVT
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: SignInVT
                - type: view
                  style:
                    display: inline-block
                    backgroundColor: "0xE9F2FC"
                    borderRadius: "0 40px 40px 0"
                  children:
                    - type: label
                      text: "User Name"
                      style:
                        paddingLeft: "0.04"
                        paddingRight: "0.04"
                        paddingTop: "0.009"
                        paddingBottom: "0.009"
                        fontWeight: ..baseUserWeight
                        backgroundColor: ..changeColor.userName.backgroundColor
                        fontSize: .Nfont.h14
                        color: ..changeColor.userName.color
                        borderRadius: "40px"
                      onClick:
                        - actionType: builtIn
                          funcName: hide
                          viewTag: usePhoneNumber
                        - actionType: builtIn
                          funcName: show
                          viewTag: useUserName
                        - actionType: evalObject
                          object:
                            - ..apiData.phoneNumber@: ""
                            - ..formData.phoneNumber@: "8888888888"
                            - ..formData.checkOk@: true
                            - ..formData.password@: ""
                            - ..sigInColor@: "0xC1C1C1"
                            #- ..rvCondition@: ""
                        - actionType: evalObject
                          object:
                            - ..baseUserWeight@: "600"
                            - ..basePhoneWeight@: "400"
                            - ..changeColor.userName.backgroundColor@: =..baseColor.blueBgColor
                            - ..changeColor.userName.color@: =..baseColor.blueColor
                            - ..changeColor.phone.backgroundColor@: =..baseColor.otherBgColor
                            - ..changeColor.phone.color@: =..baseColor.otherColor
                            - ..changeColor.userName.borderColor@: "0xF4F4F5"
                            - ..changeColor.phone.borderColor@: "0xF4F4F5"
                            - ..changeColor.password.borderColor@: "0xF4F4F5"
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: userOrPhone
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: phoneNumberVT
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: userNameVT
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: passwordVT
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: SignInVT
            - type: view
              style:
                height: "auto"
                marginTop: "0.0296" #24.04px
              children:
                # user name input area
                - type: view
                  viewTag: useUserName
                  style:
                    left: "0.1"
                    width: "0.8"
                    # height: "0.09"
                    display: none
                    isHidden: true
                  children:
                    - type: label
                      textBoard:
                        - text: "UserName"
                        - text: "&nbsp;*"
                          color: "0xFB5051"
                      style:
                        color: "0x333333"
                        fontWeight: "500"
                        fontSize: ".Nfont.h14"
                    - type: textField
                      viewTag: userNameVT
                      placeholder: "Enter here"
                      dataKey: apiData.phoneNumber
                      onChange:
                        - emit:
                            actions:
                              - =.builtIn.string.concat:
                                  dataIn:
                                    - "uid like '"
                                    - =.SignIn.apiData.phoneNumber
                                    - "%'"
                                  dataOut: SignIn.userNameRv
                        - actionType: evalObject
                          object:
                            - ..changeColor.userName.borderColor@: "0xF4F4F5"
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: userNameVT
                      onInput:
                        - actionType: evalObject
                          object:
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..apiData.phoneNumber
                                      string2: ""
                                - ..sigInColor@: "0xC1C1C1"

                                - actionType: evalObject
                                  object:
                                    - if:
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: =..formData.password
                                              string2: ""
                                        - ..sigInColor@: "0xC1C1C1"
                                        - ..sigInColor@: "0x2988e6ff"
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: SignInVT
                      style:
                        textAlign:
                          x: left
                        fontSize: .Nfont.h1
                        borderRadius: "4"
                        width: "0.8"
                        marginTop: "0.005"
                        borderColor: ..changeColor.userName.borderColor
                        textIndent: "1em"
                        height: "0.049"
                        borderWidth: "1"
                        box-sizing: "border-box"
                        backgroundColor: "0xF4F4F5"
                        border:
                          style: "3"
                # This phone number input area
                - type: view
                  viewTag: usePhoneNumber
                  style:
                    marginLeft: "0.1"

                    width: "0.8"
                    isHidden: false
                  children:
                    - type: view
                      style:
                        display: "inline-block"
                      children:
                        - type: label
                          textBoard:
                            - text: Country
                            - text: "&nbsp;*"
                              color: "0xFB5051"
                          style:
                            color: "0x333333"
                            fontWeight: "500"

                            fontSize: ".Nfont.h14"
                        - type: select
                          contentType: countryCode
                          placeholder: ..formData.countryCode
                          dataKey: formData.countryCode # formData.countryCode : inputValue
                          options: .SelectINformationDM.CountryCode
                          required: "true"
                          onChange:
                            - actionType: evalObject
                              object:
                                - =.builtIn.string.concat:
                                    dataIn:
                                      - =.SignIn.formData.countryCode
                                      - " "
                                      - =.SignIn.formData.phoneNumber
                                    dataOut: SignIn.apiData.phoneNumber
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..formData.countryCode
                                          string2: "+965" # Kuwait
                                    - ..formData.checkOk@: true
                                    - =.builtIn.string.phoneVerification:
                                        dataIn:
                                          phoneNumber: =..formData.phoneNumber
                                          countryCode: =..formData.countryCode
                                        dataOut: SignIn.formData.checkOk
                                - =.builtIn.string.concat:
                                    dataIn:
                                      - "uid like '%"
                                      - =.SignIn.formData.countryCode
                                      - " "
                                      - =.SignIn.formData.phoneNumber
                                      - "'"
                                    dataOut: SignIn.rvCondition
                            - actionType: evalObject
                              object:
                                - if:
                                    - =..formData.checkOk
                                    - actionType: evalObject
                                      object:
                                        - if:
                                            - =.builtIn.string.equal:
                                                dataIn:
                                                  string1: =..formData.password
                                                  string2: ""
                                            - ..sigInColor@: "0xC1C1C1"
                                            - ..sigInColor@: "0x2988e6ff"
                                    - ..sigInColor@: "0xC1C1C1"
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: SignInVT
                          style:
                            width: "0.2"
                            marginTop: "0.005"
                            height: "0.049"
                            backgroundColor: "0xF4F4F5"
                            fontSize: .Nfont.h1
                            boxSizing: "border-box"
                            borderWidth: "1"
                            color: "0x000000"
                            borderRadius: "4"
                            textIndent: "1em"
                            box-sizing: "border-box"
                            border:
                              style: "1"
                    - type: view
                      style:
                        display: "inline-block"
                        marginLeft: "0.045"
                        # height: "0.09"
                      children:
                        - type: label
                          textBoard:
                            - text: Phone
                            - text: "&nbsp;*"
                              color: "0xFB5051"
                          style:
                            color: "0x333333"
                            fontWeight: "500"

                            fontSize: ".Nfont.h14"
                        - type: textField # take users' input
                          viewTag: phoneNumberVT
                          debounce: 200
                          contentType: phoneNumber
                          placeholder: "Enter here"
                          dataKey: formData.phoneNumber # users' input will be saved to this key
                          required: "true"
                          # when un-focus from the textField, dataKey object should be updated by the input data and use contentType to check the validation of the input.
                          onInput:
                            - actionType: evalObject
                              object:
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..formData.countryCode
                                          string2: "+965" # Kuwait
                                    - ..formData.checkOk@: true
                                    - =.builtIn.string.phoneVerification:
                                        dataIn:
                                          phoneNumber: =..formData.phoneNumber
                                          countryCode: =..formData.countryCode
                                        dataOut: SignIn.formData.checkOk
                            - actionType: evalObject
                              object:
                                - if:
                                    - =..formData.checkOk
                                    - actionType: evalObject
                                      object:
                                        - if:
                                            - =.builtIn.string.equal:
                                                dataIn:
                                                  string1: =..formData.password
                                                  string2: ""
                                            - ..sigInColor@: "0xC1C1C1"
                                            - ..sigInColor@: "0x2988e6ff"
                                    - ..sigInColor@: "0xC1C1C1"
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: SignInVT
                          onChange:
                            - emit:
                                actions:
                                  - actionType: evalObject
                                    object:
                                      - if:
                                          - =.builtIn.string.equal:
                                              dataIn:
                                                string1: =..formData.countryCode
                                                string2: "+965" # Kuwait
                                          - ..formData.checkOk@: true
                                          - =.builtIn.string.phoneVerification:
                                              dataIn:
                                                phoneNumber: =..formData.phoneNumber
                                                countryCode: =..formData.countryCode
                                              dataOut: SignIn.formData.checkOk
                                      - if:
                                          - =..formData.checkOk
                                          - continue
                                          - ..formData.checkMessage@: "Unacceptible phone number format example: 888-999-0000"
                                  - =.builtIn.string.concat:
                                      dataIn:
                                        - =.SignIn.formData.countryCode
                                        - " "
                                        - =.SignIn.formData.phoneNumber
                                      dataOut: SignIn.apiData.phoneNumber
                                  - =.builtIn.string.concat:
                                      dataIn:
                                        - "uid like '%"
                                        - =.SignIn.formData.countryCode
                                        - " "
                                        - =.SignIn.formData.phoneNumber
                                        - "'"
                                      dataOut: SignIn.rvCondition
                                  - ..formData.wrongPassword@: false
                                  - ..changeColor.phone.borderColor@: "0xF4F4F5"
                            - actionType: builtIn
                              funcName: redraw
                              viewTag:
                                phoneNumberVT
                                # - if:
                                #   - =..formData.checkOk
                                #   - ..formData.checkMessage@: "true"
                                #   - ..formData.checkMessage@: "false"
                          style:
                            textAlign:
                              x: left
                            fontSize: .Nfont.h1
                            left: "0"
                            width: "0.555"
                            height: "0.049"
                            marginTop: "0.005"
                            required: "true"

                            borderColor: ..changeColor.phone.borderColor
                            borderRadius: "4"
                            borderWidth: "1"
                            backgroundColor: "0xF4F4F5"
                            border:
                              style: "3"
                            box-sizing: "border-box"
                            textIndent: "1em"
                # - type: label
                #   text: UserName SignIn
                #   style:
                #     left: "0.52"
                #     width: "0.25"
                #     height: "0.046"
                #     #marginTop: "0.05"
                #     color: "0xffffff"
                #     backgroundColor: "0x388eccff"
                #     fontSize: .Nfont.h12
                #     border:
                #       style: "3"
                #       color: "0xffffff"
                #     borderWidth: "1.5"
                #     borderRadius: "5"
                #     textAlign:
                #       x: center
                #       y: center
                #   onClick:
                #     - actionType: evalObject
                #       object:
                #         - ..apiData.phoneNumber@: ""
                #         - ..formData.phoneNumber@: "8888888888"
                #         #- ..rvCondition@: ""
                #     - actionType: builtIn
                #       funcName: hide
                #       viewTag: usePhoneNumber
                #     - actionType: builtIn
                #       funcName: show
                #       viewTag: useUserName
                #     - actionType: builtIn
                #       funcName: redraw
                #       viewTag: useUserName
            - type: label
              textBoard:
                - text: Password
                - text: "&nbsp;*"
                  color: "0xFB5051"
              style:
                left: "0.1"
                marginTop: "0.02"
                color: "0x333333"
                fontWeight: "500"

                fontSize: ".Nfont.h14"
                width: "auto"
                textAlign:
                  x: left
                  y: center
            # - type: button  #没有输入Passwrd
            #   onClick:
            #     - actionType: popUp
            #       popUpView: NoPassword
            #   style:
            #     left: "0.35"
            #     top: "0.275"
            #     width: "0.1"
            #     height: "0.041"
            #     backgroundColor: "0x2988e6ff"
            # - type: button  #Password输入错误
            #   onClick:
            #     - actionType: popUp
            #       popUpView: WrongPassword
            #   style:
            #     left: "0.47"
            #     top: "0.275"
            #     width: "0.1"
            #     height: "0.041"
            #     backgroundColor: "0x2988e6ff"
            - type: view
              viewTag: "passwordVT"
              style:
                backgroundColor: "0xF4F4F5"
                width: "0.8"
                borderColor: ..changeColor.password.borderColor
                borderWidth: "1"
                marginLeft: "0.1"
                boxSizing: "border-box"
                borderRadius: "4"
                marginTop: "0.005"
                border:
                  style: "3"
              children:
                - type: textField
                  contentType: password
                  placeholder: "Enter here"
                  dataKey: formData.password
                  required: "true"
                  style:
                    textAlign:
                      x: left
                    fontSize: .Nfont.h1
                    borderRadius: "4"
                    width: "0.8"
                    height: "0.049"
                    textIndent: "1em"
                    boxSizing: "border-box"

                    borderWidth: "1"
                    backgroundColor: "0xF4F4F5"
                    border:
                      style: "1"
                  onChange:
                    - actionType: evalObject
                      object:
                        - ..changeColor.password.borderColor@: "0xF4F4F5"
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: passwordVT
                  onInput:
                    - actionType: evalObject
                      object:
                        - if:
                            - =..formData.checkOk
                            - actionType: evalObject
                              object:
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..formData.password
                                          string2: ""
                                    - ..sigInColor@: "0xC1C1C1"
                                    - ..sigInColor@: "0x2988e6ff"
                            - ..sigInColor@: "0xC1C1C1"
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: SignInVT
            # - type: button  #账号密码错误
            #   onClick:
            #     - actionType: popUp
            #       popUpView: WrongInformation
            #   style:
            #     left: "0.121"
            #     top: "0.37"
            #     width: "0.1"
            #     height: "0.041"
            #     backgroundColor: "0x2988e6ff"
            - type: view
              style:
                width: "0.9"
                textAlign:
                  x: right
                  y: center
              children:
                - type: view
                  children:
                    - type: label
                      text: Forgot password?
                      onClick:
                        - actionType: popUp
                          popUpView: resetUser
                      style:
                        color: "0x00000058"
                        fontSize: .Nfont.n3
                        marginTop: "0.015"
    - type: view
      style:
        top: "0.8"
      children:
        - type: button
          viewTag: SignInVT
          text: Sign In
          style:
            color: "0xffffffff"
            fontSize: ".Nfont.h18"
            fontStyle: bold
            marginLeft: "0.1"

            width: "0.8"
            marginTop: "0.045"
            borderRadius: "8"
            height: "0.05"
            backgroundColor: ..sigInColor #0x2988e6ff
            border:
              style: "1"
            display: inline
            textAlign:
              x: center
          onClick:
            - actionType: evalObject
              object:
                # if provider don't input the phone number , pop up to warn provider
                - if:
                    - =..formData.phoneNumber
                    - continue
                    - actionType: popUp
                      popUpView: NoPhoneNum
                      wait: true
                # judge phoneNumber is valid or not
                - if:
                    - =.builtIn.string.equal:
                        dataIn:
                          string1: =..formData.countryCode
                          string2: "+965" # Kuwait
                    - continue
                    - actionType: evalObject
                      object:
                        - if:
                            - =.builtIn.string.phoneVerification:
                                dataIn:
                                  phoneNumber: =..formData.phoneNumber
                                  countryCode: =..formData.countryCode
                            - continue
                            - actionType: popUp
                              popUpView: WrongPhoneNum
                              wait: true
                # judge provider is input the password or not
                - if:
                    - =..formData.password
                    - continue
                    - actionType: popUp
                      popUpView: NoPassword
                      wait: true
                - if:
                    - =.Global.currentUser.vertex.esk
                    - actionType: evalObject
                      object: ..save
                    - continue
                # if account and password is valid, allow provider to login in
                - if:
                    - =.Global.currentUser.vertex.sk
                    - goto: Dashboard
                    - continue
                - if:
                    # formData.wrongPassword is false default
                    - =..formData.wrongPassword
                    - actionType: evalObject
                      object:
                        - =.builtIn.eccNaCl.decryptAES:
                            dataIn:
                              key: =..formData.password
                              message: =..loginNewDevice.response.edge.deat.esk
                            dataOut: SignIn.formData.sk
                        - =.builtIn.eccNaCl.skCheck:
                            dataIn:
                              pk: =..loginNewDevice.response.edge.deat.pk
                              sk: =..formData.sk
                            dataOut: SignIn.formData.pass
                        - if:
                            - =..formData.pass
                            - .Global.currentUser.vertex.sk@: =..formData.sk
                            - actionType: evalObject
                              object:
                                - ..formData.wrongPassword@: true
                                - actionType: popUp
                                  popUpView: wrongPassword
                                  wait: true
                        - =.builtIn.date.currentDateTime:
                            dataOut: Global.currentDateTime
                        - =.SignIn.retrieveVertex.vertexAPI.get: ""
                        - ..myLoginTime@: =.Global.currentDateTime
                        - =.builtIn.string.concat:
                            dataIn:
                              - =.SignIn.loginUser2.edge.bvid
                              - " "
                              - =..myLoginTime
                            dataOut: SignIn.loginMessage
                        - =.builtIn.storeCredentials:
                            dataIn:
                              sk: =.Global.currentUser.vertex.sk
                        - =.builtIn.eccNaCl.signature:
                            dataIn:
                              message: =..loginMessage
                              sk: =.Global.currentUser.vertex.sk
                              eskSign: =..retrieveVertex.response.vertex.0.name.eskSign
                            dataOut: SignIn.loginUser2.edge.name.sig
                        - .SignIn.loginUser2.edge.name.ctime@: =..myLoginTime
                        - =.SignIn.loginUser2.edgeAPI.store: ""
                        - actionType: evalObject
                          object:
                            .Global._nonce@:
                              =.builtIn.math.random: ""
                        - =.SignIn.retrieveVertex.vertexAPI.get: ""
                        - .Global.currentUser.vertex@: =..retrieveVertex.response.vertex.0
                        - .Global.currentUser.JWT@: =..loginUser2.response.jwt
                        - .Global.phoneNumber@: =..formData.phoneNumber
                        - =.builtIn.storeCredentials:
                            dataIn:
                              sk: =.Global.currentUser.vertex.sk
                              pk: =.Global.currentUser.vertex.pk
                              userId: =.Global.currentUser.vertex.id
                              esk: =.Global.currentUser.vertex.esk
                        - .Global.currentUser.dataCache.loadingDateTime@: =.Global.currentDateTime
                        - .Global.rootNotebookID@: =.Global.currentUser.vertex.deat.rnb64ID
                        - .Global.currentUser.dataCache.loadingDateTime@: =.Global.currentDateTime
                        - ..listData.vertex.id@: =.Global.currentUser.vertex.id
                        - =..listData.get: ""
                        - .Global.organizations@: =..listData.organization.vertex
                        - if:
                            - =..listData.organization.vertex.0.id
                            - actionType: evalObject
                              object:
                                - .Global.dashboardName@: =..listData.organization.vertex.0.name.basicInfo.medicalFacilityName
                                - .Global.currentFacility@: =..listData.organization.vertex.0
                                - .Global.organizations.0.isSelected@: true
                            - actionType: evalObject
                              object:
                                - .Global.dashboardName@: ""
                                - .Global.currentFacility@: []
                        # - .Global.nonFirstProfile@: true
                        - ..apiRequest.profile.doc.id@: =.Global.rootNotebookID
                        - =..apiRequest.profile.docAPI.get: ""
                        - if:
                            - =..apiRequest.profile.docResponse.doc.0.id
                            - .Global.nonFirstProfile@: true
                            - .Global.nonFirstProfile@: false
                        - if:
                            - =.Global.currentUser.vertex.sk
                            - actionType: evalObject
                              object:
                                - ..formData.wrongPassword@: false
                                - goto: Dashboard
                            - continue
                    - =.SignIn.verificationCode.edgeAPI.store: ""
            - actionType: evalObject
              object:
                - if:
                    - =.builtIn.string.equal:
                        dataIn:
                          string1: =..verificationCode.response.code
                          string2: 1052
                    - actionType: popUp
                      popUpView: invaliduserid
                      wait: true
                    - continue
                - if:
                    - =.builtIn.string.equal:
                        dataIn:
                          string1: =..verificationCode.response.code
                          string2: 3004
                    - actionType: popUp
                      popUpView: userCannotfind
                      wait: true
                    - continue
            - actionType: evalObject
              object:
                .Global._nonce@:
                  =.builtIn.math.random: ""
            - =.builtIn.string.concat:
                dataIn:
                  - "uid like '%"
                  - =.SignIn.formData.countryCode
                  - " "
                  - =.SignIn.formData.phoneNumber
                  - "'"
                dataOut: SignIn.rvCondition
            - actionType: evalObject
              object:
                - ..getVertex.response.vertex@: []
                - if:
                    - =..userNameRv
                    - ..rvCondition@: =..userNameRv
                    - continue
                - =..getVertex.vertexAPI.get: ""
                - if:
                    - =..getVertex.response.vertex.0.id
                    - actionType: evalObject
                      object:
                        - if:
                            - =..getVertex.response.vertex.0.pk
                            - continue
                            - actionType: popUp
                              popUpView: inviteUser
                              wait: true
                    - actionType: popUp
                      popUpView: userCannotfind
                      wait: true
                # - if:
                #   - =.builtIn.string.equalsLenString:
                #       dataIn:
                #         stringOne: =..formData.phoneNumber
                #         stringTwo: "888"
                #         len: 3
                #   - ..formData.code@: =.SignIn.verificationCode.response.edge.deat.verification_code
                #   - ..formData.code@: ""
                - if:
                    - =.builtIn.string.equal:
                        dataIn:
                          string1: =..verificationCode.response.edge.tage
                          string2: "0"
                    - ..formData.code@: ""
                    - ..formData.code@: =.SignIn.verificationCode.response.edge.tage # - continue
            - actionType: evalObject
              object:
                .Global._nonce@:
                  =.builtIn.math.random: ""
            - actionType: builtIn
              funcName: redraw
              viewTag: inputVerificationCode
            - actionType: popUp
              popUpView: inputVerificationCode
              wait: true
        - type: view
          style:
            marginTop: "0.0375"
            width: "0.98"
            textAlign:
              x: center
          children:
            - type: view
              style:
                height: auto
                width: auto
              children:
                - type: label
                  text: New to AiTmed?
                  style:
                    color: "0xb1b1b1"
                    fontSize: .Nfont.h1

                    display: inline-block
                    # backgroundColor: "0xcdcdcd"
                - type: label
                  text: Sign Up
                  style:
                    color: "0x2988E6"
                    fontSize: .Nfont.h1

                    fontWeight: "400"
                    marginLeft: "0.02"
                    display: inline-block
                    border:
                      style: "1"
                  onClick:
                    - goto: SignUp
    - type: popUp
      viewTag: inviteUser
      style:
        top: "0"
        left: "0"
        width: "1"
        height: "1"
        backgroundColor: "0x00000066"
        zIndex: "50"
        textAlign:
          y: center
      children:
        - type: view
          style:
            width: "0.7"
            marginLeft: "0.15"
            backgroundColor: "0xE6E6E6"
            borderRadius: "14px"
            textAlign:
              x: center
          children:
            - type: label
              text: "This phone number has been invited, but not registered yet"
              style:
                width: "0.576"
                marginLeft: "0.062"
                marginTop: "0.018"
                fontSize: .Nfont.n2

                textAlign:
                  x: center
                color: "0x333333"
            - type: label
              text: "Would you like to sign up now?"
              style:
                width: "0.576"
                marginLeft: "0.062"
                marginTop: "0.018"
                fontSize: .Nfont.n2

                textAlign:
                  x: center
                color: "0x333333"
            - type: view
              style:
                height: "0.015"
                width: "0.7"
                border:
                  style: 2
                  color: "0x919192"
                borderWidth: "1"
            - type: view
              style:
                width: "0.7"
              children:
                - type: button
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: inviteUser
                  text: CANCEL
                  style:
                    color: "0x007AFF"
                    backgroundColor: "0xE6E6E6"
                    display: inline-block
                    width: "0.349"
                    borderRadius: "0 0 0 14px"
                    fontSize: .Nfont.n2
                    height: "0.054"
                    border:
                      style: "1"
                - type: view
                  style:
                    width: "0.002"
                    backgroundColor: "0x919192"
                    display: inline-block
                    height: "0.054"
                - type: button
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: inviteUser
                    - goto: SignUp
                  text: OKAY
                  style:
                    color: "0x007AFF"
                    fontWeight: "850"
                    backgroundColor: "0xE6E6E6"
                    display: inline-block
                    width: "0.349"
                    fontSize: .Nfont.n2
                    borderRadius: "0 0 14px 0"
                    height: "0.054"
                    border:
                      style: "1"

    - type: popUp
      viewTag: inputVerificationCode
      message: "Enter the 6-digit verification code"
      style:
        top: "0"
        left: "0"
        width: "1"
        height: "1"
        backgroundColor: "0x00000066"
        zIndex: "50"
        textAlign:
          y: center
      children:
        - type: view
          style:
            width: "0.72"
            marginLeft: "0.14"
            backgroundColor: "0xE6E6E6"
            borderRadius: "14px"
          children:
            - type: label
              text: ___.message
              style:
                width: "0.616"
                marginLeft: "0.052"
                fontWeight: "550"
                marginTop: "0.029"
                fontSize: .Nfont.h14

                textAlign:
                  x: center
                color: "0x333333"
            - type: textField
              contentType: text
              dataKey: formData.code
              required: "true"
              style:
                height: "0.035"
                width: "0.616"
                marginTop: "0.02"
                marginLeft: "0.052"
                backgroundColor: "0xffffff"
                border:
                  style: "1"
                borderRadius: "5"
                fontSize: .Nfont.n2
                textAlign:
                  x: center
                  y: center
            - type: view
              style:
                height: "0.02"
                border:
                  style: 2
                  color: "0x919192"
                borderWidth: "1"
                width: "0.72"
            - type: view
              style:
                width: "0.72"
              children:
                - type: button
                  text: "Cancel"
                  style:
                    color: "0x007AFF"
                    backgroundColor: "0xE6E6E6"
                    display: inline-block
                    width: "0.359"
                    borderRadius: "0 0 0 14px"
                    fontSize: .Nfont.n2
                    height: "0.054"
                    border:
                      style: "1"
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: inputVerificationCode
                - type: view
                  style:
                    width: "0.002"
                    backgroundColor: "0x919192"
                    display: inline-block
                    height: "0.054"
                - type: button
                  text: "Confirm"
                  style:
                    color: "0x007AFF"
                    fontWeight: "850"
                    backgroundColor: "0xE6E6E6"
                    display: inline-block
                    width: "0.359"
                    fontSize: .Nfont.n2
                    borderRadius: "0 0 14px 0"
                    height: "0.054"
                    border:
                      style: "1"
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: inputVerificationCode
                    - actionType: evalObject
                      object:
                        - if:
                            - =..formData.code  
                            - continue
                            - actionType: popUp
                              popUpView: emptyCode
                              wait: true
                    - actionType: evalObject
                      object: ..check
                    - actionType: evalObject
                      object: ..verify
                    - actionType: evalObject
                      object: ..update
                    - actionType: evalObject
                      object: ..getFac
                    - actionType: evalObject
                      object:
                        - if:
                            - =.Global.currentUser.vertex.sk
                            - actionType: evalObject
                              object:
                                - =.builtIn.array.getListLength:
                                    dataIn:
                                      object: =.Global.organizations
                                    dataOut: SignIn.formData.facilityNum
                                - =.builtIn.string.retainNumber:
                                    dataIn:
                                      value: =..formData.facilityNum
                                    dataOut: SignIn.formData.facilityNum
                                - =.builtIn.utils.setLockScreen:
                                    dataIn:
                                      names: ["lockTime","lockSelect","lockPageName"]
                                      values:
                                        - =..apiRequest.logOutDoc.docResp.doc.0.name.data.time
                                        - =.Global.autolock
                                        - "LockPage"
                                # 根据何静的要求，如果provider有多个facility，则进入选择facility页面，否则直接进入Dashboard
                                - if:
                                  - =.builtIn.math.greater:
                                      dataIn:
                                        num1: =..formData.facilityNum
                                        num2: 2
                                  - goto: SwitchFacility
                                  - goto: Dashboard
                            - continue
    - .TipsMultiLine:
      message: "Incorrect phone number and password"
      viewTag: WrongInformation
      onClick:
        - actionType: evalObject
          object:
            - ..changeColor.password.borderColor@: "0xFB5051"
        - actionType: builtIn
          funcName: redraw
          viewTag: passwordVT
        - actionType: popUpDismiss
          popUpView: __.viewTag
    - .TipsMultiLine:
      viewTag: "NoPhoneNum"
      message: Phone number or UserName and password required
      onClick:
        - actionType: evalObject
          object:
            - ..changeColor.phone.borderColor@: "0xFB5051"
            - ..changeColor.password.borderColor@: "0xFB5051"
            - ..changeColor.userName.borderColor@: "0xFB5051"
        - actionType: builtIn
          funcName: redraw
          viewTag: userNameVT
        - actionType: builtIn
          funcName: redraw
          viewTag: passwordVT
        - actionType: builtIn
          funcName: redraw
          viewTag: phoneNumberVT
        - actionType: popUpDismiss
          popUpView: __.viewTag
    - .TipsMultiLine:
      viewTag: "WrongPhoneNum"
      message: Invalid phone number format Use numbers only, 10 digits required
      onClick:
        - actionType: evalObject
          object:
            - ..changeColor.phone.borderColor@: "0xFB5051"
        - actionType: builtIn
          funcName: redraw
          viewTag: phoneNumberVT
        - actionType: popUpDismiss
          popUpView: __.viewTag
    - .TipsMultiLine:
      viewTag: "NoPassword"
      message: No password entered. Password required
      onClick:
        - actionType: evalObject
          object:
            - ..changeColor.password.borderColor@: "0xFB5051"
        - actionType: builtIn
          funcName: redraw
          viewTag: passwordVT
        - actionType: popUpDismiss
          popUpView: __.viewTag
    - .TipsMultiLine:
      viewTag: "wrongPassword"
      message: Incorrect Password
      onClick:
        - actionType: evalObject
          object:
            - ..changeColor.password.borderColor@: "0xFB5051"
        - actionType: builtIn
          funcName: redraw
          viewTag: passwordVT
        - actionType: popUpDismiss
          popUpView: __.viewTag
    - .TipsMultiLine:
      viewTag: userCannotfind
      message: Cannot Find the User
    - .TipsMultiLine:
      viewTag: "wrongCode"
      message: Incorrect verificationCode
      onClick:
        - actionType: popUp
          popUpView: inputVerificationCode
        - actionType: popUpDismiss
          popUpView: __.viewTag

    - .TipsOneLine:
      message: "VerificationCode required"
      viewTag: emptyCode
      onClick:
        - actionType: popUpDismiss
          popUpView: emptyCode
        - actionType: popUp
          popUpView: inputVerificationCode
          wait: true

    - .TipsMultiLine:
      message: "Invalid Username: Required length should be 6 to 16"
      viewTag: invaliduserid
      onClick:
        - actionType: evalObject
          object:
            - ..changeColor.userName.borderColor@: "0xFB5051"
        - actionType: builtIn
          funcName: redraw
          viewTag: userNameVT
        - actionType: popUpDismiss
          popUpView: __.viewTag
    - type: popUp
      viewTag: resetUser
      style:
        top: "0"
        left: "0"
        width: "1"
        height: "1"
        backgroundColor: "0x00000066"
        zIndex: "50"
        textAlign:
          y: center
      children:
        - type: view
          style:
            width: "0.7"
            marginLeft: "0.15"
            backgroundColor: "0xE6E6E6"
            borderRadius: "14px"
            textAlign:
              x: center
          children:
            - type: label
              text: Forget your password?
              style:
                marginLeft: "0.062"
                marginTop: "0.027"
                fontSize: .Nfont.n1_1
                fontWeight: "600"
                width: "0.576"

                color: "0x333333"
                textAlign:
                  x: center
            - type: label
              text: When using blockchain technology, there is no way for us at AiTmed to recover your password. It is blockchain-encrypted for your security and privacy.
              style:
                width: "0.576"
                marginLeft: "0.062"
                marginTop: "0.018"
                fontSize: .Nfont.n2

                textAlign:
                  x: center
                color: "0x333333"
            - type: label
              text: To reset your password, you must create a new account.
              style:
                width: "0.576"
                marginLeft: "0.062"
                marginTop: "0.018"
                fontSize: .Nfont.n2

                textAlign:
                  x: center
                color: "0x333333"
            - type: label
              text: THIS WILL RESET YOUR ACCOUNT AND DELETE ANY PREVIOUSLY STORED INFORMATION
              style:
                width: "0.576"
                marginLeft: "0.062"
                marginTop: "0.018"
                fontSize: .Nfont.n2

                textAlign:
                  x: center
                color: "0x333333"
            - type: label
              text: This action cannot be undone.
              style:
                width: "0.576"
                marginLeft: "0.062"
                marginTop: "0.018"
                fontSize: .Nfont.n2

                textAlign:
                  x: center
                color: "0x333333"
            - type: view
              style:
                height: "0.015"
                width: "0.7"
                border:
                  style: 2
                  color: "0x919192"
                borderWidth: "1"
            - type: view
              style:
                width: "0.7"
              children:
                - type: button
                  text: "Cancel"
                  style:
                    color: "0x007AFF"
                    backgroundColor: "0xE6E6E6"
                    display: inline-block
                    width: "0.349"
                    borderRadius: "0 0 0 14px"
                    fontSize: .Nfont.n2
                    height: "0.054"
                    border:
                      style: "1"
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: resetUser
                - type: view
                  style:
                    width: "0.002"
                    backgroundColor: "0x919192"
                    display: inline-block
                    height: "0.054"
                - type: button
                  text: "Sign Up"
                  style:
                    color: "0x007AFF"
                    fontWeight: "850"
                    backgroundColor: "0xE6E6E6"
                    display: inline-block
                    width: "0.349"
                    fontSize: .Nfont.n2
                    borderRadius: "0 0 14px 0"
                    height: "0.054"
                    border:
                      style: "1"
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: resetUser
                    - goto: SignUp
