PatientProfile: 
  viewPort: top
  init:
    - actionType: evalObject
      object: 
        .Global._nonce@: 
          =.builtIn.math.random: ""
    - actionType: evalObject
      object: .BaseDate.miniWeekGet
    - actionType: evalObject
      object: .BaseDate.getDate

    - actionType: evalObject  #android use calendar init
      object: 
        - .BaseComponents.calendarDate.year@: ""
        - .BaseComponents.calendarDate.month@: ""
        - .BaseComponents.calendarDate.day@: ""
        - .BaseComponents.calendarDate.monthName@: ""
        - .BaseComponents.calendarDate.todayDate@: ""
        - .BaseComponents.calendarDate.flag@: ""
        - .BaseComponents.calendarDate.dayLable@: []
        - .BaseComponents.year@: []
        - .BaseComponents.flag: ""
        #生成年份
        - =.builtIn.date.generateYear:
            dataIn:
              last: 80
              next: 10
            dataOut: BaseComponents.year
    - actionType: evalObject #android use calendar init
      object: 
        .BaseComponents.getDate
    - actionType: evalObject #android use calendar init
      object: 
        .BaseComponents.getShow 
    - actionType: evalObject #IOS use calendar init
      object: 
        - =.builtIn.date.getMonth:
            dataIn: 
            dataOut: PatientProfile.calendarDate.month
        - =.builtIn.date.getYear: 
            dataIn: 
            dataOut: PatientProfile.calendarDate.year
        - =.builtIn.date.getDate: 
            dataIn: 
            dataOut: PatientProfile.calendarDate.day   
    - actionType: evalObject  
      object:
        - =.builtIn.date.calendarArray:
            dataIn:
              year: =.PatientProfile.calendarDate.year
              month: =.PatientProfile.calendarDate.month
              today: =.PatientProfile.calendarDate.day
            dataOut: PatientProfile.calendarDate.dayLable
        - =.builtIn.date.transformMonth:
            dataIn:
              month: =.PatientProfile.calendarDate.month
            dataOut: PatientProfile.calendarDate.monthName
        - =.builtIn.date.ShowDateByNumber:
            dataIn:
              year: =.PatientProfile.calendarDate.year
              month: =.PatientProfile.calendarDate.month
              day: =.PatientProfile.calendarDate.day
              formatType: "Y-M-D"
            dataOut: PatientProfile.calendarDate.todayDate
    - if:
      - =.Global.newCareUser
      - actionType: evalObject
        object: 
          - =..apiRequest.profile.docAPI.store: ""
          - ..apiRequest.profile.patientdocument@: =..apiRequest.profile.response.doc
          - .Global.titleProfile@: =..apiRequest.profile.patientdocument
      - continue
    
    - actionType: evalObject
      object:
        - =..apiRequest.profile.docAPI.get: ""
        - =.builtIn.utils.setTimer:
            dataIn:
              timeUnix: 1000
        - ..apiRequest.profile.patientdocument@: =..apiRequest.profile.docResponse.doc.0
        - .Global.titleProfile@: =..apiRequest.profile.patientdocument
    # - if:
    #   - =.Global.formData.PatientProfile.front_IDCard.doc.id
    #   - ..apiRequest.profile.patientdocument.name.data.identification.imageId@: =.Global.formData.PatientProfile.front_IDCard.doc.id
    #   - continue
    - if:
      - =.builtIn.string.equal:
          dataIn:
            string1: =..apiRequest.profile.patientdocument.name.data.identification.imageId
            string2: ""
      - ..formData.idCardShow@: "none"
      - ..formData.idCardShow@: "true"
    # get insurance
    - =..apiRequest.insurance.docAPI.get: ""
    #Insurance本地化
    - if:
        - =.builtIn.array.judgeListLength:
            dataIn:
              array: =.Global.selfMedicalLicense
              len: 0
        - actionType: evalObject
          object:
            - .Global.selfMedicalLicense@: =..apiRequest.insurance.docQueryResp.doc
        - continue
    #合并
    - =.builtIn.array.concatArray:
        dataIn:
          array1: =..apiRequest.insurance.docQueryResp.doc
          array2: =.Global.selfMedicalLicense
          sortby: ctime
          orders: desc
        dataOut: PatientProfile.apiRequest.insurance.docQueryResp.doc
    #去重
    - =.builtIn.array.keepLatestDoc:
        dataIn:
          docList: =..apiRequest.insurance.docQueryResp.doc
          path: id
        dataOut: PatientProfile.apiRequest.insurance.docQueryResp.doc
  formDataTemp:
    gender:
      - key: gender
        value: "Male"
      - key: gender
        value: "Female"
      - key: gender
        value: "Other" 
  formData:
    idCardShow: none
    relationShow: none
    setDefault: false
    employmentAddressList: []
    address: []
    errorArr: []
    errorArrIns: []
  apiRequest:
    profile:
      docResponse: ""
      response: ""
      patientdocument:
        type: .DocType.PatientProfile
        eid: .Global.rootNotebookID
        name:
          # .Global.titleProfile: ""
          data:
            #profile版本
            version: 2
            insuranceId: ""
            basicInfo:
              avatar: ""
              phone: .Global.currentUser.vertex.uid
              firstName: .Global.currentUser.vertex.name.firstName
              middleName: ""
              lastName: .Global.currentUser.vertex.name.lastName
              dateOfBirth: ""
              gender: ""
              socialSecurity: ""
              fullName: ""
              userName: .Global.currentUser.vertex.name.userName
            # 联系信息
            contactInfo:
              alternatePhone: 
                countryCode: "+1"
                fullPhone:
                phoneNumber: 
              email: .Global.currentUser.vertex.name.email
              address: 
                fullAddress: ""
                line: ""
                secondLine: ""
                # 市
                city: ""
                # 郡，县
                county: ""
                state: ""
                zipCode: ""
                addressFirstLine: ""
                addressSecondLine: ""
              # 紧急联系人info
            emergencyContact: 
              firstName: ""
              middleName: ""
              lastName: ""
              #与当前用户的关系，如母子等
              relation: ""
              phone: 
                countryCode: "+1"
                fullPhone:
                phoneNumber: 
            # 身份证信息
            identification: 
              type: Drive License
              id: ""
              imageId: ""
            # 雇佣者信息
            employment:
              employerName: ""
              dept: ""
              NatureBusiness: ""
              Occupation: ""
              Telephone: ""
              fax: ""
              email: ""
              address: 
                line: ""
                secondLine: ""
                # 市
                city: ""
                # 郡，县
                county: ""
                state: ""
                zipCode: ""
          type: .PatientProfile.profile.docAPI.store.subtype.mediaType
      docAPI:
        get:
          .DocAPI.get: "" 
          api: rd
          id: .Global.rootNotebookID
          xfname: eid
          type: .DocType.PatientProfile
          obfname: mtime
          dataKey: apiRequest.profile.docResponse
          _nonce: =.Global._nonce 
        store:
          api: cd
          dataIn: apiRequest.profile.patientdocument
          dataOut: apiRequest.profile.response
          subtype:
            mediaType: "application/json"
    #身份证图片
    idImage:
      docDeleteReq:
        id: ""
      docCreateReq:
        type: .DocType.F_IDCard
        eid: .Global.rootNotebookID
        name:
          title: ""
          type:
          data: binFile
      docAPI:
        store:
          api: cd
          dataIn: PatientProfile.apiRequest.idImage.docCreateReq
          dataOut: Global.formData.PatientProfile.front_IDCard

    hashTag:
      docCreateResp: ""
      docCreateReq:
        eid: .Global.rootNotebookID
        type: .DocType.HashTag
        reid: ""
        name:
          data:
            hashFields:
              - name
              - mtime
              - type
            hashTime: ""
            hashCode: "" # sha256
      docAPI:
        store:
          api: cd
          dataIn: PatientProfile.apiRequest.hashTag.docCreateReq
          dataOut: PatientProfile.apiRequest.hashTag.docCreateResp   
    insurance:
      docDeleteReq: ""
      docQueryResp: ""
      docCreateResp: ""
      docCreateReq:
        id: ""
        eid: .Global.rootNotebookID
        type: .DocType.InsuranceCard
        name:
          data:
            # 保险卡简略信息，格式：companyName - memberId
            insuranceInfo: ""
            #是否未默认保险卡
            default: false
            #保险公司名称
            companyName: ""
            #保险计划或者医疗组织
            planOrMedicalGroup: ""
            #成员名称
            memberName: ""
            #成员id
            memberId: ""
            #组织号码
            groupNumber: ""
            #政策号码
            policyNumber: ""
            #政策持有者名字
            policyHolderName: ""
            #保险卡正面照片docId
            front_InsuranceCardId: ""
            #保险卡反面照片docId
            back_InsuranceCardId: ""
            # relation
            gender: ""
            relation: "Self"
            relationAddress: 
              line: ""
              secondLine: ""
              city: ""
              county: ""
              state: ""
              zipCode: ""
            relationBirth: ""
            relationName: ""
      docQueryReq:
        type: .DocType.InsuranceCard
        ids:
          - .Global.rootNotebookID
          - .Global.titleProfile.id
        xfname: eid,fid
        _nonce: =.Global._nonce
        obfname: ctime
        asc: true
      docAPI:
        store:
          api: cd
          dataIn: PatientProfile.apiRequest.insurance.docCreateReq
          dataOut: PatientProfile.apiRequest.insurance.docCreateResp
        get:
          api: rd
          dataIn: PatientProfile.apiRequest.insurance.docQueryReq
          dataOut: PatientProfile.apiRequest.insurance.docQueryResp
        delete:
          api: dx
          dataIn: PatientProfile.apiRequest.insurance.docDeleteReq
    #正面保险卡图片
    front_insuranceImage:
      docCreateReq:
        type: .DocType.F_InsuranceCard
        eid: .Global.rootNotebookID
        reid: ""
        name:
          data: binFile
      docDeleteReq:
        id: ""
      docAPI:
        store:
          api: cd
          dataIn: PatientProfile.apiRequest.front_insuranceImage.docCreateReq
          dataOut: Global.formData.front_InsuranceCard
        delete:
          api: dx
          dataIn: PatientProfile.apiRequest.front_insuranceImage.docDeleteReq
    #反面保险卡图片
    back_insuranceImage:
      docCreateReq:
        type: .DocType.B_InsuranceCard
        eid: .Global.rootNotebookID
        reid: ""
        name:
          data: binFile
      docDeleteReq:
        id: ""
      docAPI:
        store:
          api: cd
          dataIn: PatientProfile.apiRequest.back_insuranceImage.docCreateReq
          dataOut: Global.formData.back_InsuranceCard
        delete:
          api: dx
          dataIn: PatientProfile.apiRequest.back_insuranceImage.docDeleteReq
    #用户头像
    avatar:
      docCreateReq:
        type: .DocType.UserAvatar
        eid: .Global.rootNotebookID
        name:
          title: ""
          type:
          data: binFile
      docAPI:
        store:
          api: cd
          dataIn: PatientProfile.apiRequest.avatar.docCreateReq
          dataOut: Global.formData.avatar
  components:
    - type: view
      style:
        width: '1'
        margin: 'auto'
        display: flex
        flexDirection: column
        justifyContent: center
        fontFamily: "Arial"
      children:
        - .baseTopBar:
          children:
            - .baseTopMenu:
              children:
                - .AitmedLogo
    - type: scrollView
      style:
        width: '1'
        height: auto
        margin: "auto"
        marginTop: 6vw
      children:
        - type: view
          style: 
            height: "0.14"
            backgroundColor: "#E9F2FC"
        - type: view
          style:
            width: 80vw
            height: "0.18"
            margin: "auto"
            borderBottom: 'solid #DEDEDE'
            borderWidth: '7'
            display: flex
            flexDirection: row
            # justifyContent: center
            # alignItems: center
          children:
            - type: view 
              style:
                width: "0.11"
                height: "0.18"
              children:
                - type: view
                  style:
                    width: "0.12"
                    height: "0.21"
                    backgroundColor: "#FFFFFF"
                    borderRadius: 120px
                    marginLeft: 2vw
                    marginTop: "-0.07"
                - type: view
                  style:
                    width: "0.11"
                    height: "0.19"
                    backgroundColor: "#E9F2FC"
                    borderRadius: 100px
                    marginLeft: 2.5vw
                    marginTop: "-0.2"
                  children:
                    #用户头像
                    - type: image
                      path: patients.svg
                      # 指定刷新组件名称
                      viewTag: avatar 
                      path=func: .builtIn.utils.prepareDocToPath
                      dataKey: apiRequest.profile.patientdocument.name.data.basicInfo.avatar
                      onClick:
                        - actionType: openPhotoLibrary
                          dataKey: PatientProfile.apiRequest.avatar.docCreateReq.name.data
                          dataObject: BLOB
                        - actionType: popUp
                          popUpView: upload
                        - actionType: evalObject
                          object:
                            #更新用户头像
                            - =..apiRequest.avatar.docAPI.store: ""
                        - actionType: evalObject
                          object:
                            #把新头像的id放入profile
                            - ..apiRequest.profile.patientdocument.name.data.basicInfo.avatar@: =.Global.formData.avatar.doc.id
                        #刷新用户头像&展示成功
                        - actionType: popUpDismiss
                          popUpView: upload
                        - actionType: popUp
                          popUpView: successView
                          wait: 1000
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: avatar
                      style:
                        width: "0.11"
                        height: "0.19"
                        borderRadius: 100px
            - type: image
              path: edit.svg
              style:
                width: "0.03"
              onClick:
                - actionType: openPhotoLibrary
                  dataKey: PatientProfile.apiRequest.avatar.docCreateReq.name.data
                  dataObject: BLOB
                - actionType: popUp
                  popUpView: upload
                - actionType: evalObject
                  object:
                    #更新用户头像
                    - =..apiRequest.avatar.docAPI.store: ""
                - actionType: evalObject
                  object:
                    #把新头像的id放入profile
                    - ..apiRequest.profile.patientdocument.name.data.basicInfo.avatar@: =.Global.formData.avatar.doc.id
                #刷新用户头像&展示成功
                - actionType: popUpDismiss
                  popUpView: upload
                - actionType: popUp
                  popUpView: successView
                  wait: 1000
                - actionType: builtIn
                  funcName: redraw
                  viewTag: avatar
            - type: view
              style:
                width: 66vw
                height: 5vw
                display: flex
                flexDirection: row
                justifyContent: space-between
                alignItems: center
                marginLeft: 1vw
                marginTop: 1.5vw
              children:
                - type: view
                  style:
                    width: 20vw
                    height: 5vw
                    marginLeft: 1vw
                  children:
                    - type: view
                      style:
                        width: 30vw
                        marginTop: 0.5vw
                      children:
                        - type: label
                          text: "Username:"
                          style: 
                            fontSize: .Nfont.h8
                            color: "#333333"
                            fontWeight: 700
                            display: inline-block
                        - type: label
                          dataKey: apiRequest.profile.patientdocument.name.data.basicInfo.userName
                          style: 
                            fontSize: .Nfont.h8
                            color: "#333333"
                            fontWeight: 700
                            textIndent: 0.5em
                            display: inline-block
                    - type: view
                      style:
                        width: 17vw
                        marginTop: 0.5vw
                      children:
                        - type: label
                          text: "Phone #:"
                          style: 
                            fontSize: .Nfont.h3
                            color: "#333333"
                            display: inline-block
                        - type: label
                          text: "8861230002"
                          dataKey: apiRequest.profile.patientdocument.name.data.basicInfo.phone
                          style: 
                            fontSize: .Nfont.h3
                            lineHeight: 1.8vw
                            textIndent: 0.5em
                            color: "#333333"
                            display: inline-block
                - type: view
                  style:
                    width: 14vw
                    height: 5vw
                    marginLeft: 2vw
                    display: flex
                    flexDirection: row
                    justifyContent: space-between
                    alignItems: center
                  children:
                    - type: button
                      style: 
                        width: "0.068"
                        height: "0.037"
                        backgroundColor: "0x2988E6"
                        borderRadius: "5px"
                        textAlign:
                          x: center
                          y: center
                      children:
                        - type: image
                          path: saveImage.svg
                          style:
                            height: 1.2vw
                        - type: label
                          text: "Save"
                          style: 
                            backgroundColor: "0x2988E6"
                            marginLeft: "0.005"
                            borderRadius: 3px
                            float: right
                            fontSize: .Nfont.h1
                            color: "0xffffff"
                          onClick: 
                            - actionType: evalObject
                              object:
                                - if: 
                                  - =.builtIn.string.judgeFillinAll:
                                      dataIn:
                                        - =..apiRequest.profile.patientdocument.name.data.basicInfo.firstName
                                        - =..apiRequest.profile.patientdocument.name.data.basicInfo.lastName
                                  - =.builtIn.array.judgeKeyAndReturnValue:         
                                      dataIn:
                                        objArr: 
                                          - key: "First Name"
                                            value: =..apiRequest.profile.patientdocument.name.data.basicInfo.firstName
                                          - key: "Last Name"
                                            value: =..apiRequest.profile.patientdocument.name.data.basicInfo.lastName                       
                                        pathKey: "key"
                                        pathValue: "value"
                                        valueArr: ["","Select"]
                                      dataOut:  PatientProfile.formData.errorArr
                                  - continue   
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: errorView
                            - actionType: evalObject
                              object:
                                - if: 
                                  - =.builtIn.string.judgeFillinAll:
                                      dataIn:
                                        - =..apiRequest.profile.patientdocument.name.data.basicInfo.firstName
                                        - =..apiRequest.profile.patientdocument.name.data.basicInfo.lastName
                                  - actionType: popUp
                                    popUpView: errorView
                                    wait: true
                                  - continue
                            - actionType: evalObject
                              object:
                                - =.builtIn.string.concat:
                                    dataIn:
                                      - =..apiRequest.profile.patientdocument.name.data.basicInfo.firstName
                                      - " "
                                      - =..apiRequest.profile.patientdocument.name.data.basicInfo.middleName
                                      - " "
                                      - =..apiRequest.profile.patientdocument.name.data.basicInfo.lastName
                                    dataOut: PatientProfile.apiRequest.profile.patientdocument.name.data.basicInfo.fullName
                                - .Global.currentUser.vertex.name.fullName@: =..apiRequest.profile.patientdocument.name.data.basicInfo.fullName
                                - =.builtIn.string.concat:
                                    dataIn:
                                      - =..apiRequest.profile.patientdocument.name.data.contactInfo.alternatePhone.countryCode
                                      - " "
                                      - =..apiRequest.profile.patientdocument.name.data.contactInfo.alternatePhone.phoneNumber
                                    dataOut: PatientProfile.apiRequest.profile.patientdocument.name.data.contactInfo.alternatePhone.fullPhone
                                - =.builtIn.string.concat:
                                    dataIn:
                                      - =..apiRequest.profile.patientdocument.name.data.emergencyContact.phone.countryCode
                                      - " "
                                      - =..apiRequest.profile.patientdocument.name.data.emergencyContact.phone.phoneNumber
                                    dataOut: PatientProfile.apiRequest.profile.patientdocument.name.data.emergencyContact.phone.fullPhone
                                - =.builtIn.array.add:
                                    dataIn:
                                      object: =..formData.address
                                      value: =..apiRequest.profile.patientdocument.name.data.contactInfo.address.line
                                - =.builtIn.array.add:
                                    dataIn:
                                      object: =..formData.address
                                      value: =..apiRequest.profile.patientdocument.name.data.contactInfo.address.secondLine
                                - =.builtIn.array.add:
                                    dataIn:
                                      object: =..formData.address
                                      value: =..apiRequest.profile.patientdocument.name.data.contactInfo.address.city
                                - =.builtIn.array.add:
                                    dataIn:
                                      object: =..formData.address
                                      value: =..apiRequest.profile.patientdocument.name.data.contactInfo.address.county
                                - =.builtIn.array.add:
                                    dataIn:
                                      object: =..formData.address
                                      value: =..apiRequest.profile.patientdocument.name.data.contactInfo.address.state
                                - =.builtIn.array.add:
                                    dataIn:
                                      object: =..formData.address
                                      value: =..apiRequest.profile.patientdocument.name.data.contactInfo.address.zipCode
                                # build fullAddress
                                - =.builtIn.array.formatStringFill:
                                    dataIn:
                                      strArr: =..formData.address
                                      sfill: ","
                                    dataOut: PatientProfile.apiRequest.profile.patientdocument.name.data.contactInfo.address.fullAddress
                                # build employment fullAddress
                                - =.builtIn.array.add:
                                    dataIn:
                                      object: =..formData.employmentAddressList
                                      value: =..apiRequest.profile.patientdocument.name.data.employment.address.line
                                - =.builtIn.array.add:
                                    dataIn:
                                      object: =..formData.employmentAddressList
                                      value: =..apiRequest.profile.patientdocument.name.data.employment.address.secondLine
                                - =.builtIn.array.add:
                                    dataIn:
                                      object: =..formData.employmentAddressList
                                      value: =..apiRequest.profile.patientdocument.name.data.employment.address.city
                                - =.builtIn.array.add:
                                    dataIn:
                                      object: =..formData.employmentAddressList
                                      value: =..apiRequest.profile.patientdocument.name.data.employment.address.county
                                - =.builtIn.array.add:
                                    dataIn:
                                      object: =..formData.employmentAddressList
                                      value: =..apiRequest.profile.patientdocument.name.data.employment.address.state
                                - =.builtIn.array.add:
                                    dataIn:
                                      object: =..formData.employmentAddressList
                                      value: =..apiRequest.profile.patientdocument.name.data.employment.address.zipCode
                                # build fullAddress
                                - =.builtIn.array.formatStringFill:
                                    dataIn:
                                      strArr: =..formData.employmentAddressList
                                      sfill: ","
                                    dataOut: PatientProfile.apiRequest.profile.patientdocument.name.data.employment.address.fullAddress
                            - actionType: evalObject
                              object: 
                                - =..apiRequest.profile.docAPI.store: ""
                                - =.builtIn.date.currentDateTime:
                                    dataIn:
                                    dataOut: PatientProfile.apiRequest.hashTag.docCreateReq.name.data.hashTime
                                - =.builtIn.utils.gethashCode:
                                    dataIn:
                                      hashFields: =..apiRequest.hashTag.docCreateReq.name.data.hashFields
                                    dataOut: PatientProfile.apiRequest.hashTag.docCreateReq.name.data.hashCode
                                - ..apiRequest.hashTag.docCreateReq.reid@: =..apiRequest.profile.response.doc.id
                                - =..apiRequest.hashTag.docAPI.store: "" 
                                - ..apiRequest.profile.patientdocument@: =..apiRequest.profile.response.doc
                                - .Global.titleProfile@: =..apiRequest.profile.patientdocument
                                - .Global.newCareUser@: false
                            - actionType: popUp
                              popUpView: successView
                              wait: 1000 
                            - goto: .Global.GoSignUp 
                    - .Label1:
                      text: Fill it later
                      style:
                        marginTop: 0.1vw
                        marginLeft: 2vw
                        color: "#2988e6"
                        fontSize: .Nfont.h1
                        borderWidth: "2"
                        borderBottom: "solid 3px  #2988e6"
                      onClick: 
                        - actionType: evalObject
                          object:
                            - =.builtIn.string.concat:
                                dataIn:
                                  - =..apiRequest.profile.patientdocument.name.data.basicInfo.firstName
                                  - " "
                                  - =..apiRequest.profile.patientdocument.name.data.basicInfo.middleName
                                  - " "
                                  - =..apiRequest.profile.patientdocument.name.data.basicInfo.lastName 
                                dataOut: PatientProfile.apiRequest.profile.patientdocument.name.data.basicInfo.fullName
                            - .Global.currentUser.vertex.name.fullName@: =..apiRequest.profile.patientdocument.name.data.basicInfo.fullName
                            - .Global.newCareUser@: false
                        - goto: .Global.GoSignUp
                        
                
        - type: view
          style:
            width: 80vw
            margin: auto
            marginTop: "0.04"
            display: flex
            flexDirection: column
            # alignItems: center
          children:
            - type: label
              text: "About"
              style:
                fontSize: .Nfont.h8
                color: "0x000000"
                fontFamily: "Arial"
                fontWeight: 700
            - type: view
              style:
                width: 80vw
                height: auto
                display: flex
                flexDirection: column
                margin: auto
                marginTop: 1vw
                borderBottom: 'solid #DEDEDE'
                borderWidth: '7'
              children:
                - .Label1:
                  text: "Basic info"
                  style: 
                    fontSize: .Nfont.h1
                    fontFamily: "Arial"
                    fontWeight: 600
                    height: 2vw
                    textAlign:
                      y: center
                - type: view
                  style:
                    width: 80vw
                    display: flex
                    flexDirection: row
                    justifyContent: space-between
                    height: 4vw
                    marginTop: 0.5vw
                  children:
                    - .ybiView:
                      children:
                        - .ybiSecondTitle:
                          textBoard:
                            - text: First Name
                            - text: "&nbsp;*"
                              color: "0xFB5051"  
                        - .ybiTextField:
                          dataKey: apiRequest.profile.patientdocument.name.data.basicInfo.firstName

                    - .ybiView:
                      children:
                        - .ybiSecondTitle:
                          textBoard:
                            - text: Middle Name
                        - .ybiTextField:
                          dataKey: apiRequest.profile.patientdocument.name.data.basicInfo.middleName
                    - .ybiView: 
                      children:
                        - .ybiSecondTitle:
                          textBoard:
                            - text: Last Name
                            - text: "&nbsp;*"
                              color: "0xFB5051"  
                        - .ybiTextField:
                          dataKey: apiRequest.profile.patientdocument.name.data.basicInfo.lastName
                    - .ybiView:
                      children:
                        - .ybiFirstTitle:
                          text: "Date of Birth"
                        - .ViewRow:
                          style:
                            width: 15vw
                            height: 2.4vw
                            borderRadius: "5px"
                            marginTop: 1.5vw
                            border:
                              style: 3
                            borderWidth: 2
                            borderColor: "#DEDEDE"
                          children:
                            - type: textField
                              viewTag: showBirth
                              placeholder: Enter here
                              dataKey: apiRequest.profile.patientdocument.name.data.basicInfo.dateOfBirth
                              style: 
                                marginTop: 0
                                width: 12vw
                                height: 2.2vw
                                border: "1px solid #f0f0f0"
                                borderRadius: "5px"
                                fontSize: 0.8vw
                                borderWidth: 0
                                textIndent: "1em"
                                textAlign:
                                  x: left
                                  y: center
                              onClick:
                                - actionType: 'popUp'
                                  popUpView: 'birthDay'
                            - type: image
                              path: calendarImage.svg
                              style:
                                float: right
                                width: 1.1vw
                                marginRight: 1vw
                              onClick:
                                - actionType: evalObject 
                                  object: 
                                    .BaseComponents.getDate
                                - actionType: evalObject
                                  object: 
                                    - =.builtIn.date.ShowDateByNumber:
                                        dataIn:
                                          year: =.BaseComponents.calendarDate.year
                                          month: =.BaseComponents.calendarDate.month
                                          day: =.BaseComponents.calendarDate.day
                                          formatType: "M/D/Y"
                                        dataOut: BaseComponents.calendarDate.todayDate
                                    - ..apiRequest.profile.patientdocument.name.data.basicInfo.dateOfBirth@: =.BaseComponents.calendarDate.todayDate
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: showBirth
                    - .ybiView:
                      children:
                        - .ybiFirstTitle:
                          text: "Social Security #"
                        - .ybiTextField:
                          dataKey: apiRequest.profile.patientdocument.name.data.basicInfo.socialSecurity
                
                - type: view
                  style:
                    width: 80vw
                    display: flex
                    flexDirection: row
                    justifyContent: space-between
                    height: 4vw
                    marginTop: 1vw
                  children:
                    - .ybiView:
                      children:
                        - .ybiFirstTitle:
                          textBoard:
                            - text: Gender
                        - type: view 
                          style:
                            width: 26vw
                            height: 2.2vw
                            fontSize: .Nfont.h0
                            fontWeight: 400
                          children:
                            - type: list
                              contentType: listObject
                              listObject: ..formDataTemp.gender
                              iteratorVar: itemObject
                              viewTag: isToEmergency
                              style:
                                marginTop: 2.3vw
                                height: 1vw
                                axis: horizontal
                              children:
                                - type: listItem
                                  itemObject: ""
                                  style:
                                    height: 0.8vw
                                    display: flex
                                    flexDirection: row
                                    width: "0.06"
                                  children:
                                    - type: image
                                      style:
                                        height: 0.8vw
                                      path:
                                        emit:
                                          dataKey:
                                            var: itemObject
                                          actions:
                                            - if:
                                                - =.builtIn.string.equal:
                                                    dataIn:
                                                      string1: =..apiRequest.profile.patientdocument.name.data.basicInfo.gender
                                                      string2: $var.value
                                                - selectOnblue.svg
                                                - selectBlack.svg
                                      onClick:
                                        - emit:
                                            dataKey:
                                              var: itemObject
                                            actions:
                                              - if:
                                                  - =.builtIn.string.equal:
                                                      dataIn:
                                                        string1: =..apiRequest.profile.patientdocument.name.data.basicInfo.gender
                                                        string2: $var.value
                                                  - =.builtIn.object.clear:
                                                      dataIn:
                                                        object: =..apiRequest.profile.patientdocument.name.data.basicInfo
                                                        key: $var.key
                                                  - =.builtIn.object.set:
                                                      dataIn:
                                                        object: =..apiRequest.profile.patientdocument.name.data.basicInfo
                                                        key: $var.key
                                                        value: $var.value
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: isToEmergency
                                    - type: label
                                      dataKey: itemObject.value
                                      style:
                                        marginLeft: 0.3vw
                                        height: 1vw
                                        color: "#333333"
                                        fontSize: .Nfont.h0
                                        lineHeight: 0.8vw
                
                - .Label1:
                  text: "Concact"
                  style: 
                    marginTop: 1vw
                    fontSize: .Nfont.h1
                    fontFamily: "Arial"
                    fontWeight: 600
                    height: 2vw
                    textAlign:
                      y: center   
                - type: view
                  style:
                    width: 31vw
                    height: "4vw"
                    display: flex
                    flexDirection: row
                    justifyContent: space-between
                    marginTop: 0.5vw
                  children:
                    - .ybiView:
                      children:
                        - .ybiSecondTitle:
                          text: Email
                        - .ybiTextField:
                          dataKey: apiRequest.profile.patientdocument.name.data.contactInfo.email
                    - type: view
                      style:
                        display: flex
                        flexDirection: row
                      children:     
                        - .ybiView:
                          children:
                            - .ybiSecondTitle:
                              text: "Phone #"
                              style:
                                width:
                            - .TimeSelect:
                              dataKey: apiRequest.profile.patientdocument.name.data.contactInfo.alternatePhone.countryCode
                              options:
                                .CountryCode
                              style:
                                width: 4vw
                                height: 3vw
                                borderRadius: "5px"
                                fontSize: 0.8vw
                                marginTop: 1.5vw
                        - .ybiView:
                          style:
                            marginLeft: 0.5vw
                          children:
                            - .ybiSecondTitle:
                              text: ""
                            - .ybiTextField:
                              dataKey: apiRequest.profile.patientdocument.name.data.contactInfo.alternatePhone.phoneNumber
                              style:  
                                width: 10vw

                - .AddFacilityLabelNoTop:
                  textBoard: 
                    - text: "Address"
                  style:
                    marginTop: "0.022"
                - type: view
                  style:
                    width: 80vw
                    display: flex
                    justifyContent: space-between
                    marginTop: 0.5vw
                  children:
                    # Address First Line
                    - type: view
                      style:
                        width: "auto"
                        height: 4vw
                        display: inline-block
                      children:
                        - .AddFacilityLabelNoTop:
                          textBoard: 
                            - text: "Address First Line"            
                          style:
                            height: 1.3vw
                        - .AddFacilityTextFieldNoTop:
                          dataKey: apiRequest.profile.patientdocument.name.data.contactInfo.address.line
                          style:
                            height: 2.5vw
                            width: 15vw
                            boxSizing: border-box
                    # Address Second Line
                    - type: view
                      style:
                        width: "auto"
                        height: auto
                        display: inline-block
                      children:
                        - .AddFacilityLabelNoTop:
                          textBoard: 
                            - text: "Address Second Line"        
                          style:
                        - .AddFacilityTextFieldNoTop:
                          dataKey: apiRequest.profile.patientdocument.name.data.contactInfo.address.secondLine
                          style:
                            height: 2.5vw
                            width: 15vw
                            boxSizing: border-box
                    # City
                    - type: view
                      style:
                        width: "auto"
                        height: auto
                        display: inline-block
                      children:
                        - .AddFacilityLabelNoTop:
                          textBoard: 
                            - text: "City"          
                          style:
                        - .AddFacilityTextFieldNoTop:
                          dataKey: apiRequest.profile.patientdocument.name.data.contactInfo.address.city
                          style:
                            height: 2.5vw
                            width: 11vw
                            boxSizing: border-box
                    # County
                    - type: view
                      style:
                        width: "auto"
                        height: auto
                        display: inline-block
                      children:
                        - .AddFacilityLabelNoTop:
                          textBoard: 
                            - text: "County"              
                          style:
                        - .AddFacilityTextFieldNoTop:
                          dataKey: apiRequest.profile.patientdocument.name.data.contactInfo.address.county
                          style:
                            height: 2.5vw
                            width: 11vw
                            boxSizing: border-box
                    # State*
                    - type: view
                      style:
                        width: "auto"
                        height: auto
                        display: inline-block
                        # marginLeft: "0.3vw"
                      children:
                        - .AddFacilityLabelNoTop:
                          textBoard: 
                            - text: "State"        
                          style:
                        - type: select
                          dataKey: apiRequest.profile.patientdocument.name.data.contactInfo.address.state # formData.countryCode : inputValue
                          options:
                            .SelectData.state
                          required: "true"
                          style:
                            width: 11vw
                            height: "2.5vw"
                            backgroundColor: "0xffffff"
                            borderWidth: "2"
                            border:
                              style: "3"
                              color: "0xDEDEDE"  
                            borderRadius: "5px"
                            boxSizing: border-box
                            marginTop: "0.0045"
                            textIndent: 1em
                    # Zip Code*
                    - type: view
                      style:
                        width: "auto"
                        height: auto
                        display: inline-block
                      children:
                        - .AddFacilityLabelNoTop:
                          textBoard: 
                            - text: "Zip Code"         
                          style:
                        - .AddFacilityTextFieldNoTop:
                          dataKey: apiRequest.profile.patientdocument.name.data.contactInfo.address.zipCode
                          style:
                            height: "2.5vw"
                            width: 11vw
                            boxSizing: border-box
                
                - .Label1:
                  text: "Emergency Contact"
                  style: 
                    marginTop: 1vw
                    fontSize: .Nfont.h1
                    fontFamily: "Arial"
                    fontWeight: 600
                    height: 2vw
                    textAlign:
                      y: center   
                - type: view
                  style:
                    width: 80vw
                    height: "4vw"
                    display: flex
                    flexDirection: row
                    justifyContent: space-between
                    marginTop: 0.5vw
                  children:
                    - .ybiView:
                      children:
                        - .ybiSecondTitle:
                          text: First Name
                        - .ybiTextField:
                          dataKey: apiRequest.profile.patientdocument.name.data.emergencyContact.firstName

                    - .ybiView:
                      children:
                        - .ybiSecondTitle:
                          text: Middle Name
                        - .ybiTextField:
                          dataKey: apiRequest.profile.patientdocument.name.data.emergencyContact.middleName

                    - .ybiView:
                      children:
                        - .ybiSecondTitle:
                          text: Last Name
                        - .ybiTextField:
                          dataKey: apiRequest.profile.patientdocument.name.data.emergencyContact.lastName

                    - .ybiView:
                      children:
                        - .ybiSecondTitle:
                          text: "Relation"
                        - .ybiTextField:
                          dataKey: apiRequest.profile.patientdocument.name.data.emergencyContact.relation

                    - type: view
                      style:
                        display: flex
                        flexDirection: row
                      children:     
                        - .ybiView:
                          children:
                            - .ybiSecondTitle:
                              text: "Phone #"
                            - .TimeSelect:
                              dataKey: apiRequest.profile.patientdocument.name.data.emergencyContact.phone.countryCode
                              options:
                                .CountryCode
                              style:
                                width: 4vw
                                height: 3vw
                                borderRadius: "5px"
                                fontSize: 0.8vw
                                marginTop: 1.5vw
                        - .ybiView:
                          style:
                            marginLeft: 0.5vw
                          children:
                            - .ybiSecondTitle:
                              text: ""
                            - .ybiTextField:
                              dataKey: apiRequest.profile.patientdocument.name.data.emergencyContact.phone.phoneNumber
                              style:  
                                width: 10vw
                - .Label1:
                  text: "Identification"
                  style: 
                    marginTop: 1vw
                    fontSize: .Nfont.h1
                    fontFamily: "Arial"
                    fontWeight: 600
                    height: 2vw
                    textAlign:
                      y: center   
                - type: view
                  style:  
                    width: 80vw
                    marginBottom: 3vw
                  children:
                    - type: view
                      style:
                        width: 31vw
                        height: "4vw"
                        display: flex
                        flexDirection: row
                        justifyContent: space-between
                        marginTop: 0.5vw
                      children:
                        - .ybiView:
                          children:
                            - .ybiSecondTitle:
                              text: ID Type
                            - type: select
                              dataKey: apiRequest.profile.patientdocument.name.data.identification.type
                              options:
                                .IDType
                              style:
                                width: 15vw
                                height: 1.7vw
                                borderRadius: "5px"
                                textIndent: "1em"
                                fontSize: 0.8vw
                                marginTop: 1.5vw
                                fontFamily: "Arial"
                                border:
                                  style: 3
                                borderWidth: 2
                                borderColor: "#DEDEDE"
                        - .ybiView:
                          children:
                            - .ybiSecondTitle:
                              text: "ID #"
                            - .ybiTextField:
                              dataKey: apiRequest.profile.patientdocument.name.data.identification.id
                    - type: label
                      text: Please upload your ID Image
                      style:
                        marginTop: 1.5vw
                        height: "0.03"
                        width: "15vw"
                        fontSize: .Nfont.h0
                        color: "#333333"
                        fontWeight: 600
                    - .ViewColumn:
                      style:
                        width: "12vw"
                        borderRadius: 5px
                      children:
                        - type: view
                          viewTag: IdImage
                          style: 
                            width: 9vw
                            height: 6vw
                          children:
                            - type: image
                              path: upload.svg
                              # 指定刷新组件名称
                              viewTag: front_IDCardTag 
                              path=func: .builtIn.utils.prepareDocToPath
                              dataKey: apiRequest.profile.patientdocument.name.data.identification.imageId
                              onClick:
                                # 上传图片处理
                                - actionType: openPhotoLibrary
                                  dataKey: PatientProfile.apiRequest.idImage.docCreateReq.name.data
                                  dataObject: BLOB
                                - actionType: popUp
                                  popUpView: upLoad
                                # 保存图片数据
                                - actionType: evalObject
                                  object:
                                    - =..apiRequest.idImage.docAPI.store: ""
                                    - ..apiRequest.profile.patientdocument.name.data.identification.imageId@: =.Global.formData.PatientProfile.front_IDCard.doc.id
                                    - ..formData.idCardShow@: "block"
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: IdImage
                                - actionType: popUpDismiss
                                  popUpView: upLoad
                                
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: isShow1
                                
                              style: 
                                width: 9vw
                                height: 6vw
                            - type: image
                              viewTag: isShow1
                              path: showImage.svg
                              style: 
                                display: ..formData.idCardShow
                                width: 3vw
                                marginLeft: 6vw
                                top: 3vw
                            # - type: image
                            #   viewTag: isShow1
                            #   path: showImage.svg
                            #   style: 
                            #     display: ..formData.isShow1
                            #     width: 3vw
                            #     zIndex: 100
                            #     marginLeft: 6vw
                            #     top: 3vw
                    - type: label
                      text: Front of Identification Card
                      style:
                        height: "0.03"
                        width: "15vw"
                        fontSize: .Nfont.h0_0
                        color: "#333333"
        - type: view
          style:
            width: 80vw
            margin: auto
            marginTop: "0.04"
            display: flex
            flexDirection: column
            # alignItems: center
          children:
            - type: label
              text: "Employment"
              style:
                fontSize: .Nfont.h8
                color: "0x000000"
                fontFamily: "Arial"
                fontWeight: 700
            - type: view
              style:
                width: 80vw
                height: auto
                display: flex
                flexDirection: column
                margin: auto
                marginTop: 1vw
                borderBottom: 'solid #DEDEDE'
                borderWidth: '7'
              children:
                - .Label1:
                  text: "Employment info"
                  style: 
                    fontSize: .Nfont.h1
                    fontFamily: "Arial"
                    fontWeight: 600
                    height: 2vw
                    textAlign:
                      y: center
                - type: view
                  style:
                    width: 80vw
                    display: flex
                    flexDirection: row
                    justifyContent: space-between
                    height: 4vw
                    marginTop: 0.5vw
                  children:
                    - .ybiView:
                      children:
                        - .ybiSecondTitle:
                          textBoard:
                            - text: Employment Name 
                        - .ybiTextField:
                          dataKey: apiRequest.profile.patientdocument.name.data.employment.employerName

                    - .ybiView:
                      children:
                        - .ybiSecondTitle:
                          textBoard:
                            - text: Dept.
                        - .ybiTextField:
                          dataKey: apiRequest.profile.patientdocument.name.data.employment.dept
                    - .ybiView: 
                      children:
                        - .ybiSecondTitle:
                          textBoard:
                            - text: Nature of business 
                        - .ybiTextField:
                          dataKey: apiRequest.profile.patientdocument.name.data.employment.NatureBusiness
                    - .ybiView:
                      children:
                        - .ybiSecondTitle:
                          textBoard:
                            - text: Occupation
                        - .ybiTextField:
                          dataKey: apiRequest.profile.patientdocument.name.data.employment.Occupation
                    - .ybiView:
                      children:
                        - .ybiFirstTitle:
                          text: "Telephone #"
                        - .ybiTextField:
                          dataKey: apiRequest.profile.patientdocument.name.data.employment.Telephone
                - type: view
                  style:
                    width: 31.5vw
                    display: flex
                    flexDirection: row
                    justifyContent: space-between
                    height: 4vw
                    marginTop: 1vw
                  children:
                    - .ybiView:
                      children:
                        - .ybiSecondTitle:
                          textBoard:
                            - text: "Fax #"
                        - .ybiTextField:
                          dataKey: apiRequest.profile.patientdocument.name.data.employment.fax

                    - .ybiView:
                      children:
                        - .ybiSecondTitle:
                          textBoard:
                            - text: Email
                        - .ybiTextField:
                          dataKey: apiRequest.profile.patientdocument.name.data.employment.email   
                - .AddFacilityLabelNoTop:
                  textBoard: 
                    - text: "Address"
                  style:
                    marginTop: "0.022"
                - type: view
                  style:
                    width: 80vw
                    display: flex
                    justifyContent: space-between
                    marginTop: 0.5vw
                    marginBottom: 3vw
                  children:
                    # Address First Line
                    - type: view
                      style:
                        width: "auto"
                        height: 4vw
                        display: inline-block
                      children:
                        - .AddFacilityLabelNoTop:
                          textBoard: 
                            - text: "Address First Line"            
                          style:
                            height: 1.3vw
                        - .AddFacilityTextFieldNoTop:
                          dataKey: apiRequest.profile.patientdocument.name.data.employment.address.line
                          style:
                            height: 2.5vw
                            width: 15vw
                            boxSizing: border-box
                    # Address Second Line
                    - type: view
                      style:
                        width: "auto"
                        height: auto
                        display: inline-block
                      children:
                        - .AddFacilityLabelNoTop:
                          textBoard: 
                            - text: "Address Second Line"        
                          style:
                        - .AddFacilityTextFieldNoTop:
                          dataKey: apiRequest.profile.patientdocument.name.data.employment.address.secondLine
                          style:
                            height: 2.5vw
                            width: 15vw
                            boxSizing: border-box
                    # City
                    - type: view
                      style:
                        width: "auto"
                        height: auto
                        display: inline-block
                      children:
                        - .AddFacilityLabelNoTop:
                          textBoard: 
                            - text: "City"          
                          style:
                        - .AddFacilityTextFieldNoTop:
                          dataKey: apiRequest.profile.patientdocument.name.data.employment.address.city
                          style:
                            height: 2.5vw
                            width: 11vw
                            boxSizing: border-box
                    # County
                    - type: view
                      style:
                        width: "auto"
                        height: auto
                        display: inline-block
                      children:
                        - .AddFacilityLabelNoTop:
                          textBoard: 
                            - text: "County"              
                          style:
                        - .AddFacilityTextFieldNoTop:
                          dataKey: apiRequest.profile.patientdocument.name.data.employment.address.county
                          style:
                            height: 2.5vw
                            width: 11vw
                            boxSizing: border-box
                    # State*
                    - type: view
                      style:
                        width: "auto"
                        height: auto
                        display: inline-block
                        # marginLeft: "0.3vw"
                      children:
                        - .AddFacilityLabelNoTop:
                          textBoard: 
                            - text: "State"        
                          style:
                        - type: select
                          dataKey: apiRequest.profile.patientdocument.name.data.employment.address.state # formData.countryCode : inputValue
                          options:
                            .SelectData.state
                          required: "true"
                          style:
                            width: 11vw
                            height: "2.5vw"
                            backgroundColor: "0xffffff"
                            borderWidth: "2"
                            border:
                              style: "3"
                              color: "0xDEDEDE"  
                            borderRadius: "5px"  
                            boxSizing: border-box
                            marginTop: "0.0045"
                            textIndent: 1em
                    # Zip Code*
                    - type: view
                      style:
                        width: "auto"
                        height: auto
                        display: inline-block
                      children:
                        - .AddFacilityLabelNoTop:
                          textBoard: 
                            - text: "Zip Code"         
                          style:
                        - .AddFacilityTextFieldNoTop:
                          dataKey: apiRequest.profile.patientdocument.name.data.employment.address.zipCode
                          style:
                            height: "2.5vw"
                            width: 11vw
                            boxSizing: border-box
        - type: view
          style:
            width: 80vw
            margin: auto
            marginTop: "0.04"
            display: flex
            flexDirection: column
            # alignItems: center
          children:
            - type: label
              text: "Insurance"
              style:
                fontSize: .Nfont.h8
                color: "0x000000"
                fontFamily: "Arial"
                fontWeight: 700
            - type: view
              style:
                width: 80vw
                height: auto
                display: flex
                flexDirection: column
                margin: auto
                marginTop: 1vw
                # borderBottom: 'solid #DEDEDE'
                # borderWidth: '7'
              children:
                - type: view
                  style:
                    width: 14vw
                    display: flex
                    flexDirection: row
                    justifyContent: space-between
                  children:  
                    - .Label1:
                      text: "Medical Insurance"
                      style: 
                        fontSize: .Nfont.h1
                        fontFamily: "Arial"
                        fontWeight: 600
                        height: 2vw
                        textAlign:
                          y: center  
                    - .Label1:
                      text: "+ Add"
                      style: 
                        fontSize: .Nfont.h1
                        fontFamily: "Arial"
                        fontWeight: 600
                        height: 2vw
                        color: "#2988E6"
                        textDecoration: underline
                        textAlign:
                          y: center  
                      onClick:
                        - actionType: evalObject
                          object:
                            - ..apiRequest.insurance.docCreateReq.id@: ""
                            - ..apiRequest.insurance.docCreateReq.name.data.companyName@: ""
                            - ..apiRequest.insurance.docCreateReq.name.data.planOrMedicalGroup@: ""
                            - ..apiRequest.insurance.docCreateReq.name.data.memberName@: ""
                            - ..apiRequest.insurance.docCreateReq.name.data.memberId@: ""
                            - ..apiRequest.insurance.docCreateReq.name.data.groupNumber@: ""
                            - ..apiRequest.insurance.docCreateReq.name.data.policyNumber@: ""
                            - ..apiRequest.insurance.docCreateReq.name.data.policyHolderName@: ""
                            - ..apiRequest.insurance.docCreateReq.name.data.front_InsuranceCardId@: ""
                            - ..apiRequest.insurance.docCreateReq.name.data.back_InsuranceCardId@: ""
                            - ..apiRequest.insurance.docCreateReq.name.data.gender@: ""
                            - ..apiRequest.insurance.docCreateReq.name.data.relation@: "Self"
                            - ..apiRequest.insurance.docCreateReq.name.data.relationAddress@: ""
                            - ..apiRequest.insurance.docCreateReq.name.data.relationBirth@: ""
                            - ..apiRequest.insurance.docCreateReq.name.data.relationName@: ""
                            - ..formData.relationShow@: "none"
                            - ..formData.setDefault@: false
                            
                              
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: relationTag
                        
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: insuranceTag
                        - actionType: popUp
                          popUpView: insuranceTag
                        
                - type: view
                  style: 
                    width: 80vw
                    marginBottom: 3vw
                  children:
                    - type: list
                      contentType: listObject
                      listObject: ..apiRequest.insurance.docQueryResp.doc
                      iteratorVar: itemObject
                      viewTag: insListTag
                      style:
                        width: 80vw
                        margin: "0"
                        height: auto
                      children:
                        - type: listItem
                          itemObject:
                          style:
                            width: 21vw
                            height: 12.5vw
                            float: left
                            marginRight: 3vw
                            marginTop: 1.5vw
                          children:
                            - type: view
                              style:
                                width: 21vw
                                height: 12.5vw
                                backgroundColor: "0xf4f4f4"
                                borderRadius: "10"
                                fontSize: .Nfont.n2
                                marginTop: "0"
                                top: "0"
                              onClick:
                                - emit: 
                                    dataKey: 
                                      var: itemObject
                                    actions:
                                      - if:
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: =.Global.titleProfile.name.data.insuranceId
                                              string2: $var.id
                                        - ..formData.setDefault@: true
                                        - ..formData.setDefault@: false
                                - actionType: updateObject
                                  dataKey: Global.formData.insurance
                                  dataObject: itemObject
                                - actionType: evalObject
                                  object:
                                    - ..apiRequest.insurance.docCreateReq@: =.Global.formData.insurance
                                - actionType: evalObject
                                  object:
                                    - if: 
                                      - =.builtIn.string.equal:
                                          dataIn:
                                            string1: =..apiRequest.insurance.docCreateReq.name.data.relation
                                            string2: "Self"
                                      - ..formData.relationShow@: "none"
                                      - ..formData.relationShow@: "block"
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: relationTag
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: insuranceTag
                                - actionType: popUp
                                  popUpView: insuranceTag
                              children:
                                - type: label
                                  textBoard:
                                    - text: "·&nbsp;"
                                      fontWeight: "1000"  
                                    - text: "Insurance Company Name"
                                  style:
                                    fontSize: .Nfont.h0
                                    fontFamily: Airal
                                    marginLeft: "0.01"
                                    marginTop: "0.01"
                                - type: label
                                  dataKey: itemObject.name.data.companyName
                                  style:
                                    fontSize: .Nfont.h0
                                    fontFamily: Airal
                                    marginLeft: "0.01"
                                    fontWeight: 600
                                    marginTop: "0.005"
                                    textIndent: 1em
                                - type: label
                                  textBoard:
                                    - text: "·&nbsp;"
                                      fontWeight: "1000"  
                                    - text: "Insurance Plan / Medical Group"
                                  style:
                                    fontSize: .Nfont.h0
                                    fontFamily: Airal
                                    marginLeft: "0.01"
                                    marginTop: "0.005"
                                - type: label
                                  dataKey: itemObject.name.data.planOrMedicalGroup
                                  style:
                                    fontSize: .Nfont.h0
                                    fontFamily: Airal
                                    marginLeft: "0.01"
                                    fontWeight: 600
                                    marginTop: "0.005"
                                    textIndent: 1em
                                - type: label
                                  textBoard:
                                    - text: "·&nbsp;"
                                      fontWeight: "1000"  
                                    - text: "Insured Name"
                                  style:
                                    fontSize: .Nfont.h0
                                    fontFamily: Airal
                                    marginLeft: "0.01"
                                    marginTop: "0.005"
                                - type: label
                                  dataKey: itemObject.name.data.memberName
                                  style:
                                    fontSize: .Nfont.h0
                                    fontFamily: Airal
                                    marginLeft: "0.01"
                                    fontWeight: 600
                                    marginTop: "0.005"
                                    textIndent: 1em
                                - type: view
                                  style:
                                    width: 20vw
                                    height: auto
                                    display: flex
                                    flexDirection: row
                                    justifyContent: space-between
                                    alignItems: center
                                    marginTop: 0.3vw
                                  children:
                                    - type: view
                                      style:
                                        width: 16vw
                                      children:
                                        - type: label
                                          textBoard:
                                            - text: "·&nbsp;"
                                              fontWeight: "1000"  
                                            - text: "Insurance ID #"
                                          style:
                                            marginLeft: "0.01"
                                            fontSize: .Nfont.h0
                                            fontFamily: Airal
                                            marginTop: "0.005"
                                        - type: label
                                          dataKey: itemObject.name.data.memberId
                                          style:
                                            fontWeight: 600
                                            marginLeft: "0.01"
                                            fontSize: .Nfont.h0
                                            fontFamily: Airal
                                            marginTop: "0.005"
                                            textIndent: 1em
                                    - type: image
                                      path:
                                        emit:
                                          dataKey:
                                            var: itemObject
                                          actions:
                                            - if:
                                                - =.builtIn.string.equal:
                                                    dataIn:
                                                      string1: =.Global.titleProfile.name.data.insuranceId
                                                      string2: $var.id
                                                - defalut.svg
                                                - null.png
                                      style:
                                        width: "0.03"
                            - type: view
                              style:
                                zIndex: "100"
                                width: 4vw
                                height: 4vw
                                top: "0"
                                marginLeft: "0.15"
                              children:
                                - type: image
                                  path: delete.svg
                                  style:
                                    width: "0.01"
                                    marginTop: "0.01"
                                    marginLeft: "0.04"
                                  onClick:
                                    - actionType: updateObject
                                      dataKey: PatientProfile.apiRequest.insurance.docDeleteReq
                                      dataObject: itemObject
                                    - actionType: popUp
                                      popUpView: "InsuranceVT"
                                      wait: true
                                    
    - type: popUp
      viewTag: insuranceTag
      style: 
        margin: auto
        backgroundColor: "0x00000040"
        width: "1"
        height: "1"
        top: 0
        left: 0
        zIndex: 100
        position: "fixed"
      children:
        - type: view
          style:
            height: "1"
            width: 36vw
            float: right
            backgroundColor: "0xffffff"
          children:
            - .Pophead:
              style:
                display: flex
                flexDirection: row
                justifyContent: space-between
                alignItems: center
              children:
                - .CreateLabel:
                  text: 'Add medical insurance'
                  style: 
                    marginLeft: 2vw
                - .Close:
                  onClick:
                    - actionType: popUp
                      popUpView: insuranceSave
            - type: view
              style:
                height: "0.92"
                width: 41vw
              children:
                - type: scrollView
                  style:
                    height: "0.8"
                    width: 41vw
                    marginTop: 0
                    backgroundColor: '0xffffff'
                    border: 'solid #DEDEDE'
                    borderWidth: '2'
                  children:
                    - type: view
                      style:
                        width: 20vw
                        fontSize: .Nfont.n2
                        marginLeft: "0.05"
                        marginTop: "0.02"
                      children:
                        - type: view
                          style:
                            height: "auto"
                            margin: "0"
                            display: "inline-block"
                          children:
                            - type: image
                              viewTag: defaultTag
                              path:
                                emit:
                                  actions:
                                    - if:
                                        - =.builtIn.string.equal:
                                            dataIn:
                                              string1: =..formData.setDefault
                                              string2: true
                                        - selectOnblue.svg
                                        - selectBlack.svg
                              style:
                                height: "0.02"
                              onClick:
                                - actionType: evalObject
                                  object:
                                    - if:
                                      - =..formData.setDefault
                                      - ..formData.setDefault@: false
                                      - ..formData.setDefault@: true
                                    - if:
                                      - =..formData.setDefault
                                      - actionType: evalObject
                                        object:
                                          - ..apiRequest.profile.patientdocument.name.data.insuranceId@: =..apiRequest.insurance.docCreateReq.id
                                          - .Global.titleProfile.name.data.insuranceId@: =..apiRequest.insurance.docCreateReq.id
                                      - actionType: evalObject
                                        object:
                                          - ..apiRequest.profile.patientdocument.name.data.insuranceId@: ""
                                          - .Global.titleProfile.name.data.insuranceId@: ""
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: defaultTag
                        - type: label
                          text: Set as default insurance
                          style:
                            display: "inline-block"
                            color: "0x2988e6"
                            marginLeft: "0.02"
                            top: "0"
                            fontWeight: 600
                            fontSize: .Nfont.h0
                    - type: view
                      style:
                        width: 15vw
                        height: "auto"
                        marginTop: "0.015"
                        fontSize: .Nfont.n2
                        marginLeft: "0.05"
                      children:
                        - type: label
                          textBoard:
                            - text: "Insurance Company Name"
                            - text: "&nbsp;*"
                              color: "0xFB5051"  
                          style:
                            width: "auto"
                            color: "0x333333"
                            fontWeight: 600
                            fontSize: .Nfont.h0
                            display: "inline-block"
                    - type: textField
                      placeholder: Enter here
                      dataKey: apiRequest.insurance.docCreateReq.name.data.companyName
                      style:
                        marginLeft: "0.05"
                        textIndent: 1em
                        fontSize: .Nfont.h0
                        color: "#333333"
                        height: "0.045"
                        marginTop: "0.005"
                        width: 32vw
                        border:
                          style: "3"
                        borderWidth: "1"
                        borderColor: "0xD8D8D8"
                        borderRadius: "5"
                    - type: view
                      style:
                        width: 30vw
                        height: "auto"
                        marginTop: "0.015"
                        fontSize: .Nfont.n2
                        marginLeft: "0.05"
                      children:
                        - type: label
                          textBoard:
                            - text: Insurance Plan / Medical Group
                            - text: "&nbsp;*"
                              color: "0xFB5051"  
                          style:
                            width: "auto"
                            color: "0x333333"
                            fontWeight: 600
                            fontSize: .Nfont.h0
                            display: "inline-block"
                    - type: textField
                      placeholder: Enter here
                      dataKey: apiRequest.insurance.docCreateReq.name.data.planOrMedicalGroup
                      style:
                        marginLeft: "0.05"
                        textIndent: 1em
                        fontSize: .Nfont.h0
                        color: "#333333"
                        height: "0.045"
                        marginTop: "0.005"
                        width: 32vw
                        border:
                          style: "3"
                        borderWidth: "1"
                        borderColor: "0xD8D8D8"
                        borderRadius: "5"
                    - type: view
                      style:
                        width: 30vw
                        height: "auto"
                        marginTop: "0.015"
                        fontSize: .Nfont.n2
                        marginLeft: "0.05"
                      children:
                        - type: label
                          textBoard:
                            - text: Insured Name
                            - text: "&nbsp;*"
                              color: "0xFB5051"  
                          style:
                            width: "auto"
                            color: "0x333333"
                            fontWeight: 600
                            fontSize: .Nfont.h0
                            display: "inline-block"
                    - type: textField
                      placeholder: Enter here
                      dataKey: apiRequest.insurance.docCreateReq.name.data.memberName
                      style:
                        marginLeft: "0.05"
                        textIndent: 1em
                        fontSize: .Nfont.h0
                        color: "#333333"
                        height: "0.045"
                        marginTop: "0.005"
                        width: 32vw
                        border:
                          style: "3"
                        borderWidth: "1"
                        borderColor: "0xD8D8D8"
                        borderRadius: "5"
                    - type: view
                      style:
                        width: 30vw
                        height: "auto"
                        marginTop: "0.015"
                        fontSize: .Nfont.n2
                        marginLeft: "0.05"
                      children:
                        - type: label
                          textBoard:
                            - text: "Insurance ID # / Medical Record #"
                            - text: "&nbsp;*"
                              color: "0xFB5051"  
                          style:
                            width: "auto"
                            color: "0x333333"
                            fontWeight: 600
                            fontSize: .Nfont.h0
                            display: "inline-block"
                    - type: textField
                      placeholder: Enter here
                      dataKey: apiRequest.insurance.docCreateReq.name.data.memberId
                      style:
                        marginLeft: "0.05"
                        textIndent: 1em
                        fontSize: .Nfont.h0
                        color: "#333333"
                        height: "0.045"
                        marginTop: "0.005"
                        width: 32vw
                        border:
                          style: "3"
                        borderWidth: "1"
                        borderColor: "0xD8D8D8"
                        borderRadius: "5"
                    - type: view
                      style:
                        width: 30vw
                        height: "auto"
                        marginTop: "0.015"
                        fontSize: .Nfont.n2
                        marginLeft: "0.05"
                      children:
                        - type: label
                          text: "Group #"
                          style:
                            width: 30vw
                            color: "0x333333"
                            fontWeight: 600
                            fontSize: .Nfont.h0
                        - type: textField
                          placeholder: Enter here
                          dataKey: apiRequest.insurance.docCreateReq.name.data.groupNumber
                          style:
                            textIndent: 1em
                            fontSize: .Nfont.h0
                            color: "#333333"
                            height: "0.045"
                            marginTop: "0.005"
                            width: 32vw
                            border:
                              style: "3"
                            borderWidth: "1"
                            borderColor: "0xD8D8D8"
                            borderRadius: "5"
                    - type: view
                      style:
                        width: 30vw
                        height: "auto"
                        marginTop: "0.015"
                        fontSize: .Nfont.n2
                        marginLeft: "0.05"
                      children:
                        - type: label
                          text: Relationship to Patient
                          style:
                            width: 30vw
                            color: "0x333333"
                            fontWeight: 600
                            fontSize: .Nfont.h0
                        - type: select
                          dataKey: apiRequest.insurance.docCreateReq.name.data.relation
                          options:
                            .Relation
                          style:
                            textIndent: 1em
                            fontSize: .Nfont.h0
                            color: "#333333"
                            height: "0.045"
                            marginTop: "0.005"
                            width: 32vw
                            border:
                              style: "3"
                            borderWidth: "1"
                            borderColor: "0xD8D8D8"
                            borderRadius: "5"
                          onChange:
                            - actionType: evalObject
                              object:
                                - if: 
                                  - =.builtIn.string.equal:
                                      dataIn:
                                        string1: =..apiRequest.insurance.docCreateReq.name.data.relation
                                        string2: "Self"
                                  - ..formData.relationShow@: "none"
                                  - ..formData.relationShow@: "block"
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: relationTag
                    - type: view
                      style:
                        width: 30vw
                        height: auto
                        display: ..formData.relationShow
                      viewTag: relationTag
                      children:
                        - type: view
                          style:
                            width: 30vw
                            height: "auto"
                            marginTop: "0.015"
                            fontSize: .Nfont.n2
                            marginLeft: "0.05"
                          children:
                            - type: label
                              text: "1) Name"
                              style:
                                width: 30vw
                                color: "0x333333"
                                fontSize: .Nfont.h0
                            - type: textField
                              placeholder: Enter here
                              dataKey: apiRequest.insurance.docCreateReq.name.data.relationName
                              style:
                                textIndent: 1em
                                fontSize: .Nfont.h0
                                color: "#333333"
                                height: "0.045"
                                marginTop: "0.005"
                                width: 32vw
                                border:
                                  style: "3"
                                borderWidth: "1"
                                borderColor: "0xD8D8D8"
                                borderRadius: "5"
                        - type: view
                          style:
                            width: 30vw
                            height: "auto"
                            marginTop: "0.015"
                            fontSize: .Nfont.n2
                            marginLeft: "0.05"
                          children:
                            - type: label
                              text: "2) Date of Birth"
                              style:
                                width: 30vw
                                color: "0x333333"
                                fontSize: .Nfont.h0
                            - type: textField
                              placeholder: Enter here
                              dataKey: apiRequest.insurance.docCreateReq.name.data.relationBirth
                              style:
                                textIndent: 1em
                                fontSize: .Nfont.h0
                                color: "#333333"
                                height: "0.045"
                                marginTop: "0.005"
                                width: 32vw
                                border:
                                  style: "3"
                                borderWidth: "1"
                                borderColor: "0xD8D8D8"
                                borderRadius: "5"
                        - type: view
                          style:
                            width: 30vw
                            height: "auto"
                            marginTop: "0.015"
                            fontSize: .Nfont.n2
                            marginLeft: "0.05"
                          children:
                            - type: label
                              text: "3) Gender"
                              style:
                                width: 30vw
                                color: "0x333333"
                                fontSize: .Nfont.h0
                            - type: view 
                              style:
                                width: 26vw
                                fontSize: .Nfont.h0
                                fontWeight: 400
                              children:
                                - type: list
                                  contentType: listObject
                                  listObject: ..formDataTemp.gender
                                  iteratorVar: itemObject
                                  viewTag: isGender
                                  style:
                                    marginTop: 1vw
                                    height: 1vw
                                    axis: horizontal
                                  children:
                                    - type: listItem
                                      itemObject: ""
                                      style:
                                        height: 0.8vw
                                        display: flex
                                        flexDirection: row
                                        width: "0.06"
                                      children:
                                        - type: image
                                          style:
                                            height: 0.8vw
                                          path:
                                            emit:
                                              dataKey:
                                                var: itemObject
                                              actions:
                                                - if:
                                                    - =.builtIn.string.equal:
                                                        dataIn:
                                                          string1: =..apiRequest.insurance.docCreateReq.name.data.gender
                                                          string2: $var.value
                                                    - selectOnblue.svg
                                                    - selectBlack.svg
                                          onClick:
                                            - emit:
                                                dataKey:
                                                  var: itemObject
                                                actions:
                                                  - if:
                                                      - =.builtIn.string.equal:
                                                          dataIn:
                                                            string1: =..apiRequest.insurance.docCreateReq.name.data.gender
                                                            string2: $var.value
                                                      - =.builtIn.object.clear:
                                                          dataIn:
                                                            object: =..apiRequest.insurance.docCreateReq.name.data
                                                            key: $var.key
                                                      - =.builtIn.object.set:
                                                          dataIn:
                                                            object: =..apiRequest.insurance.docCreateReq.name.data
                                                            key: $var.key
                                                            value: $var.value
                                            - actionType: builtIn
                                              funcName: redraw
                                              viewTag: isGender
                                        - type: label
                                          dataKey: itemObject.value
                                          style:
                                            marginLeft: 0.3vw
                                            height: 1vw
                                            color: "#333333"
                                            fontSize: .Nfont.h0
                                            lineHeight: 0.8vw
                        - type: view
                          style:
                            width: 30vw
                            height: "auto"
                            marginTop: "0.015"
                            fontSize: .Nfont.n2
                            marginLeft: "0.05"
                          children:
                            - type: label
                              text: "4) Address"
                              style:
                                width: 30vw
                                color: "0x333333"
                                fontSize: .Nfont.h0
                            - type: label
                              text: "Address First Line"
                              style:
                                width: 30vw
                                marginTop: "0.015"
                                color: "0x333333"
                                fontSize: .Nfont.h0
                            - type: textField
                              placeholder: Enter here
                              dataKey: apiRequest.insurance.docCreateReq.name.data.relationAddress.line
                              style:
                                textIndent: 1em
                                fontSize: .Nfont.h0
                                color: "#333333"
                                height: "0.045"
                                marginTop: "0.005"
                                width: 32vw
                                border:
                                  style: "3"
                                borderWidth: "1"
                                borderColor: "0xD8D8D8"
                                borderRadius: "5"
                            - type: label
                              text: "Address Second Line"
                              style:
                                width: 30vw
                                marginTop: "0.015"
                                color: "0x333333"
                                fontSize: .Nfont.h0
                            - type: textField
                              placeholder: Enter here
                              dataKey: apiRequest.insurance.docCreateReq.name.data.relationAddress.secondLine
                              style:
                                textIndent: 1em
                                fontSize: .Nfont.h0
                                color: "#333333"
                                height: "0.045"
                                marginTop: "0.005"
                                width: 32vw
                                border:
                                  style: "3"
                                borderWidth: "1"
                                borderColor: "0xD8D8D8"
                                borderRadius: "5"
                            - type: view
                              style:
                                width: 32vw
                                display: flex
                                justifyContent: space-between
                                marginTop: 0.5vw
                              children:
                                # City
                                - type: view
                                  style:
                                    width: "auto"
                                    height: auto
                                    display: inline-block
                                  children:
                                    - .AddFacilityLabelNoTop:
                                      textBoard: 
                                        - text: "City"          
                                      style:
                                        color: "0x333333"
                                        fontSize: .Nfont.h0
                                    - .AddFacilityTextFieldNoTop:
                                      dataKey: apiRequest.insurance.docCreateReq.name.data.relationAddress.city
                                      style:
                                        height: 2.5vw
                                        width: 7.5vw
                                        boxSizing: border-box
                                        border:
                                          style: "3"
                                        borderWidth: "1"
                                        borderColor: "0xD8D8D8"
                                        borderRadius: "5"
                                        color: "0x333333"
                                        fontSize: .Nfont.h0
                                # County
                                - type: view
                                  style:
                                    width: "auto"
                                    height: auto
                                    display: inline-block
                                  children:
                                    - .AddFacilityLabelNoTop:
                                      textBoard: 
                                        - text: "County"              
                                      style:
                                        color: "0x333333"
                                        fontSize: .Nfont.h0
                                    - .AddFacilityTextFieldNoTop:
                                      dataKey: apiRequest.insurance.docCreateReq.name.data.relationAddress.county
                                      style:
                                        height: 2.5vw
                                        width: 7.5vw
                                        boxSizing: border-box
                                        border:
                                          style: "3"
                                        borderWidth: "1"
                                        borderColor: "0xD8D8D8"
                                        borderRadius: "5"
                                        color: "0x333333"
                                        fontSize: .Nfont.h0
                                # State*
                                - type: view
                                  style:
                                    width: "auto"
                                    height: auto
                                    display: inline-block
                                    # marginLeft: "0.3vw"
                                  children:
                                    - .AddFacilityLabelNoTop:
                                      textBoard: 
                                        - text: "State"        
                                      style:
                                        color: "0x333333"
                                        fontSize: .Nfont.h0
                                    - type: select
                                      dataKey: apiRequest.insurance.docCreateReq.name.data.relationAddress.state 
                                      options:
                                        .SelectData.state
                                      required: "true"
                                      style:
                                        width: 7.5vw
                                        height: "2.5vw"
                                        backgroundColor: "0xffffff"
                                        border:
                                          style: "3"
                                        borderWidth: "2"
                                        borderColor: "0xdedede"
                                        borderRadius: "5px"
                                        boxSizing: border-box
                                        marginTop: "0.0045"
                                        color: "0x333333"
                                        fontSize: .Nfont.h0
                                        textIndent: 1em
                                # Zip Code*
                                - type: view
                                  style:
                                    width: "auto"
                                    height: auto
                                    display: inline-block
                                  children:
                                    - .AddFacilityLabelNoTop:
                                      textBoard: 
                                        - text: "Zip Code"         
                                      style:
                                        color: "0x333333"
                                        fontSize: .Nfont.h0
                                    - .AddFacilityTextFieldNoTop:
                                      dataKey: apiRequest.insurance.docCreateReq.name.data.relationAddress.zipCode
                                      style:
                                        height: "2.5vw"
                                        width: 7.5vw
                                        boxSizing: border-box
                                        border:
                                          style: "3"
                                        borderWidth: "1"
                                        borderColor: "0xD8D8D8"
                                        borderRadius: "5"
                                        color: "0x333333"
                                        fontSize: .Nfont.h0
                    
                    - type: view
                      style:
                        width: 32vw
                        height: "auto"
                        marginLeft: "0.05"
                        fontSize: .Nfont.h0
                        marginTop: "0.02"
                      children:
                        - type: label
                          textBoard:
                            - text: "Please upload your medical insurance card"
                            - text: "&nbsp;*"
                              color: "0xFB5051"  
                          style:
                            color: "0x333333"
                            fontWeight: 600
                            width: "0.4"
                            lineHeight: "4.5vh"
                            display: "inline-block"
                            height: "0.045"
                    
                    - type: view
                      style:
                        width: 20vw
                        display: flex
                        flexDirection: row
                        justifyContent: space-between
                        alignItems: center
                      children: 
                        - type: view
                          viewTag: front_InsuranceImage
                          style:
                            marginLeft: "0.05"
                            height: "auto"
                          children:
                            - type: image
                              path: upload.svg
                              path=func: =.builtIn.utils.prepareDocToPath
                              dataKey: apiRequest.insurance.docCreateReq.name.data.front_InsuranceCardId
                              style:
                                width: "0.1"
                                height: "0.1"
                              onClick:
                                - actionType: evalObject
                                  object:
                                    - if:
                                      - =.builtIn.string.equal:
                                          dataIn:
                                            string1: =..apiRequest.insurance.docCreateReq.name.data.front_InsuranceCardId
                                            string2: ""
                                      - continue
                                      - actionType: popUp
                                        popUpView: front_InsuranceCard_OverWritePopup
                                        wait: true
                                # 上传图片处理
                                - actionType: openPhotoLibrary
                                  dataKey: PatientProfile.apiRequest.front_insuranceImage.docCreateReq.name.data
                                  dataObject: BLOB
                                - actionType: popUp
                                  popUpView: upLoad
                                - actionType: evalObject
                                  object:
                                    - =..apiRequest.front_insuranceImage.docAPI.store: ""
                                    - ..apiRequest.insurance.docCreateReq.name.data.front_InsuranceCardId@: =.Global.formData.front_InsuranceCard.doc.id
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: front_InsuranceImage
                                - actionType: popUpDismiss
                                  popUpView: upLoad
                            - type: label
                              text: "Front of Insurance Card"
                              style:
                                color: "0x333333"
                                fontWeight: 600
                                width: "0.12"
                                lineHeight: "4.5vh"
                                height: "0.045"
                                textAlign:
                                  x: center
                        - type: view
                          viewTag: back_InsuranceImage
                          style:
                            width: 32vw
                            marginLeft: "0.05"
                            height: "auto"
                          children:
                            - type: image
                              path: upload.svg
                              path=func: =.builtIn.utils.prepareDocToPath
                              dataKey: apiRequest.insurance.docCreateReq.name.data.back_InsuranceCardId
                              style:
                                width: "0.1"
                                height: "0.1"
                              onClick:
                                - actionType: evalObject
                                  object:
                                    - if:
                                      - =.builtIn.string.equal:
                                          dataIn:
                                            string1: =..apiRequest.insurance.docCreateReq.name.data.back_InsuranceCardId
                                            string2: ""
                                      - continue
                                      - actionType: popUp
                                        popUpView: back_InsuranceCard_OverWritePopup
                                        wait: true
                                # 上传图片处理
                                - actionType: openPhotoLibrary
                                  dataKey: PatientProfile.apiRequest.back_insuranceImage.docCreateReq.name.data
                                  dataObject: BLOB
                                - actionType: popUp
                                  popUpView: upLoad
                                - actionType: evalObject
                                  object:
                                    - =..apiRequest.back_insuranceImage.docAPI.store: ""
                                    - ..apiRequest.insurance.docCreateReq.name.data.back_InsuranceCardId@: =.Global.formData.back_InsuranceCard.doc.id
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: back_InsuranceImage
                                - actionType: popUpDismiss
                                  popUpView: upLoad
                            - type: label
                              text: "Back of Insurance Card"
                              style:
                                color: "0x333333"
                                fontWeight: 600
                                width: "0.1"
                                lineHeight: "4.5vh"
                                height: "0.045"
                                textAlign:
                                  x: center
                        
                - type: view
                  style:
                    width: 41.2vw
                    height: "5.8vw"
                    border: 'solid #DEDEDE'
                    borderWidth: '2'
                  children:
                    - type: button
                      text: Confirm
                      style: 
                        width: "9vw"
                        height: "2.5vw"
                        marginTop: 1.5vw
                        marginLeft: "28vw"
                        borderRadius: "5px"
                        color: "0xffffff"
                        fontSize: .Nfont.h1
                        backgroundColor: "#2988E6"
                        textAlign:
                          x: center
                          y: center
                      onClick: 
                        - actionType: evalObject
                          object:
                            - if:
                              - =.builtIn.string.judgeFillinAll:
                                  dataIn:
                                    - =..apiRequest.insurance.docCreateReq.name.data.companyName
                                    - =..apiRequest.insurance.docCreateReq.name.data.planOrMedicalGroup
                                    - =..apiRequest.insurance.docCreateReq.name.data.memberName
                                    - =..apiRequest.insurance.docCreateReq.name.data.memberId
                                    - =..apiRequest.insurance.docCreateReq.name.data.front_InsuranceCardId
                                    - =..apiRequest.insurance.docCreateReq.name.data.back_InsuranceCardId
                              - =.builtIn.array.judgeKeyAndReturnValue:         
                                  dataIn:
                                    objArr: 
                                      - key: "Insurance Company Name"
                                        value: =..apiRequest.insurance.docCreateReq.name.data.companyName
                                      - key: "Insurance Plan / Medical Group"
                                        value: =..apiRequest.insurance.docCreateReq.name.data.planOrMedicalGroup
                                      - key: "Insured Name"
                                        value: =..apiRequest.insurance.docCreateReq.name.data.memberName
                                      - key: "Insurance ID # / Medical Record #"
                                        value: =..apiRequest.insurance.docCreateReq.name.data.memberId
                                      - key: "Front of Insurance Card"
                                        value: =..apiRequest.insurance.docCreateReq.name.data.front_InsuranceCardId                   
                                      - key: "Back of Insurance Card"
                                        value: =..apiRequest.insurance.docCreateReq.name.data.back_InsuranceCardId                               
                                    pathKey: "key"
                                    pathValue: "value"
                                    valueArr: ["","Select"]
                                  dataOut:  PatientProfile.formData.errorArrIns
                              - continue   
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: fillCheck
                        - actionType: evalObject
                          object:
                            - if: 
                              - =.builtIn.string.judgeFillinAll:
                                  dataIn:
                                    - =..apiRequest.insurance.docCreateReq.name.data.companyName
                                    - =..apiRequest.insurance.docCreateReq.name.data.planOrMedicalGroup
                                    - =..apiRequest.insurance.docCreateReq.name.data.memberName
                                    - =..apiRequest.insurance.docCreateReq.name.data.memberId
                                    - =..apiRequest.insurance.docCreateReq.name.data.front_InsuranceCardId
                                    - =..apiRequest.insurance.docCreateReq.name.data.back_InsuranceCardId
                              - actionType: popUp
                                popUpView: fillCheck
                                wait: true
                              - continue
                        - actionType: evalObject
                          object:
                            - ..apiRequest.insurance.docCreateReq.fid@: =.Global.titleProfile.id
                            - if: 
                              - =.builtIn.string.equal:
                                  dataIn:
                                    string1: ""
                                    string2: =..apiRequest.insurance.docCreateReq.id
                              - continue
                              - =.builtIn.array.removeByName:
                                  dataIn:
                                    object: =.Global.selfMedicalLicense
                                    key: id
                                    name: =..apiRequest.insurance.docCreateReq.id
                            - =.builtIn.string.concat:
                                dataIn:
                                  - =..apiRequest.insurance.docCreateReq.name.data.companyName
                                  - " - "
                                  - =..apiRequest.insurance.docCreateReq.name.data.memberId
                                dataOut: PatientProfile.apiRequest.insurance.docCreateReq.name.data.insuranceInfo
                            - =..apiRequest.insurance.docAPI.store: ""
                            - =.builtIn.array.add:
                                dataIn:
                                  object: =.Global.selfMedicalLicense
                                  value: =..apiRequest.insurance.docCreateResp.doc
                            - ..apiRequest.insurance.docQueryResp.doc@: =.Global.selfMedicalLicense
                            - if: 
                              - =.Global.FirstIns
                              - actionType: evalObject
                                object:
                                  - ..apiRequest.profile.patientdocument.name.data.insuranceId@: =..apiRequest.insurance.docQueryResp.doc.0.id
                                  - .Global.titleProfile.name.data.insuranceId@: =..apiRequest.insurance.docQueryResp.doc.0.id
                              - continue
                            - .Global.FirstIns@: false
                            - .Global.newCareUser@: false
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: insListTag
                        - actionType: popUpDismiss
                          popUpView: insuranceTag
                            
                          
    - type: popUp
      viewTag: birthDay
      style:
        top: "0"
        backgroundColor: "0x00000040"
        height: "1"
        width: "1"
        zIndex: "1000"
        left: "0.052"
        position: fixed
      children:
        - .BaseComponents.calendar:
          children:
            - .BaseComponents.calendarHeader:
            - .BaseComponents.weekView:
            - .BaseComponents.dayView:
            - .BaseComponents.addButton:
              onClick:
                - actionType: evalObject
                  object:
                    - ..apiRequest.profile.patientdocument.name.data.basicInfo.dateOfBirth@: =.BaseComponents.calendarDate.todayDate
                - actionType: builtIn
                  funcName: redraw
                  viewTag: showBirth
                - actionType: popUpDismiss
                  popUpView: birthDay
    - .WaitView:
      style:
        width: "1"
        height: "1"
        position: fixed
        zIndex: 100
        margin: auto
        left: none
        marginLeft: 5vw
      viewTag: upLoad     
    # patient文档必填
    - type: popUp
      msg1: Warning
      msg2: Please complete the required items.
      viewTag: errorView
      onClick: 
        - actionType: popUpDismiss
          popUpView: __.viewTag
      style: 
        width: "1"
        height: '1'
        position: fixed
        zIndex: 100
        margin: auto
        right: 0
        top: 0
        backgroundColor: "0x00000033"
      children: 
        - type: view
          style: 
            left: "0.38"
            width: "0.28"
            top: "0.3"
            height: "auto"
            boxShadow: "0px 2px 2px 1px #b7b7b7"
            borderRadius: "5"
            backgroundColor: "0xffffff"
          children: 
            - type: view
              style:
                marginTop: "0"
                left: "0"
                width: "0.28"
                height: "0.013"
                backgroundColor: "0xe24445"
                border-top-left-radius: "5px"
                border-top-right-radius: "5px"
            - type: view
              style: 
                marginTop: "0"
                width: "0.28"
                left: "0"
                height: "auto"
              children: 
                - type: image
                  path: warningRed.svg
                  style: 
                    left: "0.12"
                    width: "0.04"
                    marginTop: "0.04"
                - type: label
                  text: ____.msg1
                  style:
                    left: "0.05"
                    width: "0.18"
                    fontSize: .Nfont.h1
                    color: "0x171725"
                    fontWeight: "500"
                    marginTop: "0.02"
                    textAlign: 
                      x: center
                - type: label
                  text: ____.msg2
                  style:
                    left: "0.02"
                    width: "0.24"
                    marginTop: "0.02"
                    fontSize: .Nfont.h0_0
                    color: "0x333333"
                    textAlign: 
                      x: center
                - type: label
                  text: =..formData.errorArr
                  style:
                    left: "0.02"
                    width: "0.24"
                    marginTop: "0.02"
                    marginBottom: "0.03"
                    fontSize: .Nfont.h0_0
                    color: "0x999999"
                    textAlign: 
                      x: center   
    - type: popUp
      msg: Delete this medical insurance?
      viewTag: InsuranceVT
      style: 
        width: "1"
        height: "1"
        position: fixed
        zIndex: 100
        margin: auto
        left: none
        backgroundColor: "0x00000040"
        marginLeft: 5vw
      children: 
        - .BaseJudgeInnerView: 
          children: 
            - .BaseJudgeCancelImg: 
            - .BaseJudgeTxt: 
            - .BaseJudgeButtonView: 
              children: 
                - .BaseJudgeButtonNo:   
                  style:
                    textDecoration: underline
                  onClick: 
                    - actionType: popUpDismiss
                      popUpView: InsuranceVT
                - .BaseJudgeButtonYes:  # 可以重写   
                  style:
                    width: "5.5vw"
                    height: "2.2vw"
                    backgroundColor: "#2988E6"
                    border: none
                    borderRadius: 5px
                  onClick: 
                    - actionType: evalObject
                      object:
                        - =..apiRequest.insurance.docAPI.delete: ""
                    - actionType: evalObject
                      object:
                        - =.builtIn.array.removeByName:
                            dataIn:
                              object: =.Global.selfMedicalLicense
                              key: id
                              name: =..apiRequest.insurance.docDeleteReq.id
                        - ..apiRequest.insurance.docQueryResp.doc@: =.Global.selfMedicalLicense
                        # after delete default insurance, the default label will take to the insurance which ctime is the earliest, if it is exist. If not, take the default insurance id to empty
                        - if:
                            - =.Global.selfMedicalLicense.0
                            - actionType: evalObject
                              object:
                                - ..apiRequest.profile.patientdocument.name.data.insuranceId@: =.Global.selfMedicalLicense.0.id
                                - .Global.titleProfile.name.data.insuranceId@: =.Global.selfMedicalLicense.0.id
                            - actionType: evalObject
                              object:
                                - ..apiRequest.profile.patientdocument.name.data.insuranceId@: ""
                                - .Global.titleProfile.name.data.insuranceId@: ""
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: insListTag
                    - actionType: popUpDismiss
                      popUpView: InsuranceVT
                    - actionType: popUp
                      popUpView: successView
                      wait: 1000
    - type: popUp
      msg: Save your changes?
      viewTag: insuranceSave
      style: 
        width: "1"
        height: "1"
        position: fixed
        zIndex: 100
        margin: auto
        left: none
        backgroundColor: "0x00000040"
        marginLeft: 5vw
      children: 
        - .BaseJudgeInnerView: 
          children: 
            - .BaseJudgeCancelImg: 
            - .BaseJudgeTxt: 
            - .BaseJudgeButtonView: 
              children: 
                - .BaseJudgeButtonNo:  
                  style:
                    textDecoration: underline
                  onClick: 
                    - actionType: popUpDismiss
                      popUpView: insuranceSave
                    - actionType: popUpDismiss
                      popUpView: insuranceTag
                - .BaseJudgeButtonYes:   
                  style:
                    width: "5.5vw"
                    height: "2.2vw"
                    backgroundColor: "#2988E6"
                    border: none
                    borderRadius: 5px
                  onClick: 
                    - actionType: popUpDismiss
                      popUpView: insuranceSave
                    - actionType: evalObject
                      object:
                        - if:
                          - =.builtIn.string.judgeFillinAll:
                              dataIn:
                                - =..apiRequest.insurance.docCreateReq.name.data.companyName
                                - =..apiRequest.insurance.docCreateReq.name.data.planOrMedicalGroup
                                - =..apiRequest.insurance.docCreateReq.name.data.memberName
                                - =..apiRequest.insurance.docCreateReq.name.data.memberId
                                - =..apiRequest.insurance.docCreateReq.name.data.front_InsuranceCardId
                                - =..apiRequest.insurance.docCreateReq.name.data.back_InsuranceCardId
                          - =.builtIn.array.judgeKeyAndReturnValue:         
                              dataIn:
                                objArr: 
                                  - key: "Insurance Company Name"
                                    value: =..apiRequest.insurance.docCreateReq.name.data.companyName
                                  - key: "Insurance Plan / Medical Group"
                                    value: =..apiRequest.insurance.docCreateReq.name.data.planOrMedicalGroup
                                  - key: "Insured Name"
                                    value: =..apiRequest.insurance.docCreateReq.name.data.memberName
                                  - key: "Insurance ID # / Medical Record #"
                                    value: =..apiRequest.insurance.docCreateReq.name.data.memberId
                                  - key: "Front of Insurance Card"
                                    value: =..apiRequest.insurance.docCreateReq.name.data.front_InsuranceCardId                   
                                  - key: "Back of Insurance Card"
                                    value: =..apiRequest.insurance.docCreateReq.name.data.back_InsuranceCardId                               
                                pathKey: "key"
                                pathValue: "value"
                                valueArr: ["","Select"]
                              dataOut:  PatientProfile.formData.errorArrIns
                          - continue   
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: fillCheck
                    - actionType: evalObject
                      object:
                        - if: 
                          - =.builtIn.string.judgeFillinAll:
                              dataIn:
                                - =..apiRequest.insurance.docCreateReq.name.data.companyName
                                - =..apiRequest.insurance.docCreateReq.name.data.planOrMedicalGroup
                                - =..apiRequest.insurance.docCreateReq.name.data.memberName
                                - =..apiRequest.insurance.docCreateReq.name.data.memberId
                                - =..apiRequest.insurance.docCreateReq.name.data.front_InsuranceCardId
                                - =..apiRequest.insurance.docCreateReq.name.data.back_InsuranceCardId
                          - actionType: popUp
                            popUpView: fillCheck
                            wait: true
                          - continue
                    - actionType: evalObject
                      object:
                        - ..apiRequest.insurance.docCreateReq.fid@: =.Global.titleProfile.id
                        - if: 
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: ""
                                string2: =..apiRequest.insurance.docCreateReq.id
                          - continue
                          - =.builtIn.array.removeByName:
                              dataIn:
                                object: =.Global.selfMedicalLicense
                                key: id
                                name: =..apiRequest.insurance.docCreateReq.id
                        - =.builtIn.string.concat:
                            dataIn:
                              - =..apiRequest.insurance.docCreateReq.name.data.companyName
                              - " - "
                              - =..apiRequest.insurance.docCreateReq.name.data.memberId
                            dataOut: PatientProfile.apiRequest.insurance.docCreateReq.name.data.insuranceInfo
                        - =..apiRequest.insurance.docAPI.store: ""
                        - =.builtIn.array.add:
                            dataIn:
                              object: =.Global.selfMedicalLicense
                              value: =..apiRequest.insurance.docCreateResp.doc
                        - ..apiRequest.insurance.docQueryResp.doc@: =.Global.selfMedicalLicense
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: insListTag
                    - actionType: popUpDismiss
                      popUpView: insuranceTag
    
    

    - type: popUp
      msg: "Are you sure you want to overwrite the original file?"
      viewTag: front_InsuranceCard_OverWritePopup
      style: 
        width: "1"
        height: "1"
        position: fixed
        zIndex: 100
        margin: auto
        left: none
        backgroundColor: "0x00000040"
        marginLeft: 5vw
      children: 
        - .BaseJudgeInnerView: 
          children: 
            - .BaseJudgeCancelImg: 
            - .BaseJudgeTxt: 
            - .BaseJudgeButtonView: 
              children: 
                - .BaseJudgeButtonNo:  
                  style:
                    textDecoration: underline
                  onClick: 
                    - actionType: popUpDismiss
                      popUpView: front_InsuranceCard_OverWritePopup
                - .BaseJudgeButtonYes:   
                  style:
                    width: "5.5vw"
                    height: "2.2vw"
                    backgroundColor: "#2988E6"
                    border: none
                    borderRadius: 5px
                  onClick: 
                    - actionType: popUpDismiss
                      popUpView: front_InsuranceCard_OverWritePopup
                    - actionType: openPhotoLibrary
                      dataKey: PatientProfile.apiRequest.front_insuranceImage.docCreateReq.name.data
                      dataObject: BLOB
                    - actionType: popUp
                      popUpView: upLoad
                    - actionType: evalObject
                      object:
                        - =..apiRequest.front_insuranceImage.docAPI.store: ""
                        - ..apiRequest.insurance.docCreateReq.name.data.front_InsuranceCardId@: =.Global.formData.front_InsuranceCard.doc.id
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: front_InsuranceImage
                    - actionType: popUpDismiss
                      popUpView: upLoad
                    - actionType: popUp
                      popUpView: successView
                      wait: 1000

    - type: popUp
      msg: "Are you sure you want to overwrite the original file?"
      viewTag: back_InsuranceCard_OverWritePopup
      style: 
        width: "1"
        height: "1"
        position: fixed
        zIndex: 100
        margin: auto
        left: none
        backgroundColor: "0x00000040"
        marginLeft: 5vw
      children: 
        - .BaseJudgeInnerView: 
          children: 
            - .BaseJudgeCancelImg: 
            - .BaseJudgeTxt: 
            - .BaseJudgeButtonView: 
              children: 
                - .BaseJudgeButtonNo:
                  style:
                    textDecoration: underline  
                  onClick: 
                    - actionType: popUpDismiss
                      popUpView: back_InsuranceCard_OverWritePopup
                - .BaseJudgeButtonYes:  
                  style:
                    width: "5.5vw"
                    height: "2.2vw"
                    backgroundColor: "#2988E6"
                    border: none
                    borderRadius: 5px 
                  onClick: 
                    - actionType: popUpDismiss
                      popUpView: back_InsuranceCard_OverWritePopup
                    - actionType: openPhotoLibrary
                      dataKey: PatientProfile.apiRequest.back_insuranceImage.docCreateReq.name.data
                      dataObject: BLOB
                    - actionType: popUp
                      popUpView: upLoad
                    - actionType: evalObject
                      object:
                        - =..apiRequest.back_insuranceImage.docAPI.store: ""
                        - ..apiRequest.insurance.docCreateReq.name.data.back_InsuranceCardId@: =.Global.formData.back_InsuranceCard.doc.id
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: back_InsuranceImage
                    - actionType: popUpDismiss
                      popUpView: upLoad
                    - actionType: popUp
                      popUpView: successView
                      wait: 1000               

    - type: popUp
      msg1: Warning
      msg2: Please complete the required items.
      viewTag: fillCheck
      onClick: 
        - actionType: popUpDismiss
          popUpView: __.viewTag
      style: 
        width: "1"
        height: '1'
        position: fixed
        zIndex: 100
        margin: auto
        right: 0
        top: 0
        backgroundColor: "0x00000033"
      children: 
        - type: view
          style: 
            left: "0.38"
            width: "0.28"
            top: "0.3"
            height: "auto"
            boxShadow: "0px 2px 2px 1px #b7b7b7"
            borderRadius: "5"
            backgroundColor: "0xffffff"
          children: 
            - type: view
              style:
                marginTop: "0"
                left: "0"
                width: "0.28"
                height: "0.013"
                backgroundColor: "0xe24445"
                border-top-left-radius: "5px"
                border-top-right-radius: "5px"
            - type: view
              style: 
                marginTop: "0"
                width: "0.28"
                left: "0"
                height: "auto"
              children: 
                - type: image
                  path: warningRed.svg
                  style: 
                    left: "0.12"
                    width: "0.04"
                    marginTop: "0.04"
                - type: label
                  text: ____.msg1
                  style:
                    left: "0.05"
                    width: "0.18"
                    fontSize: .Nfont.h1
                    color: "0x171725"
                    fontWeight: "500"
                    marginTop: "0.02"
                    textAlign: 
                      x: center
                - type: label
                  text: ____.msg2
                  style:
                    left: "0.02"
                    width: "0.24"
                    marginTop: "0.02"
                    fontSize: .Nfont.h0_0
                    color: "0x333333"
                    textAlign: 
                      x: center
                - type: label
                  text: =..formData.errorArrIns
                  style:
                    left: "0.02"
                    width: "0.24"
                    marginTop: "0.02"
                    marginBottom: "0.03"
                    fontSize: .Nfont.h0_0
                    color: "0x999999"
                    textAlign: 
                      x: center 

    - .BaseSuccessfulView:
      viewTag: successView
      msg: "Successfully!"
      style:
        width: "1"
        height: "1"
        position: fixed
        zIndex: 100
        margin: auto
        left: none
        marginLeft: 5vw                