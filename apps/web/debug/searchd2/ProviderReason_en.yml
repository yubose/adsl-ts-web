ProviderReason:
  title: Reason/Fee
  pageNumber: 
  init: #Page initialization
    - ..formData.providerInfo@: =.Global.MyProfile
    - ..apiRequest.connection.edgeIn.id.0@: =.Global.currentFacility.id
    - ..apiRequest.connection.edgeIn.id.1@: =..formData.providerInfo.bsig
    - =..apiRequest.connection.edgeAPI.get: ""
    - if:
      - =..apiRequest.connection.edgeResp.edge.0.id
      - actionType: evalObject
        object:  
          - ..apiRequest.visitReason.docIn.id@: =..apiRequest.connection.edgeResp.edge.0.id
          - ..apiRequest.visitReason.docStore.eid@: =..apiRequest.connection.edgeResp.edge.0.id
          - ..apiRequest.visitReason.docStore.reid@: =..apiRequest.connection.edgeResp.edge.0.id
          - =..apiRequest.visitReason.docAPI.get: ""
      - continue
    - if: 
      - =..apiRequest.visitReason.docResp.doc.0
      - actionType: evalObject
        object:          
          - ..apiRequest.visitReason.docStore@: =..apiRequest.visitReason.docResp.doc.0
          - ..formData.telemedicine@: =..apiRequest.visitReason.docResp.doc.0.name.data.reasonForVisit.Telemedicine
          - ..formData.officeVisits@: =..apiRequest.visitReason.docResp.doc.0.name.data.reasonForVisit.OfficeVisits
      - continue
  formData: #Input data here
    fee: ""  # 未拼$的fee
    btnColor: "0xc1c1c1"  # 填完reason和duration按钮变色
    editFrom: ""    # 判断是从Telemedicine(0) 点击还是 Office(1)
    newReason: []   # 弹框上的reason
    providerInfo: ""
    telemedicine: []
    officeVisits: []
    currentFee: ""
    reasonForVisit: 
      reason: ""
      duration: "5 min"
      fee: ""
      document: []
    attachedFilesDocument:
      document: []
  formDataTemp: #Input data temp here, datatemp should not mix with formData
    document:
      - title: New Patient Forms
        pageName: NewPatFormPreviewPage1
      - title: COVID-19 Testing Consent - New Patient
        pageName: Cov19TestNewPatPreviewPage1
      - title: COVID-19 Testing Consent Form
        pageName: Cov19TestFormPreviewPage1
      - title: Pifzer-BioNTech Vaccine - First Dose
        pageName: PifzerVaccineFirDosePreviewPage1
      - title: Pifzer-BioNTech Vaccine - Second Dose
        pageName: PifzerVaccineSecDosePreviewPage1
      - title: Moderna Vaccine Form - First Dose
        pageName: ModernaVaccineFirDosePreviewPage1
      - title: Moderna Vaccine Form - Second Dose
        pageName: ModernaVaccineSecDosePreviewPage1  
      - title: Flu Vaccination Consent Form
        pageName: FluVaccinationConsentFormEnglishPreviewPage1
    TypeName:
      - userTypeName: Reason for Visit
        borderColor: "0x003d68"
        fontWeight: "500"
      - userTypeName: Availability Setting
        borderColor: "0xf4f4f4"
        fontWeight: "400"
  apiRequest: #Input data request here
    # 获取当前provider和facility之间的10002
    connection: 
      edgeResp: ""
      edgeIn: 
        id: []
        xfname: Bvid,Evid
        type: 10002
        maxcount: "1"
        obfname: ctime    
      edgeAPI: 
        get: 
          api: re
          dataIn: apiRequest.connection.edgeIn
          dataOut: ProviderReason.apiRequest.connection.edgeResp
    visitReason: 
      docStoreResp: ""
      docStore: 
        name: 
          data: 
            reasonForVisit: 
              Telemedicine: []
              OfficeVisits: []
        type: .DocType.VisitReason
        eid: ""
        reid: "" 
      docIn: 
        type: .DocType.VisitReason
        id: 
        xfname: eid
        obfname: "mtime"
        _nonce: =.Global._nonce
      docResp: ""
      docAPI: 
        get: 
          api: rd
          dataIn: apiRequest.visitReason.docIn
          dataOut: ProviderReason.apiRequest.visitReason.docResp
        store: 
          api: cd 
          dataIn: apiRequest.visitReason.docStore
          dataOut: ProviderReason.apiRequest.visitReason.docStoreResp
  style: #Input style fragment here
    confirmBtnView:    # 弹框底部的VIEW
      type: view
      style:
        height: '0.1'
        width: '0.4'
        top: '0.9'
        left: "0.6"
        boxSizing: border-box 
        # borderTop: "1px solid #333333" 
        backgroundColor: "0xffffff"
        boxShadow: "0px -2px 3px -2px #cFcFcF"
        display: flex
        alignItems: center
    confirmButton:     # 弹框底部的按钮
      type: button
      text: Confirm
      style:
        color: "0xffffff"
        left: "0.28"
        width: "0.07"
        height: "0.037"
        boxSizing: border-box
        fontSize: .Nfont.n6
        fontFamily: "Roboto"
        border: 
          style: "3"
        borderWidth: "1"
        borderColor: "0x005795"
        borderRadius: "3"
        backgroundColor: "0x005795"
        textAlign:
          x: center
          y: center
  components:
    - type: view
      style:
        width: "1"
        height: "1"
        margin: auto    
      children:
        - type: view
          style:
            background-image: 'linear-gradient(#0063a8, #004371)'   
            height: "1"
            width: "0.16"
          children:
            - .aitLogo:
            - .Menu:
        - .TopBar: 
        - .ViewRow:
          style:
            backgroundColor: "#f4f8fa"
            width: "0.84"
            height: "0.92"
            left: '0.16'
            top: "0.08"
            alignItems: flex-start
          children:
            - type: view
              style:
                backgroundColor: "0xffffff"
                width: "0.8"
                height: "0.85"
                marginTop: "0.04"
                borderRadius: "5"
                border: 
                  style: "3"
                borderColor: "0xffffff"
                boxSizing: border-box
              children:
                - type: label
                  text: "Availability Profile"
                  style:
                    color: "0x000000"
                    fontWeight: "600"
                    fontSize: .Nfont.h3
                    top: "0.03"
                    marginLeft: "0.028"
                - type: view
                  style:
                    width: "0.74"
                    height: "0.06"
                    marginTop: "0.11"
                    marginLeft: "0.03"
                    border: 
                      style: "2"
                    borderWidth: "2px"
                    boxSizing: border-box
                    borderColor: "0x00000020"
                    display: flex
                    justifyContent: flex-start
                    alignItems: center
                  children:
                    - type: list
                      viewTag: listNameData
                      contentType: listObject
                      listObject: ..formDataTemp.TypeName
                      iteratorVar: itemObject
                      style:
                        width: '0.2'
                        justifyContent: center
                        alignItems: center
                        margin: '0'
                        axis: horizontal
                        height: auto
                      children:
                        - type: listItem
                          itemObject: 
                          style:
                            display: flex
                            justifyContent: center
                            alignItems: center
                            width: '0.1'
                            height: '0.06'
                            border: 
                              style: "2"
                            borderWidth: "4px"
                            boxSizing: border-box
                            borderColor: itemObject.borderColor
                          children:
                            - type: label
                              dataKey: itemObject.userTypeName
                              style:
                                color: "0x003d68"
                                fontSize: .Nfont.n6
                                fontWeight: itemObject.fontWeight
                          onClick: 
                            - emit: 
                                dataKey: 
                                  var: itemObject
                                actions:
                                  - if: 
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: $var.userTypeName
                                          string2: "Reason for Visit"
                                    - goto: ProviderReason
                                    - continue
                                  - if: 
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: $var.userTypeName
                                          string2: "Availability Setting"
                                    - goto: ProviderSchduleSetting
                                    - continue
            
                - type: view
                  viewTag: reasonAllTag
                  style:
                    width: "0.82"
                    height: "0.53"
                    marginTop: "0.04"
                  children: 
                    # telemedicine 表格
                    - type: view
                      style:
                        width: "0.36"
                        height: "0.53"
                        left: "0.028"
                        marginTop: "0.01"
                        border:
                          style: "1"
                        borderWidth: "2"
                        border-top-left-radius: "5px"
                        border-top-right-radius: "5px"
                        display: inline-block
                      children:
                        - type: view
                          style:
                            width: "0.36"
                            height: "0.047"
                            backgroundColor: "0x005795"
                            border-top-left-radius: "5px"
                            border-top-right-radius: "5px"
                            boxSizing: border-box
                            display: flex
                            justifyContent: "space-between"
                            alignItems: center
                          children:
                            - type: label
                              text: Telemedicine
                              dataKey: 
                              style:
                                color: "0xffffff"
                                fontWeight: "600"
                                left: "0.015"
                                fontSize: .Nfont.n5_2
                            - type: label
                              text: Edit
                              onClick: 
                                - actionType: evalObject
                                  object:
                                    - if:
                                      - =.Global.currentFacility.id
                                      - continue
                                      - actionType: popUp
                                        popUpView: errorTag
                                        wait: true 
                                    - ..formData.newReason@: =..formData.telemedicine
                                    - ..formData.editFrom@: "0"
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: newReasonTag
                                - actionType: popUp
                                  popUpView: reasonVisitTag
                              dataKey: 
                              style:
                                textDecoration: underline
                                color: "0xffffff"
                                fontWeight: "700"
                                fontSize: .Nfont.n5_2
                                marginRight: "0.01"
                        - type: view
                          style:
                            width: "0.36"
                            height: "0.038"
                            backgroundColor: "0xeff0f2"
                          children:
                            - type: label
                              text: Reason for Visit
                              dataKey: 
                              style:
                                display: inline-block
                                fontSize: .Nfont.n6_1
                                fontWeight: "600"
                                left: "0.018"
                                width: "0.073"
                                height: "0.038"
                                lineHeight: "3.8vh"
                            - type: label
                              text: Duration
                              dataKey: 
                              style:
                                display: inline-block
                                fontSize: .Nfont.n6_1
                                fontWeight: "600"
                                left: "0.02"
                                width: "0.046"
                                height: "0.038"
                                lineHeight: "3.8vh"
                            # - type: label
                            #   text: Fee
                            #   dataKey: 
                            #   style:
                            #     display: inline-block
                            #     fontSize: .Nfont.n6_1
                            #     fontWeight: "600"
                            #     left: "0.02"
                            #     width: "0.046"
                            #     height: "0.038"
                            #     lineHeight: "3.8vh"
                            - type: label
                              text: Attached Files
                              dataKey: 
                              style:
                                display: inline-block
                                fontSize: .Nfont.n6_1
                                fontWeight: "600"
                                left: "0.02"
                                width: "0.073"
                                height: "0.038"
                                lineHeight: "3.8vh"

                        - type: scrollView
                          style:
                            width: '0.36'
                            height: auto
                            display: inline-block
                          children:
                            - type: list
                              contentType: listObject
                              listObject: ..formData.telemedicine
                              iteratorVar: itemObject
                              style:
                                width: '0.36'
                                margin: '0'
                                height: "0.433"
                                boxSizing: border-box
                                borderBottom: "0xffffff"
                              children:
                                - type: listItem
                                  itemObject: 
                                  style:
                                    width: '0.36'
                                    height: '0.072'
                                    marginTop: ''
                                    boxSizing: border-box
                                    borderBottom: "0xd7e2e9"
                                    border:
                                      style: "3"
                                    borderColor: "0xd1dee6"
                                    borderTop: "0xffffff"
                                    borderWidth: "1.5"
                                  children:
                                    - type: label
                                      text: 
                                      dataKey: itemObject.reason
                                      style:
                                        display: inline-block
                                        width: '0.074'
                                        height: "0.072"
                                        lineHeight: 7.2vh
                                        marginLeft: "0.018"
                                    - type: label
                                      text: 
                                      dataKey: itemObject.duration
                                      style:
                                        display: inline-block
                                        width: '0.046'
                                        height: "0.072"
                                        lineHeight: 7.2vh
                                    # - type: label
                                    #   text: ""
                                    #   text=func: .builtIn.string.dollarFormat
                                    #   dataKey: itemObject.fee
                                    #   style:
                                    #     display: inline-block
                                    #     width: '0.046'
                                    #     height: "0.072"
                                    #     lineHeight: 7.2vh
                                    - type: select
                                      # dataKey: facility.document.name.data.basicInfo.state
                                      options: itemObject.document
                                      required: "true"
                                      style:
                                        width: "0.165"
                                        height: "0.038"
                                        display: inline-block
                                        marginTop: "0.018"
                                        flexGrow: "0"
                                        borderRadius: "5"
                                        border:
                                          style: "3"
                                        borderColor: "0xe2e2e2"
                                        fontSize: "0.8vw"
                                        boxSizing: border-box
                    
                    # office visit 表格
                    - type: view
                      style:
                        width: "0.36"
                        height: "0.53"
                        left: "0.048"
                        marginTop: "0.01"
                        border:
                          style: "1"
                        borderWidth: "2"
                        border-top-left-radius: "5px"
                        border-top-right-radius: "5px"
                        display: inline-block
                      children:
                        - type: view
                          style:
                            width: "0.36"
                            height: "0.047"
                            backgroundColor: "0x005795"
                            border-top-left-radius: "5px"
                            border-top-right-radius: "5px"
                            boxSizing: border-box
                            display: flex
                            justifyContent: "space-between"
                            alignItems: center
                          children:
                            - type: label
                              text: Office Visit
                              dataKey: 
                              style:
                                color: "0xffffff"
                                fontWeight: "600"
                                left: "0.015"
                                fontSize: .Nfont.n5_2
                            - type: label
                              text: Edit
                              onClick: 
                                - actionType: evalObject
                                  object:
                                    - if:
                                      - =.Global.currentFacility.id
                                      - continue
                                      - actionType: popUp
                                        popUpView: errorTag
                                        wait: true 
                                    - ..formData.newReason@: =..formData.officeVisits
                                    - ..formData.editFrom@: "1"
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: newReasonTag
                                - actionType: popUp
                                  popUpView: reasonVisitTag                          
                              dataKey: 
                              style:
                                textDecoration: underline
                                color: "0xffffff"
                                fontWeight: "700"
                                fontSize: .Nfont.n5_2
                                marginRight: "0.01"
                        - type: view
                          style:
                            width: "0.36"
                            height: "0.038"
                            backgroundColor: "0xeff0f2"
                          children:
                            - type: label
                              text: Reason for Visit
                              dataKey: 
                              style:
                                display: inline-block
                                fontSize: .Nfont.n6_1
                                fontWeight: "600"
                                left: "0.018"
                                width: "0.073"
                                height: "0.038"
                                lineHeight: "3.8vh"
                            - type: label
                              text: Duration
                              dataKey: 
                              style:
                                display: inline-block
                                fontSize: .Nfont.n6_1
                                fontWeight: "600"
                                left: "0.02"
                                width: "0.046"
                                height: "0.038"
                                lineHeight: "3.8vh"
                            # - type: label
                            #   text: Fee
                            #   dataKey: 
                            #   style:
                            #     display: inline-block
                            #     fontSize: .Nfont.n6_1
                            #     fontWeight: "600"
                            #     left: "0.02"
                            #     width: "0.046"
                            #     height: "0.038"
                            #     lineHeight: "3.8vh"
                            - type: label
                              text: Attached Files
                              dataKey: 
                              style:
                                display: inline-block
                                fontSize: .Nfont.n6_1
                                fontWeight: "600"
                                left: "0.02"
                                width: "0.073"
                                height: "0.038"
                                lineHeight: "3.8vh"

                        - type: scrollView
                          style:
                            width: '0.36'
                            height: auto
                            display: inline-block
                          children:
                            - type: list
                              contentType: listObject
                              listObject: ..formData.officeVisits
                              iteratorVar: itemObject
                              style:
                                width: '0.36'
                                margin: '0'
                                height: "0.433"
                                boxSizing: border-box
                                borderBottom: "0xffffff"
                              children:
                                - type: listItem
                                  itemObject: 
                                  style:
                                    width: '0.36'
                                    height: '0.072'
                                    marginTop: ''
                                    boxSizing: border-box
                                    borderBottom: "0xd7e2e9"
                                    border:
                                      style: "3"
                                    borderColor: "0xd1dee6"
                                    borderTop: "0xffffff"
                                    borderWidth: "1.5"
                                  children:
                                    - type: label
                                      text: 
                                      dataKey: itemObject.reason
                                      style:
                                        display: inline-block
                                        width: '0.07'
                                        height: "0.072"
                                        lineHeight: 7.2vh
                                        marginLeft: "0.018"
                                    - type: label
                                      text: 
                                      dataKey: itemObject.duration
                                      style:
                                        display: inline-block
                                        width: '0.046'
                                        height: "0.072"
                                        lineHeight: 7.2vh
                                    # - type: label
                                    #   text: ""
                                    #   text=func: .builtIn.string.dollarFormat
                                    #   dataKey: itemObject.fee
                                    #   style:
                                    #     display: inline-block
                                    #     width: '0.046'
                                    #     height: "0.072"
                                    #     lineHeight: 7.2vh
                                    - type: select
                                      # dataKey: facility.document.name.data.basicInfo.state
                                      options: itemObject.document
                                      required: "true"
                                      style:
                                        width: "0.165"
                                        height: "0.038"
                                        display: inline-block
                                        marginTop: "0.018"
                                        flexGrow: "0"
                                        borderRadius: "5"
                                        border:
                                          style: "3"
                                        borderColor: "0xe2e2e2"
                                        fontSize: "0.8vw"
                                        boxSizing: border-box
        - type: popUp
          msg: Do you want to save your changes?
          viewTag: judgeView
          style: 
            left: "0"
            width: "1"
            top: "0"
            height: "1"
            backgroundColor: "0x00000033"
            zIndex: "20"
          children: 
            - .BaseJudgeInnerView: 
              children: 
                - .BaseJudgeCancelImg: 
                - .BaseJudgeTxt: 
                - .BaseJudgeButtonView: 
                  children: 
                    - .BaseJudgeButtonNo:   # 可以重写
                      onClick: 
                        - actionType: popUpDismiss
                          popUpView: reasonVisitTag
                        - actionType: popUpDismiss
                          popUpView: judgeView                          
                    - .BaseJudgeButtonYes:  # 可以重写
                      onClick: 
                        - actionType: evalObject
                          object:
                            - if: 
                              - =.builtIn.string.equal:
                                  dataIn:
                                    string1: =..formData.editFrom
                                    string2: '0'
                              - actionType: evalObject
                                object:                              
                                  - ..apiRequest.visitReason.docStore.name.data.reasonForVisit.Telemedicine@: =..formData.newReason
                                  - ..formData.telemedicine@: =..formData.newReason
                              - actionType: evalObject
                                object:                              
                                  - ..apiRequest.visitReason.docStore.name.data.reasonForVisit.OfficeVisits@: =..formData.newReason
                                  - ..formData.officeVisits@: =..formData.newReason
                            - =..apiRequest.visitReason.docAPI.store: ""
                        - actionType: updateObject
                          dataKey: ProviderReason.apiRequest.visitReason.docStore
                          dataObject: {}
                        - actionType: evalObject
                          object:
                            - ..apiRequest.visitReason.docStore@: =..apiRequest.visitReason.docStoreResp.doc
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: reasonAllTag
                        - actionType: popUpDismiss
                          popUpView: reasonVisitTag
                        - actionType: popUpDismiss
                          popUpView: judgeView
                        - actionType: popUp
                          popUpView: successView
                          wait: 1000
        - type: popUp
          viewTag: attachedFilesTag
          style:
            width: "0.4"
            height: "1"
            backgroundColor: "0x00000000"
            zIndex: "20"
            top: "0"
            left: "0.6"
          children:
            - type: view
              onClick: 
                - actionType: popUpDismiss
                  popUpView: attachedFilesTag            
              style:
                width: "0.4"
                height: "1"
                top: "0"
                left: "0"
            - type: view
              style:
                width: "0.245"
                # height: "0.16"
                backgroundColor: "0xffffff"
                top: "0.345"
                height: "0.25"
                left: "0.048"
                borderRadius: "5"
                zIndex: "30"
                boxShadow: "5px 5px 10px 10px #f5f5f5"
              children:
                - type: list
                  viewTag: documentTag
                  contentType: listObject
                  listObject: ..formDataTemp.document
                  iteratorVar: itemObject
                  style:
                    width: '0.245'
                    margin: '0'
                    left: ""
                    # height: "0.16"
                    backgroundColor: "0xffffff"
                    boxShadow: "5px 5px 10px 10px #f5f5f5"
                  children:
                    - type: listItem
                      itemObject: 
                      style:
                        width: '0.2'
                        height: '0.04'
                        left: '0.018'
                        marginTop: ''
                        display: flex
                        justifyContent: flex-start
                        alignItems: center
                      children:
                        - type: image
                          path: # selectGrayBlue.svg
                            emit:
                              dataKey:
                                var: itemObject
                              actions:                        
                                - if:
                                  - =.builtIn.array.has:
                                      dataIn:
                                        object: =..formData.reasonForVisit.document
                                        value: $var.title
                                  - selectGrayBlue.svg
                                  - selectGray.svg
                          onClick:
                            - emit:
                                dataKey:
                                  var: itemObject
                                actions: 
                                  - if:
                                    - =.builtIn.array.has:
                                        dataIn:
                                          object: =..formData.reasonForVisit.document
                                          value: $var.title
                                    - =.builtIn.array.removeByValue:
                                        dataIn:
                                          object: =..formData.reasonForVisit.document
                                          value: $var.title
                                    - =.builtIn.array.add:
                                        dataIn:
                                          object: =..formData.reasonForVisit.document
                                          value: $var.title
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: documentTag
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: docDisplayTag
                          style:
                            width: "0.009"
                            marginRight: "0.006"
                            marginTop: "0.004"
                        - type: label
                          text: 
                          dataKey: itemObject.title
                          style:
                            display: inline-block
                            fontSize: .Nfont.n6_1_2
                
        # reasonForVisit 弹窗
        - type: popUp
          style:
            top: "0"
            left: "0"
            height: "1"
            width: "1"
            zIndex: "10"
            backgroundColor: "0x00000033"
          viewTag: reasonVisitTag
          children:
            - .PopUphead:
              style:
                left: '0.6'
              children:
                - type: label
                  text: "Reason for visit"
                  style:
                    fontSize: '2vh'
                    left: '0.03'
                    top: '0'
                    height: "0.08"
                    color: '0xffffff'
                    # fontWeight: '500' 
                    textAlign: 
                      y: center
                - type: image
                  path: closeButton.svg
                  style:
                    width: '0.012'
                    left: '0.36'
                    top: '0.026'
                  onClick:
                    - actionType: popUp
                      popUpView: judgeView
            - type: view
              style:
                height: '0.82'
                width: '0.4'
                top: '0.08'
                left: '0.6'
                # boxShadow: "1px 5px 10px -1px #cccccc"
                backgroundColor: '0xffffff'
              viewTag: DataTag
              children:
                - type: label
                  text: Create different reasons for a patient visit. This is essential for creating availability settings and to assist with patient self-scheduling. 
                  style:
                    left: '0.046'
                    width: "0.35"
                    marginTop: "0.01"
                    fontSize: .Nfont.n6_1_1
                    color: '#000000'
                # Reason for visit
                - type: view
                  viewTag: createReasonTag
                  style:
                    marginTop: "0.01"
                    width: "0.4"
                    height: "0.19"
                  children: 
                    - type: label
                      text: Reason for visit
                      style:
                        left: '0.046'
                        top: '0'
                        fontSize: .Nfont.n6_1
                        fontWeight: "600"
                    - type: textField
                      dataKey: formData.reasonForVisit.reason
                      onChange: 
                        - actionType: evalObject
                          object:
                            - if: 
                              - =.builtIn.string.judgeFillinAll:
                                  dataIn:
                                    - =..formData.reasonForVisit.reason
                              - ..formData.btnColor@: "0xc1c1c1"
                              - ..formData.btnColor@: "0x005795"
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: btnView
                      style:
                        left: '0.046'
                        top: '0.03'
                        fontSize: .Nfont.n6_1
                        borderColor: "0xf1f1f1" 
                        boxSizing: border-box
                        width: '0.246'
                        border: 
                          style: "3"
                        borderRadius: "5"
                        borderWidth: "2"
                        height: '0.045'
                        textIndent: 10px
                        # flexGrow: "0"
                    # Duration
                    - type: label
                      text: Duration
                      style:
                        left: '0.3'
                        top: '0'
                        fontSize: .Nfont.n6_1
                        fontWeight: "600"
                        width: "0.1"
                    - type: select
                      viewTag: typeView
                      options: 
                        .Duration
                      dataKey: formData.reasonForVisit.duration
                      style:
                        left: '0.3'
                        top: '0.03'
                        fontSize: .Nfont.n6_1
                        borderColor: "0xf1f1f1" 
                        width: '0.075'
                        height: '0.046'
                        borderRadius: "5px"
                        borderWidth: "2"
                        flexGrow: "0"
                        textIndent: 10px
                    
                    # Attached Files
                    - type: label
                      text: Attached Files
                      style:
                        left: '0.046'
                        top: '0.11'
                        fontWeight: "600"
                        fontSize: .Nfont.n6_1         
                    - type: label
                      viewTag: docDisplayTag
                      dataKey: formData.reasonForVisit.document
                      style:
                        left: '0.046'
                        top: '0.14'
                        borderColor: "0xf1f1f1" 
                        fontSize: .Nfont.n6_1
                        width: '0.246'
                        border:  
                          style: '3'
                        height: '0.046'
                        backgroundColor: "0xffffff"
                        borderRadius: "5px"
                        borderWidth: "2"
                        flexGrow: "0"
                        overflowY: scroll
                        textIndent: 10px
                      onClick:
                        - actionType: popUp
                          popUpView: attachedFilesTag
                    # Fee
                    # - type: label
                    #   text: Fee
                    #   style:
                    #     left: '0.3'
                    #     top: '0.11'
                    #     fontWeight: "600"
                    #     fontSize: .Nfont.n6_1
                    # - type: textField
                    #   dataKey: formData.fee
                    #   isEditable: 
                    #   viewTag: 
                    #   placeholder: Enter here
                    #   onInput:
                    #     - actionType: evalObject
                    #       object:
                    #         - =.builtIn.math.toFixedNum:
                    #             dataIn:
                    #               num: =..formData.fee
                    #             dataOut: ProviderReason.formData.currentFee
                    #   style:
                    #     left: "0.3"
                    #     top: "0.14"
                    #     height: "0.046"
                    #     width: "0.075"
                    #     fontSize: .Nfont.n6_1
                    #     boxSizing: "border-box"
                    #     border:   
                    #       style: "3"
                    #     borderColor: "0xf1f1f1" 
                    #     borderWidth: "2"
                    #     textIndent: 1em
                    # - type: label
                    #   text: "$"
                    #   dataKey: 
                    #   style:
                    #     left: "0.362"
                    #     top: "0.15"
                    #     fontSize: .Nfont.n6_1
                - type: view
                  viewTag: btnView
                  style:
                    marginTop: "0.03"
                    width: '0.4'
                    display: flex
                    justifyContent: center
                  children:
                    - type: button
                      text: Create New Reason
                      onClick: 
                        - actionType: evalObject
                          object:
                            - if: 
                              - =.builtIn.string.equal:
                                  dataIn:
                                    string1: =..formData.btnColor
                                    string2: "0xc1c1c1"
                              - continue
                              - actionType: evalObject
                                object:  
                                  - ..formData.reasonForVisit.fee@: "0"           
                                  # - if: 
                                  #   - =.builtIn.string.equal:
                                  #       dataIn:
                                  #         string1: =..formData.currentFee
                                  #         string2: ""
                                  #   - ..formData.reasonForVisit.fee@: "-" 
                                  #   - actionType: evalObject
                                  #     object:    
                                  #       - if:
                                  #         - =.builtIn.math.FixedLimit:
                                  #             dataIn:
                                  #               num: =..formData.currentFee
                                  #         - ..formData.reasonForVisit.fee@: =..formData.currentFee
                                  #         - actionType: popUp
                                  #           popUpView: fillBlankWarnView
                                  #           wait: true       
                                          
                                  - =.builtIn.array.push:
                                      dataIn:
                                        newMessage: =..formData.reasonForVisit
                                        messages: =..formData.newReason
                                      dataOut: ProviderReason.formData.newReason
                            - ..formData.reasonForVisit.reason@: ""
                            - ..formData.reasonForVisit.duration@: "5 min"
                            - ..formData.fee@: ""
                            - ..formData.currentFee@: ""
                            - ..formData.reasonForVisit.document@: []
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: createReasonTag
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: newReasonTag

                      style:
                        width: "0.2"
                        height: "0.045"
                        borderRadius: "5px"
                        backgroundColor: ..formData.btnColor
                        color: "0xffffff"
                        fontSize: .Nfont.n6
                        border:
                          style: "1"
                        textAlign:
                          x: center
                          y: center

                # 分割线
                - type: view
                  style:
                    marginTop: "0.04"
                    width: '0.4'
                    display: flex
                    justifyContent: center
                  children:
                    - type: view
                      style:
                        width: "0.33"
                        height: "0.002"
                        backgroundColor: "0xeaeaea"
                        left: "0.01"
                # 分割线下表格
                - type: view
                  style:
                    width: "0.33"
                    height: "0.433"
                    left: "0.045"
                    marginTop: "0.05"
                    border:
                      style: "1"
                    borderWidth: "2"
                    border-top-left-radius: "5px"
                    border-top-right-radius: "5px"
                    display: inline-block
                  children:
                    - type: view
                      style:
                        width: "0.33"
                        height: "0.038"
                        backgroundColor: "0xeff0f2"
                      children:
                        - type: label
                          text: Reason for Visit
                          dataKey: 
                          style:
                            display: inline-block
                            fontSize: .Nfont.n6_1_2
                            fontWeight: "600"
                            marginLeft: "0.013"
                            width: "0.1"
                            height: "0.038"
                            lineHeight: "3.8vh"
                        - type: label
                          text: Duration
                          dataKey: 
                          style:
                            display: inline-block
                            fontSize: .Nfont.n6_1
                            fontWeight: "600"
                            marginLeft: "0.008"
                            width: "0.058"
                            height: "0.038"
                            lineHeight: "3.8vh"
                        # - type: label
                        #   text: Fee
                        #   dataKey: 
                        #   style:
                        #     display: inline-block
                        #     fontSize: .Nfont.n6_1
                        #     fontWeight: "600"
                        #     # marginLeft: "0.02"
                        #     width: "0.044"
                        #     height: "0.038"
                        #     lineHeight: "3.8vh"
                        - type: label
                          text: Attached Files
                          dataKey: 
                          style:
                            display: inline-block
                            fontSize: .Nfont.n6_1
                            fontWeight: "600"
                            # marginLeft: "0.02"
                            width: "0.073"
                            height: "0.038"
                            lineHeight: "3.8vh"

                    - type: scrollView
                      style:
                        width: '0.33'
                        height: auto
                        display: inline-block
                      children:
                        - type: list
                          contentType: listObject
                          listObject: ..formData.newReason
                          iteratorVar: itemObject
                          viewTag: newReasonTag
                          style:
                            width: '0.33'
                            margin: '0'
                            height: "0.361"
                            # boxSizing: border-box
                            
                            # borderBottom: "0xffffff"
                          children:
                            - type: listItem
                              itemObject: 
                              style:
                                width: '0.33'
                                height: '0.072'
                                marginTop: ''
                                boxSizing: border-box
                                # boxSizing: border-box
                                borderBottom: "0xd7e2e9"
                                border:
                                  style: "3"
                                borderColor: "0xd1dee6"
                                borderTop: "0xffffff"
                                borderWidth: "1.5"
                              children:
                                - type: image
                                  path: deletePhoto.svg
                                  onClick: 
                                    - emit:
                                        dataKey:
                                          var: itemObject
                                        actions:   
                                          - =.builtIn.array.removeByName:
                                              dataIn:
                                                object: =..formData.newReason
                                                key: "reason"
                                                name: $var.reason                                       
                                    - actionType: builtIn
                                      funcName: redraw
                                      viewTag: newReasonTag
                                  style:
                                    width: "0.01"
                                    marginTop: "0.028"
                                    marginLeft: "0.005"
                                - type: label
                                  text: 
                                  dataKey: itemObject.reason
                                  style:
                                    display: inline-block
                                    width: '0.1'
                                    height: "0.072"
                                    lineHeight: 7.2vh
                                    marginLeft: "0.004"
                                - type: label
                                  text: 
                                  dataKey: itemObject.duration
                                  style:
                                    display: inline-block
                                    width: '0.058'
                                    height: "0.072"
                                    marginLeft: "0.007"
                                    lineHeight: 7.2vh
                                # - type: label
                                #   text: ""
                                #   text=func: .builtIn.string.dollarFormat
                                #   dataKey: itemObject.fee
                                #   style:
                                #     display: inline-block
                                #     width: '0.044'
                                #     height: "0.072"
                                #     lineHeight: 7.2vh
                                - type: select
                                  # dataKey: facility.document.name.data.basicInfo.state
                                  options: itemObject.document
                                  required: "true"
                                  style:
                                    width: "0.086"
                                    height: "0.038"
                                    display: inline-block
                                    marginTop: "0.018"
                                    paddingLeft: "10px"
                                    flexGrow: "0"
                                    borderRadius: "5"
                                    border:
                                      style: "3"
                                    borderColor: "0xe2e2e2"
                                    fontSize: "0.8vw"
                                    boxSizing: border-box
                                
            - ..style.confirmBtnView: 
              children: 
                - ..style.confirmButton:
                  onClick: 
                    - actionType: evalObject
                      object:
                        - if: 
                          - =.builtIn.string.equal:
                              dataIn:
                                string1: =..formData.editFrom
                                string2: '0'
                          - actionType: evalObject
                            object:                              
                              - ..apiRequest.visitReason.docStore.name.data.reasonForVisit.Telemedicine@: =..formData.newReason
                              - ..formData.telemedicine@: =..formData.newReason
                          - actionType: evalObject
                            object:                              
                              - ..apiRequest.visitReason.docStore.name.data.reasonForVisit.OfficeVisits@: =..formData.newReason
                              - ..formData.officeVisits@: =..formData.newReason
                        - =..apiRequest.visitReason.docAPI.store: ""
                    - actionType: updateObject
                      dataKey: ProviderReason.apiRequest.visitReason.docStore
                      dataObject: {}
                    - actionType: evalObject
                      object:
                        - ..apiRequest.visitReason.docStore@: =..apiRequest.visitReason.docStoreResp.doc
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: reasonAllTag
                    - actionType: popUpDismiss
                      popUpView: reasonVisitTag
                    - actionType: popUp
                      popUpView: successView
                      wait: 1000

        - .BaseSuccessfulView: ""
          style:
            width: "1"
            height: "1"
            margin: auto    
          viewTag: successView
        - .BaseWarningViewOne:
          viewTag: errorTag
          msg2: "Please add Facility !"               
          style:
            width: "1"
            height: "1"
        - .BaseWarningViewOne:
          viewTag: fillBlankWarnView
          msg2: "Please enter the correct fee format !"
          style:
            width: "1"
            height: "1"























