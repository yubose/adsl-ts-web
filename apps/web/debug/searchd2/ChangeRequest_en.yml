ChangeRequest:
  init:
    - ..formData.currentRequest@: =.Global.formData.currentRequest
    - =.builtIn.string.phoneNumberSplit: 
        dataIn: 
          phoneNumber: =.ChangeRequest.formData.currentRequest.name.patientPhoneNumber
          sign: " "
        dataOut: ChangeRequest.formData.phone
    - actionType: evalObject
      object: .BaseDate.getDate
    - actionType: evalObject
      object: .BaseDate.getShow
    - actionType: evalObject
      object:
        - if: 
          - =.builtIn.string.equal:
              dataIn:
                string1: =.ChangeRequest.formData.currentRequest.name.visitType
                string2: "Telemedicine"
          - ..formData.addressTagDisplay@: none
          - ..formData.addressTagDisplay@: block
        - if: 
          - =.builtIn.string.equal:
              dataIn:
                string1: =.ChangeRequest.formData.currentRequest.name.visitType
                string2: "Telemedicine"
          - ..formData.subType@: 196609
          - ..formData.subType@: 131073
        - =.builtIn.date.getTime:
            dataIn:
            dataOut: ChangeRequest.formData.nowTimeStamp
        - if:
          - =.builtIn.string.equal:
              dataIn:
                string1: =..formData.currentRequest.name.visitType
                string2: "Office Visit"
          - ..apiRequest.schedule.edge.id.0@: =.Global.locationAll.0.id
          - ..apiRequest.schedule.edge.id.0@: =.Global.currentFacility.id
        - ..apiRequest.schedule.edge.id.1@: =.Global.currentUser.vertex.id
        - =.builtIn.date.ShowDateByNumber:
            dataIn:
              year: =.BaseDate.calendarDate.year
              month: =.BaseDate.calendarDate.month
              day: =.BaseDate.calendarDate.day
              formatType: "Y-M-D"
            dataOut: BaseDate.calendarDate.todayDate
        - =.builtIn.date.transformMonth:
            dataIn:
              month: =.BaseDate.calendarDate.month
            dataOut: BaseDate.calendarDate.monthName
        - =.builtIn.date.getTimeStampOfDate:
            dataIn:
              date: =.BaseDate.calendarDate.todayDate
            dataOut: BaseDate.calendarDate.todayStamp
        - =.builtIn.string.concat:
            dataIn:
              - "(stime<="
              - =.BaseDate.calendarDate.todayStamp.start
              - " AND "
              - "etime>="
              - =.BaseDate.calendarDate.todayStamp.start
              - " OR "
              - "stime>="
              - =.BaseDate.calendarDate.todayStamp.start
              - " AND "
              - "etime<="
              - =.BaseDate.calendarDate.todayStamp.end
              - " OR "
              - "stime<="
              - =.BaseDate.calendarDate.todayStamp.end
              - " AND "
              - "etime>="
              - =.BaseDate.calendarDate.todayStamp.end
              - ")"
              - " AND "
              - "subtype="
              - =..formData.subType
            dataOut: ChangeRequest.formData.scheduleScondition 
        - ..apiRequest.schedule.edge.sCondition@: =..formData.scheduleScondition
        - =..apiRequest.schedule.edgeAPI.get: ""

        # - =..apiRequest.schedule.edge.id@: []
    
    - if: 
      - =..apiRequest.schedule.scheduleList.edge
      - actionType: evalObject
        object:
          - =.builtIn.date.splitTime:
              dataIn:
                object2: =..apiRequest.schedule.scheduleList.edge
                timeSlot: =..formData.currentRequest.name.duration
                year: =.BaseDate.calendarDate.year
                month: =.BaseDate.calendarDate.month
                day: =.BaseDate.calendarDate.day
              dataOut: ChangeRequest.formData.timeTable
          - =.builtIn.object.setProperty: 
              dataIn: 
                obj: =..formData.timeTable
                label: "showTime"
                text: ""
                arr: ["color","backgroundColor"]
                valueArr: ["0xffffff","#2988e6"]
                errorArr: ["#4b4b4b","#E9F2FC"] 
      - continue
  formData:
    currentRequestId: 
    currentRequest:
    timeTable: 
    nowTimeStamp:
    splitTime: ""
    scheduleScondition: ""
    subType: ""
    addressTagDisplay: ""
    newTime: ""
    appointmentTime: ""
    nextColor: "0xcdcdcd"
  apiRequest:
    schedule:     
      response: ""
      scheduleList: ""
      edgeAPI:
        get:
          api: re
          dataIn: ChangeRequest.apiRequest.schedule.edge
          dataOut: ChangeRequest.apiRequest.schedule.scheduleList
      edge:
        .Edge: ""
        type: 40000
        id: []
        sCondition: "" 
        xfname: "bvid,evid"
        maxcount: "1"
        obfname: "stime"
        asc: true
        _nonce: =.Global._nonce
  components:
    - type: view
      style:
        width : '1'
        height: "1"
        margin: auto
      children:
        - type: view
          style:
            background-image: 'linear-gradient(#0063a8, #004371)'   
            height: "1"
            width: 16vw
          children:
            - .aitLogo:
            - .Menu:
        - .TopBar:
        - .BodyView:
          style: 
            backgroundColor: "#f4f8fa"
            width: "0.84"
            left: '0.16'
            top: "0.07"
            height: "0.93"
          children:
            - type: label
              text: back
              style:
                fontSize: .Nfont.h1
                color: "0x005795"
                fontFamily: "Arial"
                marginLeft: "5vw"
                top: "1vw"
              onClick:
                - actionType: builtIn
                  funcName: goBack
            - type: view
              style:
                height: 46.9vw
                width: "0.4"
                margin: auto
              viewTag: 
              children:
                - type: view
                  style:
                    width: "0.4"
                    height: "0.08"
                    display: flex
                    flexDirection: row
                    justifyContent: space-between
                    alignItems: center
                  children:
                    - type: label
                      text: 'Create an Appointment'
                      style:
                        width: "30vw"
                        marginLeft: 1vw
                        fontSize: 1.2vw
                        fontFamily: "Poppins"
                        textAlign: 
                          y: center
                - type: view
                  style:
                    width: "0.4"
                    height: "0.8"
                    padding: 1px
                  children:
                    - type: view
                      style:
                        width: "0.4"
                        height: "0.8"
                        padding: 1px
                        # top: 0
                      children:
                        - type: 
                          style:
                            width: "0.4"
                            height: "auto"
                            margin: auto
                            marginTop: "0.01"
                          children:
                            - type: label
                              text: "Request Infomation"
                              style:
                                fontSize: 1.2vw
                                color: '0x333333'
                                textAlign: 
                                  y: center
                            - type: view
                              style:
                                width: "0.4"
                                margin: "auto"
                              children:
                                - .ViewRow:
                                  style:
                                    justifyContent: space-around
                                  children:
                                    - type: view
                                      style:
                                        margin: "1vw"
                                      children:
                                        - type: label
                                          text: "Patient Name"
                                        - .TextField1:
                                          dataKey: formData.currentRequest.name.patientName
                                          isEditable: false
                                    - type: view
                                      style:
                                        margin: "1vw"
                                      children:
                                        - type: label
                                          text: "Type"
                                        - .TextField1:
                                          dataKey: formData.currentRequest.name.visitType
                                          isEditable: false
                                    - type: view
                                      style:
                                        margin: "1vw"
                                        display: .ChangeRequest.formData.addressTagDisplay
                                      children:
                                        - type: label
                                          text: "Address"
                                        - .TextField1:
                                          dataKey: formData.currentRequest.name.locationName
                                          isEditable: false
                                - .ViewRow:
                                  style:
                                    justifyContent: space-around
                                  children:
                                    - type: view
                                      style:
                                        margin: "1vw"
                                      children:
                                        - type: label
                                          text: "Reason for vist(notes)"
                                        - .TextField1:
                                          dataKey: formData.currentRequest.name.visitReason
                                          isEditable: false
                                    - type: view
                                      style:
                                        margin: "1vw"
                                        width: "11.5vw"
                                      children:
                                        - type: label
                                          text: "Duration"
                                        - .ViewRow:
                                          style: 
                                            justifyContent: space-between
                                            alignItems: center
                                          children:
                                            - .TextField1:
                                              style:
                                                width: "8vw"
                                              dataKey: formData.currentRequest.name.duration
                                              isEditable: false
                                            - type: label
                                              text: "min"
                                
                            - type: label
                              text: "Availability"
                              style:
                                fontSize: 1.2vw
                                color: '0x333333'
                                textAlign: 
                                  y: center
                            - type: view
                              style:
                                width: "0.4"
                                margin: "auto"
                                textAlign:
                                  x: center
                              children:
                                - type: view
                                  viewTag: calendarTag
                                  style:
                                    width: "0.24"
                                    margin: auto
                                    # backgroundColor: "0xffffff"
                                    # height: "0.35"
                                    border: 
                                      style: "3"
                                    borderColor: "#d0d9df"
                                    borderRadius: "5"
                                    left: 1vw
                                    borderWidth: "0"
                                  children:
                                    - .ViewRow:
                                      children:
                                        - .ViewRow:
                                          style:
                                            width: "0.06"
                                            height: "0.03"
                                          children:
                                            - type: image
                                              path: blueright.png
                                              onClick:
                                                - emit:
                                                    actions:
                                                      - =.builtIn.date.loopMonth:
                                                          dataIn:
                                                            month: =.BaseDate.calendarDate.month
                                                            step: -1
                                                          dataOut: BaseDate.calendarDate.month
                                                      - =.builtIn.date.transformMonth:
                                                          dataIn:
                                                            month: =.BaseDate.calendarDate.month
                                                          dataOut: BaseDate.calendarDate.monthName
                                                      - =.builtIn.date.calendarArray:
                                                          dataIn:
                                                            year: =.BaseDate.calendarDate.year
                                                            month: =.BaseDate.calendarDate.month
                                                            today: 1
                                                          dataOut: BaseDate.calendarDate.dayLable
                                                      - =.builtIn.date.miniWeeklyCalendarArray:
                                                          dataIn:
                                                            year: =.BaseDate.calendarDate.year
                                                            month: =.BaseDate.calendarDate.month
                                                            today: 32
                                                            markDay: 1
                                                            color: "0x333333"
                                                            backgroundColor: "0xFFFFFF6f"
                                                            todayColor: "0xffffff"
                                                            todayBackgroundColor: "0x2988E6"
                                                          dataOut: BaseDate.calendarDate.minidayLable
                                                      - .BaseDate.calendarDate.day@: 1
                                                - actionType: builtIn
                                                  funcName: redraw
                                                  viewTag: calendarTag
                                              style:
                                                height: "0.015"
                                            - type: label
                                              dataKey: BaseDate.calendarDate.monthName
                                              style:
                                                width: "0.02"
                                                height: "0.02"
                                                fontSize: "16"
                                                color: "0x003254"
                                                textAlign:
                                                  x: center
                                            - type: image
                                              path: blueleft.png
                                              onClick:
                                                - emit:
                                                    actions:
                                                      - =.builtIn.date.loopMonth:
                                                          dataIn:
                                                            month: =.BaseDate.calendarDate.month
                                                            step: 1
                                                          dataOut: BaseDate.calendarDate.month
                                                      - =.builtIn.date.transformMonth:
                                                          dataIn:
                                                            month: =.BaseDate.calendarDate.month
                                                          dataOut: BaseDate.calendarDate.monthName
                                                      - =.builtIn.date.calendarArray:
                                                          dataIn:
                                                            year: =.BaseDate.calendarDate.year
                                                            month: =.BaseDate.calendarDate.month
                                                            today: 1
                                                          dataOut: BaseDate.calendarDate.dayLable 
                                                      - =.builtIn.date.miniWeeklyCalendarArray:
                                                          dataIn:
                                                            year: =.BaseDate.calendarDate.year
                                                            month: =.BaseDate.calendarDate.month
                                                            today: 32
                                                            markDay: 1
                                                            color: "0x333333"
                                                            backgroundColor: "0xFFFFFF6f"
                                                            todayColor: "0xffffff"
                                                            todayBackgroundColor: "0x2988E6"
                                                          dataOut: BaseDate.calendarDate.minidayLable
                                                      - .BaseDate.calendarDate.day@: 1            
                                                - actionType: builtIn
                                                  funcName: redraw
                                                  viewTag: calendarTag
                                              style:
                                                height: "0.015"
                                    
                                        - .ViewRow:
                                          style:
                                            width: "0.06"
                                            height: "0.03"
                                          children:
                                            - type: image
                                              path: blueright.png
                                              onClick:
                                                - emit:
                                                    actions:
                                                      - =.builtIn.number.Subtraction:
                                                          dataIn:
                                                            num: =.BaseDate.calendarDate.year
                                                            step: 1
                                                          dataOut: BaseDate.calendarDate.year
                                                      - =.builtIn.date.calendarArray:
                                                          dataIn:
                                                            year: =.BaseDate.calendarDate.year
                                                            month: 1
                                                            today: 1
                                                          dataOut: BaseDate.calendarDate.dayLable
                                                      - =.builtIn.date.miniWeeklyCalendarArray:
                                                          dataIn:
                                                            year: =.BaseDate.calendarDate.year
                                                            month: 1
                                                            today: 32
                                                            markDay: 1
                                                            color: "0x333333"
                                                            backgroundColor: "0xFFFFFF6f"
                                                            todayColor: "0xffffff"
                                                            todayBackgroundColor: "0x2988E6"
                                                          dataOut: BaseDate.calendarDate.minidayLable
                                                - actionType: evalObject
                                                  object: 
                                                    - .BaseDate.calendarDate.month@: 1
                                                    - .BaseDate.calendarDate.day@: 1
                                                - actionType: evalObject
                                                  object:
                                                    - =.builtIn.date.transformMonth:
                                                        dataIn:
                                                          month: =.BaseDate.calendarDate.month
                                                        dataOut: BaseDate.calendarDate.monthName
                                                - actionType: builtIn
                                                  funcName: redraw
                                                  viewTag: calendarTag
                                                
                                              style:
                                                height: "0.015"
                                            - type: label
                                              dataKey: BaseDate.calendarDate.year
                                              style:
                                                width: "0.02"
                                                height: "0.02"
                                                fontSize: "16"
                                                color: "0x003254"
                                                textAlign:
                                                  x: center
                                            - type: image
                                              path: blueleft.png
                                              onClick:
                                                - emit:
                                                    actions:
                                                      - =.builtIn.number.addition:
                                                          dataIn:
                                                            num: =.BaseDate.calendarDate.year
                                                            step: 1
                                                          dataOut: BaseDate.calendarDate.year
                                                      - =.builtIn.date.calendarArray:
                                                          dataIn:
                                                            year: =.BaseDate.calendarDate.year
                                                            month: 1
                                                            today: 1
                                                          dataOut: BaseDate.calendarDate.dayLable
                                                      - =.builtIn.date.miniWeeklyCalendarArray:
                                                          dataIn:
                                                            year: =.BaseDate.calendarDate.year
                                                            month: 1
                                                            today: 32
                                                            markDay: 1
                                                            color: "0x333333"
                                                            backgroundColor: "0xFFFFFF6f"
                                                            todayColor: "0xffffff"
                                                            todayBackgroundColor: "0x2988E6"
                                                          dataOut: BaseDate.calendarDate.minidayLable
                                                - actionType: evalObject
                                                  object: 
                                                    - .BaseDate.calendarDate.month@: 1
                                                    - .BaseDate.calendarDate.day@: 1
                                                - actionType: evalObject
                                                  object:
                                                    - =.builtIn.date.transformMonth:
                                                        dataIn:
                                                          month: =.BaseDate.calendarDate.month
                                                        dataOut: BaseDate.calendarDate.monthName
                                                - actionType: builtIn
                                                  funcName: redraw
                                                  viewTag: calendarTag
                                              style:
                                                height: "0.015"
                                        
                                    - type: list
                                      contentType: listObject
                                      listObject: 
                                        - key: SU
                                        - key: MO
                                        - key: TU
                                        - key: WE
                                        - key: TH
                                        - key: FR
                                        - key: SA
                                      iteratorVar: itemObject
                                      style:
                                        width: "0.21"
                                        margin: auto
                                        height: "0.02"
                                        justifyContent: "space-between"
                                        # backgroundColor: gray
                                      children:
                                        - type: listItem
                                          itemObject: ""
                                          style:
                                            width: "0.03"
                                            height: "0.02"
                                            boxSizing: "border-box"
                                            border: "none"
                                            padding: "0"
                                            display: "inline-block"
                                          children:
                                            - type: label 
                                              dataKey: itemObject.key
                                              style:
                                                color: "0x003254"
                                                width: "0.03"
                                                height: "0.02"
                                                fontSize: "14"
                                                # backgroundColor: "0xffffff"
                                                textAlign:
                                                  x: center
                                    - .ViewRow:
                                      style:
                                        alignItems: center
                                      children:
                                        - type: image
                                          path: blueright.png
                                          onClick:
                                            - emit:
                                                actions:
                                                    - =.builtIn.date.LastWeek:
                                                        dataIn:
                                                          year: =.BaseDate.calendarDate.minidayLable.0.year
                                                          month: =.BaseDate.calendarDate.minidayLable.0.month
                                                          day: =.BaseDate.calendarDate.minidayLable.0.day
                                                        dataOut: BaseDate.calendarDate.tempDate
                                                    - =.builtIn.date.miniWeeklyCalendarArray:
                                                        dataIn:
                                                          year: =.BaseDate.calendarDate.tempDate.year
                                                          month: =.BaseDate.calendarDate.tempDate.month
                                                          today: 32
                                                          markDay: =.BaseDate.calendarDate.tempDate.day
                                                          color: "0x333333"
                                                          backgroundColor: "0xFFFFFF6f"
                                                          todayColor: "0xffffff"
                                                          todayBackgroundColor: "0x2988E6"
                                                        dataOut: BaseDate.calendarDate.minidayLable
                                            - actionType: evalObject
                                              object:
                                                - .BaseDate.calendarDate.year@: =.BaseDate.calendarDate.tempDate.year
                                                - .BaseDate.calendarDate.month@: =.BaseDate.calendarDate.tempDate.month
                                                - =.builtIn.date.transformMonth:
                                                    dataIn:
                                                      month: =.BaseDate.calendarDate.month
                                                    dataOut: BaseDate.calendarDate.monthName
                                            - actionType: builtIn
                                              funcName: redraw
                                              viewTag: calendarTag
                                          style:
                                            height: "0.015"

                                        - type: list
                                          viewTag: durationTag
                                          contentType: listObject
                                          listObject: =.BaseDate.calendarDate.minidayLable
                                          iteratorVar: itemObject
                                          style:
                                            margin: auto
                                            width: "0.21"
                                            height: "0.05"
                                            # backgroundColor: yellow
                                          children:
                                            - type: listItem
                                              itemObject: ""
                                              onClick:
                                                - emit:
                                                    dataKey:
                                                      var: itemObject
                                                    actions:
                                                      - =.builtIn.date.miniWeeklyCalendarArray:
                                                          dataIn:
                                                            year: $var.year
                                                            month: $var.month
                                                            today: $var.day
                                                            markDay: $var.day
                                                            color: "0x333333"
                                                            backgroundColor: "0xFFFFFF6f"
                                                            todayColor: "0xffffff"
                                                            todayBackgroundColor: "0x2988E6"
                                                          dataOut: BaseDate.calendarDate.minidayLable
                                                      - .BaseDate.calendarDate.year@: $var.year
                                                      - .BaseDate.calendarDate.month@: $var.month
                                                      - .BaseDate.calendarDate.day@: $var.day
                                                      - ..formData.currentDay@: $var.day
                                                - actionType: evalObject
                                                  object:
                                                    - =.builtIn.date.ShowDateByNumber:
                                                        dataIn:
                                                          year: =.BaseDate.calendarDate.year
                                                          month: =.BaseDate.calendarDate.month
                                                          day: =.BaseDate.calendarDate.day
                                                          formatType: "Y-M-D"
                                                        dataOut: BaseDate.calendarDate.todayDate
                                                    - =.builtIn.date.transformMonth:
                                                        dataIn:
                                                          month: =.BaseDate.calendarDate.month
                                                        dataOut: BaseDate.calendarDate.monthName
                                                    - =.builtIn.date.getTimeStampOfDate:
                                                        dataIn:
                                                          date: =.BaseDate.calendarDate.todayDate
                                                        dataOut: BaseDate.calendarDate.todayStamp
                                                    - =.builtIn.string.concat:
                                                        dataIn:
                                                          - "(stime<"
                                                          - =.BaseDate.calendarDate.todayStamp.start
                                                          - " AND "
                                                          - "etime>"
                                                          - =.BaseDate.calendarDate.todayStamp.start
                                                          - " OR "
                                                          - "stime>"
                                                          - =.BaseDate.calendarDate.todayStamp.start
                                                          - " AND "
                                                          - "etime<"
                                                          - =.BaseDate.calendarDate.todayStamp.end
                                                          - " OR "
                                                          - "stime<"
                                                          - =.BaseDate.calendarDate.todayStamp.end
                                                          - " AND "
                                                          - "etime>"
                                                          - =.BaseDate.calendarDate.todayStamp.end
                                                          - ")"
                                                          - " AND "
                                                          - "subtype="
                                                          - =..formData.subType
                                                        dataOut: ChangeRequest.formData.scheduleScondition 
                                                    - ..apiRequest.schedule.edge.sCondition@: =..formData.scheduleScondition
                                                    - if:
                                                      - =.builtIn.math.greater:
                                                          dataIn:
                                                            num1: =.BaseDate.calendarDate.todayStamp.end
                                                            num2: =.ChangeRequest.formData.nowTimeStamp
                                                      - continue
                                                      - actionType: popUp
                                                        popUpView: judgeTime
                                                        wait: true
                                                - actionType: updateObject
                                                  dataKey: ChangeRequest.apiRequest.schedule.scheduleList.edge
                                                  dataObject: []    # 将所得的可用时间置空,防止所选的那天为空,但是使用了缓存值
                                                - actionType: evalObject
                                                  object: 
                                                    .Global._nonce@: 
                                                      =.builtIn.math.random: ""
                                                - actionType: evalObject
                                                  object:
                                                  - =..apiRequest.schedule.edgeAPI.get: ""
                                                - actionType: evalObject
                                                  object: 
                                                    - ..formData.timeTable@: []
                                                    - if: 
                                                      - =..apiRequest.schedule.scheduleList.edge
                                                      - actionType: evalObject
                                                        object: 
                                                          - =.builtIn.date.splitTime:
                                                              dataIn:
                                                                object2: =..apiRequest.schedule.scheduleList.edge
                                                                timeSlot: =..formData.currentRequest.name.duration
                                                                year: =.BaseDate.calendarDate.year
                                                                month: =.BaseDate.calendarDate.month
                                                                day: =.BaseDate.calendarDate.day
                                                              dataOut: ChangeRequest.formData.timeTable
                                                          - =.builtIn.object.setProperty: 
                                                              dataIn: 
                                                                obj: =..formData.timeTable
                                                                label: "showTime"
                                                                text: ""
                                                                arr: ["color","backgroundColor"]
                                                                valueArr: ["0xffffff","#2988e6"]
                                                                errorArr: ["#4b4b4b","#E9F2FC"]
                                                              dataOut: ChangeRequest.formData.timeTable
                                                      - continue
                                                    - ..formData.nextColor@: "0xcdcdcd"
                                                - actionType: builtIn
                                                  funcName: redraw
                                                  viewTag: btnView
                                                - actionType: builtIn
                                                  funcName: redraw
                                                  viewTag: durationTag
                                                - actionType: builtIn
                                                  funcName: redraw
                                                  viewTag: DataTag
                                                # - actionType: evalObject
                                                #   object: 
                                                #     - ..splitTime@: []
                                              style:
                                                width: "0.03"
                                                height: "0.02"
                                                # boxSizing: "border-box"
                                                # border: "none"
                                                padding: "0"
                                                margin: "0"
                                                display: "inline-block"
                                                # flex: "auto"
                                                marginTop: "0.02"
                                              children:
                                                - type: label
                                                  dataKey: itemObject.day
                                                  style:
                                                    top: "0"
                                                    left: "0.0065"
                                                    width: "0.017"
                                                    height: "0.02"
                                                    color: itemObject.color
                                                    backgroundColor: itemObject.backgroundColor
                                                    borderRadius: "50"
                                                    fontSize: "18"
                                                    textAlign:
                                                      x: center
                                                      y: center

                                        - type: image
                                          path: blueleft.png
                                          style:
                                            height: "0.015"
                                          onClick:
                                            - emit:
                                                actions:
                                                  - =.builtIn.date.NextWeek:
                                                        dataIn:
                                                          year: =.BaseDate.calendarDate.minidayLable.6.year
                                                          month: =.BaseDate.calendarDate.minidayLable.6.month
                                                          day: =.BaseDate.calendarDate.minidayLable.6.day
                                                        dataOut: BaseDate.calendarDate.tempDate
                                                  - =.builtIn.date.miniWeeklyCalendarArray:
                                                        dataIn:
                                                          year: =.BaseDate.calendarDate.tempDate.year
                                                          month: =.BaseDate.calendarDate.tempDate.month
                                                          today: 32
                                                          markDay: =.BaseDate.calendarDate.tempDate.day
                                                          color: "0x333333"
                                                          backgroundColor: "0xFFFFFF6f"
                                                          todayColor: "0xffffff"
                                                          todayBackgroundColor: "0x2988E6"
                                                        dataOut: BaseDate.calendarDate.minidayLable
                                            - actionType: evalObject
                                              object:
                                                - .BaseDate.calendarDate.year@: =.BaseDate.calendarDate.tempDate.year
                                                - .BaseDate.calendarDate.month@: =.BaseDate.calendarDate.tempDate.month
                                                - =.builtIn.date.transformMonth:
                                                    dataIn:
                                                      month: =.BaseDate.calendarDate.month
                                                    dataOut: BaseDate.calendarDate.monthName
                                            - actionType: builtIn
                                              funcName: redraw
                                              viewTag: calendarTag
                                
                                - type: scrollView
                                  viewTag: DataTag
                                  style:
                                    width: "0.31"
                                    height: "0.34"
                                    margin: auto
                                  children:
                                    - type: list
                                      contentType: listObject
                                      listObject: ..formData.timeTable
                                      iteratorVar: itemObject
                                      viewTag: splitTimeTag
                                      style:
                                        margin: auto
                                        width: "0.31"
                                        height: "auto"
                                        backgroundColor: white
                                      children:
                                        - type: listItem
                                          itemObject: ""
                                          style:
                                            width: "0.05"
                                            height: "0.03"
                                            left: '0'
                                            float: left
                                            marginRight: "0.005"
                                            marginLeft: "0.005"
                                            marginTop: "0.01"
                                            backgroundColor: itemObject.backgroundColor
                                            border:   
                                              style: '3'
                                            borderColor: "0x2988e6"
                                            borderRadius: "5"
                                            cursor: pointer
                                            textAlign:
                                              x: center
                                              y: center
                                          onClick:
                                            - emit: 
                                                dataKey: 
                                                  var: itemObject
                                                actions: 
                                                  - .Global.clock@: $var
                                                  - ..formData.appointmentTime@: $var.showTime
                                            - actionType: evalObject
                                              object:
                                                - =.builtIn.object.setProperty: 
                                                      dataIn: 
                                                        obj: =..formData.timeTable
                                                        label: "showTime"
                                                        text: =..formData.appointmentTime
                                                        arr: ["color","backgroundColor"]
                                                        valueArr: ["0xffffff","#2988e6"]
                                                        errorArr: ["#4b4b4b","#E9F2FC"]
                                                      dataOut: ChangeRequest.formData.timeTable
                                                - ..formData.nextColor@: "0x2988E6"
                                            - actionType: builtIn
                                              funcName: redraw
                                              viewTag: btnView
                                            - actionType: builtIn
                                              funcName: redraw
                                              viewTag: DataTag
                                          children:
                                            - type: label
                                              dataKey: itemObject.showTime
                                              style: 
                                                fontSize: "0.8vw"
                                                color: itemObject.color
                                                cursor: pointer
                                - type: label
                                  text: "Next"
                                  viewTag: btnView
                                  style:
                                    width: "0.1"
                                    height: "0.04"
                                    borderRadius: "5px"
                                    color: "0xffffff"
                                    backgroundColor: ..formData.nextColor
                                    fontSize: .Nfont.h1
                                    marginLeft: "0.14"
                                    marginTop: "0.02"
                                    textAlign:
                                      x: center
                                      y: center
                                  onClick:
                                    - goto: CreateAppointment                      

        - .BaseWarningViewOne: 
          msg2: "The time before today cannot be selected. Please select the correct time!!!"
          onClick:
            - actionType: popUpDismiss
              popUpView: judgeTime
          viewTag: judgeTime
          style: 
            width: 1
            height: 1
