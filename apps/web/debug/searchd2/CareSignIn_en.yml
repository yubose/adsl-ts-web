CareSignIn:
  pageNumber: "30"
  init:
    - if:
      - =.Global.currentUser.vertex.sk #.builtIn.CareSignInOk
      - actionType: builtIn
        funcName: goBack
        reload: false
      - continue
  save:
    - =.builtIn.eccNaCl.decryptAES:
        dataIn:
          key: =..formData.password
          message: =.Global.currentUser.vertex.esk
        dataOut: CareSignIn.formData.sk  
    - =.builtIn.eccNaCl.skCheck:
        dataIn:
          pk: =.Global.currentUser.vertex.pk
          sk: =..formData.sk
        dataOut: CareSignIn.formData.pass
    - if:
      - =..formData.pass
      - .Global.currentUser.vertex.sk@: =..formData.sk
      - actionType: popUp
        popUpView: wrongPassword
        wait: true       
  check:
    - ..loginNewDevice.edge.name.verification_code@: =..formData.code
    - =.CareSignIn.loginNewDevice.edgeAPI.store: ""
    - actionType: evalObject
      object: 
        .Global._nonce@: 
          =.builtIn.math.random: ""     
    - if:
        - =.builtIn.string.equal:
            dataIn:
              string1: =..loginNewDevice.response.code
              string2: 1020   #unregistered user signin
        - actionType: popUp
          popUpView: userCannotfind
          wait: true
        - continue
    - if:
      - =.builtIn.string.equal:
          dataIn:
            string1: =..loginNewDevice.response.code
            string2: 0
      - continue
      - actionType: popUp
        popUpView: wrongCode
        wait: true
  update: 
    - =.CareSignIn.loginUser.edgeAPI.store: ""
    - =.CareSignIn.retrieveVertex.vertexAPI.get: ""
    - .Global.currentUser.vertex@: =..retrieveVertex.response.vertex.0
    - .Global.currentUser.JWT@: =..loginUser.response.jwt
    - =.builtIn.storeCredentials:
        dataIn:
          sk: =.Global.currentUser.vertex.sk
          pk: =.Global.currentUser.vertex.pk
          userId: =.Global.currentUser.vertex.id
          esk: =.Global.currentUser.vertex.esk
    - .Global.currentUser.dataCache.loadingDateTime@: =.Global.currentDateTime
    - .Global.rootNotebookID@: =.Global.currentUser.vertex.deat.rnb64ID
    - .Global.currentUser.dataCache.loadingDateTime@ : =.Global.currentDateTime
  formData:
    phoneShow: "block"
    userNameShow: "none"
    checkOk: "false"
    checkMessage: "no message"
    countryCode: "+1"   
    phoneNumber: ""
    password: ""
    code: ""
    sk: ""
    pass: ""
  retrieveVertex:
    response: ""
    vertex:
      .Vertex: ""
      id: =..loginNewDevice.response.edge.deat.user_id
    vertexAPI:
      get:
        api: rv
        dataIn: CareSignIn.retrieveVertex.vertex
        dataOut: CareSignIn.retrieveVertex.response  
  verificationCode:
    response: ""
    edge:
      .Edge: ""
      type: 1010
      _nonce: =.Global._nonce
      name:
        phone_number: =..apiData.phoneNumber
    edgeAPI:
      .EdgeAPI: ""
      store:
        api: ce
        dataIn: CareSignIn.verificationCode.edge
        dataOut: CareSignIn.verificationCode.response
  loginNewDevice:
    response: ""
    edge:
      .Edge: ""
      type: 1040
      _handledCode: 1020
      _nonce: =.Global._nonce
      name:
        phone_number: =..apiData.phoneNumber
        verification_code: ""
      deat:
        UserId: ""
        Pk: ""
        Esk: ""
    edgeAPI:
      .EdgeAPI: ""
      store:
        api: ce
        dataIn: CareSignIn.loginNewDevice.edge
        dataOut: CareSignIn.loginNewDevice.response
  loginUser:
    response: ""
    edge:
      .Edge: ""
      type: 1030
      _nonce: =.Global._nonce
      bvid: =..loginNewDevice.response.edge.deat.user_id
    edgeAPI:
      .EdgeAPI: ""
      store:
        api: ce
        dataIn: CareSignIn.loginUser.edge
        dataOut: CareSignIn.loginUser.response
  getVertex:
    response: ""
    vertex:
      id: ""
      xfname: none
      type: 1
      sCondition: =..rvCondition
      _nonce: =.Global._nonce
    vertexAPI:
      get:
        api: rv
        dataIn: CareSignIn.getVertex.vertex
        dataOut: CareSignIn.getVertex.response
  apiData:
    phoneNumber: ""  

  initFocus: phoneNumberVT
  changeColor: 
    phone:  
      color: "0xffffff"
      backgroundColor: "0x2988e6"        
      borderColor: "0xF4F4F5"  
    userName:  
      color: "0x4B4B4B"
      borderColor: "0xF4F4F5"
      backgroundColor: "0xE9F2FC"   
    password: 
      borderColor: "0xF4F4F5"
  baseColor: 
    blueBgColor: '0x2988e6'
    otherBgColor: "0xE9F2FC"
    blueColor: "0xffffff"
    otherColor: "0x4B4B4B"
  basePhoneWeight: "600"
  baseUserWeight: "400"
  components:
    - type: view
      style:
        width : "1"
        height: "1"
        margin: auto
      children:
        - type: popUp
          viewTag: inputVerificationCode
          style:
            top: "0"
            width : "1"
            height: "1"
            backgroundColor: "0x00000040"
            display: flex
            flexDirection: column
            justifyContent: center
            alignItems: center  
            zIndex: "10"
          children:
            - type: view
              style:
                width: 23vw
                height: 16vw
                borderRadius: "10"
                backgroundColor: '0xffffff'
                display: flex
                flexDirection: column
                justifyContent: space-around
                alignItems: center
              children:
                - type: label
                  text: "Enter the 6-digit verification code"
                  style:
                    width: 22vw
                    color: "0x333333"
                    fontSize: .Nfont.h0_1
                    display: inline
                    # fontStyle: "bold"
                    fontFamily: "sans-serif"
                    textAlign:
                      x: center
                      y: center
                - type: view
                  style: 
                    width: 14vw
                    height: 2.5vw
                    border: 
                      style: "3"
                      color: "0xb5b5b8"
                    borderWidth: "1"
                    textAlign:
                      x: center
                      y: center     
                  children:
                    - type: textField
                      contentType: text
                      dataKey: formData.code
                      required: "true"
                      style:
                        width: 13vw
                        height: 2.4vw
                        color: "0x33333388"
                        fontSize: .Nfont.h0_1
                        display: inline
                        textAlign: 
                          x: center
                          y: center
                - type: view
                  style:
                    width: 14vw
                    height: 3vw 
                    display: flex
                    flexDirection: row
                  children:
                    - type: button
                      onClick:
                        - actionType: popUpDismiss
                          popUpView: inputVerificationCode
                      text: CANCEL
                      style:
                        width: 7vw
                        height: 3vw
                        fontSize: .Nfont.h0_0
                        color: '0x333333cc'
                        backgroundColor: "0xffffff"
                        textAlign:
                          x: center
                          y: center
                        border:
                          style: "5"
                          borderRadius: "5" 
                    - type: button
                      onClick:
                        - actionType: popUpDismiss
                          popUpView: inputVerificationCode
                        - actionType: evalObject
                          object: ..check
                        - actionType: evalObject
                          object:
                            =.builtIn.eccNaCl.decryptAES:
                              dataIn:
                                key: =..formData.password
                                message: =..loginNewDevice.response.edge.deat.esk
                              dataOut: CareSignIn.formData.sk  
                        - actionType: evalObject
                          object:
                            =.builtIn.eccNaCl.skCheck:
                              dataIn:
                                pk: =..loginNewDevice.response.edge.deat.pk
                                sk: =..formData.sk
                              dataOut: CareSignIn.formData.pass
                        - actionType: evalObject
                          object:
                            - if:
                              - =..formData.pass
                              - .Global.currentUser.vertex.sk@: =..formData.sk
                              - actionType: popUp
                                popUpView: wrongPassword
                                wait: true
                        - actionType: evalObject
                          object: ..update
                        - actionType: evalObject
                          object:
                            - .Global.clock@: =.PersonalDetail.clock
                            - .Global.newAppointment@: =.PersonalDetail.newAppointment
                            - .Global.isCreateAppointment@: false 
                            - .Global.isSignIn@: true
                        - actionType: evalObject
                          object:
                            - if:
                              - =.Global.currentUser.vertex.sk 
                              - goto: =.Global.GoSignUp
                              - continue
                      text: SUBMIT
                      style:
                        width: 7vw
                        height: 3vw
                        fontSize: .Nfont.h0_0
                        backgroundColor: "0x388ecc"
                        borderRadius: "5px"
                        color: '0xffffff'
                        textAlign:
                          x: center
                          y: center
                        border:
                          style: "5"
                          borderRadius: "5" 

        - .BaseWarningViewOne: ""
          msg2: "Incorrect Password"
          viewTag: wrongPassword
          style: 
            width: "1"
            height: "1"
        - .BaseWarningViewOne: ""
          msg2: Invalid phone number format Use numbers only, 10 digits required
          viewTag: WrongPhoneNum
          style: 
            width: "1"
            height: "1"
        - .BaseWarningViewOne: ""
          msg2: "No password entered. Password required"
          viewTag: NoPassword
          style: 
            width: "1"
            height: "1"
        - .BaseWarningViewOne: ""
          msg2: "Invalid Username: Required length should be 6 to 16"
          viewTag: invaliduserid
          style: 
            width: "1"
            height: "1"
        - .BaseWarningViewOne: ""
          msg2: "Cannot Find the User"
          viewTag: userCannotfind
          style: 
            width: "1"
            height: "1"
        - .BaseWarningViewOne: ""
          msg2: "Incorrect verificationCode"
          viewTag: wrongCode
          style: 
            width: "1"
            height: "1"
        - type: view
          style:
            width: "1"
            display: flex
            flexDirection: row
            justifyContent: space-between
          children:
            - type: view
              style:
                width: "0.555"
                height: "1"
              children:
                - type: image
                  path: bg.png
                  style:
                    top: 0
                    width: "0.555"
                    height: "1"
                - type: image
                  path: bgColor.svg
                  style:
                    top: 0
                    width: "0.555"
                    height: "1"
                - type: view
                  style:
                    display: flex
                    flexDirection: column
                    alignItems: center
                    top: 0
                    left: 0
                    width: 60vw
                    height: 50vw
                  children:
                    - type: view
                      style:
                        display: flex
                        flexDirection: row
                        width: 50vw
                        marginTop: 2vw
                      children:
                        - type: image
                          path: white.svg
                          style:
                            width: 1.3vw
                            hieght: 1.3vw
                          onClick:
                            - actionType: builtIn
                              funcName: goBack
                              reload: true
                        - type: label
                          text: "Back"
                          style:
                            marginLeft: 0.5vw
                            color: "#ffffff"
                            fontSize: .Nfont.h3
                            fontWeight: 500
                          onClick:
                            - actionType: builtIn
                              funcName: goBack
                              reload: true
                    - type: label
                      textBoard: 
                        - text: Welcome To 
                        - br: 
                        - text: Aitmed
                          fontWeight: 700 
                      style: 
                        marginTop: "0.3"
                        color: "0xffffff"
                        textAlign: 
                          x: center
                        fontSize: "6.6vh"
                        lineHeight: "1.5"
                        letterSpacing: "2.5px"
                    - type: label
                      text: "WWW.AITMED.COM"
                      style: 
                        width: "0.46"
                        marginTop: "0.35"
                        color: "0xffffff"
                        textAlign: 
                          x: center
                        fontSize: "2.5vh"
                        lineHeight: "1.5"
                        letterSpacing: "2.5px"
            - type: view
              style:
                width: "0.41"
                height: '1'
                marginLeft: "0.1"
                display: flex
                flexDirection: column
              children:
                - type: image
                  path: aitmedCare.svg
                  style:
                    marginTop: 6vw
                    width: 10vw
                - type: view
                  style:
                    width: "0.3"
                    height: "0.65"
                    marginTop: "0.04"
                    backgroundColor: "#ffffff"
                    borderRadius: "7px"
                    border: 
                      style: "3"
                    borderColor: "#EEF6FD"
                    boxShadow: "0px 0px  8px 5px #EEF6FD"
                    display: flex
                    flexDirection: column
                    alignItems: center
                  children:
                    - type: view
                      style:
                        width: "20vw"
                        marginTop: 1.5vw
                        fontSize: 1.5vw
                        fontWeight: "500"
                        textAlign:
                          x: left
                      children:
                        - type: label
                          text: Hello!
                          style:
                            width: "20vw"
                            marginTop: 1.5vw
                            fontSize: .Nfont.h6
                            fontWeight: "500"
                            textAlign:
                              x: left
                        - type: label
                          text: Sign In To Continue
                          style:
                            marginTop: 0.5vw
                            width: "20vw"
                            fontSize: .Nfont.h1
                            textAlign:
                              x: left
                    - type: view
                      viewTag: userOrPhone
                      style:
                        display: flex
                        marginTop: "0.0221"  #17.95px
                        borderRadius: "20"
                        width: "20vw"
                      children:
                        - type: view
                          style: 
                            backgroundColor: "0xE9F2FC"
                            borderRadius: "20px 0 0 20px"
                          children:
                            - type: label
                              text: "Phone"
                              style:                     
                                paddingLeft: "0.015" 
                                paddingRight: "0.015"
                                paddingTop: "0.009"
                                paddingBottom: "0.009"
                                fontWeight: ..basePhoneWeight
                                color: ..changeColor.phone.color
                                fontSize: .Nfont.h0
                                backgroundColor: ..changeColor.phone.backgroundColor
                                borderRadius: "20"
                              onClick:                        
                                - actionType: evalObject
                                  object:
                                    - ..apiData.phoneNumber@: ""
                                    - ..formData.phoneNumber@: ""
                                    - ..userNameRv@: ""    
                                    - ..formData.password@: ""
                                    - ..formData.checkOk@: false
                                    - ..formData.phoneShow@: "block"
                                    - ..formData.userNameShow@: "none"
                                - actionType: evalObject
                                  object:
                                    - ..changeColor.phone.backgroundColor@: =..baseColor.blueBgColor
                                    - ..changeColor.phone.color@: =..baseColor.blueColor
                                    - ..changeColor.userName.backgroundColor@: =..baseColor.otherBgColor
                                    - ..changeColor.userName.color@: =..baseColor.otherColor
                                    - ..baseUserWeight@: "400"
                                    - ..basePhoneWeight@: "600"
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: userOrPhone
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: usePhoneNumber 
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: useUserName                                               
                        - type: view
                          style:
                            backgroundColor: "0xE9F2FC"
                            borderRadius: "0 20px 20px 0"
                          children:                          
                            - type: label
                              text: "Username"
                              style:
                                # paddingLeft: "12px"
                                # paddingRight: "12px"
                                # paddingTop: "7.5px"
                                # paddingBottom: "7.5px"    
                                paddingLeft: "0.01" 
                                paddingRight: "0.01"
                                paddingTop: "0.009"
                                paddingBottom: "0.009"
                                fontWeight: ..baseUserWeight
                                backgroundColor: ..changeColor.userName.backgroundColor
                                fontSize: .Nfont.h0
                                color: ..changeColor.userName.color
                                borderRadius: "20"
                              onClick:                  
                                - actionType: evalObject
                                  object:
                                    - ..apiData.phoneNumber@: ""
                                    - ..formData.phoneNumber@: "8888888888"
                                    - ..formData.checkOk@: true
                                    - ..formData.password@: ""
                                    #- ..rvCondition@: ""    
                                    - ..formData.phoneShow@: "none"
                                    - ..formData.userNameShow@: "block"                  
                                - actionType: evalObject
                                  object:
                                    - ..baseUserWeight@: "600"
                                    - ..basePhoneWeight@: "400"
                                    - ..changeColor.userName.backgroundColor@: =..baseColor.blueBgColor
                                    - ..changeColor.userName.color@: =..baseColor.blueColor
                                    - ..changeColor.phone.backgroundColor@: =..baseColor.otherBgColor
                                    - ..changeColor.phone.color@: =..baseColor.otherColor
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: userOrPhone  
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: usePhoneNumber 
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: useUserName    
                    
                    - type: view
                      viewTag: usePhoneNumber
                      style:
                        display: ..formData.phoneShow
                      children:
                        - .ViewRow:
                          style:
                            width: 20vw
                            marginTop: 1vw
                          children:
                            - .ViewColumn:
                              style: 
                                marginLeft: 0
                              children:
                                - type: label
                                  textBoard: 
                                    - text: Country
                                      fontWeight: 600
                                    - text: "*"
                                      color: "0xFB5051"
                                  style:
                                    width: 4.5vw
                                    fontSize: .Nfont.h0
                                    fontWeight: "500"
                                - type: select
                                  contentType: countryCode
                                  placeholder: ..formData.countryCode
                                  dataKey: formData.countryCode # formData.countryCode : inputValue
                                  options:
                                    .CountryCode
                                  required: "true"
                                  style:
                                    marginTop: 0.5vw
                                    width: 4vw
                                    height: "0.043"
                                    fontSize: .Nfont.h0
                                    placeholder: "US +1"
                                    borderWidth: "2"
                                    border:
                                      style: "3"
                                      color: "0xDEDEDE"  
                                    borderRadius: "7px"
                            - .ViewColumn:
                              children:
                                - type: label
                                  textBoard: 
                                    - text: Phone
                                      fontWeight: 600
                                    - text: "*"
                                      color: "0xFB5051"
                                  style:
                                    width: 2.5vw
                                    fontSize: .Nfont.h0
                                    fontWeight: "500"
                                - type: textField # take users' input
                                  viewTag: phoneNumberVT
                                  contentType: phoneNumber
                                  placeholder: "Your phone number"
                                  dataKey: formData.phoneNumber  # users' input will be saved to this key
                                  required: "true"
                                  onChange:
                                    - emit:
                                        actions:
                                          - =.builtIn.typeCheck.phoneNumber:
                                              dataIn:
                                                phoneNumber: =..formData.phoneNumber
                                                countryCode: =..formData.countryCode
                                              dataOut: CareSignIn.formData.checkOk
                                          - if:
                                            - =..formData.checkOk
                                            - continue
                                            - ..formData.checkMessage@: "Unacceptible phone number format example: 888-999-0000"
                                  style:
                                    marginTop: 0.5vw
                                    textIndent: 0.5em
                                    fontSize: .Nfont.h0
                                    width: 15vw
                                    height: "0.04"
                                    borderWidth: "2"
                                    border:
                                      style: "3"
                                      color: "0xDEDEDE"  
                                    borderRadius: "7px"     
                                    textAlign: 
                                      y: center  
                    - .ViewColumn:
                      viewTag: useUserName
                      style:
                        width: 20vw
                        marginTop: 1vw
                        display: ..formData.userNameShow
                        alignItems: flex-start
                      children:
                        - type: label
                          textBoard: 
                            - text: Username
                              fontWeight: 600
                            - text: "*"
                              color: "0xFB5051"
                          style:
                            fontSize: .Nfont.h0
                            marginLeft: 0
                            fontWeight: "500"
                            # fontFamily: "Poppins"               
                        - type: view
                          style:
                            marginTop: 0.5vw
                            width: 20vw
                            height: 2.5vw
                            borderWidth: "2"
                            border:
                              style: "3"
                              color: "0xDEDEDE"  
                            borderRadius: "7px"   
                          children:
                            - type: textField # take users' input
                              dataKey: apiData.phoneNumber
                              viewTag: userNameVT
                              placeholder: " Enter here"
                              style:
                                textAlign:
                                  x: left
                                fontSize: .Nfont.h0
                                marginLeft: 0.5vw
                                marginTop: 0.25vw
                                width: 16vw
                                height: 2vw
                                required: "true"
                                borderWidth: "1"
                                box-sizing: "border-box"
                                border: "none"  
                              onChange:
                                - emit:
                                    actions:
                                      - =.builtIn.string.concat:
                                          dataIn:
                                            - "uid like '"
                                            - =.CareSignIn.apiData.phoneNumber
                                            - "%'"
                                          dataOut: CareSignIn.userNameRv      
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: userNameVT 
                        
                    - .ViewColumn:
                      style: 
                        width: 20vw
                        alignItems: flex-start
                        marginTop: 1vw
                      children: 
                        - type: label
                          textBoard: 
                            - text: Password
                              fontWeight: 600
                            - text: "*"
                              color: "0xFB5051"
                          style: 
                            fontSize: .Nfont.h0
                        - type: view
                          style:
                            marginTop: 0.5vw
                            width: 20vw
                            height: 2.5vw
                            borderWidth: "2"
                            border:
                              style: "3"
                              color: "0xDEDEDE"  
                            borderRadius: "7px"
                            display: flex
                            flexDirection: row
                            alignItems: center
                            justifyContent: space-around
                          children:
                            - type: textField
                              contentType: password
                              placeholder: "Your password"
                              dataKey: formData.password
                              required: "true"
                              style:
                                textIndent: 0.5em
                                textAlign:
                                    x: left
                                fontSize: .Nfont.h0
                                width: 20vw
                                height: 2.5vw
                                backgroundColor: "0x388ecc00"
                        # - type: label
                        #   text: Forgot Password
                        #   onClick:
                        #     - actionType: popUp
                        #       popUpView: resetUser  
                        #   style:
                        #     width: 20vw
                        #     fontSize: .Nfont.h0
                        #     marginTop: 0.3vw
                        #     color: "#666666"
                        #     display: inline
                        #     textAlign: 
                        #       x: right
                        #       y: center
                    - type: button
                      text: Sign In
                      style:
                        color: "0xffffffff"
                        fontSize: .Nfont.h0
                        marginTop: 2vw
                        width: 20vw
                        height: 2.5vw
                        backgroundColor: "0x2988E6"
                        border:
                          style: "1"
                        display: inline
                        borderRadius: "5px"
                        textAlign:
                          x: center
                          y: center
                      onClick: 
                        - actionType: evalObject
                          object: 
                            - if:
                              - =.builtIn.string.equal:
                                  dataIn:
                                    string1: =.CareSignIn.formData.phoneNumber
                                    string2: ""   
                              - actionType: popUp
                                popUpView: WrongPhoneNum
                                wait: true
                              - continue
                            - if:
                              - =.builtIn.string.equal:
                                  dataIn:
                                    string1: =.CareSignIn.formData.password
                                    string2: ""   
                              - actionType: popUp
                                popUpView: NoPassword
                                wait: true
                              - continue
                              
                            - if:
                                - =..userNameRv
                                - actionType: evalObject
                                  object: 
                                    - ..rvCondition@: =..userNameRv
                                    - =..getVertex.vertexAPI.get: ""
                                    - if:
                                      - =..getVertex.response.vertex.0.id
                                      - actionType: evalObject
                                        object:
                                          - if:
                                            - =..getVertex.response.vertex.0.pk
                                            - continue
                                            - actionType: popUp
                                              popUpView: inviteUser
                                              wait: true
                                      - actionType: popUp
                                        popUpView: userCannotfind
                                        wait: true
                                - =.builtIn.string.concat:
                                    dataIn:
                                      - =.CareSignIn.formData.countryCode
                                      - " "
                                      - =.CareSignIn.formData.phoneNumber
                                    dataOut: CareSignIn.apiData.phoneNumber
                            
                        - actionType: evalObject
                          object: 
                            - if: 
                                - =.Global.currentUser.vertex.esk  
                                - actionType: evalObject
                                  object: ..save
                                - continue
                        - actionType: evalObject
                          object:
                            - if:
                                - =.Global.currentUser.vertex.sk
                                - actionType: builtIn
                                  funcName: goBack
                                  reload: true
                                - continue  
                            - .TitleInfo@: 1
                        - actionType: evalObject
                          object: 
                            - if:
                              - =.Global.currentUser.vertex.sk
                              - continue 
                              - actionType: evalObject
                                object: 
                                  - =.CareSignIn.verificationCode.edgeAPI.store: ""
                                  - =.builtIn.string.retainNumber:
                                      dataIn:
                                        value: =.CareSignIn.verificationCode.response.edge.tage
                                      dataOut: CareSignIn.formData.code
                        - actionType: evalObject
                          object: 
                            - if:
                              - =.builtIn.string.equal:
                                  dataIn:
                                    string1: =..verificationCode.response.code
                                    string2: 1052
                              - actionType: popUp
                                popUpView: invaliduserid
                                wait: true
                              - continue
                            - if:
                              - =.builtIn.string.equal:
                                  dataIn:
                                    string1: =..verificationCode.response.code
                                    string2: 3004
                              - actionType: popUp
                                popUpView: userCannotfind
                                wait: true
                              - continue
                            - .Global.PaitentSign@: true
                        - actionType: evalObject
                          object: 
                            .Global._nonce@: 
                              =.builtIn.math.random: ""        
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: inputVerificationCode
                        - actionType: popUp
                          popUpView: inputVerificationCode
                    - .ViewRow:
                      style:
                        alignItems: center
                        width: "20vw"
                        justifyContent: space-between
                        marginTop: 1vw
                        marginLeft: 0
                      children: 
                        - type: label
                          style:
                            height: 0.1vw
                            width: 8vw
                            backgroundColor: "#C4C4C4"      
                        - type: label
                          text: OR
                          style:
                            fontSize: .Nfont.h0_0
                            color: "#333333"          
                        - type: label
                          style:
                            height: 0.1vw
                            width: 8vw
                            backgroundColor: "#C4C4C4"
                    - .ViewRow:
                      style:
                        width: 20vw
                        justifyContent: center
                        marginLeft: 0
                        marginTop: 1vw
                      children:
                        - type: label
                          text: Don't have an account? 
                          style:
                            color: "0x333333"
                            fontSize: .Nfont.h0_1
                        - type: label
                          text: Sign Up Now
                          style:
                            color: "#143459"
                            lineHeight: 1.3vw
                            fontSize: .Nfont.h0_1
                            fontWeight: 550
                            marginLeft: 0.5vw
                          onClick: 
                            - goto: CareSignUp
    # - type: popUp
    #   viewTag: resetUser
    #   style:
    #     top: "0"
    #     width : "1"
    #     height: "1"
    #     marginLeft: 6vw
    #     backgroundColor: "0x00000040"
    #     display: flex
    #     flexDirection: column
    #     justifyContent: center
    #     alignItems: center 
    #   children:
    #     - type: view
    #       style:
    #         width: 23vw
    #         height: 16vw
    #         borderRadius: "10"
    #         backgroundColor: '0xffffff'
    #         display: flex
    #         flexDirection: column
    #       children:
    #         - type: label
    #           text: "Forgot password?"
    #           style:
    #             marginTop: 1vw
    #             width: 23vw
    #             color: "0x333333"
    #             fontWeight: "600"
    #             fontSize: .Nfont.h0_1
    #             fontFamily: "sans-serif"
    #             textAlign:  
    #               x: center
    #         - type: label
    #           text: "When using blockchain technology, there is no way for us at AiTmed to recover your password. It is blockchain-encrypted for your security and privacy."
    #           style:
    #             marginTop: 1vw
    #             width: 22vw
    #             color: "0x333333"
    #             fontSize: .Nfont.h0_1
    #             display: inline
    #             fontFamily: "sans-serif"
    #             textAlign:
    #               x: center
    #         - type: label
    #           text: "To reset your password, you must create a new account."
    #           style:
    #             marginTop: 1vw
    #             width: 22vw
    #             color: "0x333333"
    #             fontSize: .Nfont.h0_1
    #             display: inline
    #             fontFamily: "sans-serif"
    #             textAlign:
    #               x: center
    #         - type: label
    #           text: "THIS WILL RESET YOUR ACCOUNT AND DELETE ANY PREVIOUSLY STORED INFORMATION"
    #           style:
    #             marginTop: 1vw
    #             width: 22vw
    #             color: "0x333333"
    #             fontSize: .Nfont.h0_1
    #             display: inline
    #             fontFamily: "sans-serif"
    #             textAlign:
    #               x: center
    #         - type: label
    #           text: "This action cannot be undone."
    #           style:
    #             marginTop: 1vw
    #             width: 22vw
    #             color: "0x333333"
    #             fontSize: .Nfont.h0_1
    #             display: inline
    #             fontFamily: "sans-serif"
    #             textAlign:
    #               x: center
    #         - type: view
    #           style:
    #             marginTop: 1vw
    #             width: 23vw
    #             height: 2vw
    #             display: flex
    #             flexDirection: row
    #             justifyContent: space-between
    #             borderTop: "1px solid #333333"
    #             borderWidth: 1px
    #           children:
    #             - type: button
    #               onClick: 
    #                 - actionType: popUpDismiss
    #                   popUpView: resetUser
    #               text: Cancel
    #               style:
    #                 width: 11.5vw
    #                 height: 2vw
    #                 fontSize: 0.9vw
    #                 color: '#0062FF'
    #                 backgroundColor: "0xffffff"
    #                 fontWeight: "600"
    #                 textAlign:
    #                   x: center
    #                   y: center
    #                 borderRadius: 5px
    #             - type: divider
    #               style: 
    #                 width: 1px
    #                 height: 2vw
    #                 backgroundColor: "#333333"
    #                 marginTop: 0
    #             - type: button
    #               onClick: 
    #                 - actionType: popUpDismiss
    #                   popUpView: resetUser
    #                 - goto: CareSignUp  
    #               text: Continue
    #               style:
    #                 width: 11.5vw
    #                 height: 2vw
    #                 fontSize: 0.9vw
    #                 color: '#0062FF'
    #                 backgroundColor: "0xffffff"
    #                 fontWeight: "600"
    #                 textAlign:
    #                   x: center
    #                   y: center
    #                 borderRadius: 5px 
            
    