ProviderScheduleAppointment:
  title: ProviderScheduleAppointment
  pageNumber:
  init:
    - .Global.baseFontColor@: "0x333333"
    - actionType: evalObject
      object: 
        .Global._nonce@: 
          =.builtIn.math.random: ""
    - actionType: evalObject  
      object: 
        - =.builtIn.date.generateYear:
            dataIn:
              last: 80
              next: 10
            dataOut: BaseDate.year
    - actionType: evalObject 
      object: 
        .BaseDate.getDate
    - .BaseDate.calendarDate.minidayLable@: []
    - actionType: evalObject 
      object: 
        - =.builtIn.date.getMonth:
            dataIn: 
            dataOut: ProviderScheduleAppointment.calendarDate.month
        - =.builtIn.date.getYear: 
            dataIn: 
            dataOut: ProviderScheduleAppointment.calendarDate.year
        - =.builtIn.date.getDate: 
            dataIn: 
            dataOut: ProviderScheduleAppointment.calendarDate.day   
    - actionType: evalObject  
      object:
        - =.builtIn.date.calendarArray:
            dataIn:
              year: =.ProviderScheduleAppointment.calendarDate.year
              month: =.ProviderScheduleAppointment.calendarDate.month
              today: =.ProviderScheduleAppointment.calendarDate.day
            dataOut: ProviderScheduleAppointment.calendarDate.dayLable
        - =.builtIn.date.transformMonth:
            dataIn:
              month: =.ProviderScheduleAppointment.calendarDate.month
            dataOut: ProviderScheduleAppointment.calendarDate.monthName
        - =.builtIn.date.ShowDateByNumber:
            dataIn:
              year: =.ProviderScheduleAppointment.calendarDate.year
              month: =.ProviderScheduleAppointment.calendarDate.month
              day: =.ProviderScheduleAppointment.calendarDate.day
              formatType: "Y-M-D"
            dataOut: ProviderScheduleAppointment.calendarDate.todayDate
    - if:  
      - =.Global.calendarDate.year
      - actionType: evalObject
        object:
          - .BaseDate.calendarDate.year@: =.Global.calendarDate.year
          - .BaseDate.calendarDate.month@: =.Global.calendarDate.month
          - .BaseDate.calendarDate.day@: =.Global.calendarDate.day
      - actionType: evalObject
        object:
          - .BaseDate.calendarDate.year@: =.BaseDate.calendarDate.year
          - .BaseDate.calendarDate.month@: =.BaseDate.calendarDate.month
          - .BaseDate.calendarDate.day@: =.BaseDate.calendarDate.day
    - =.builtIn.date.calendarArray:
        dataIn:
          year: =.BaseDate.calendarDate.year
          month: =.BaseDate.calendarDate.month
          today: =.BaseDate.calendarDate.day
        dataOut: BaseDate.calendarDate.dayLable
    - =.builtIn.date.miniWeeklyCalendarArray:
        dataIn:
          year: =.BaseDate.calendarDate.year
          month: =.BaseDate.calendarDate.month
          today: =.BaseDate.calendarDate.day
          markDay: =.BaseDate.calendarDate.day
          color: "0x000000"
          backgroundColor: "0xFFFFFF6f"
          todayColor: "0xffffff"
          todayBackgroundColor: "0x2988E6"
        dataOut: BaseDate.calendarDate.minidayLable
    - =.builtIn.date.transformMonth:
        dataIn:
          month: =.BaseDate.calendarDate.month
        dataOut: BaseDate.calendarDate.monthName
    - =.builtIn.date.ShowDateByNumber:
        dataIn:
          year: =.BaseDate.calendarDate.year
          month: =.BaseDate.calendarDate.month
          day: =.BaseDate.calendarDate.day
          formatType: "Y-M-D"
        dataOut: BaseDate.calendarDate.todayDate
    - =.builtIn.date.ShowDateByNumber:
        dataIn:
          year: =.BaseDate.calendarDate.year
          month: =.BaseDate.calendarDate.month
          day: =.BaseDate.calendarDate.day
        dataOut: ProviderScheduleAppointment.formData.selectDate
    - if:
      - =.builtIn.string.equal:
          dataIn:
            string1: =.Global.AppointmentvisitType
            string2: ""
      - actionType: evalObject
        object:
          - ..apiRequest.newAppointment.edge.name.visitType@: "Telemedicine"
          - ..apiRequest.newAppointment.edge.name.visitTypeShow@: "Telemedicine"
          - .Global.AppointmentvisitType@: 196609
          - .Global.AppointmentvisitTypeShow@: "Telemedicine"
      - actionType: evalObject
        object:
          - ..apiRequest.newAppointment.edge.name.visitType@: =.Global.AppointmentvisitType
          - ..apiRequest.newAppointment.edge.name.visitTypeShow@: =.Global.AppointmentvisitTypeShow
    
    - if:
      - =.builtIn.string.equal:
          dataIn:
            string1: =.Global.FacilityLink
            string2: true
      - actionType: evalObject
        object: 
          - .BaseDate.schedule.edge.id.0@: =.Global.MedicalFacilityVertex.id
          - .BaseDate.schedule.edge.id.1@: =.Global.ProviderInfo.bsig
          - ..formData.dataObject@: =.Global.ProviderInfo.name.data
          - ..formData.dataObject.specialty@: =.Global.ProviderInfo.name.data.selectedSpecialty
          - ..formData.dataObject.language@: =.Global.ProviderInfo.name.data.languages
          - ..formData.currentType@: 196609
          - ..apiRequest.getFacilityVertex.vertex.id@: =.Global.MedicalFacilityVertex.id
          - ..apiRequest.selectEdge.edgeReq.id.1@: =.Global.ProviderInfo.bsig
          - ..formData.currentFacilityId@: =.Global.MedicalFacilityVertex.id
          - .ProviderScheduleAppointment.apiRequest.newAppointment.edge.evid@: ""
          - .ProviderScheduleAppointment.apiRequest.newAppointment.edge.name.providerName@: =.Global.ProviderInfo.name.data.fullName
          - ..formData.appointmentProviderName@: =.Global.ProviderInfo.name.data.fullName
          - .ProviderScheduleAppointment.apiRequest.newAppointment.edge.evid@: =.Global.ProviderInfo.bsig
          - ..formData.ProviderAvtar@: =.Global.ProviderInfo.name.data.avatar
          - ..apiRequest.newAppointment.edge.name.providerId@: =.Global.ProviderInfo.bsig
      - continue
    - if:
      - =.Global.Provider._source.vid
      - actionType: evalObject
        object: 
          - .BaseDate.schedule.edge.id.0@: =.Global.Provider._source.bvid
          - .BaseDate.schedule.edge.id.1@: =.Global.Provider._source.vid
          - ..formData.currentType@: =.Global.Provider._source.visitType
          - if:
            - =.builtIn.string.equal:
                dataIn:
                  string1: =..formData.currentType
                  string2: "Telemedicine"
            - ..formData.currentType@: 196609
            - ..formData.currentType@: 131073
          - ..apiRequest.getFacilityVertex.vertex.id@: =.Global.Provider._source.bvid
          - ..apiRequest.getLocation.vertex.id@: =.Global.Provider._source.bvid
          - ..formData.currentFacilityId@: =.Global.Provider._source.bvid
          - ..apiRequest.selectEdge.edgeReq.id.1@: =.Global.Provider._source.vid
          - .ProviderScheduleAppointment.apiRequest.newAppointment.edge.evid@: ""
          - .ProviderScheduleAppointment.apiRequest.newAppointment.edge.evid@: =.Global.Provider._source.vid
          - .ProviderScheduleAppointment.apiRequest.newAppointment.edge.name.providerName@: =.Global.Provider._source.fullName
          - ..formData.appointmentProviderName@: =.Global.Provider._source.fullName
          - ..formData.ProviderAvtar@: =.Global.Provider._source.avatar
          - ..apiRequest.newAppointment.edge.name.providerId@: =.Global.Provider._source.vid
      - continue
    - =..apiRequest.getFacilityVertex.get: ""
    - ..apiRequest.fac_RootNotebook.edgeReq.id@: =..apiRequest.getFacilityVertex.response.vertex.0.id
    - =..apiRequest.fac_RootNotebook.edgeAPI.get: ""
    - ..apiRequest.facility.documentReq.id@: =..apiRequest.fac_RootNotebook.edge.edge.0.id
    - =..apiRequest.facility.docAPI.get: ""
    - .Global.FacilityInfos@: =..apiRequest.facility.response.doc.0
    - .Global.FacilityInfosId@: =..apiRequest.facility.response.doc.0.bsig
    - ..apiRequest.selectEdge.edgeReq.id.0@: =..apiRequest.facility.response.doc.0.bsig
    - =..apiRequest.selectEdge.edgeAPI.get: ""
    - ..apiRequest.visitReason.doc.id@: =..apiRequest.selectEdge.edgeRes.edge.0.id
    - =..apiRequest.visitReason.docAPI.get: ""
    - ..apiRequest.visitReason.document@: =..apiRequest.visitReason.response.doc.0
    - if:
      - =.builtIn.number.typeIsValid:
          dataIn:
            docType: =.Global.AppointmentvisitType
            localArr: [17]
            binaryArr: [1]
      - actionType: evalObject
        object:
          - =.builtIn.array.convertToList:
              dataIn:
                array: =.ProviderScheduleAppointment.apiRequest.visitReason.document.name.data.reasonForVisit.Telemedicine
                key: reason
              dataOut: ProviderScheduleAppointment.formData.reasonForVisit
          - =.builtIn.array.getByKey:
              dataIn:
                array: =..apiRequest.visitReason.document.name.data.reasonForVisit.Telemedicine
                key1: reason
                value: =..formData.reasonForVisit.0
                key2: document
              dataOut: ProviderScheduleAppointment.formData.docu
          - =.builtIn.array.getByKey:
              dataIn:
                array: =..apiRequest.visitReason.document.name.data.reasonForVisit.Telemedicine
                key1: reason
                value: =..formData.reasonForVisit.0
                key2: duration
              dataOut: ProviderScheduleAppointment.formData.selectData.duration
          - =.builtIn.array.getByKey:
              dataIn:
                array: =..apiRequest.visitReason.document.name.data.reasonForVisit.Telemedicine
                key1: reason
                value: =..formData.reasonForVisit.0
                key2: fee
              dataOut: ProviderScheduleAppointment.formData.selectData.fee
          - =.builtIn.array.convertToList:
              dataIn:
                array: =.ProviderScheduleAppointment.apiRequest.visitReason.document.name.data.reasonForVisit.Telemedicine
                key: reason
              dataOut: ProviderScheduleAppointment.formData.reasonForVisit
      - actionType: evalObject
        object:
          - =.builtIn.array.convertToList:
              dataIn:
                array: =.ProviderScheduleAppointment.apiRequest.visitReason.document.name.data.reasonForVisit.OfficeVisits
                key: reason
              dataOut: ProviderScheduleAppointment.formData.reasonForVisit
          - =.builtIn.array.getByKey:
              dataIn:
                array: =..apiRequest.visitReason.document.name.data.reasonForVisit.OfficeVisits
                key1: reason
                value: =..formData.reasonForVisit.0
                key2: document
              dataOut: ProviderScheduleAppointment.formData.docu
          - =.builtIn.array.getByKey:
              dataIn:
                array: =..apiRequest.visitReason.document.name.data.reasonForVisit.OfficeVisits
                key1: reason
                value: =..formData.reasonForVisit.0
                key2: duration
              dataOut: ProviderScheduleAppointment.formData.selectData.duration
          - =.builtIn.array.getByKey:
              dataIn:
                array: =..apiRequest.visitReason.document.name.data.reasonForVisit.OfficeVisits
                key1: reason
                value: =..formData.reasonForVisit.0
                key2: fee
              dataOut: ProviderScheduleAppointment.formData.selectData.fee
          - =.builtIn.array.convertToList:
              dataIn:
                array: =.ProviderScheduleAppointment.apiRequest.visitReason.document.name.data.reasonForVisit.OfficeVisits
                key: reason
              dataOut: ProviderScheduleAppointment.formData.reasonForVisit
    - ..formData.selectData.reason@: =..formData.reasonForVisit.0
    - ..formData.selectData@: =.Global.checkselectData
    - =.builtIn.array.getListLength: 
        dataIn: 
          object: =.ProviderScheduleAppointment.formData.docu
        dataOut: ProviderScheduleAppointment.formData.localDocuLength
    - =.builtIn.array.getListLength: 
        dataIn: 
          object: =.Global.vaccine
        dataOut: ProviderScheduleAppointment.formData.globalDocuLength
    - =.builtIn.string.equal:
        dataIn:
          string1: =..formData.localDocuLength
          string2: =..formData.globalDocuLength
        dataOut: ProviderScheduleAppointment.formData.otherFormRead
    - ..formData.showAllDocs@: =.ProviderScheduleAppointment.formData.docu
    - =.builtIn.string.retainNumber:
        dataIn:
          value: =..formData.selectData.duration
        dataOut: ProviderScheduleAppointment.formData.duration
    - ..apiRequest.newAppointment.edge.name.fee@: =..formData.selectData.fee
    - .BaseDate.formData.duration@: =.ProviderScheduleAppointment.formData.duration
    - =..apiRequest.getFacilityVertex.get: ""
    
    - ..apiRequest.fac_RootNotebook.edgeReq.id@: =..apiRequest.getFacilityVertex.response.vertex.0.id
    - =..apiRequest.fac_RootNotebook.edgeAPI.get: ""
    - ..apiRequest.facility.documentReq.id@: =..apiRequest.fac_RootNotebook.edge.edge.0.id
    - =..apiRequest.facility.docAPI.get: ""
    - .Global.FacilityInfos@: =..apiRequest.facility.response.doc.0
    - .Global.FacilityInfosId@: =..apiRequest.facility.response.doc.0.bsig
    - ..formData.fullAddress@: =..apiRequest.facility.response.doc.0.name.data.basicInfo.location
    - ..formData.currentFacilityId@: =..apiRequest.facility.response.doc.0.bsig
    - =.builtIn.date.getTimeStampOfDate:
        dataIn:
          date: =.BaseDate.calendarDate.todayDate
        dataOut: BaseDate.calendarDate.todayStamp
    - if:
      - =.Global.currentUser.vertex.id
      - actionType: evalObject
        object:
          - =.builtIn.string.concat:
              dataIn:
                - =.Global.currentUser.vertex.name.firstName
                - " "
                - =.Global.currentUser.vertex.name.lastName
              dataOut: ProviderScheduleAppointment.formData.showName
          - ..apiRequest.profile.patientdocument.name.data.basicInfo.fullName@: =..formData.showName
      - continue
    - if:
      - =.Global.newCareUser
      - actionType: evalObject
        object:
          - ..formData.newCare@: false
          - .Global.formData.profile.firstName@: ""
      - continue
    - if:
      - =.Global.currentUser.vertex.id
      - actionType: evalObject
        object:
          - if:
            - =.builtIn.string.equal:
                dataIn:
                  string1: =.Global.currentUser.vertex.id
                  string2: "zgT+cgx7QFopl+JPC2WOeA=="
            - continue
            - actionType: evalObject
              object:
                - if:
                  - =.Global.titleProfile.id
                  - ..apiRequest.profile.patientdocument@: =.Global.titleProfile
                  - actionType: evalObject
                    object:
                      - =..apiRequest.profile.docAPI.get: ""
                      - ..apiRequest.profile.patientdocument@: =..apiRequest.profile.docResponse.doc.0
                      - .Global.titleProfile@: =..apiRequest.profile.patientdocument
                - if:
                  - =.Global.insuranceDoc.id
                  - ..apiRequest.insurance.docCreateReq@: =.Global.insuranceDoc
                  - actionType: evalObject
                    object:
                      - ..apiRequest.insurance.docQueryReq.id@: =..apiRequest.profile.patientdocument.name.data.insuranceId
                      - =..apiRequest.insurance.docAPI.get: ""
                      - .Global.insuranceDoc@: =..apiRequest.insurance.docQueryResp.doc.0
                      - ..apiRequest.insurance.docCreateReq@: =..apiRequest.insurance.docQueryResp.doc.0
      - continue
    - .Global.currentUser.vertex.name.fullName@: =..apiRequest.profile.patientdocument.name.data.basicInfo.fullName
    - .Global.GoSignUp@: "ProviderScheduleAppointment"
    - .Global.FormGoUrl@: "ProviderScheduleAppointment" 
    - ..apiRequest.newAppointment.edge.name.patientName@: =..apiRequest.profile.patientdocument.name.data.basicInfo.fullName

    - =.builtIn.string.phoneNumberSplit: 
        dataIn: 
          phoneNumber: =.ProviderScheduleAppointment.apiRequest.profile.patientdocument.name.data.basicInfo.phone
          sign: " "
        dataOut: ProviderScheduleAppointment.formData.userPhone
  
    - =.builtIn.search.GetFacilityLat:
        dataIn:
          object: =..formData.listdata
        dataOut: ProviderScheduleAppointment.formData.format
    - actionType: evalObject
      object: 
        - if:
          - =.ProviderScheduleAppointment.formData.format
          - .ProviderScheduleAppointment.formData.mapoption.data@: =.ProviderScheduleAppointment.formData.format
          - continue
    - if:
      - =.builtIn.string.equal:
          dataIn:
            string1: =.Global.localDocuLength
            string2: ""
      - .Global.localDocuLength@: =.ProviderScheduleAppointment.formData.localDocuLength
      - actionType: evalObject
        object:
          - .ProviderScheduleAppointment.localDocuLength@: =.Global.localDocuLength
          - =.builtIn.string.equal:
              dataIn:
                string1: =..formData.localDocuLength
                string2: =..formData.globalDocuLength
              dataOut: ProviderScheduleAppointment.formData.otherFormRead
    - if:
      - =.Global.showChangeAll.0
      - ..formData.showAllDocs@: =.Global.showChangeAll
      - .Global.showChangeAll@: =..formData.showAllDocs
    - if:
      - =.Global.checkselectData.duration
      - actionType: evalObject
        object:
          - ..formData.selectData@: =.Global.checkselectData
          - if:
            - =.builtIn.number.typeIsValid:
                dataIn:
                  docType: =.Global.AppointmentvisitType
                  localArr: [17]
                  binaryArr: [1]
            - =.builtIn.array.getByKey:
                dataIn:
                  array: =..apiRequest.visitReason.document.name.data.reasonForVisit.Telemedicine
                  key1: reason
                  value: =.Global.checkselectData.reason
                  key2: document
                dataOut: ProviderScheduleAppointment.formData.docu
            - =.builtIn.array.getByKey:
                dataIn:
                  array: =..apiRequest.visitReason.document.name.data.reasonForVisit.OfficeVisits
                  key1: reason
                  value: =.Global.checkselectData.reason
                  key2: document
                dataOut: ProviderScheduleAppointment.formData.docu
          - =.builtIn.array.getListLength: 
              dataIn: 
                object: =.ProviderScheduleAppointment.formData.docu
              dataOut: ProviderScheduleAppointment.formData.localDocuLength
          - =.builtIn.array.getListLength: 
              dataIn: 
                object: =.Global.vaccine
              dataOut: ProviderScheduleAppointment.formData.globalDocuLength
          - =.builtIn.string.equal:
              dataIn:
                string1: =..formData.localDocuLength
                string2: =..formData.globalDocuLength
              dataOut: ProviderScheduleAppointment.formData.otherFormRead
          - ..formData.showAllDocs@: =.ProviderScheduleAppointment.formData.docu
      - continue
    
    - if: 
      - =.Global.formData.visitQuestionnaireDoc.doc.id
      - actionType: evalObject
        object:
          - if:
            - =.builtIn.string.equal: 
                dataIn: 
                  string1: =..formData.otherFormRead
                  string2: true
            - actionType: evalObject
              object:
                - ..formData.scheduleButton.text@: "Schedule"
                - ..formData.scheduleButton.backgroundColor@: "#2988E6"
            - continue
      - continue
    - ..formData.ProfilePop@: "none"
    - if:
      - =.Global.editProfile
      - actionType: evalObject
        object:
          - ..formData.ProfilePop@: =.Global.ProfilePop
      - continue
    
    - if:
      - =.builtIn.number.typeIsValid:
          dataIn:
            docType: =..formData.currentType
            localArr: [17]
            binaryArr: [1]
      - continue
      - actionType: evalObject
        object:
          - =..apiRequest.getLocation.get: ""
          - ..formData.addressName.0@: =..apiRequest.getLocation.response.vertex.0.name.basicInfo.medicalFacilityName
          - ..formData.formDataOfficeVisisAddress@: =..formData.addressName.0
          - ..formData.fullAddress@: =..apiRequest.getLocation.response.vertex.0.name.basicInfo.location
    - if:
      - =.builtIn.number.typeIsValid:
          dataIn:
            docType: =..formData.currentType
            localArr: [17]
            binaryArr: [1]
      - actionType: evalObject
        object:
          - ..apiRequest.locationAll.docIn.id@: =..apiRequest.fac_RootNotebook.edge.edge.0.id
          - =..apiRequest.locationAll.docAPI.get: ""
      - continue
    - if:
      - =..apiRequest.locationAll.docResp.doc.0
      - actionType: evalObject
        object: 
          - =.builtIn.array.selectOneToArr:
              dataIn:
                arr: =..apiRequest.locationAll.docResp.doc.0.name.data.allLocation
                key: "medicalFacilityName"
              dataOut: ProviderScheduleAppointment.formData.addressName
          - ..formData.formDataOfficeVisisAddress@: =..formData.addressName.0
          - =.builtIn.array.matchInArray:
              dataIn:
                arr: =..apiRequest.locationAll.docResp.doc.0.name.data.allLocation
                value: =..formData.addressName.0
                key: medicalFacilityName
                key1: "id"
              dataOut: ProviderScheduleAppointment.formData.locationId
      - continue
    - if:
      - =.builtIn.string.equal: 
          dataIn: 
            string1: =.Global.addressName
            string2: ""
      - continue
      - actionType: evalObject
        object: 
          - =.builtIn.array.matchInArray:
              dataIn:
                arr: =..apiRequest.locationAll.docResp.doc.0.name.data.allLocation
                value: =.Global.addressName
                key: medicalFacilityName
                key1: "id"
              dataOut: ProviderScheduleAppointment.formData.locationId
          - ..formData.formDataOfficeVisisAddress@: =.Global.addressName
    - if:
      - =.builtIn.string.equal: 
          dataIn: 
            string1: =..formData.locationId
            string2: ""
      - continue
      - actionType: evalObject
        object: 
          - ..apiRequest.fac_RootNotebook.edgeReq.id@: =..formData.locationId
          - =..apiRequest.fac_RootNotebook.edgeAPI.get: ""
          - ..apiRequest.facility.documentReq.id@: =..apiRequest.fac_RootNotebook.edge.edge.0.id
          - =..apiRequest.facility.docAPI.get: ""
          - ..formData.fullAddress@: =..apiRequest.facility.response.doc.0.name.data.basicInfo.location
    
    - if:
      - =.builtIn.number.typeIsValid:
          dataIn:
            docType: =.Global.AppointmentvisitType
            localArr: [17]
            binaryArr: [1]
      - actionType: evalObject
        object:
          - ..formData.TelevisitTypeTag@: "block"
          - ..formData.OfficevisitTypeTag@: "none"
          - .Global.currentSubtype@: '196609'
          - .Global.visitType@: "Telemedicine"
          - ..apiRequest.newAppointment.edge.subtype@: 0x30002
          - .BaseDate.schedule.edge.id.0@: =..apiRequest.getFacilityVertex.response.vertex.0.id
          - ..apiRequest.newAppointment.edge.name.visitType@: "Telemedicine"
          - ..apiRequest.newAppointment.edge.name.visitTypeShow@: "Telemedicine"
          - ..formDataTemp.Timeheight@: "0.265"
      - actionType: evalObject
        object:
          - ..formData.TelevisitTypeTag@: "none"
          - ..formData.OfficevisitTypeTag@: "block"
          - .Global.currentSubtype@: '131073'
          - .Global.visitType@: "Office Visit"
          - if:
            - =.builtIn.number.typeIsValid:
                dataIn:
                  docType: =..formData.currentType
                  localArr: [17]
                  binaryArr: [0]
            - actionType: evalObject
              object:
                - if:
                  - =.Global.Provider._source.bvid
                  - ..formData.currentId@: =.Global.Provider._source.bvid
                  - ..formData.currentId@: =.Global.MedicalFacilityVertex.id
            - ..formData.currentId@: =..formData.locationId
          - .BaseDate.schedule.edge.id.0@: =..formData.currentId
          - ..apiRequest.newAppointment.edge.subtype@: 0x20002
          - ..apiRequest.newAppointment.edge.name.visitType@: "Office Visit"
          - ..apiRequest.newAppointment.edge.name.visitTypeShow@: "Office Visit"
          - ..formDataTemp.Timeheight@: "0.165"
    - =.builtIn.string.concat:
        dataIn:
          - "(stime<="
          - =.BaseDate.calendarDate.todayStamp.start
          - " AND "
          - "etime>"
          - =.BaseDate.calendarDate.todayStamp.start
          - " OR "
          - "stime>="
          - =.BaseDate.calendarDate.todayStamp.start
          - " AND "
          - "etime<="
          - =.BaseDate.calendarDate.todayStamp.end
          - " OR "
          - "stime<"
          - =.BaseDate.calendarDate.todayStamp.end
          - " AND "
          - "etime>="
          - =.BaseDate.calendarDate.todayStamp.end
          - ")"
          - " AND "
          # - "subtype&0xff = 1"
          - "subtype="
          - =.Global.currentSubtype
        dataOut: Global.scheduleScondition 
    - actionType: evalObject
      object:
        - .BaseDate.schedule.scheduleList.edge@: []
        - .BaseDate.splitTime@: []
        - =..schedule.get: ""
    
    
    - actionType: evalObject
      object:
        - if:
          - =.ProviderScheduleAppointment.formData.duration
          - continue
          - actionType: evalObject
            object:
              - =.builtIn.string.retainNumber:
                  dataIn:
                    value: =..formData.selectData.duration
                  dataOut: ProviderScheduleAppointment.formData.duration
              - .BaseDate.formData.duration@: =.ProviderScheduleAppointment.formData.duration
        - =.builtIn.date.splitTime:
            dataIn:
              object2: =.BaseDate.schedule.scheduleList.edge
              timeSlot: =.ProviderScheduleAppointment.formData.duration
              year: =.BaseDate.calendarDate.year
              month: =.BaseDate.calendarDate.month
              day: =.BaseDate.calendarDate.day
              isSplitCurrent: true
            dataOut: BaseDate.splitTime
        - =.builtIn.object.setProperty: 
            dataIn: 
              obj: =.BaseDate.splitTime
              label: "showTime"
              text: ""
              arr: ["color","backgroundColor"]
              valueArr: ["0xffffff","#2988e6"]
              errorArr: ["0x333333","#E9F2FC"]
            dataOut: BaseDate.splitTime
    - actionType: evalObject
      object:
        - if:
          - =.Global.isSignIn
          - actionType: evalObject
            object:
              - ..formData.isPersonal@: "false"
              - ..formData.isSignIn@: "true"
          - actionType: evalObject
            object:
              - ..formData.isPersonal@: "true"
              - ..formData.isSignIn@: "false"
    - ..apiRequest.newAppointment.edge.name.visitReason@: =..formData.selectData.reason
    - ..apiRequest.newAppointment.edge.name.Reason@: =..formData.selectData.reason
    - ..apiRequest.newAppointment.edge.name.fee@: =..formData.selectData.fee
    - if:
      - .Global.PaitentSign
      - ..formData.clock.showTime@: =.Global.clock.showTime
      - continue
    - actionType: evalObject
      object:
        - =.builtIn.object.setProperty: 
              dataIn: 
                obj: =.BaseDate.splitTime
                label: "showTime"
                text: =..formData.clock.showTime
                arr: ["color","backgroundColor"]
                valueArr: ["0xffffff","#2988e6"]
                errorArr: ["0x333333","#E9F2FC"]
              dataOut: BaseDate.splitTime
    - if: 
      - =.Global.clock.showTime
      - ..formDataTemp.nextColor@: "0x2988E6"
      - continue
    - =.builtIn.date.getTime:
        dataIn:
        dataOut: ProviderScheduleAppointment.formData.nowTimeStamp
    
    - if:
      - =.builtIn.string.equal:
          dataIn:
            string1: =.Global.payDisplay
            string2: ""
      - continue
      - ..formData.payAppointment@: =.Global.payDisplay
    - if:
      - =.Global.roomInfo.edge
      - actionType: evalObject
        object:
          - ..apiRequest.newAppointment.response@: =.Global.roomInfo
          - =..apiRequest.paymentEdge.edgeAPI.get: ""
      - continue
    - if:
        - =..apiRequest.paymentEdge.edgeResp.edge.0.id
        - actionType: evalObject
          object:
            - ..apiRequest.hasPaidProfile.getDocReq.id@: =..apiRequest.paymentEdge.edgeResp.edge.0.id
            - =..apiRequest.hasPaidProfile.docAPI.get: ""
            - ..formData.paymentStatus@: =..apiRequest.hasPaidProfile.getDocResp.doc.0.deat.state
        - continue
    
    - if:
      - =.builtIn.string.equal:
          dataIn:
            string1: =..formData.paymentStatus
            string2: "COMPLETED"
      - actionType: evalObject
        object:
          - ..formData.payContent@: "Edit or view appointments, change your profile in AiTmed Care App."
          - ..formData.paymentStatusColor@: "#2FB355"
          - ..formData.payNow@: "none"
      - actionType: evalObject
        object:
          - ..formData.payContent@: "Edit or view appointments, change your profile in AiTmed Care App."
          - ..formData.paymentStatusColor@: "#FB5051"
          - ..formData.payNow@: "block"
  suggestAddress: []
  formData:
    payAppointment: "none"
    payNow: "block"
    paySchedule: "none"
    paymentStatus: ""
    paymentStatusColor: "#FB5051"
    isPay: "block"
    webSite: ""
    patientProfile_shared: ""
    providerFullInfo: ""
    userPhone: []
    ProviderAvtar: ""
    # 接收传过来的visitType
    selectData: ""
    reasonForVisit: ""
    fullAddress: ""
    duration: ""
    currentType: ""
    currentId: ""
    realName: ""
    showName: ""
    selectDate: ""
    address: ""
    addressDetail: ""
    flag1: ""
    flagv: []
    appointmentTime: ""
    locationId: ""
    localDocuLength: 
    globalDocuLength:
    currentFacilityId: ""
    newCare: true
    otherFormRead: false
    visitType: "Telemedicine"
    showAllDocs: []
    appointmentProviderName: ""
    clock:
      showTime:
    password: "123456"
    phone: ""
    sk: ""
    pass: ""
    flag: true
    currentPatientId: ""
    calendarDate: .Global.calendarDate
    nowTimeStamp: ""
    listdata: 
      - ..apiRequest.facility.response.doc.0
    mapoption:
      mapType: 2
      zoom: 11
      data: []
    dataObject: .Global.Provider._source
    format: ""
    addressName: []
    DisProvider: ""
    DisRoom: ""
    docu: ""
    DisProviderPop: ""
    DisRoomPop: ""
    ProfilePop: ""
    isPersonal: ""
    isSignIn: ""
    TelevisitTypeTag: "block"
    OfficevisitTypeTag: "none"
    shareDocId: ""
    suggestAddress: ""
    scheduleButton:
      text: "Next"
      backgroundColor: "#C1C1C1"
    appointmentLink: #如果当前是一个 related 预约，则从Global去拿
      eid: ""
      fid: ""
      reid: ""
  formDataTemp:
    Timeheight: "0.165"
    nextColor: "0xcdcdcd"
    previousColor: ""
    NextButton: "Next"
    save:
      - =.builtIn.eccNaCl.decryptAES:
          dataIn:
            key: =..formData.password
            message: =.Global.currentUser.vertex.esk
          dataOut: ProviderScheduleAppointment.formData.sk
      - =.builtIn.eccNaCl.skCheck:
          dataIn:
            pk: =.Global.currentUser.vertex.pk
            sk: =..formData.sk
          dataOut: ProviderScheduleAppointment.formData.pass 
    saveNewAppointment:  
      - ..apiRequest.newAppointment.edgeAPI.store
  schedule:
    response: ""
    scheduleList: ""
    get:
      api: re
      dataIn: BaseDate.schedule.edge
      dataOut: BaseDate.schedule.scheduleList
    edge:
      type: 40000
      id: 
        - ""
        - ""
      sCondition: =.Global.scheduleScondition
      xfname: "bvid,evid"
      maxcount: "10000"
      obfname: "ctime"
      asc: true
      _nonce: =.Global._nonce
  apiRequest:
    appointmentListTag:
      docCreateResp: ""
      docCreateReq:
        subtype:
          isEncrypted: "0"
          isOnServer: "0"
        type: .DocType.RelatedAppTag
        # 创建时  eid 和 reid 都指向 当前房间的边，
        # 创建 related appointment 时， 需要一个reid 指向上一个小尾巴，fid指向跟边，所以eid和fid都需要根据情况判断
        eid: =..formData.appointmentLink.eid
        fid: =..formData.appointmentLink.fid
        reid: =..formData.appointmentLink.reid
        name:
          data: ""
      docAPI:
        store:
          api: cd
          dataIn: apiRequest.appointmentListTag.docCreateReq
          dataOut: ProviderScheduleAppointment.apiRequest.appointmentListTag.docCreateResp
    paymentEdge:
      edgeResp: ""
      edgeIn:
        id: .Global.roomInfo.edge.id
        xfname: refid
        _nonce: .Global._nonce
        type: 1113
        obfname: mtime
      edgeAPI:
        get:
          api: re
          dataIn: apiRequest.paymentEdge.edgeIn
          dataOut: apiRequest.paymentEdge.edgeResp
    hasPaidProfile:
      getDocResp: ""
      getDocReq:
        id: ""
        xfname: eid
        type: 2001
        obfname: mtime
        _nonce: .Global._nonce
        maxcount: "100"
      docAPI:
        get:
          api: rd
          dataIn: apiRequest.hasPaidProfile.getDocReq
          dataOut: apiRequest.hasPaidProfile.getDocResp
    # payment
    squareCheckout:
      response: ""
      edge:
        .Edge: ""
        type: .EdgeType.SquareCheckout
        bvid: .Global.currentUser.vertex.id
        refid: ""
        evid: ""
        name:
          amount: ""
          url: ""
          quantity: "1"
          itemName: "Appointment fee"
          note: "for testing"
          currency: "USD"
      edgeAPI:
        .EdgeAPI: ""
        store:
          api: ce
          dataIn: apiRequest.squareCheckout.edge
          dataOut: apiRequest.squareCheckout.response
    squareOrder:
      docReq:
        type: .DocType.CheckOrder 
        eid: "" 
        name:
          data:
            orderInfo:    # 订单信息 
              squareID: ""
              squareURL: ""
              amount: ""
              # balance: "" in deat 
              # status: ""  in deat
              processFee: ""    # 手续费
              payer: ""
            appointmentInfo:   # 预约信息/会议信息
              reason: ""
              providerName: ""
              visitType: ""
              appTime: ""
          nonce: ""
        subtype: 
          isEncrypted: "0"
          isOnServer: "1"     
      docRes: ""
      docAPI:
        store:
          api: cd
          dataIn: apiRequest.squareOrder.docReq
          dataOut: apiRequest.squareOrder.docRes    
  
    profile:
      docResponse: ""
      patientdocument:
        type: .DocType.PatientProfile
        eid: .Global.rootNotebookID
        name:
      docAPI:
        get:
          .DocAPI.get: "" 
          api: rd
          id: .Global.rootNotebookID
          xfname: eid
          type: .DocType.PatientProfile
          obfname: mtime
          dataKey: apiRequest.profile.docResponse
          _nonce: =.Global._nonce 
        
    insurance:
      docQueryResp: ""
      docQueryReq:
        type: .DocType.InsuranceCard
        id:
        xfname: id
        _nonce: =.Global._nonce
        obfname: ctime
      docAPI:
        get:  
          api: rd
          dataIn: ProviderScheduleAppointment.apiRequest.insurance.docQueryReq
          dataOut: ProviderScheduleAppointment.apiRequest.insurance.docQueryResp
    
    getFacilityVertex:
      response: ""
      vertex:
        id: ""
        xfname: E.evid
        ObjType: 4
        sCondition: "E.type=1100 AND V.type=20"
      get:
        api: rv
        dataIn: apiRequest.getFacilityVertex.vertex
        dataOut: apiRequest.getFacilityVertex.response
    getLocation:
      response: ""
      vertex:
        id: ""
      get:
        api: rv
        dataIn: apiRequest.getLocation.vertex
        dataOut: apiRequest.getLocation.response
    locationAll: 
      docResp: ""   
      docIn:    
        type: .DocType.LocationOfFacility
        id: ""
        xfname: eid
        obfname: mtime
        maxcount: "1"
        name: 
          data: 
            allLocation: 
      docAPI:
        .DocAPI: ""
        get: 
          api: rd
          dataIn: apiRequest.locationAll.docIn
          dataOut: apiRequest.locationAll.docResp      
    facility:
      response: ""
      documentReq:
        id: ""
        xfname: eid
        type: .DocType.FacilityProfile
        _nonce: .Global._nonce
        obfname: mtime
        maxcount: "1"
      docAPI:
        get:
          api: rd
          dataIn: ProviderScheduleAppointment.apiRequest.facility.documentReq
          dataOut: ProviderScheduleAppointment.apiRequest.facility.response
    fac_RootNotebook:
      edgeReq:
        id: ""
        xfname: bvid
        type: 10000
      edge: ""
      edgeAPI:
        get:
          api: re
          dataIn: apiRequest.fac_RootNotebook.edgeReq
          dataOut: apiRequest.fac_RootNotebook.edge     
    visitReason: 
      response: ""
      document: ""
      doc:
        type: .DocType.VisitReason
        id: ""
        xfname: "eid"
        obfname: "ctime"
        _nonce: =.Global_nonce
      docAPI: 
        get: 
          .DocAPI.get: ""
          api: rd
          dataIn: apiRequest.visitReason.doc
          dataOut: ProviderScheduleAppointment.apiRequest.visitReason.response
    
    #查询reasonForVisit需要挂在的edge的id
    selectEdge:
      edgeReq:
        id: []
        type: 10002 
        xfname: "bvid,evid"
        sCondition: "tage>0"
        _nonce: "=.Global._nonce"
      edgeRes: ""
      edgeAPI:
        get:
          api: re
          dataIn: ProviderScheduleAppointment.apiRequest.selectEdge.edgeReq
          dataOut: ProviderScheduleAppointment.apiRequest.selectEdge.edgeRes

    # patient向provider发送预约请求 E2
    newAppointment:
      response: ""
      edge:
        .Edge: ""
        # evid: .Global.currentUser.vertex.id
        evid: ""
        bvid: ""   #.Global.currentUser.vertex.id
        refid: "" #the_selected_time_slot_edge.id
        subtype: 0x30002
        type: 40000
        tage: 3
        name:
          patientName: ""
          providerName: ""
          visitType: ""
          visitTypeShow: ""
          visitReason: ""
          Reason: ""
          blockColor: ""
          fontColor: ""
          duration: ""
          date: ""
          facilityId: ""
          patientPhoneNumber: ""
          patientAvatarId: ""
          location: ""
          finishDoc: []
          document: []
          providerId: ""
      edgeAPI:
        .EdgeAPI: ""
        store:
          api: ce
          dataIn: apiRequest.newAppointment.edge
          dataOut: ProviderScheduleAppointment.apiRequest.newAppointment.response
    # provider同意patient请求
    approveAppointment:
      edge:
        bvid: ""
        .Edge: ""
        name: ""
        type: "40000" 
        subtype: 5
        refid: ""
        evid: ""
        stime: ""
        etime: ""
      edgeAPI:
        store:
          api: ce
          dataIn: ProviderScheduleAppointment.apiRequest.approveAppointment.edge
          dataOut: ProviderScheduleAppointment.apiRequest.approveAppointment.response
    approveAppointment10:
      response:
      edge:
        bvid: .Global.currentUser.vertex.id
        .Edge: ""
        name: ""
        type: 1053
        # subtype: 1053
        refid: ""
        evid: ""
        stime: ""
        etime: ""
      edgeAPI:
        store:
          api: ce
          dataIn: ProviderScheduleAppointment.apiRequest.approveAppointment10.edge
          dataOut: ProviderScheduleAppointment.apiRequest.approveAppointment10.response
    # provider加patient好友
    isContact: 
      response: ""
      edge:
        # .Edge: ""
        bvid: ""
        evid: ""
        subtype: .FriendsType.PatientProvider
        type: 10002
        tage: 1
        _nonce: =.Global._nonce
      getedge:
        id: []
        xfname: Bvid,Evid
        type: 10002
        _nonce: =.Global._nonce
      edgeAPI:
        .EdgeAPI: ""
        store:
          api: ce
          dataIn: ProviderScheduleAppointment.apiRequest.isContact.edge
          dataOut: ProviderScheduleAppointment.apiRequest.isContact.response
        get:
          api: re
          dataIn: apiRequest.isContact.getedge
          dataOut: apiRequest.isContact.getresponse
    invite: #邀请列表 查询1053 中 subtype=65536
      inviteList:
        edge: []
      edgeReq:
        type: .EdgeType.InviteInfo
        xfname: evid
        id: .Global.currentUser.vertex.id
        maxcount: "10000"
        _nonce: =.Global._nonce
        obfname: ctime
        sCondition: subtype=65536
      edgeAPI:
        get:
          api: re
          dataIn: ProviderScheduleAppointment.apiRequest.invite.edgeReq
          dataOut: ProviderScheduleAppointment.apiRequest.invite.inviteList
    accept: #同意 type=10002 subtype=65537 0x10001
      response: ""
      edge:
        .Edge: ""
        type: .EdgeType.Accept
        bvid: ""
        name: ""
        refid: ""
      edgeAPI:
        store:
          api: ce
          dataIn: ProviderScheduleAppointment.apiRequest.accept.edge
          dataOut: ProviderScheduleAppointment.apiRequest.accept.response
    getPatientProfile:
      response: ""
      docIn:
        type: 102401
        id: ""
        xfname: eid
      docOut: ""
      docAPI:
        get:
          api: rd
          dataIn: ProviderScheduleAppointment.apiRequest.getPatientProfile.docIn
          dataOut: ProviderScheduleAppointment.apiRequest.getPatientProfile.docOut   
  
  components:
    - type: view
      style:
        width: "1"
        margin: 'auto'
        height: "1"
      children:
        - .baseTopBar:
          style:
            position: relative
          children:
            - .baseTopMenu:
              children:
                - .AitmedLogo
                - .ViewRow:
                  style:
                    height: '6vw'
                    alignItems: center
                    float: right
                  children:
                    - type: view
                      style:
                        height: 6vw
                        width: 17vw
                        marginLeft: "0"
                        justifyContent: flex-start
                        marginRight: "0.03"
                      children: 
                        - .ViewRow:
                          viewTag: Personaltag
                          style:
                            height: 6vw
                            minWidth: 14vw
                            fontFamily: "Arial"
                            fontSize: .Nfont.h1
                            color: "#333333"
                            isHidden: ..formData.isPersonal
                          onClick:
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: Personal
                            - actionType: popUp
                              popUpView: Personal
                              dismissOnTouchOutside: true
                          children:
                            - type: popUp
                              viewTag: Personal
                              style:
                                width: 11vw
                                height: 9vw
                                left: 5.5vw
                                top: 5.3vw
                                zIndex: 1000
                                backgroundColor: "0xffffff"
                                border:
                                  style: "3"
                                borderWidth: "1"
                                borderColor: "#DEDEDE"
                                display: flex
                                flexDirection: column
                                alignItems: center
                                justifyContent: space-between
                                color: "0x333333"
                                fontSize: .Nfont.h0_1
                                fontWeight: 450
                                borderRadius: "5px"
                              children:
                                - type: label
                                  text: Patient Profile
                                  style:
                                    width: 11vw
                                    height: 3vw
                                    borderBottom: 'solid #DEDEDE'
                                    borderWidth: '1'
                                    textAlign: 
                                      x: center
                                      y: center
                                  onClick:
                                    - goto: PatientProfile
                                - type: label
                                  text: Patient Web App
                                  style:
                                    width: 11vw
                                    height: 3vw
                                    borderBottom: 'solid #DEDEDE'
                                    borderWidth: '1'
                                    textAlign: 
                                      x: center
                                      y: center
                                  onClick:
                                    - goto: ..config.patientUrl
                                - type: label
                                  text: Log Out
                                  style:
                                    width: 11vw
                                    height: 3vw
                                    borderBottom: 'solid #DEDEDE'
                                    borderWidth: '1'
                                    textAlign: 
                                      x: center
                                      y: center
                                  onClick:
                                    - actionType: evalObject
                                      object:
                                        - if:
                                          - =..formData.flag
                                          - =.builtIn.cleanLocalStorage
                                          - continue
                                        - .Global.isSignIn@: false
                                        - .Global.currentUser.vertex.esk@ : ""
                                        - .Global.currentUser.vertex.sk@ : ""
                                        - if:
                                          - =.builtIn.string.equal:
                                              dataIn:
                                                string1: =.Global.formData.LogoOutuid
                                                string2: ""
                                          - goto: SearchProvider
                                          - goto: .Global.formData.LogoOutuid
                                                        
                            - type: image
                              path=func: .builtIn.utils.prepareDocToPath
                              dataKey: apiRequest.profile.patientdocument.name.data.basicInfo.avatar
                              path: touxiang.svg
                              style:
                                width: "2.9vw"
                                marginLeft: "0.02"
                                -webkitUserDrag: none
                            - type: label
                              # the label is too long here that can't be folden
                              dataKey: apiRequest.profile.patientdocument.name.data.basicInfo.fullName
                              style: 
                                display: block
                                maxWidth: "17vw"
                                wordBreak: break-word
                                overflow: "hidden"
                                whiteSpace: "nowrap"
                                textOverflow: "ellipsis"
                                fontSize: .Nfont.h1
                                color: "#333333"
                                lineHeight: 6vw
                            - type: image
                              path: triangle.png
                              style:
                                width: 1.5vw
                        - type: view
                          viewTag: SignIntag
                          style:
                            top: 0
                            height: 6vw
                            width: 17vw
                            textAlign: 
                              y: center
                            display: flex
                            flexDirection: row
                            justifyContent: center
                            isHidden: ..formData.isSignIn
                            backgroundColor: "0xffffff"
                          onClick:
                            - actionType: evalObject
                              object:
                                - if:
                                  - =.builtIn.string.equal:
                                      dataIn:
                                        string1: =.Global.baseFontColor
                                        string2: "0x2988E6"
                                  - .Global.baseFontColor@: "0x333333"
                                  - .Global.baseFontColor@: "0x2988E6"
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: redict
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: SignIntag
                            - actionType: evalObject
                              object:
                                - if:
                                  - =.builtIn.string.equal:
                                      dataIn:
                                        string1: =.Global.baseFontColor
                                        string2: "0x2988E6"
                                  - actionType: popUp
                                    popUpView: redict
                                  - actionType: popUpDismiss
                                    popUpView: redict
                            # - actionType: popUp
                            #   popUpView: redict
                            #   # dismissOnTouchOutside: true
                          children:
                            - type: label
                              text: "Sign in/Sign up"
                              style:
                                textDecoration: underline
                                fontFamily: "Arial"
                                fontSize: .Nfont.h1
                                color: =.Global.baseFontColor
                                height: "0.0926"
                                width: 17vw
                                textAlign: 
                                  y: 'center'
                                  x: center
                        - type: popUp
                          viewTag: redict 
                          style:
                            width: 16.9vw
                            height: 9vw
                            top: 5.3vw
                            float: right
                            zIndex: 1000
                            backgroundColor: "0xffffff"
                            border:
                              style: "3"
                            borderWidth: "1"
                            borderColor: "#DEDEDE"
                            display: flex
                            flexDirection: column
                            alignItems: center
                            borderRadius: "5px"
                          children:
                            - .ViewRow:
                              style:
                                width: 16vw
                                height: 3vw
                                fontSize: .Nfont.h1
                                color: "#333333"
                                borderBottom: 'solid #DEDEDE'
                                borderWidth: '1'
                                alignItems: center
                              children:
                                - type: label
                                  text: "Patients"
                                  style:
                                    width: 5vw
                                    height: 1.5vw
                                    fontWeight: 500
                                - type: label
                                  text: "Sign in"
                                  style:
                                    width: 5vw
                                    height: 1.5vw
                                  onClick:
                                    - actionType: evalObject
                                      object:
                                        - .Global.currentUser.vertex.esk@ : ""
                                        - .Global.currentUser.vertex.sk@ : ""
                                    - goto: CareSignIn
                                - type: label
                                  text: "Sign Up"
                                  style:
                                    width: 5vw
                                    height: 1.5vw
                                  onClick:
                                    - actionType: evalObject
                                      object:
                                        - .Global.currentUser.vertex.esk@ : ""
                                        - .Global.currentUser.vertex.sk@ : ""
                                    - goto: CareSignUp
                            - .ViewRow:
                              style:
                                width: 16vw
                                height: 3vw
                                fontSize: .Nfont.h1
                                color: "#333333"
                                borderBottom: 'solid #DEDEDE'
                                borderWidth: '1'
                                alignItems: center
                              children:
                                - type: label
                                  text: "Providers"
                                  style:
                                    width: 5vw
                                    height: 1.5vw
                                    fontWeight: 500
                                - type: label
                                  text: "Sign in"
                                  style:
                                    width: 5vw
                                    height: 1.5vw
                                  onClick:
                                    - actionType: evalObject
                                      object:
                                        - .Global.currentUser.vertex.esk@ : ""
                                        - .Global.currentUser.vertex.sk@ : ""
                                    - goto: SignIn
                                - type: label
                                  text: "Sign Up"
                                  style:
                                    width: 5vw
                                    height: 1.5vw
                                  onClick:
                                    - actionType: evalObject
                                      object:
                                        - .Global.currentUser.vertex.esk@ : ""
                                        - .Global.currentUser.vertex.sk@ : ""
                                    - goto: SignUp
                            - .ViewRow:
                              style:
                                width: 16vw
                                height: 3vw
                                fontSize: .Nfont.h1
                                color: "#333333"
                                alignItems: center
                              children:
                                - type: label
                                  text: "Admin"
                                  style:
                                    width: 5vw
                                    height: 1.5vw
                                    fontWeight: 500
                                - type: label
                                  text: "Sign in"
                                  style:
                                    width: 5vw
                                    height: 1.5vw
                                  onClick:
                                    - actionType: evalObject
                                      object:
                                        - .Global.currentUser.vertex.esk@ : ""
                                        - .Global.currentUser.vertex.sk@ : ""
                                    - goto: ..config.adminUrl
                                - type: label
                                  text: "Sign Up"
                                  style:
                                    width: 5vw
                                    height: 1.5vw
                                  onClick:
                                    - actionType: evalObject
                                      object:
                                        - .Global.currentUser.vertex.esk@ : ""
                                        - .Global.currentUser.vertex.sk@ : ""
                                    - goto: ..config.adminUrl
        
        - type: view
          style: 
            width: "1"
            margin: "auto"
            # display: ..formData.DisProvider
            display: flex
            flexDirection: row
            justifyContent: center
          children:
            - type: view
              viewTag: LocationInfos
              style: 
                width: "0.45"
                height: '0.9'
                display: flex
                flexDirection: column
                alignItems: center
              children:
                - type: view
                  style: 
                    marginTop: 2vw
                    width: "0.45"
                    height: 2vw
                    display: flex
                    flexDirection: row
                    alignItems: center
                  children:
                    - type: image
                      path: left_blue_arrow.png
                      style:
                        width: 1.5vw
                        height: 2vw
                      onClick: 
                        - actionType: evalObject
                          object:
                            .Global._nonce@:
                              =.builtIn.math.random: ""
                        - actionType: evalObject
                          object:
                            - .Global.editProfile@: false  
                            - .Global.FacilityLink@: false
                            - .Global.addressName@: ""
                            - .Global.payDisplay@: ""
                            - if:
                              - =.builtIn.string.equal:
                                  dataIn:
                                    string1: =.Global.currentSelectTime
                                    string2: ""
                              - continue
                              - .Global.calendarDate@: =.Global.currentSelectTime
                        - actionType: updateObject
                          dataKey: Global.roomInfo
                          dataObject: []
                        - actionType: updateObject
                          dataKey: Global.checkselectData
                          dataObject: {}
                        - actionType: updateObject
                          dataKey: Global.clock
                          dataObject: {}
                        - actionType: builtIn
                          funcName: goBack
                          reload: true
                    - .Label1:
                      text: "Back"
                      autocomplete: "off"
                      style: 
                        fontSize: 1.1vw         
                        color: "#2988e6"
                        fontWeight: 550
                        marginLeft: 0.5vw
                      onClick: 
                        - actionType: evalObject
                          object:
                            .Global._nonce@:
                              =.builtIn.math.random: ""
                        - actionType: evalObject
                          object:
                            - .Global.editProfile@: false  
                            - .Global.FacilityLink@: false 
                            - .Global.addressName@: ""
                            - .Global.payDisplay@: ""
                            - if:
                              - =.builtIn.string.equal:
                                  dataIn:
                                    string1: =.Global.currentSelectTime
                                    string2: ""
                              - continue
                              - .Global.calendarDate@: =.Global.currentSelectTime
                        - actionType: updateObject
                          dataKey: Global.roomInfo
                          dataObject: []
                        - actionType: updateObject
                          dataKey: Global.checkselectData
                          dataObject: {}
                        - actionType: updateObject
                          dataKey: Global.clock
                          dataObject: {}
                        - actionType: builtIn
                          funcName: goBack
                          reload: true
                
                - type: view
                  style: 
                    width: "0.45"
                    height: 11.31vw
                    backgroundColor: "#ffffff"
                    marginTop: "0.05"
                  children:
                    
                    - type: view
                      style:
                        width: "0.45"
                        height: "0.192"
                        backgroundColor: "#eeeeee"
                        border: "3px solid #e0eefb"
                        borderWidth: 3px
                        display: flex
                        flexDirection: column
                      children:
                        - type: view
                          style:
                            # width: 40vw
                            margin: auto
                            height: 4.64vw
                            display: flex
                            flexDirection: row
                          children: 
                            - type: image
                              path=func: .builtIn.utils.prepareDocToPath
                              dataKey: formData.ProviderAvtar
                              path: yisheng copy.svg
                              # onClick: 
                              #   - actionType: popUp
                              #     popUpView: pop1
                              style:
                                # marginLeft: 16vw
                                marginTop: -2vw
                                width: 6.96vw
                                height: 6.96vw
                                borderRadius: "10px"
                            - type: view
                              style: 
                                marginLeft: 0.93vw
                                height: 4.64vw
                              children: 
                                - type: view
                                  style:
                                    marginTop: 0.23vw
                                    width: 9.28vw
                                    height: 2.09vw
                                    backgroundColor: "#ffffff"
                                    border:
                                      style: 3
                                    borderRadius: "20px"
                                    borderColor: "#d6d6d6"
                                    borderWidth: "2px"
                                    display: flex
                                    flexDirection: row
                                    justifyContent: flex-start
                                    alignItems: center
                                  children:
                                    - type: image
                                      path: Telemedicine.svg
                                      style:           
                                        height: 1.74vw
                                        marginLeft: 0.2vw
                                    - type: label
                                      text: Telemedicine
                                      style: 
                                        marginLeft: 0.58vw
                                        color: "0x333333"
                                        fontSize: .Nfont.h0
                                - type: view
                                  style:
                                    marginTop: 0.23vw
                                    width: 9.28vw
                                    height: 2.09vw
                                    backgroundColor: "#ffffff"
                                    border:
                                      style: 3
                                    borderRadius: "20px"
                                    borderColor: "#d6d6d6"
                                    borderWidth: "2px"
                                    display: flex
                                    flexDirection: row
                                    justifyContent: flex-start
                                    alignItems: center
                                  children:
                                    - type: image
                                      path: Office Visits.svg
                                      style:           
                                        height: 1.74vw
                                        marginLeft: 0.2vw
                                    - type: label
                                      text: Office Visit
                                      style: 
                                        marginLeft: 0.58vw
                                        color: "0x333333"
                                        fontSize: .Nfont.h0
                        - type: label
                          dataKey: formData.dataObject.fullName
                          style:
                            # width: 40vw
                            fontSize: .Nfont.h8
                            color: "0x143459"
                            fontWeight: bold
                            fontFamily: "Arial"
                            # margin: auto
                            textAlign: 
                              x: center
                        - type: view
                          style: 
                            margin: auto
                            # height: 3vw
                            display: flex
                            flexDirection: row
                            alignItems: flex-start
                            justifyContent: center
                          children: 
                            - type: label
                              text: specialty_1
                              dataKey: formData.dataObject.specialty.0
                              style: 
                                wordBreak: break-all
                                fontSize: .Nfont.h1
                                marginTop: 0.3vw
                                color: "0x143459"
                                textAlign: 
                                  x: right
                            - type: label
                              dataKey: formData.dataObject.specialty.1
                              style: 
                                marginLeft: 1vw
                                wordBreak: break-all
                                marginTop: 0.3vw
                                fontSize: .Nfont.h1
                                color: "0x143459"
                                textAlign: 
                                  x: left
                - type: scrollView
                  style: 
                    width: "0.45"
                    height: "0.52"
                    display: flex
                    flexDirection: column
                  children:
            
                    
                    - .FDInfoView:
                      children:
                        - type: view
                          style: 
                            display: flex
                            flexDirection: row
                          children:
                            - .FDInfoTitle:
                              text: About
                              style:
                                fontSize: .Nfont.h3
                                fontWeight: bold
                                fontFamily: "Arial"
                            - .FDInfoTitle:
                              dataKey: formData.dataObject.fullName
                              style:
                                width: 30vw
                                wordBreak: break-all
                                marginLeft: 0.5vw
                                fontSize: .Nfont.h3
                                fontWeight: bold
                                fontFamily: "Arial"
                        - .FDInfoLabel:
                          dataKey: formData.dataObject.description
                    - type: view
                      style: 
                        width: "0.45"
                        backgroundColor: "#ffffff"
                        marginTop: 1.04vw
                      children: 
                        - .FDInfoView:
                          children:
                            - .FDInfoTitle:
                              text: "Education and backgrounds"
                              style:
                                fontSize: .Nfont.h3
                                fontWeight: bold
                                fontFamily: "Arial"
                        - .FDInfoView:
                          children: 
                            - .FDInfoTitle:
                              text: Practice Name
                            - .FDInfoLabel:
                              dataKey: formData.dataObject.fullName
                        - .FDInfoView:
                          children: 
                            - .FDInfoTitle:
                              text: Specialty
                            - type: list
                              contentType: listObject
                              # this should be a bug
                              listObject: =..formData.dataObject.specialty
                              iteratorVar: itemObject
                              style: 
                                marginTop: "0"
                                width: 30vw
                              children:
                                - type: listItem
                                  itemObject: ""
                                  style: 
                                    marginTop: "0"
                                    width: 30vw
                                    color: "#333333"
                                  children: 
                                    - .FDInfoLabel:
                                      dataKey: itemObject
                        - .FDInfoView:
                          children: 
                            - .FDInfoTitle:
                              text: Languages spoken
                            - type: list
                              contentType: listObject
                              listObject: =..formData.dataObject.language
                              iteratorVar: itemObject
                              style: 
                                marginTop: "0"
                                width: 20vw
                                color: "0x333333"
                              children:
                                - type: listItem
                                  itemObject: ""
                                  style: 
                                    marginTop: "0"
                                  children: 
                                    - .FDInfoLabel:
                                      dataKey: itemObject
                        - .FDInfoView:
                          children: 
                            - .FDInfoTitle:
                              text: Gender
                            - .FDInfoLabel:
                              dataKey: formData.dataObject.gender
                        - .FDInfoView:
                          children: 
                            - .FDInfoTitle:
                              text: "NPI #"
                            - .FDInfoLabel:
                              dataKey: formData.dataObject.NPI
                        - .FDInfoView:
                          children: 
                            - .FDInfoTitle:
                              text: Education and training
                            - .FDInfoLabel:
                              dataKey: formData.dataObject.education
                        # - .FDInfoView:
                        #   children: 
                        #     - .FDInfoTitle:
                        #       text: "NPI #"
                        #     - .FDInfoLabel:
                        #       dataKey: formData.dataObject.NPI
                        - .FDInfoView:
                          children: 
                            - .FDInfoTitle:
                              text: "DEA #"
                            - .FDInfoLabel:
                              dataKey: formData.dataObject.DEA
                    - type: view
                      style:
                        width: "40vw"
                        height: 10vw
                        marginTop: 1vw
                      children:
                        - type: label
                          text: Facility
                          style: 
                            fontSize: .Nfont.h3
                            color: "#143459"
                            width: "0.3"
                            height: "2vw"
                            fontWeight: bold
                            fontFamily: "Arial"
                        - .ybiInfoView:
                          style:
                            marginTop: 1vw
                            width: "0.45"
                            height: 5vw
                          children:
                            - type: image
                              path=func: .builtIn.utils.prepareDocToPath
                              dataKey: Global.FacilityInfos.name.data.basicInfo.businessLogo
                              path: yisheng copy.svg
                              style: 
                                width: 5vw
                                display: "inline-block"
                            - type: label
                              dataKey: Global.FacilityInfos.name.data.basicInfo.medicalFacilityName
                              style: 
                                fontSize: .Nfont.h3
                                fontWeight: "bold"
                                display: "inline-block"
                                marginLeft: "0.01"
                            - type: button
                              text: Enter
                              style: 
                                color: "#ffffff"
                                width: "0.0677"
                                height: "0.037"
                                fontSize: 0.8vw
                                backgroundColor: "#2988E6"
                                borderRadius: 5px
                                display: "inline-block"
                                float: right
                                textAlign:
                                  x: center
                                  y: center
                              onClick: 
                                - actionType: evalObject
                                  object:
                                    - .Global.addressName@: ""
                                    - .Global.payDisplay@: ""
                                    - if:
                                      - =.Global.FacilityInfos
                                      - goto: FacilityDetail
                                      - actionType: popUp
                                        popUpView: AgainLogIn
                                - actionType: updateObject
                                  dataKey: Global.roomInfo
                                  dataObject: []
                                - actionType: updateObject
                                  dataKey: Global.clock
                                  dataObject: {}
                    - type: view
                      viewTag: locationTagProvider
                      style: 
                        marginTop: 1vw
                        width: "0.45"
                        backgroundColor: "white"
                        display: flex
                        flexDirection: column
                      children:
                        - type: view
                          style:
                            display: flex
                          children:
                            - .FDInfoTitle:
                              text: 'Office location' 
                              style:
                                fontSize: .Nfont.h3
                                fontWeight: bold
                                fontFamily: "Arial"
                        - type: view
                          style: 
                            marginTop: 1vw
                            width: "0.45"
                            backgroundColor: "#ffffff"                         
                            # marginTop: 1vw
                          children: 
                            - type: view
                              style:
                                display: "inline-block"
                              children: 
                                # - .FDInfoTitle:
                                #   text: "Select Location"
                                - type: select
                                  dataKey: formData.formDataOfficeVisisAddress # formData.countryCode : inputValue
                                  options:
                                    ..formData.addressName
                                  onChange: 
                                    - actionType: evalObject
                                      object: 
                                        - =.builtIn.array.matchInArray:
                                            dataIn:
                                              arr: =..apiRequest.locationAll.docResp.doc.0.name.data.allLocation
                                              value: =..formData.formDataOfficeVisisAddress
                                              key: medicalFacilityName
                                              key1: "id"
                                            dataOut: ProviderScheduleAppointment.formData.locationId
                                        - ..formData.currentId@: =..formData.locationId
                                        - ..apiRequest.fac_RootNotebook.edgeReq.id@: =..formData.currentId
                                        - =..apiRequest.fac_RootNotebook.edgeAPI.get: ""
                                        - ..apiRequest.facility.documentReq.id@: =..apiRequest.fac_RootNotebook.edge.edge.0.id
                                        - =..apiRequest.facility.docAPI.get: ""
                                        - ..formData.listdata.0@: =..apiRequest.facility.response.doc.0
                                        - ..formData.fullAddress@: =..apiRequest.facility.response.doc.0.name.data.basicInfo.location
                                        - =.builtIn.search.GetFacilityLat:
                                            dataIn:
                                              object: =..formData.listdata
                                            dataOut: ProviderScheduleAppointment.formData.format
                                        - if:
                                          - =.ProviderScheduleAppointment.formData.format
                                          - .ProviderScheduleAppointment.formData.mapoption.data@: =.ProviderScheduleAppointment.formData.format
                                          - continue
                                    - actionType: builtIn
                                      funcName: redraw
                                      viewTag: locationTagProvider
                                  style:
                                    # marginTop: 1vw
                                    height: "0.044"
                                    width: "0.34375"
                                    border: 
                                      style: '3'
                                    borderColor: "0x33333333"
                                    borderRadius: "3"
                                    borderWidth: "1"
                                    fontSize: "0.9vw"
                            - type: view
                              style: 
                                display: "inline-block"
                                zIndex: 1000
                                # background: "0xEFE9E1"
                                float: right
                                lineHeight: 4.4vh
                              children:
                                - type: image
                                  path: Get_directions.svg
                                  style: 
                                    height: 4.4vh
                                    width: "0.015"
                                    display: "inline-block"
                                - type: label
                                  text: Get directions
                                  style: 
                                    display: "inline-block"
                                    fontSize: .Nfont.h0
                                    marginLeft: 1vw
                                    color: "#2988E6"
                                    fontFamily: "Arial"
                        - type: view
                          style:
                            marginTop: 1vw
                          children:
                            - type: image
                              path: location.svg
                              style: 
                                width: "0.01"
                                display: "inline-block"
                            - .FDInfoLabel:
                              viewTag: locationTagProvider
                              dataKey: formData.fullAddress
                              style:
                                display: "inline-block"
                                fontSize: .Nfont.h0_1
                                marginTop: 0
                                marginLeft: "0.01"
                                color: "0x666666"  
                                width: "40vw"
                        - type: view
                          style: 
                            marginTop: 1vw
                            width: "0.34375"
                            height: 20vw
                          children:
                            - type: view
                              style: 
                                width: "40vw"
                                marginTop: 0.5vw
                                marginLeft: 0.5vw
                                display: flex
                                flexDirection: row
                                justify-content: flex-start
                              children:
                                
                            - type: map
                              dataKey: ProviderScheduleAppointment.formData.mapoption
                              style:
            - type: view
              style:
                width: '0.362'
                # height: "0.85"
                display: ..formData.DisProviderPop
                marginLeft: "0.064"
              children:
                # Schedule an Appointment
                - type: view
                  viewTag: ScheduleAnAppointment
                  style:
                    backgroundColor: 'white'
                    border:
                      style: '3'
                    borderColor: "#4b9ae7"
                    borderRadius: "5px"
                    width: "0.362"
                    height: "0.8"
                    top: 4vw
                  children:
                    - type: view
                      style: 
                        marginTop: 0
                        width: "0.362"
                        height: 5.01vw
                        borderBottom: "1.5px solid  #dfe1e5"
                        borderWidth: 2  
                        display: flex
                        flexDirection: row
                        alignItems: center
                        justifyContent: space-between
                        boxShadow: "0px 10px 10px -10px #d1d1d1"
                      children: 
                        - .ViewRow:
                          style:
                            width: "0.343"
                            margin: auto
                            justifyContent: space-between
                            alignItems: baseline
                          children:
                            - .PerDetTitle:
                              text: "Schedule an appointment"
                              style: 
                                fontSize: .Nfont.h6
                                fontWeight: bold
                                fontFamily: "Arial"
                                marginTop: 2.1vw
                                textAlign:
                                  y: center
                            - .ViewRow:
                              style:
                                width: 11.9vw
                                alignItems: flex-end
                              children:
                                - .PDScheduleButton:
                                  style:
                                    backgroundColor: "#f8ae29"
                                - .PDScheduleButton:
                                - .PDScheduleButton:
                                - .PDScheduleButton:

                    - .ViewColumn:
                      style:
                        height: "auto"
                        width: '0.322'
                        margin: auto
                        marginTop: 1vw
                        justifyContent: flex-start
                      children:
                        - .ViewColumn:
                          viewTag: VT1
                          style:
                            display: ..formData.TelevisitTypeTag
                          children:
                            - .ViewColumn:
                              style:
                                justifyContent: space-between
                              children: 
                                - .PerDetTitle:
                                  text: Visit Type
                                - .ViewRow:
                                  style:
                                    marginTop: "0.005"
                                    justifyContent: space-between
                                    width: "0.322"
                                  children:
                                    - type: button
                                      style:
                                        fontSize: .Nfont.h1
                                        borderRadius: "5px"
                                        width: "0.15625"
                                        height: 3.48vw
                                        border: "1px solid #2988e6"
                                        borderWidth: 2px
                                        borderColor: "#2988e6"
                                        backgroundColor: "0xffffff"
                                        textAlign: 
                                          x: left
                                          y: center
                                      onClick:
                                        - emit:
                                            actions:
                                              - ..formData.visitType@: "Telemedicine"
                                              - .Global.AppointmentvisitType@: 196609
                                              - .Global.AppointmentvisitTypeShow@: "Telemedicine"
                                              - =.builtIn.array.convertToList:
                                                  dataIn:
                                                    array: =.ProviderScheduleAppointment.apiRequest.visitReason.document.name.data.reasonForVisit.Telemedicine
                                                    key: reason
                                                  dataOut: ProviderScheduleAppointment.formData.reasonForVisit
                                        - actionType: evalObject
                                          object:
                                            - ..formData.selectData.reason@: =..formData.reasonForVisit.0
                                            - =.builtIn.array.getByKey:
                                                dataIn:
                                                  array: =..apiRequest.visitReason.document.name.data.reasonForVisit.Telemedicine
                                                  key1: reason
                                                  value: =..formData.reasonForVisit.0
                                                  key2: duration
                                                dataOut: ProviderScheduleAppointment.formData.selectData.duration
                                            - =.builtIn.array.getByKey:
                                                dataIn:
                                                  array: =..apiRequest.visitReason.document.name.data.reasonForVisit.Telemedicine
                                                  key1: reason
                                                  value: =..formData.reasonForVisit.0
                                                  key2: fee
                                                dataOut: ProviderScheduleAppointment.formData.selectData.fee
                                            - =.builtIn.string.retainNumber:
                                                dataIn:
                                                  value: =..formData.selectData.duration
                                                dataOut: ProviderScheduleAppointment.formData.duration
                                            - .BaseDate.formData.duration@: =.ProviderScheduleAppointment.formData.duration
                                            - ..apiRequest.newAppointment.edge.name.duration@: =.ProviderScheduleAppointment.formData.duration
                                            - =.builtIn.array.getByKey:
                                                dataIn:
                                                  array: =..apiRequest.visitReason.document.name.data.reasonForVisit.Telemedicine
                                                  key1: reason
                                                  value: =..formData.reasonForVisit.0
                                                  key2: document
                                                dataOut: ProviderScheduleAppointment.formData.docu
                                            - ..formData.showAllDocs@: =.ProviderScheduleAppointment.formData.docu
                                        - actionType: evalObject
                                          object:
                                            - ..formDataTemp.Timeheight@: "0.265"
                                            - ..clock.showTime@: ""
                                            - if: 
                                              - =.builtIn.string.equal:
                                                  dataIn:
                                                    string1: =..formData.visitType
                                                    string2: 'Telemedicine'
                                              - actionType: evalObject
                                                object:
                                                  - .ProviderScheduleAppointment.formData.currentSubtype@: '196609'
                                                  - .Global.currentSubtype@: '196609'
                                                  - .Global.visitType@: "Telemedicine"
                                                  - ..apiRequest.newAppointment.edge.subtype@: 0x30002
                                                  - ..apiRequest.newAppointment.edge.name.visitType@: "Telemedicine"
                                                  - ..apiRequest.newAppointment.edge.name.visitTypeShow@: "Telemedicine"
                                              - continue
                                            - if: 
                                              - =.builtIn.string.equal:
                                                  dataIn:
                                                    string1: =..formData.visitType
                                                    string2: 'Office Visit'
                                              - actionType: evalObject
                                                object:
                                                  - .ProviderScheduleAppointment.formData.currentSubtype@: '131073'
                                                  - .Global.currentSubtype@: '131073'
                                                  - .Global.visitType@: "Office Visit"
                                                  - ..apiRequest.newAppointment.edge.subtype@: 0x20002
                                                  - ..apiRequest.newAppointment.edge.name.visitType@: "Office Visit"
                                                  - ..apiRequest.newAppointment.edge.name.visitTypeShow@: "Office Visit"
                                              - continue
                                            - if:
                                              - =.builtIn.number.typeIsValid:
                                                  dataIn:
                                                    docType: =..formData.currentType
                                                    localArr: [17]
                                                    binaryArr: [1]
                                              - actionType: evalObject
                                                object:
                                                  - if:
                                                    - =.Global.Provider._source.bvid
                                                    - ..formData.currentId@: =.Global.Provider._source.bvid
                                                    - ..formData.currentId@: =.Global.MedicalFacilityVertex.id
                                              - ..formData.currentId@: =..apiRequest.getFacilityVertex.response.vertex.0.id
                                            - .BaseDate.schedule.edge.id.0@: =..formData.currentId
                                            - =.builtIn.string.concat:
                                                dataIn:
                                                  - "(stime<="
                                                  - =.BaseDate.calendarDate.todayStamp.start
                                                  - " AND "
                                                  - "etime>"
                                                  - =.BaseDate.calendarDate.todayStamp.start
                                                  - " OR "
                                                  - "stime>="
                                                  - =.BaseDate.calendarDate.todayStamp.start
                                                  - " AND "
                                                  - "etime<="
                                                  - =.BaseDate.calendarDate.todayStamp.end
                                                  - " OR "
                                                  - "stime<"
                                                  - =.BaseDate.calendarDate.todayStamp.end
                                                  - " AND "
                                                  - "etime>="
                                                  - =.BaseDate.calendarDate.todayStamp.end
                                                  - ")"
                                                  - " AND "
                                                  # - "stime>"
                                                  # - =.BaseDate.calendarDate.todayStamp.start
                                                  # - " AND "
                                                  # - "etime<"
                                                  # - =.BaseDate.calendarDate.todayStamp.end
                                                  # - " AND "
                                                  - "subtype="
                                                  - =.Global.currentSubtype
                                                dataOut: Global.scheduleScondition
                                            - .BaseDate.schedule.scheduleList.edge@: []
                                            - =..schedule.get: ""
                                            - .BaseDate.splitTime@: []
                                            - =.builtIn.date.splitTime:
                                                dataIn:
                                                  object2: =.BaseDate.schedule.scheduleList.edge
                                                  timeSlot: =.ProviderScheduleAppointment.formData.duration
                                                  year: =.BaseDate.calendarDate.year
                                                  month: =.BaseDate.calendarDate.month
                                                  day: =.BaseDate.calendarDate.day
                                                  isSplitCurrent: true
                                                dataOut: BaseDate.splitTime
                                            - =.builtIn.object.setProperty: 
                                                dataIn: 
                                                  obj: =.BaseDate.splitTime
                                                  label: "showTime"
                                                  text: ""
                                                  arr: ["color","backgroundColor"]
                                                  valueArr: ["0xffffff","#2988e6"]
                                                  errorArr: ["0x333333","#E9F2FC"]
                                                dataOut: BaseDate.splitTime
                                            - if:
                                              - ..formData.clock.showTime
                                              - actionType: evalObject
                                                object:
                                                  - =.builtIn.object.setProperty: 
                                                        dataIn: 
                                                          obj: =.BaseDate.splitTime
                                                          label: "showTime"
                                                          text: =..formData.clock.showTime
                                                          arr: ["color","backgroundColor"]
                                                          valueArr: ["0xffffff","#2988e6"]
                                                          errorArr: ["0x333333","#E9F2FC"]
                                                        dataOut: BaseDate.splitTime
                                              - continue
                                        - actionType: updateObject
                                          dataKey: Global.clock
                                          dataObject: {}
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: DataTag
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: allForms
                                        - actionType: evalObject
                                          object:
                                            - actionType: builtIn
                                              funcName: show
                                              viewTag: VT1
                                        - actionType: evalObject
                                          object:
                                            - actionType: builtIn
                                              funcName: hide
                                              viewTag: VT2   
                                              children:
                                        - actionType: evalObject
                                          object:
                                            # - if: 
                                            #   - =.BaseDate.calendarDate.day
                                            - ..formDataTemp.nextColor@: "0xcdcdcd"
                                            - actionType: builtIn
                                              funcName: redraw
                                              viewTag: btnView
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: reasonTag
                                      children: 
                                        - type: image
                                          path: Telemedicine_green.png
                                          style: 
                                            height: 2vw 
                                            marginLeft: "0.02"
                                        - type: label
                                          text: "Telemedicine"
                                          style: 
                                            fontFamily: "Arial"
                                            fontWeight: bold
                                            color: "0x143459"
                                            marginLeft: "0.01"
                                    - type: button
                                      style:
                                        borderRadius: "5px"
                                        width: "0.15625"
                                        height: 3.48vw
                                        border: "1px solid #DEDEDE"
                                        backgroundColor: "0xffffff"
                                        borderWidth: 2px
                                        borderColor: "0xDEDEDE"
                                        fontSize: .Nfont.h1
                                        textAlign: 
                                          x: left
                                          y: center
                                      onClick:
                                        - emit:
                                            actions:
                                              - ..formData.visitType@: "Office Visit"
                                              - .Global.AppointmentvisitType@: 131073
                                              - .Global.AppointmentvisitTypeShow@: "Office Visit"
                                              - =.builtIn.array.convertToList:
                                                  dataIn:
                                                    array: =.ProviderScheduleAppointment.apiRequest.visitReason.document.name.data.reasonForVisit.OfficeVisits
                                                    key: reason
                                                  dataOut: ProviderScheduleAppointment.formData.reasonForVisit
                                        - actionType: evalObject
                                          object:
                                            - ..formData.selectData.reason@: =..formData.reasonForVisit.0
                                            - =.builtIn.array.getByKey:
                                                dataIn:
                                                  array: =..apiRequest.visitReason.document.name.data.reasonForVisit.OfficeVisits
                                                  key1: reason
                                                  value: =..formData.reasonForVisit.0
                                                  key2: duration
                                                dataOut: ProviderScheduleAppointment.formData.selectData.duration
                                            - =.builtIn.array.getByKey:
                                                dataIn:
                                                  array: =..apiRequest.visitReason.document.name.data.reasonForVisit.OfficeVisits
                                                  key1: reason
                                                  value: =..formData.reasonForVisit.0
                                                  key2: fee
                                                dataOut: ProviderScheduleAppointment.formData.selectData.fee
                                            - =.builtIn.string.retainNumber:
                                                dataIn:
                                                  value: =..formData.selectData.duration
                                                dataOut: ProviderScheduleAppointment.formData.duration
                                            - .BaseDate.formData.duration@: =.ProviderScheduleAppointment.formData.duration
                                            - ..apiRequest.newAppointment.edge.name.duration@: =.ProviderScheduleAppointment.formData.duration
                                            - =.builtIn.array.getByKey:
                                                dataIn:
                                                  array: =..apiRequest.visitReason.document.name.data.reasonForVisit.OfficeVisits
                                                  key1: reason
                                                  value: =..formData.reasonForVisit.0
                                                  key2: document
                                                dataOut: ProviderScheduleAppointment.formData.docu
                                            - ..formData.showAllDocs@: =.ProviderScheduleAppointment.formData.docu
                                        - actionType: evalObject
                                          object: 
                                            - ..formDataTemp.Timeheight@: "0.165"
                                            - if:
                                              - =.builtIn.string.equal:
                                                  dataIn:
                                                    string1: =.Global.FacilityLink
                                                    string2: true
                                              - actionType: evalObject
                                                object: 
                                                  - =.builtIn.array.selectOneToArr:
                                                      dataIn:
                                                        arr: =..apiRequest.locationAll.docResp.doc.0.name.data.allLocation
                                                        key: "medicalFacilityName"
                                                      dataOut: ProviderScheduleAppointment.formData.addressName
                                                  - ..formData.formDataOfficeVisisAddress@: =..formData.addressName.0
                                                  - .Global.addressName@: =..formData.addressName.0
                                                  - =.builtIn.array.matchInArray:
                                                      dataIn:
                                                        arr: =..apiRequest.locationAll.docResp.doc.0.name.data.allLocation
                                                        value: =..formData.formDataOfficeVisisAddress
                                                        key: medicalFacilityName
                                                        key1: "id"
                                                      dataOut: ProviderScheduleAppointment.formData.locationId
                                                  - ..formData.currentId@: =..formData.locationId
                                                  - ..apiRequest.fac_RootNotebook.edgeReq.id@: =..formData.currentId
                                                  - =..apiRequest.fac_RootNotebook.edgeAPI.get: ""
                                                  - ..apiRequest.facility.documentReq.id@: =..apiRequest.fac_RootNotebook.edge.edge.0.id
                                                  - =..apiRequest.facility.docAPI.get: ""
                                                  - ..formData.fullAddress@: =..apiRequest.facility.response.doc.0.name.data.basicInfo.location
                                              - continue
                                        - actionType: evalObject
                                          object:
                                            - ..formData.clock.showTime@: ""
                                            - if: 
                                              - =.builtIn.string.equal:
                                                  dataIn:
                                                    string1: =..formData.visitType
                                                    string2: 'Telemedicine'
                                              - actionType: evalObject
                                                object:
                                                  - .ProviderScheduleAppointment.formData.currentSubtype@: '196609'
                                                  - .Global.currentSubtype@: '196609'
                                                  - .Global.visitType@: "Telemedicine"
                                                  - ..apiRequest.newAppointment.edge.subtype@: 0x30002
                                                  - ..apiRequest.newAppointment.edge.name.visitType@: "Telemedicine"
                                                  - ..apiRequest.newAppointment.edge.name.visitTypeShow@: "Telemedicine"
                                              - continue
                                            - if: 
                                              - =.builtIn.string.equal:
                                                  dataIn:
                                                    string1: =..formData.visitType
                                                    string2: 'Office Visit'
                                              - actionType: evalObject
                                                object:
                                                  - .ProviderScheduleAppointment.formData.currentSubtype@: '131073'
                                                  - .Global.currentSubtype@: '131073'
                                                  - .Global.visitType@: "Office Visit"
                                                  - ..apiRequest.newAppointment.edge.subtype@: 0x20002
                                                  - ..apiRequest.newAppointment.edge.name.visitType@: "Office Visit"
                                                  - ..apiRequest.newAppointment.edge.name.visitTypeShow@: "Office Visit"
                                              - continue
                                            - if:
                                              - =.builtIn.number.typeIsValid:
                                                  dataIn:
                                                    docType: =..formData.currentType
                                                    localArr: [17]
                                                    binaryArr: [0]
                                              - actionType: evalObject
                                                object:
                                                  - if:
                                                    - =.Global.Provider._source.bvid
                                                    - ..formData.currentId@: =.Global.Provider._source.bvid
                                                    - ..formData.currentId@: =.Global.MedicalFacilityVertex.id
                                              - ..formData.currentId@: =..apiRequest.locationAll.docResp.doc.0.name.data.allLocation.0.id
                                            - .BaseDate.schedule.edge.id.0@: =..formData.currentId
                                            - =.builtIn.string.concat:
                                                dataIn:
                                                  - "(stime<="
                                                  - =.BaseDate.calendarDate.todayStamp.start
                                                  - " AND "
                                                  - "etime>"
                                                  - =.BaseDate.calendarDate.todayStamp.start
                                                  - " OR "
                                                  - "stime>="
                                                  - =.BaseDate.calendarDate.todayStamp.start
                                                  - " AND "
                                                  - "etime<="
                                                  - =.BaseDate.calendarDate.todayStamp.end
                                                  - " OR "
                                                  - "stime<"
                                                  - =.BaseDate.calendarDate.todayStamp.end
                                                  - " AND "
                                                  - "etime>="
                                                  - =.BaseDate.calendarDate.todayStamp.end
                                                  - ")"
                                                  - " AND "
                                                  # - "subtype&0xff = 1"
                                                  - "subtype="
                                                  - =.Global.currentSubtype
                                                dataOut: Global.scheduleScondition
                                            - .BaseDate.schedule.scheduleList.edge@: []
                                            - =..schedule.get: ""
                                            - .BaseDate.splitTime@: []
                                            - =.builtIn.date.splitTime:
                                                dataIn:
                                                  object2: =.BaseDate.schedule.scheduleList.edge
                                                  timeSlot: =.ProviderScheduleAppointment.formData.duration
                                                  year: =.BaseDate.calendarDate.year
                                                  month: =.BaseDate.calendarDate.month
                                                  day: =.BaseDate.calendarDate.day
                                                  isSplitCurrent: true
                                                dataOut: BaseDate.splitTime
                                            - =.builtIn.object.setProperty: 
                                                dataIn: 
                                                  obj: =.BaseDate.splitTime
                                                  label: "showTime"
                                                  text: ""
                                                  arr: ["color","backgroundColor"]
                                                  valueArr: ["0xffffff","0x2988e6"]
                                                  errorArr: ["0x333333","0xE9F2FC"]
                                                dataOut: BaseDate.splitTime
                                            - if:
                                              - ..formData.clock.showTime
                                              - actionType: evalObject
                                                object:
                                                  - =.builtIn.object.setProperty: 
                                                        dataIn: 
                                                          obj: =.BaseDate.splitTime
                                                          label: "showTime"
                                                          text: =..formData.clock.showTime
                                                          arr: ["color","backgroundColor"]
                                                          valueArr: ["0xffffff","#2988e6"]
                                                          errorArr: ["0x333333","#E9F2FC"]
                                                        dataOut: BaseDate.splitTime
                                              - continue
                                        - actionType: updateObject
                                          dataKey: Global.clock
                                          dataObject: {}
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: allForms
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: DataTag
                                        - actionType: evalObject
                                          object:
                                            - actionType: builtIn
                                              funcName: hide
                                              viewTag: VT1
                                        - actionType: evalObject
                                          object:
                                            - actionType: builtIn
                                              funcName: show
                                              viewTag: VT2 
                                        - actionType: evalObject
                                          object:
                                            # - if: 
                                            #   - =.BaseDate.calendarDate.day
                                            - ..formDataTemp.nextColor@: "0xcdcdcd"
                                            - actionType: builtIn
                                              funcName: redraw
                                              viewTag: btnView
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: reasonTag

                                      children: 
                                        - type: image
                                          path: Officen_Visit_orange.svg
                                          style: 
                                            height: 2vw
                                            marginLeft: "0.02"
                                        - type: label
                                          text: "Office Visit"
                                          style: 
                                            color: "0x666666"
                                            marginLeft: "0.01"
                        
                        - .ViewColumn:
                          viewTag: VT2
                          style:
                            display: ..formData.OfficevisitTypeTag
                          children:
                            - .PerDetTitle:
                              text: Visit Type
                            - .ViewRow:
                              style:
                                marginTop: "0.005"
                                justifyContent: space-between
                              children:
                                - type: button
                                  # text: Telemedicine
                                  style:
                                    borderRadius: "5px"
                                    width: "0.15625"
                                    height: 3.48vw
                                    border: "1px solid #DEDEDE"
                                    backgroundColor: "0xffffff"
                                    borderWidth: 2px
                                    borderColor: "0xDEDEDE"
                                    fontSize: .Nfont.h1
                                    textAlign: 
                                      x: left
                                      y: center
                                  onClick:
                                    - emit:
                                        actions:
                                          - ..formData.visitType@: "Telemedicine"
                                          - .Global.AppointmentvisitType@: 196609
                                          - .Global.AppointmentvisitTypeShow@: "Telemedicine"
                                          - =.builtIn.array.convertToList:
                                              dataIn:
                                                array: =.ProviderScheduleAppointment.apiRequest.visitReason.document.name.data.reasonForVisit.Telemedicine
                                                key: reason
                                              dataOut: ProviderScheduleAppointment.formData.reasonForVisit
                                    - actionType: evalObject
                                      object:
                                        - ..formData.selectData.reason@: =..formData.reasonForVisit.0
                                        - =.builtIn.array.getByKey:
                                            dataIn:
                                              array: =..apiRequest.visitReason.document.name.data.reasonForVisit.Telemedicine
                                              key1: reason
                                              value: =..formData.reasonForVisit.0
                                              key2: duration
                                            dataOut: ProviderScheduleAppointment.formData.selectData.duration
                                        - =.builtIn.array.getByKey:
                                            dataIn:
                                              array: =..apiRequest.visitReason.document.name.data.reasonForVisit.Telemedicine
                                              key1: reason
                                              value: =..formData.reasonForVisit.0
                                              key2: fee
                                            dataOut: ProviderScheduleAppointment.formData.selectData.fee
                                        - =.builtIn.string.retainNumber:
                                            dataIn:
                                              value: =..formData.selectData.duration
                                            dataOut: ProviderScheduleAppointment.formData.duration
                                        - .BaseDate.formData.duration@: =.ProviderScheduleAppointment.formData.duration
                                        - ..apiRequest.newAppointment.edge.name.duration@: =.ProviderScheduleAppointment.formData.duration
                                        - =.builtIn.array.getByKey:
                                            dataIn:
                                              array: =..apiRequest.visitReason.document.name.data.reasonForVisit.Telemedicine
                                              key1: reason
                                              value: =..formData.reasonForVisit.0
                                              key2: document
                                            dataOut: ProviderScheduleAppointment.formData.docu
                                        - ..formData.showAllDocs@: =.ProviderScheduleAppointment.formData.docu
                                    - actionType: evalObject
                                      object:
                                        - ..formDataTemp.Timeheight@: "0.265"
                                        - ..formData.clock.showTime@: ""
                                        - if: 
                                          - =.builtIn.string.equal:
                                              dataIn:
                                                string1: =..formData.visitType
                                                string2: 'Telemedicine'
                                          - actionType: evalObject
                                            object:
                                              - .ProviderScheduleAppointment.formData.currentSubtype@: '196609'
                                              - .Global.currentSubtype@: '196609'
                                              - .Global.visitType@: "Telemedicine"
                                              - ..apiRequest.newAppointment.edge.subtype@: 0x30002
                                              - ..apiRequest.newAppointment.edge.name.visitType@: "Telemedicine"
                                              - ..apiRequest.newAppointment.edge.name.visitTypeShow@: "Telemedicine"
                                          - continue
                                        - if: 
                                          - =.builtIn.string.equal:
                                              dataIn:
                                                string1: =..formData.visitType
                                                string2: 'Office Visit'
                                          - actionType: evalObject
                                            object:
                                              - .ProviderScheduleAppointment.formData.currentSubtype@: '131073'
                                              - .Global.currentSubtype@: '131073'
                                              - .Global.visitType@: "Office Visit"
                                              - ..apiRequest.newAppointment.edge.subtype@: 0x20002
                                              - ..apiRequest.newAppointment.edge.name.visitType@: "Office Visit"
                                              - ..apiRequest.newAppointment.edge.name.visitTypeShow@: "Office Visit"
                                          - continue
                                        - if:
                                          - =.builtIn.number.typeIsValid:
                                              dataIn:
                                                docType: =..formData.currentType
                                                localArr: [17]
                                                binaryArr: [1]
                                          - actionType: evalObject
                                            object:
                                              - if:
                                                - =.Global.Provider._source.bvid
                                                - ..formData.currentId@: =.Global.Provider._source.bvid
                                                - ..formData.currentId@: =.Global.MedicalFacilityVertex.id
                                          - ..formData.currentId@: =..apiRequest.getFacilityVertex.response.vertex.0.id
                                        - .BaseDate.schedule.edge.id.0@: =..formData.currentId
                                        - =.builtIn.string.concat:
                                            dataIn:
                                              - "(stime<="
                                              - =.BaseDate.calendarDate.todayStamp.start
                                              - " AND "
                                              - "etime>"
                                              - =.BaseDate.calendarDate.todayStamp.start
                                              - " OR "
                                              - "stime>="
                                              - =.BaseDate.calendarDate.todayStamp.start
                                              - " AND "
                                              - "etime<="
                                              - =.BaseDate.calendarDate.todayStamp.end
                                              - " OR "
                                              - "stime<"
                                              - =.BaseDate.calendarDate.todayStamp.end
                                              - " AND "
                                              - "etime>="
                                              - =.BaseDate.calendarDate.todayStamp.end
                                              - ")"
                                              - " AND "
                                              # - "stime>"
                                              # - =.BaseDate.calendarDate.todayStamp.start
                                              # - " AND "
                                              # - "etime<"
                                              # - =.BaseDate.calendarDate.todayStamp.end
                                              # - " AND "
                                              - "subtype="
                                              - =.Global.currentSubtype
                                            dataOut: Global.scheduleScondition
                                        - .BaseDate.schedule.scheduleList.edge@: []
                                        - =..schedule.get: ""
                                        - .BaseDate.splitTime@: []
                                        - =.builtIn.date.splitTime:
                                            dataIn:
                                              object2: =.BaseDate.schedule.scheduleList.edge
                                              timeSlot: =.ProviderScheduleAppointment.formData.duration
                                              year: =.BaseDate.calendarDate.year
                                              month: =.BaseDate.calendarDate.month
                                              day: =.BaseDate.calendarDate.day
                                              isSplitCurrent: true
                                            dataOut: BaseDate.splitTime
                                        - =.builtIn.object.setProperty: 
                                            dataIn: 
                                              obj: =.BaseDate.splitTime
                                              label: "showTime"
                                              text: ""
                                              arr: ["color","backgroundColor"]
                                              valueArr: ["0xffffff","#2988e6"]
                                              errorArr: ["0x333333","#E9F2FC"]
                                            dataOut: BaseDate.splitTime
                                        - if:
                                          - ..formData.clock.showTime
                                          - actionType: evalObject
                                            object:
                                              - =.builtIn.object.setProperty: 
                                                    dataIn: 
                                                      obj: =.BaseDate.splitTime
                                                      label: "showTime"
                                                      text: =..formData.clock.showTime
                                                      arr: ["color","backgroundColor"]
                                                      valueArr: ["0xffffff","#2988e6"]
                                                      errorArr: ["0x333333","#E9F2FC"]
                                                    dataOut: BaseDate.splitTime
                                          - continue
                                    - actionType: updateObject
                                      dataKey: Global.clock
                                      dataObject: {}
                                    - actionType: builtIn
                                      funcName: redraw
                                      viewTag: DataTag    
                                    - actionType: builtIn
                                      funcName: redraw
                                      viewTag: allForms 
                                    - actionType: evalObject
                                      object:
                                        - actionType: builtIn
                                          funcName: show
                                          viewTag: VT1
                                    - actionType: evalObject
                                      object:
                                        - actionType: builtIn
                                          funcName: hide
                                          viewTag: VT2
                                    - actionType: builtIn
                                      funcName: redraw
                                      viewTag: reasonTag
                                  children: 
                                    - type: image
                                      path: Telemedicine_green.png
                                      style: 
                                        height: 2vw
                                        marginLeft: "0.02"
                                    - type: label
                                      text: "Telemedicine"
                                      style: 
                                        marginLeft: "0.01"
                                        color: "0x666666"
                                - type: button
                                  # text: Office Visit
                                  style:
                                    borderRadius: "5px"
                                    width: "0.15625"
                                    height: 3.48vw
                                    border: "1px solid #2988e6"
                                    backgroundColor: "0xffffff"
                                    borderWidth: 2px
                                    borderColor: "#2988e6"
                                    fontSize: .Nfont.h1
                                    textAlign: 
                                      x: left
                                      y: center
                                  onClick:
                                    - emit:
                                        actions:
                                          - ..formData.visitType@: "Office Visit"
                                          - .Global.AppointmentvisitType@: 131073
                                          - .Global.AppointmentvisitTypeShow@: "Office Visit"
                                          - =.builtIn.array.convertToList:
                                              dataIn:
                                                array: =.ProviderScheduleAppointment.apiRequest.visitReason.document.name.data.reasonForVisit.OfficeVisits
                                                key: reason
                                              dataOut: ProviderScheduleAppointment.formData.reasonForVisit
                                    - actionType: evalObject
                                      object:
                                        - ..formData.selectData.reason@: =..formData.reasonForVisit.0
                                        - =.builtIn.array.getByKey:
                                            dataIn:
                                              array: =..apiRequest.visitReason.document.name.data.reasonForVisit.OfficeVisits
                                              key1: reason
                                              value: =..formData.reasonForVisit.0
                                              key2: duration
                                            dataOut: ProviderScheduleAppointment.formData.selectData.duration
                                        - =.builtIn.array.getByKey:
                                            dataIn:
                                              array: =..apiRequest.visitReason.document.name.data.reasonForVisit.OfficeVisits
                                              key1: reason
                                              value: =..formData.reasonForVisit.0
                                              key2: fee
                                            dataOut: ProviderScheduleAppointment.formData.selectData.fee
                                        - =.builtIn.string.retainNumber:
                                            dataIn:
                                              value: =..formData.selectData.duration
                                            dataOut: ProviderScheduleAppointment.formData.duration
                                        - .BaseDate.formData.duration@: =.ProviderScheduleAppointment.formData.duration
                                        - ..apiRequest.newAppointment.edge.name.duration@: =.ProviderScheduleAppointment.formData.duration
                                        - =.builtIn.array.getByKey:
                                            dataIn:
                                              array: =..apiRequest.visitReason.document.name.data.reasonForVisit.OfficeVisits
                                              key1: reason
                                              value: =..formData.reasonForVisit.0
                                              key2: document
                                            dataOut: ProviderScheduleAppointment.formData.docu
                                        - ..formData.showAllDocs@: =.ProviderScheduleAppointment.formData.docu
                                    - actionType: evalObject
                                      object: 
                                        - ..formDataTemp.Timeheight@: "0.165"
                                        - if:
                                          - =.builtIn.string.equal:
                                              dataIn:
                                                string1: =.Global.FacilityLink
                                                string2: true
                                          - actionType: evalObject
                                            object: 
                                              - =.builtIn.array.selectOneToArr:
                                                  dataIn:
                                                    arr: =..apiRequest.locationAll.docResp.doc.0.name.data.allLocation
                                                    key: "medicalFacilityName"
                                                  dataOut: ProviderScheduleAppointment.formData.addressName
                                              - ..formData.formDataOfficeVisisAddress@: =..formData.addressName.0
                                              - .Global.addressName@: =..formData.addressName.0
                                              - =.builtIn.array.matchInArray:
                                                  dataIn:
                                                    arr: =..apiRequest.locationAll.docResp.doc.0.name.data.allLocation
                                                    value: =..formData.formDataOfficeVisisAddress
                                                    key: medicalFacilityName
                                                    key1: "id"
                                                  dataOut: ProviderScheduleAppointment.formData.locationId
                                              - ..formData.currentId@: =..formData.locationId
                                              - ..apiRequest.fac_RootNotebook.edgeReq.id@: =..formData.currentId
                                              - =..apiRequest.fac_RootNotebook.edgeAPI.get: ""
                                              - ..apiRequest.facility.documentReq.id@: =..apiRequest.fac_RootNotebook.edge.edge.0.id
                                              - =..apiRequest.facility.docAPI.get: ""
                                              - ..formData.fullAddress@: =..apiRequest.facility.response.doc.0.name.data.basicInfo.location
                                          - continue
                                    - actionType: evalObject
                                      object:
                                        - ..formData.clock.showTime@: ""
                                        - if: 
                                          - =.builtIn.string.equal:
                                              dataIn:
                                                string1: =..formData.visitType
                                                string2: 'Telemedicine'
                                          - actionType: evalObject
                                            object:
                                              - .ProviderScheduleAppointment.formData.currentSubtype@: '196609'
                                              - .Global.currentSubtype@: '196609'
                                              - .Global.visitType@: "Telemedicine"
                                              - ..apiRequest.newAppointment.edge.subtype@: 0x30002
                                              - ..apiRequest.newAppointment.edge.name.visitType@: "Telemedicine"
                                              - ..apiRequest.newAppointment.edge.name.visitTypeShow@: "Telemedicine"
                                          - continue
                                        - if: 
                                          - =.builtIn.string.equal:
                                              dataIn:
                                                string1: =..formData.visitType
                                                string2: 'Office Visit'
                                          - actionType: evalObject
                                            object:
                                              - .ProviderScheduleAppointment.formData.currentSubtype@: '131073'
                                              - .Global.currentSubtype@: '131073'
                                              - .Global.visitType@: "Office Visit"
                                              - ..apiRequest.newAppointment.edge.subtype@: 0x20002
                                              - ..apiRequest.newAppointment.edge.name.visitType@: "Office Visit"
                                              - ..apiRequest.newAppointment.edge.name.visitTypeShow@: "Office Visit"
                                          - continue
                                        - if:
                                          - =.builtIn.number.typeIsValid:
                                              dataIn:
                                                docType: =..formData.currentType
                                                localArr: [17]
                                                binaryArr: [0]
                                          - actionType: evalObject
                                            object:
                                              - if:
                                                - =.Global.Provider._source.bvid
                                                - ..formData.currentId@: =.Global.Provider._source.bvid
                                                - ..formData.currentId@: =.Global.MedicalFacilityVertex.id
                                          - ..formData.currentId@: =..apiRequest.locationAll.docResp.doc.0.name.data.allLocation.0.id
                                        - .BaseDate.schedule.edge.id.0@: =..formData.currentId
                                        - =.builtIn.string.concat:
                                            dataIn:
                                              - "(stime<="
                                              - =.BaseDate.calendarDate.todayStamp.start
                                              - " AND "
                                              - "etime>"
                                              - =.BaseDate.calendarDate.todayStamp.start
                                              - " OR "
                                              - "stime>="
                                              - =.BaseDate.calendarDate.todayStamp.start
                                              - " AND "
                                              - "etime<="
                                              - =.BaseDate.calendarDate.todayStamp.end
                                              - " OR "
                                              - "stime<"
                                              - =.BaseDate.calendarDate.todayStamp.end
                                              - " AND "
                                              - "etime>="
                                              - =.BaseDate.calendarDate.todayStamp.end
                                              - ")"
                                              - " AND "
                                              # - "subtype&0xff = 1"
                                              - "subtype="
                                              - =.Global.currentSubtype
                                            dataOut: Global.scheduleScondition
                                        - .BaseDate.schedule.scheduleList.edge@: []
                                        - =..schedule.get: ""
                                        - .BaseDate.splitTime@: []
                                        - =.builtIn.date.splitTime:
                                            dataIn:
                                              object2: =.BaseDate.schedule.scheduleList.edge
                                              timeSlot: =.ProviderScheduleAppointment.formData.duration
                                              year: =.BaseDate.calendarDate.year
                                              month: =.BaseDate.calendarDate.month
                                              day: =.BaseDate.calendarDate.day
                                              isSplitCurrent: true
                                            dataOut: BaseDate.splitTime
                                        - =.builtIn.object.setProperty: 
                                              dataIn: 
                                                obj: =.BaseDate.splitTime
                                                label: "showTime"
                                                text: "test"
                                                arr: ["color","backgroundColor"]
                                                valueArr: ["0xffffff","0x2988e6"]
                                                errorArr: ["0x333333","0xE9F2FC"]
                                              dataOut: BaseDate.splitTime
                                        - if:
                                          - ..formData.clock.showTime
                                          - actionType: evalObject
                                            object:
                                              - =.builtIn.object.setProperty: 
                                                    dataIn: 
                                                      obj: =.BaseDate.splitTime
                                                      label: "showTime"
                                                      text: =..formData.clock.showTime
                                                      arr: ["color","backgroundColor"]
                                                      valueArr: ["0xffffff","#2988e6"]
                                                      errorArr: ["0x333333","#E9F2FC"]
                                                    dataOut: BaseDate.splitTime
                                          - continue
                                    - actionType: updateObject
                                      dataKey: Global.clock
                                      dataObject: {}
                                    - actionType: builtIn
                                      funcName: redraw
                                      viewTag: DataTag  
                                    - actionType: builtIn
                                      funcName: redraw
                                      viewTag: allForms
                                    - actionType: evalObject
                                      object:
                                        - actionType: builtIn
                                          funcName: hide
                                          viewTag: VT1
                                    - actionType: evalObject
                                      object:
                                        - actionType: builtIn
                                          funcName: show
                                          viewTag: VT2   
                                    - actionType: builtIn
                                      funcName: redraw
                                      viewTag: reasonTag
 
                                  children: 
                                    
                                    - type: image
                                      path: Officen_Visit_orange.svg
                                      style: 
                                        height: 2vw
                                        marginLeft: "0.02"
                                    - type: label
                                      text: "Office Visit"
                                      style:
                                        marginLeft: "0.01"
                                        fontFamily: "Arial"   
                                        fontWeight: bold
                                        color: "0x143459"
                            - .ViewColumn:
                              children:
                                - .PerDetTitle:
                                  text: "Facility Location"
                                  style: 
                                    marginTop: 0.6vw
                                    marginBottom: 0.3vw
                                - type: select
                                  viewTag: showSelect
                                  dataKey: formData.formDataOfficeVisisAddress # formData.countryCode : inputValue
                                  options:
                                    ..formData.addressName
                                  onChange: 
                                    - actionType: evalObject
                                      object: 
                                        - =.builtIn.array.matchInArray:
                                            dataIn:
                                              arr: =..apiRequest.locationAll.docResp.doc.0.name.data.allLocation
                                              value: =..formData.formDataOfficeVisisAddress
                                              key: medicalFacilityName
                                              key1: "id"
                                            dataOut: ProviderScheduleAppointment.formData.locationId
                                        - ..formData.currentId@: =..formData.locationId
                                        - .Global.addressName@: =..formData.formDataOfficeVisisAddress
                                        - ..apiRequest.fac_RootNotebook.edgeReq.id@: =..formData.currentId
                                        - =..apiRequest.fac_RootNotebook.edgeAPI.get: ""
                                        - ..apiRequest.facility.documentReq.id@: =..apiRequest.fac_RootNotebook.edge.edge.0.id
                                        - =..apiRequest.facility.docAPI.get: ""
                                        - ..formData.fullAddress@: =..apiRequest.facility.response.doc.0.name.data.basicInfo.location
                                        - .BaseDate.schedule.edge.id.0@: =..formData.currentId
                                        - =.builtIn.string.concat:
                                            dataIn:
                                              - "(stime<="
                                              - =.BaseDate.calendarDate.todayStamp.start
                                              - " AND "
                                              - "etime>"
                                              - =.BaseDate.calendarDate.todayStamp.start
                                              - " OR "
                                              - "stime>="
                                              - =.BaseDate.calendarDate.todayStamp.start
                                              - " AND "
                                              - "etime<="
                                              - =.BaseDate.calendarDate.todayStamp.end
                                              - " OR "
                                              - "stime<"
                                              - =.BaseDate.calendarDate.todayStamp.end
                                              - " AND "
                                              - "etime>="
                                              - =.BaseDate.calendarDate.todayStamp.end
                                              - ")"
                                              - " AND "
                                              # - "stime>"
                                              # - =.BaseDate.calendarDate.todayStamp.start
                                              # - " AND "
                                              # - "etime<"
                                              # - =.BaseDate.calendarDate.todayStamp.end
                                              # - " AND "
                                              - "subtype="
                                              - =.Global.currentSubtype
                                            dataOut: Global.scheduleScondition
                                        - .BaseDate.schedule.scheduleList.edge@: []
                                        - =.ProviderScheduleAppointment.schedule.get: ""
                                        - .BaseDate.splitTime@: []
                                        - =.builtIn.date.splitTime:
                                            dataIn:
                                              object2: =.BaseDate.schedule.scheduleList.edge
                                              timeSlot: =.ProviderScheduleAppointment.formData.duration
                                              year: =.BaseDate.calendarDate.year
                                              month: =.BaseDate.calendarDate.month
                                              day: =.BaseDate.calendarDate.day
                                              isSplitCurrent: true
                                            dataOut: BaseDate.splitTime
                                        - =.builtIn.object.setProperty: 
                                            dataIn: 
                                              obj: =.BaseDate.splitTime
                                              label: "showTime"
                                              text: ""
                                              arr: ["color","backgroundColor"]
                                              valueArr: ["0xffffff","0x2988e6"]
                                              errorArr: ["0x333333","0xE9F2FC"]
                                            dataOut: BaseDate.splitTime
                                        - if:
                                          - ..formData.clock.showTime
                                          - actionType: evalObject
                                            object:
                                              - =.builtIn.object.setProperty: 
                                                    dataIn: 
                                                      obj: =.BaseDate.splitTime
                                                      label: "showTime"
                                                      text: =..formData.clock.showTime
                                                      arr: ["color","backgroundColor"]
                                                      valueArr: ["0xffffff","#2988e6"]
                                                      errorArr: ["0x333333","#E9F2FC"]
                                                    dataOut: BaseDate.splitTime
                                          - continue
                                    - actionType: builtIn
                                      funcName: redraw
                                      viewTag: DataTag
                                    - actionType: builtIn
                                      funcName: redraw
                                      viewTag: showOffInfo
                                    - actionType: evalObject
                                      object:
                                        - if: 
                                          - =.BaseDate.calendarDate.day
                                          - ..formDataTemp.nextColor@: "0xcdcdcd"
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: btnView
                                  style:
                                    width: "0.322"
                                    height: "0.044"
                                    fontSize: .Nfont.h1
                                    textAlign: 
                                      y: center   
                                    border: 
                                      style: 3
                                    borderWidth: 10px
                                    borderColor: "0xDEDEDE"
                                    borderRadius: "5px"
                                - type: view
                                  style:
                                    marginTop: "0.2vw"
                                    textAlign:
                                      y: center
                                  children:
                                    - type: image
                                      path: location.svg
                                      style: 
                                        width: "0.008"
                                        display: "inline-block"
                                    - type: label
                                      viewTag: showOffInfo
                                      dataKey: formData.fullAddress
                                      style:
                                        marginLeft: "0.005"
                                        marginTop: "0.2vw"
                                        width: 30vw
                                        height: "auto"
                                        fontSize: .Nfont.h0_1
                                        color: "0x666666"
                                        textAlign: 
                                          y: center   
                        - .ViewRow:
                          viewTag: reasonTag
                          style:
                            justifyContent: space-between
                            marginTop: 0.5vw
                          children:
                            - .ViewColumn:
                              children:
                                - .PerDetTitle:
                                  text: Reason for Visit
                                - type: select
                                  dataKey: formData.selectData.reason
                                  options:
                                    ..formData.reasonForVisit
                                  style:
                                    borderRadius: "5px"
                                    width: 16vw
                                    height: 2.78vw
                                    border: "1px solid #DEDEDE"
                                    borderWidth: 1px
                                    borderColor: "0xDEDEDE"
                                    fontSize: .Nfont.h1
                                    marginTop: "0.005"
                                    color: "0x333333"
                                  onChange:
                                    - actionType: evalObject
                                      object:
                                        .Global._nonce@:
                                          =.builtIn.math.random: ""
                                    - actionType: evalObject
                                      object:
                                        - ..formData.clock.showTime@: ""
                                        - if: 
                                          - =.builtIn.string.equal:
                                              dataIn:
                                                string1: =..formData.visitType
                                                string2: 'Telemedicine'
                                          - actionType: evalObject
                                            object:
                                              - .ProviderScheduleAppointment.formData.currentSubtype@: '196609'
                                              - .Global.currentSubtype@: '196609'
                                              - .Global.visitType@: "Telemedicine"
                                              - ..apiRequest.newAppointment.edge.subtype@: 0x30002
                                              - ..apiRequest.newAppointment.edge.name.visitType@: "Telemedicine"
                                              - ..apiRequest.newAppointment.edge.name.visitTypeShow@: "Telemedicine"
                                          
                                              - =.builtIn.array.getByKey:
                                                  dataIn:
                                                    array: =..apiRequest.visitReason.document.name.data.reasonForVisit.Telemedicine
                                                    key1: reason
                                                    value: =..formData.selectData.reason
                                                    key2: duration
                                                  dataOut: ProviderScheduleAppointment.formData.selectData.duration
                                              - =.builtIn.array.getByKey:
                                                  dataIn:
                                                    array: =..apiRequest.visitReason.document.name.data.reasonForVisit.Telemedicine
                                                    key1: reason
                                                    value: =..formData.selectData.reason
                                                    key2: fee
                                                  dataOut: ProviderScheduleAppointment.formData.selectData.fee
                                              - =.builtIn.string.retainNumber:
                                                  dataIn:
                                                    value: =..formData.selectData.duration
                                                  dataOut: ProviderScheduleAppointment.formData.duration
                                              - .BaseDate.formData.duration@: =.ProviderScheduleAppointment.formData.duration
                                              - ..apiRequest.newAppointment.edge.name.duration@: =.ProviderScheduleAppointment.formData.duration
                                              - =.builtIn.array.getByKey:
                                                  dataIn:
                                                    array: =..apiRequest.visitReason.document.name.data.reasonForVisit.Telemedicine
                                                    key1: reason
                                                    value: =..formData.selectData.reason
                                                    key2: document
                                                  dataOut: ProviderScheduleAppointment.formData.docu
                                              - =.builtIn.array.getListLength: 
                                                  dataIn: 
                                                    object: =.ProviderScheduleAppointment.formData.docu
                                                  dataOut: ProviderScheduleAppointment.formData.localDocuLength
                                              - =.builtIn.string.equal:
                                                  dataIn:
                                                    string1: =..formData.localDocuLength
                                                    string2: =..formData.globalDocuLength
                                                  dataOut: ProviderScheduleAppointment.formData.otherFormRead
                                              - .BaseDate.splitTime@: []
                                          - continue
                                        - if: 
                                          - =.builtIn.string.equal:
                                              dataIn:
                                                string1: =..formData.visitType
                                                string2: 'Office Visit'
                                          - actionType: evalObject
                                            object:
                                              - .ProviderScheduleAppointment.formData.currentSubtype@: '131073'
                                              - .Global.currentSubtype@: '131073'
                                              - .Global.visitType@: "Office Visits"
                                              - ..apiRequest.newAppointment.edge.subtype@: 0x20002
                                              - ..apiRequest.newAppointment.edge.name.visitType@: "Office Visits"
                                              - ..apiRequest.newAppointment.edge.name.visitTypeShow@: "Office Visits"
                                          
                                              - =.builtIn.array.getByKey:
                                                  dataIn:
                                                    array: =..apiRequest.visitReason.document.name.data.reasonForVisit.OfficeVisits
                                                    key1: reason
                                                    value: =..formData.selectData.reason
                                                    key2: duration
                                                  dataOut: ProviderScheduleAppointment.formData.selectData.duration
                                              - =.builtIn.array.getByKey:
                                                  dataIn:
                                                    array: =..apiRequest.visitReason.document.name.data.reasonForVisit.OfficeVisits
                                                    key1: reason
                                                    value: =..formData.selectData.reason
                                                    key2: fee
                                                  dataOut: ProviderScheduleAppointment.formData.selectData.fee
                                              - =.builtIn.string.retainNumber:
                                                  dataIn:
                                                    value: =..formData.selectData.duration
                                                  dataOut: ProviderScheduleAppointment.formData.duration
                                              - .BaseDate.formData.duration@: =.ProviderScheduleAppointment.formData.duration
                                              - ..apiRequest.newAppointment.edge.name.duration@: =.ProviderScheduleAppointment.formData.duration
                                              - =.builtIn.array.getByKey:
                                                  dataIn:
                                                    array: =..apiRequest.visitReason.document.name.data.reasonForVisit.OfficeVisits
                                                    key1: reason
                                                    value: =..formData.selectData.reason
                                                    key2: document
                                                  dataOut: ProviderScheduleAppointment.formData.docu
                                              - =.builtIn.array.getListLength: 
                                                  dataIn: 
                                                    object: =.ProviderScheduleAppointment.formData.docu
                                                  dataOut: ProviderScheduleAppointment.formData.localDocuLength
                                              - =.builtIn.string.equal:
                                                  dataIn:
                                                    string1: =..formData.localDocuLength
                                                    string2: =..formData.globalDocuLength
                                                  dataOut: ProviderScheduleAppointment.formData.otherFormRead
                                              - .BaseDate.splitTime@: []
                                          - continue
                                    - actionType: evalObject
                                      object:
                                        - .Global.localDocuLength@: =..formData.localDocuLength
                                        - ..apiRequest.newAppointment.edge.name.Reason@: =..formData.selectData.reason
                                        - ..apiRequest.newAppointment.edge.name.visitReason@: =..formData.selectData.reason
                                        - ..apiRequest.newAppointment.edge.name.fee@: =..formData.selectData.fee
                                        - .Global.checkselectData@: =..formData.selectData
                                        - ..formData.showAllDocs@: =.ProviderScheduleAppointment.formData.docu
                                        - .Global.showChangeAll@: =..formData.showAllDocs
                                        - =.builtIn.date.splitTime:
                                            dataIn:
                                              object2: =.BaseDate.schedule.scheduleList.edge
                                              timeSlot: =.ProviderScheduleAppointment.formData.duration
                                              year: =.BaseDate.calendarDate.year
                                              month: =.BaseDate.calendarDate.month
                                              day: =.BaseDate.calendarDate.day
                                              isSplitCurrent: true
                                            dataOut: BaseDate.splitTime
                                        - =.builtIn.object.setProperty: 
                                            dataIn: 
                                              obj: =.BaseDate.splitTime
                                              label: "showTime"
                                              text: ""
                                              arr: ["color","backgroundColor"]
                                              valueArr: ["0xffffff","#2988e6"]
                                              errorArr: ["0x333333","#E9F2FC"]
                                            dataOut: BaseDate.splitTime
                                    - actionType: updateObject
                                      dataKey: Global.clock
                                      dataObject: {}
                                    - actionType: builtIn
                                      funcName: redraw
                                      viewTag: durationTag 
                                    - actionType: builtIn
                                      funcName: redraw
                                      viewTag: feeTag 
                                    - actionType: builtIn
                                      funcName: redraw
                                      viewTag: DataTag
                                    - actionType: builtIn
                                      funcName: redraw
                                      viewTag: allForms
                                    - actionType: evalObject
                                      object:
                                        - ..formDataTemp.nextColor@: "0xcdcdcd"
                                    - actionType: builtIn
                                      funcName: redraw
                                      viewTag: btnView

                            - .ViewColumn:
                              children:
                                - .PerDetTitle:
                                  text: Duration
                                - type: textField
                                  dataKey: ProviderScheduleAppointment.formData.selectData.duration
                                  viewTag: durationTag
                                  isEditable: false
                                  style: 
                                    marginTop: "0.005"
                                    borderRadius: "5px"
                                    color: "0x333333"
                                    width: 7vw
                                    height: 2.78vw
                                    fontSize: .Nfont.h1
                                    textAlign: 
                                      y: center 
                            - .ViewColumn:
                              children:
                                - .PerDetTitle:
                                  text: Fee
                                - type: textField
                                  text=func: .builtIn.string.dollarFormat
                                  dataKey: ProviderScheduleAppointment.formData.selectData.fee
                                  viewTag: feeTag
                                  isEditable: false
                                  style: 
                                    marginTop: "0.005"
                                    borderRadius: "5px"
                                    width: 7vw
                                    height: 2.78vw
                                    fontSize: .Nfont.h1
                                    textAlign: 
                                      y: center 
                        - type: view
                          viewTag: calendarTag
                          style:
                            margin: 0 auto
                            width: "0.322"
                            height: "0.13"
                            display: "block"
                            marginTop: 1.74vw
                          children:
                            - type: view
                              style:
                                width: "0.322"
                                top: "0"
                                backgroundColor: "0xE9F2FC"
                                height: 2.32vw
                                border: 
                                  style: "3"
                                borderColor: "#d0d9df"
                                borderWidth: "0"
                                display: flex
                                flexDirection: row
                                justifyContent: "space-between"
                              children:
                                - type: view 
                                  style:
                                    width: "0.19"
                                    height: 2.32vw
                                  children:
                                    - type: select
                                      viewTag: monthTag
                                      dataKey: calendarDate.monthName 
                                      options:
                                        .BaseDate.month
                                      onChange:
                                        - actionType: evalObject
                                          object:  
                                            - .BaseDate.calendarDate.monthName@: =..calendarDate.monthName
                                            - =.builtIn.date.transformMonth:
                                                dataIn:
                                                  month: =.BaseDate.calendarDate.monthName
                                                  flag: 2
                                                dataOut: BaseDate.calendarDate.month
                                            - =.builtIn.date.calendarArray:
                                                dataIn:
                                                  year: =.BaseDate.calendarDate.year
                                                  month: =.BaseDate.calendarDate.month
                                                  today: 1
                                                dataOut: BaseDate.calendarDate.dayLable
                                            - .BaseDate.calendarDate.day@: 1
                                            - =.builtIn.date.ShowDateByNumber:
                                                dataIn:
                                                  year: =.BaseDate.calendarDate.year
                                                  month: =.BaseDate.calendarDate.month
                                                  day: =.BaseDate.calendarDate.day
                                                  formatType: "Y-M-D" #elaine change order of date to us
                                                dataOut: BaseDate.calendarDate.todayDate
                                            - =.builtIn.date.ShowDateByNumber:
                                                dataIn:
                                                  year: =.BaseDate.calendarDate.year
                                                  month: =.BaseDate.calendarDate.month
                                                  day: =.BaseDate.calendarDate.day
                                                dataOut: ProviderScheduleAppointment.formData.selectDate
                                            - =.builtIn.date.miniWeeklyCalendarArray:
                                                dataIn:
                                                  year: =.BaseDate.calendarDate.year
                                                  month: =.BaseDate.calendarDate.month
                                                  today: 32
                                                  markDay: 1
                                                  color: "0x000000"
                                                  backgroundColor: "0xFFFFFF6f"
                                                  todayColor: "0xffffff"
                                                  todayBackgroundColor: "0x2988E6"
                                                dataOut: BaseDate.calendarDate.minidayLable    
                                            
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: showDateTag
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: calendarTag
                                      style:
                                        width: "0.04"
                                        height: 2.32vw
                                        marginLeft: "0.02"
                                        fontSize: .Nfont.h0
                                        backgroundColor: "0xffffff00"
                                        color: "0x333333"
                                    - type: select
                                      viewTag: yearTag
                                      dataKey: calendarDate.year
                                      options:
                                        .BaseDate.year
                                      onChange:
                                        - actionType: evalObject
                                          object:       
                                            - =.builtIn.date.transformYear:
                                                dataIn:
                                                  year: =..calendarDate.year 
                                                dataOut: BaseDate.calendarDate.year 
                                            - =.builtIn.date.calendarArray:
                                                dataIn:
                                                  year: =.BaseDate.calendarDate.year
                                                  month: =.BaseDate.calendarDate.month
                                                  today: =.BaseDate.calendarDate.day
                                                dataOut: BaseDate.calendarDate.dayLable
                                            # - .BaseDate.calendarDate.month@: 1
                                            # - .BaseDate.calendarDate.day@: 1
                                            - =.builtIn.date.transformMonth:
                                                dataIn:
                                                  month: =.BaseDate.calendarDate.month
                                                dataOut: BaseDate.calendarDate.monthName
                                            - ..calendarDate.monthName@: =.BaseDate.calendarDate.monthName
                                            - ..calendarDate.year@: =.BaseDate.calendarDate.year
                                            - =.builtIn.date.ShowDateByNumber:
                                                dataIn:
                                                  year: =.BaseDate.calendarDate.year
                                                  month: =.BaseDate.calendarDate.month
                                                  day: =.BaseDate.calendarDate.day
                                                  formatType: "Y-M-D" #elaine change order of date to us
                                                dataOut: BaseDate.calendarDate.todayDate
                                            - =.builtIn.date.ShowDateByNumber:
                                                dataIn:
                                                  year: =.BaseDate.calendarDate.year
                                                  month: =.BaseDate.calendarDate.month
                                                  day: =.BaseDate.calendarDate.day
                                                dataOut: ProviderScheduleAppointment.formData.selectDate
                                            - =.builtIn.date.miniWeeklyCalendarArray:
                                                dataIn:
                                                  year: =.BaseDate.calendarDate.year
                                                  month: =.BaseDate.calendarDate.month
                                                  today: 32
                                                  markDay: 1
                                                  color: "0x000000"
                                                  backgroundColor: "0xFFFFFF6f"
                                                  todayColor: "0xffffff"
                                                  todayBackgroundColor: "0x2988E6"
                                                dataOut: BaseDate.calendarDate.minidayLable    
                                            
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: showDateTag
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: calendarTag
                                      style:
                                        width: "0.04"
                                        height: 2.32vw
                                        marginLeft: "0.02"
                                        fontSize: .Nfont.h0
                                        backgroundColor: "0xffffff00"
                                        color: "0x333333"

                                - type: view 
                                  style:
                                    width: "0.132"
                                    height: 2.32vw
                                  children:
                                    - type: label
                                      viewTag: showDateTag
                                      dataKey: formData.selectDate
                                      style:
                                        width: "0.161"
                                        fontSize: .Nfont.h0
                                        height: 2.32vw
                                        color: "0x666666"
                                        textAlign:
                                          y: center
                                  
                            - type: view
                              style:
                                width: "0.322"
                                height: "0.08"
                                marginTop: "0.05"
                                border: 
                                  style: "3"
                                borderColor: "#ffffff"
                                borderRadius: "5"
                                borderWidth: "0"
                              children:
                                - type: view
                                  style:
                                    top: "0"
                                    left: "0"
                                    width: "0.28"
                                    height: "0.05"
                                    marginLeft: "0.02"
                                  children:
                                    - type: list
                                      contentType: listObject
                                      listObject: 
                                        - key: S 
                                        - key: M
                                        - key: T
                                        - key: W
                                        - key: T
                                        - key: F
                                        - key: S
                                      iteratorVar: itemObject
                                      style:
                                        width: "0.28"
                                        height: "0.01"
                                        justifyContent: "space-between"
                                      children:
                                        - type: listItem
                                          itemObject: ""
                                          style:
                                            width: "0.04"
                                            height: "0.05"
                                            boxSizing: "border-box"
                                            border: "none"
                                            padding: "0"
                                            display: "inline-block"
                                          children:
                                            - type: label 
                                              dataKey: itemObject.key
                                              style:
                                                color: "0x333333"
                                                width: "0.04"
                                                height: "0.05"
                                                fontSize: .Nfont.h1
                                                fontWeight: bold
                                                fontFamily: "Arial"
                                                textAlign:
                                                  x: center
                                - type: list
                                  contentType: listObject
                                  listObject: =.BaseDate.calendarDate.minidayLable
                                  iteratorVar: itemObject
                                  style:
                                    marginTop: "0.013"
                                    width: "0.29"
                                    marginLeft: "0.02"
                                    flexDirection: row
                                    justifyContent: "space-between"
                                    alignItems: "center"
                                  children:
                                    - type: listItem
                                      itemObject: ""
                                      onClick:
                                        - emit:
                                            dataKey:
                                              var: itemObject
                                            actions:
                                              - =.builtIn.date.miniWeeklyCalendarArray:
                                                  dataIn:
                                                    year: $var.year
                                                    month: $var.month
                                                    today: $var.day
                                                    markDay: $var.day
                                                    color: "0x000000"
                                                    backgroundColor: "0xFFFFFF6f"
                                                    todayColor: "0xffffff"
                                                    todayBackgroundColor: "0x2988E6"
                                                  dataOut: BaseDate.calendarDate.minidayLable
                                              - .BaseDate.calendarDate.year@: $var.year
                                              - .BaseDate.calendarDate.month@: $var.month
                                              - .BaseDate.calendarDate.day@: $var.day
                                              - =.builtIn.date.ShowDateByNumber:
                                                  dataIn:
                                                    year: =.BaseDate.calendarDate.year
                                                    month: =.BaseDate.calendarDate.month
                                                    day: =.BaseDate.calendarDate.day
                                                    formatType: "Y-M-D"
                                                  dataOut: BaseDate.calendarDate.todayDate
                                              - =.builtIn.date.transformMonth:
                                                  dataIn:
                                                    month: =.BaseDate.calendarDate.month
                                                  dataOut: BaseDate.calendarDate.monthName
                                              - =.builtIn.date.getTimeStampOfDate:
                                                  dataIn:
                                                    date: =.BaseDate.calendarDate.todayDate
                                                  dataOut: BaseDate.calendarDate.todayStamp
                                              - =.builtIn.string.concat:
                                                  dataIn:
                                                    - "(stime<="
                                                    - =.BaseDate.calendarDate.todayStamp.start
                                                    - " AND "
                                                    - "etime>"
                                                    - =.BaseDate.calendarDate.todayStamp.start
                                                    - " OR "
                                                    - "stime>="
                                                    - =.BaseDate.calendarDate.todayStamp.start
                                                    - " AND "
                                                    - "etime<="
                                                    - =.BaseDate.calendarDate.todayStamp.end
                                                    - " OR "
                                                    - "stime<"
                                                    - =.BaseDate.calendarDate.todayStamp.end
                                                    - " AND "
                                                    - "etime>="
                                                    - =.BaseDate.calendarDate.todayStamp.end
                                                    - ")"
                                                    # - "stime>"
                                                    # - =.BaseDate.calendarDate.todayStamp.start
                                                    # - " AND "
                                                    # - "etime<"
                                                    # - =.BaseDate.calendarDate.todayStamp.end
                                                    - " AND "
                                                    - "subtype="
                                                    - =.Global.currentSubtype
                                                  dataOut: Global.scheduleScondition
                                        - actionType: evalObject
                                          object:
                                            - if:
                                              - =.builtIn.math.greater:
                                                  dataIn:
                                                    num1: =.BaseDate.calendarDate.todayStamp.end
                                                    num2: =.ProviderScheduleAppointment.formData.nowTimeStamp
                                              - continue
                                              - actionType: popUp
                                                popUpView: judgeTime1
                                                wait: true
                                            - ..formDataTemp.nextColor@: "0xcdcdcd"
                                            - actionType: builtIn
                                              funcName: redraw
                                              viewTag: btnView 
                                            - .BaseDate.schedule.scheduleList.edge@: []
                                            - ..calendarDate.todayDate@: =.BaseDate.calendarDate.todayDate
                                            - .Global.calendarDate@: =.BaseDate.calendarDate
                                        - actionType: evalObject
                                          object: 
                                            .Global._nonce@: 
                                              =.builtIn.math.random: ""
                                        - actionType: evalObject
                                          object:
                                            - =..schedule.get: ""
                                        - actionType: evalObject
                                          object:  
                                            - =.builtIn.date.splitTime:
                                                dataIn:
                                                  object2: =.BaseDate.schedule.scheduleList.edge
                                                  timeSlot: =.BaseDate.formData.duration
                                                  year: =.BaseDate.calendarDate.year
                                                  month: =.BaseDate.calendarDate.month
                                                  day: =.BaseDate.calendarDate.day
                                                  isSplitCurrent: true
                                                dataOut: BaseDate.splitTime
                                            - =.builtIn.object.setProperty: 
                                                dataIn: 
                                                  obj: =.BaseDate.splitTime
                                                  label: "showTime"
                                                  text: ""
                                                  arr: ["color","backgroundColor"]
                                                  valueArr: ["0xffffff","#2988e6"]
                                                  errorArr: ["0x333333","#E9F2FC"]
                                                dataOut: BaseDate.splitTime
                                            - =.builtIn.date.ShowDateByNumber:
                                                dataIn:
                                                  year: =.BaseDate.calendarDate.year
                                                  month: =.BaseDate.calendarDate.month
                                                  day: =.BaseDate.calendarDate.day
                                                dataOut: ProviderScheduleAppointment.formData.selectDate
                                            - =.builtIn.date.transformMonth:
                                                dataIn:
                                                  month: =.BaseDate.calendarDate.month
                                                dataOut: BaseDate.calendarDate.monthName
                                            - ..calendarDate.monthName@: =.BaseDate.calendarDate.monthName
                                            - ..calendarDate.year@: =.BaseDate.calendarDate.year
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: monthTag
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: yearTag  
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: showDateTag
                                        - actionType: updateObject
                                          dataKey: Global.clock
                                          dataObject: {}
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: calendarTag
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: DataTag
                                      style:
                                        width: "0.02"
                                        height: "0.035"
                                        # boxSizing: "border-box"
                                        # border: "none"
                                        padding: "0"
                                        margin: "0"
                                        display: "inline-block"
                                        marginLeft: "0.01"
                                        marginRight: "0.01"
                                        marginTop: "0.02"
                                      children:
                                        - type: label
                                          dataKey: itemObject.day
                                          style:
                                            top: "0"
                                            width: "0.02"
                                            height: "0.035"
                                            color: itemObject.color
                                            backgroundColor: itemObject.backgroundColor
                                            borderRadius: "50"
                                            fontSize: .Nfont.h1
                                            textAlign:
                                              x: center
                                              y: center
                                - type: view
                                  style:
                                    top: "0.01"
                                    left: "0.01"
                                    width: "0.03"
                                    height: "0.08"
                                  children:
                                    - type: image
                                      path: left_blue_arrow.svg
                                      onClick:
                                        - emit:
                                            actions:
                                                - =.builtIn.date.LastWeek:
                                                    dataIn:
                                                      year: =.BaseDate.calendarDate.minidayLable.0.year
                                                      month: =.BaseDate.calendarDate.minidayLable.0.month
                                                      day: =.BaseDate.calendarDate.minidayLable.0.day
                                                    dataOut: BaseDate.calendarDate.tempDate
                                                - =.builtIn.date.miniWeeklyCalendarArray:
                                                    dataIn:
                                                      year: =.BaseDate.calendarDate.tempDate.year
                                                      month: =.BaseDate.calendarDate.tempDate.month
                                                      today: 32
                                                      markDay: =.BaseDate.calendarDate.tempDate.day
                                                      color: "0x000000"
                                                      backgroundColor: "0xFFFFFF6f"
                                                      todayColor: "0xffffff"
                                                      todayBackgroundColor: "0x2988E6"
                                                    dataOut: BaseDate.calendarDate.minidayLable
                                        - actionType: evalObject
                                          object:
                                            - .BaseDate.calendarDate.year@: =.BaseDate.calendarDate.tempDate.year
                                            - .BaseDate.calendarDate.month@: =.BaseDate.calendarDate.tempDate.month
                                            - =.builtIn.date.transformMonth:
                                                dataIn:
                                                  month: =.BaseDate.calendarDate.month
                                                dataOut: BaseDate.calendarDate.monthName
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: calendarTag
                                      style:
                                        top: "0.01"
                                        height: "0.025"
                                - type: view
                                  style:
                                    top: "0.01"
                                    left: "0.301"
                                    width: "0.03"
                                    height: "0.08"
                                  children:
                                    - type: image
                                      path: right_blue_arrow.svg
                                      style:
                                        top: "0.01"
                                        height: "0.025"
                                      onClick:
                                        - emit:
                                            actions:
                                              - =.builtIn.date.NextWeek:
                                                    dataIn:
                                                      year: =.BaseDate.calendarDate.minidayLable.6.year
                                                      month: =.BaseDate.calendarDate.minidayLable.6.month
                                                      day: =.BaseDate.calendarDate.minidayLable.6.day
                                                    dataOut: BaseDate.calendarDate.tempDate
                                              - =.builtIn.date.miniWeeklyCalendarArray:
                                                    dataIn:
                                                      year: =.BaseDate.calendarDate.tempDate.year
                                                      month: =.BaseDate.calendarDate.tempDate.month
                                                      today: 32
                                                      markDay: =.BaseDate.calendarDate.tempDate.day
                                                      color: "0x000000"
                                                      backgroundColor: "0xFFFFFF6f"
                                                      todayColor: "0xffffff"
                                                      todayBackgroundColor: "0x2988E6"
                                                    dataOut: BaseDate.calendarDate.minidayLable
                                        - actionType: evalObject
                                          object:
                                            - .BaseDate.calendarDate.year@: =.BaseDate.calendarDate.tempDate.year
                                            - .BaseDate.calendarDate.month@: =.BaseDate.calendarDate.tempDate.month
                                            - =.builtIn.date.transformMonth:
                                                dataIn:
                                                  month: =.BaseDate.calendarDate.month
                                                dataOut: BaseDate.calendarDate.monthName
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: calendarTag
                        
                        - type: view
                          style:
                            width: "0.322"
                            # height: 12vw
                            margin: auto
                            # marginLeft: 1vw
                          viewTag: DataTag
                          children:
                            - type: scrollView
                              style:
                                height: ..formDataTemp.Timeheight
                                width: "0.322"
                              children:
                                - type: list
                                  viewTag: splitTimeTag
                                  contentType: listObject
                                  listObject: =.BaseDate.splitTime
                                  iteratorVar: itemObject
                                  style: 
                                    height: "auto"
                                    width: "0.322"
                                  children:
                                    - type: listItem
                                      onClick:
                                        - emit:
                                            dataKey:
                                              var: itemObject
                                            actions:
                                              - .ProviderScheduleAppointment.formData.clock@: $var
                                              - ..formData.appointmentTime@: $var.showTime
                                              - .Global.clock@: $var
                                              - if:
                                                - =.builtIn.string.equal:
                                                    dataIn:
                                                      string1: =.Global.currentUser.vertex.id
                                                      string2: "zgT+cgx7QFopl+JPC2WOeA=="
                                                - actionType: evalObject
                                                  object:
                                                    - if:
                                                      - =.builtIn.string.equal:
                                                          dataIn:
                                                            string1: =.Global.currentUser.vertex.esk
                                                            string2: ""
                                                      - goto: CareSignIn
                                                      - continue
                                                      # - actionType: evalObject
                                                      #   object:
                                                      #     - =.builtIn.eccNaCl.decryptAES:
                                                      #         dataIn:
                                                      #           key: =..formData.password
                                                      #           message: =.Global.currentUser.vertex.esk
                                                      #         dataOut: ProviderScheduleAppointment.formData.sk
                                                      #     - =.builtIn.eccNaCl.skCheck:
                                                      #         dataIn:
                                                      #           pk: =.Global.currentUser.vertex.pk
                                                      #           sk: =..formData.sk
                                                      #         dataOut: ProviderScheduleAppointment.formData.pass
                                                      #     - .Global.currentUser.vertex.esk@ : ""
                                                      #     - .Global.currentUser.vertex.sk@ : ""
                                                      #     - if:
                                                      #       - =..formData.pass
                                                      #       - =.builtIn.cleanLocalStorage
                                                      #       - continue
                                                      #     - goto: CareSignIn
                                        - actionType: evalObject
                                          object:
                                            - =.builtIn.object.setProperty: 
                                                  dataIn: 
                                                    obj: =.BaseDate.splitTime
                                                    label: "showTime"
                                                    text: =..formData.clock.showTime
                                                    arr: ["color","backgroundColor"]
                                                    valueArr: ["0xffffff","#2988e6"]
                                                    errorArr: ["0x333333","#E9F2FC"]
                                                  dataOut: BaseDate.splitTime
                                            - ..preColor@: "0xffffff"
                                            - ..bgColor@: "0x2988e6" 
                                        
                                        - actionType: evalObject
                                          object:
                                            - if: 
                                              - =.Global.clock.showTime
                                              - ..formDataTemp.nextColor@: "0x2988E6"
                                              - continue
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: btnView
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: splitTimeTag
                                                
                                      itemObject: ""
                                      style:
                                        marginTop: 1vw
                                        width: "0.057"
                                        height: 2.32vw
                                        float: left
                                        margin: "0.35vw"
                                        # marginLeft: "0.0037"
                                        # marginRight: "0.0037"
                                        backgroundColor: itemObject.backgroundColor
                                      children:
                                        - type: label
                                          dataKey: itemObject.showTime
                                          style:
                                            width: "0.057"
                                            height: 2.32vw
                                            # top: "0.005"
                                            color: itemObject.color
                                            # backgroundColor: itemObject.backgroundColor
                                            # color: ..preColor
                                            fontSize: .Mfont.h1
                                            # backgroundColor: ..bgColor
                                            borderRadius: 5px
                                            textAlign: 
                                              x: center
                                              y: center
                        - type: button
                          dataKey: formDataTemp.NextButton
                          viewTag: btnView
                          style: 
                            width: "0.322"
                            height: "0.037"
                            top: '0.64'
                            borderRadius: 5px
                            # backgroundColor: "0x2988e6"
                            backgroundColor: ..formDataTemp.nextColor

                            color: "0xffffff"
                            fontSize: .Nfont.h1
                            textAlign:
                              x: center
                              y: center
                          onClick: 
                            - actionType: evalObject
                              object:
                                - .Global.checkselectData@: =..formData.selectData
                                - if:
                                  - =.Global.clock.showTime
                                  - continue
                                  - actionType: popUp
                                    popUpView: judgeTime
                                    wait: true
                                - if:
                                  - =.builtIn.string.equal:
                                      dataIn:
                                        string1: =.Global.currentUser.vertex.id
                                        string2: "zgT+cgx7QFopl+JPC2WOeA=="
                                  - actionType: evalObject
                                    object:
                                      - .Global.currentUser.vertex.esk@ : ""
                                      - .Global.currentUser.vertex.sk@ : ""
                                      - goto: CareSignIn
                                  - actionType: evalObject
                                    object:
                                      - .ProviderScheduleAppointment.apiRequest.newAppointment.edge.bvid@: ""
                                      - .ProviderScheduleAppointment.apiRequest.newAppointment.edge.stime@: =.Global.clock.stime
                                      - .ProviderScheduleAppointment.apiRequest.newAppointment.edge.etime@: =.Global.clock.etime
                                      - .ProviderScheduleAppointment.apiRequest.newAppointment.edge.refid@: =.Global.clock.refid
                                      - .ProviderScheduleAppointment.apiRequest.newAppointment.edge.bvid@: =..formData.currentPatientId
                                      - .ProviderScheduleAppointment.apiRequest.newAppointment.edge.name.facilityId@: =..formData.currentFacilityId
                                      - .ProviderScheduleAppointment.apiRequest.newAppointment.edge.name.duration@: =..formData.duration
                            - actionType: evalObject
                              object:
                                - if:
                                  - =.Global.isSignIn
                                  - actionType: evalObject
                                    object: 
                                      - ..formDataTemp.previousColor@: =..formDataTemp.btnColor
                                      - actionType: popUp
                                        popUpView: ConfirmYourInformation 
                                  - goto: CareSignIn
                # Confirm your information
                - type: popUp
                  viewTag: ConfirmYourInformation 
                  style:
                    backgroundColor: 'white'
                    border:
                      style: '3'
                    borderColor: "#4b9ae7"
                    borderRadius: "5px"
                    width: "0.362"
                    height: "0.8"
                    top: 4vw
                  children:
                    - type: view
                      style: 
                        marginTop: 0
                        width: "0.362"
                        height: "0.084"
                        borderBottom: "1.5px solid  #dfe1e5"
                        borderWidth: 2  
                        display: flex
                        flexDirection: row
                        alignItems: center
                        justifyContent: space-between
                        boxShadow: "0px 10px 10px -10px #d1d1d1"
                      children: 
                        - .ViewRow:
                          style:
                            width: "0.343"
                            margin: auto
                            justifyContent: space-between
                            alignItems: baseline
                          children:
                            - .PerDetTitle:
                              text: Confirm your information
                              style: 
                                fontSize: .Nfont.h6
                                fontWeight: bold
                                fontFamily: "Arial"
                                marginTop: 2.1vw
                                textAlign:
                                  y: center
                            - .ViewRow:
                              style:
                                width: 11.9vw
                                alignItems: flex-end
                              children:
                                - .PDScheduleButton:
                                  style:
                                    backgroundColor: "#f8ae29"
                                - .PDScheduleButton:
                                  style:
                                    backgroundColor: "#f8ae29"
                                - .PDScheduleButton:
                                - .PDScheduleButton:
                    - .ViewColumn:
                      style:
                        height: "auto"
                        width: '0.322'
                        margin: auto
                        marginTop: 1vw
                        justifyContent: flex-start
                      children:
                        - .PerDetTitle:
                          text: "Basic Info"
                        - .ViewRow:
                          style:
                            width: '0.322'
                            marginTop: "0.01"
                            justifyContent: space-between
                          children:
                            - .ViewColumn:
                              children:
                                - type: label
                                  textBoard: 
                                    - text: "First Name"
                                    - text: "*"
                                      color: "0xFB5051"
                                  style:
                                    fontSize: .Nfont.h1
                                    fontFamily: "Arial"
                                    color: "#143459"
                                - .PDETextField:
                                  placeholder: Enter Here
                                  dataKey: Global.titleProfile.name.data.basicInfo.firstName
                                  isEditable: false
                                  style:
                                    width: "0.103"
                                    height: "0.044"
                            - .ViewColumn:
                              children:
                                - type: label
                                  text: Middle Name
                                  style:
                                    fontSize: .Nfont.h1
                                    fontFamily: "Arial"
                                    color: "#143459"
                                - .PDETextField:
                                  placeholder: Enter Here
                                  dataKey: Global.titleProfile.name.data.basicInfo.middleName
                                  isEditable: false
                                  style:
                                    width: "0.103"
                                    height: "0.044"
                            - .ViewColumn:
                              children:
                                - type: label
                                  textBoard: 
                                    - text: "Last Name"
                                    - text: "*"
                                      color: "0xFB5051"
                                  style:
                                    fontSize: .Nfont.h1
                                    fontFamily: "Arial"
                                    color: "#143459"
                                - .PDETextField:
                                  placeholder: Enter Here
                                  dataKey: Global.titleProfile.name.data.basicInfo.lastName
                                  isEditable: false
                                  style:
                                    width: "0.103"
                                    height: "0.044"
                        - .ViewRow:
                          style:
                            width: "0.322"
                            marginTop: 1vw
                            justifyContent: flex-start
                          children:
                            - .ViewColumn:
                              children:
                                - type: label
                                  text: "Phone#"
                                  style:
                                    fontSize: "1.1vw"
                                    fontFamily: "Arial"
                                    color: "#143459"
                                - type: view
                                  style:
                                    # width: "0.05"
                                    height: "0.044"
                                  children:
                                    - type: select
                                      dataKey: formData.userPhone.0
                                      # options:
                                      #   .CountryCode
                                      style: 
                                        display: "inline-block"
                                        width: "0.05"
                                        height: "0.044"
                                        border: "1px solid #e6e7ea"
                                        borderRadius: 5px
                                        borderWidth: "1px"
                                        fontSize: .Nfont.h1
                                    - type: textField
                                      placeholder: Enter Here
                                      dataKey: formData.userPhone.1
                                      isEditable: false
                                      style:
                                        border:
                                          style: 3
                                          color: "0xDEDEDE"
                                        textIndent: "0.5em"
                                        display: "inline-block"
                                        marginLeft: "0.5vw"
                                        width: "0.103"
                                        height: "0.044"
                                        borderRadius: 3px
                                        fontSize: .Nfont.h1
                        - .PerDetTitle:
                          text: "Medical Insurance"
                          style:
                            marginTop: "0.03"
                        - .ViewColumn:
                          children:
                            - .PerDetTitle:
                              text: "Insurance Company Name"
                              style:
                                fontWeight: normal
                                marginTop: "0.01"
                            - .PDETextField:
                              isEditable: false
                              placeholder: Enter Here
                              dataKey: apiRequest.insurance.docCreateReq.name.data.companyName
                              style:
                                width: "0.322"
                                height: "0.044"
                            - .PerDetTitle:
                              text: "Insurance plan or medical group"
                              style:
                                fontWeight: normal
                                marginTop: "0.01"
                            - .PDETextField:
                              placeholder: Enter Here
                              isEditable: false
                              dataKey: apiRequest.insurance.docCreateReq.name.data.planOrMedicalGroup
                              style:
                                width: "0.322"
                                height: 2.5vw
                            - .PerDetTitle:
                              text: "Insurance Member ID"
                              style:
                                fontWeight: normal
                                marginTop: "0.01"
                            - .PDETextField:
                              placeholder: Enter Here
                              isEditable: false
                              dataKey: apiRequest.insurance.docCreateReq.name.data.memberId
                              style:
                                width: "0.322"
                                height: 2.5vw
                        - .ViewRow:
                          style:
                            width: "0.322"
                            top: '0.64'
                            justifyContent: flex-end
                            alignItems: center
                          children:
                            - .ViewRow:
                              style:
                                height: 2vw
                                width: 7vw
                                alignItems: center
                              children:
                                - type: image
                                  path: left_blue_arrow.png
                                  style:
                                    width: 1.5vw
                                    height: 2vw
                                  onClick: 
                                    - actionType: popUpDismiss
                                      popUpView: ConfirmYourInformation 
                                - .PerDetTitle:
                                  text: "Last step"
                                  autocomplete: "off"
                                  style:
                                    fontSize: .Nfont.h1
                                    height: 2vw
                                    lineHeight: 2vw
                                    color: "#2988e6"
                                  onClick: 
                                    - actionType: popUpDismiss
                                      popUpView: ConfirmYourInformation 
                            - type: button
                              text: Next
                              style: 
                                width: '0.0625'
                                height: "0.037"
                                borderRadius: 5px
                                backgroundColor: "#2988E6"
                                color: "#ffffff"
                                fontSize: 1.1vw
                                marginLeft: "0.01"
                                textAlign:
                                  x: center
                                  y: center
                              onClick: 
                                - actionType: evalObject
                                  object: 
                                    - ..formData.ProfilePop@: "block"
                                - actionType: popUpDismiss
                                  popUpView: ConfirmYourInformation 
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: RequiredForms
                                - actionType: popUp
                                  popUpView: RequiredForms
                                
                # Required Forms
                - type: view
                  viewTag: RequiredForms
                  style:
                    backgroundColor: 'white'
                    border:
                      style: '3'
                    borderColor: "#4b9ae7"
                    borderRadius: "5px"
                    width: "0.362"
                    height: "0.8"
                    top: 4vw
                    display: ..formData.ProfilePop
                  children:
                    - type: view
                      style: 
                        marginTop: 0
                        width: "0.362"
                        height: "0.084"
                        borderBottom: "1.5px solid  #dfe1e5"
                        borderWidth: 2  
                        display: flex
                        flexDirection: row
                        alignItems: center
                        justifyContent: space-between
                        boxShadow: "0px 10px 10px -10px #d1d1d1"
                      children: 
                        - .ViewRow:
                          style:
                            width: "0.343"
                            margin: auto
                            justifyContent: space-between
                            alignItems: baseline
                          children:
                            - .PerDetTitle:
                              text: Required Forms
                              style: 
                                fontSize: .Nfont.h6
                                fontWeight: bold
                                fontFamily: "Arial"
                                marginTop: 2.1vw
                                textAlign:
                                  y: center
                            - .ViewRow:
                              style:
                                width: 11.9vw
                                alignItems: flex-end
                              children:
                                - .PDScheduleButton:
                                  style:
                                    backgroundColor: "#f8ae29"
                                - .PDScheduleButton:
                                  style:
                                    backgroundColor: "#f8ae29"
                                - .PDScheduleButton:
                                  style:
                                    backgroundColor: "#f8ae29"
                                - .PDScheduleButton:
                    - .ViewColumn:
                      style:
                        height: "auto"
                        width: '0.322'
                        margin: auto
                        marginTop: 1vw
                        justifyContent: flex-start
                      children:
                        - .ViewRow:
                          onClick: 
                            - goto: VisitQuestion
                          style:
                            justifyContent: flex-start
                            alignItems: center
                            marginLeft: 1vw
                            # marginTop: 1vw
                          children:
                            - type: image
                              path:
                                emit:
                                  actions:                        
                                    - if:
                                      - =.Global.formData.visitQuestionnaireDoc.doc
                                      - selectOnblue.svg
                                      - selectBlack.svg
                              style: 
                                height: 1vw
                                width: 1vw
                            - type: label
                              text: Visit Questionnaire
                              style: 
                                marginLeft: 0.5vw
                                # color: "0x2988e6" 
                                textAlign: 
                                  y: left
                                fontSize: .Nfont.h1
                                color: "0x333333" 
                                fontFamily: "Arial"
                        - .ViewRow:
                          onClick: 
                            - goto: FinancialFormEditPage1
                          style:
                            justifyContent: flex-start
                            alignItems: center
                            marginLeft: 1vw
                            marginTop: 1.5vw
                          children:
                            - type: image
                              path:
                                emit:
                                  actions:                        
                                    - if:
                                      - =.Global.formData.financialForm.id
                                      - selectOnblue.svg
                                      - selectBlack.svg
                              style: 
                                height: 1vw
                                width: 1vw
                            - type: label
                              text: Financial Responsibility Form
                              style: 
                                marginLeft: 0.5vw
                                # color: "0x2988e6" 
                                textAlign: 
                                  y: left
                                fontSize: .Nfont.h1
                                color: "0x333333" 
                                fontFamily: "Arial"
                        
                        - type: list
                          contentType: listObject
                          listObject: =..formData.showAllDocs
                          iteratorVar: itemObject
                          viewTag: allForms
                          style:
                            width: '0.322'
                            height: "auto"
                            marginLeft: 1vw
                          children:
                            - type: listItem
                              itemObject: ""
                              style:
                                marginTop: 1.5vw
                                width: 32vw
                                display: flex
                                flexDirection: row
                                justifyContent: flex-start
                                alignItems: center
                              children:
                                - type: image
                                  path:
                                    emit:
                                      dataKey: 
                                        var: itemObject
                                      actions:
                                        - if:
                                          - =.builtIn.array.has:
                                              dataIn:
                                                object: =.Global.vaccine
                                                value: $var
                                          - selectOnblue.svg
                                          - selectBlack.svg
                                  style: 
                                    
                                    width: 1vw
                                    height: 1vw
                                - type: label
                                  dataKey: itemObject
                                  onClick: 
                                    - emit:
                                        dataKey:
                                          var: itemObject
                                        actions: 
                                          - if:
                                            - =.builtIn.string.equal:
                                                dataIn:
                                                  string1: $var
                                                  string2: New Patient Forms
                                            - goto: NewPatFormEditPage1
                                            - continue
                                          - if:
                                            - =.builtIn.string.equal:
                                                dataIn:
                                                  string1: $var
                                                  string2: COVID-19 Testing Consent - New Patient
                                            - goto: Cov19TestNewPatEditPage1
                                            - continue
                                          - if:
                                            - =.builtIn.string.equal:
                                                dataIn:
                                                  string1: $var
                                                  string2: COVID-19 Testing Consent Form
                                            - goto: Cov19TestFormEditPage1
                                            - continue
                                          - if:
                                            - =.builtIn.string.equal:
                                                dataIn:
                                                  string1: $var
                                                  string2: Pfizer-BioNTech Vaccine - First Dose
                                            - goto: PfizerVaccineFirDoseEditPage1
                                            - continue
                                          - if:
                                            - =.builtIn.string.equal:
                                                dataIn:
                                                  string1: $var
                                                  string2: Pfizer-BioNTech Vaccine - Second Dose
                                            - goto: PfizerVaccineSecDoseEditPage1
                                            - continue
                                          - if:
                                            - =.builtIn.string.equal:
                                                dataIn:
                                                  string1: $var
                                                  string2: Moderna Vaccine Form - First Dose
                                            - goto: ModernaVaccineFirDoseEditPage1
                                            - continue
                                          - if:
                                            - =.builtIn.string.equal:
                                                dataIn:
                                                  string1: $var
                                                  string2: Moderna Vaccine Form - Second Dose
                                            - goto: ModernaVaccineSecDoseEditPage1
                                            - continue
                                          - if:
                                            - =.builtIn.string.equal:
                                                dataIn:
                                                  string1: $var
                                                  string2: Flu Vaccination Consent Form
                                            - goto: FluVaccinationConsentFormEnglishEditPage1
                                            - continue
                                    # - actionType: evalObject
                                    #   object:
                                    #     - .Global.AppointmentvisitType@: =..apiRequest.newAppointment.edge.name.visitType
                                    #     - .Global.AppointmentvisitTypeShow@: =..apiRequest.newAppointment.edge.name.visitTypeShow
                                  style: 
                                    marginLeft: 0.5vw
                                    # color: "0x2988e6" 
                                    textAlign: 
                                      y: left
                                    fontSize: .Nfont.h1
                                    color: "0x333333" 
                                    fontFamily: "Arial"
                        - .ViewRow:
                          style:
                            width: "0.322"
                            top: '0.64'
                            justifyContent: flex-end
                            alignItems: center
                          children:
                            - .ViewRow:
                              style:
                                height: 2vw
                                width: 7vw
                                alignItems: center
                              children:
                                - type: image
                                  path: left_blue_arrow.png
                                  style:
                                    width: 1.5vw
                                    height: 2vw
                                  onClick: 
                                    - actionType: popUpDismiss
                                      popUpView: RequiredForms
                                    - actionType: popUp
                                      popUpView: ConfirmYourInformation 
                                - .PerDetTitle:
                                  text: "Last step"
                                  style:
                                    fontSize: .Nfont.h1
                                    height: 2vw
                                    lineHeight: 2vw
                                    color: "#2988e6"
                                  onClick: 
                                    - actionType: popUpDismiss
                                      popUpView: RequiredForms
                                    - actionType: popUp
                                      popUpView: ConfirmYourInformation 
                            - type: button
                              text: =..formData.scheduleButton.text
                              style: 
                                width: '0.0625'
                                height: "0.037"
                                borderRadius: 5px
                                backgroundColor: =..formData.scheduleButton.backgroundColor
                                color: "#ffffff"
                                fontSize: .Nfont.h1
                                marginLeft: "0.01"
                                textAlign:
                                  x: center
                                  y: center
                              onClick: 
                                - actionType: evalObject
                                  object:
                                    .Global._nonce@: 
                                      =.builtIn.math.random: ""
                                - actionType: evalObject
                                  object:
                                    # 清空FacilityLink
                                    # - .Global.FacilityLink@: false
                                    - .Global.addressName@: ""
                                    - ..formData.currentPatientId@: =.Global.currentUser.vertex.id
                                    - .ProviderScheduleAppointment.apiRequest.newAppointment.edge.bvid@: ""
                                    - .ProviderScheduleAppointment.apiRequest.newAppointment.edge.stime@: =.Global.clock.stime
                                    - .ProviderScheduleAppointment.apiRequest.newAppointment.edge.etime@: =.Global.clock.etime
                                    - .ProviderScheduleAppointment.apiRequest.newAppointment.edge.refid@: =.Global.clock.refid
                                    - .ProviderScheduleAppointment.apiRequest.newAppointment.edge.bvid@: =..formData.currentPatientId
                                    - .ProviderScheduleAppointment.apiRequest.newAppointment.edge.name.facilityId@: =..formData.currentFacilityId
                                    - .ProviderScheduleAppointment.apiRequest.newAppointment.edge.name.duration@: =..formData.duration
                                    - .ProviderScheduleAppointment.apiRequest.newAppointment.edge.name.patientAvatarId@: =..apiRequest.profile.patientdocument.name.data.basicInfo.avatar
                                    - .ProviderScheduleAppointment.apiRequest.newAppointment.edge.name.patientPhoneNumber@: =..apiRequest.profile.patientdocument.name.data.basicInfo.phone
                                    - .ProviderScheduleAppointment.apiRequest.newAppointment.edge.name.providerAvatarId@: =..formData.ProviderAvtar                

                                    - =.builtIn.string.concat:
                                        dataIn:
                                          - =..apiRequest.newAppointment.edge.name.providerName
                                          - " - "
                                          - =..formData.dataObject.specialty.0
                                        dataOut: ProviderScheduleAppointment.formData.providerFullInfo
                                    - .ProviderScheduleAppointment.apiRequest.newAppointment.edge.name.providerFullInfo@: =..formData.providerFullInfo
                                    - if: 
                                      - =.builtIn.string.equal:   
                                          dataIn:
                                            string1: =..apiRequest.newAppointment.edge.name.visitType
                                            string2: "Office Visit"
                                      - actionType: evalObject
                                        object:
                                          - ..apiRequest.newAppointment.edge.name.fontColor@: "0xff8c00" 
                                          - ..apiRequest.newAppointment.edge.name.location@: =..apiRequest.facility.response.doc.0.name.data.basicInfo.location
                                          - ..apiRequest.newAppointment.edge.name.locationName@: =..formData.formDataOfficeVisisAddress
                                          - ..apiRequest.approveAppointment10.edge.name.roleName@: =..formData.formDataOfficeVisisAddress
                                      - ..apiRequest.approveAppointment10.edge.name.roleName@: =..apiRequest.getFacilityVertex.response.vertex.0.name.basicInfo.medicalFacilityName
                                    - if: 
                                      - =.builtIn.string.equal:   
                                          dataIn:
                                            string1: =..apiRequest.newAppointment.edge.name.visitType
                                            string2: "Office Visit"
                                      - ..apiRequest.newAppointment.edge.name.blockColor@: "0xfff7e3" 
                                      - continue   
                                    - if: 
                                      - =.builtIn.string.equal:
                                          dataIn:
                                            string1: =..apiRequest.newAppointment.edge.name.visitType
                                            string2: "Telemedicine"
                                      - ..apiRequest.newAppointment.edge.name.fontColor@: "0x30B354" 
                                      - continue
                                    - if: 
                                      - =.builtIn.string.equal:   
                                          dataIn:
                                            string1: =..apiRequest.newAppointment.edge.name.visitType
                                            string2: "Telemedicine"
                                      - ..apiRequest.newAppointment.edge.name.blockColor@: "0x30B354" 
                                      - continue   
                                - actionType: evalObject
                                  object:
                                    - if: 
                                      - =.Global.formData.visitQuestionnaireDoc.doc.id
                                      - continue
                                      - actionType: popUp
                                        popUpView: judgeVisitQuestionnaire
                                        wait: true
                                    - if: 
                                      - =.Global.formData.financialForm.id
                                      - actionType: evalObject
                                        object:
                                          - if:
                                            - =.builtIn.string.equal: 
                                                dataIn: 
                                                  string1: =..formData.otherFormRead
                                                  string2: true
                                            - continue
                                            - actionType: popUp
                                              popUpView: judgeOtherForm
                                              wait: true
                                      - actionType: popUp
                                        popUpView: judgefinancialForm
                                        wait: true
                                - actionType: popUp
                                  popUpView: upLoading
                                - actionType: evalObject
                                  object:
                                    - ..apiRequest.newAppointment.edge.name.finishDoc@: =.Global.vaccine
                                    - ..apiRequest.newAppointment.edge.name.document@: =.Global.vaccine
                                    - =.builtIn.array.add:
                                        dataIn:
                                          object: =..apiRequest.newAppointment.edge.name.finishDoc
                                          value: Visit Questionnaire
                                    - =.builtIn.array.add:
                                        dataIn:
                                          object: =..apiRequest.newAppointment.edge.name.finishDoc
                                          value: Financial Responsibility Form
                                    - =..apiRequest.newAppointment.edgeAPI.store: ""
                                    - .Global.AppointmentvisitType@: ""
                                    - .Global.AppointmentvisitTypeShow@: ""
                                    # share doc
                                    - =.builtIn.array.add:
                                        dataIn:
                                          object: =.Global.vaccineDoc
                                          value: =.Global.formData.visitQuestionnaireDoc.doc
                                    - =.builtIn.array.add:
                                        dataIn:
                                          object: =.Global.vaccineDoc
                                          value: =.Global.formData.financialForm
                                    - if: 
                                      - =..apiRequest.profile.patientdocument.id
                                      - =.builtIn.array.add:
                                          dataIn:
                                            object: =.Global.vaccineDoc
                                            value: =..apiRequest.profile.patientdocument
                                      - continue 
                                    # share new docs
                                    - if: 
                                      - =.Global.formData.newPatientForm.id
                                      - =.builtIn.array.add:
                                          dataIn:
                                            object: =.Global.vaccineDoc
                                            value: =.Global.formData.newPatientForm
                                      - continue 
                                    # shareDoc pifzerVaccineFirDoseForm文档 
                                    - if: 
                                      - =.Global.formData.pifzerVaccineFirDoseForm.id
                                      - =.builtIn.array.add:
                                          dataIn:
                                            object: =.Global.vaccineDoc
                                            value: =.Global.formData.pifzerVaccineFirDoseForm
                                      - continue 
                                    # pifzerVaccineSecDoseForm
                                    - if: 
                                      - =.Global.formData.pifzerVaccineSecDoseForm.id
                                      - =.builtIn.array.add:
                                          dataIn:
                                            object: =.Global.vaccineDoc
                                            value: =.Global.formData.pifzerVaccineSecDoseForm
                                      - continue 
                                    - if: 
                                      - =.Global.formData.cov19TestNewPatForm.id
                                      - =.builtIn.array.add:
                                          dataIn:
                                            object: =.Global.vaccineDoc
                                            value: =.Global.formData.cov19TestNewPatForm
                                      - continue 
                                    - if: 
                                      - =.Global.formData.cov19TestForm.id
                                      - =.builtIn.array.add:
                                          dataIn:
                                            object: =.Global.vaccineDoc
                                            value: =.Global.formData.cov19TestForm
                                      - continue               
                                    - if: 
                                      - =.Global.formData.modernaVaccineFirDoseForm.id
                                      - =.builtIn.array.add:
                                          dataIn:
                                            object: =.Global.vaccineDoc
                                            value: =.Global.formData.modernaVaccineFirDoseForm
                                      - continue  
                                    - if: 
                                      - =.Global.formData.fluVaccinationConsentFormEnglish.doc
                                      - =.builtIn.array.add:
                                          dataIn:
                                            object: =.Global.vaccineDoc
                                            value: =.Global.formData.fluVaccinationConsentFormEnglish.doc
                                      - continue 
                                    - if: 
                                      - =.Global.formData.modernaVaccineSecDoseForm.id
                                      - =.builtIn.array.add:
                                          dataIn:
                                            object: =.Global.vaccineDoc
                                            value: =.Global.formData.modernaVaccineSecDoseForm
                                      - continue  
                                    
                                    - =.builtIn.ecos.shareDocList:
                                        dataIn:
                                          sourceDocList: =.Global.vaccineDoc
                                          targetEdgeID: =..apiRequest.newAppointment.response.edge.id 
                                          reid: =..apiRequest.newAppointment.response.edge.id 
                                    - if: 
                                      - =..apiRequest.newAppointment.response.edge.id
                                      - actionType: evalObject
                                        object:
                                          - ..formData.ProfilePop@: "none"
                                          - .Global.editProfile@: false
                                          - ..formData.otherFormRead@: false
                                          - .Global.formData.firstToCov19Test@: true
                                          - .Global.formData.firstToFinancialForm@: true
                                          - .Global.formData.firstToNewPatientForm@: true
                                          - .Global.formData.firstToCov19TestForm@: true
                                          - .Global.formData.firstToCov19TestNewPatForm@: true
                                          - .Global.formData.firstToPfizerVaccineFirDoseForm@: true
                                          - .Global.formData.firstToPfizerVaccineSecDose@: true
                                          - .Global.formData.firstToModernaVaccineFirDoseForm@: true
                                          - .Global.formData.firstToModernaVaccineSecDoseForm@: true
                                          - .Global.localDocuLength@: ""
                                          - .Global.vaccineDoc@: []
                                      - continue
                                # provider同意patient预约
                                - actionType: evalObject
                                  object:
                                    # 切jwt
                                    # - .Global.jwt.edge.bvid@: =..apiRequest.newAppointment.response.edge.evid
                                    # - =.Global.jwt.edgeAPI.store: ""
                                    - ..apiRequest.approveAppointment.edge.evid@: =..apiRequest.newAppointment.response.edge.evid
                                    - ..apiRequest.approveAppointment.edge.bvid@: =..apiRequest.newAppointment.response.edge.bvid
                                    - ..apiRequest.approveAppointment.edge.name@: =..apiRequest.newAppointment.response.edge.name
                                    - ..apiRequest.approveAppointment.edge.refid@: =..apiRequest.newAppointment.response.edge.id
                                    - ..apiRequest.approveAppointment.edge.stime@: =..apiRequest.newAppointment.response.edge.stime
                                    - ..apiRequest.approveAppointment.edge.etime@: =..apiRequest.newAppointment.response.edge.etime
                                    - =..apiRequest.approveAppointment.edgeAPI.store: ""
                                    - ..apiRequest.approveAppointment10.edge.stime@: =..apiRequest.newAppointment.response.edge.stime
                                    - ..apiRequest.approveAppointment10.edge.etime@: =..apiRequest.newAppointment.response.edge.etime
                                    - ..apiRequest.approveAppointment10.edge.name.role@: "Facility"
                                    - ..apiRequest.approveAppointment10.edge.evid@: =..formData.currentFacilityId
                                    - ..apiRequest.approveAppointment10.edge.refid@: =..apiRequest.newAppointment.response.edge.id
                                    - =..apiRequest.approveAppointment10.edgeAPI.store: ""
                                    - ..apiRequest.isContact.edge.bvid@: =..apiRequest.newAppointment.response.edge.bvid
                                    - ..apiRequest.isContact.edge.evid@: =..apiRequest.newAppointment.response.edge.evid
                                    - ..apiRequest.isContact.getedge.id@: []
                                    - =.builtIn.array.add:
                                        dataIn:
                                          object: =..apiRequest.isContact.getedge.id
                                          value: =..apiRequest.newAppointment.response.edge.evid 
                                    - =.builtIn.array.add:
                                        dataIn:
                                          object: =..apiRequest.isContact.getedge.id
                                          value: =..apiRequest.newAppointment.response.edge.bvid #provider id  
                                    - =..apiRequest.isContact.edgeAPI.get: ""
                                    - if:
                                      - =..apiRequest.isContact.getresponse.edge.0.id
                                      - ..apiRequest.isContact.response@: ""
                                      - actionType: evalObject
                                        object:
                                          - =..apiRequest.isContact.edgeAPI.store: ""
                                          - ..formData.shareDocId@: =..apiRequest.isContact.response.edge.id
                                          - ..apiRequest.isContact.getresponse@: ""
                                          - .Global.jwt.edge.bvid@: =..apiRequest.newAppointment.response.edge.bvid #change patient jwt
                                          - =.Global.jwt.edgeAPI.store: ""    
                                          # share patient profile  
                                          - ..apiRequest.getPatientProfile.docIn.id@: =.Global.rootNotebookID
                                          - =..apiRequest.getPatientProfile.docAPI.get: ""
                                          - =.builtIn.ecos.shareDoc: 
                                              dataIn:                
                                                sourceDoc: =..apiRequest.getPatientProfile.docOut.doc.0
                                                targetEdgeID: =..formData.shareDocId
                                - actionType: evalObject
                                  object: 
                                    .Global._nonce@: 
                                      =.builtIn.math.random: ""
                                # 创建关联预约的tag
                                # 创建完预约之后打 appointment link 的tag,回头需要加判断
                                - actionType: evalObject
                                  object:
                                    # fid 指向 房间
                                    - ..formData.appointmentLink.eid@: =..apiRequest.newAppointment.response.edge.id
                                    - ..formData.appointmentLink.fid@: ""
                                    - ..formData.appointmentLink.reid@: =..apiRequest.newAppointment.response.edge.id
                                    # 创建 tag
                                    - =..apiRequest.appointmentListTag.docAPI.store: ""
                                # facility ->patient
                                - actionType: evalObject 
                                  object:
                                    # - .Global.jwt.edge.bvid@: =..formData.currentFacilityId
                                    # - =.Global.jwt.edgeAPI.store: ""  
                                    - ..apiRequest.isContact.getedge.id@: []
                                    - ..apiRequest.isContact.response@: ""
                                    - ..apiRequest.isContact.getresponse@: ""            
                                    - ..apiRequest.isContact.edge.bvid@: =..apiRequest.newAppointment.response.edge.bvid
                                    - ..apiRequest.isContact.edge.evid@: =..formData.currentFacilityId 
                                    - =.builtIn.array.add:
                                        dataIn:
                                          object: =..apiRequest.isContact.getedge.id
                                          value: =..formData.currentFacilityId
                                    - =.builtIn.array.add:
                                        dataIn:
                                          object: =..apiRequest.isContact.getedge.id
                                          value: =..apiRequest.newAppointment.response.edge.bvid  
                                    - =..apiRequest.isContact.edgeAPI.get: ""
                                    - ..apiRequest.isContact.edge.subtype@: =.FriendsType.PatientFacility
                                    - if:
                                      - =..apiRequest.isContact.getresponse.edge.0.id
                                      - ..apiRequest.isContact.response@: ""
                                      - actionType: evalObject
                                        object:
                                          - =..apiRequest.isContact.edgeAPI.store: ""
                                          - ..formData.shareDocId@: =..apiRequest.isContact.response.edge.id
                                          - ..apiRequest.isContact.getresponse@: ""
                                          - .Global.jwt.edge.bvid@: =..apiRequest.newAppointment.response.edge.bvid #change patient jwt
                                          - =.Global.jwt.edgeAPI.store: ""
                                        # share patient profile 
                                          - ..apiRequest.getPatientProfile.docIn.id@: =.Global.rootNotebookID
                                          - =..apiRequest.getPatientProfile.docAPI.get: ""
                                          - =.builtIn.ecos.shareDoc: 
                                              dataIn:                
                                                sourceDoc: =..apiRequest.getPatientProfile.docOut.doc.0
                                                targetEdgeID: =..formData.shareDocId  
                                              dataOut: ProviderScheduleAppointment.formData.patientProfile_shared
                                          - =.builtIn.ecos.shareDocList:
                                              dataIn:                
                                                sourceDocList: =..apiRequest.insurance.docQueryResp.doc
                                                targetEdgeID: =..formData.shareDocId  
                                                reid: =..formData.patientProfile_shared.doc.id
                                    - .Global.jwt.edge.bvid@: =.Global.currentUser.vertex.id
                                    - =.Global.jwt.edgeAPI.store: ""  
                                - actionType: evalObject 
                                  object:
                                    # 同步
                                    - =.builtIn.search.updateEsData:
                                        dataIn:
                                          id: =.BaseDate.schedule.edge.id.1
                                          type: "40000"
                                          bvid: =.BaseDate.schedule.edge.id.0
                                        dataOut: ProviderScheduleAppointment.res
                                    - ..formData.payAppointment@: "block"
                                    - if:
                                      - =.builtIn.string.equal:
                                          dataIn:
                                            string1: =..apiRequest.newAppointment.response.edge.name.fee
                                            string2: "0.00"
                                      - actionType: evalObject
                                        object:
                                          - ..formData.paymentStatusColor@: "#2FB355"
                                          - ..formData.payNow@: "none"
                                          - ..formData.isPay@: "none"
                                          # - ..formData.paySchedule@: "block"
                                      - actionType: evalObject
                                        object:
                                          - ..formData.paymentStatusColor@: "#FB5051"
                                          - ..formData.payNow@: "block"
                                          - ..formData.isPay@: "block"
                                          # - ..formData.paySchedule@: "none"     
                                - actionType: updateObject
                                  dataKey: Global.formData.cov19TestForm
                                  dataObject: {}
                                - actionType: updateObject
                                  dataKey: Global.formData.cov19TestNewDoc
                                  dataObject: {}
                                - actionType: updateObject
                                  dataKey: Global.formData.cov19TestNewPat
                                  dataObject: {}
                                - actionType: updateObject
                                  dataKey: Global.formData.cov19TestNewPatForm
                                  dataObject: {}
                                - actionType: updateObject
                                  dataKey: Global.formData.modernaVaccineFirDoseForm
                                  dataObject: {}
                                - actionType: updateObject
                                  dataKey: Global.formData.modernaVaccineSecDoseForm
                                  dataObject: {}
                                - actionType: updateObject
                                  dataKey: Global.formData.newPatientForm
                                  dataObject: {}
                                - actionType: updateObject
                                  dataKey: Global.formData.financialForm
                                  dataObject: {}
                                - actionType: updateObject
                                  dataKey: Global.formData.visitQuestionnaireDoc
                                  dataObject: {}
                                - actionType: updateObject
                                  dataKey: Global.formData.fluVaccinationConsentFormEnglish
                                  dataObject: {}
                                - actionType: updateObject
                                  dataKey: Global.formData.pifzerVaccineSecDoseForm
                                  dataObject: {}
                                - actionType: updateObject
                                  dataKey: Global.formData.pifzerVaccineFirDoseForm
                                  dataObject: {}
                                - actionType: updateObject
                                  dataKey: Global.vaccine
                                  dataObject: []
                                - actionType: updateObject
                                  dataKey: Global.showChangeAll
                                  dataObject: []
                                - actionType: builtIn
                                  funcName: redraw  
                                  viewTag: AppointmentSummary 
                                - actionType: popUpDismiss
                                  popUpView: upLoading
                
                # Appointment Summary
                - type: view
                  viewTag: AppointmentSummary
                  style:
                    backgroundColor: 'white'
                    border:
                      style: '3'
                    borderColor: "#4b9ae7"
                    borderRadius: "5px"
                    width: "0.362"
                    height: "0.8"
                    top: 4vw
                    display: ..formData.payAppointment
                  children:
                    - type: view
                      style: 
                        marginTop: 0
                        width: "0.362"
                        height: "0.084"
                        borderBottom: "1.5px solid  #dfe1e5"
                        borderWidth: 2  
                        display: flex
                        flexDirection: row
                        alignItems: center
                        justifyContent: space-between
                        boxShadow: "0px 10px 10px -10px #d1d1d1"
                      children: 
                        - .ViewRow:
                          style:
                            width: "0.343"
                            margin: auto
                            justifyContent: space-between
                            alignItems: baseline
                          children:
                            - .PerDetTitle:
                              text: Appointment Summary
                              style: 
                                fontSize: .Nfont.h6
                                fontWeight: bold
                                fontFamily: "Arial"
                                marginTop: 2.1vw
                                textAlign:
                                  y: center
                            - .ViewRow:
                              style:
                                width: 11.9vw
                                alignItems: flex-end
                              children:
                                - .PDScheduleButton:
                                  style:
                                    backgroundColor: "#f8ae29"
                                - .PDScheduleButton:
                                  style:
                                    backgroundColor: "#f8ae29"
                                - .PDScheduleButton:
                                  style:
                                    backgroundColor: "#f8ae29"
                                - .PDScheduleButton:
                                  style:
                                    backgroundColor: "#f8ae29"
                    - .ViewColumn:
                      style:
                        height: 36vw
                        width: "0.362"
                        marginTop: 0
                        justifyContent: flex-start
                        alignItems: center
                      children:
                        - type: view
                          style:
                            width: "0.322"
                            margin: auto
                            justifyContent: space-between
                            alignItems: baseline
                          children:
                            - .ViewColumn:
                              style:
                                marginTop: 2vw
                                width: 5vw
                                marginLeft: 12.5vw
                              children:
                                - .PerDetTitle:
                                  text: "Success!"
                                  style: 
                                    color: "0x2FB355"
                                    fontSize: 1.2vw
                                    width: 5vw
                                    textAlign:
                                      x: center 
                                - type: image
                                  path: Flat.png
                                  style: 
                                    width: 5vw
                                  
                            - .ViewColumn:
                              style:
                                width: "0.322"
                                marginTop: 2vw
                              children:
                                - .ViewRow:
                                  style:
                                    width: "0.322"
                                    marginTop: 0.5vw
                                    justifyContent: space-between
                                    alignItems: flex-start
                                  children:
                                    - .PerDetTitle:
                                      text: Date & Time Selected
                                    - .PerDetTitle:
                                      text=func: .builtIn.string.formatUnixtime_en
                                      dataKey: apiRequest.newAppointment.response.edge.stime
                                      style:
                                        color: "0x333333"
                                        wordBreak: break-all
                                        fontWeight: "lighter"
                                - .ViewRow:
                                  style:
                                    width: "0.322"
                                    marginTop: 0.5vw
                                    justifyContent: space-between
                                    alignItems: flex-start
                                  children:
                                    - .PerDetTitle:
                                      text: Reason for Visit
                                    - .PerDetTitle:
                                      dataKey: apiRequest.newAppointment.response.edge.name.visitReason
                                      style:
                                        color: "0x333333"
                                        wordBreak: break-all
                                        fontWeight: "lighter"
                                - .ViewRow:
                                  style:
                                    width: "0.322"
                                    marginTop: 0.5vw
                                    justifyContent: space-between
                                    alignItems: flex-start
                                  children:
                                    - .PerDetTitle:
                                      text: Appointment Type
                                    - .PerDetTitle:
                                      dataKey: apiRequest.newAppointment.response.edge.name.visitType
                                      style:
                                        color: "0x333333"
                                        wordBreak: break-all
                                        fontWeight: "lighter"
                                - .ViewRow:
                                  style:
                                    width: "0.322"
                                    marginTop: 0.5vw
                                    alignItems: flex-start
                                    justifyContent: space-between
                                  children:
                                    - .PerDetTitle:
                                      text: Provider
                                    - .PerDetTitle:
                                      dataKey: apiRequest.newAppointment.response.edge.name.providerName
                                      style:
                                        color: "0x333333"
                                        fontWeight: "lighter"
                                - .ViewRow:
                                  style:
                                    width: "0.322"
                                    marginTop: 0.5vw
                                    justifyContent: space-between
                                    alignItems: flex-start
                                  children:
                                    - .PerDetTitle:
                                      text: Facility
                                    - .PerDetTitle:
                                      dataKey: Global.FacilityInfos.name.data.basicInfo.medicalFacilityName
                                      style:
                                        color: "0x333333"
                                        fontWeight: "lighter"
                                - type: view
                                  style: 
                                    display: ..formData.isPay
                                  children:
                                    - .ViewRow:
                                      style:
                                        width: "0.322"
                                        marginTop: 0.5vw
                                        justifyContent: space-between
                                        alignItems: flex-start
                                        
                                      children:
                                        - .PerDetTitle:
                                          text: "Payment Status"
                                        - .PerDetTitle:
                                          dataKey: apiRequest.hasPaidProfile.getDocResp.doc.0
                                          text=func: .builtIn.object.transformStatus
                                          style:
                                            color: ..formData.paymentStatusColor
                                            fontWeight: "blod"
                                - type: view
                                  style:
                                    width: "0.322"
                                    height: "0.001"
                                    backgroundColor: "#DEDEDE"
                                    marginTop: 0.5vw
                                - .ViewRow:
                                  style:
                                    width: "0.322"
                                    marginTop: 0.5vw
                                    justifyContent: space-between
                                    alignItems: flex-start
                                  children:
                                    - .PerDetTitle:
                                      text: "Fee"
                                    - .PerDetTitle:
                                      text=func: .builtIn.string.dollarFormat
                                      dataKey: apiRequest.newAppointment.response.edge.name.fee
                                      style:
                                        color: "#333333"
                                        fontWeight: "blod"
                            - .PerDetTitle:
                              dataKey: formData.payContent
                              style:  
                                width: 27vw
                                marginLeft: 3.5vw
                                color: "#2FB355"
                                fontSize: .Nfont.h1
                                fontWeight: 400
                                marginTop: 3vw

                                textAlign: 
                                  x: center
                        - type: button
                          text: Go to AiTmed Care Now
                          style: 
                            top: "0.64"
                            marginLeft: "0.13"
                            width: "0.13"
                            height: 2.2vw
                            borderRadius: 5px
                            backgroundColor: "#ffffff"
                            borderWidth: 2
                            # backgroundColor: "#143459"
                            border:
                              style: 3
                              color: "#2988E6"
                            color: "#2988E6"
                            fontSize: .Nfont.h1
                            textAlign:
                              x: center
                              y: center
                          onClick:
                            - goto: ..config.patientUrl
                        - type: view
                          text: Pay Now
                          style:
                            display: ..formData.payNow
                            top: "0.64"
                            marginLeft: "0.27"
                            width: "0.07"
                            height: 2.2vw
                            borderRadius: 5px
                            lineHeight: 2vw
                            backgroundColor: "#2988E6"
                            # backgroundColor: "#0a5795"
                            border:
                              style: 3
                              color: "#2988E6"
                            color: "0xffffff"
                            fontSize: .Nfont.h1
                            textAlign:
                              x: center
                              y: center
                          onClick:
                            - actionType: evalObject 
                              object: 
                                - .Global.roomInfo@: =..apiRequest.newAppointment.response
                                - .Global.payDisplay@: =..formData.payAppointment
                                - ..apiRequest.squareCheckout.edge.refid@: =..apiRequest.newAppointment.response.edge.id
                                - ..apiRequest.squareCheckout.edge.evid@: =..apiRequest.newAppointment.response.edge.name.facilityId
                                - ..apiRequest.squareCheckout.edge.name.amount@: =..apiRequest.newAppointment.response.edge.name.fee
                                - =.builtIn.utils.getUrl:
                                    dataIn:
                                    dataOut: ProviderScheduleAppointment.apiRequest.squareCheckout.edge.name.url
                                - =..apiRequest.squareCheckout.edgeAPI.store: ""
                            - actionType: evalObject
                              object:
                                - ..apiRequest.squareOrder.docReq.name.data.appointmentInfo.reason@: =..apiRequest.newAppointment.response.edge.name.visitReason
                                - ..apiRequest.squareOrder.docReq.name.data.appointmentInfo.providerName@: =..apiRequest.newAppointment.response.edge.name.providerName
                                - ..apiRequest.squareOrder.docReq.name.data.appointmentInfo.visitType@: =..apiRequest.newAppointment.response.edge.name.visitType
                                - ..apiRequest.squareOrder.docReq.name.data.appointmentInfo.appTime@: =..apiRequest.newAppointment.response.edge.stime
                                - ..apiRequest.squareOrder.docReq.eid@: =..apiRequest.squareCheckout.response.edge.id
                                - ..apiRequest.squareOrder.docReq.name.data.orderInfo.squareURL@: =..apiRequest.squareCheckout.response.edge.deat.squareURL
                                - ..apiRequest.squareOrder.docReq.name.data.orderInfo.squareID@: =..apiRequest.squareCheckout.response.edge.deat.squareID
                                - ..apiRequest.squareOrder.docReq.name.data.orderInfo.amount@: =..apiRequest.squareCheckout.response.edge.name.amount
                                - ..apiRequest.squareOrder.docReq.name.nonce@: =..apiRequest.squareCheckout.response.edge.deat.squareID
                                - ..apiRequest.squareOrder.docReq.name.data.orderInfo.payer@: =..apiRequest.profile.patientdocument.name.data.basicInfo.fullName
                                - .Global.paymentCheck.id@: =..apiRequest.squareCheckout.response.edge.id
                                - =..apiRequest.squareOrder.docAPI.store: "" 
                                - .Global.paymentOrder.document@: =..apiRequest.squareOrder.docRes.doc   
                                - ..formData.webSite@: =..apiRequest.squareCheckout.response.edge.deat.squareURL #website                                       
                                - goto: =..apiRequest.squareCheckout.response.edge.deat.squareURL #website
                                
                        - type: view
                          text: Continue Schedule
                          style: 
                            # display: ..formData.paySchedule
                            top: "0.64"
                            marginLeft: "0.02"
                            width: "0.1"
                            height: 2.2vw
                            lineHeight: 2vw
                            borderRadius: 5px
                            backgroundColor: "#2988E6"
                            # backgroundColor: "#0a5795"
                            border:
                              style: 3
                              color: "#2988E6"
                            color: "0xffffff"
                            fontSize: .Nfont.h1
                            textAlign:
                              x: center
                              y: center
                          onClick:
                            - actionType: updateObject
                              dataKey: Global.roomInfo
                              dataObject: []
                            - actionType: evalObject
                              object:
                                - .Global.payDisplay@: ""
                            - actionType: refresh


        
        - .BaseCheckView:
          style:
            width: "1"
            height: "1"
          message: "Please sign in again and return to search again"
          onClick:
            - goto: SearchProvider
          viewTag: AgainLogIn
        # 填写文档
        - .BaseWarningViewOne: 
          viewTag: judgeVisitQuestionnaire
          style:
            width: "1"
            height: "1"
          msg2: "You have not filled in the Visit Questionnaire"
          onClick:
            - actionType: popUpDismiss
              popUpView: judgeVisitQuestionnaire
        - .BaseWarningViewOne: 
          viewTag: judgefinancialForm
          msg2: "You have not filled in the Financial Responsibility Form"
          style:
            width: "1"
            height: "1"
          onClick:
            - actionType: popUpDismiss
              popUpView: judgefinancialForm
        - .BaseWarningViewOne:
          viewTag: judgeOtherForm 
          style:
            width: "1"
            height: "1"
          msg2: "You have not filled in the other forms"
          onClick:
            - actionType: popUpDismiss
              popUpView: judgeOtherForm
        # 选择时间 
        - .BaseWarningViewOne: 
          viewTag: judgeTime
          style:
            width: "1"
            height: "1"
          msg2: "Please choose Time!"
          onClick:
            - actionType: popUpDismiss
              popUpView: judgeTime
        - .WaitView:
          viewTag: upLoading
          style:
            width: "1"
            height: "1"
        - .BaseWarningViewOne: 
          viewTag: judgeTime1  
          style:
            width: "1"
            height: "1"  
          msg2: "The time before today cannot be selected. Please select the correct time!"
          onClick:
            - actionType: popUpDismiss
              popUpView: judgeTime1
        