Cov19ResultsAndFluResultsPrivate:
  title: COVID-19 Results & Flu A&B Results
  init:
    #Page initialization
    - .SignInCheck
    # macro 复现
    - if:
        - =.Global.formData.providerNotesForm.id
        - ..apiRequest.covResultAndFluResult.docReq@: =.Global.formData.providerNotesForm
        - ..apiRequest.covResultAndFluResult.docReq@: =.Global.formData.medicalRecords
    # 判断是否签名
    - if:
        - =..apiRequest.covResultAndFluResult.docReq.name.data.whetherSign
        - continue
        # 非空修改显示的标识,刷新签名区域
        - actionType: evalObject
          object:
            - ..formData.temporarySignature@: =..apiRequest.covResultAndFluResult.docReq.name.data.MAsignature
            - ..formData.signShow@: "block"
            - ..formData.canvasShow@: "none"
    - actionType: evalObject
      object: .BaseDate.getDate
    #生成年份
    - =.builtIn.date.generateYear:
        dataIn:
          last: 40
          next: 10
        dataOut: BaseDate.year
    - ..formData.locationAll@: =.Global.locationAll
    # 分别取出locationAll数组中的location / phoneNumber 
    - =.builtIn.object.extractArray:
        dataIn:
          obj: =..formData.locationAll
          arr:
            - location
            - phoneNumber
        dataOut: Cov19ResultsAndFluResultsPrivate.formData.locationAddressAndPhone
    # 格式化表格
    # - ..apiRequest.covResultAndFluResult.docReq.name.data@: =.SelectData.cov19ResultAndFluResult 
    - ..formData.locationSelect@: =..apiRequest.covResultAndFluResult.docReq.name.data.isSelectAddress
  formDataTemp:
    classTag:
      name: Admin
      fontColor: "0x005795"
      backgroundColor: "0xe9f2fc"
      display: block
    privateTag:
      display: "block"
      backgroundColor: "0xececee"
      fontColor: "0x4c5264"
      name: "Private"
    publicTag:
      display: "block"
      backgroundColor: "0xdfedfc"
      fontColor: "0x2988e6"
      name: "Released"
    antigenResults:
      - key: antigenResults
        value: Positive
      - key: antigenResults
        value: Negative
    antibodylgGResults:
      - key: antibodylgGResults
        value: Positive
      - key: antibodylgGResults
        value: Negative
    antibodylgMResults:
      - key: antibodylgMResults
        value: Positive
      - key: antibodylgMResults
        value: Negative
    fluTestResults:
      - key: fluTestResults
        value: Positive
      - key: fluTestResults
        value: Negative
    patientInfo:
      - key: Exam Date
        value:
      - key: Patient Name
        value:
      - key: AiTmed ID
        value:
      - key: Phone
        value:
      - key: Date of Birth
        value:
    question:
      - key: 1)ALLERGIC REACTION TO CHICKEN EGGS?
        value:
      - key: 2)ALLERGIC REACTION TO FLU SHOT OR ANY OTHER TYPE OF IMMUNIZATION SHOT?
        value:
      - key: 3)ALLERGIC REACTION TO ANY MEDICATION OR DRUG?
        value:
      - key: 4)ARE YOU OR COULD YOU BE PREGNANT?
        value:
    selectYesOrNo:
      problem1:
        - key: problem1
          value: "Yes"
        - key: problem1
          value: "No"
      problem2:
        - key: problem2
          value: "Right Deltoid"
        - key: problem2
          value: "Left Deltoid"
  formData:
    locationAll: []
    whetherSignature: ""
    requestBox: ""
    testCompany: []
    locationAddressAndPhone: []
    dataTagFlag: ""
    facilityPhone: ""
    signatureWarningPop: "none"
    locationSelect: ""
    phoneSelect: ""
    temporarySignature: ""
    signShow: "none"
    canvasShow: "block"

  apiRequest:
    covResultAndFluResult:
      deleteReq:
        id: ""
      docResp: ""
      docReq:
        eid: .Global.formData.meetingDocEid
        reid: ""
        type: .DocType.covResultAndFluResult
        name:
          data:
            classTag:
              name: Admin
              fontColor: "0x005795"
              backgroundColor: "0xe9f2fc"
              display: block
            statusTag:
              name: Private
              fontColor: "0x4c5264"
              backgroundColor: "0xececee"
              display: block
            facilityInfo:
              facilityAvatarID: .Global.facilityAvatarID
              facilityName: .Global.currentFacility.name.basicInfo.medicalFacilityName
              address: .Global.currentFacility.name.basicInfo.location
              email: .Global.currentFacility.name.basicInfo.email
              website: .Global.currentFacility.name.basicInfo.website
              phoneNumber: .Global.currentFacility.name.basicInfo.phoneNumber
              fax: .Global.currentFacility.name.basicInfo.fax
            patientInfo:
              examDate: .Global.formData.appointment.stime
              patientName: .Global.formData.patientInfo.name.data.basicInfo.fullName
              dob: .Global.formData.patientInfo.name.data.basicInfo.dateOfBirth
              phone: .Global.formData.patientInfo.name.data.basicInfo.phone
              email: .Global.formData.patientInfo.name.data.contactInfo.email
              address: .Global.formData.patientInfo.name.data.contactInfo.address.fullAddress
            whetherSign: true
            MAsignature: ""
            signatureTime: ""
            isSelectAddress: ""
            dateOfTest: ""
            companyAddress: ""
            providerName: ""
            antigen:
              antigenResults: ""
              antigenResultsColor: ""
              lot: ""
              expiration: ""
            antibody:
              antibodylgGResults: ""
              antibodylgGResultsColor: ""
              antibodylgMResults: ""
              antibodylgMResultsColor: ""
              lot: ""
              expiration: ""
            fluResults: ""
            fluResultsColor: ""
            MAname: ""
          title: "COVID-19 Results & Flu A&B Results"
          user: .Global.currentFacility.name.basicInfo.medicalFacilityName
          type: "application/json"
      docAPI:
        store:
          api: cd
          dataIn: Cov19ResultsAndFluResultsPrivate.apiRequest.covResultAndFluResult.docReq
          dataOut: Cov19ResultsAndFluResultsPrivate.apiRequest.covResultAndFluResult.docResp
        delete:
          api: dx
          dataIn: Cov19ResultsAndFluResultsPrivate.apiRequest.covResultAndFluResult.deleteReq
    newSign:
      docRes: ""
      document:
        #DOC
        type: .DocType.DocumentSignature
        name:
          title: ""
          type: ..apiRequest.newSign.document.subtype.mediaType
          data: ""
        eid: .Global.formData.meetingDocEid
        reid: ""
        subtype:
          mediaType: "" # mediaType : "image/jpeg"              
      docAPI:
        # DOCAPI 
        store:
          api: cd
          dataIn: apiRequest.newSign.document
          dataOut: Cov19ResultsAndFluResultsPrivate.apiRequest.newSign.docRes
  components:
    - type: view
      style:
        width: '1'
        height: '1'
        margin: auto
      children:
        - .SideMenuBar:
          children:
            - .aitLogo:
            - .MenuBar:
        - .TopBar:
        - .BodyView:
          style:
            height: "0.93"
          children:
            - .AppointmentLobby:
              style:
                width: "0.7"
            - .GotoBack:
              onClick:
                - actionType: builtIn
                  funcName: goBack
                  reload: true
            - type: view
              style:
                left: "0.008"
                width: "0.824"
                height: "0.74"
                top: "0.1"
                overflow: hidden
                backgroundColor: "0xffffff"
              children:
                - type: view
                  style:
                    width: "0.39"
                    margin: "auto"
                  children:
                    - .FormsTypeTitle:
                    - type: scrollView
                      style:
                        marginTop: "0.01"
                        width: "0.39"
                        height: "0.614"
                        overflow: scroll
                      children:
                        - .ProFormsBaseView:
                          style:
                            marginTop: "0.03"
                            height: "0.1"
                          children:
                            - .ProFormsBaseView:
                              style:
                                width: "0.135"
                                display: inline-block
                              children:
                                - type: image
                                  path: "office-building.svg"
                                  path=func: .builtIn.utils.prepareDocToPath
                                  dataKey: apiRequest.covResultAndFluResult.docReq.name.data.facilityInfo.facilityAvatarID
                                  style:
                                    marginTop: "0.005"
                                    width: "0.025"
                                    height: "0.04416"
                                    display: inline-block
                                - type: view
                                  style:
                                    marginTop: "0"
                                    marginLeft: "0.01"
                                    width: "0.1"
                                    display: inline-block
                                  children:
                                    - .ProFormsLabel:
                                      dataKey: apiRequest.covResultAndFluResult.docReq.name.data.facilityInfo.facilityName
                                      style:
                                        marginTop: "0"
                                        fontSize: .Nfont.nf4
                                    - .ProFormsLabel:
                                      dataKey: apiRequest.covResultAndFluResult.docReq.name.data.facilityInfo.address
                                      style:
                                        marginTop: "0.01"
                                        fontSize: .Nfont.nf1
                            - .ProFormsBaseView:
                              style:
                                marginLeft: "0.035"
                                width: "0.12"
                                display: inline-block
                              children:
                                - .ProFormsBaseView:
                                  children:
                                    - .ProFormsLabelLeft:
                                      text: Email
                                    - .ProFormsLabelRight:
                                      dataKey: apiRequest.covResultAndFluResult.docReq.name.data.facilityInfo.email
                                - .ProFormsBaseView:
                                  children:
                                    - .ProFormsLabelLeft:
                                      text: "Website"
                                    - .ProFormsLabelRight:
                                      dataKey: apiRequest.covResultAndFluResult.docReq.name.data.facilityInfo.website
                            - .ProFormsBaseView:
                              style:
                                marginLeft: "0"
                                width: "0.1"
                                display: inline-block
                              children:
                                - .ProFormsBaseView:
                                  children:
                                    - .ProFormsLabelLeft:
                                      text: "Main #"
                                    - .ProFormsLabelRight:
                                      dataKey: apiRequest.covResultAndFluResult.docReq.name.data.facilityInfo.phoneNumber
                                - .ProFormsBaseView:
                                  children:
                                    - .ProFormsLabelLeft:
                                      text: "Fax #"
                                    - .ProFormsLabelRight:
                                      dataKey: apiRequest.covResultAndFluResult.docReq.name.data.facilityInfo.fax
                        - .ProFormsBaseView:
                          children:
                            - type: label
                              text: Company Address where test administered
                              style:
                                fontSize: .Nfont.nf2
                                fontStyle: "bold"
                            - type: view
                              style:
                                height: "auto"
                                marginTop: "0.008"
                                display: "flex"
                              children:
                                - type: view
                                  style:
                                    fontSize: .Nfont.nf1
                                    display: "inline-block"
                                  children:
                                    - type: list
                                      contentType: listObject
                                      listObject: ..formData.locationAddressAndPhone
                                      iteratorVar: itemObject
                                      viewTag: companyAddressTag
                                      style:
                                        display: "inline-block"
                                      children:
                                        - type: listItem
                                          itemObject: ""
                                          style:
                                            left: "0"
                                            height: "auto"
                                          children:
                                            - type: image
                                              style:
                                                width: "0.008"
                                                left: "0"
                                                display: "inline-block"
                                                marginTop: "0.01"
                                              path:
                                                emit:
                                                  dataKey:
                                                    var: itemObject
                                                  actions:
                                                    - if:
                                                        - =.builtIn.string.equal:
                                                            dataIn:
                                                              string1: $var.location
                                                              string2: =..formData.locationSelect
                                                        - selectBlue.svg
                                                        - selectGray.svg
                                              onClick:
                                                - emit:
                                                    dataKey:
                                                      var: itemObject
                                                    actions:
                                                      - if:
                                                          - =.builtIn.string.equal:
                                                              dataIn:
                                                                string1: $var.location
                                                                string2: =..formData.locationSelect
                                                          - ..formData.locationSelect@: ""
                                                          - ..formData.locationSelect@: $var.location
                                                - actionType: builtIn
                                                  funcName: redraw
                                                  viewTag: companyAddressTag
                                            - type: label
                                              dataKey: itemObject.location
                                              style:
                                                marginLeft: "0.01"
                                                marginTop: "0.008"
                                                fontSize: .Nfont.nf1
                                                display: "inline-block"
                                            - type: label
                                              text: "Phone:"
                                              style:
                                                marginLeft: "0.004"
                                                marginTop: "0.008"
                                                fontSize: .Nfont.nf1
                                                display: "inline-block"
                                            - type: label
                                              dataKey: itemObject.phoneNumber
                                              style:
                                                marginLeft: "0.002"
                                                marginTop: "0.008"
                                                fontSize: .Nfont.nf1
                                                display: "inline-block"

                        # patient info start
                        - .ProFormsBaseView:
                          style:
                            marginTop: "0.03"
                          children:
                            - .ProFormsBaseView:
                              children:
                                - .ProFormsLabelLeft:
                                  text: Exam Date
                                - .ProFormsLabelRight:
                                  text=func: .builtIn.string.formatUnixtimeL_en
                                  dataKey: apiRequest.covResultAndFluResult.docReq.name.data.patientInfo.examDate

                            - .ProFormsBaseView:
                              children:
                                - .ProFormsLabelLeft:
                                  text: Patient Name
                                - .ProFormsLabelRight:
                                  dataKey: apiRequest.covResultAndFluResult.docReq.name.data.patientInfo.patientName

                            - .ProFormsBaseView:
                              children:
                                - .ProFormsLabelLeft:
                                  text: Date of Birth
                                - .ProFormsLabelRight:
                                  dataKey: apiRequest.covResultAndFluResult.docReq.name.data.patientInfo.dob

                            - .ProFormsBaseView:
                              children:
                                - .ProFormsLabelLeft:
                                  text: "Phone #"
                                - .ProFormsLabelRight:
                                  dataKey: apiRequest.covResultAndFluResult.docReq.name.data.patientInfo.phone

                            - .ProFormsBaseView:
                              children:
                                - .ProFormsLabelLeft:
                                  text: "Email"

                                - .ProFormsLabelRight:
                                  dataKey: apiRequest.covResultAndFluResult.docReq.name.data.patientInfo.email

                            - .ProFormsBaseView:
                              children:
                                - .ProFormsLabelLeft:
                                  text: Patient Address

                                - .ProFormsLabelRight:
                                  dataKey: apiRequest.covResultAndFluResult.docReq.name.data.patientInfo.address
                            # patient info end

                        - .ProFormsDivider:
                        - .ProFormsBaseView:
                          style:
                            marginTop: "0.03"
                          children:
                            # OFFICE USE ONLY
                            - .ProFormsLabel:
                              text: "OFFICE USE ONLY"
                              style:
                                marginTop: "0.01"
                                height: "auto"
                                width: "0.39"
                                left: "0"
                                fontSize: .Nfont.nf1
                                # fontWeight: "500"
                                color: "0x000000"
                                textAlign:
                                  x: center
                                  y: center
                            - .prOneListView:
                              style:
                                height: "auto"
                                width: "0.39"
                                marginTop: "0.02"
                                display: "flex"
                              children:
                                - type: view
                                  style:
                                    display: "inline-block"
                                    width: "0.17"
                                  children:
                                    - .ProFormsLabel:
                                      text: Date of Test

                                    - .ProFormsCalendarView:
                                      style:
                                        width: "0.1898"
                                      onClick:
                                        - actionType: evalObject
                                          object:
                                            - ..formData.dataTagFlag@: 1
                                            - if:
                                                - =.builtIn.string.equal:
                                                    dataIn:
                                                      string1: =..formData.dataTagFlag
                                                      string2: ""
                                                - continue
                                                - actionType: popUp
                                                  popUpView: dateTag
                                      children:
                                        - .ProFormsCalendarField:
                                          viewTag: dateOfTestTag
                                          dataKey: apiRequest.covResultAndFluResult.docReq.name.data.dateOfTest
                                          style:
                                            width: "0.17"
                                        - .ProFormsCalendarImg:


                                - type: view
                                  style:
                                    display: "inline-block"
                                    marginLeft: "0.027"
                                    width: "0.39"
                                  children:
                                    - .ProFormsLabel:
                                      text: "Provider's Name"
                                    - .ProFormsTextField:
                                      viewTag: dateOfTestTag
                                      dataKey: apiRequest.covResultAndFluResult.docReq.name.data.providerName
                                      style:
                                        width: "0.1898"
                            - type: view
                              style:
                                marginTop: "0.03"
                                border:
                                  style: "3"
                                borderColor: "0xdedede"
                                borderWeight: "3px"
                                boxSizing: border-box
                                height: "0.237"
                                width: "0.39"
                                display: "inline-block"
                              children:
                                - .ProFormsLabel:
                                  text: "COVID-19 Rapid Antigen Test Results"
                                  style:
                                    marginTop: "0.01"
                                    textAlign:
                                      x: center
                                      y: center
                                # Test kit name/
                                - type: view
                                  style:
                                    marginTop: "0.01"
                                    width: "0.39"
                                    display: "inline-block"
                                  children:
                                    - .Cov19ResultsText:
                                      text: "Test kit name/Manufacture: "
                                      style:
                                        fontSize: .Nfont.nf1
                                        display: "inline-block"
                                        width: "auto"
                                    - .Cov19ResultsText:
                                      text: "Carestart COVID-19 Antigen Test"
                                      style:
                                        fontSize: .Nfont.nf1
                                        marginLeft: "0.048"
                                        display: "inline-block"
                                        width: "0.15"
                                        fontWeight: "500"
                                # positive / negative
                                - type: view
                                  style:
                                    marginTop: "0.01"
                                    width: "0.39"
                                    left: "0"
                                    height: "0.05"
                                  children:
                                    - type: view
                                      style:
                                        width: "auto"
                                        top: "0"
                                      children:
                                        - .Cov19ResultsText:
                                          text: "Rapid COVID-19 Antigen Testing results"
                                          style:
                                            width: "0.26"
                                            fontSize: .Nfont.nf1
                                            fontWeight: "500"
                                        - type: list
                                          contentType: listObject
                                          listObject: ..formDataTemp.antigenResults
                                          iteratorVar: itemObject
                                          viewTag: antigenView
                                          style:
                                            width: '0.39'
                                            marginTop: "0.015"
                                            height: auto
                                            axis: horizontal
                                          children:
                                            - type: listItem
                                              itemObject:
                                              style:
                                                width: '0.05'
                                              children:
                                                - type: image
                                                  path:
                                                    emit:
                                                      dataKey:
                                                        var: itemObject
                                                      actions:
                                                        - if:
                                                            - =.builtIn.string.equal:
                                                                dataIn:
                                                                  string1: $var.value
                                                                  string2: =..apiRequest.covResultAndFluResult.docReq.name.data.antigen.antigenResults
                                                            - selectedCircle.svg
                                                            - noSelectCircle.svg
                                                  onClick:
                                                    - emit:
                                                        dataKey:
                                                          var: itemObject
                                                        actions:
                                                          - if:
                                                              - =.builtIn.string.equal:
                                                                  dataIn:
                                                                    string1: $var.value
                                                                    string2: =..apiRequest.covResultAndFluResult.docReq.name.data.antigen.antigenResults
                                                              - ..apiRequest.covResultAndFluResult.docReq.name.data.antigen.antigenResults@: ""
                                                              - ..apiRequest.covResultAndFluResult.docReq.name.data.antigen.antigenResults@: $var.value
                                                    - actionType: builtIn
                                                      funcName: redraw
                                                      viewTag: antigenView
                                                  style:
                                                    top: "0"
                                                    width: "0.00832"
                                                    left: "0.019"
                                                    height: "0.01472"
                                                - type: label
                                                  text:
                                                  dataKey: itemObject.value
                                                  style:
                                                    left: "0.033"
                                                    top: "0"
                                                    fontSize: .Nfont.nf0
                                # LOT#/Expiration
                                - type: view
                                  style:
                                    width: "0.39"
                                    marginTop: "0.02"
                                    height: "0.08"
                                  children:
                                    - type: view
                                      style:
                                        display: "inline-block"
                                        marginLeft: "0.02"
                                      children:
                                        - .ProFormsLabel:
                                          text: "LOT #"

                                        - .ProFormsTextField:
                                          dataKey: apiRequest.covResultAndFluResult.docReq.name.data.antigen.lot
                                          style:
                                            width: "0.1633"
                                    - type: view
                                      style:
                                        marginLeft: "0.01"
                                        display: "inline-block"
                                      children:
                                        - type: label
                                          text: "Expiration"
                                          style:
                                            fontWeight: "500"
                                            width: "0.1"
                                            fontSize: .Nfont.nf1
                                            display: "flex"
                                        - .ProFormsCalendarView:
                                          style:
                                            width: "0.1633"
                                          onClick:
                                            - actionType: evalObject
                                              object:
                                                - ..formData.dataTagFlag@: 2
                                                - if:
                                                    - =.builtIn.string.equal:
                                                        dataIn:
                                                          string1: =..formData.dataTagFlag
                                                          string2: ""
                                                    - continue
                                                    - actionType: popUp
                                                      popUpView: dateTag
                                          children:
                                            - .ProFormsCalendarField:
                                              viewTag: antigenExpTag
                                              dataKey: apiRequest.covResultAndFluResult.docReq.name.data.antigen.expiration
                                              style:
                                                width: "0.14"
                                            - .ProFormsCalendarImg:

                                                # Covid-19 Rapid Antibody Test Results                                              
                            - type: view
                              style:
                                marginTop: "0.03"
                                border:
                                  style: "3"
                                borderColor: "0xdedede"
                                borderWeight: "3px"
                                # height: "0.37"
                                height: "0.3"
                                width: "0.39"
                                boxSizing: border-box
                              children:
                                - .ProFormsLabel:
                                  text: "COVID-19 Rapid Antibody Test Results"
                                  dataKey:
                                  style:
                                    marginTop: "0.01"
                                    textAlign:
                                      x: center
                                      y: center
                                - type: view
                                  style:
                                    marginTop: "0.01"
                                    width: "0.39"
                                    display: "inline-block"
                                  children:
                                    - .Cov19ResultsText:
                                      text: "Test kit name/Manufacture: "
                                      style:
                                        fontSize: .Nfont.nf1
                                        display: "inline-block"
                                        width: "auto"
                                    - .Cov19ResultsText:
                                      text: "Healgen COVID-19 Antibody IgG/IgM Test"
                                      style:
                                        fontSize: .Nfont.nf1
                                        marginLeft: "0.048"
                                        fontWeight: "500"
                                        width: "0.15"
                                        display: "inline-block"
                                - type: view
                                  style:
                                    marginTop: "0.01"
                                    width: "0.39"
                                    left: "0"
                                    height: "0.05"
                                  children:
                                    - type: view
                                      style:
                                        width: "auto"
                                        top: "0"
                                      children:
                                        - .Cov19ResultsText:
                                          text: "Rapid COVID-19 Antibody lgG"
                                          style:
                                            width: "0.26"
                                            fontSize: .Nfont.nf1
                                            fontWeight: "500"
                                        - type: list
                                          contentType: listObject
                                          listObject: ..formDataTemp.antibodylgGResults
                                          iteratorVar: itemObject
                                          viewTag: antibodylgGView
                                          style:
                                            width: '0.39'
                                            marginTop: "0.015"
                                            height: auto
                                            axis: horizontal
                                          children:
                                            - type: listItem
                                              itemObject:
                                              style:
                                                width: '0.05'
                                              children:
                                                - type: image
                                                  path:
                                                    emit:
                                                      dataKey:
                                                        var: itemObject
                                                      actions:
                                                        - if:
                                                            - =.builtIn.string.equal:
                                                                dataIn:
                                                                  string1: $var.value
                                                                  string2: =..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgGResults
                                                            - selectedCircle.svg
                                                            - noSelectCircle.svg
                                                  onClick:
                                                    - emit:
                                                        dataKey:
                                                          var: itemObject
                                                        actions:
                                                          - if:
                                                              - =.builtIn.string.equal:
                                                                  dataIn:
                                                                    string1: $var.value
                                                                    string2: =..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgGResults
                                                              - ..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgGResults@: ""
                                                              - ..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgGResults@: $var.value
                                                    - actionType: builtIn
                                                      funcName: redraw
                                                      viewTag: antibodylgGView
                                                  style:
                                                    top: "0"
                                                    width: "0.00832"
                                                    left: "0.019"
                                                    height: "0.01472"
                                                - type: label
                                                  text:
                                                  dataKey: itemObject.value
                                                  style:
                                                    left: "0.033"
                                                    top: "0"
                                                    fontSize: .Nfont.nf0
                                - type: view
                                  style:
                                    marginTop: "0.01"
                                    width: "0.39"
                                    left: "0"
                                    height: "0.05"
                                  children:
                                    - type: view
                                      style:
                                        width: "auto"
                                        top: "0"
                                      children:
                                        - .Cov19ResultsText:
                                          text: "Rapid COVID-19 Antibody lgM"
                                          style:
                                            width: "0.26"
                                            fontSize: .Nfont.nf1
                                            fontWeight: "500"
                                        - type: list
                                          contentType: listObject
                                          listObject: ..formDataTemp.antibodylgMResults
                                          iteratorVar: itemObject
                                          viewTag: antibodylgMView
                                          style:
                                            width: '0.39'
                                            marginTop: "0.015"
                                            height: auto
                                            axis: horizontal
                                          children:
                                            - type: listItem
                                              itemObject:
                                              style:
                                                width: '0.05'
                                              children:
                                                - type: image
                                                  path:
                                                    emit:
                                                      dataKey:
                                                        var: itemObject
                                                      actions:
                                                        - if:
                                                            - =.builtIn.string.equal:
                                                                dataIn:
                                                                  string1: $var.value
                                                                  string2: =..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgMResults
                                                            - selectedCircle.svg
                                                            - noSelectCircle.svg
                                                  onClick:
                                                    - emit:
                                                        dataKey:
                                                          var: itemObject
                                                        actions:
                                                          - if:
                                                              - =.builtIn.string.equal:
                                                                  dataIn:
                                                                    string1: $var.value
                                                                    string2: =..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgMResults
                                                              - ..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgMResults@: ""
                                                              - ..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgMResults@: $var.value
                                                    - actionType: builtIn
                                                      funcName: redraw
                                                      viewTag: antibodylgMView
                                                  style:
                                                    top: "0"
                                                    width: "0.00832"
                                                    left: "0.019"
                                                    height: "0.01472"
                                                - type: label
                                                  text:
                                                  dataKey: itemObject.value
                                                  style:
                                                    left: "0.033"
                                                    top: "0"
                                                    fontSize: .Nfont.nf0
                                # LGM Lot#/Expiration
                                - type: view
                                  style:
                                    width: "0.39"
                                    marginTop: "0.02"
                                    height: "0.08"
                                  children:
                                    - type: view
                                      style:
                                        display: "inline-block"
                                        marginLeft: "0.02"
                                      children:
                                        - .ProFormsLabel:
                                          text: "LOT #"
                                        - .ProFormsTextField:
                                          dataKey: apiRequest.covResultAndFluResult.docReq.name.data.antibody.lot
                                          style:
                                            width: "0.1633"
                                    - type: view
                                      style:
                                        marginLeft: "0.01"
                                        display: "inline-block"
                                      children:
                                        - .ProFormsLabel:
                                          text: "Expiration"
                                        - .ProFormsCalendarView:
                                          style:
                                            width: "0.1633"
                                          onClick:
                                            - actionType: evalObject
                                              object:
                                                - ..formData.dataTagFlag@: 4
                                                - if:
                                                    - =.builtIn.string.equal:
                                                        dataIn:
                                                          string1: =..formData.dataTagFlag
                                                          string2: ""
                                                    - continue
                                                    - actionType: popUp
                                                      popUpView: dateTag
                                          children:
                                            - .ProFormsCalendarField:
                                              viewTag: lgMExpiration
                                              dataKey: apiRequest.covResultAndFluResult.docReq.name.data.antibody.expiration
                                              style:
                                                width: "0.14"

                                            - .ProFormsCalendarImg:


                            - type: view
                              style:
                                marginTop: "0.03"
                                border:
                                  style: "3"
                                borderColor: "0xdedede"
                                borderWeight: "3px"
                                height: "0.125"
                                width: "0.39"
                                boxSizing: border-box
                              children:
                                - .ProFormsLabel:
                                  text: "FLU A&B Results"
                                  style:
                                    marginTop: "0.01"
                                    fontSize: .Nfont.nf1
                                    fontWeight: "600"
                                    textAlign:
                                      x: center

                                - type: view
                                  style:
                                    marginTop: "0.03"
                                    width: "0.39"
                                    left: "0"
                                  children:
                                    - type: view
                                      style:
                                        width: "0.32"
                                        top: "0"
                                      children:
                                        - .Cov19ResultsText:
                                          text: "FLU A&B Test results"
                                          style:
                                            width: "0.26"
                                            fontSize: .Nfont.nf1
                                            fontWeight: "500"
                                        - type: list
                                          contentType: listObject
                                          listObject: ..formDataTemp.antibodylgGResults
                                          iteratorVar: itemObject
                                          viewTag: fluResultView
                                          style:
                                            width: '0.39'
                                            marginTop: "0.015"
                                            height: auto
                                            axis: horizontal
                                          children:
                                            - type: listItem
                                              itemObject:
                                              style:
                                                width: '0.05'
                                              children:
                                                - type: image
                                                  path:
                                                    emit:
                                                      dataKey:
                                                        var: itemObject
                                                      actions:
                                                        - if:
                                                            - =.builtIn.string.equal:
                                                                dataIn:
                                                                  string1: $var.value
                                                                  string2: =..apiRequest.covResultAndFluResult.docReq.name.data.fluResults
                                                            - selectedCircle.svg
                                                            - noSelectCircle.svg
                                                  onClick:
                                                    - emit:
                                                        dataKey:
                                                          var: itemObject
                                                        actions:
                                                          - if:
                                                              - =.builtIn.string.equal:
                                                                  dataIn:
                                                                    string1: $var.value
                                                                    string2: =..apiRequest.covResultAndFluResult.docReq.name.data.fluResults
                                                              - ..apiRequest.covResultAndFluResult.docReq.name.data.fluResults@: ""
                                                              - ..apiRequest.covResultAndFluResult.docReq.name.data.fluResults@: $var.value
                                                    - actionType: builtIn
                                                      funcName: redraw
                                                      viewTag: fluResultView
                                                  style:
                                                    top: "0"
                                                    width: "0.00832"
                                                    left: "0.019"
                                                    height: "0.01472"
                                                - type: label
                                                  text:
                                                  dataKey: itemObject.value
                                                  style:
                                                    left: "0.033"
                                                    top: "0"
                                                    fontSize: .Nfont.nf0
                            - type: view
                              style:
                                width: "0.39"
                                marginTop: "0.03"
                                display: "inline-block"
                              children:
                                - type: label
                                  text: The undersigned,
                                  dataKey:
                                  style:
                                    fontSize: .Nfont.nf1
                                    display: "inline-block"
                                - type: label
                                  dataKey: apiRequest.covResultAndFluResult.docReq.name.data.facilityInfo.facilityName
                                  style:
                                    fontSize: .Nfont.nf1
                                    display: "inline-block"
                                    color: "0x005795"
                                    marginLeft: "0.002"
                                    fontWeight: "500"
                                - type: label
                                  text: MA has been notified and authorizes release of results.
                                  dataKey:
                                  style:
                                    fontSize: .Nfont.nf1
                                    display: "inline-block"
                                    marginLeft: "0.002"

                            - type: view
                              style:
                                marginTop: "0.02"
                                height: "0.08"
                                width: "0.39"
                              children:
                                - .Cov19ResultsView:
                                  style:
                                    width: "0.31"
                                  children:
                                    - .ProFormsLabel:
                                      text: "MA's Print Name"

                                    - .Cov19ResultsTextField:
                                      placeholder: "Enter here"
                                      dataKey: apiRequest.covResultAndFluResult.docReq.name.data.MAname
                                      style:
                                        width: "0.1898"
                                        marginTop: "0.01"

                            - .ProFormsBaseView:
                              style:
                                marginTop: "0.03"
                                width: "0.275"
                                display: flex
                                justifyContent: space-between
                              children:
                                - .ProFormsLabel:
                                  text: MA's Signature
                                  dataKey:
                                  style:
                                    display: inline-block
                                - .ProFormsLabel:
                                  text: Clear
                                  style:
                                    color: "0xe24445"
                                    display: inline-block
                                  onClick:
                                    # 移除签名
                                    - actionType: removeSignature
                                      dataObject: BLOB
                                      dataKey: apiRequest.newSign.document.name.data
                                      viewTag: signatureTag
                                    - actionType: evalObject
                                      object:
                                        - ..formData.temporarySignature@: ""
                                        - ..formData.signShow@: "none"
                                        - ..formData.canvasShow@: "block"
                                        - ..apiRequest.covResultAndFluResult.docReq.name.data.MAsignature@: ""
                                        - ..apiRequest.newNote.docReq.name.data.signatureTime@: ""
                                        - ..apiRequest.covResultAndFluResult.docReq.name.data.whetherSign@: true
                                    # 显示签名区域隐藏
                                    - actionType: builtIn
                                      funcName: hide
                                      viewTag: signatureShowTag
                                    - actionType: builtIn
                                      funcName: show
                                      viewTag: signatureTag
                            - .SignAreaView:
                              style:
                                marginTop: "0.008"
                              children:
                                - type: canvas
                                  dataKey: apiRequest.newSign.document.name.data
                                  viewTag: signatureTag
                                  style:
                                    display: ..formData.canvasShow
                                    .SignCanvasStyle:
                                - type: label
                                  text: "X"
                                  style:
                                    .SignLabelStyle:
                                - type: image
                                  viewTag: signatureShowTag
                                  dataKey: formData.temporarySignature
                                  path=func: =.builtIn.utils.prepareDocToPath
                                  path: null.png
                                  style:
                                    display: ..formData.signShow
                                    .SignCanvasStyle:
                            - .ProFormsBaseView:
                              viewTag: signatureShowTag
                              style:
                                display: ..formData.signShow
                              children:
                                - .ProFormsLabelLeft:
                                  text=func: .builtIn.string.formatUnixtime_en # 12/30/2021 07:25:00
                                  dataKey: apiRequest.covResultAndFluResult.docReq.name.data.signatureTime
                                  style:
                                    display: inline
                                - .ProFormsLabelLeft:
                                  text: " Digitally Signed"
                                  style:
                                    marginLeft: "0.0046"
                                    display: inline
                            - .ProFormsBaseView:
                              style:
                                marginTop: "0.03"
                              children:
                                - .ProFormsLabelLeft:
                                  text: "Date"
                                  style:
                                    display: inline
                                - .ProFormsLabelRight:
                                  text=func: .builtIn.string.formatUnixtimeL_en
                                  dataKey: apiRequest.covResultAndFluResult.docReq.ctime
                                  style:
                                    marginLeft: "0.0046"
                                    display: inline
                            - .ProFormsDivider:


            - .FormsBottomView:
              children:
                - .FormsBottomButtons:
                  children:
                    - .FormsBottomLeftButton:
                      onClick:
                        # 保存签名
                        - actionType: saveSignature
                          dataObject: BLOB
                          dataKey: apiRequest.newSign.document.name.data
                          isEmpty: formData.whetherSignature
                        # 签名处理 
                        - actionType: evalObject
                          object:
                            - if:
                                - =..formData.temporarySignature
                                - continue
                                - actionType: evalObject
                                  object:
                                    - if:
                                        - =..formData.whetherSignature
                                        - continue
                                        - actionType: evalObject
                                          object:
                                            - ..apiRequest.newSign.document.reid@: =..apiRequest.covResultAndFluResult.docReq.id
                                            - =..apiRequest.newSign.docAPI.store: ""
                                            - ..apiRequest.covResultAndFluResult.docReq.name.data.MAsignature@:
                                                =..apiRequest.newSign.docRes.doc.id
                                            - ..apiRequest.covResultAndFluResult.docReq.name.data.signatureTime@:
                                                =..apiRequest.newSign.docRes.doc.ctime
                                            - ..apiRequest.covResultAndFluResult.docReq.name.data.whetherSign@: =..formData.whetherSignature
                        - actionType: evalObject
                          object:
                            # 1、判断antigenResults是否为空
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..apiRequest.covResultAndFluResult.docReq.name.data.antigen.antigenResults
                                      string2: "Positive"
                                - ..apiRequest.covResultAndFluResult.docReq.name.data.antigen.antigenResultsColor@: "0xe24445"
                                - ..apiRequest.covResultAndFluResult.docReq.name.data.antigen.antigenResultsColor@: "0x2fb355"
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..apiRequest.covResultAndFluResult.docReq.name.data.antigen.antigenResults
                                      string2: ""
                                - ..apiRequest.covResultAndFluResult.docReq.name.data.antigen.antigenResultsColor@: "0xffffff"
                                - continue
                            # 2、判断antibodylgGResults是否为空
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgGResults
                                      string2: "Positive"
                                - ..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgGResultsColor@: "0xe24445"
                                - ..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgGResultsColor@: "0x2fb355"
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgGResults
                                      string2: ""
                                - ..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgGResultsColor@: "0xffffff"
                                - continue
                            # 3、判断antibodylgMResults是否为空  
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgMResults
                                      string2: "Positive"
                                - ..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgMResultsColor@: "0xe24445"
                                - ..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgMResultsColor@: "0x2fb355"
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgMResults
                                      string2: ""
                                - ..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgMResultsColor@: "0xffffff"
                                - continue
                            # 4、判断fluResults是否为空   
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..apiRequest.covResultAndFluResult.docReq.name.data.fluResults
                                      string2: "Positive"
                                - ..apiRequest.covResultAndFluResult.docReq.name.data.fluResultsColor@: "0xe24445"
                                - ..apiRequest.covResultAndFluResult.docReq.name.data.fluResultsColor@: "0x2fb355"
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..apiRequest.covResultAndFluResult.docReq.name.data.fluResults
                                      string2: ""
                                - ..apiRequest.covResultAndFluResult.docReq.name.data.fluResultsColor@: "0xffffff"
                                - continue
                        # 关于选择Company Address where test administered                        
                        - actionType: evalObject
                          object:
                            # 根据location值取出对应的phone值
                            - =.builtIn.array.getValueByKey:
                                dataIn:
                                  array: =..formData.locationAddressAndPhone
                                  key1: location
                                  value: =..formData.locationSelect
                                  key2: phoneNumber
                                dataOut: Cov19ResultsAndFluResultsPrivate.formData.phoneSelect
                            - =.builtIn.string.concat:
                                dataIn:
                                  - =..formData.locationSelect
                                  - " "
                                  - "Phone:"
                                  - =..formData.phoneSelect
                                dataOut: Cov19ResultsAndFluResultsPrivate.apiRequest.covResultAndFluResult.docReq.name.data.companyAddress
                            - ..apiRequest.covResultAndFluResult.docReq.name.data.isSelectAddress@: =..formData.locationSelect
                        # 创建或更新文档                            
                        - actionType: evalObject
                          object:
                            - ..apiRequest.covResultAndFluResult.docReq.reid@: =.Global.formData.meetingDocReid
                            - =.builtIn.number.inhx:
                                dataIn:
                                  intHex: =..apiRequest.covResultAndFluResult.docReq.type
                                  index: 1
                                  hex: 0
                                dataOut: Cov19ResultsAndFluResultsPrivate.apiRequest.covResultAndFluResult.docReq.type
                            - ..apiRequest.covResultAndFluResult.docReq.name.data.statusTag@: =..formDataTemp.privateTag
                            - =..apiRequest.covResultAndFluResult.docAPI.store: ""
                        - actionType: evalObject
                          object:
                            .Global._nonce@:
                              =.builtIn.math.random: ""
                        - actionType: builtIn
                          funcName: goBack
                          reload: true
                    # release button                                            
                    - .FormsBottomRightButton:
                      onClick:
                        - actionType: saveSignature
                          dataObject: BLOB
                          dataKey: apiRequest.newSign.document.name.data
                          isEmpty: formData.whetherSignature
                        - actionType: evalObject
                          object:
                            # 判断是否选择Company Address
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..formData.locationSelect
                                      string2: ""
                                - actionType: popUp
                                  popUpView: addressWarningTag
                                  wait: true
                                - continue
                            # 判断是否填写了MA的名字
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..apiRequest.covResultAndFluResult.docReq.name.data.MAname
                                      string2: ""
                                - actionType: popUp
                                  popUpView: maPrintNameWarningTag
                                  wait: true
                                - continue
                            # 签名判断
                            - if:
                                - =..formData.temporarySignature
                                - continue
                                - actionType: evalObject
                                  object:
                                    - if:
                                        - =..formData.whetherSignature
                                        - actionType: popUp
                                          popUpView: signatureWarningTag
                                          wait: true
                                        - actionType: evalObject
                                          object:
                                            - ..apiRequest.newSign.document.reid@: =..apiRequest.covResultAndFluResult.docReq.id
                                            - =..apiRequest.newSign.docAPI.store: ""
                                            - ..apiRequest.covResultAndFluResult.docReq.name.data.MAsignature@:
                                                =..apiRequest.newSign.docRes.doc.id
                                            - ..apiRequest.covResultAndFluResult.docReq.name.data.signatureTime@:
                                                =..apiRequest.newSign.docRes.doc.ctime
                                            - ..apiRequest.covResultAndFluResult.docReq.name.data.whetherSign@: =..formData.whetherSignature
                        - actionType: evalObject
                          object:
                            # 1、判断antigenResults是否为空
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..apiRequest.covResultAndFluResult.docReq.name.data.antigen.antigenResults
                                      string2: "Positive"
                                - ..apiRequest.covResultAndFluResult.docReq.name.data.antigen.antigenResultsColor@: "0xe24445"
                                - ..apiRequest.covResultAndFluResult.docReq.name.data.antigen.antigenResultsColor@: "0x2fb355"
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..apiRequest.covResultAndFluResult.docReq.name.data.antigen.antigenResults
                                      string2: ""
                                - ..apiRequest.covResultAndFluResult.docReq.name.data.antigen.antigenResultsColor@: "0xffffff"
                                - continue
                            # 2、判断antibodylgGResults是否为空
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgGResults
                                      string2: "Positive"
                                - ..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgGResultsColor@: "0xe24445"
                                - ..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgGResultsColor@: "0x2fb355"
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgGResults
                                      string2: ""
                                - ..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgGResultsColor@: "0xffffff"
                                - continue
                            # 3、判断antibodylgMResults是否为空  
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgMResults
                                      string2: "Positive"
                                - ..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgMResultsColor@: "0xe24445"
                                - ..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgMResultsColor@: "0x2fb355"
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgMResults
                                      string2: ""
                                - ..apiRequest.covResultAndFluResult.docReq.name.data.antibody.antibodylgMResultsColor@: "0xffffff"
                                - continue
                            # 4、判断fluResults是否为空   
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..apiRequest.covResultAndFluResult.docReq.name.data.fluResults
                                      string2: "Positive"
                                - ..apiRequest.covResultAndFluResult.docReq.name.data.fluResultsColor@: "0xe24445"
                                - ..apiRequest.covResultAndFluResult.docReq.name.data.fluResultsColor@: "0x2fb355"
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..apiRequest.covResultAndFluResult.docReq.name.data.fluResults
                                      string2: ""
                                - ..apiRequest.covResultAndFluResult.docReq.name.data.fluResultsColor@: "0xffffff"
                                - continue
                        # 关于选择Company Address where test administered                            
                        - actionType: evalObject
                          object:
                            # 通过location值取出locationAddressAndPhone数组中对应的Phone的值
                            - =.builtIn.array.getValueByKey:
                                dataIn:
                                  array: =..formData.locationAddressAndPhone
                                  key1: location
                                  value: =..formData.locationSelect
                                  key2: phoneNumber
                                dataOut: Cov19ResultsAndFluResultsPrivate.formData.phoneSelect
                            - =.builtIn.string.concat:
                                dataIn:
                                  - =..formData.locationSelect
                                  - " "
                                  - "Phone:"
                                  - =..formData.phoneSelect
                                dataOut: Cov19ResultsAndFluResultsPrivate.apiRequest.covResultAndFluResult.docReq.name.data.companyAddress
                            - ..apiRequest.covResultAndFluResult.docReq.name.data.isSelectAddress@: =..formData.locationSelect
                        - actionType: evalObject
                          object:
                            - ..apiRequest.covResultAndFluResult.docReq.reid@: =.Global.formData.meetingDocReid
                            - =.builtIn.number.inhx:
                                dataIn:
                                  intHex: =..apiRequest.covResultAndFluResult.docReq.type
                                  index: 1
                                  hex: 1
                                dataOut: Cov19ResultsAndFluResultsPrivate.apiRequest.covResultAndFluResult.docReq.type
                            - ..apiRequest.covResultAndFluResult.docReq.name.data.statusTag@: =..formDataTemp.publicTag
                            - =..apiRequest.covResultAndFluResult.docAPI.store: ""
                        - actionType: evalObject
                          object:
                            .Global._nonce@:
                              =.builtIn.math.random: ""
                        - actionType: builtIn
                          funcName: goBack
                          reload: true
            - .FormsRightButtonsView:
              style:
                top: "0.1"
              children:
                - .FormsRightButton:
                  img: keyboard.svg
                  msg: "Macro"
                  style:
                    marginTop: "0.002"
                    backgroundColor: "0x1263a8"
                  onClick:
                    # 提前保存页面数据用于复现
                    - actionType: saveSignature
                      dataObject: BLOB
                      dataKey: apiRequest.newSign.document.name.data
                      isEmpty: formData.whetherSignature
                    - actionType: evalObject
                      object:
                        - if:
                            # 是否是上次签名
                            - =..formData.temporarySignature
                            - continue # 旧签名
                            - actionType: evalObject
                              object:
                                # 新签名
                                - if:
                                    # 是否签名
                                    - =..formData.whetherSignature
                                    - continue
                                    - actionType: evalObject
                                      object:
                                        # 创建签名
                                        - ..apiRequest.newSign.document.reid@: =..apiRequest.covResultAndFluResult.docReq.id
                                        - =..apiRequest.newSign.docAPI.store: ""
                                        # 更改文档中签名信息
                                        - ..apiRequest.covResultAndFluResult.docReq.name.data.MAsignature@: =..apiRequest.newSign.docRes.doc.id
                                        - ..apiRequest.covResultAndFluResult.docReq.name.data.signatureTime@:
                                            =..apiRequest.newSign.docRes.doc.ctime
                                        - ..apiRequest.covResultAndFluResult.docReq.name.data.whetherSign@: =..formData.whetherSignature
                        # 关于选择Company Address where test administered
                        - =.builtIn.array.getValueByKey:
                            dataIn:
                              array: =..formData.locationAddressAndPhone
                              key1: location
                              value: =..formData.locationSelect
                              key2: phoneNumber
                            dataOut: Cov19ResultsAndFluResultsPrivate.formData.phoneSelect
                        - =.builtIn.string.concat:
                            dataIn:
                              - =..formData.locationSelect
                              - " "
                              - "Phone:"
                              - =..formData.phoneSelect
                            dataOut: Cov19ResultsAndFluResultsPrivate.apiRequest.covResultAndFluResult.docReq.name.data.companyAddress
                        - ..apiRequest.covResultAndFluResult.docReq.name.data.isSelectAddress@: =..formData.locationSelect
                    # 弹窗
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: macroTag
                    - actionType: popUp
                      popUpView: macroTag
                    - actionType: updateObject
                      dataKey: Global.formData.providerNotesForm
                      dataObject: {}
                    - actionType: evalObject
                      object:
                        - .Global.formData.providerNotesForm@: =..apiRequest.covResultAndFluResult.docReq
                        - if:
                            - =.Global.macro.resp.doc.0.id
                            - actionType: evalObject
                              object:
                                - actionType: builtIn
                                  funcName: show
                                  viewTag: macroDataTag
                                - actionType: builtIn
                                  funcName: hide
                                  viewTag: noMacroDataTag
                            - actionType: evalObject
                              object:
                                - actionType: builtIn
                                  funcName: hide
                                  viewTag: macroDataTag
                                - actionType: builtIn
                                  funcName: show
                                  viewTag: noMacroDataTag
        - .MacroPopUp:
        - .CopyMacroSucPromptRight:
        - .BaseWarningView:
          msg2: "You haven't signed the form."
          viewTag: signatureWarningTag
        - .BaseWarningView:
          msg2: "Please choose a company address."
          viewTag: addressWarningTag

        - .BaseWarningView:
          msg2: "Please enter MA's Print Name."
          viewTag: maPrintNameWarningTag

        - type: view
          viewTag: dateTag
          style:
            left: "0"
            top: "0"
            width: "1"
            height: "1"
            isHidden: "true"
            backgroundColor: "0x00000033"
            zIndex: "20"
          children:
            - .BaseDate.calendar:
              children:
                - .BaseDate.calendarTitle:
                - .BaseDate.calendarCancel:
                  onClick:
                    - actionType: evalObject
                      object:
                        - ..formData.dataTagFlag@: ""
                    - actionType: popUpDismiss
                      popUpView: ____.viewTag
                - .BaseDate.calendarHeader:
                  children:
                    - .BaseDate.newMonthView:
                    - .BaseDate.newYearView:
                - .BaseDate.weekView:
                - .BaseDate.dayView:
                - .BaseDate.addButton:
                  onClick:
                    - actionType: evalObject
                      object:
                        - ..newAppointment.edge.name.setting.startDate@: =.BaseDate.calendarDate.selectDate
                        - if:
                            - =.builtIn.string.equal:
                                dataIn:
                                  string1: =..formData.dataTagFlag
                                  string2: 1
                            - ..apiRequest.covResultAndFluResult.docReq.name.data.dateOfTest@: =.BaseDate.calendarDate.selectDate
                            - continue
                        - if:
                            - =.builtIn.string.equal:
                                dataIn:
                                  string1: =..formData.dataTagFlag
                                  string2: 2
                            - ..apiRequest.covResultAndFluResult.docReq.name.data.antigen.expiration@: =.BaseDate.calendarDate.selectDate
                            - continue
                        - if:
                            - =.builtIn.string.equal:
                                dataIn:
                                  string1: =..formData.dataTagFlag
                                  string2: 3
                            - ..apiRequest.covResultAndFluResult.docReq.name.data.antibody.lgGExpiration@: =.BaseDate.calendarDate.selectDate
                            - continue
                        - if:
                            - =.builtIn.string.equal:
                                dataIn:
                                  string1: =..formData.dataTagFlag
                                  string2: 4
                            - ..apiRequest.covResultAndFluResult.docReq.name.data.antibody.expiration@: =.BaseDate.calendarDate.selectDate
                            - continue
                        # 置空                         
                        - ..formData.dataTagFlag@: ""
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: dateOfTestTag
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: antigenExpTag
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: lgGExpiration
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: lgMExpiration
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: prodInfoDateTag
                    - actionType: popUpDismiss
                      popUpView: dateTag
                - .BaseDate.cancelButton:
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: dateTag
