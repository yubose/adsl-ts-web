AddLocation:
  #xd page number: 59
  pageNumber: "350"
  viewPort: top
  title: "AddLocation"
  init:
    - .SignInCheck
    - actionType: evalObject
      object:
        .Global._nonce@:
          =.builtIn.math.random: ""
    - actionType: evalObject
      object: .BaseDate.getDate
    #生成年份
    - =.builtIn.date.generateYear:
        dataIn:
          last: 40
          next: 10
        dataOut: BaseDate.year
    - =..locationAll.docAPI.get: ""
    - ..locationAll.document@: =..locationAll.docResp.doc.0
    - actionType: evalObject
      object:
        - =.builtIn.array.getListByKey:
            dataIn:
              array: =.SelectData.businessCat
              keyId: name
            dataOut: AddLocation.businessCatName

  businessCatName: []
  suggestAddress: []
  locationIDFlag: "0"
  location:
    resp: ""
    vertex:
      .Vertex: ""
      type: "21"
      subtype: ""
      name:
        basicInfo:
          medicalFacilityName: ""
          locationID: ""
          businessType: "Medical Facility (M)"
          largeType: "M"
          phoneNumber: ""
          email: ""
          website: ""
          location: ""
          addressFirstLine: ""
          addressSecondLine: ""
          city: ""
          county: ""
          state: "AK"
          zipCode: ""
          businessLicense: ""
          businessLicenseCity: ""
          businessLicenseState: "AK"
          licenseExpirationDate: ""
          NPI: ""
          DEANumber: ""
          fax: ""
          businessHours: []
          introduction: ""

          specialty: ""
          fullAddress: ""
          geoCode: ""
          fullInfo: ""
          address: ""
          taxId: ""
          tin: ""
      uid: ""
      jwt: ""
      # pk: "VW/ceBN733d2oAki+muUeSAaKZBaE9SIbRJu5gBz40c="
      # esk: "2f8J1+aRIftJkKL+VxLb00qYjW3hWfQwLIBGumdwum/NHXlv6VChfmPIhj0bTOaUK4VscRwwa4soTqJ8x0a1jsOBoDDZz5aR"
    vertexAPI:
      .VertexAPI: ""
      store:
        api: cv
        dataIn: AddLocation.location.vertex
        dataOut: AddLocation.location.resp
  locationAll:
    # 把所有的location 信息，在schedule那边显示
    docResp: "" # get到的值
    docIn:
      # for geting all of the location
      type: .DocType.LocationOfFacility
      id: .Global.fac_rootNotebook
      xfname: eid
      obfname: mtime
      maxcount: "1"
      name:
        data:
          allLocation:
    document:
      # for store some info of location 
      type: .DocType.LocationOfFacility
      eid: .Global.fac_rootNotebook
      name:
        data:
          allLocation: []
        # type: "application/json"
    docAPI:
      .DocAPI: ""
      store:
        api: cd
        dataIn: locationAll.document
        subtype:
          mediaType: "application/json"
      get:
        api: rd
        dataIn: AddLocation.locationAll.docIn
        dataOut: AddLocation.locationAll.docResp
  locationProfile:
    # information of location
    docResp: ""
    document:
      eid: ""
      subtype:
        isEditable: true
      type: .DocType.FacilityProfile
      name:
        data:
          basicInfo: ""
    docAPI:
      store:
        api: cd
        dataIn: AddLocation.locationProfile.document
        # dataOut: AddLocation.locationProfile.docResp
  businessLogo:
    # url: BusinessLogo.svg
    document:
      .Document: ""
      subtype:
        isEncrypted: "0"
        isOnServer: "0"
      type: .DocType.BusinessLogoPicture
      name:
        title: ""
        type: ..businessLogo.docAPI.store.subtype.mediaType
        data: binFile
      deat:
        sig: ""
        url: ""
      eid: .Global.rootNotebookID
    resp: ""
    docIn:
      id: ""
      xfname: eid
      type: .DocType.BusinessLogoPicture
      maxcount: "1"
      obfname: "ctime"
      _nonce: =.Global._nonce
    docResp: ""
    docAPI:
      store:
        api: cd
        dataIn: businessLogo.document
        dataOut: AddLocation.businessLogo.resp
        subtype:
          mediaType: ""
      get:
        .DocAPI.get: ""
        dataIn: businessLogo.docIn
        dataOut: AddLocation.businessLogo.docResp
  dEA:
    # url: DEA.svg
    documentIn:
      .Document: ""
      subtype:
        isEncrypted: "1"
        isOnServer: "0"
      type: .DocType.DEAPicture
      name:
        title: ""
        type: ..dEA.docAPI.store.subtype.mediaType
        data: binFile
      deat:
        sig: ""
        url: ""
      eid: .Global.rootNotebookID
    document:
      .Document: ""
      subtype:
        isEncrypted: "1"
        isOnServer: "0"
      type: .DocType.DEAPicture
      name:
        title: ""
        type: ..dEA.docAPI.store.subtype.mediaType
        data: binFile
      deat:
        sig: ""
        url: ""
      eid: .Global.rootNotebookID
    resp: ""
    getRes: ""
    deleteReq:
      id: ""
    docIn:
      id: .Global.rootNotebookID
      xfname: eid
      type: .DocType.DEAPicture
      maxcount: "1"
      obfname: "ctime"
      _nonce: =.Global._nonce
    docAPI:
      store:
        api: cd
        dataIn: dEA.document
        dataOut: AddLocation.dEA.resp
        subtype:
          mediaType: ""
      delete:
        api: dx
        dataIn: dEA.deleteReq
      get:
        .DocAPI.get: ""
        dataIn: dEA.docIn
        dataOut: AddLocation.dEA.getRes
  medicalLicense:
    # url: MedicalLicensePicture.svg
    documentIn:
      .Document: ""
      subtype:
        isEncrypted: "1"
        isOnServer: "0"
      type: .DocType.MedicalLicensePicture
      name:
        title: ""
        type: ..medicalLicense.docAPI.store.subtype.mediaType
        data: binFile
      deat:
        sig: ""
        url: ""
      eid: .Global.rootNotebookID
    document:
      .Document: ""
      subtype:
        isEncrypted: "1"
        isOnServer: "0"
      type: .DocType.MedicalLicensePicture
      name:
        title: ""
        type: ..medicalLicense.docAPI.store.subtype.mediaType
        data: binFile
      deat:
        sig: ""
        url: ""
      eid: .Global.rootNotebookID
    resp: ""
    getRes: ""
    deleteReq:
      id: ""
    docIn:
      id: .Global.rootNotebookID
      xfname: eid
      type: .DocType.MedicalLicensePicture
      maxcount: "1"
      obfname: "ctime"
      _nonce: =.Global._nonce
    docAPI:
      store:
        api: cd
        dataIn: medicalLicense.document
        dataOut: AddLocation.medicalLicense.resp
        subtype:
          mediaType: ""
      delete:
        api: dx
        dataIn: AddLocation.medicalLicense.deleteReq
      get:
        .DocAPI.get: ""
        dataIn: medicalLicense.docIn
        dataOut: AddLocation.medicalLicense.getRes
  formData:
    sharedDeaDoc: ""
    controlDeaPhotoTag: "block"
    controlBusinessPopUp: "0"
    controlMedical: "block"
    controlBusiness: "none"
    controlFacilityName: ""
    controlBusinessName: ""
    controlFacilityId: ""
    controlBusinessId: ""
    businessId: ""
    medical:
      - name: Medical Facility
      - name: Pharmacy
      - name: Medical Supplier
      - name: Image Center
      - name: Lab
    business:
      - name: Employer
      - name: Law Office
      - name: Insurance
      - name: Business General
    judgeFillinAll:
      - key: =..location.vertex.name.basicInfo.businessType
        value: Business Type
      - key: =..location.vertex.name.basicInfo.businessType
        value: Business Type
    number: ""
    fileSize: ""
    flag: false
    addressDetail: ""
    businessType: "Medical Facility"
    bussinessHoursResult: []
    Date:
      FromDay: ""
      ToDay: ""
      FromHour: ""
      ToHour: ""
      dayConcat: ""
      HourConcat: ""
      concat: ""
      # result: ""
    isCheckoutColor: false
    specBtnColor: "0xc1c1c1"
    bussinessHours: []
    websiteHeader:
      - https://
      - http://
    countryCode: "+1"
    phoneNumber: ""
    webReqHeader: "https://"
    website: ""
    errorArr: []
  local: {}     
  components:
    - type: view
      style:
        width: '1'
        height: '1'
        margin: auto
      children:
        - .SideMenuBar:
          children:
            - .aitLogo:
            - .MenuBar:
        - .TopBar:
          style:
            left: "0.16"
            marginTop: "0"
            height: "0.063"
            width: "0.84"
        - type: view
          style:
            backgroundColor: "0xf4f8fa"
            width: "0.84"
            height: "0.937"
            left: "0.16"
            top: "0.063"
          children:
            - .GotoBack:
              style:
                top: "0.02"
              onClick:
                - actionType: builtIn
                  funcName: goBack
                  reload: true
            - type: view
              style:
                left: "0.021"
                top: "0.023"
                width: "0.08112"
                backgroundColor: "0x005795"
                boxSizing: border-box
                textAlign:
                  x: center
                  y: center
                border:
                  style: "5"
                borderTopLeftRadius: "7px"
                borderTopRightRadius: "7px"
                height: "0.04413"
                display: inline-block
              children:
                - type: image
                  path: addCircle.svg
                  style:
                    marginTop: "0.013"
                    width: "0.0104"
                    # height: "0.0184"
                    display: inline-block
                - type: label
                  text: Add Location
                  style:
                    marginTop: "0.013"
                    fontWeight: "600"
                    fontSize: .Nfont.nf2
                    display: inline-block
                    marginLeft: "0.004"
                    color: "0xffffff"
            - .ContentBar:
              style:
                marginTop: "0.06256"
                backgroundColor: "0xffffff"
                width: "0.82"
                height: "0.85594"
                borderRadius: "6"
                border:
                  style: "3"
                borderColor: "0xffffff"
                boxSizing: border-box
                zIndex: "2"
              viewTag: ContentTag
              children:
                - type: view
                  style:
                    marginTop: "0.016"
                    left: "0.056"
                    width: "0.70252"
                    height: "0.81512"
                    border:
                      style: "5"
                    borderColor: "0x333333"
                    # backgroundColor: "0xff000033"       
                  children:
                    - .MedBtnWithImg:
                      btnText: "Save"
                      btnImg: save.svg
                      onClick:
                        # 1 弹出loading
                        # - actionType: popUp
                        #   popUpView: uploading 
                        # 查询 businessType 并输出到 location.vertex.subtype
                        - actionType: evalObject
                          object:
                            - =.builtIn.array.getByKey:
                                dataIn:
                                  array: =.SelectData.businessCat
                                  key1: "value"
                                  value: =..location.vertex.name.basicInfo.businessType
                                  key2: "id"
                                dataOut: AddLocation.location.vertex.subtype
                        - actionType: evalObject
                          object:
                            # # 拼接location
                            # - =.builtIn.string.concat:
                            #     dataIn:
                            #       - =..location.vertex.name.basicInfo.addressFirstLine
                            #       - ", "
                            #       - =..location.vertex.name.basicInfo.city
                            #       - ", "
                            #       - =..location.vertex.name.basicInfo.state
                            #       - " "
                            #       - =..location.vertex.name.basicInfo.zipCode
                            #     dataOut: AddLocation.formData.location
                            # 拼接
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..location.vertex.name.basicInfo.addressSecondLine
                                      string2: ""
                                - =.builtIn.string.concat:
                                    dataIn:
                                      - =..location.vertex.name.basicInfo.addressFirstLine
                                      - ", "
                                      - =..location.vertex.name.basicInfo.city
                                      - ", "
                                      - =..location.vertex.name.basicInfo.state
                                      - " "
                                      - =..location.vertex.name.basicInfo.zipCode
                                    dataOut: AddLocation.location.vertex.name.basicInfo.location
                                - =.builtIn.string.concat:
                                    dataIn:
                                      - =..location.vertex.name.basicInfo.addressFirstLine
                                      - ", "
                                      - =..location.vertex.name.basicInfo.addressSecondLine
                                      - ", "
                                      - =..location.vertex.name.basicInfo.city
                                      - ", "
                                      - =..location.vertex.name.basicInfo.state
                                      - " "
                                      - =..location.vertex.name.basicInfo.zipCode
                                    dataOut: AddLocation.location.vertex.name.basicInfo.location
                            # 没有 ..formData.location
                            - =.builtIn.search.transformGeo:
                                dataIn:
                                  query: =.AddLocation.location.vertex.name.basicInfo.location
                                dataOut: AddLocation.location.vertex.name.basicInfo.geoCode
                            # 拼接
                            - =.builtIn.string.concat:
                                dataIn:
                                  - =..location.vertex.name.basicInfo.medicalFacilityName
                                  - "-"
                                  - =..location.vertex.name.basicInfo.location
                                dataOut: AddLocation.location.vertex.name.basicInfo.fullInfo

                            - ..location.vertex.uid@: =..location.vertex.name.basicInfo.locationID
                            # - =.builtIn.string.concat:
                            #     dataIn:
                            #       - =..location.vertex.name.basicInfo.addressFirstLine
                            #       - ","
                            #       - =..location.vertex.name.basicInfo.city
                            #       - " "
                            #       - =..location.vertex.name.basicInfo.state
                            #       - " "
                            #       - =..location.vertex.name.basicInfo.zipCode
                            #     dataOut: AddLocation.location.vertex.name.basicInfo.fullAddress
                            # - =.builtIn.search.transformGeo:
                            #     dataIn: 
                            #       query: =..location.vertex.name.basicInfo.fullAddress
                            #     dataOut: AddLocation.location.vertex.name.basicInfo.geoCode

                        - actionType: evalObject
                          object:
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..location.vertex.name.basicInfo.largeType
                                      string2: "M"
                                - actionType: evalObject
                                  object:
                                    - if:
                                        - =.builtIn.string.judgeFillinAll:
                                            dataIn:
                                              - =..location.vertex.name.basicInfo.businessType
                                              - =..location.vertex.name.basicInfo.medicalFacilityName
                                              - =..location.vertex.name.basicInfo.locationID
                                              - =..formData.phoneNumber
                                              - =..location.vertex.name.basicInfo.addressFirstLine
                                              - =..location.vertex.name.basicInfo.city
                                              - =..location.vertex.name.basicInfo.state
                                              - =..location.vertex.name.basicInfo.zipCode
                                              - =..location.vertex.name.basicInfo.businessLicense
                                              - =..location.vertex.name.basicInfo.businessLicenseCity
                                              - =..location.vertex.name.basicInfo.businessLicenseState
                                              - =..location.vertex.name.basicInfo.licenseExpirationDate
                                              - =..location.vertex.name.basicInfo.NPI
                                              - =..location.vertex.name.basicInfo.tin
                                              - =..formData.businessId
                                        - actionType: popUpDismiss
                                          popUpView: uploading
                                        - continue
                                - actionType: evalObject
                                  object:
                                    - ..location.vertex.name.basicInfo.NPI: ""
                                    - ..location.vertex.name.basicInfo.DEANumber: ""
                                    - if:
                                        - =.builtIn.string.judgeFillinAll:
                                            dataIn:
                                              - =..location.vertex.name.basicInfo.businessType
                                              - =..location.vertex.name.basicInfo.medicalFacilityName
                                              - =..location.vertex.name.basicInfo.locationID
                                              - =..formData.phoneNumber
                                              - =..location.vertex.name.basicInfo.addressFirstLine
                                              - =..location.vertex.name.basicInfo.city
                                              - =..location.vertex.name.basicInfo.state
                                              - =..location.vertex.name.basicInfo.zipCode
                                              - =..location.vertex.name.basicInfo.businessLicense
                                              - =..location.vertex.name.basicInfo.businessLicenseCity
                                              - =..location.vertex.name.basicInfo.businessLicenseState
                                              - =..location.vertex.name.basicInfo.licenseExpirationDate
                                              - =..location.vertex.name.basicInfo.tin
                                              - =..formData.businessId
                                        - actionType: popUpDismiss
                                          popUpView: uploading
                                        - continue
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..location.vertex.name.basicInfo.largeType
                                      string2: "M"
                                - actionType: evalObject
                                  object:
                                    - if:
                                        - =.builtIn.string.judgeFillinAll:
                                            dataIn:
                                              - =..location.vertex.name.basicInfo.businessType
                                              - =..location.vertex.name.basicInfo.medicalFacilityName
                                              - =..location.vertex.name.basicInfo.locationID
                                              - =..formData.phoneNumber
                                              - =..location.vertex.name.basicInfo.addressFirstLine
                                              - =..location.vertex.name.basicInfo.city
                                              - =..location.vertex.name.basicInfo.state
                                              - =..location.vertex.name.basicInfo.zipCode
                                              - =..location.vertex.name.basicInfo.businessLicense
                                              - =..location.vertex.name.basicInfo.businessLicenseCity
                                              - =..location.vertex.name.basicInfo.businessLicenseState
                                              - =..location.vertex.name.basicInfo.licenseExpirationDate
                                              - =..location.vertex.name.basicInfo.NPI
                                              - =..location.vertex.name.basicInfo.tin
                                              - =..formData.businessId
                                        - =.builtIn.array.judgeKeyAndReturnValue:
                                            dataIn:
                                              objArr:
                                                - key: "Business Category"
                                                  value: =..location.vertex.name.basicInfo.businessType
                                                - key: "Location Name"
                                                  value: =..location.vertex.name.basicInfo.medicalFacilityName
                                                - key: "Location ID"
                                                  value: =..location.vertex.name.basicInfo.locationID
                                                - key: "Main Phone"
                                                  value: =..formData.phoneNumber
                                                - key: "Address Line"
                                                  value: =..location.vertex.name.basicInfo.addressFirstLine
                                                - key: "City"
                                                  value: =..location.vertex.name.basicInfo.city
                                                - key: "State"
                                                  value: =..location.vertex.name.basicInfo.state
                                                - key: "Zip Code"
                                                  value: =..location.vertex.name.basicInfo.zipCode
                                                - key: "Business License #"
                                                  value: =..location.vertex.name.basicInfo.businessLicense
                                                - key: "Business License City"
                                                  value: =..location.vertex.name.basicInfo.businessLicenseCity
                                                - key: "Business License State"
                                                  value: =..location.vertex.name.basicInfo.businessLicenseState
                                                - key: "License Expiration Date"
                                                  value: =..location.vertex.name.basicInfo.licenseExpirationDate
                                                - key: "NPI #"
                                                  value: =..location.vertex.name.basicInfo.NPI
                                                - key: "TIN(EIN)"
                                                  value: =..location.vertex.name.basicInfo.tin
                                                - key: "Business License Image"
                                                  value: =..formData.businessId
                                              pathKey: "key"
                                              pathValue: "value"
                                              valueArr: [ "", "Select" ]
                                            dataOut: AddLocation.formData.errorArr
                                        - continue
                                - actionType: evalObject
                                  object:
                                    - ..location.vertex.name.basicInfo.NPI: ""
                                    - ..location.vertex.name.basicInfo.DEANumber: ""
                                    - if:
                                        - =.builtIn.string.judgeFillinAll:
                                            dataIn:
                                              - =..location.vertex.name.basicInfo.businessType
                                              - =..location.vertex.name.basicInfo.medicalFacilityName
                                              - =..location.vertex.name.basicInfo.locationID
                                              - =..formData.phoneNumber
                                              - =..location.vertex.name.basicInfo.addressFirstLine
                                              - =..location.vertex.name.basicInfo.city
                                              - =..location.vertex.name.basicInfo.state
                                              - =..location.vertex.name.basicInfo.zipCode
                                              - =..location.vertex.name.basicInfo.businessLicense
                                              - =..location.vertex.name.basicInfo.businessLicenseCity
                                              - =..location.vertex.name.basicInfo.businessLicenseState
                                              - =..location.vertex.name.basicInfo.licenseExpirationDate
                                              - =..location.vertex.name.basicInfo.tin
                                              - =..formData.businessId
                                        - =.builtIn.array.judgeKeyAndReturnValue:
                                            dataIn:
                                              objArr:
                                                - key: "Business Category"
                                                  value: =..location.vertex.name.basicInfo.businessType
                                                - key: "Location Name"
                                                  value: =..location.vertex.name.basicInfo.medicalFacilityName
                                                - key: "Location ID"
                                                  value: =..location.vertex.name.basicInfo.locationID
                                                - key: "Main Phone"
                                                  value: =..formData.phoneNumber
                                                - key: "Address Line"
                                                  value: =..location.vertex.name.basicInfo.addressFirstLine
                                                - key: "City"
                                                  value: =..location.vertex.name.basicInfo.city
                                                - key: "State"
                                                  value: =..location.vertex.name.basicInfo.state
                                                - key: "Zip Code"
                                                  value: =..location.vertex.name.basicInfo.zipCode
                                                - key: "Business License #"
                                                  value: =..location.vertex.name.basicInfo.businessLicense
                                                - key: "Business License City"
                                                  value: =..location.vertex.name.basicInfo.businessLicenseCity
                                                - key: "Business License State"
                                                  value: =..location.vertex.name.basicInfo.businessLicenseState
                                                - key: "License Expiration Date"
                                                  value: =..location.vertex.name.basicInfo.licenseExpirationDate
                                                - key: "TIN(EIN)"
                                                  value: =..location.vertex.name.basicInfo.tin
                                                - key: "Business License Image"
                                                  value: =..formData.businessId
                                              pathKey: "key"
                                              pathValue: "value"
                                              valueArr: [ "", "Select" ]
                                            dataOut: AddLocation.formData.errorArr
                                        - continue
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: errorView
                        - actionType: evalObject
                          object:
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..location.vertex.name.basicInfo.largeType
                                      string2: "M"
                                - actionType: evalObject
                                  object:
                                    - if:
                                        - =.builtIn.string.judgeFillinAll:
                                            dataIn:
                                              - =..location.vertex.name.basicInfo.businessType
                                              - =..location.vertex.name.basicInfo.medicalFacilityName
                                              - =..location.vertex.name.basicInfo.locationID
                                              - =..formData.phoneNumber
                                              - =..location.vertex.name.basicInfo.addressFirstLine
                                              - =..location.vertex.name.basicInfo.city
                                              - =..location.vertex.name.basicInfo.state
                                              - =..location.vertex.name.basicInfo.zipCode
                                              - =..location.vertex.name.basicInfo.businessLicense
                                              - =..location.vertex.name.basicInfo.businessLicenseCity
                                              - =..location.vertex.name.basicInfo.businessLicenseState
                                              - =..location.vertex.name.basicInfo.licenseExpirationDate
                                              - =..location.vertex.name.basicInfo.NPI
                                              - =..location.vertex.name.basicInfo.tin
                                              - =..formData.businessId
                                        - actionType: popUp
                                          popUpView: errorView
                                          wait: true
                                        - continue
                                - actionType: evalObject
                                  object:
                                    - ..location.vertex.name.basicInfo.NPI: ""
                                    - ..location.vertex.name.basicInfo.DEANumber: ""
                                    - if:
                                        - =.builtIn.string.judgeFillinAll:
                                            dataIn:
                                              - =..location.vertex.name.basicInfo.businessType
                                              - =..location.vertex.name.basicInfo.medicalFacilityName
                                              - =..location.vertex.name.basicInfo.locationID
                                              - =..formData.phoneNumber
                                              - =..location.vertex.name.basicInfo.addressFirstLine
                                              - =..location.vertex.name.basicInfo.city
                                              - =..location.vertex.name.basicInfo.state
                                              - =..location.vertex.name.basicInfo.zipCode
                                              - =..location.vertex.name.basicInfo.businessLicense
                                              - =..location.vertex.name.basicInfo.businessLicenseCity
                                              - =..location.vertex.name.basicInfo.businessLicenseState
                                              - =..location.vertex.name.basicInfo.licenseExpirationDate
                                              - =..location.vertex.name.basicInfo.tin
                                              - =..formData.businessId
                                        - actionType: popUp
                                          popUpView: errorView
                                          wait: true
                                        - continue
                            - =.builtIn.string.concat:
                                dataIn:
                                  - =..formData.countryCode
                                  - " "
                                  - =..formData.phoneNumber
                                dataOut: AddLocation.location.vertex.name.basicInfo.phoneNumber
                            - =.builtIn.string.concat:
                                dataIn:
                                  - =..formData.webReqHeader
                                  - =..formData.website
                                dataOut: AddLocation.location.vertex.name.basicInfo.website
                            - .Global.jwt.edge.bvid@: =.Global.currentFacility.id
                            - =.Global.jwt.edgeAPI.store: ""
                            # 建立点
                            - =..location.vertexAPI.store: ""
                        - actionType: evalObject
                          object:
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..location.resp.code
                                      string2: -1
                                - actionType: popUpDismiss
                                  popUpView: uploading
                                - continue
                        - actionType: evalObject
                          object:
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..location.resp.code
                                      string2: -1
                                - actionType: popUp
                                  popUpView: locationIDTag
                                  wait: true
                                - continue
                            - ..local.id@: =..location.resp.data.vertex.id
                            - ..local.medicalFacilityName@: =..location.resp.data.vertex.name.basicInfo.medicalFacilityName
                            - ..local.phoneNumber@: =..location.resp.data.vertex.name.basicInfo.phoneNumber
                            - ..local.location@: =..location.resp.data.vertex.name.basicInfo.location
                            - ..local.locationID@: =..location.resp.data.vertex.name.basicInfo.locationID
                            - =.builtIn.array.add:
                                # 把新建的这个location的相关信息都放入allLocation里
                                dataIn:
                                  object: =..locationAll.document.name.data.allLocation
                                  value: =..local
                            - =.builtIn.array.add:
                                # 把新建的这个location的相关信息都放入Global.locationAll里
                                dataIn:
                                  object: =.Global.locationAll
                                  value: =..local
                            # 建立location后的逻辑
                            - =..locationAll.docAPI.store: ""
                            # 切为location环境下
                            - .Global.jwt.edge.bvid@: =..location.resp.data.vertex.id
                            - =.Global.jwt.edgeAPI.store: ""

                            - if:
                                - =..businessLogo.resp.doc.id
                                - =.builtIn.ecos.shareDoc:
                                    dataIn:
                                      sourceDoc: =..businessLogo.document
                                      # targetEdgeID: =.Global.rootRoomInfo.edge.id
                                      targetEdgeID: =..location.resp.data.vertex.deat.rnb64ID
                                - continue
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..location.vertex.name.basicInfo.largeType
                                      string2: "B"
                                - continue
                                - actionType: evalObject
                                  object:
                                    - if:
                                        - =..dEA.resp.doc.id
                                        - =.builtIn.ecos.shareDoc:
                                            dataIn:
                                              sourceDoc: =..dEA.document
                                              # targetEdgeID: =.Global.rootRoomInfo.edge.id
                                              targetEdgeID: =..location.resp.data.vertex.deat.rnb64ID
                                        - continue

                            - if:
                                - =..medicalLicense.resp.doc.id
                                - =.builtIn.ecos.shareDoc:
                                    dataIn:
                                      sourceDoc: =..medicalLicense.document
                                      # targetEdgeID: =.Global.rootRoomInfo.edge.id
                                      targetEdgeID: =..location.resp.data.vertex.deat.rnb64ID
                                - continue
                            # - if: 
                            #   - =.builtIn.string.equal:
                            #       dataIn:
                            #         string1: =..location.vertex.name.basicInfo.largeType
                            #         string2: "B"
                            #   - actionType: evalObject
                            #     object: 
                            #       - if: 
                            #         - =..dEA.resp.doc.id
                            #         - ..dEA.deleteReq.id@: =..formData.sharedDeaDoc.doc.id
                            #         - continue
                            #       - =..dEA.docAPI.delete: ""
                            #   - continue
                        - actionType: evalObject
                          object:
                            - ..businessLogo.docIn.id@: =..location.resp.data.vertex.deat.rnb64ID
                            - =..businessLogo.docAPI.get: ""
                            # - .Global.jwt.edge.bvid@: =..location.resp.data.vertex.id
                            # - =.Global.jwt.edgeAPI.store: ""
                            - ..locationProfile.document.name.data.basicInfo@: =..location.vertex.name.basicInfo
                            - =.builtIn.string.concat:
                                dataIn:
                                  - "search.aitmed.com/"
                                  - =..locationProfile.document.name.data.basicInfo.locationID
                                dataOut: AddLocation.locationProfile.document.name.data.basicInfo.locationLink
                            - if:
                                - =..businessLogo.docResp.doc.0.id
                                - ..locationProfile.document.name.data.basicInfo.businessLogo@: =..businessLogo.docResp.doc.0.id
                                - ..locationProfile.document.name.data.basicInfo.businessLogo@: ""
                            - ..locationProfile.document.eid@: =..location.resp.data.vertex.deat.rnb64ID
                            - =..locationProfile.docAPI.store: ""
                            - .Global.formData.locationId@: =..location.resp.data.vertex.id # to display new account management id

                        - actionType: evalObject
                          object:
                            - actionType: popUpDismiss
                              popUpView: uploading
                        - actionType: popUp
                          popUpView: successfullTag
                      style:
                        left: "0.6344"
                        top: "0"
                        width: "0.06812"
                    - type: label
                      text: "Basic Info"
                      style:
                        fontSize: .Nfont.nf5
                        fontFamily: "Roboto"
                        color: "0x333333"
                        fontWeight: "600"
                        width: "0.1"
                    - type: view
                      style:
                        height: auto
                        fontWeight: '500'
                        width: "0.3"
                        marginTop: "0.02"
                      children:
                        - .AddFacilityLabelNewUI:
                          textBoard:
                            - text: "Business Category"
                            - text: "&nbsp;*"
                              color: "0xff0000"
                          style:
                            display: inline-block
                            fontSize: .Nfont.nf4
                            fontWeight: "500"
                            marginTop: "0.006"
                            marginRight: "0.015"
                        - type: view
                          style:
                            display: inline-block
                          onClick:
                            - actionType: evalObject
                              object:
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..formData.controlBusinessPopUp
                                          string2: "0"
                                    - ..formData.controlBusinessPopUp@: "1"
                                    - ..formData.controlBusinessPopUp@: "0"
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..formData.controlBusinessPopUp
                                          string2: "0"
                                    - actionType: popUpDismiss
                                      popUpView: businessPopUp
                                    - actionType: popUp
                                      popUpView: businessPopUp
                          children:
                            - type: image
                              path: downArrowDeepGray.svg
                              style:
                                width: "0.012"
                                top: "0.008"
                                zIndex: "5"
                                left: "0.132"
                            - type: label
                              viewTag: businessTag
                              dataKey: location.vertex.name.basicInfo.businessType
                              required: "true"
                              style:
                                width: "0.15"
                                height: "0.034"
                                backgroundColor: "0xffffff"
                                borderWidth: "1"
                                lineHeight: "3.4vh"
                                fontSize: .Nfont.nf3
                                textIndent: 0.5em
                                border:
                                  style: "3"
                                borderColor: "0xdededf"
                                borderRadius: "3"

                    - type: label
                      text: "Profile Photo"
                      style:
                        marginTop: "0.02"
                        color: "0x333333"
                        fontSize: .Nfont.nf2
                        fontWeight: "600"
                    - type: view
                      style:
                        marginTop: "0.01"
                        width: "0.70252"
                        height: "0.6578"
                        # backgroundColor: "0x0000ff33"
                      children:
                        - type: view
                          style:
                            width: "0.70252"
                            height: "0.10"
                            display: flex
                            justifyContent: center
                            alignItems: center
                            margin: auto
                          children:
                            - type: view
                              style:
                                width: "0.70252"
                                height: "0.1"
                                display: flex
                                justifyContent: flex-start
                                alignItems: center
                              children:
                                - type: view
                                  style:
                                    height: "0.10"
                                    display: flex
                                    justifyContent: flex-start
                                    alignItems: center
                                    marginRight: "0.01"
                                  children:
                                    - type: image
                                      contentType: file
                                      path: addLoc.svg # squareDefaultPicture.svg
                                      path=func: .builtIn.utils.prepareDocToPath
                                      dataKey: businessLogo.document.id
                                      viewTag: profilePhotoTag
                                      style:
                                        width: "0.0546"
                                        height: "0.0966"
                                        border:
                                          style: "5"
                                        borderRadius: "6"
                                        backgroundColor: "0xf0f2f4"
                                      onClick:
                                        - actionType: openPhotoLibrary
                                          dataObject: BLOB
                                          dataKey: AddLocation.businessLogo.document.name.data
                                        - actionType: evalObject
                                          object:
                                            - if:
                                                - =.builtIn.math.lessthanSize:
                                                    dataIn:
                                                      object: =..businessLogo.document.name.data # object
                                                      key: 2 #mb
                                                - ..formData.flag@: false
                                                - actionType: evalObject
                                                  object:
                                                    - =.builtIn.utils.getFileSize:
                                                        dataIn:
                                                          object: =..businessLogo.document.name.data
                                                          units: mb
                                                        dataOut: AddLocation.formData.fileSize
                                                    - =.builtIn.string.concat:
                                                        dataIn:
                                                          - "Your file size:"
                                                          - =..formData.fileSize
                                                          - "Mb"
                                                        dataOut: Global.formData.fileSize
                                                    - ..formData.flag@: true
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: overSize
                                        - actionType: evalObject
                                          object:
                                            - if:
                                                - =..formData.flag
                                                - actionType: popUp
                                                  popUpView: overSize
                                                  wait: true
                                                - continue
                                        - actionType: popUp
                                          popUpView: uploading
                                        - actionType: evalObject
                                          object:
                                            - .Global.jwt.edge.bvid@: =.Global.currentUser.vertex.id
                                            - =.Global.jwt.edgeAPI.store: ""
                                            - =..businessLogo.docAPI.store: ""
                                        - actionType: evalObject
                                          object:
                                            .Global._nonce@:
                                              =.builtIn.math.random: ""
                                        - actionType: evalObject
                                          object:
                                            - ..businessLogo.document@: =..businessLogo.resp.doc
                                        - actionType: popUpDismiss
                                          popUpView: uploading
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: pictureViewTag
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: profilePhotoTag
                                - type: view
                                  viewTag: facilityNameTag
                                  style:
                                    marginLeft: "0.004"
                                    height: "0.066"
                                    display: flex
                                    justifyContent: center
                                    flexDirection: column
                                    marginRight: "0.01"
                                  children:
                                    - type: view
                                      style:
                                        height: "0.02533"
                                        display: flex
                                        alignItems: center
                                      children:
                                        - .EditTableText:
                                          text: "Location Name"
                                        - .EditTableStar:
                                    - .EditTableLabel:
                                      style:
                                        width: "0.1"
                                      dataKey: location.vertex.name.basicInfo.medicalFacilityName
                                      onTextChange:
                                        - actionType: evalObject
                                          object:
                                            - =.builtIn.string.generateID:
                                                dataIn:
                                                  facilityID: =.Global.currentFacility.name.basicInfo.locationID
                                                  locationID: =..location.vertex.name.basicInfo.medicalFacilityName
                                                  roomID: ""
                                                dataOut: AddLocation.location.vertex.name.basicInfo.locationID
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: facilityIDView

                                - type: view
                                  viewTag: facilityIDView
                                  style:
                                    height: "0.066"
                                    display: flex
                                    justifyContent: center
                                    flexDirection: column
                                    marginRight: "0.01"
                                  children:
                                    - type: view
                                      style:
                                        height: "0.02533"
                                        display: flex
                                        alignItems: center
                                      children:
                                        - .EditTableText:
                                          text: "Location ID"
                                        - .EditTableStar:
                                    - .EditTableLabel:
                                      dataKey: location.vertex.name.basicInfo.locationID
                                      style:
                                        width: "0.075"
                                - type: view
                                  style:
                                    height: "0.066"
                                    display: flex
                                    justifyContent: center
                                    alignItems: flex-start
                                    flexDirection: column
                                    marginRight: "0.01"
                                  children:
                                    - type: view
                                      style:
                                        height: "0.02533"
                                        display: flex
                                        alignItems: center
                                        justifyContent: flex-start
                                      children:
                                        - .EditTableText:
                                          text: "Main Phone #"
                                        - .EditTableStar:
                                    - type: view
                                      style:
                                        height: auto
                                        display: flex
                                        justifyContent: center
                                      children:
                                        - type: select
                                          contentType: countryCode
                                          dataKey: formData.countryCode
                                          options: .CountryCode
                                          required: "true"
                                          style:
                                            width: "0.035"
                                            height: "0.0405"
                                            backgroundColor: "0xffffff"
                                            borderWidth: "1"
                                            marginRight: "0.008"
                                            border:
                                              style: "3"
                                              color: "0xdededf"
                                            borderRadius: "3"
                                        - .EditTableLabel:
                                          dataKey: formData.phoneNumber # location.vertex.name.basicInfo.phoneNumber
                                          viewTag: facilityIDView
                                          style:
                                            width: "0.1"
                                - type: view
                                  style:
                                    height: "0.066"
                                    display: flex
                                    justifyContent: center
                                    alignItems: flex-start
                                    flexDirection: column
                                    marginRight: "0.01"
                                  children:
                                    - type: view
                                      style:
                                        height: "0.02533"
                                        display: flex
                                        alignItems: center
                                        justifyContent: flex-start
                                      children:
                                        - .EditTableText:
                                          text: "Email"
                                    - .EditTableLabel:
                                      dataKey: location.vertex.name.basicInfo.email
                                      viewTag: facilityIDView
                                      style:
                                        width: "0.1065"
                                - type: view
                                  style:
                                    height: "0.066"
                                    display: flex
                                    justifyContent: center
                                    alignItems: flex-start
                                    flexDirection: column
                                  children:
                                    - type: view
                                      style:
                                        height: "0.02533"
                                        display: flex
                                        alignItems: center
                                        justifyContent: flex-start
                                      children:
                                        - .EditTableText:
                                          text: "Website"
                                    - type: view
                                      style:
                                        height: auto
                                        display: flex
                                        justifyContent: center
                                      children:
                                        - type: select
                                          dataKey: formData.webReqHeader
                                          options: ..formData.websiteHeader
                                          required: "true"
                                          style:
                                            width: "0.041"
                                            height: "0.0405"
                                            backgroundColor: "0xffffff"
                                            marginRight: "0.008"
                                            borderWidth: "1"
                                            border:
                                              style: "3"
                                              color: "0xdededf"
                                            borderRadius: "3"
                                        - .EditTableLabel:
                                          dataKey: formData.website # location.vertex.name.basicInfo.website
                                          viewTag: facilityIDView
                                          style:
                                            width: "0.123"
                        - type: view
                          style:
                            width: "0.70252"
                            marginTop: "0.002"
                            display: flex
                            alignItems: center
                            justifyContent: start
                            flexDirection: column
                          children:
                            # Address Line
                            - type: view
                              style:
                                width: "0.70252"
                                height: "0.066"
                                display: flex
                                justifyContent: flex-start
                                alignItems: center
                                margin: auto
                                marginTop: "0.02"
                              children:
                                - type: view
                                  style:
                                    height: "0.066"
                                    display: flex
                                    justifyContent: center
                                    marginRight: "0.01"
                                    flexDirection: column
                                  children:
                                    - type: view
                                      style:
                                        height: "0.02533"
                                        display: flex
                                        alignItems: center
                                      children:
                                        - .EditTableText:
                                          text: "Address Line"
                                        - .EditTableStar:
                                    - .EditTableLabel:
                                      dataKey: location.vertex.name.basicInfo.addressFirstLine
                                      style:
                                        width: "0.168"
                                # Address Second Line
                                - type: view
                                  style:
                                    height: "0.066"
                                    marginRight: "0.01"
                                    display: flex
                                    justifyContent: center
                                    flexDirection: column
                                  children:
                                    - type: view
                                      style:
                                        height: "0.02533"
                                        display: flex
                                        alignItems: center
                                      children:
                                        - .EditTableText:
                                          text: "Address Second Line"
                                    - .EditTableLabel:
                                      dataKey: location.vertex.name.basicInfo.addressSecondLine
                                      style:
                                        width: "0.168"
                                # City
                                - type: view
                                  style:
                                    height: "0.066"
                                    marginRight: "0.01"
                                    display: flex
                                    justifyContent: center
                                    flexDirection: column
                                  children:
                                    - type: view
                                      style:
                                        height: "0.02533"
                                        display: flex
                                        alignItems: center
                                      children:
                                        - .EditTableText:
                                          text: "City"
                                        - .EditTableStar:
                                    - .EditTableLabel:
                                      dataKey: location.vertex.name.basicInfo.city
                                      style:
                                        width: "0.07852"
                                # County
                                - type: view
                                  style:
                                    height: "0.066"
                                    display: flex
                                    justifyContent: center
                                    marginRight: "0.01"
                                    flexDirection: column
                                  children:
                                    - type: view
                                      style:
                                        height: "0.02533"
                                        display: flex
                                        alignItems: center
                                      children:
                                        - .EditTableText:
                                          text: "County"
                                    - .EditTableLabel:
                                      dataKey: location.vertex.name.basicInfo.county
                                      style:
                                        width: "0.07852"
                                # State*
                                - type: view
                                  style:
                                    height: "0.066"
                                    display: flex
                                    justifyContent: center
                                    flexDirection: column
                                    marginRight: "0.01"
                                    alignItems: flex-start
                                  children:
                                    - type: view
                                      style:
                                        height: "0.02533"
                                        display: flex
                                        alignItems: center
                                        justifyContent: flex-start
                                      children:
                                        - .EditTableText:
                                          text: "State"
                                        - .EditTableStar:
                                    - type: select
                                      dataKey: location.vertex.name.basicInfo.state # formData.countryCode : inputValue
                                      options: .SelectData.state
                                      required: "true"
                                      style:
                                        width: "0.07852"
                                        height: "0.0405"
                                        textIndent: "0.5em"
                                        border:
                                          style: "3"
                                        borderColor: "0xdedede"
                                        fontSize: .Nfont.nf1
                                        boxSizing: border-box
                                        borderRadius: "4"
                                        color: "0x333333"
                                # Zip Code*
                                - type: view
                                  style:
                                    height: "0.066"
                                    display: flex
                                    justifyContent: center
                                    alignItems: flex-start
                                    flexDirection: column
                                  children:
                                    - type: view
                                      style:
                                        height: "0.02533"
                                        display: flex
                                        alignItems: center
                                      children:
                                        - .EditTableText:
                                          text: "Zip Code"
                                        - .EditTableStar:
                                    - .EditTableLabel:
                                      dataKey: location.vertex.name.basicInfo.zipCode
                                      style:
                                        width: "0.083"
                            - type: view
                              style:
                                marginTop: "0.022"
                                width: "0.70252"
                                height: "0.066"
                                display: flex
                                justifyContent: flex-start
                                alignItems: center
                              children:
                                - type: view
                                  style:
                                    height: "0.066"
                                    display: flex
                                    justifyContent: center
                                    flexDirection: column
                                    marginRight: "0.01"
                                  children:
                                    - type: view
                                      style:
                                        height: "0.02533"
                                        display: flex
                                        alignItems: center
                                      children:
                                        - .EditTableText:
                                          text: "Business License #"
                                        - .EditTableStar:
                                    - .EditTableLabel:
                                      dataKey: location.vertex.name.basicInfo.businessLicense
                                      style:
                                        width: "0.168"
                                # City *
                                - type: view
                                  style:
                                    height: "0.066"
                                    display: flex
                                    justifyContent: center
                                    marginRight: "0.01"
                                    flexDirection: column
                                  children:
                                    - type: view
                                      style:
                                        height: "0.02533"
                                        display: flex
                                        alignItems: center
                                      children:
                                        - .EditTableText:
                                          text: "City"
                                        - .EditTableStar:
                                    - .EditTableLabel:
                                      dataKey: location.vertex.name.basicInfo.businessLicenseCity
                                      style:
                                        width: "0.168"
                                # State*
                                - type: view
                                  style:
                                    height: "0.066"
                                    display: flex
                                    marginRight: "0.01"
                                    justifyContent: center
                                    flexDirection: column
                                  children:
                                    - type: view
                                      style:
                                        height: "0.02533"
                                        display: flex
                                        alignItems: center
                                      children:
                                        - .EditTableText:
                                          text: "State"
                                        - .EditTableStar:
                                    - type: select
                                      dataKey: location.vertex.name.basicInfo.businessLicenseState
                                      options: .SelectData.state
                                      required: "true"
                                      isEditable: false
                                      style:
                                        width: "0.168"
                                        height: "0.0405"
                                        textIndent: "0.5em"
                                        border:
                                          style: "3"
                                        borderColor: "0xdedede"
                                        fontSize: .Nfont.nf1
                                        boxSizing: border-box
                                        borderRadius: "4"
                                        color: "0x333333"
                                # License Expiration Date 
                                - type: view
                                  viewTag: selectStartAndEndTag
                                  style:
                                    height: "0.066"
                                    display: flex
                                    marginRight: "0.01"
                                    justifyContent: center
                                    alignItems: flex-start
                                    flexDirection: column
                                  children:
                                    - type: view
                                      style:
                                        height: "0.02533"
                                        display: flex
                                        alignItems: center
                                      children:
                                        - .EditTableText:
                                          text: "License Expiration Date"
                                        - .EditTableStar:
                                    - type: view
                                      onClick:
                                        - actionType: popUp
                                          popUpView: startDateTag
                                      style:
                                        height: "0.0405"
                                        border:
                                          style: "3"
                                        borderColor: "0xdedede"
                                        fontSize: .Nfont.nf1
                                        boxSizing: border-box
                                        borderRadius: "4"
                                        color: "0x333333"
                                        display: flex
                                        alignItems: center
                                        justifyContent: center
                                        alignContent: flex-start
                                        flexWrap: wrap
                                        flexDirection: column
                                      children:
                                        - .EditTableLabel:
                                          placeholder: "Select"
                                          isEditable: false
                                          dataKey: location.vertex.name.basicInfo.licenseExpirationDate
                                          style:
                                            backgroundColor: "0xffffff"
                                            width: "0.169"
                                            border:
                                              style: "5"
                                        - type: image
                                          path: calendarBlue.svg
                                          style:
                                            width: "0.008"
                                            top: "0.01"
                                            left: "0.15"

                            - type: view
                              viewTag: medicalTag
                              style:
                                display: ..formData.controlMedical
                              children:
                                - type: view
                                  style:
                                    marginTop: "0.02"
                                    width: "0.70252"
                                    height: "0.066"
                                    display: flex
                                    justifyContent: flex-start
                                    alignItems: center
                                  children:
                                    - type: view
                                      style:
                                        height: "0.066"
                                        display: flex
                                        justifyContent: center
                                        flexDirection: column
                                        marginRight: "0.01"
                                      children:
                                        - type: view
                                          style:
                                            height: "0.02533"
                                            display: flex
                                            alignItems: center
                                          children:
                                            - .EditTableText:
                                              text: "NPI #"
                                            - .EditTableStar:
                                        - .EditTableLabel:
                                          dataKey: location.vertex.name.basicInfo.NPI
                                          style:
                                            width: "0.078"
                                    # DEA
                                    - type: view
                                      style:
                                        height: "0.066"
                                        display: flex
                                        justifyContent: center
                                        alignItems: flex-start
                                        flexDirection: column
                                        marginRight: "0.01"
                                      children:
                                        - type: view
                                          style:
                                            height: "0.02533"
                                            display: flex
                                            alignItems: center
                                          children:
                                            - .EditTableText:
                                              text: "DEA #"
                                        - .EditTableLabel:
                                          dataKey: location.vertex.name.basicInfo.DEANumber
                                          style:
                                            width: "0.08"
                                    - type: view
                                      style:
                                        height: "0.066"
                                        display: flex
                                        justifyContent: center
                                        marginRight: "0.01"
                                        flexDirection: column
                                      children:
                                        - type: view
                                          style:
                                            height: "0.02533"
                                            display: flex
                                            alignItems: center
                                          children:
                                            - .EditTableText:
                                              text: "TIN(EIN)"
                                            - .EditTableStar:
                                        - .EditTableLabel:
                                          dataKey: location.vertex.name.basicInfo.tin
                                          style:
                                            width: "0.078"

                                    # Fax    
                                    - type: view
                                      style:
                                        height: "0.066"
                                        display: flex
                                        justifyContent: center
                                        marginRight: "0.01"
                                        flexDirection: column
                                      children:
                                        - type: view
                                          style:
                                            height: "0.02533"
                                            display: flex
                                            alignItems: center
                                          children:
                                            - .EditTableText:
                                              text: "Fax #"
                                            # - .EditTableStar:
                                        - .EditTableLabel:
                                          dataKey: location.vertex.name.basicInfo.fax
                                          style:
                                            width: "0.08"

                                    # Business Hours
                                    - type: view
                                      style:
                                        height: "0.066"
                                        display: flex
                                        justifyContent: center
                                        flexDirection: column
                                      children:
                                        - type: view
                                          style:
                                            height: "0.02533"
                                            display: flex
                                            alignItems: center
                                          children:
                                            - .EditTableText:
                                              text: "Business Hours"
                                        - type: view
                                          onClick:
                                            - actionType: popUp
                                              popUpView: businessHourTag
                                          style:
                                            height: "0.0405"
                                            border:
                                              style: "3"
                                            borderColor: "0xdedede"
                                            fontSize: .Nfont.nf1
                                            borderRadius: "4"
                                            color: "0x333333"
                                            display: flex
                                            alignItems: center
                                            justifyContent: center
                                            alignContent: flex-start
                                            flexWrap: wrap
                                            flexDirection: column
                                          children:
                                            - .EditTableLabel:
                                              placeholder: "Select"
                                              isEditable: false
                                              viewTag: businessHoursTag
                                              dataKey: location.vertex.name.basicInfo.businessHours
                                              style:
                                                backgroundColor: "0xffffff"
                                                width: "0.347"
                                                boxSizing: border-box
                                                border:
                                                  style: "5"
                                            - type: image
                                              path: circleClock.svg
                                              style:
                                                width: "0.0098"
                                                top: "0.01"
                                                left: "0.325"

                            - type: view
                              viewTag: businessViewTag
                              style:
                                display: ..formData.controlBusiness
                              children:
                                - type: view
                                  style:
                                    marginTop: "0.02"
                                    width: "0.70252"
                                    height: "0.066"
                                    display: flex
                                    justifyContent: flex-start
                                    alignItems: center
                                  children:
                                    - type: view
                                      style:
                                        height: "0.066"
                                        display: flex
                                        justifyContent: center
                                        marginRight: "0.01"
                                        flexDirection: column
                                      children:
                                        - type: view
                                          style:
                                            height: "0.02533"
                                            display: flex
                                            alignItems: center
                                          children:
                                            - .EditTableText:
                                              text: "TIN(EIN)"
                                            - .EditTableStar:
                                        - .EditTableLabel:
                                          dataKey: location.vertex.name.basicInfo.tin
                                          style:
                                            width: "0.168"
                                    # Fax    
                                    - type: view
                                      style:
                                        height: "0.066"
                                        display: flex
                                        justifyContent: center
                                        marginRight: "0.01"
                                        flexDirection: column
                                      children:
                                        - type: view
                                          style:
                                            height: "0.02533"
                                            display: flex
                                            alignItems: center
                                          children:
                                            - .EditTableText:
                                              text: "Fax #"
                                            # - .EditTableStar:
                                        - .EditTableLabel:
                                          dataKey: location.vertex.name.basicInfo.fax
                                          style:
                                            width: "0.168"
                                    # Business Hours
                                    - type: view
                                      style:
                                        height: "0.066"
                                        display: flex
                                        justifyContent: center
                                        flexDirection: column
                                      children:
                                        - type: view
                                          style:
                                            height: "0.02533"
                                            display: flex
                                            alignItems: center
                                          children:
                                            - .EditTableText:
                                              text: "Business Hours"
                                        - type: view
                                          onClick:
                                            - actionType: popUp
                                              popUpView: businessHourTag
                                          style:
                                            height: "0.0405"
                                            border:
                                              style: "3"
                                            borderColor: "0xdedede"
                                            fontSize: .Nfont.nf1
                                            # boxSizing: border-box
                                            borderRadius: "4"
                                            color: "0x333333"
                                            display: flex
                                            alignItems: center
                                            justifyContent: center
                                            alignContent: flex-start
                                            flexWrap: wrap
                                            flexDirection: column
                                          children:
                                            - .EditTableLabel:
                                              placeholder: "Select"
                                              isEditable: false
                                              viewTag: businessHoursTag
                                              dataKey: location.vertex.name.basicInfo.businessHours
                                              style:
                                                backgroundColor: "0xffffff"
                                                width: "0.343"
                                                boxSizing: border-box
                                                border:
                                                  style: "5"
                                            - type: image
                                              path: circleClock.svg
                                              style:
                                                width: "0.0098"
                                                top: "0.01"
                                                left: "0.325"

                            # Introduction
                            - type: view
                              style:
                                marginTop: "0.022"
                                width: "0.70252"
                                height: "0.11"
                                display: flex
                                justifyContent: space-between
                                alignItems: center
                              children:
                                - type: view
                                  style:
                                    height: "0.11"
                                    display: flex
                                    justifyContent: center
                                    flexDirection: column
                                  children:
                                    - type: view
                                      style:
                                        height: "0.02533"
                                        display: flex
                                        alignItems: center
                                      children:
                                        - .EditTableText:
                                          text: "Introduction"
                                    - type: textView
                                      placeholder: "Enter here"
                                      dataKey: location.vertex.name.basicInfo.introduction
                                      style:
                                        fontFamily: "Roboto"
                                        width: "0.705"
                                        height: "0.083"
                                        textIndent: "0.5em"
                                        paddingTop: "0.01"
                                        border:
                                          style: "3"
                                        borderColor: "0xdedede"
                                        fontSize: .Nfont.nf1
                                        boxSizing: border-box
                                        borderRadius: "4"
                                        color: "0x333333"
                            - type: view
                              style:
                                marginTop: "0.03"
                                width: "0.70252"
                                height: "0.146"
                                display: flex
                                justifyContent: center
                                flexDirection: column
                                alignItems: flex-start
                              children:
                                - .EditTableText:
                                  text: "Uploads"
                                  style:
                                    height: "0.022"
                                - type: view
                                  viewTag: pictureViewTag
                                  style:
                                    width: "0.70252"
                                    height: "0.124"
                                  children:
                                    - type: view
                                      viewTag: businessPhotoTag
                                      style:
                                        height: auto
                                      children:
                                        - type: image
                                          viewTag: medicalLicenseDeleteTag
                                          path:
                                            #deletePhoto.svg
                                            emit:
                                              actions:
                                                - if:
                                                    - ..medicalLicense.resp.doc.id
                                                    - deletePhoto.svg
                                                    - null.png
                                          style:
                                            top: "0"
                                            left: "0.085"
                                            zIndex: "1"
                                            width: "0.009"
                                          onClick:
                                            - actionType: popUp
                                              popUpView: deletePhotoTagBussiness
                                        - type: view
                                          style:
                                            top: "0.003"
                                            width: "0.091"
                                            height: "0.12144"
                                            display: flex
                                            flexDirection: column
                                            alignItems: center
                                            justifyContent: space-around
                                          children:
                                            - type: image
                                              style:
                                                width: "0.091"
                                                height: "0.1012"
                                                backgroundColor: "0xf0f2f4"
                                                border:
                                                  style: "5"
                                                borderRadius: "6"
                                              contentType: file
                                              path: defaultPicture.svg
                                              path=func: .builtIn.utils.prepareDocToPath
                                              dataKey: medicalLicense.document.id
                                              onClick:
                                                - actionType: openPhotoLibrary
                                                  dataObject: BLOB
                                                  dataKey: AddLocation.medicalLicense.document.name.data
                                                - actionType: evalObject
                                                  object:
                                                    - if:
                                                        - =.builtIn.math.lessthanSize:
                                                            dataIn:
                                                              object: =..medicalLicense.document.name.data # object
                                                              key: 2 #mb
                                                        - ..formData.flag@: false
                                                        - actionType: evalObject
                                                          object:
                                                            - =.builtIn.utils.getFileSize:
                                                                dataIn:
                                                                  object: =..medicalLicense.document.name.data
                                                                  units: mb
                                                                dataOut: AddLocation.formData.fileSize
                                                            - =.builtIn.string.concat:
                                                                dataIn:
                                                                  - "Your file size:"
                                                                  - =..formData.fileSize
                                                                  - "Mb"
                                                                dataOut: Global.formData.fileSize
                                                            - ..formData.flag@: true
                                                - actionType: builtIn
                                                  funcName: redraw
                                                  viewTag: overSize
                                                - actionType: evalObject
                                                  object:
                                                    - if:
                                                        - =..formData.flag
                                                        - actionType: popUp
                                                          popUpView: overSize
                                                          wait: true
                                                        - continue
                                                - actionType: popUp
                                                  popUpView: uploading
                                                - actionType: evalObject
                                                  object:
                                                    - .Global.jwt.edge.bvid@: =.Global.currentUser.vertex.id
                                                    - =.Global.jwt.edgeAPI.store: ""
                                                    - =..medicalLicense.docAPI.store: ""
                                                    - if:
                                                        - =..medicalLicense.resp.doc.id
                                                        - ..formData.businessId@: =..medicalLicense.resp.doc.id
                                                        - continue
                                                    # - =..medicalLicense.docAPI.get: "" # 不用再get了
                                                - actionType: evalObject
                                                  object:
                                                    .Global._nonce@:
                                                      =.builtIn.math.random: ""
                                                - actionType: evalObject
                                                  object:
                                                    - ..medicalLicense.document@: =..medicalLicense.resp.doc
                                                - actionType: popUpDismiss
                                                  popUpView: uploading
                                                - actionType: builtIn
                                                  funcName: redraw
                                                  viewTag: pictureViewTag
                                                - actionType: builtIn
                                                  funcName: redraw
                                                  viewTag: medicalLicenseDeleteTag

                                        - type: view
                                          style:
                                            height: "0.035"
                                            width: auto
                                            display: flex
                                            alignItems: center
                                            marginLeft: "0.015"
                                            top: "0.12"
                                          children:
                                            - .EditTableText:
                                              text: "Business License"
                                              style:
                                                marginLeft: "0.0018"
                                                textAlign:
                                                  x: center
                                            - .RedStar: ""
                                              style:
                                                display: inline-block

                                    - type: view
                                      viewTag: deaPhotoTag
                                      style:
                                        height: auto
                                        display: ..formData.controlDeaPhotoTag
                                      children:
                                        - type: image
                                          viewTag: deaDeleteTag
                                          path:
                                            # deletePhoto.svg
                                            emit:
                                              actions:
                                                - if:
                                                    - ..dEA.resp.doc.id
                                                    - deletePhoto.svg
                                                    - null.png
                                          style:
                                            top: "0"
                                            left: "0.205"
                                            zIndex: "1"
                                            width: "0.009"
                                          onClick:
                                            - actionType: popUp
                                              popUpView: deletePhotoTag
                                        - type: view
                                          style:
                                            top: "0.003"
                                            marginLeft: "0.12"
                                            width: "0.091"
                                            height: "0.12144"
                                            display: flex
                                            flexDirection: column
                                            alignItems: center
                                            justifyContent: space-around
                                          children:
                                            - type: image
                                              style:
                                                width: "0.091"
                                                height: "0.1012"
                                                backgroundColor: "0xf0f2f4"
                                                border:
                                                  style: "5"
                                                borderRadius: "6"
                                              contentType: file
                                              path: defaultPicture.svg
                                              path=func: .builtIn.utils.prepareDocToPath
                                              dataKey: dEA.document.id
                                              onClick:
                                                - actionType: openPhotoLibrary
                                                  dataObject: BLOB
                                                  dataKey: AddLocation.dEA.document.name.data
                                                - actionType: evalObject
                                                  object:
                                                    - if:
                                                        - =.builtIn.math.lessthanSize:
                                                            dataIn:
                                                              object: =..dEA.document.name.data # object
                                                              key: 2 #mb
                                                        - ..formData.flag@: false
                                                        - actionType: evalObject
                                                          object:
                                                            - =.builtIn.utils.getFileSize:
                                                                dataIn:
                                                                  object: =..dEA.document.name.data
                                                                  units: mb
                                                                dataOut: AddLocation.formData.fileSize
                                                            - =.builtIn.string.concat:
                                                                dataIn:
                                                                  - "Your file size:"
                                                                  - =..formData.fileSize
                                                                  - "Mb"
                                                                dataOut: Global.formData.fileSize
                                                            - ..formData.flag@: true
                                                - actionType: builtIn
                                                  funcName: redraw
                                                  viewTag: overSize
                                                - actionType: evalObject
                                                  object:
                                                    - if:
                                                        - =..formData.flag
                                                        - actionType: popUp
                                                          popUpView: overSize
                                                          wait: true
                                                        - continue
                                                - actionType: popUp
                                                  popUpView: uploading
                                                - actionType: evalObject
                                                  object:
                                                    - .Global.jwt.edge.bvid@: =.Global.currentUser.vertex.id
                                                    - =.Global.jwt.edgeAPI.store: ""
                                                    - =..dEA.docAPI.store: ""
                                                    # - =..dEA.docAPI.get: ""
                                                - actionType: evalObject
                                                  object:
                                                    .Global._nonce@:
                                                      =.builtIn.math.random: ""
                                                - actionType: evalObject
                                                  object:
                                                    - ..dEA.document@: =..dEA.resp.doc
                                                - actionType: popUpDismiss
                                                  popUpView: uploading
                                                - actionType: builtIn
                                                  funcName: redraw
                                                  viewTag: pictureViewTag
                                                - actionType: builtIn
                                                  funcName: redraw
                                                  viewTag: deaDeleteTag
                                        - type: view
                                          style:
                                            height: "0.035"
                                            width: auto
                                            display: flex
                                            alignItems: center
                                            marginLeft: "0.12"
                                            top: "0.12"
                                          children:
                                            - .EditTableText:
                                              text: "DEA #"
                                              style:
                                                width: "0.091"
                                                marginLeft: "0.0035"
                                                textAlign:
                                                  x: center

        - .LoadingView: ""
          message: "loading ..."
          viewTag: uploading
        - type: popUp
          viewTag: locationTag
          style:
            width: '0.73'
            top: "0.384"
            height: "0.18"
            left: '0.218'
            fontFamily: 'Poppins'
            border: "1px solid #eeeeee"
            borderWidth: "1px"
            zIndex: 100
            backgroundColor: 'white'
            isHidden: "false"
          children:
            - type: scrollView
              style:
                width: '0.4'
                top: "0"
                height: "0.15"
                left: '0'
              children:
                - .SearchProviderView:
                  viewTag: adressListTag
                  children:
                    - type: list
                      contentType: listObject
                      listObject: =..suggestAddress
                      iteratorVar: itemObject
                      style:
                        width: '0.4'
                        left: '0'
                        height: "auto"
                        margin: "0"
                        marginTop: "0"
                      children:
                        - type: listItem
                          itemObject: ''
                          hover:
                            backgroundColor: "0xffecf1cd"
                          onMouseEnter:
                            - emit:
                                dataKey:
                                  var: itemObject
                                actions:
                                  - ..formData.addressDetail@: $var.place_name
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: ContentTag
                          onClick:
                            - actionType: evalObject
                              object:
                                - ..location.vertex.name.basicInfo.location@: ..formData.addressDetail
                          style:
                            backgroundColor: "0xffffff"
                            width: '0.4'
                            height: '0.022'
                          children:
                            - .Alllabel:
                              children:
                                - type: label
                                  dataKey: itemObject.place_name
                                  style:
                                    height: '0.02'
                                    fontFamily: 'Poppins'
                                    color: "0x143459"
                              onClick:
                                - actionType: updateObject
                                  dataKey: cacheData.place
                                  dataObject: itemObject
                                - emit:
                                    dataKey:
                                      var: itemObject
                                    actions:
                                      - =.builtIn.string.getAddress:
                                          dataIn:
                                            object: $var
                                          dataOut: AddLocation.formData.address
                                      - ..location.vertex.name.basicInfo.state@: =..formData.address.state
                                      - ..location.vertex.name.basicInfo.zipCode@: =..formData.address.zipCode
                                      - ..location.vertex.name.basicInfo.city@: =..formData.address.city
                                      - ..location.vertex.name.basicInfo.location@: =..formData.address.location
                                      - ..location.vertex.name.basicInfo.geoCode@: =..formData.address.geoCode
                                      - ..location.vertex.name.basicInfo.addressFirstLine@: =..formData.address.firsLine
                                      - ..location.vertex.name.basicInfo.addressSecondLine@: =..formData.address.SecondLine
                                      - ..location.vertex.name.basicInfo.county@: =..formData.address.county
                                      - ..location.vertex.name.basicInfo.location@: ""
                                - actionType: builtIn
                                  funcName: redraw
                                  viewTag: ContentTag
                              style:
                                width: '0.4'
                                textIndent: 20px
                                textAlign:
                                  x: left
                                  y: center
                                height: '0.02'
                                fontSize: "1.7vh"
                                color: '0x143459'

        - .BaseCheckView: ""
          message: "LocationID cannot be repeated!"
          viewTag: locationIDTag
        - type: popUp
          msg1: Warning
          msg2: Please complete the required items.
          viewTag: errorView
          onClick:
            - actionType: popUpDismiss
              popUpView: __.viewTag
          style:
            left: "0"
            width: "1"
            top: "0"
            height: "1"
            backgroundColor: "0x00000033"
            zIndex: "10"
          children:
            - type: view
              style:
                left: "0.44"
                width: "0.28"
                top: "0.3"
                height: "auto"
                boxShadow: "0px 2px 2px 1px #b7b7b7"
                borderRadius: "5"
                backgroundColor: "0xffffff"
              children:
                - type: view
                  style:
                    marginTop: "0"
                    left: "0"
                    width: "0.28"
                    height: "0.013"
                    backgroundColor: "0xe24445"
                    border-top-left-radius: "5px"
                    border-top-right-radius: "5px"
                - type: view
                  style:
                    marginTop: "0"
                    width: "0.28"
                    left: "0"
                    height: "auto"
                  children:
                    - type: image
                      path: warningRed.svg
                      style:
                        left: "0.12"
                        width: "0.04"
                        marginTop: "0.04"
                    - type: label
                      text: ____.msg1
                      style:
                        left: "0.05"
                        width: "0.18"
                        fontSize: .Nfont.nf5
                        color: "0x171725"
                        fontWeight: "500"
                        fontFamily: "Robot"
                        marginTop: "0.02"
                        textAlign:
                          x: center
                    - type: label
                      text: ____.msg2
                      style:
                        left: "0.02"
                        width: "0.24"
                        marginTop: "0.02"
                        fontSize: .Nfont.nf4
                        fontFamily: "Roboto"
                        color: "0x333333"
                        textAlign:
                          x: center
                    - type: label
                      text: =..formData.errorArr
                      style:
                        left: "0.02"
                        width: "0.24"
                        marginTop: "0.02"
                        marginBottom: "0.03"
                        fontSize: .Nfont.nf2
                        fontFamily: "Roboto"
                        color: "0x999999"
                        textAlign:
                          x: center
        # - .BaseCheckView: ""
        #   message: "Please complete all the required info to continue"
        #   viewTag: errorView
        #   style:
        #     zIndex: "1000"         
        - .BaseOverSizeView: ""

        - type: popUp
          viewTag: startDateTag
          style:
            left: "0"
            top: "0"
            width: "1"
            height: "1"
            backgroundColor: "0x00000033"
            zIndex: "1000000"
          children:
            - .BaseDate.calendar:
              children:
                - .BaseDate.calendarTitle:
                - .BaseDate.calendarCancel:
                - .BaseDate.calendarHeader:
                  children:
                    - .BaseDate.newMonthView:
                    - .BaseDate.newYearView:
                - .BaseDate.weekView:
                - .BaseDate.dayView:
                - .BaseDate.addButton:
                  onClick:
                    - actionType: evalObject
                      object:
                        - ..location.vertex.name.basicInfo.licenseExpirationDate@: =.BaseDate.calendarDate.todayDate
                    - actionType: builtIn
                      funcName: redraw
                      viewTag: selectStartAndEndTag
                    - actionType: popUpDismiss
                      popUpView: startDateTag
                - .BaseDate.cancelButton:
                  onClick:
                    - actionType: popUpDismiss
                      popUpView: startDateTag
        - .BasePopUp:
          style:
            top: "0"
            left: "0"
            height: "1"
            width: "1"
            zIndex: "1000"
          viewTag: businessHourTag
          children:
            - .PopUphead:
              style:
                left: '0.6'
              children:
                - .CreateLabel:
                  text: "Business Hours"
                - .Closebutton:
                  onClick:
                    - .BaseDate.calendarDate.minidayLable@: []
                    - actionType: popUpDismiss
                      popUpView: businessHourTag
            - type: view
              style:
                height: '0.92'
                width: '0.4'
                top: '0.08'
                left: '0.6'
                backgroundColor: '0xffffff'
              viewTag: DataTag
              children:
                - type: view
                  style:
                    width: "0.28"
                    height: "0.1"
                    left: "0.06"
                  children:
                    - type: label
                      text: Day
                      style:
                        width: "0.28"
                        left: '0'
                        marginTop: '0.03'
                        fontSize: .Nfont.nf2
                        fontWeight: "600"
                        color: "0x333333"
                    - type: view
                      style:
                        marginTop: "0.01"
                        width: "0.28"
                        height: "0.046"
                        left: "0"
                      children:
                        - type: select
                          options: .SelectData.Day
                          dataKey: formData.Date.FromDay
                          style:
                            left: '0'
                            top: '0'
                            fontSize: .Nfont.nf1
                            color: "0x333333"
                            borderColor: "0xdedede"
                            width: '0.125'
                            borderRadius: "4"
                            border:
                              style: "3"
                            height: '0.0405'
                            textIndent: '0.5em'
                          onChange:
                            - actionType: evalObject
                              object:
                                .Global._nonce@:
                                  =.builtIn.math.random: ""
                            - actionType: evalObject
                              object:
                                - =.builtIn.array.allComplete:
                                    dataIn:
                                      - =..formData.Date.FromDay
                                      - =..formData.Date.ToDay
                                      - =..formData.Date.FromHour
                                      - =..formData.Date.ToHour
                                    dataOut: AddLocation.formData.isCheckoutColor
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..formData.isCheckoutColor
                                          string2: true
                                    - ..formData.specBtnColor@: "0x235591"
                                    - ..formData.specBtnColor@: "0xc1c1c1"

                            - actionType: builtIn
                              funcName: redraw
                              viewTag: btnView
                        - type: label
                          text: "to"
                          dataKey:
                          style:
                            top: '0'
                            marginLeft: '0.125'
                            width: "0.03"
                            height: '0.0405'
                            fontSize: .Nfont.nf2
                            fontWeight: "600"
                            color: "0x333333"
                            textAlign:
                              x: center
                              y: center
                        - type: select
                          viewTag: typeView
                          options: .SelectData.Day
                          dataKey: formData.Date.ToDay
                          onChange:
                            - actionType: evalObject
                              object:
                                .Global._nonce@:
                                  =.builtIn.math.random: ""
                            - actionType: evalObject
                              object:
                                - =.builtIn.array.allComplete:
                                    dataIn:
                                      - =..formData.Date.FromDay
                                      - =..formData.Date.ToDay
                                      - =..formData.Date.FromHour
                                      - =..formData.Date.ToHour
                                    dataOut: AddLocation.formData.isCheckoutColor
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..formData.isCheckoutColor
                                          string2: true
                                    - ..formData.specBtnColor@: "0x235591"
                                    - ..formData.specBtnColor@: "0xc1c1c1"
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: btnView
                          style:
                            top: '0'
                            marginLeft: '0.155'
                            fontSize: .Nfont.nf1
                            color: "0x333333"
                            borderColor: "0xdedede"
                            width: '0.125'
                            height: '0.0405'
                            borderRadius: "5"
                            border:
                              style: "3"
                            textIndent: '0.5em'
                    - type: label
                      text: "Hour"
                      style:
                        width: "0.28"
                        left: '0'
                        marginTop: '0.01'
                        fontSize: .Nfont.nf2
                        fontWeight: "600"
                        color: "0x333333"
                    - type: view
                      style:
                        marginTop: "0.005"
                        width: "0.28"
                        height: "auto"
                        left: "0"
                      children:
                        - type: select
                          viewTag: reasonView
                          dataKey: formData.Date.FromHour
                          options: .SelectData.TimeSpan
                          style:
                            left: '0'
                            top: '0'
                            fontSize: .Nfont.nf1
                            color: "0x333333"
                            borderColor: "0xdedede"
                            width: '0.125'
                            borderRadius: "5"
                            border:
                              style: "3"
                            height: '0.0405'
                            textIndent: '0.5em'
                          onChange:
                            - actionType: evalObject
                              object:
                                .Global._nonce@:
                                  =.builtIn.math.random: ""
                            - actionType: evalObject
                              object:
                                - =.builtIn.array.allComplete:
                                    dataIn:
                                      - =..formData.Date.FromDay
                                      - =..formData.Date.ToDay
                                      - =..formData.Date.FromHour
                                      - =..formData.Date.ToHour
                                    dataOut: AddLocation.formData.isCheckoutColor
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..formData.isCheckoutColor
                                          string2: true
                                    - ..formData.specBtnColor@: "0x235591"
                                    - ..formData.specBtnColor@: "0xc1c1c1"
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: btnView
                        - type: label
                          text: "to"
                          dataKey:
                          style:
                            top: '0'
                            marginLeft: '0.125'
                            width: "0.03"
                            height: '0.0405'
                            fontSize: .Nfont.nf2
                            fontWeight: "600"
                            color: "0x333333"
                            textAlign:
                              x: center
                              y: center
                        - type: select
                          dataKey: formData.Date.ToHour
                          options: .SelectData.TimeSpan
                          onChange:
                            - actionType: evalObject
                              object:
                                .Global._nonce@:
                                  =.builtIn.math.random: ""
                            - actionType: evalObject
                              object:
                                - =.builtIn.array.allComplete:
                                    dataIn:
                                      - =..formData.Date.FromDay
                                      - =..formData.Date.ToDay
                                      - =..formData.Date.FromHour
                                      - =..formData.Date.ToHour
                                    dataOut: AddLocation.formData.isCheckoutColor
                                - if:
                                    - =.builtIn.string.equal:
                                        dataIn:
                                          string1: =..formData.isCheckoutColor
                                          string2: true
                                    - ..formData.specBtnColor@: "0x235591"
                                    - ..formData.specBtnColor@: "0xc1c1c1"
                            - actionType: builtIn
                              funcName: redraw
                              viewTag: btnView
                          style:
                            top: '0'
                            marginLeft: '0.155'
                            fontSize: .Nfont.nf1
                            color: "0x333333"
                            borderColor: "0xdedede"
                            width: '0.125'
                            height: '0.0405'
                            borderRadius: "5"
                            border:
                              style: "3"
                            textIndent: '0.5em'
                    - .StandBtnWithImg:
                      viewTag: btnView
                      btnImg: addCircle.svg
                      btnText: "Add Business Hours"
                      onClick:
                        - actionType: evalObject
                          object:
                            - =.builtIn.string.concat:
                                dataIn:
                                  - =..formData.Date.FromDay
                                  - " - "
                                  - =..formData.Date.ToDay
                                dataOut: AddLocation.formData.Date.dayConcat
                            - =.builtIn.string.concat:
                                dataIn:
                                  - =..formData.Date.FromHour
                                  - " - "
                                  - =..formData.Date.ToHour
                                dataOut: AddLocation.formData.Date.HourConcat
                            - =.builtIn.string.concat:
                                dataIn:
                                  - =..formData.Date.dayConcat
                                  - ", "
                                  - =..formData.Date.HourConcat
                                dataOut: AddLocation.formData.Date.concat
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..formData.specBtnColor
                                      string2: "0x235591"
                                - =.builtIn.array.add:
                                    dataIn:
                                      object: =..formData.bussinessHours
                                      value: =..formData.Date
                                - continue
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: bussinessHoursTag
                      style:
                        marginTop: "0.065"
                        width: "0.12"
                        fontSize: .Nfont.nf1
                        backgroundColor: ..formData.specBtnColor
                      children:
                        - type: image
                          path: __.btnImg
                          style:
                            height: "0.01656"
                            width: "0.00936"
                        - type: label
                          text: __.btnText
                          style:
                            marginLeft: "0.004"
                            color: "0xffffff"
                            # fontFamily: "Proxima Nova"
                            fontWeight: "600"
                    - type: view
                      style:
                        width: "0.28"
                        height: "0.004"
                        backgroundColor: "0xeaeaea"
                        marginTop: "0.028"
                    - type: view
                      style:
                        width: "0.28"
                        height: "auto"
                        marginTop: "0.018"
                      children:
                        - type: label
                          text: "Day"
                          dataKey:
                          style:
                            top: "0"
                            left: "0.017"
                            fontSize: .Nfont.nf2
                            color: "0x333333"
                            fontWeight: "600"
                        - type: label
                          text: "Hour"
                          dataKey:
                          style:
                            left: "0.155"
                            top: "0"
                            fontSize: .Nfont.nf2
                            color: "0x333333"
                            fontWeight: "600"
                        - type: scrollView
                          style:
                            top: "0.035"
                            height: "0.45"
                            width: "0.28"
                          children:
                            - type: list
                              viewTag: bussinessHoursTag
                              contentType: listObject
                              listObject: ..formData.bussinessHours
                              iteratorVar: itemObject
                              style:
                                margin: "0"
                                width: '0.28'
                                height: auto
                              children:
                                - type: listItem
                                  itemObject:
                                  style:
                                    width: '0.28'
                                    left: '0'
                                    height: "0.03"
                                  children:
                                    - type: image
                                      path: deletePhoto.svg
                                      style:
                                        width: "0.009"
                                        top: "0.001"
                                      onClick:
                                        - emit:
                                            dataKey:
                                              var: itemObject
                                            actions:
                                              - =.builtIn.array.removeByName:
                                                  dataIn:
                                                    object: =..formData.bussinessHours
                                                    key: "dayConcat"
                                                    name: $var.dayConcat
                                        - actionType: builtIn
                                          funcName: redraw
                                          viewTag: bussinessHoursTag
                                    - type: label
                                      dataKey: itemObject.dayConcat
                                      style:
                                        fontSize: .Nfont.nf1
                                        color: "0x333333"
                                        left: "0.017"
                                        top: "0"
                                    - type: label
                                      dataKey: itemObject.HourConcat
                                      style:
                                        width: "0.1"
                                        fontSize: .Nfont.nf1
                                        color: "0x333333"
                                        left: "0.155"
                - type: view
                  style:
                    top: "0.82"
                    width: "0.4"
                    boxShadow: "0px -2px 8px -8px #707070"
                    height: "0.1"
                  children:
                    - .StandBtn:
                      btnText: "Confirm"
                      style:
                        left: "0.265"
                        marginTop: "0.02975"
                        width: "0.0754"
                      onClick:
                        - actionType: evalObject
                          object:
                            - =.builtIn.array.selectOneToArr:
                                dataIn:
                                  arr: =..formData.bussinessHours
                                  key: "concat"
                                dataOut: AddLocation.formData.bussinessHoursResult

                            - ..location.vertex.name.basicInfo.businessHours@: =..formData.bussinessHoursResult
                            - .Global.formData.facilityInfo.tempDate@: =..formData.bussinessHours

                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..formData.Date.FromDay
                                      string2: ""
                                - actionType: popUp
                                  popUpView: timeErrorViewDay
                                  wait: true
                                - continue
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..formData.Date.FromDay
                                      string2: "select"
                                - actionType: popUp
                                  popUpView: timeErrorViewDay
                                  wait: true
                                - continue
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..formData.Date.ToDay
                                      string2: ""
                                - actionType: popUp
                                  popUpView: timeErrorViewDay
                                  wait: true
                                - continue
                            - if:
                                - =.builtIn.string.equal:
                                    dataIn:
                                      string1: =..formData.Date.ToDay
                                      string2: "select"
                                - actionType: popUp
                                  popUpView: timeErrorViewDay
                                  wait: true
                                - continue
                            - if:
                                - =.builtIn.date.DateCompare:
                                    dataIn:
                                      startTime: =..formData.Date.FromHour
                                      endTime: =..formData.Date.ToHour
                                - continue
                                - actionType: popUp
                                  popUpView: timeErrorView
                                  wait: true
                            - =.builtIn.string.concat:
                                dataIn:
                                  - =..formData.Date.FromDay
                                  - " - "
                                  - =..formData.Date.ToDay
                                  - ", "
                                  - =..formData.Date.FromHour
                                  - " - "
                                  - =..formData.Date.ToHour
                                dataOut: AddLocation.formData.Date.resultTime
                            # - ..location.vertex.name.basicInfo.businessHours@: =..formData.Date.resultTime

                        - actionType: popUpDismiss
                          popUpView: businessHourTag
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: businessHoursTag

        - .BaseCheckView:
          message: "Please select or change appropriate start & end Hour"
          viewTag: timeErrorView
        - .BaseCheckView:
          message: "Please select Day"
          viewTag: timeErrorViewDay

        - .BaseJudgeView:
          viewTag: deletePhotoTag
          children:
            - .BaseJudgeInnerView:
              style:
                top: "0.39144"
                width: "0.31512"
                height: "0.21712"
              children:
                - .BaseJudgeCancelImg:
                - .BaseJudgeTxt:
                  style:
                    marginTop: "0.018"
                    fontSize: .Nfont.nf4
                    fontWeight: "500"
                    fontFamily: ""
                - .BaseJudgeButtonView:
                  style:
                    marginTop: "0.065"
                    width: "0.31512"
                    height: "0.06624"
                  children:
                    - .BaseJudgeButtonNo: # 可以重写
                      text: "Cancel"
                      style:
                        height: "0.0368"
                        fontSize: .Nfont.nf3
                        fontWeight: "700"
                        textDecoration: underline
                    - .BaseJudgeButtonYes: # 可以重写
                      text: "Confirm"
                      style:
                        fontSize: .Nfont.nf2
                        height: "0.0368"
                        borderRadius: "4"
                        fontWeight: "600"
                      onClick:
                        - actionType: evalObject
                          object:
                            .Global._nonce@:
                              =.builtIn.math.random: ""
                        - actionType: evalObject
                          object:
                            - .Global.jwt.edge.bvid@: =.Global.formData.locationId
                            - =.Global.jwt.edgeAPI.store: ""
                            - if:
                                - ..dEA.resp.doc.id
                                - ..dEA.deleteReq.id@: =..dEA.resp.doc.id
                                - continue
                            - =..dEA.docAPI.delete: ""
                            - ..dEA.document@: =..dEA.documentIn
                            - ..dEA.document.id@: ""
                            - ..dEA.getRes.doc@: []

                        - actionType: builtIn
                          funcName: redraw
                          viewTag: pictureViewTag
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: deletePhotoTag
                        - actionType: popUpDismiss
                          popUpView: deletePhotoTag

        - .BaseJudgeView:
          viewTag: deletePhotoTagBussiness
          children:
            - .BaseJudgeInnerView:
              style:
                top: "0.39144"
                width: "0.31512"
                height: "0.21712"
              children:
                - .BaseJudgeCancelImg:
                - .BaseJudgeTxt:
                  style:
                    marginTop: "0.018"
                    fontSize: .Nfont.nf4
                    fontWeight: "500"
                    fontFamily: ""
                - .BaseJudgeButtonView:
                  style:
                    marginTop: "0.065"
                    width: "0.31512"
                    height: "0.06624"
                  children:
                    - .BaseJudgeButtonNo: # 可以重写
                      text: "Cancel"
                      style:
                        height: "0.0368"
                        fontSize: .Nfont.nf3
                        fontWeight: "700"
                        textDecoration: underline
                    - .BaseJudgeButtonYes: # 可以重写
                      text: "Confirm"
                      style:
                        fontSize: .Nfont.nf2
                        height: "0.0368"
                        borderRadius: "4"
                        fontWeight: "600"
                      onClick:
                        - actionType: evalObject
                          object:
                            .Global._nonce@:
                              =.builtIn.math.random: ""
                        - actionType: evalObject
                          object:
                            - .Global.jwt.edge.bvid@: =.Global.formData.locationId
                            - =.Global.jwt.edgeAPI.store: ""
                            - if:
                                - ..medicalLicense.resp.doc.id
                                - ..medicalLicense.deleteReq.id@: =..medicalLicense.resp.doc.id
                                - continue
                            - =..medicalLicense.docAPI.delete: ""
                            - ..medicalLicense.document@: =..dEA.documentIn
                            - ..medicalLicense.document.id@: ""
                            # - =..medicalLicense.docAPI.get: ""
                            - ..medicalLicense.getRes.doc@: []
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: pictureViewTag
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: deletePhotoTagBussiness
                        - actionType: popUpDismiss
                          popUpView: deletePhotoTagBussiness
        - .BaseSuccessfulView: ""
          viewTag: successfullTag
          onClick:
            - goto: FacilityInfo1

        # business 弹窗            
        - type: popUp
          viewTag: businessPopUp
          style:
            width: "0.148"
            height: "auto"
            top: "0.23"
            left: "0.335"
            zIndex: "101"
            borderRadius: "8"
            backgroundColor: "0xffffff"
            boxShadow: "1px 1px 4px 2px #cccccc"
          children:
            - type: view
              style:
                width: "auto"
                height: "auto"
              children:
                - type: label
                  text: "Medical(M)"
                  dataKey:
                  style:
                    fontWeight: "600"
                    fontSize: .Nfont.nf3
                    left: "0.015"
                    width: '0.12'
                    marginTop: "0.01"
                - type: list
                  viewTag: payeeListTag
                  contentType: listObject
                  listObject: ..formData.medical
                  iteratorVar: itemObject
                  style:
                    width: '0.148'
                    margin: '0'
                    height: auto
                    marginTop: "0.005"
                  children:
                    - type: listItem
                      itemObject:
                      style:
                        width: '0.148'
                        height: '0.04'
                        left: '0'
                        marginTop: ''
                      onClick:
                        - emit:
                            dataKey:
                              var: itemObject
                            actions:
                              - =.builtIn.array.getByKey:
                                  dataIn:
                                    array: =.SelectData.businessCat
                                    key1: "name"
                                    value: $var.name
                                    key2: "value"
                                  dataOut: AddLocation.location.vertex.name.basicInfo.businessType

                              - ..formData.controlBusinessPopUp@: "0"
                              - ..formData.controlMedical@: "block"
                              - ..formData.controlBusiness@: "none"
                              - ..location.vertex.name.basicInfo.largeType@: "M"
                              - ..formData.controlFacilityName@: "block"
                              - ..formData.controlBusinessName@: "none"
                              - ..formData.controlFacilityId@: "block"
                              - ..formData.controlBusinessId@: "none"
                              - ..formData.controlDeaPhotoTag@: "block"
                        - actionType: popUpDismiss
                          popUpView: businessPopUp
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: businessTag
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: medicalTag
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: businessViewTag
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: facilityNameTag
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: facilityIDTag
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: deaPhotoTag
                      children:
                        - type: label
                          dataKey: itemObject.name
                          style:
                            display: inline-block
                            left: "0.015"
                            marginTop: "0.011"
                            fontSize: .Nfont.n6_1_2
            - type: view
              style:
                width: "auto"
                height: "auto"
              children:
                - type: label
                  text: "Business(B)"
                  dataKey:
                  style:
                    fontWeight: "600"
                    fontSize: .Nfont.nf3
                    left: "0.015"
                    width: '0.12'
                    marginTop: "0.01"
                - type: list
                  viewTag: payeeListTag
                  contentType: listObject
                  listObject: ..formData.business
                  iteratorVar: itemObject
                  style:
                    width: '0.148'
                    margin: '0'
                    height: auto
                    marginTop: "0.005"
                  children:
                    - type: listItem
                      itemObject:
                      style:
                        width: '0.148'
                        height: '0.04'
                        left: '0'
                        marginTop: ''
                      onClick:
                        - emit:
                            dataKey:
                              var: itemObject
                            actions:
                              - =.builtIn.array.getByKey:
                                  dataIn:
                                    array: =.SelectData.businessCat
                                    key1: "name"
                                    value: $var.name
                                    key2: "value"
                                  dataOut: AddLocation.location.vertex.name.basicInfo.businessType
                              - ..formData.controlBusinessPopUp@: "0"
                              - ..formData.controlMedical@: "none"
                              - ..formData.controlBusiness@: "block"
                              - ..location.vertex.name.basicInfo.largeType@: "B"
                              - ..formData.controlFacilityName@: "none"
                              - ..formData.controlBusinessName@: "block"
                              - ..formData.controlFacilityId@: "none"
                              - ..formData.controlBusinessId@: "block"
                              - ..formData.controlDeaPhotoTag@: "none"
                        - actionType: popUpDismiss
                          popUpView: businessPopUp
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: businessTag
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: medicalTag
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: businessViewTag
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: facilityNameTag
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: facilityIDTag
                        - actionType: builtIn
                          funcName: redraw
                          viewTag: deaPhotoTag
                      children:
                        - type: label
                          dataKey: itemObject.name
                          style:
                            display: inline-block
                            left: "0.015"
                            marginTop: "0.011"
                            fontSize: .Nfont.n6_1_2
