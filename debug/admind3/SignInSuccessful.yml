SignInSuccessful:
  #xd page number15
  pageNumber: "100"
  init:
    - .SignInCheck
    - actionType: evalObject
      object:
        .Global._nonce@:
          =.builtIn.math.random: ""
    #  创建时第一次get不到，所以放到了continue get
    - actionType: evalObject
      object:
        - ..fac_RootNotebook.edgeResp.edge.0.id@: =.Global.formData.facility.data.vertex.deat.rnb64ID
        - ..loca_RootNotebook.edgeResp.edge.0.id@: =.Global.signInLocationRootId
        # - ..fac_RootNotebook.edgeReq.id@: =.Global.formData.facility.data.vertex.id
        # - =..fac_RootNotebook.edgeAPI.get: ""   
        # - ..loca_RootNotebook.edgeReq.id@: =.Global.signInLocationId
        # - =..loca_RootNotebook.edgeAPI.get: ""        
    - ..facilityProfile.document.name.data.basicInfo@: =.Global.formData.medicalFacility.name.basicInfo
    - ..locationProfile.document.name.data.basicInfo@: =.Global.formData.medicalFacility.name.basicInfo
  formData:
    imageList: []
  facilityProfile:
    document:
      eid: ""
      subtype:
        isEditable: true
      type: .DocType.FacilityProfile
      name:
        data:
          basicInfo: ""
    docAPI:
      store:
        api: cd
        dataIn: SignInSuccessful.facilityProfile.document
  locationProfile:
    document:
      eid: ""
      subtype:
        isEditable: true
      type: .DocType.FacilityProfile
      name:
        data:
          basicInfo: ""
    docAPI:
      store:
        api: cd
        dataIn: SignInSuccessful.locationProfile.document
  # facility 的自己的10000的边
  fac_RootNotebook:
    edgeReq:
      id: ""
      xfname: bvid
      type: .EdgeType.RootNotebook
    edgeResp: ""
    edgeAPI:
      get:
        api: re
        dataIn: SignInSuccessful.fac_RootNotebook.edgeReq
        dataOut: SignInSuccessful.fac_RootNotebook.edgeResp
  loca_RootNotebook:
    edgeReq:
      id: ""
      xfname: bvid
      type: .EdgeType.RootNotebook
    edgeResp: ""
    edgeAPI:
      get:
        api: re
        dataIn: SignInSuccessful.loca_RootNotebook.edgeReq
        dataOut: SignInSuccessful.loca_RootNotebook.edgeResp
  businessLogo:
    docResp: ""
    document: ""
    docIn:
      type: .DocType.BusinessLogoPicture
      id: ""
      xfname: eid
      obfname: "ctime"
    docAPI:
      get:
        api: rd
        dataIn: businessLogo.docIn
        dataOut: SignInSuccessful.businessLogo.docResp
  dEA:
    document: ""
  medicalLicense:
    document: ""
  components:
    - .MainView:
      children:
        - .LeftDivider:
          style:
            width: "0.0015"
        - .Head0:
        - .CenterView:
          style:
            width: "0.984"
            left: "0.008"
            height: "0.91"
            top: "0.075"
          children:
            - .LeftLabel:
              text: "Basic settings are complete!"
              style:
                fontSize: "30"
                fontWeight: "400"
                left: "0.05"
            - .LeftImage:
              path: "confetti.svg"
              style:
                left: "0.085"
            - type: image
              path: okBlue.svg
              style:
                left: "0.4"
                top: "0.1"
            - type: label
              text: "Basic Info"
              dataKey:
              style:
                left: "0.39"
                color: "0x4d4f5c"
                top: "0.16"
            - type: image
              path: okBlue.svg
              style:
                left: "0.58"
                top: "0.1"
            - type: label
              text: "Billing Info"
              dataKey:
              style:
                left: "0.57"
                color: "0x4d4f5c"
                top: "0.16"
            - type: view
              style:
                width: "0.1"
                height: "0.0015"
                left: "0.45"
                top: "0.12"
                backgroundColor: "0xdce9f3"
            - .Label1:
              text: "Successful"
              style:
                width: '0.5'
                textAlign:
                  x: center
                left: "0.25"
                top: "0.27"
                fontSize: "38"
                color: "#517086"
            - .Label1:
              text: "Welcome to AiTmed!"
              style:
                width: '0.5'
                textAlign:
                  x: center
                left: "0.25"
                top: "0.4"
                fontSize: "39"
            - .BottomButton:
              text: "Continue"
              onClick:
                - actionType: popUp
                  popUpView: loading
                - actionType: evalObject
                  object:
                    .Global._nonce@:
                      =.builtIn.math.random: ""
                - actionType: evalObject
                  object:
                    - if:
                        - =.Global.formData.facilityPhoto.profilePhoto.id
                        - =.builtIn.array.add:
                            dataIn:
                              object: =..formData.imageList
                              value: =.Global.formData.facilityPhoto.profilePhoto
                        - continue
                    - if:
                        - =.Global.formData.facilityPhoto.dea.id
                        - =.builtIn.array.add:
                            dataIn:
                              object: =..formData.imageList
                              value: =.Global.formData.facilityPhoto.dea
                        - continue
                    - if:
                        - =.Global.formData.facilityPhoto.medicalLicense.id
                        - =.builtIn.array.add:
                            dataIn:
                              object: =..formData.imageList
                              value: =.Global.formData.facilityPhoto.medicalLicense
                        - continue

                    - .Global.jwt.edge.bvid@: =.Global.formData.facility.data.vertex.id
                    - =.Global.jwt.edgeAPI.store: ""
                    - =.builtIn.ecos.shareDocList:
                        dataIn:
                          sourceDocList: =..formData.imageList
                          targetEdgeID: =..fac_RootNotebook.edgeResp.edge.0.id

                - actionType: evalObject
                  object:

                    - ..businessLogo.docIn.id@: =..fac_RootNotebook.edgeResp.edge.0.id
                    - =..businessLogo.docAPI.get: ""
                    - ..facilityProfile.document.eid@: =..fac_RootNotebook.edgeResp.edge.0.id

                    - =.builtIn.string.concat:
                        dataIn:
                          - "search.aitmed.com/"
                          - =..facilityProfile.document.name.data.basicInfo.locationID
                        dataOut: SignInSuccessful.facilityProfile.document.name.data.basicInfo.facilityLink
                    - if:
                        - =..businessLogo.docResp.doc.0.id
                        - ..facilityProfile.document.name.data.basicInfo.businessLogo@: =..businessLogo.docResp.doc.0.id
                        - continue
                    - =..facilityProfile.docAPI.store: ""
                - actionType: evalObject
                  object:
                    - .Global.jwt.edge.bvid@: =.Global.signInLocationId
                    - =.Global.jwt.edgeAPI.store: ""
                    - =.builtIn.ecos.shareDocList:
                        dataIn:
                          sourceDocList: =..formData.imageList
                          targetEdgeID: =..loca_RootNotebook.edgeResp.edge.0.id

                - actionType: evalObject
                  object:
                    - ..businessLogo.docResp.doc@: []
                    - ..businessLogo.docIn.id@: =..loca_RootNotebook.edgeResp.edge.0.id
                    - =..businessLogo.docAPI.get: ""
                    - ..locationProfile.document.eid@: =..loca_RootNotebook.edgeResp.edge.0.id
                    - if:
                        - =..businessLogo.docResp.doc.0.id
                        - ..locationProfile.document.name.data.basicInfo.businessLogo@: =..businessLogo.docResp.doc.0.id
                        - continue
                    - =..locationProfile.docAPI.store: ""

                - actionType: updateObject
                  dataKey: Global.formData.facilityPhoto.profilePhoto
                  dataObject: {}

                - actionType: updateObject
                  dataKey: Global.formData.facilityPhoto.dea
                  dataObject: {}

                - actionType: updateObject
                  dataKey: Global.formData.facilityPhoto.medicalLicense
                  dataObject: {}                     
                # - actionType: popUpDismiss
                #   popUpView: loading 
                - goto: SelectOrganization
              style:
                left: "0.45"
                top: "0.65"
                backgroundColor: "#005795"
                color: "0xffffff"
        - type: popUp
          img: loading.gif
          msg: "loading..."
          viewTag: loading
          style:
            width: "1"
            height: "1"
            top: "0"
            left: "0"
            backgroundColor: "0x00000033"
            zIndex: "10"
          children:
            - type: view
              style:
                width: "0.32"
                height: "0.34"
                backgroundColor: "0xffffff"
                left: "0.4"
                zIndex: "20"
                top: "0.27"
                # box-shadow: "0 0 9px 3px #cccccc"
              children:
                - type: view
                  style:
                    width: "0.32"
                    height: "0.22"
                    display: flex
                    justifyContent: center
                    alignItems: flex-end
                  children:
                    - type: image
                      path: ____.img
                      style:
                        height: "0.15"
                - type: label
                  text: ___.msg
                  dataKey:
                  style:
                    width: "0.32"
                    height: "0.12"
                    display: flex
                    justifyContent: center
                    alignItems: center
                    fontSize: .Nfont.nf5
                    fontFamily: "Poppins"
                    color: "0xbdbdbd"
