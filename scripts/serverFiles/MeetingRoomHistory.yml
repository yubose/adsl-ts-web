MeetingRoomHistory:
  pageNumber: "90" # xd page 6
  title: "Meeting Rooms"
  init:
    - .SignInCheck
    - ..listData.get
    - if:
      - ..listData.historyroom.edge.0
      - continue
      - =.builtIn.checkField:
          dataIn:
            contentType: messageHidden
            wait: 100 
  lastTop: "0.0" # keep updated for list rendering.
  listData: 
    historyroom:
      edge:
        # - .Edge:
        #     name: 
        #       roomName: "History Room 1"
        #     tage: "10"
        # - .Edge:
        #     name: 
        #       roomName: "History Room 2"
        #     tage: "10"
    get:
      .EdgeAPI.get : ""
      api: re
      dataKey: listData.historyroom
      id: .Global.currentUser.vertex.id
      type : "40000"
      xfname : bvid 
      sCondition: "tage!=0"
      maxcount : "20"
      obfname : "mtime"
      _nonce: =.Global._nonce 
  components:
    - type: view
      style:
        left: "0"
        top: "0"
        width: "1"
        height: "1"
        position: "fixed"  
      children:
        - .MenuHeader:
        - .SubMenuView:
          children:
            - .SubMenuButton:
            - .SubMenuButton:
              text: "Create"
              style:
                left: "0.34"
              onClick:
                - goto: MeetingRoomCreate
            - .SubMenuButton:
              text: "History"
              style:
                left: "0.67"
                color: "0xffffffff"
              onClick:
                - goto: MeetingRoomHistory
        - type: label
          contentType: messageHidden
          text: "No meetings to review"
          style:
            left: "0.31"
            top: "0.25"
            width: "0.72"
            height: "0.04"
            color: "0x000058"
            fontSize: "16"
            isHidden: "true"
        - type: list # hardcoded listObject
          contentType: listObject
          listObject: ..listData.historyroom.edge # to dataObject to enumerate the list
          iteratorVar: itemObject
          style:
            left: "0"
            top: "0.2"
            width: "1"
            height: "0.8"
          #for loop through listObject, we got each itemObject
          children:
            - type: listItem
              itemObject: ""
              onClick:
                - actionType: updateObject # updateObject(dataKey, dataObject, dataObjectKey)
                  dataKey: Global.rootRoomInfo.edge
                  dataObject: itemObject # this must be a rootRoom
                - goto: MeetingSummary
              style:
                left: "0"
                top: "0"
                width: "1"
                height: "0.18"
                border:
                  style: "2"
                borderWidth: "1"
                borderColor: "0x00000011"

              children:
                - type: label
                  dataKey: itemObject.name.roomName
                  #text: "Room 8"
                  style:
                    left: "0.08"
                    top: "0.02"
                    width: "0.8"
                    height: "0.04"
                    fontSize: "16"
                    fontWeight: 400
                    color: "0x000000"
                    display: inline
                    textAlign:
                      x: left
                      y: center
                - type: label
                  # if .buildIn.string.formatUnixtime_en(itemObject.ctime) is not valid
                  # keep the 'text' field, otherwise, replace the 'text' field with the return value.
                  text=func: .builtIn.string.formatUnixtime_en
                  dataKey: itemObject.ctime # Mon Day, Year hh:mm:ss
                  text: "June 21, 2020" #get the date from the ctime
                  style:
                    left: "0.08"
                    top: "0.08"
                    width: "0.74"
                    height: "0.03"
                    fontSize: "16"
                    fontWeight: 400
                    color: "0x00000058"
                    display: inline
                    textAlign:
                      x: left
                      y: center
                - type: label
                  text=func:  .builtIn.string.formatDurationInSecond
                  dataKey: itemObject.tage # hh:mm'ss"
                  text: "5 minutes"
                  style:
                    left: "0.08"
                    top: "0.12"
                    width: "0.74"
                    height: "0.03"
                    fontSize: "16"
                    fontWeight: 400
                    color: "0x00000058"
                    display: inline
                    textAlign:
                      x: left
                      y: center
